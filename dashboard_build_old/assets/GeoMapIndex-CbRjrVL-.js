import{g as ze,R as O,S as J,l as Pe,r as j,j as d,T as Ae,N as de}from"./index-5jE5k8l3.js";import{B as Ne,a as Ie,b as ke}from"./index-B1BfH2Sj.js";import{a as f}from"./index-B07AlrGf.js";import{u as Ze}from"./useCustomQuery-Bh1LdxlD.js";var je={exports:{}};(function(t){var o=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function e(l,a,c){this.fn=l,this.context=a,this.once=c||!1}function s(l,a,c,h,y){if(typeof c!="function")throw new TypeError("The listener must be a function");var v=new e(c,h||l,y),m=i?i+a:a;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],v]:l._events[m].push(v):(l._events[m]=v,l._eventsCount++),l}function r(l,a){--l._eventsCount===0?l._events=new n:delete l._events[a]}function p(){this._events=new n,this._eventsCount=0}p.prototype.eventNames=function(){var a=[],c,h;if(this._eventsCount===0)return a;for(h in c=this._events)o.call(c,h)&&a.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(c)):a},p.prototype.listeners=function(a){var c=i?i+a:a,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var y=0,v=h.length,m=new Array(v);y<v;y++)m[y]=h[y].fn;return m},p.prototype.listenerCount=function(a){var c=i?i+a:a,h=this._events[c];return h?h.fn?1:h.length:0},p.prototype.emit=function(a,c,h,y,v,m){var w=i?i+a:a;if(!this._events[w])return!1;var _=this._events[w],b=arguments.length,L,g;if(_.fn){switch(_.once&&this.removeListener(a,_.fn,void 0,!0),b){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,h),!0;case 4:return _.fn.call(_.context,c,h,y),!0;case 5:return _.fn.call(_.context,c,h,y,v),!0;case 6:return _.fn.call(_.context,c,h,y,v,m),!0}for(g=1,L=new Array(b-1);g<b;g++)L[g-1]=arguments[g];_.fn.apply(_.context,L)}else{var z=_.length,E;for(g=0;g<z;g++)switch(_[g].once&&this.removeListener(a,_[g].fn,void 0,!0),b){case 1:_[g].fn.call(_[g].context);break;case 2:_[g].fn.call(_[g].context,c);break;case 3:_[g].fn.call(_[g].context,c,h);break;case 4:_[g].fn.call(_[g].context,c,h,y);break;default:if(!L)for(E=1,L=new Array(b-1);E<b;E++)L[E-1]=arguments[E];_[g].fn.apply(_[g].context,L)}}return!0},p.prototype.on=function(a,c,h){return s(this,a,c,h,!1)},p.prototype.once=function(a,c,h){return s(this,a,c,h,!0)},p.prototype.removeListener=function(a,c,h,y){var v=i?i+a:a;if(!this._events[v])return this;if(!c)return r(this,v),this;var m=this._events[v];if(m.fn)m.fn===c&&(!y||m.once)&&(!h||m.context===h)&&r(this,v);else{for(var w=0,_=[],b=m.length;w<b;w++)(m[w].fn!==c||y&&!m[w].once||h&&m[w].context!==h)&&_.push(m[w]);_.length?this._events[v]=_.length===1?_[0]:_:r(this,v)}return this},p.prototype.removeAllListeners=function(a){var c;return a?(c=i?i+a:a,this._events[c]&&r(this,c)):(this._events=new n,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=i,p.EventEmitter=p,t.exports=p})(je);var Ue=je.exports;const Re=ze(Ue);function He(t,o,i,n){function e(s){return s instanceof i?s:new i(function(r){r(s)})}return new(i||(i=Promise))(function(s,r){function p(c){try{a(n.next(c))}catch(h){r(h)}}function l(c){try{a(n.throw(c))}catch(h){r(h)}}function a(c){c.done?s(c.value):e(c.value).then(p,l)}a((n=n.apply(t,[])).next())})}function Be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var te,fe;function We(){return fe||(fe=1,te=function t(o,i){if(o===i)return!0;if(o&&i&&typeof o=="object"&&typeof i=="object"){if(o.constructor!==i.constructor)return!1;var n,e,s;if(Array.isArray(o)){if(n=o.length,n!=i.length)return!1;for(e=n;e--!==0;)if(!t(o[e],i[e]))return!1;return!0}if(o.constructor===RegExp)return o.source===i.source&&o.flags===i.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===i.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===i.toString();if(s=Object.keys(o),n=s.length,n!==Object.keys(i).length)return!1;for(e=n;e--!==0;)if(!Object.prototype.hasOwnProperty.call(i,s[e]))return!1;for(e=n;e--!==0;){var r=s[e];if(!t(o[r],i[r]))return!1}return!0}return o!==o&&i!==i}),te}var Fe=We(),Ke=Be(Fe);const ge="__googleMapsScriptId";var U;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(U||(U={}));class k{constructor({apiKey:o,authReferrerPolicy:i,channel:n,client:e,id:s=ge,language:r,libraries:p=[],mapIds:l,nonce:a,region:c,retries:h=3,url:y="https://maps.googleapis.com/maps/api/js",version:v}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=o,this.authReferrerPolicy=i,this.channel=n,this.client=e,this.id=s||ge,this.language=r,this.libraries=p,this.mapIds=l,this.nonce=a,this.region=c,this.retries=h,this.url=y,this.version=v,k.instance){if(!Ke(this.options,k.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(k.instance.options)}`);return k.instance}k.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?U.FAILURE:this.done?U.SUCCESS:this.loading?U.LOADING:U.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let o=this.url;return o+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(o+=`&key=${this.apiKey}`),this.channel&&(o+=`&channel=${this.channel}`),this.client&&(o+=`&client=${this.client}`),this.libraries.length>0&&(o+=`&libraries=${this.libraries.join(",")}`),this.language&&(o+=`&language=${this.language}`),this.region&&(o+=`&region=${this.region}`),this.version&&(o+=`&v=${this.version}`),this.mapIds&&(o+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(o+=`&auth_referrer_policy=${this.authReferrerPolicy}`),o}deleteScript(){const o=document.getElementById(this.id);o&&o.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((o,i)=>{this.loadCallback(n=>{n?i(n.error):o(window.google)})})}importLibrary(o){return this.execute(),google.maps.importLibrary(o)}loadCallback(o){this.callbacks.push(o),this.execute()}setScript(){var o,i;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(s=>!n[s]&&delete n[s]),!((i=(o=window==null?void 0:window.google)===null||o===void 0?void 0:o.maps)===null||i===void 0)&&i.importLibrary||(s=>{let r,p,l,a="The Google Maps JavaScript API",c="google",h="importLibrary",y="__ib__",v=document,m=window;m=m[c]||(m[c]={});const w=m.maps||(m.maps={}),_=new Set,b=new URLSearchParams,L=()=>r||(r=new Promise((g,z)=>He(this,void 0,void 0,function*(){var E;yield p=v.createElement("script"),p.id=this.id,b.set("libraries",[..._]+"");for(l in s)b.set(l.replace(/[A-Z]/g,u=>"_"+u[0].toLowerCase()),s[l]);b.set("callback",c+".maps."+y),p.src=this.url+"?"+b,w[y]=g,p.onerror=()=>r=z(Error(a+" could not load.")),p.nonce=this.nonce||((E=v.querySelector("script[nonce]"))===null||E===void 0?void 0:E.nonce)||"",v.head.append(p)})));w[h]||(w[h]=(g,...z)=>_.add(g)&&L().then(()=>w[h](g,...z)))})(n);const e=this.libraries.map(s=>this.importLibrary(s));e.length||e.push(this.importLibrary("core")),Promise.all(e).then(()=>this.callback(),s=>{const r=new ErrorEvent("error",{error:s});this.loadErrorCallback(r)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(o){if(this.errors.push(o),this.errors.length<=this.retries){const i=this.errors.length*Math.pow(2,this.errors.length);setTimeout(()=>{this.deleteScript(),this.setScript()},i)}else this.onerrorEvent=o,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(o=>{o(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){this.callback();return}this.loading=!0,this.setScript()}}}var $e=R;function R(t,o){this.x=t,this.y=o}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,o){return this.clone()._rotateAround(t,o)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var o=t.x-this.x,i=t.y-this.y;return o*o+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,o){return Math.atan2(this.x*o-this.y*t,this.x*t+this.y*o)},_matMult:function(t){var o=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=o,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var o=Math.cos(t),i=Math.sin(t),n=o*this.x-i*this.y,e=i*this.x+o*this.y;return this.x=n,this.y=e,this},_rotateAround:function(t,o){var i=Math.cos(t),n=Math.sin(t),e=o.x+i*(this.x-o.x)-n*(this.y-o.y),s=o.y+n*(this.x-o.x)+i*(this.y-o.y);return this.x=e,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};R.convert=function(t){return t instanceof R?t:Array.isArray(t)?new R(t[0],t[1]):t};const Z=ze($e);function ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(){return(M=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(null,arguments)}function ee(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,function(i,n){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(i,n)}(t,o)}function Ge(t){var o=function(i,n){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var s=e.call(i,"string");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}(t);return typeof o=="symbol"?o:o+""}var qe={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},Ve=function(t){function o(){return t.apply(this,arguments)||this}ee(o,t);var i=o.prototype;return i.shouldComponentUpdate=function(){return!1},i.render=function(){return O.createElement("div",{ref:this.props.registerChild,style:qe})},o}(j.Component),me=function(t){function o(n){var e;return(e=t.call(this)||this).gmapInstance=n,e}ee(o,t);var i=o.prototype;return i.getChildren=function(){return this.gmapInstance.props.children},i.getMousePosition=function(){return this.gmapInstance.mouse_},i.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},i.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},o}(Re),$=function(t,o){for(var i=M({},(function(s){if(s==null)throw new TypeError("Cannot destructure "+s)}(t),t)),n=0;n<o.length;n++){var e=o[n];e in i&&delete i[e]}return i},Xe=Object.prototype.hasOwnProperty;function _e(t,o){return t===o?t!==0||o!==0||1/t==1/o:t!=t&&o!=o}function D(t,o){if(_e(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var i=Object.keys(t),n=Object.keys(o);if(i.length!==n.length)return!1;for(var e=0;e<i.length;e++)if(!Xe.call(o,i[e])||!_e(t[i[e]],o[i[e]]))return!1;return!0}var Ye={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},Je={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},Q=function(t){function o(n){var e;return(e=t.call(this,n)||this)._getState=function(){return{children:e.props.dispatcher.getChildren(),updateCounter:e.props.dispatcher.getUpdateCounter()}},e._onChangeHandler=function(){if(e.dimensionsCache_){var s=(e.state.children||[]).length,r=e._getState();e.setState(r,function(){return(r.children||[]).length!==s&&e._onMouseChangeHandler()})}},e._onChildClick=function(){e.props.onChildClick&&e.hoverChildProps_&&e.props.onChildClick(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseDown=function(){e.props.onChildMouseDown&&e.hoverChildProps_&&e.props.onChildMouseDown(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseEnter=function(s,r){e.dimensionsCache_&&(e.props.onChildMouseEnter&&e.props.onChildMouseEnter(s,r),e.hoverChildProps_=r,e.hoverKey_=s,e.setState({hoverKey:s}))},e._onChildMouseLeave=function(){if(e.dimensionsCache_){var s=e.hoverKey_;s!=null&&(e.props.onChildMouseLeave&&e.props.onChildMouseLeave(s,e.hoverChildProps_),e.hoverKey_=null,e.hoverChildProps_=null,e.setState({hoverKey:null}))}},e._onMouseAllow=function(s){s||e._onChildMouseLeave(),e.allowMouse_=s},e._onMouseChangeHandler=function(){e.allowMouse_&&e._onMouseChangeHandlerRaf()},e._onMouseChangeHandlerRaf=function(){if(e.dimensionsCache_){var s=e.props.dispatcher.getMousePosition();if(s){var r=[],p=e.props.getHoverDistance();if(O.Children.forEach(e.state.children,function(c,h){if(c&&(c.props.latLng!==void 0||c.props.lat!==void 0||c.props.lng!==void 0)){var y=c.key!=null?c.key:h,v=e.props.distanceToMouse(e.dimensionsCache_[y],s,c.props);v<p&&r.push({key:y,dist:v,props:c.props})}}),r.length){r.sort(function(c,h){return c.dist-h.dist});var l=r[0].key,a=r[0].props;e.hoverKey_!==l&&(e._onChildMouseLeave(),e._onChildMouseEnter(l,a))}else e._onChildMouseLeave()}else e._onChildMouseLeave()}},e._getDimensions=function(s){return e.dimensionsCache_[s]},e.dimensionsCache_={},e.hoverKey_=null,e.hoverChildProps_=null,e.allowMouse_=!0,e.state=M({},e._getState(),{hoverKey:null}),e}ee(o,t);var i=o.prototype;return i.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},i.shouldComponentUpdate=function(n,e){return this.props.experimental===!0?!D(this.props,n)||!D($(this.state,["hoverKey"]),$(e,["hoverKey"])):!D(this.props,n)||!D(this.state,e)},i.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_={}},i.render=function(){var n=this,e=this.props.style||Ye;this.dimensionsCache_={};var s=O.Children.map(this.state.children,function(r,p){if(r){if(r.props.latLng===void 0&&r.props.lat===void 0&&r.props.lng===void 0)return O.cloneElement(r,{$geoService:n.props.geoService,$onMouseAllow:n._onMouseAllow,$prerender:n.props.prerender});var l=r.props.latLng!==void 0?r.props.latLng:{lat:r.props.lat,lng:r.props.lng},a=n.props.insideMapPanes?n.props.geoService.fromLatLngToDivPixel(l):n.props.geoService.fromLatLngToCenterPixel(l),c={left:a.x,top:a.y};if(r.props.seLatLng!==void 0||r.props.seLat!==void 0&&r.props.seLng!==void 0){var h=r.props.seLatLng!==void 0?r.props.seLatLng:{lat:r.props.seLat,lng:r.props.seLng},y=n.props.insideMapPanes?n.props.geoService.fromLatLngToDivPixel(h):n.props.geoService.fromLatLngToCenterPixel(h);c.width=y.x-a.x,c.height=y.y-a.y}var v=n.props.geoService.fromLatLngToContainerPixel(l),m=r.key!=null?r.key:p;return n.dimensionsCache_[m]=M({x:v.x,y:v.y},l),O.createElement("div",{key:m,style:M({},Je,c),className:r.props.$markerHolderClassName},O.cloneElement(r,{$hover:m===n.state.hoverKey,$getDimensions:n._getDimensions,$dimensionKey:m,$geoService:n.props.geoService,$onMouseAllow:n._onMouseAllow,$prerender:n.props.prerender}))}});return O.createElement("div",{style:e},s)},o}(j.Component);Q.propTypes={geoService:f.any,style:f.any,distanceToMouse:f.func,dispatcher:f.any,onChildClick:f.func,onChildMouseDown:f.func,onChildMouseLeave:f.func,onChildMouseEnter:f.func,getHoverDistance:f.func,insideMapPanes:f.bool,prerender:f.bool},Q.defaultProps={insideMapPanes:!1,prerender:!1};var Qe={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function et(t){return O.createElement("div",{style:Qe},O.createElement(Q,M({},t,{prerender:!0})))}var oe,B,ae,tt=["key"],nt=new Promise(function(t){ae=t}),ve=function(t,o){if(!t)return nt;if(B)return B;t.libraries||(t.libraries=[]);var i=[].concat(t.libraries);if(o&&(i.length!==0&&i.includes("visualization")||i.push("visualization")),typeof window>"u")throw new Error("google map cannot be loaded outside browser env");var n=t.key,e=function(s,r){if(s==null)return{};var p={};for(var l in s)if({}.hasOwnProperty.call(s,l)){if(r.indexOf(l)!==-1)continue;p[l]=s[l]}return p}(t,tt);return oe||(oe=new k(M({apiKey:n||""},e,{libraries:i}))),B=oe.load().then(function(){return ae(window.google.maps),window.google.maps}),ae(B),B};function Te(t,o,i){var n=i-o;return t===i?t:((t-o)%n+n)%n+o}var A=function(){function t(o,i){if(isNaN(o)||isNaN(i))throw new Error("Invalid LatLng object: ("+o+", "+i+")");this.lat=+o,this.lng=+i}return t.prototype.wrap=function(){return new t(this.lat,Te(this.lng,-180,180))},t}();A.convert=function(t){return t instanceof A?t:Array.isArray(t)?new A(t[0],t[1]):"lng"in t&&"lat"in t?new A(t.lat,t.lng):t};var ot=function(){function t(e,s,r){this.tileSize=e||512,this._minZoom=s||0,this._maxZoom=r||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new A(0,0),this.angle=0}var o,i,n=t.prototype;return n.zoomScale=function(e){return Math.pow(2,e)},n.scaleZoom=function(e){return Math.log(e)/Math.LN2},n.project=function(e,s){return new Z(this.lngX(e.lng,s),this.latY(e.lat,s))},n.unproject=function(e,s){return new A(this.yLat(e.y,s),this.xLng(e.x,s))},n.lngX=function(e,s){return(180+e)*(s||this.worldSize)/360},n.latY=function(e,s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*(s||this.worldSize)/360},n.xLng=function(e,s){return 360*e/(s||this.worldSize)-180},n.yLat=function(e,s){return 360/Math.PI*Math.atan(Math.exp((180-360*e/(s||this.worldSize))*Math.PI/180))-90},n.locationPoint=function(e){var s=this.project(e);return this.centerPoint._sub(this.point._sub(s)._rotate(this.angle))},n.pointLocation=function(e){var s=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(s))},o=t,(i=[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new Z(0,0)}},{key:"size",get:function(){return new Z(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-Te(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var s=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new Z(this.x,this.y)}}])&&function(e,s){for(var r=0;r<s.length;r++){var p=s[r];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,Ge(p.key),p)}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),t}(),rt=function(){function t(i){this.hasSize_=!1,this.hasView_=!1,this.transform_=new ot(i||512)}var o=t.prototype;return o.setView=function(i,n,e){this.transform_.center=A.convert(i),this.transform_.zoom=+n,this.transform_.bearing=+e,this.hasView_=!0},o.setViewSize=function(i,n){this.transform_.width=i,this.transform_.height=n,this.hasSize_=!0},o.setMapCanvasProjection=function(i,n){this.maps_=i,this.mapCanvasProjection_=n},o.canProject=function(){return this.hasSize_&&this.hasView_},o.hasSize=function(){return this.hasSize_},o.fromLatLngToCenterPixel=function(i){return this.transform_.locationPoint(A.convert(i))},o.fromLatLngToDivPixel=function(i){if(this.mapCanvasProjection_){var n=new this.maps_.LatLng(i.lat,i.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(n)}return this.fromLatLngToCenterPixel(i)},o.fromLatLngToContainerPixel=function(i){if(this.mapCanvasProjection_){var n=new this.maps_.LatLng(i.lat,i.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(n)}var e=this.fromLatLngToCenterPixel(i);return e.x-=this.transform_.worldSize*Math.round(e.x/this.transform_.worldSize),e.x+=this.transform_.width/2,e.y+=this.transform_.height/2,e},o.fromContainerPixelToLatLng=function(i){if(this.mapCanvasProjection_){var n=this.mapCanvasProjection_.fromContainerPixelToLatLng(i);return{lat:n.lat(),lng:n.lng()}}var e=M({},i);e.x-=this.transform_.width/2,e.y-=this.transform_.height/2;var s=this.transform_.pointLocation(Z.convert(e));return s.lng-=360*Math.round(s.lng/360),s},o.getWidth=function(){return this.transform_.width},o.getHeight=function(){return this.transform_.height},o.getZoom=function(){return this.transform_.zoom},o.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},o.getBounds=function(i,n){var e=i&&i[0]||0,s=i&&i[1]||0,r=i&&i[2]||0,p=i&&i[3]||0;if(this.getWidth()-s-p>0&&this.getHeight()-e-r>0){var l=this.transform_.pointLocation(Z.convert({x:p-this.getWidth()/2,y:e-this.getHeight()/2})),a=this.transform_.pointLocation(Z.convert({x:this.getWidth()/2-s,y:this.getHeight()/2-r})),c=[l.lat,l.lng,a.lat,a.lng,a.lat,l.lng,l.lat,a.lng];return n&&(c=c.map(function(h){return Math.round(h*n)/n})),c}return[0,0,0,0]},t}();function ye(t){if(window.requestAnimationFrame)return window.requestAnimationFrame(t);var o=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return o?o(t):window.setTimeout(t,1e3/60)}var it=Math.log2?Math.log2:function(t){return Math.log(t)/Math.LN2};function be(t,o){return Object.keys(t).reduce(function(i,n){return o(t[n])&&(i[n]=t[n]),i},{})}var I=function(t){if(t!==null&&typeof t=="object"){if(Object.keys(t).length===0)return!0}else if(t==null||t==="")return!0;return!1},st=Object.prototype.toString;function G(t){return typeof t=="number"||function(o){return!!o&&typeof o=="object"}(t)&&st.call(t)==="[object Number]"}var q=null;function Ce(){if(q)return q;if(typeof navigator<"u"){var t=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Firefox")>-1,i=navigator.userAgent.toLowerCase().indexOf("op")>-1,n=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Safari")>-1;return n&&e&&(e=!1),n&&i&&(n=!1),q={isExplorer:t,isFirefox:o,isOpera:i,isChrome:n,isSafari:e}}return q={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var we=function(t){return Function.prototype.toString.call(t)};function K(t){if(!t||typeof t!="object")return!1;var o=typeof t.constructor=="function"?Object.getPrototypeOf(t):Object.prototype;if(o===null)return!0;var i=o.constructor;return typeof i=="function"&&i instanceof i&&we(i)===we(Object)}function W(t,o,i,n){t.addEventListener(o,i,function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{e=!1}return e}()?{capture:n,passive:!0}:n)}var T,le=!(typeof window>"u"||!window.document||!window.document.createElement);T=le?window:typeof self<"u"?self:void 0;var Me,ue=typeof document<"u"&&document.attachEvent,xe=!1;if(le&&!ue){var at=function(){var t=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||function(o){return T.setTimeout(o,20)};return function(o){return t(o)}}(),lt=(Me=T.cancelAnimationFrame||T.mozCancelAnimationFrame||T.webkitCancelAnimationFrame||T.clearTimeout,function(t){return Me(t)}),ce=function(t){var o=t.__resizeTriggers__,i=o.firstElementChild,n=o.lastElementChild,e=i.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,e.style.width=i.offsetWidth+1+"px",e.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},Le=function(t){var o=this;ce(this),this.__resizeRAF__&&lt(this.__resizeRAF__),this.__resizeRAF__=at(function(){(function(i){return i.offsetWidth!=i.__resizeLast__.width||i.offsetHeight!=i.__resizeLast__.height})(o)&&(o.__resizeLast__.width=o.offsetWidth,o.__resizeLast__.height=o.offsetHeight,o.__resizeListeners__.forEach(function(i){i.call(o,t)}))})},re=!1,ie="",he="animationstart",se="Webkit Moz O ms".split(" "),ut="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(le){var Se=document.createElement("fakeelement");if(Se.style.animationName!==void 0&&(re=!0),re===!1){for(var F=0;F<se.length;F++)if(Se.style[se[F]+"AnimationName"]!==void 0){ie="-"+se[F].toLowerCase()+"-",he=ut[F],re=!0;break}}}var pe="resizeanim",ct="@"+ie+"keyframes "+pe+" { from { opacity: 0; } to { opacity: 0; } } ",ht=ie+"animation: 1ms "+pe+"; "}var X=J.createPortal!==void 0,Ee=X?J.createPortal:J.unstable_renderSubtreeIntoContainer,V=function(t){return K(t)?t:{lat:t[0],lng:t[1]}},Oe=function(t,o){return o<t?t:o},Y=function(t){function o(n){var e;if((e=t.call(this,n)||this)._getMinZoom=function(){if(e.geoService_.getWidth()>0||e.geoService_.getHeight()>0){var r=Math.ceil(e.geoService_.getWidth()/256)+2,p=Math.ceil(e.geoService_.getHeight()/256)+2,l=Math.max(r,p);return Math.ceil(it(l))}return 3},e._computeMinZoom=function(r){return I(r)?e._getMinZoom():r},e._mapDomResizeCallback=function(){if(e.resetSizeOnIdle_=!0,e.maps_){var r=e.props.center||e.props.defaultCenter,p=e.map_.getCenter();e.maps_.event.trigger(e.map_,"resize"),e.map_.setCenter(e.props.resetBoundsOnResize?r:p)}},e._setLayers=function(r){r.forEach(function(p){e.layers_[p]=new e.maps_[p],e.layers_[p].setMap(e.map_)})},e._renderPortal=function(){return O.createElement(Q,{experimental:e.props.experimental,onChildClick:e._onChildClick,onChildMouseDown:e._onChildMouseDown,onChildMouseEnter:e._onChildMouseEnter,onChildMouseLeave:e._onChildMouseLeave,geoService:e.geoService_,insideMapPanes:!0,distanceToMouse:e.props.distanceToMouse,getHoverDistance:e._getHoverDistance,dispatcher:e.markersDispatcher_})},e._initMap=function(){if(!e.initialized_){e.initialized_=!0;var r=V(e.props.center||e.props.defaultCenter);e.geoService_.setView(r,e.props.zoom||e.props.defaultZoom,0),e._onBoundsChanged();var p=M({},e.props.apiKey&&{key:e.props.apiKey},e.props.bootstrapURLKeys);e.props.googleMapLoader(p,e.props.heatmapLibrary).then(function(l){if(e.mounted_){var a,c,h=e.geoService_.getCenter(),y={zoom:e.props.zoom||e.props.defaultZoom,center:new l.LatLng(h.lat,h.lng)};e.props.heatmap.positions&&(Object.assign(ne(e),{heatmap:(a=l,c=e.props.heatmap,new a.visualization.HeatmapLayer({data:c.positions.reduce(function(C,N){var x=N.weight,P=x===void 0?1:x;return C.push({location:new a.LatLng(N.lat,N.lng),weight:P}),C},[])}))}),function(C,N){var x=N.options,P=x===void 0?{}:x;Object.keys(P).map(function(H){return C.set(H,P[H])})}(e.heatmap,e.props.heatmap));var v=be(l,K),m=typeof e.props.options=="function"?e.props.options(v):e.props.options,w=!I(e.props.draggable)&&{draggable:e.props.draggable},_=e._computeMinZoom(m.minZoom);e.minZoom_=_;var b=M({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:_},m,y);e.defaultDraggableOption_=I(b.draggable)?e.defaultDraggableOption_:b.draggable;var L=M({},b,w);L.minZoom=Oe(L.minZoom,_);var g=new l.Map(e.googleMapDom_,L);e.map_=g,e.maps_=l,e._setLayers(e.props.layerTypes);var z=l.version.match(/^3\.(\d+)\./),E=z&&Number(z[1]),u=ne(e),S=Object.assign(new l.OverlayView,{onAdd:function(){var C=typeof screen<"u"?screen.width+"px":"2000px",N=typeof screen<"u"?screen.height+"px":"2000px",x=document.createElement("div");if(x.style.backgroundColor="transparent",x.style.position="absolute",x.style.left="0px",x.style.top="0px",x.style.width=C,x.style.height=N,u.props.overlayViewDivStyle){var P=u.props.overlayViewDivStyle;typeof P=="object"&&Object.keys(P).forEach(function(H){x.style[H]=P[H]})}this.getPanes().overlayMouseTarget.appendChild(x),u.geoService_.setMapCanvasProjection(l,S.getProjection()),X?u.setState({overlay:x}):Ee(u,u._renderPortal(),x,function(){return u.setState({overlay:x})})},onRemove:function(){var C=u.state.overlay;C&&!X&&J.unmountComponentAtNode(C),u.setState({overlay:null})},draw:function(){if(u.updateCounter_++,u._onBoundsChanged(g,l,!u.props.debounced),u.googleApiLoadedCalled_||(u._onGoogleApiLoaded({map:g,maps:l,ref:u.googleMapDom_}),u.googleApiLoadedCalled_=!0),u.mouse_){var C=u.geoService_.fromContainerPixelToLatLng(u.mouse_);u.mouse_.lat=C.lat,u.mouse_.lng=C.lng}u._onChildMouseMove(),u.markersDispatcher_&&(Pe.flushSync(function(){u.markersDispatcher_.emit("kON_CHANGE")}),u.fireMouseEventOnIdle_&&u.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});e.overlay_=S,S.setMap(g),e.props.heatmap.positions&&e.heatmap.setMap(g),e.props.onTilesLoaded&&l.event.addListener(g,"tilesloaded",function(){u._onTilesLoaded()}),l.event.addListener(g,"zoom_changed",function(){u.geoService_.getZoom()!==g.getZoom()&&(u.zoomAnimationInProgress_||(u.zoomAnimationInProgress_=!0,u._onZoomAnimationStart(g.zoom)),E<32)&&(new Date().getTime()-e.zoomControlClickTime_<300?ye(function(){return ye(function(){u.updateCounter_++,u._onBoundsChanged(g,l)})}):(u.updateCounter_++,u._onBoundsChanged(g,l)))}),l.event.addListener(g,"idle",function(){if(e.resetSizeOnIdle_){e._setViewSize();var C=e._computeMinZoom(m.minZoom);C!==e.minZoom_&&(e.minZoom_=C,g.setOptions({minZoom:C})),e.resetSizeOnIdle_=!1}u.zoomAnimationInProgress_&&(u.zoomAnimationInProgress_=!1,u._onZoomAnimationEnd(g.zoom)),u.updateCounter_++,u._onBoundsChanged(g,l),u.dragTime_=0,u.markersDispatcher_&&u.markersDispatcher_.emit("kON_CHANGE")}),l.event.addListener(g,"mouseover",function(){u.mouseInMap_=!0}),l.event.addListener(g,"click",function(){u.mouseInMap_=!0}),l.event.addListener(g,"mouseout",function(){u.mouseInMap_=!1,u.mouse_=null,u.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),l.event.addListener(g,"drag",function(){u.dragTime_=new Date().getTime(),u._onDrag(g)}),l.event.addListener(g,"dragend",function(){var C=l.event.addListener(g,"idle",function(){l.event.removeListener(C),u._onDragEnd(g)})}),l.event.addListener(g,"maptypeid_changed",function(){u._onMapTypeIdChange(g.getMapTypeId())})}}).catch(function(l){throw e._onGoogleApiLoaded({map:null,maps:null,ref:e.googleMapDom_}),l})}},e._onGoogleApiLoaded=function(){var r;e.props.onGoogleApiLoaded&&(r=e.props).onGoogleApiLoaded.apply(r,arguments)},e._getHoverDistance=function(){return e.props.hoverDistance},e._onDrag=function(){var r;return e.props.onDrag&&(r=e.props).onDrag.apply(r,arguments)},e._onDragEnd=function(){var r;return e.props.onDragEnd&&(r=e.props).onDragEnd.apply(r,arguments)},e._onMapTypeIdChange=function(){var r;return e.props.onMapTypeIdChange&&(r=e.props).onMapTypeIdChange.apply(r,arguments)},e._onZoomAnimationStart=function(){var r;return e.props.onZoomAnimationStart&&(r=e.props).onZoomAnimationStart.apply(r,arguments)},e._onZoomAnimationEnd=function(){var r;return e.props.onZoomAnimationEnd&&(r=e.props).onZoomAnimationEnd.apply(r,arguments)},e._onTilesLoaded=function(){return e.props.onTilesLoaded&&e.props.onTilesLoaded()},e._onChildClick=function(){var r;if(e.props.onChildClick)return(r=e.props).onChildClick.apply(r,arguments)},e._onChildMouseDown=function(r,p){e.childMouseDownArgs_=[r,p],e.props.onChildMouseDown&&e.props.onChildMouseDown(r,p,M({},e.mouse_))},e._onChildMouseUp=function(){var r;e.childMouseDownArgs_&&(e.props.onChildMouseUp&&(r=e.props).onChildMouseUp.apply(r,e.childMouseDownArgs_.concat([M({},e.mouse_)])),e.childMouseDownArgs_=null,e.childMouseUpTime_=new Date().getTime())},e._onChildMouseMove=function(){var r;e.childMouseDownArgs_&&e.props.onChildMouseMove&&(r=e.props).onChildMouseMove.apply(r,e.childMouseDownArgs_.concat([M({},e.mouse_)]))},e._onChildMouseEnter=function(){var r;if(e.props.onChildMouseEnter)return(r=e.props).onChildMouseEnter.apply(r,arguments)},e._onChildMouseLeave=function(){var r;if(e.props.onChildMouseLeave)return(r=e.props).onChildMouseLeave.apply(r,arguments)},e._setViewSize=function(){if(e.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)e.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var r=e.googleMapDom_;e.geoService_.setViewSize(r.clientWidth,r.clientHeight)}e._onBoundsChanged()}},e._onWindowResize=function(){e.resetSizeOnIdle_=!0},e._onMapMouseMove=function(r){if(e.mouseInMap_){var p=new Date().getTime();p-e.mouseMoveTime_>50&&(e.boundingRect_=r.currentTarget.getBoundingClientRect()),e.mouseMoveTime_=p;var l=r.clientX-e.boundingRect_.left,a=r.clientY-e.boundingRect_.top;e.mouse_||(e.mouse_={x:0,y:0,lat:0,lng:0}),e.mouse_.x=l,e.mouse_.y=a;var c=e.geoService_.fromContainerPixelToLatLng(e.mouse_);e.mouse_.lat=c.lat,e.mouse_.lng=c.lng,e._onChildMouseMove(),p-e.dragTime_<100?e.fireMouseEventOnIdle_=!0:(e.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),e.fireMouseEventOnIdle_=!1)}},e._onClick=function(){var r;return e.props.onClick&&!e.childMouseDownArgs_&&new Date().getTime()-e.childMouseUpTime_>300&&e.dragTime_===0&&(r=e.props).onClick.apply(r,arguments)},e._onMapClick=function(r){e.markersDispatcher_&&(e._onMapMouseMove(r),new Date().getTime()-e.dragTime_>100&&(e.mouse_&&e._onClick(M({},e.mouse_,{event:r})),e.markersDispatcher_.emit("kON_CLICK",r)))},e._onMapMouseDownNative=function(r){e.mouseInMap_&&e._onMapMouseDown(r)},e._onMapMouseDown=function(r){e.markersDispatcher_&&new Date().getTime()-e.dragTime_>100&&(e._onMapMouseMove(r),e.markersDispatcher_.emit("kON_MDOWN",r))},e._onMapMouseDownCapture=function(){Ce().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._onKeyDownCapture=function(){Ce().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._isCenterDefined=function(r){return r&&(K(r)&&G(r.lat)&&G(r.lng)||r.length===2&&G(r[0])&&G(r[1]))},e._onBoundsChanged=function(r,p,l){if(r){var a=r.getCenter();e.geoService_.setView([a.lat(),a.lng()],r.getZoom(),0)}if((e.props.onChange||e.props.onBoundsChange)&&e.geoService_.canProject()){var c=e.geoService_.getZoom(),h=e.geoService_.getBounds(),y=e.geoService_.getCenter();if(!function(m,w,_){if(m&&w){for(var b=0;b!==m.length;++b)if(Math.abs(m[b]-w[b])>1e-5)return!1;return!0}return!1}(h,e.prevBounds_)&&l!==!1){var v=e.geoService_.getBounds(e.props.margin);e.props.onBoundsChange&&e.props.onBoundsChange(e.centerIsObject_?M({},y):[y.lat,y.lng],c,h,v),e.props.onChange&&e.props.onChange({center:M({},y),zoom:c,bounds:{nw:{lat:h[0],lng:h[1]},se:{lat:h[2],lng:h[3]},sw:{lat:h[4],lng:h[5]},ne:{lat:h[6],lng:h[7]}},marginBounds:{nw:{lat:v[0],lng:v[1]},se:{lat:v[2],lng:v[3]},sw:{lat:v[4],lng:v[5]},ne:{lat:v[6],lng:v[7]}},size:e.geoService_.hasSize()?{width:e.geoService_.getWidth(),height:e.geoService_.getHeight()}:{width:0,height:0}}),e.prevBounds_=h}}},e._registerChild=function(r){e.googleMapDom_=r},e.mounted_=!1,e.initialized_=!1,e.googleApiLoadedCalled_=!1,e.map_=null,e.maps_=null,e.prevBounds_=null,e.heatmap=null,e.layers_={},e.mouse_=null,e.mouseMoveTime_=0,e.boundingRect_=null,e.mouseInMap_=!0,e.dragTime_=0,e.fireMouseEventOnIdle_=!1,e.updateCounter_=0,e.markersDispatcher_=new me(ne(e)),e.geoService_=new rt(256),e.centerIsObject_=K(e.props.center),e.minZoom_=3,e.defaultDraggableOption_=!0,e.zoomControlClickTime_=0,e.childMouseDownArgs_=null,e.childMouseUpTime_=0,e.googleMapDom_=null,e._isCenterDefined(e.props.center||e.props.defaultCenter)){var s=V(e.props.center||e.props.defaultCenter);e.geoService_.setView(s,e.props.zoom||e.props.defaultZoom,0)}return e.zoomAnimationInProgress_=!1,e.state={overlay:null},e}ee(o,t);var i=o.prototype;return i.componentDidMount=function(){var n=this;this.mounted_=!0,this.markersDispatcher_=new me(this),W(window,"resize",this._onWindowResize,!1),W(window,"keydown",this._onKeyDownCapture,!0);var e=this.googleMapDom_;e&&W(e,"mousedown",this._onMapMouseDownNative,!0),W(window,"mouseup",this._onChildMouseUp,!1);var s=M({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(s,this.props.heatmapLibrary),setTimeout(function(){n._setViewSize(),n._isCenterDefined(n.props.center||n.props.defaultCenter)&&n._initMap()},0,this),this.props.resetBoundsOnResize&&function(r,p){if(r.parentNode===void 0){var l=document.createElement("div");r.parentNode=l}r=r.parentNode,ue?r.attachEvent("onresize",p):(r.__resizeTriggers__||(getComputedStyle(r).position=="static"&&(r.style.position="relative"),function(){if(!xe){var a=(ct||"")+".resize-triggers { "+(ht||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',c=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css",h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a)),c.appendChild(h),xe=!0}}(),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=document.createElement("div")).className="resize-triggers",r.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',r.appendChild(r.__resizeTriggers__),ce(r),W(r,"scroll",Le,!0),he&&r.__resizeTriggers__.addEventListener(he,function(a){a.animationName==pe&&ce(r)})),r.__resizeListeners__.push(p))}(e,this._mapDomResizeCallback)},i.shouldComponentUpdate=function(n,e){return!D($(this.props,["draggable"]),$(n,["draggable"]))||!D(this.state,e)},i.componentDidUpdate=function(n){var e=this;if(!this._isCenterDefined(n.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return e._initMap()},0),this.map_){var s=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var r=V(this.props.center),p=this._isCenterDefined(n.center)?V(n.center):null;(!p||Math.abs(r.lat-p.lat)+Math.abs(r.lng-p.lng)>1e-5)&&Math.abs(r.lat-s.lat)+Math.abs(r.lng-s.lng)>1e-5&&this.map_.panTo({lat:r.lat,lng:r.lng})}if(I(this.props.zoom)||Math.abs(this.props.zoom-n.zoom)>0&&this.map_.setZoom(this.props.zoom),!I(n.draggable)&&I(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):D(n.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!I(this.props.options)&&!D(n.options,this.props.options)){var l=be(this.maps_,K),a=typeof this.props.options=="function"?this.props.options(l):this.props.options;if("minZoom"in(a=$(a,["zoom","center","draggable"]))){var c=this._computeMinZoom(a.minZoom);a.minZoom=Oe(a.minZoom,c)}this.map_.setOptions(a)}D(this.props.layerTypes,n.layerTypes)||(Object.keys(this.layers_).forEach(function(h){e.layers_[h].setMap(null),delete e.layers_[h]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!D(this.props.heatmap.positions,n.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(h){return{location:new e.maps_.LatLng(h.lat,h.lng),weight:h.weight}})),this.heatmap&&!D(this.props.heatmap.options,n.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(h){e.heatmap.set(h,e.props.heatmap.options[h])})}this.markersDispatcher_.emit("kON_CHANGE"),D(this.props.hoverDistance,n.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},i.componentWillUnmount=function(){this.mounted_=!1;var n,e,s=this.googleMapDom_;s&&s.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(e=this._mapDomResizeCallback,n=(n=s).parentNode,ue?n.detachEvent("onresize",e):(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(e),1),n.__resizeListeners__.length||(n.removeEventListener("scroll",Le),n.__resizeTriggers__=!n.removeChild(n.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},i.render=function(){var n=this.state.overlay,e=n?null:O.createElement(et,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return O.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},O.createElement(Ve,{registerChild:this._registerChild}),X&&n&&Ee(this._renderPortal(),n),e)},o}(j.Component);Y.propTypes={apiKey:f.string,bootstrapURLKeys:f.any,defaultCenter:f.oneOfType([f.array,f.shape({lat:f.number,lng:f.number})]),center:f.oneOfType([f.array,f.shape({lat:f.number,lng:f.number})]),defaultZoom:f.number,zoom:f.number,onBoundsChange:f.func,onChange:f.func,onClick:f.func,onChildClick:f.func,onChildMouseDown:f.func,onChildMouseUp:f.func,onChildMouseMove:f.func,onChildMouseEnter:f.func,onChildMouseLeave:f.func,onZoomAnimationStart:f.func,onZoomAnimationEnd:f.func,onDrag:f.func,onDragEnd:f.func,onMapTypeIdChange:f.func,onTilesLoaded:f.func,options:f.any,distanceToMouse:f.func,hoverDistance:f.number,debounced:f.bool,margin:f.array,googleMapLoader:f.any,onGoogleApiLoaded:f.func,yesIWantToUseGoogleMapApiInternals:f.bool,draggable:f.bool,style:f.any,resetBoundsOnResize:f.bool,layerTypes:f.arrayOf(f.string),shouldUnregisterMapOnUnmount:f.bool},Y.defaultProps={distanceToMouse:function(t,o){return Math.sqrt((t.x-o.x)*(t.x-o.x)+(t.y-o.y)*(t.y-o.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:ve,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},Y.googleMapLoader=ve;const pt=({handleSingleView:t,langData:o})=>{const i=({id:n,lat:e,lng:s,address:r,holding:p,realImg:l,propId:a,currentStatus:c,handleSingleView:h})=>{const y=m=>{switch(m){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500";default:return"bg-gray-500"}},v=m=>{switch(m){case 1:return"border-red-500 bg-red-100 hover:bg-red-200 text-red-800";case 2:return"border-yellow-500 bg-yellow-100 hover:bg-yellow-200 text-yellow-800";case 3:return"border-green-500 bg-green-100 hover:bg-green-200 text-green-800";default:return"border-gray-600 bg-white hover:bg-gray-100 text-gray-800"}};return d.jsxs("div",{onClick:()=>{h({holding:p,lat:e,lng:s,address:r,full_doc:l,propId:a,currentStatus:c})},className:"cursor-pointer transition ease-in-out delay-150 hover:z-50 hover:-translate-y-1 hover:scale-125 duration-300",children:[d.jsx("div",{className:`w-8 h-8 ${y(c)} rounded-full flex items-center justify-center text-white text-xs font-bold`,children:"ðŸ“"}),d.jsx("div",{className:"mt-1",children:d.jsx("button",{className:`rounded-md shadow-md text-sm p-1 text-center ${v(c)}`,children:p||"No Data"})})]})};return d.jsx("div",{style:{height:"calc(100vh - 120px)",width:"100%"},children:d.jsx(Y,{bootstrapURLKeys:{key:"AIzaSyC0AArVHmqXGAxgWcljuOD_fvY5eDXfwS0"},defaultCenter:{lat:23.3937225277778,lng:85.3721084444444},defaultZoom:12,options:{fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0},children:Array.isArray(o)&&(o==null?void 0:o.map((n,e)=>(n==null?void 0:n.latitude)&&(n==null?void 0:n.longitude)&&(n==null?void 0:n.latitude)!=="NaN"&&(n==null?void 0:n.longitude)!=="NaN"&&d.jsx(i,{realImg:n==null?void 0:n.full_doc,id:(n==null?void 0:n.holding_no)||"",holding:(n==null?void 0:n.holding_no)||"",lat:parseFloat((n==null?void 0:n.latitude)||"0"),lng:parseFloat((n==null?void 0:n.longitude)||"0"),address:(n==null?void 0:n.prop_address)||"",propId:(n==null?void 0:n.property_id)||"",currentStatus:n==null?void 0:n.currentStatus,handleSingleView:t},e)))})})},De="/assets/property.png",_t=t=>{var z,E;const[o,i]=j.useState(1),[n,e]=j.useState(""),[s,r]=j.useState(null),[p,l]=j.useState(!1),[a,c]=j.useState(null),[h,y]=j.useState(null),{theme:v}=Ae(),m=Ze({}),w=`https://www.google.com/maps/search/?api=1&query=${a==null?void 0:a.lat},${a==null?void 0:a.lng}`,_=async u=>{var S;if(!(!u||!t.ulbId)){t==null||t.setIsLoadingGeoMap(!0),i(Number(u));try{const C=await m.mutateAsync({api:de.getHeatMapDataByWard,data:{wardId:u,ulbId:t.ulbId}});r(((S=C==null?void 0:C.data)==null?void 0:S.data)||[])}catch{r([])}finally{t==null||t.setIsLoadingGeoMap(!1)}}},b=async()=>{var u;try{const S=await m.mutateAsync({api:de.wardByUlb,data:{}});y(((u=S==null?void 0:S.data)==null?void 0:u.data)||[])}catch{}};j.useEffect(()=>{b()},[]);const L=u=>{l(!0),c(u)},g=u=>{window.location.replace(`/property/holdingPropertyDetails/${u}`)};return d.jsxs(d.Fragment,{children:[!t.isPreview&&d.jsx("div",{className:"float-right relative h-fit",children:d.jsx("div",{className:"z-30 p-1 md:p-3 absolute top-0 right-0 bg-card border border-border rounded-b-lg ease-in duration-300",children:d.jsxs("div",{className:"flex gap-6 min-w-3xl",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-xs md:text-base text-foreground",children:"Select Ulb"}),d.jsxs("select",{onChange:u=>{t.setUlbId(u.target.value),e("")},value:t.ulbId||"",className:"cursor-pointer border border-border bg-background text-foreground shadow rounded h-9",name:"ulbList",children:[d.jsx("option",{value:"",children:"-- Select ULB --"}),Array.isArray(t==null?void 0:t.ulbListData)&&((z=t==null?void 0:t.ulbListData)==null?void 0:z.map((u,S)=>d.jsx("option",{value:(u==null?void 0:u.id)||"",children:(u==null?void 0:u.ulb_name)||"Unknown ULB"},`wardlistForMap${S}`)))]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-xs md:text-base text-foreground",children:"Select Ward"}),d.jsxs("select",{onChange:u=>{e(u.target.value),_(u.target.value)},value:n,className:"cursor-pointer border border-border bg-background text-foreground w-44 shadow rounded h-9",name:"wardList",children:[d.jsx("option",{value:"",children:"-- Select Ward --"}),Array.isArray(t==null?void 0:t.wardListData)&&((E=t==null?void 0:t.wardListData)==null?void 0:E.map((u,S)=>d.jsx("option",{value:(u==null?void 0:u.id)||"",children:(u==null?void 0:u.ward_name)||"Unknown Ward"},`wardlistForMap${S}`)))]})]})]})})}),d.jsxs("div",{className:"grid grid-cols-12 relative h-fit",children:[p?d.jsx("div",{className:"z-50 md:w-1/4 absolute top-0 left-0 bg-card border border-border rounded-b-lg ease-in duration-300",children:d.jsxs("div",{className:"m-1",children:[d.jsxs("div",{className:"max-w-sm rounded overflow-hidden shadow-lg bg-card",children:[d.jsx("img",{className:"w-full text-center h-40 object-cover",src:De,alt:"Property",onError:u=>{u.target.src=De}}),d.jsxs("div",{className:"px-6 py-4 text-sm text-foreground",children:[d.jsx("div",{className:"font-bold text-xl mb-2",children:"Property Details"}),d.jsxs("button",{className:`mt-5 px-5 py-2 border transition-colors ${v==="dark"?"bg-indigo-600 hover:bg-indigo-700 text-white border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white border-indigo-400"}`,onClick:()=>g((a==null?void 0:a.propId)||""),children:["View ",d.jsx(Ne,{className:"inline"})]}),d.jsx("p",{className:"border-b my-3 border-border"}),d.jsxs("p",{children:["Holding:"," ",d.jsx("span",{className:"font-semibold text-foreground",children:(a==null?void 0:a.holding)||"Holding Not Available"})]}),d.jsxs("p",{children:["Address:"," ",d.jsx("span",{className:"font-semibold text-foreground text-xs",children:(a==null?void 0:a.address)||"Address Not Available"})]}),d.jsxs("p",{children:["Latitude:"," ",d.jsx("span",{className:"font-semibold text-foreground",children:(a==null?void 0:a.lat)||"Latitude Not Available"})]}),d.jsxs("p",{children:["Longitude:"," ",d.jsx("span",{className:"font-semibold text-foreground",children:(a==null?void 0:a.lng)||"Longitude Not Available"})]}),d.jsx("p",{className:"mt-5",children:d.jsx("a",{href:a!=null&&a.lat&&(a!=null&&a.lng)?w:void 0,target:"_blank",rel:"noopener noreferrer",className:`
                      inline-block
                      px-5
                      py-2
                      border
                      text-white
                      transition-colors
                      ${v==="dark"?"border-indigo-500 bg-indigo-600":"border-indigo-400 bg-indigo-600"}
                      ${!(a!=null&&a.lat)||!(a!=null&&a.lng)?"opacity-50 cursor-not-allowed pointer-events-none":"hover:bg-indigo-700"}
                    `,children:"Open in Google Maps"})})]}),d.jsxs("div",{className:"px-6 pt-4 pb-2",children:[d.jsxs("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:["Ward ",o]}),d.jsx("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:"Ranchi"}),d.jsx("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:"Property"})]})]}),d.jsx("p",{onClick:()=>l(!1),className:"cursor-pointer absolute right-0 mr-3 mb-3 bottom-0",children:d.jsx(Ie,{size:30,color:"indigo"})})]})}):d.jsx("div",{onClick:()=>l(!0),className:"z-50 h-9 w-40 md:w-1/4 opacity-50 hover:opacity-100 absolute top-0 left-0 bg-card border border-border rounded-b-lg shadow-lg cursor-pointer ease-in duration-300",children:d.jsx("div",{className:"cursor-pointer absolute right-0 mr-3 mb-1 bottom-0",children:d.jsxs("p",{className:"ml-2 flex",children:[d.jsx("p",{className:"mr-5 font-semibold text-blue-700 dark:text-blue-400 text-center text-xs md:text-base",children:"View Property Details"}),d.jsx(ke,{size:27,color:"indigo"})]})})}),d.jsx("div",{className:"col-span-12 text-black",children:d.jsx(pt,{handleSingleView:L,langData:s})})]})]})};export{_t as G};
