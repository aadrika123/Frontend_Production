import{Q as y,u as M,k as $,r as d,d as z,o as E,j as e,M as F,F as q,a2 as m,R as u,B as O,c as A,a as h,l as L,g as R,_ as w}from"./index-D-9IcDeW.js";import{P as D}from"./index-DNOi358C.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=y("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=y("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,W=A().shape({currentPassword:h().required("Current Password is required"),newPassword:h().required("New Password is required").matches(j,"Password must be at least 8 characters and include uppercase, lowercase, number, and special character"),confirmPassword:h().required("Confirm Password is required").oneOf([L("newPassword")],"Passwords must match")});function B(){const b=M({}),P=$(),[l,N]=d.useState(!1),[i,v]=d.useState(!1),[c,k]=d.useState(!1),[s,t]=d.useState(""),o=z({resolver:E(W)}),S=a=>{if(!a){t("");return}const n=j.test(a);a.length<5?t("Weak"):t(n?"Strong":"Medium")},C=async a=>{var n,p,f;try{const r=await b.mutateAsync({api:R.changePassword,data:a});(n=r.data)!=null&&n.success?(w.success((p=r==null?void 0:r.data)==null?void 0:p.message),P("/grievance/auth/login")):w.error((f=r.data)==null?void 0:f.message),o.reset(),t("")}catch(r){console.log(r),w.error("Something went wrong!")}};return e.jsx(D,{children:e.jsx("section",{className:"relative flex w-full items-center justify-center dark:bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white px-4 py-8 shadow-md dark:bg-gray-800",children:[e.jsx("h1",{className:"mb-2 text-center text-2xl font-semibold text-gray-800 dark:text-white",children:e.jsx("span",{className:"text-[#0D7538]",children:"Change Password"})}),e.jsx(F,{className:"px-2 text-center text-sm text-gray-500 dark:text-gray-400",children:"Easily change your password"}),e.jsx(q,{methods:o,onSubmit:o.handleSubmit(C),children:e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"currentPassword",children:"Old Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"mt-1 w-full rounded-md bg-gray-100 dark:bg-gray-700",name:"currentPassword",type:l?"text":"password",placeholder:"Enter old password"}),e.jsx("span",{onClick:()=>N(!l),className:"absolute right-3 top-3 cursor-pointer text-gray-500",children:l?e.jsx(x,{size:20}):e.jsx(g,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"mt-1 w-full rounded-md bg-gray-100 dark:bg-gray-700",name:"newPassword",type:i?"text":"password",placeholder:"Enter new password",onChange:a=>{o.setValue("newPassword",a.target.value),S(a.target.value)}}),e.jsx("span",{onClick:()=>v(!i),className:"absolute right-3 top-3 cursor-pointer text-gray-500",children:i?e.jsx(x,{size:20}):e.jsx(g,{size:20})})]}),s&&e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-gray-300",children:e.jsx("div",{className:`h-full rounded-full transition-all 
                        ${s==="Weak"?"w-1/4 bg-red-500":""}
                        ${s==="Medium"?"w-2/4 bg-yellow-500":""}
                        ${s==="Strong"?"w-full bg-green-600":""}
                      `})}),s&&e.jsxs("p",{className:`mt-1 text-sm ${s==="Weak"?"text-red-500":s==="Medium"?"text-yellow-500":"text-green-600"}`,children:[s," Password"]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"mt-1 w-full rounded-md bg-gray-100 dark:bg-gray-700",name:"confirmPassword",type:c?"text":"password",placeholder:"Confirm new password"}),e.jsx("span",{onClick:()=>k(!c),className:"absolute right-3 top-3 cursor-pointer text-gray-500",children:c?e.jsx(x,{size:20}):e.jsx(g,{size:20})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(O,{isLoading:o.formState.isSubmitting,type:"submit",className:"w-full rounded-md bg-[#0D7538] py-2 text-white hover:bg-green-700",children:"Submit"})})]})})]})})})}function Z(){return e.jsx(e.Fragment,{children:e.jsx(B,{})})}export{Z as default};
