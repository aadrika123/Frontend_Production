const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B5Ul__0V.js","assets/vendor-BQjEkISh.js","assets/vendor-DOfe2hmq.css","assets/yup-CnfbaAoe.js","assets/datetime-picker-CLX-fbhz.js","assets/ui-nizOJQEB.js","assets/icons-BMgt4q83.js","assets/query-D2uVQUkm.js","assets/axios-Dos3PyFQ.js","assets/zustand-CDkHc-Qy.js","assets/index-bpYLEeyJ.js","assets/index-Dapt4HVK.js","assets/RHFUploadFiled-gEBSxyOo.js","assets/index-C8jLshIN.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,f as s,g as n,i as r,O as a,k as i,u as o,s as l,z as d,l as c,m as u,N as m,n as h,o as p,F as f,q as x,E as g,B as v}from"./vendor-BQjEkISh.js";import{Q as j,a as y}from"./query-D2uVQUkm.js";import{S as b,C as w,P as N}from"./ui-nizOJQEB.js";import{L as I,I as E}from"./icons-BMgt4q83.js";import{a as S}from"./axios-Dos3PyFQ.js";import{c as k}from"./zustand-CDkHc-Qy.js";function z({children:t}){return e.jsx(e.Fragment,{children:t})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A=t.createContext({theme:"system",setTheme:()=>null});function L({children:s,defaultTheme:n="system",storageKey:r="vite-ui-theme",...a}){const[i,o]=t.useState(()=>localStorage.getItem(r)||n);t.useEffect(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===i){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void e.classList.add(t)}e.classList.add(i)},[i]);const l={theme:i,setTheme:e=>{localStorage.setItem(r,e),o(e)}};return e.jsx(A.Provider,{...a,value:l,children:s})}function _(...e){return s(n(e))}const P=r("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),C=t.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...a},i)=>{const o=r?b:"button";return e.jsx(o,{className:_(P({variant:s,size:n,className:t})),ref:i,...a})});function R({error:t}){return e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"space-y-2 px-6 text-center",children:[e.jsx("h1",{className:"text-xl font-bold text-red-500",children:"Error"}),e.jsx("p",{className:"text-sm font-semibold text-gray-500",children:t.message}),e.jsx(C,{onClick:()=>window.location.reload(),variant:"destructive",size:"sm",children:"Reload"})]})})}C.displayName="Button";const O=N;function T(){return e.jsxs("div",{className:"flex h-screen w-full flex-col justify-center",children:[e.jsx("main",{children:e.jsx(a,{})}),e.jsx("footer",{className:"absolute bottom-0 w-full py-6 text-center"})]})}function B(){return e.jsx("div",{className:"relative h-full overflow-hidden bg-background",children:e.jsx("main",{className:"relative h-full w-full overflow-auto scroll-smooth bg-background",children:e.jsx(a,{})})})}function M(e="1/1"){return{"4/3":"calc(100% / 4 * 3)","3/4":"calc(100% / 3 * 4)","6/4":"calc(100% / 6 * 4)","4/6":"calc(100% / 4 * 6)","16/9":"calc(100% / 16 * 9)","9/16":"calc(100% / 9 * 16)","21/9":"calc(100% / 21 * 9)","9/21":"calc(100% / 9 * 21)","1/1":"100%"}[e]}t.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(w,{ref:r,sideOffset:s,className:_("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})).displayName=w.displayName;const $=i.LazyLoadImage,F=t.forwardRef(({ratio:t,disabledEffect:s=!1,effect:n="blur",...r},a)=>{const i=e.jsx($,{wrapperClassName:"wrapper",effect:s?"opacity":n,placeholderSrc:s?"/assets/transparent.png":"/assets/placeholder-new.png",width:"100%",style:{objectFit:"cover"},...r});return t?e.jsx("span",{ref:a,style:{width:1,lineHeight:1,display:"block",overflow:"hidden",position:"relative",paddingTop:M(t)},children:i}):e.jsx("span",{ref:a,style:{lineHeight:1,display:"block",overflow:"hidden",position:"relative"},children:i})});function U(){const t=o();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"border-b bg-white shadow-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{children:e.jsx(F,{src:"/images/jlogo.png",alt:"logo",width:80,height:80})}),e.jsx("div",{className:"container mx-auto max-w-6xl px-4 py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"URBAN DEVELOPMET & HOUSING DEPARTMENT"}),e.jsx("p",{className:"text-gray-600",children:"Goverment of Jharkhand"})]})})]})}),e.jsx("div",{className:"bg-[#99B37C] py-3 text-white",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold",children:"UD&HD"})}),e.jsx("div",{children:e.jsxs(C,{variant:"secondary",className:"flex items-center space-x-2",onClick:()=>{t("/legal/auth/login")},children:[e.jsx(I,{className:"h-4 w-4"})," Admin Login"]})})]})})}),e.jsx(a,{})]})}const D=S.create({baseURL:"https://jharkhandegovernance.com/auth"});D.interceptors.request.use(e=>{const t=localStorage.getItem("token"),s=localStorage.getItem("ulbId")||null;return e.params={...e.params,ulbId:s},t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>{throw new Error(e)}),D.interceptors.response.use(e=>{var t,s;return"false"==(null==(t=e.data)?void 0:t.authenticated)&&(delete D.defaults.headers.common.Authorization,localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.setItem("authenticated",null==(s=e.data)?void 0:s.authenticated),alert("Session Expired"),location.reload()),e},async e=>{throw new Error(e)}),l({language:"en",isGrid:!1,isSort:!1});const H={login:"/api/login",getUser:"/api/user-managment/get-user-dtls",byModule:"/api/menu/by-module",getAllUsers:"/api/user-managment/v1/crud/get/user-list-by-ulb-id-v1",changePassword:"/api/change-password",getCaptcha:"/api/login-Captcha"},V=e=>{e?localStorage.setItem("token",e):(localStorage.removeItem("token"),delete D.defaults.headers.common.Authorization)};function q(e,t){let s="",n=e;for(let r=0;r<t;r++)n=(9301*n+49297)%233280,s+=(n%16).toString(16);return s}const G=k()((e,t)=>({isAuthenticated:!1,isInitialized:!1,user:null,menuItems:null,setIsAuthenticated:t=>e({isAuthenticated:t}),setIsInitialized:t=>e({isInitialized:t}),setMenuItems:t=>e({menuItems:t}),initialize:async()=>{var t,s;try{const n=localStorage.getItem("token");if(!n)return void e({isAuthenticated:!1,isInitialized:!0,user:null});V(n);const[r,a]=await Promise.all([D.post(`${H.getUser}`),D.post(`${H.byModule}`,{moduleId:"35"})]);if(null==(t=null==r?void 0:r.data)?void 0:t.authenticated){const t=r.data.data;"SUPER ADMIN"!=(null==t?void 0:t.roleName)&&window.localStorage.setItem("ulbId",function(e,t="EW^reB0tm}p)R3w+7=+0YG0[XpUOSPfy"){if(!e||!t)return"";let s=0;const n=e+t;for(let d=0;d<n.length;d++)s=(s<<5)-s+n.charCodeAt(d),s&=s;s=Math.abs(s);let r="";for(let d=0;d<e.length;d++){const s=t.charCodeAt(d%t.length);r+=(e.charCodeAt(d)^s).toString(16).padStart(4,"0")}const a=q(s,8),i=q(s+1,4),o=q(s+2,4),l=q(s+3,4);return q(s+4,12),`${a}-${i}-${o}-${l}:${e.length.toString(16).padStart(4,"0")}${r}`}(t.ulbId.toString())),e({isAuthenticated:!0,isInitialized:!0,user:t,menuItems:(null==(s=null==a?void 0:a.data)?void 0:s.data)||null})}else e({isAuthenticated:!1,isInitialized:!0,user:null})}catch(n){e({isAuthenticated:!1,isInitialized:!0,user:null})}},login:async e=>{try{const s=null==e?void 0:e.data;return V(null==s?void 0:s.token),t().initialize(),s}catch(s){d.error("Login Failed")}},logout:()=>{try{V(null),localStorage.removeItem("token"),e({isAuthenticated:!1,user:null,menuItems:null}),t().initialize()}catch(s){}}})),K=k(e=>({getTitle:"",setTitle:t=>e({getTitle:t})})),W=()=>({...G(),...K()});function J(){return e.jsx("div",{className:"flex items-center justify-center w-full h-[550px]",children:e.jsxs("div",{className:"flex justify-center items-center space-x-1 text-sm text-gray-700",children:[e.jsx("svg",{fill:"none",className:"w-6 h-6 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{clipRule:"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor",fillRule:"evenodd"})}),e.jsx("div",{children:"Loading ..."})]})})}function Q({children:s}){const{isInitialized:n,isAuthenticated:r,initialize:a,menuItems:i}=W(),{pathname:o}=c(),l=u(),[d,h]=t.useState(null),p=t.useRef(!1),f=null==i?void 0:i.permission.flatMap(e=>[{...e,children:e.children.map(e=>e.id)},...e.children]);return null==f||f.map(e=>{var t;return(null==(t=null==e?void 0:e.path)?void 0:t.includes(":id"))?null==e?void 0:e.path.replace(":id",l.id):null==e?void 0:e.path}).flat(1),t.useEffect(()=>{n||a()},[]),t.useEffect(()=>{const e=()=>{document.hidden?p.current=!0:p.current&&(a(),p.current=!1)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[a]),n?r?d&&o!==d?(h(null),e.jsx(m,{to:d})):e.jsx(e.Fragment,{children:s}):(o!==d&&h(o),e.jsx(m,{to:"/survey-app/auth/login"})):e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx(J,{})})}function X({children:s}){const{isAuthenticated:n,isInitialized:r,initialize:a,user:i}=G();return t.useEffect(()=>{r||a()},[]),r?n?"HRMS Employee"==(null==i?void 0:i.roleName)?e.jsx(m,{to:"/survey-app/employee/emp-home",replace:!0}):e.jsx(m,{to:"/survey-app/dashboard/home",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx(J,{})})}const Y=r("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Z=t.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,children:a,disabled:i,loading:o=!1,leftSection:l,rightSection:d,...c},u)=>{const m=r?b:"button";return e.jsxs(m,{className:_(Y({variant:s,size:n,className:t})),disabled:o||i,ref:u,...c,children:[(l&&o||!l&&!d&&o)&&e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),!o&&l&&e.jsx("div",{className:"mr-2",children:l}),a,!o&&d&&e.jsx("div",{className:"ml-2",children:d}),d&&o&&e.jsx(E,{className:"ml-2 h-4 w-4 animate-spin"})]})});function ee(){const t=o();return e.jsx("div",{className:"h-svh",children:e.jsxs("div",{className:"m-auto flex h-full w-full flex-col items-center justify-center gap-2",children:[e.jsx("h1",{className:"text-[7rem] font-bold leading-tight",children:"404"}),e.jsx("span",{className:"font-medium",children:"Oops! Page Not Found!"}),e.jsxs("p",{className:"text-center text-muted-foreground",children:["It seems like the page you're looking for ",e.jsx("br",{}),"does not exist or might have been removed."]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsx(Z,{variant:"outline",onClick:()=>t(-1),children:"Go Back"}),e.jsx(Z,{onClick:()=>t("/"),children:"Back to Home"})]})]})})}Z.displayName="Button";const te={},se=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in te)return;te[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},ne=s=>{return n=t.lazy(async()=>{try{return await s()}catch(e){}}),s=>e.jsx(t.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(n,{...s})});var n},re=ne(()=>se(()=>import("./index-B5Ul__0V.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ae=ne(()=>se(()=>import("./index-bpYLEeyJ.js"),__vite__mapDeps([10,1,2]))),ie=ne(()=>se(()=>import("./index-Dapt4HVK.js"),__vite__mapDeps([11,1,2,3,4,5,6,12,7,8,9]))),oe=ne(()=>se(()=>import("./index-C8jLshIN.js"),__vite__mapDeps([13,1,2,3,4,5,6,12,7,8,9]))),le=[{layout:"auth",pages:[{id:"1",name:"Login",path:"login",element:e.jsx(re,{})}]},{layout:"dashboard",pages:[{id:"1",name:"Home",path:"home",element:e.jsx(ae,{})},{id:"2",name:"Survey Form",path:"survey-form",element:e.jsx(ie,{})},{id:"3",name:"SWM Survey Form",path:"swm-survey-form",element:e.jsx(oe,{})}]},{layout:"citizen",pages:[]}];function de(){return e.jsxs(h,{children:[e.jsx(p,{path:"/survey-app",element:e.jsx(m,{to:"/survey-app/dashboard/home"}),index:!0}),e.jsx(p,{path:"/survey-app/citizen",element:e.jsx(U,{}),children:null==le?void 0:le.map(({layout:t,pages:s})=>"citizen"===t&&(null==s?void 0:s.map(({id:t,path:s,element:n})=>e.jsx(p,{path:s,element:n},t))))}),e.jsx(p,{path:"/survey-app/auth",element:e.jsx(X,{children:e.jsx(T,{})}),children:null==le?void 0:le.map(({layout:t,pages:s})=>"auth"===t&&(null==s?void 0:s.map(({path:t,element:s,id:n})=>e.jsx(p,{path:t,element:s},n))))}),e.jsx(p,{path:"/survey-app/dashboard",element:e.jsx(Q,{children:e.jsx(B,{})}),children:null==le?void 0:le.map(({layout:t,pages:s})=>"dashboard"===t&&(null==s?void 0:s.map(({id:t,path:s,element:n})=>e.jsx(p,{path:s,element:n},t))))}),e.jsx(p,{path:"*",element:e.jsx(ee,{})}),e.jsx(p,{path:"",element:e.jsx(m,{to:"/survey-app",replace:!0})})]})}function ce(){return e.jsxs(O,{children:[e.jsx(f,{position:"top-center",reverseOrder:!1,toastOptions:{custom:{className:"bg-white text-black border border-gray-300 rounded-md shadow-lg"},success:{className:"bg-green-500 text-white border-none rounded-md shadow-lg"}}}),e.jsx(de,{})]})}const ue=new j;x.createRoot(document.getElementById("root")).render(e.jsx(g,{FallbackComponent:({error:t})=>e.jsx(R,{error:t}),onError:(e,t)=>{},children:e.jsx(z,{children:e.jsx(y,{client:ue,children:e.jsx(v,{children:e.jsx(L,{defaultTheme:"light",storageKey:"theme",children:e.jsx(ce,{})})})})})}));export{C as B,D as a,H as b,_ as c,P as d,W as u};
