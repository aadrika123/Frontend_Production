import{v as e,c as a,j as t,C as s,w as r,r as l,x as o,z as n,y as i}from"./vendor-Bi7gKRCm.js";import{c as d,a as c}from"./yup-DG2y1cZc.js";import{I as u,F as h,R as m,B as x}from"./datetime-picker-CbirCbyA.js";import{a as f,u as p,b as g}from"./index-74EpPi9G.js";import{E as b,a as y}from"./ui-Ba1fJ4FJ.js";import{u as v,b as j}from"./query-D1bk6WDH.js";import{M as w,R as N,A as S}from"./icons-B3nk8_P6.js";import"./axios-Dos3PyFQ.js";import"./zustand-B7UGGipU.js";function C({name:r,label:l,inputSize:o,...n}){const{control:i}=e(),[d,c]=a.useState(!1);return t.jsx(s,{name:r,control:i,render:({field:{ref:e,...a},fieldState:{error:s}})=>t.jsxs(t.Fragment,{children:[t.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:l,children:[l," ",s&&l&&t.jsx("span",{className:"text-red-400",children:"*"})]}),t.jsxs("div",{className:"relative mt-1",children:[t.jsx(u,{...a,value:"number"==typeof a.value&&0===a.value?"":a.value,ref:e,className:`mt-1 ${s?"border-red-400":null}\n              ${("small"===o?"h-8":"medium"===o&&"h-10")||"large"===o&&"h-12"||"h-9"}`,type:d?"text":"password",...n}),t.jsx("button",{style:{backgroundColor:"none"},type:"button",className:"absolute right-3 top-4",onClick:()=>c(e=>!e),children:d?t.jsx(b,{width:20,height:20}):t.jsx(y,{width:20,height:20})})]}),s&&t.jsx("span",{className:"text-red-400 text-xs",children:null==s?void 0:s.message})]})})}const k=({options:e})=>v({mutationFn:({api:e,data:a})=>((e,a)=>f.post(e,a))(e,a),...e});function A(e){const a="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e",t=r.enc.Latin1.parse(r.SHA256(a).toString(r.enc.Latin1)),s=r.SHA256(a).toString().substring(0,16),l=r.enc.Latin1.parse(s),o=r.AES.encrypt(e,t,{iv:l,mode:r.mode.CBC,padding:r.pad.Pkcs7});return r.enc.Base64.stringify(o.ciphertext)}const M=d({email:c().email("Enter a valid email").required("Email is required"),password:c().min(8,"Password must be at least 8 characters").required(),captcha:c().required("Please enter the captcha")});function E(){const[e,a]=l.useState(""),s=k({}),{login:d}=p(),c=o({defaultValues:{email:"",password:"",captcha:""},resolver:i(M)}),u=function({key:e,api:a,options:t,value:s,config:r}){return j({queryKey:[e,...s??[]],queryFn:async()=>(await f.post(a,{...r})).data,refetchOnReconnect:"always",refetchOnWindowFocus:!1,...t})}({api:`${g.getCaptcha}`,key:"getCaptcha",value:[],options:{enabled:!0}}),b=async()=>{if(null==u?void 0:u.data){const e=function(e){const a="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e";try{const t=r.enc.Latin1.parse(r.SHA256(a).toString(r.enc.Latin1)),s=r.SHA256(a).toString().substring(0,16),l=r.enc.Latin1.parse(s),o=r.enc.Base64.parse(e);return r.AES.decrypt({ciphertext:o},t,{iv:l,mode:r.mode.CBC,padding:r.pad.Pkcs7}).toString(r.enc.Utf8)}catch(t){return"Decryption failed"}}(null==u?void 0:u.data.data.captcha_code),t=document.createElement("canvas");t.width=200,t.height=50;const s=t.getContext("2d");if(s){const r=s.createLinearGradient(0,0,t.width,t.height);r.addColorStop(0,"#f0f9ff"),r.addColorStop(1,"#e0f2fe"),s.fillStyle=r,s.fillRect(0,0,t.width,t.height);for(let e=0;e<25;e++)s.fillStyle=`rgba(59, 130, 246, ${.15*Math.random()})`,s.fillRect(Math.random()*t.width,Math.random()*t.height,2,2);for(let e=0;e<2;e++)s.strokeStyle=`rgba(59, 130, 246, ${.2*Math.random()})`,s.lineWidth=1,s.beginPath(),s.moveTo(Math.random()*t.width,Math.random()*t.height),s.quadraticCurveTo(Math.random()*t.width,Math.random()*t.height,Math.random()*t.width,Math.random()*t.height),s.stroke();s.font="bold 28px Inter, system-ui, sans-serif",s.fillStyle="#1e40af",s.textAlign="center",s.textBaseline="middle";const l=e.split(""),o=(t.width-22*l.length)/2;l.forEach((e,a)=>{const r=o+26*a+15,l=t.height/2+4*(Math.random()-.5);s.save(),s.translate(r,l),s.rotate(.25*(Math.random()-.5)),s.fillText(e,0,0),s.restore()}),a(t.toDataURL())}}};l.useEffect(()=>{b()},[null==u?void 0:u.data]);const y=e=>(e.preventDefault(),!1),v=e=>{(e.ctrlKey||e.metaKey)&&["c","v","x"].includes(e.key.toLowerCase())&&e.preventDefault()};return t.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"absolute -left-40 -top-40 h-80 w-80 rounded-full bg-blue-100 opacity-50 blur-3xl"}),t.jsx("div",{className:"absolute -bottom-40 -right-40 h-80 w-80 rounded-full bg-indigo-100 opacity-50 blur-3xl"}),t.jsx("div",{className:"absolute left-1/2 top-1/2 h-96 w-96 -translate-x-1/2 -translate-y-1/2 rounded-full bg-purple-50 opacity-30 blur-3xl"})]}),t.jsxs("div",{className:"relative flex min-h-screen flex-col",children:[t.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-8",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"rounded-3xl border border-white/50 bg-white/80 p-8 shadow-xl shadow-gray-200/50 backdrop-blur-xl transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/60 sm:p-10",children:[t.jsxs("div",{className:"mb-8 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 shadow-lg shadow-blue-500/30",children:t.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Sign in to continue to your account"})]}),t.jsx(h,{methods:c,onSubmit:c.handleSubmit(async e=>{var a,t,r,l,o;try{const i=await s.mutateAsync({api:g.login,data:{email:e.email,password:A(e.password),captcha_code:A(e.captcha),captcha_id:null==(t=null==(a=null==u?void 0:u.data)?void 0:a.data)?void 0:t.captcha_id,moduleId:"48"}});(null==(r=null==i?void 0:i.data)?void 0:r.status)?(await d(null==i?void 0:i.data),n.success(null==(l=null==i?void 0:i.data)?void 0:l.message)):(n.error(null==(o=null==i?void 0:i.data)?void 0:o.message),null==u||u.refetch(),c.setValue("captcha",""))}catch(i){n.error(function(e){return e instanceof Error?e.message:String(e)}(i.message)),null==u||u.refetch(),c.setValue("captcha","")}finally{c.reset({...c.getValues(),email:"",password:"",captcha:""})}}),children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:t.jsx(w,{className:"h-5 w-5 text-gray-400"})}),t.jsx(m,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 py-3.5 pl-12 pr-4 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your email",autoComplete:"off",onPaste:y,onCopy:y,onCut:y,onKeyDown:v})]})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),t.jsx(C,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 px-4 py-3.5 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:y,onCopy:y,onCut:y,onKeyDown:v})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Security Verification"}),t.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-gray-50/80 p-3",children:[t.jsx("div",{className:"flex-shrink-0",children:(null==u?void 0:u.isFetching)?t.jsx("div",{className:"flex h-12 w-36 items-center justify-center rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:t.jsx(N,{className:"h-5 w-5 animate-spin text-blue-500"})}):e?t.jsx("img",{src:e,alt:"CAPTCHA",className:"h-12 w-36 rounded-lg border border-gray-200 object-contain"}):t.jsx("div",{className:"flex h-12 w-36 items-center justify-center rounded-lg bg-gray-100 text-xs text-gray-400",children:"Failed to load"})}),t.jsx("button",{type:"button",onClick:()=>{null==u||u.refetch(),c.setValue("captcha","")},disabled:null==u?void 0:u.isFetching,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-white text-gray-500 shadow-sm transition-all duration-200 hover:bg-blue-50 hover:text-blue-600 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",title:"Refresh CAPTCHA",children:t.jsx(N,{className:"h-4 w-4 "+((null==u?void 0:u.isFetching)?"animate-spin":"")})})]}),t.jsx(m,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 px-4 py-3.5 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"captcha",placeholder:"Enter the code shown above",autoComplete:"off",onPaste:y,onCopy:y,onCut:y,onKeyDown:v})]}),t.jsx(x,{type:"submit",isLoading:c.formState.isSubmitting,className:"group mt-2 w-full rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 py-4 font-semibold text-white shadow-lg shadow-blue-500/25 transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-xl hover:shadow-blue-500/30 active:scale-[0.98]",children:t.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Sign In",t.jsx(S,{className:"h-5 w-5 transition-transform duration-300 group-hover:translate-x-1"})]})})]})})]}),t.jsxs("div",{className:"mt-6 flex justify-center gap-6 text-sm",children:[t.jsx("a",{href:"#",className:"text-gray-500 transition-colors hover:text-blue-600",children:"Need Help?"}),t.jsx("span",{className:"text-gray-300",children:"|"}),t.jsx("a",{href:"#",className:"text-gray-500 transition-colors hover:text-blue-600",children:"Contact Support"})]})]})}),t.jsx("footer",{className:"w-full px-6 py-4",children:t.jsx("div",{className:"mx-auto max-w-7xl text-center",children:t.jsx("p",{className:"text-sm text-gray-400",children:"Â© 2026 UD&HD. All rights reserved."})})})]})]})}function L(){return t.jsx("div",{className:"",children:t.jsx(E,{})})}export{L as default};
