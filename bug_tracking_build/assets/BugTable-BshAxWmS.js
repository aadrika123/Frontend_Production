import{r as l,j as e,h as v,c as q,x as A,A as O,u as E,P as k,e as P,af as S,C as B,F as V,S as X,D as Y,G as ee,H as te,J as oe,M as se,d as re,Q as ae,K as ne,T as le,p as ie,B as b}from"./index-CGxHb2VT.js";import{f as _,a as de,S as T,P as ce}from"./PriorityBadge-DKfoMe-D.js";import{D as pe,a as xe,c as ue,d as me}from"./dialog-C1FIceVx.js";import{c as fe}from"./index-BWW_ZQgu.js";import{E as he}from"./eye-CgjutoKI.js";const ve=fe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),D=l.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:v("w-full caption-bottom text-sm",t),...r})}));D.displayName="Table";const M=l.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:v("[&_tr]:border-b",t),...r}));M.displayName="TableHeader";const F=l.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:v("[&_tr:last-child]:border-0",t),...r}));F.displayName="TableBody";const ge=l.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:v("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));ge.displayName="TableFooter";const C=l.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:v("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));C.displayName="TableRow";const u=l.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:v("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));u.displayName="TableHead";const x=l.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:v("p-2 align-middle text-[14px] font-normal [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));x.displayName="TableCell";const je=l.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:v("mt-4 text-sm text-muted-foreground",t),...r}));je.displayName="TableCaption";var y="Popover",[H,Le]=q(y,[A]),w=A(),[Ne,g]=H(y),I=t=>{const{__scopePopover:r,children:s,open:i,defaultOpen:o,onOpenChange:n,modal:c=!1}=t,d=w(r),p=l.useRef(null),[m,a]=l.useState(!1),[f=!1,h]=re({prop:i,defaultProp:o,onChange:n});return e.jsx(ae,{...d,children:e.jsx(Ne,{scope:r,contentId:ne(),triggerRef:p,open:f,onOpenChange:h,onOpenToggle:l.useCallback(()=>h(j=>!j),[h]),hasCustomAnchor:m,onCustomAnchorAdd:l.useCallback(()=>a(!0),[]),onCustomAnchorRemove:l.useCallback(()=>a(!1),[]),modal:c,children:s})})};I.displayName=y;var L="PopoverAnchor",be=l.forwardRef((t,r)=>{const{__scopePopover:s,...i}=t,o=g(L,s),n=w(s),{onCustomAnchorAdd:c,onCustomAnchorRemove:d}=o;return l.useEffect(()=>(c(),()=>d()),[c,d]),e.jsx(O,{...n,...i,ref:r})});be.displayName=L;var z="PopoverTrigger",G=l.forwardRef((t,r)=>{const{__scopePopover:s,...i}=t,o=g(z,s),n=w(s),c=E(r,o.triggerRef),d=e.jsx(k.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Q(o.open),...i,ref:c,onClick:P(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?d:e.jsx(O,{asChild:!0,...n,children:d})});G.displayName=z;var R="PopoverPortal",[Pe,we]=H(R,{forceMount:void 0}),$=t=>{const{__scopePopover:r,forceMount:s,children:i,container:o}=t,n=g(R,r);return e.jsx(Pe,{scope:r,forceMount:s,children:e.jsx(S,{present:s||n.open,children:e.jsx(le,{asChild:!0,container:o,children:i})})})};$.displayName=R;var N="PopoverContent",K=l.forwardRef((t,r)=>{const s=we(N,t.__scopePopover),{forceMount:i=s.forceMount,...o}=t,n=g(N,t.__scopePopover);return e.jsx(S,{present:i||n.open,children:n.modal?e.jsx(Ce,{...o,ref:r}):e.jsx(ye,{...o,ref:r})})});K.displayName=N;var Ce=l.forwardRef((t,r)=>{const s=g(N,t.__scopePopover),i=l.useRef(null),o=E(r,i),n=l.useRef(!1);return l.useEffect(()=>{const c=i.current;if(c)return B(c)},[]),e.jsx(V,{as:X,allowPinchZoom:!0,children:e.jsx(U,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:P(t.onCloseAutoFocus,c=>{var d;c.preventDefault(),n.current||(d=s.triggerRef.current)==null||d.focus()}),onPointerDownOutside:P(t.onPointerDownOutside,c=>{const d=c.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,m=d.button===2||p;n.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:P(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),ye=l.forwardRef((t,r)=>{const s=g(N,t.__scopePopover),i=l.useRef(!1),o=l.useRef(!1);return e.jsx(U,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var c,d;(c=t.onCloseAutoFocus)==null||c.call(t,n),n.defaultPrevented||(i.current||(d=s.triggerRef.current)==null||d.focus(),n.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:n=>{var p,m;(p=t.onInteractOutside)==null||p.call(t,n),n.defaultPrevented||(i.current=!0,n.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=n.target;((m=s.triggerRef.current)==null?void 0:m.contains(c))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&o.current&&n.preventDefault()}})}),U=l.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:n,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:a,...f}=t,h=g(N,s),j=w(s);return Y(),e.jsx(ee,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:n,children:e.jsx(te,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:a,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:m,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(oe,{"data-state":Q(h.open),role:"dialog",id:h.contentId,...j,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),J="PopoverClose",Re=l.forwardRef((t,r)=>{const{__scopePopover:s,...i}=t,o=g(J,s);return e.jsx(k.button,{type:"button",...i,ref:r,onClick:P(t.onClick,()=>o.onOpenChange(!1))})});Re.displayName=J;var _e="PopoverArrow",Te=l.forwardRef((t,r)=>{const{__scopePopover:s,...i}=t,o=w(s);return e.jsx(se,{...o,...i,ref:r})});Te.displayName=_e;function Q(t){return t?"open":"closed"}var Ae=I,Oe=G,Ee=$,W=K;const ke=Ae,Se=Oe,Z=l.forwardRef(({className:t,align:r="center",sideOffset:s=4,...i},o)=>e.jsx(Ee,{children:e.jsx(W,{ref:o,align:r,sideOffset:s,className:v("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})}));Z.displayName=W.displayName;function ze({bugs:t,onViewDetails:r,onEdit:s}){const{user:i}=ie(),[o,n]=l.useState(null),[c,d]=l.useState(null),p=(i==null?void 0:i.roleName)||"",m=a=>{if(!a)return"Low";const f=a.toLowerCase();return f==="critical"?"Critical":f==="high"?"High":f==="medium"?"Medium":"Low"};return e.jsxs("div",{className:"overflow-hidden rounded-xl border bg-card/50 shadow-sm backdrop-blur-sm",children:[e.jsxs(D,{children:[e.jsx(M,{children:e.jsxs(C,{className:"bg-muted/50 hover:bg-muted/50",children:[e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Tracking No"}),e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Title"}),p=="Developer"&&e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Ulb Name"}),e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Module"}),e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Type"}),e.jsx(u,{className:"text-center font-semibold text-muted-foreground",children:"Attachments"}),(p==="Developer"||p==="TESTER")&&e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Priority"}),e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Status"}),e.jsx(u,{className:"font-semibold text-muted-foreground",children:"Created Date"}),e.jsx(u,{className:"text-right font-semibold text-muted-foreground",children:"Actions"})]})}),e.jsx(F,{children:t.length===0?e.jsx(C,{children:e.jsx(x,{colSpan:9,className:"py-20 text-center italic text-muted-foreground",children:"No bugs found matching your criteria."})}):t.map(a=>{var h;const f=(p==="Developer"||p==="TESTER")&&["Open","Re-Open"].includes(a.status);return e.jsxs(C,{className:"group transition-all duration-200 hover:bg-muted/30",children:[e.jsx(x,{className:"font-mono text-xs",children:a.tracking_no}),e.jsx(x,{className:"max-w-[200px]",children:e.jsxs(ke,{open:c===a.id,onOpenChange:j=>!j&&d(null),children:[e.jsx(Se,{asChild:!0,children:e.jsx("span",{className:"line-clamp-1 cursor-pointer font-medium text-indigo-400 underline underline-offset-4 transition-all hover:text-indigo-500 ",onMouseEnter:()=>d(a.id),onMouseLeave:()=>d(null),onClick:()=>n(a),children:a.title})}),e.jsx(Z,{side:"right",align:"start",sideOffset:5,className:"w-[500px] border-none bg-transparent p-0 shadow-2xl transition-all duration-200",onMouseEnter:()=>d(a.id),onMouseLeave:()=>d(null),children:e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-xl border-2 border-indigo-100 bg-card shadow-2xl duration-200 animate-in fade-in zoom-in-95",children:[e.jsxs("div",{className:"border-b bg-secondary px-5 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"rounded-full bg-indigo-100 px-2.5 py-0.5 font-mono text-[10px] font-bold text-indigo-700",children:a.tracking_no}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2.5 py-0.5 text-[10px] font-bold text-slate-600",children:a.user_role})]}),e.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:_(new Date(a.created_at),"MMM dd, yyyy HH:mm")})]}),e.jsx("h4",{className:"mt-3 text-lg font-bold leading-tight text-foreground",children:a.title})]}),e.jsx("div",{className:"max-h-[350px] overflow-y-auto p-6",children:e.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed text-muted-foreground",children:a.description||"No description provided."})}),e.jsxs("div",{className:"flex items-center justify-between border-t bg-muted/20 px-5 py-3",children:[e.jsxs("div",{className:"flex flex-row gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Module"}),e.jsx("span",{className:"text-xs font-semibold",children:a.module_name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Status"}),e.jsx("span",{className:"text-xs font-semibold",children:a.status})]})]}),e.jsx(b,{size:"sm",className:"h-8 bg-indigo-600 text-[11px] font-bold hover:bg-indigo-700",onClick:j=>{j.stopPropagation(),r(a.id.toString())},children:"View Full Details"})]})]})})]})}),p=="Developer"&&e.jsx(x,{className:"max-w-[180px]",children:a.ulb_name||"N/A"}),e.jsx(x,{className:"font-semibold",children:a.module_name||"N/A"}),e.jsx(x,{children:a.entry_type||"N/A"}),e.jsx(x,{className:"text-center",children:(h=a.screenshots)!=null&&h.length?e.jsxs("div",{className:"mx-auto flex w-fit items-center justify-center gap-1 rounded-full bg-indigo-50 px-2 py-0.5 text-[10px] font-bold text-indigo-600",children:[e.jsx(ve,{className:"h-3 w-3"}),a.screenshots.length]}):e.jsx("span",{className:"text-muted-foreground/30",children:"â€”"})}),(p==="Developer"||p==="TESTER")&&e.jsx(x,{className:"text-lg",children:e.jsx(de,{priority:m(a.priority)})}),e.jsx(x,{children:e.jsx(T,{status:a.status})}),e.jsx(x,{className:"text-xs text-muted-foreground",children:_(new Date(a.created_at),"MMM dd, yyyy HH:mm")}),e.jsx(x,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>r(a.id.toString()),className:"h-7 w-7 px-7",children:e.jsx(he,{className:"h-3.5 w-3.5"})}),f&&e.jsx(b,{variant:"outline",size:"icon",onClick:()=>s(a),className:"h-7 w-7",children:e.jsx(ce,{className:"h-3.5 w-3.5"})})]})})]},a.id)})})]}),e.jsx(pe,{open:!!o,onOpenChange:a=>!a&&n(null),children:e.jsxs(xe,{className:"max-w-2xl overflow-hidden p-0",children:[e.jsx(ue,{className:"border-b bg-muted/30 p-6",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(me,{className:" text-xl font-bold",children:o==null?void 0:o.title})})}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-6 border-b pb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Module"}),e.jsx("p",{className:"font-semibold",children:o==null?void 0:o.module_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-semibold",children:o==null?void 0:o.entry_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Status"}),e.jsx(T,{status:(o==null?void 0:o.status)||""})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"User"}),e.jsxs("span",{className:" font-bold",children:[" ",o==null?void 0:o.user_role]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Description"}),e.jsx("div",{className:"rounded-xl border bg-muted/10 p-4",children:e.jsx("p",{className:"whitespace-pre-wrap text-sm italic leading-relaxed text-foreground",children:(o==null?void 0:o.description)||"No description provided."})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t bg-muted/30 p-4",children:[e.jsx(b,{variant:"outline",onClick:()=>n(null),children:"Close"}),e.jsx(b,{onClick:()=>{o&&(r(o.id.toString()),n(null))},children:"Go to Details Page"})]})]})})]})}export{ze as B};
