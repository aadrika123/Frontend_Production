import{j as p,l as e,P as D,y as q,J as B,B as N,_ as S}from"./index-CeORiDKo.js";import{b as T}from"./index.esm-H-Ep_aJf.js";import{c as I,b as L,C as R,d as V,e as H,a as k,g as A}from"./index-CTo54kSO.js";import{S as d,a as n,b as o,c as h,d as r,I as E}from"./select-DfvdpNPB.js";import{T as O,D as U,a as W,b as G,c as J}from"./dialog-BBA50jNa.js";const _=I("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var $="Label",w=p.forwardRef((a,x)=>e.jsx(D.label,{...a,ref:x,onMouseDown:l=>{var u;l.target.closest("button, input, select, textarea")||((u=a.onMouseDown)==null||u.call(a,l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}}));w.displayName=$;var C=w;const z=B("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),t=p.forwardRef(({className:a,...x},l)=>e.jsx(C,{ref:l,className:q(z(),a),...x}));t.displayName=C.displayName;function ee({userRole:a="Bug Reporter"}){const[x,l]=p.useState([]),[m,u]=p.useState(null),{register:g,handleSubmit:P,setValue:c,watch:y,reset:f,formState:{errors:i}}=T();y("type"),y("module");const M=s=>{const v=Array.from(s.target.files||[]),b=v.filter(j=>j.type.startsWith("image/"));if(b.length!==v.length){S.error("Only image files are allowed");return}l(j=>[...j,...b])},F=s=>{S.success("Bug reported successfully!"),f(),l([])};return e.jsxs(L,{children:[e.jsxs(R,{children:[e.jsxs(V,{className:"space-y-1 border-b bg-muted/40",children:[e.jsx(H,{className:"text-2xl font-semibold",children:"Report New Bug"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fill out the form below to report a bug or request an enhancement"})]}),e.jsx(k,{className:"pt-6",children:e.jsxs("form",{onSubmit:P(F),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"type",children:"Type *"}),e.jsxs(d,{onValueChange:s=>c("type",s),children:[e.jsx(n,{children:e.jsx(o,{placeholder:"Select type"})}),e.jsxs(h,{children:[e.jsx(r,{value:"Bug",children:"Bug"}),e.jsx(r,{value:"Enhancement",children:"Enhancement"})]})]}),i.type&&e.jsx("p",{className:"text-sm text-red-500",children:"Type is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"module",children:"Module *"}),e.jsxs(d,{onValueChange:s=>c("module",s),children:[e.jsx(n,{children:e.jsx(o,{placeholder:"Select module"})}),e.jsx(h,{children:A.map(s=>e.jsx(r,{value:s,children:s},s))})]}),i.module&&e.jsx("p",{className:"text-sm text-red-500",children:"Module is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"priority",children:"Priority *"}),e.jsxs(d,{onValueChange:s=>c("priority",s),children:[e.jsx(n,{children:e.jsx(o,{placeholder:"Select priority"})}),e.jsxs(h,{children:[e.jsx(r,{value:"Low",children:"Low"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"High",children:"High"}),e.jsx(r,{value:"Critical",children:"Critical"})]})]}),i.priority&&e.jsx("p",{className:"text-sm text-red-500",children:"Priority is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"source",children:"Source *"}),e.jsxs(d,{onValueChange:s=>c("source",s),children:[e.jsx(n,{children:e.jsx(o,{placeholder:"Select source"})}),e.jsxs(h,{children:[e.jsx(r,{value:"Web",children:"Web"}),e.jsx(r,{value:"Mobile App",children:"Mobile App"}),e.jsx(r,{value:"API",children:"API"}),e.jsx(r,{value:"Other",children:"Other"})]})]}),i.source&&e.jsx("p",{className:"text-sm text-red-500",children:"Source is required"})]}),a==="Developer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"complexity",children:"Complexity"}),e.jsxs(d,{onValueChange:s=>c("complexity",s),children:[e.jsx(n,{children:e.jsx(o,{placeholder:"Select complexity"})}),e.jsxs(h,{children:[e.jsx(r,{value:"Low",children:"Low"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"High",children:"High"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"title",children:"Title *"}),e.jsx(E,{id:"title",placeholder:"Enter a descriptive title for the bug",...g("title",{required:"Title is required"})}),i.title&&e.jsx("p",{className:"text-sm text-red-500",children:i.title.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"description",children:"Description *"}),e.jsx(O,{id:"description",rows:4,placeholder:"Provide detailed description of the bug or enhancement request",...g("description",{required:"Description is required"})}),i.description&&e.jsx("p",{className:"text-sm text-red-500",children:i.description.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Screenshots"}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed p-6 text-center",children:[e.jsx(_,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsxs("label",{htmlFor:"screenshots",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium",children:"Upload screenshots"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"PNG, JPG up to 10MB"})]}),e.jsx("input",{id:"screenshots",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:M})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>{f(),l([])},children:"Reset"}),e.jsx(N,{type:"submit",children:"Submit Bug Report"})]})]})})]}),e.jsx(U,{open:!!m,onOpenChange:()=>u(null),children:e.jsxs(W,{className:"max-w-3xl",children:[e.jsx(G,{children:e.jsx(J,{children:"Screenshot Preview"})}),m&&e.jsx("img",{src:m,alt:"Screenshot preview",className:"h-auto max-h-96 w-full object-contain"})]})})]})}export{ee as default};
