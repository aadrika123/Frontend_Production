import{u as V,k as A,j as e,m as f,z as b,r as i,l as O,i as G,B as K}from"./index-BSJ1SkMD.js";import{a as Q}from"./index-Bh0C4ouL.js";import{C as W,a as X,c as Y,d as Z}from"./card-CBGUvzyE.js";import{S as B,a as ee,T as se,b as ae,c as k,d as v,e as te,f as y}from"./Spinner-mCpU_Q4c.js";import{a as $,F as E,B as H,o as q,c as z,b as j,d as re}from"./switch-Cbclq3Df.js";import{R as ie}from"./RHFTextField-DY9TkUoq.js";import{g as le}from"./services-KQnp_8oA.js";import"./input-C_krfZFP.js";import{R as J}from"./SelectField-Azm2kiUz.js";import{D as ne}from"./index-BdohMXw-.js";import{L as de,c as oe}from"./index.es-BLGtFWg2.js";import{L as ce}from"./label-12uNJdn5.js";const ue=z().shape({module_id:re().required("Role name is required"),service_name:j().required("Description is required")});function me({open:g,setOpen:S,title:n,edit:N,setEdit:d,serviceList:L}){var u,l,m;const I=V({}),o=$({defaultValues:{module_id:0,service_name:""},resolver:q(ue)}),M=async t=>{var x,r,p,h;try{const s=await I.mutateAsync({api:(x=f)==null?void 0:x.createService,data:t});(r=s==null?void 0:s.data)!=null&&r.success?(b.success((p=s==null?void 0:s.data)==null?void 0:p.message),S(!1),d(!1),L.refetch()):b.error((h=s==null?void 0:s.data)==null?void 0:h.message)}catch(s){b.error(le(s))}},c=A({api:(u=f)==null?void 0:u.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}});return e.jsx(ne,{open:g,setOpen:S,title:n,setEdit:d,edit:N,children:e.jsx(E,{methods:o,onSubmit:o.handleSubmit(M),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(J,{name:"module_id",data:((m=(l=c==null?void 0:c.data)==null?void 0:l.data)==null?void 0:m.map(t=>({value:t==null?void 0:t.id,label:t==null?void 0:t.module_name})))??[]})}),e.jsx("div",{children:e.jsx(ie,{name:"service_name",placeholder:"Enter Service name"})}),e.jsx(B,{}),e.jsx("div",{children:e.jsx(H,{isLoading:o.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const xe=z().shape({ulbId:j(),moduleId:j(),complaintRefNo:j()});function pe(){var C,T,w,P,D,F,_,R;const[g,S]=i.useState(1);O({});const[n,N]=i.useState(10),[d,L]=i.useState(!1),[I,o]=i.useState(""),[M,c]=i.useState(""),[u,l]=i.useState(!1),[m]=i.useState(""),[t,x]=i.useState(!1),r=$({resolver:q(xe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),p=async a=>{s==null||s.refetch()},h=A({api:(C=f)==null?void 0:C.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}}),s=G({api:`${(T=f)==null?void 0:T.serviceList}?module=${(w=r==null?void 0:r.watch())==null?void 0:w.moduleId}`,key:"serviceList",options:{enabled:!0}});return e.jsxs("main",{className:"grid items-start",children:[d&&e.jsx("div",{style:{zIndex:1001},className:"fixed left-0 top-0 z-50 flex h-full w-full items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(de,{className:"w-24",animationData:oe,loop:!0}),e.jsx("div",{className:"font-semibold",children:"Permission Updated"})]})}),e.jsx(me,{open:u,setOpen:l,title:t?"Edit Service":"Add Service",id:m,edit:t,setEdit:x,serviceList:s}),e.jsx("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:e.jsxs(W,{children:[e.jsx(E,{methods:r,onSubmit:r.handleSubmit(p),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(ce,{htmlFor:"moduleId",children:"Module name"}),e.jsx(J,{className:"cursor-pointer bg-background",name:"moduleId",data:((D=(P=h.data)==null?void 0:P.data)==null?void 0:D.map(a=>({value:a==null?void 0:a.id,label:a==null?void 0:a.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(H,{variant:"secondary",isLoading:r.formState.isSubmitting,type:"submit",className:"float-right  w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(K,{type:"button",className:"flex items-center gap-2",onClick:()=>l(!0),children:"Add New"})})]})}),e.jsx(X,{className:"px-7",children:e.jsx(Y,{})}),e.jsx(Z,{children:s.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(ee,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(k,{children:[e.jsx(v,{className:"",children:"#"}),e.jsx(v,{className:"",children:"Service"}),e.jsx(v,{className:"",children:"Module"})]})}),e.jsx(te,{children:(R=(_=(F=s==null?void 0:s.data)==null?void 0:F.data)==null?void 0:_.data)==null?void 0:R.map((a,U)=>e.jsxs(k,{children:[e.jsx(y,{children:g*n-n+U+1}),e.jsx(y,{children:a==null?void 0:a.service_name}),e.jsx(y,{children:a==null?void 0:a.module_name})]},a==null?void 0:a.id))})]}),e.jsx(B,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end"})]})})]})})]})}function Ce(){return e.jsx(Q,{title:"JUIDCO Service Control",subTitle:"Control all services here",children:e.jsx("div",{children:e.jsx(pe,{})})})}export{Ce as default};
