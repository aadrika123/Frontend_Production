import{j as e,m as b,_ as I,r as d,B as $}from"./index-1G2ZryNn.js";import{a as E}from"./index-yDYRfMe-.js";import{C as q,a as H,c as z,d as J}from"./card-BDPhN15K.js";import{S as _,T as U,a as V,b as T,c as L,d as O,e as C}from"./separator-DJDQrD5n.js";import{a as w,o as F,F as D,S as k,B as P,c as R,d as G,b as g}from"./SelectField-Dy_eiP8M.js";import{R as K}from"./RHFTextField-DvegL8Zo.js";import{g as Q}from"./services-KQnp_8oA.js";import"./input-BXMDWcyx.js";import{D as W}from"./index-Cjb0X3z9.js";import{u as X,b as A,a as Y}from"./useCustomQuery-_xr5RVje.js";import{S as Z}from"./Spinner-c5ohJm3r.js";import{L as ee,c as se}from"./index.es-C--pawKL.js";import{L as ae}from"./label-BNtvs8Br.js";const re=R().shape({module_id:G().required("Role name is required"),service_name:g().required("Description is required")});function te({open:S,setOpen:i,title:v,edit:y,setEdit:n,serviceList:N}){var f,r,u;const j=X({}),o=w({defaultValues:{module_id:0,service_name:""},resolver:F(re)}),l=async t=>{var m,x,p,h;try{const a=await j.mutateAsync({api:(m=b)==null?void 0:m.createService,data:t});(x=a==null?void 0:a.data)!=null&&x.success?(I.success((p=a==null?void 0:a.data)==null?void 0:p.message),i(!1),n(!1),N.refetch()):I.error((h=a==null?void 0:a.data)==null?void 0:h.message)}catch(a){I.error(Q(a))}},c=A({api:(f=b)==null?void 0:f.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}});return e.jsx(W,{open:S,setOpen:i,title:v,setEdit:n,edit:y,children:e.jsx(D,{methods:o,onSubmit:o.handleSubmit(l),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(k,{name:"module_id",data:((u=(r=c==null?void 0:c.data)==null?void 0:r.data)==null?void 0:u.map(t=>({value:t==null?void 0:t.id,label:t==null?void 0:t.module_name})))??[]})}),e.jsx("div",{children:e.jsx(K,{name:"service_name",placeholder:"Enter Service name"})}),e.jsx(_,{}),e.jsx("div",{children:e.jsx(P,{isLoading:o.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const le=R().shape({ulbId:g(),moduleId:g(),complaintRefNo:g()});function de(){var u,t,m,x,p,h,a,M;const[S]=d.useState(1),[i]=d.useState(10),[v]=d.useState(!1),[y,n]=d.useState(!1),[N]=d.useState(""),[j,o]=d.useState(!1),l=w({resolver:F(le),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),c=async()=>{r==null||r.refetch()},f=A({api:(u=b)==null?void 0:u.userManagementModuleList,key:"userManagementModuleList",options:{enabled:!0}}),r=Y({api:`${(t=b)==null?void 0:t.serviceList}?module=${(m=l==null?void 0:l.watch())==null?void 0:m.moduleId}`,key:"serviceList",options:{enabled:!0}});return e.jsxs("main",{className:"grid items-start",children:[v&&e.jsx("div",{style:{zIndex:1001},className:"fixed left-0 top-0 z-50 flex h-full w-full items-center justify-center bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ee,{className:"w-24",animationData:se,loop:!0}),e.jsx("div",{className:"font-semibold",children:"Permission Updated"})]})}),e.jsx(te,{open:y,setOpen:n,title:j?"Edit Service":"Add Service",id:N,edit:j,setEdit:o,serviceList:r}),e.jsx("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:e.jsxs(q,{children:[e.jsx(D,{methods:l,onSubmit:l.handleSubmit(c),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"moduleId",children:"Module name"}),e.jsx(k,{className:"cursor-pointer bg-background",name:"moduleId",data:((p=(x=f.data)==null?void 0:x.data)==null?void 0:p.map(s=>({value:s==null?void 0:s.id,label:s==null?void 0:s.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(P,{variant:"secondary",isLoading:l.formState.isSubmitting,type:"submit",className:"float-right  w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx($,{type:"button",className:"flex items-center gap-2",onClick:()=>n(!0),children:"Add New"})})]})}),e.jsx(H,{className:"px-7",children:e.jsx(z,{})}),e.jsx(J,{children:r.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(Z,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(T,{children:[e.jsx(L,{className:"",children:"#"}),e.jsx(L,{className:"",children:"Service"}),e.jsx(L,{className:"",children:"Module"})]})}),e.jsx(O,{children:(M=(a=(h=r==null?void 0:r.data)==null?void 0:h.data)==null?void 0:a.data)==null?void 0:M.map((s,B)=>e.jsxs(T,{children:[e.jsx(C,{children:S*i-i+B+1}),e.jsx(C,{children:s==null?void 0:s.service_name}),e.jsx(C,{children:s==null?void 0:s.module_name})]},s==null?void 0:s.id))})]}),e.jsx(_,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end"})]})})]})})]})}function Se(){return e.jsx(E,{title:"JUIDCO Service Control",subTitle:"Control all services here",children:e.jsx("div",{children:e.jsx(de,{})})})}export{Se as default};
