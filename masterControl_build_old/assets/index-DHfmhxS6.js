import{r as l,j as e,m as q,_ as R,B as V}from"./index-DL2S5zgO.js";import{a as ve}from"./index-B0CucLoT.js";import{C as Y,d as Z,b as oe,a as ye,c as Se}from"./card-g5hlDTSQ.js";import{S as O,T as ee,a as se,b as B,c as F,d as ae,e as $}from"./separator-C0toZ5qD.js";import{u as J,b as U,a as me}from"./useCustomQuery-CVVdc3wz.js";import{S as te}from"./Spinner-C_ijlliw.js";import{a as W,o as X,F as Q,S as ue,B as le,c as z,b as E}from"./SelectField-BN8hRagy.js";import"./input-CupMdTfT.js";import{L as Ie}from"./label-CMiU2sdG.js";import{F as ne,a as xe}from"./index-B8-KHin9.js";import{P as de}from"./index-O0MjcI-6.js";import{D as je,a as ge,b as fe}from"./dialog-lVXjAkw1.js";import{R as H}from"./RHFTextField-BaMfetBa.js";import{g as K}from"./services-KQnp_8oA.js";import{D as re}from"./index-AsB2N_bI.js";import{T as Pe,a as Me,b as we,c as pe,d as _e,e as Ce,f as ce,g as ie}from"./tabs-DtSCbdek.js";import{X as be}from"./x-CNUDO-9L.js";import"./createLucideIcon-DuGoW4j8.js";const Le=z().shape({menuName:E().required("menu name is required"),route:E().required("route is required"),serial:E().notRequired(),parentId:E().notRequired(),workflowId:E().notRequired()});function Ee({open:s,setOpen:p,title:u,edit:r,setEdit:m,menuMasterList:S,id:n,menuId:j,editData:b,moduleList:v}){var g,i,M,T,I,_;const h=J({}),y=W({defaultValues:{menuName:"",serial:"",route:""},resolver:X(Le)}),{reset:c}=y;console.log(v),l.useEffect(()=>{s&&c(r&&n?b?{menuName:b.menu_string||"",serial:b.serial||"",route:b.route||"",parentId:b.parent_id||""}:{menuName:"",serial:"",route:"",parentId:""}:{menuName:"",serial:"",route:"",parentId:""})},[s,r,n,c,b]);const d=async f=>{var L,o,a,C,k;try{const A=r&&n?{...f,moduleId:n,id:j}:{...f,moduleId:n},t=r?(L=q)==null?void 0:L.editMenuDetailsByModule:(o=q)==null?void 0:o.addMenuByModule,P=await h.mutateAsync({api:t,data:A});(a=P==null?void 0:P.data)!=null&&a.status?(R.success((C=P==null?void 0:P.data)==null?void 0:C.message),p(!1),m(!1),S.refetch()):R.error((k=P==null?void 0:P.data)==null?void 0:k.message)}catch(A){R.error(K(A))}},x=U({api:(g=q)==null?void 0:g.parentMenuList,key:"parentMenuListByModule",config:{moduleId:String(n)},options:{enabled:!0}}),N=U({api:(i=q)==null?void 0:i.workFlowByModule,key:"getWorkFlowByModule",config:{moduleId:String(n)},options:{enabled:!0}});return e.jsx(re,{open:s,setOpen:p,title:u,setEdit:m,edit:r,children:e.jsx(Q,{methods:y,onSubmit:y.handleSubmit(d),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ue,{label:"Parent Menu Name",name:"parentId",data:((T=(M=x==null?void 0:x.data)==null?void 0:M.data)==null?void 0:T.map(f=>({label:String(f==null?void 0:f.menu_string),value:String(f==null?void 0:f.id)})))||[]})}),e.jsx("div",{children:e.jsx(H,{label:"Menu Name",name:"menuName",placeholder:"Enter menu name"})}),e.jsx("div",{children:e.jsx(H,{label:"Menu Route",name:"route",placeholder:"Enter menu url "})}),e.jsx("div",{children:e.jsx(H,{label:"Serial No.",name:"serial",placeholder:"Enter Serial No."})}),e.jsx("div",{children:e.jsx(ue,{label:e.jsxs(e.Fragment,{children:["Workflow ",e.jsx("span",{className:"text-sm",children:"(select module to get workflow list)"})]}),name:"workflowId",data:((_=(I=N==null?void 0:N.data)==null?void 0:I.data)==null?void 0:_.map(f=>({label:String(f==null?void 0:f.workflow_name),value:String(f==null?void 0:f.id)})))||[]})}),e.jsx(O,{}),e.jsx("div",{children:e.jsx(le,{isLoading:y.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:r?"Update":"Submit"})})]})})})}function Te({id:s,mid:p}){var T,I,_,f,L,o;const[u,r]=l.useState(1),[m,S]=l.useState(10),[n,j]=l.useState(!1),[b,v]=l.useState(!1),[h,y]=l.useState(null),c=U({api:(T=q)==null?void 0:T.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),d=U({api:(I=q)==null?void 0:I.getMenuDetailsByModule,key:"getMenuDetailsForEdit",config:{menuId:String(h)},value:[h],options:{enabled:!!h}}),x=((f=(_=c==null?void 0:c.data)==null?void 0:_.data)==null?void 0:f.filter(a=>(a==null?void 0:a.module_id)===s))||[],N=x.slice((u-1)*m,u*m),g=a=>r(a),i=a=>{S(a),r(1)},M=a=>{y(a),v(!0),j(!0)};return console.log(p),console.log((L=d==null?void 0:d.data)==null?void 0:L.data),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(V,{type:"button",className:"flex items-center gap-2",onClick:()=>{y(null),v(!1),j(!0)},children:"Add Menu List"})}),e.jsx(Ee,{open:n,setOpen:j,title:b?"Edit Menu":"Add Menu",id:p,edit:b,setEdit:v,paginatedMenuList:N,refetch:c==null?void 0:c.refetch,menuMasterList:c,menuId:h,editData:(o=d==null?void 0:d.data)==null?void 0:o.data,moduleList:void 0}),e.jsx(Y,{children:e.jsx(Z,{children:c.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):c.isError?e.jsx("div",{className:"text-center text-red-500",children:"Failed to load menu list. Please try again."}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(B,{children:[e.jsx(F,{children:"#"}),e.jsx(F,{children:"Parent Menu"}),e.jsx(F,{children:"Menu"}),e.jsx(F,{children:"Path"}),e.jsx(F,{children:"Serial"}),e.jsx(F,{children:"Actions"})]})}),e.jsx(ae,{children:N.map((a,C)=>e.jsxs(B,{children:[e.jsx($,{children:u*m-m+C+1}),e.jsx($,{children:a.parentName||"#"}),e.jsx($,{children:a.menu_string}),e.jsx($,{children:a.route}),e.jsx($,{children:a.serial}),e.jsx($,{children:e.jsxs(V,{variant:"secondary",onClick:()=>M(a.id),children:[e.jsx(ne,{})," Edit"]})})]},a.id))})]}),e.jsx(O,{className:"my-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:u,totalItems:x.length,itemsPerPage:m,onPageChange:g,onItemsPerPageChange:i})})]})})})]})})}const ke=z().shape({service_name:E().required("menu name is required")});function Ae({open:s,setOpen:p,title:u,edit:r,setEdit:m,serviceList:S,moduleList:n,id:j,paginatedMenuList:b}){const v=J({}),h=W({defaultValues:{service_name:""},resolver:X(ke)}),{reset:y}=h;l.useEffect(()=>{if(s)if(r&&j){const d=b.find(x=>x.id==j);d&&y({service_name:d.service_name||""})}else y({service_name:""})},[s,r,j,n,y]);const c=async d=>{var x,N,g;try{const i=r?"EditModuleList":"AddmoduleList",M=await v.mutateAsync({api:i,data:d});(x=M==null?void 0:M.data)!=null&&x.success?(R.success((N=M==null?void 0:M.data)==null?void 0:N.message),p(!1),m(!1),S.refetch()):R.error((g=M==null?void 0:M.data)==null?void 0:g.message)}catch(i){R.error(K(i))}};return e.jsx(re,{open:s,setOpen:p,title:u,setEdit:m,edit:r,children:e.jsx(Q,{methods:h,onSubmit:h.handleSubmit(c),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Service Name",name:"service_name",placeholder:"Enter menu name"})}),e.jsx(O,{}),e.jsx("div",{children:e.jsx(le,{isLoading:h.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Re=z().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function Fe(s){var I,_,f,L,o;const[p]=l.useState(1),[u]=l.useState(10),[r,m]=l.useState(!1),[S,n]=l.useState(""),[j,b]=l.useState(!1),[v,h]=l.useState(1),[y,c]=l.useState(10),d=100,x=a=>{h(a)},N=a=>{c(a),h(1)},g=W({resolver:X(Re),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),i=me({api:`${(I=q)==null?void 0:I.serviceList}?module=${(_=g==null?void 0:g.watch())==null?void 0:_.moduleId}`,key:"serviceMasterList",options:{enabled:!0}}),T=(((o=(L=(f=i==null?void 0:i.data)==null?void 0:f.data)==null?void 0:L.data)==null?void 0:o.filter(a=>(a==null?void 0:a.module_id)==(s==null?void 0:s.id)))||[]).slice((v-1)*y,v*y);return e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(V,{type:"button",className:"flex items-center gap-2",onClick:()=>{n(""),b(!1),m(!0)},children:"Add Service List"})})}),e.jsx(Ae,{open:r,setOpen:m,title:j?"Edit Service":"Add Service",id:S,edit:j,setEdit:b,paginatedMenuList:T,serviceList:i}),e.jsx(Y,{children:e.jsx(Z,{children:i.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(B,{children:[e.jsx(F,{className:"",children:"#"}),e.jsx(F,{className:"",children:"Service"}),e.jsx(F,{className:"",children:"Actions"})]})}),e.jsx(ae,{children:T.map((a,C)=>e.jsxs(B,{children:[e.jsx($,{children:p*u-u+C+1}),e.jsx($,{children:a==null?void 0:a.service_name}),e.jsx($,{children:e.jsxs(V,{variant:"secondary",onClick:()=>{n(a==null?void 0:a.id),b(!0),m(!0)},children:[e.jsx(ne,{})," Edit"]})})]},a==null?void 0:a.id))})]}),e.jsx(O,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:v,totalItems:d,itemsPerPage:y,onPageChange:x,onItemsPerPageChange:N})})]})})})]})})}const $e=z().shape({module_name:E().required("Module name is required"),module_id:E().required("Module ID is required"),module_url:E().required("Module URL is required")});function qe({open:s,setOpen:p,title:u,edit:r,setEdit:m,serviceList:S,moduleList:n,id:j}){const b=J({}),v=W({defaultValues:{module_name:"",module_id:"",module_url:""},resolver:X($e)}),{reset:h}=v;l.useEffect(()=>{var c,d,x;if(s)if(r&&j){const N=(x=(d=(c=n==null?void 0:n.data)==null?void 0:c.data)==null?void 0:d.data)==null?void 0:x.find(g=>g.id===Number(j));N&&h({module_name:N.module_name||"",module_id:N.id.toString()||"",module_url:N.url||""})}else h({module_name:"",module_id:"",module_url:""})},[s,r,j,n,h]);const y=async c=>{var d,x,N;try{const g=r?"EditModuleList":"AddmoduleList",i=await b.mutateAsync({api:g,data:c});(d=i==null?void 0:i.data)!=null&&d.success?(R.success((x=i==null?void 0:i.data)==null?void 0:x.message),p(!1),m==null||m(!1),S.refetch()):R.error((N=i==null?void 0:i.data)==null?void 0:N.message)}catch(g){R.error(K(g))}};return e.jsx(re,{open:s,setOpen:p,title:u,setEdit:m,edit:r,children:e.jsx(Q,{methods:v,onSubmit:v.handleSubmit(y),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Module Name",name:"module_name",placeholder:"Enter module name"})}),e.jsx("div",{children:e.jsx(H,{label:"Module ID",name:"module_id",placeholder:"Enter module id"})}),e.jsx("div",{children:e.jsx(H,{label:"Module URL",name:"module_url",placeholder:"Enter module url"})}),e.jsx(O,{}),e.jsx("div",{children:e.jsx(le,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Ve=z().shape({menuRoleName:E().required("menu name is required")});function De({open:s,setOpen:p,title:u,edit:r,setEdit:m,id:S,menuRoleList:n,moduleId:j}){const b=J({}),v=W({defaultValues:{menuRoleName:""},resolver:X(Ve)}),{reset:h}=v;console.log(j,"id"),l.useEffect(()=>{var c;if(s)if(r&&S){const d=(c=n==null?void 0:n.data)==null?void 0:c.find(x=>x.id===Number(S));d&&h({menuRoleName:d.menu_role_name||""})}else h({menuRoleName:""})},[s,r,S,n,h]);const y=async c=>{var d,x,N,g,i;try{const M=r?(d=q)==null?void 0:d.editMenuList:(x=q)==null?void 0:x.addMenuList,T=r&&S?{...c,id:S}:{...c,moduleId:j},I=await b.mutateAsync({api:M,data:T});(N=I==null?void 0:I.data)!=null&&N.status?(R.success((g=I==null?void 0:I.data)==null?void 0:g.message),p(!1),m(!1),n.refetch()):R.error((i=I==null?void 0:I.data)==null?void 0:i.message)}catch(M){R.error(K(M))}};return e.jsx(re,{open:s,setOpen:p,title:u,setEdit:m,edit:r,children:e.jsx(Q,{methods:v,onSubmit:v.handleSubmit(y),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(H,{label:"Service Name",name:"menuRoleName",placeholder:"Enter menu name"})}),e.jsx(O,{}),e.jsx("div",{children:e.jsx(le,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}const Be=z().shape({service_name:E().required("menu name is required")});function Ue({open:s,setOpen:p,title:u,edit:r,setEdit:m,serviceList:S,id:n,menuRoleList:j,moduleId:b,menuRoleId:v,moduleName:h}){var M,T,I,_,f,L;const y=J({}),c=J({}),d=W({defaultValues:{service_name:""},resolver:X(Be)}),{reset:x}=d;console.log(b,"id"),l.useEffect(()=>{var o,a;if(s)if(r&&n){const C=(a=(o=j==null?void 0:j.data)==null?void 0:o.data)==null?void 0:a.find(k=>k.id===n);C&&x({service_name:C.menu_role_name||""})}else x({service_name:""})},[s,r,n,j,x]);const N=async o=>{var a,C,k;try{const A=r?"EditModuleList":"AddmoduleList",t=r&&n?{...o,moduleId:n}:{...o,moduleId:b},P=await y.mutateAsync({api:A,data:t});(a=P==null?void 0:P.data)!=null&&a.success?(R.success((C=P==null?void 0:P.data)==null?void 0:C.message),p(!1),m(!1),S.refetch()):R.error((k=P==null?void 0:P.data)==null?void 0:k.message)}catch(A){R.error(K(A))}},g=U({api:(M=q)==null?void 0:M.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:v,moduleId:b},options:{enabled:!0}}),i=async(o,a,C)=>{var k,A,t,P;console.log(C);try{const G={isSuspended:C,menuId:o,menuRoleId:a},D=await c.mutateAsync({api:(k=q)==null?void 0:k.addRemoveMenuPermission,data:G});(A=D==null?void 0:D.data)!=null&&A.status?(R.success(((t=D==null?void 0:D.data)==null?void 0:t.message)||"Permission updated successfully"),g.refetch()):R.error(((P=D==null?void 0:D.data)==null?void 0:P.message)||"Failed to update permission")}catch(G){R.error(K(G))}};return console.log(h),console.log((I=(T=g==null?void 0:g.data)==null?void 0:T.data)==null?void 0:I[h],"permitedMenuList"),e.jsx(re,{open:s,setOpen:p,title:u,setEdit:m,edit:r,children:e.jsx(Q,{methods:d,onSubmit:d.handleSubmit(N),children:e.jsx("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Sl."}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Menu Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Permission"})]})}),e.jsx("tbody",{children:((L=(f=(_=g==null?void 0:g.data)==null?void 0:_.data)==null?void 0:f[h])==null?void 0:L.map((o,a)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a+1}),e.jsx("td",{className:`border border-gray-300 px-4 py-2 ${o.is_suspended?"text-black":"text-green-600"}`,children:o.menu_string}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:o.is_suspended?e.jsx("button",{className:"text-green-600 bg-green-200 hover:bg-green-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>i(o.id,o.menu_role_id,!o.is_suspended),children:"Add"}):e.jsx("button",{className:"text-red-600  bg-red-200 hover:bg-red-100 px-2 py-1 rounded-md text-xs font-bold",onClick:()=>i(o.id,o.menu_role_id,!o.is_suspended),children:"Remove"})})]},o.id)))||e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-4",children:"No data available"})})})]})})})})})}function Oe(s){var L,o,a,C,k,A;const[p]=l.useState(1),[u]=l.useState(10),[r,m]=l.useState(!1),[S,n]=l.useState(""),[j,b]=l.useState(!1),[v,h]=l.useState(!1),[y,c]=l.useState(null);console.log(v,y);const[d,x]=l.useState(1),[N,g]=l.useState(10),i=100,M=t=>{x(t)},T=t=>{g(t),x(1)},I=U({api:(L=q)==null?void 0:L.getMenuMasterList,key:"menuMasterList",options:{enabled:!0}}),_=U({api:(o=q)==null?void 0:o.getPermitedMenuList,key:"permitedMenuList",config:{menuRoleId:s==null?void 0:s.id,moduleId:s==null?void 0:s.moduleId},options:{enabled:!0}}),f=t=>{c(t),h(!0)};return console.log(s==null?void 0:s.moduleName),e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsx("div",{className:"flex justify-end ",children:e.jsx(V,{type:"button",className:"flex items-center gap-2",onClick:()=>{n(""),b(!1),m(!0)},children:"Add More Menu Permission"})})}),e.jsx(Ue,{open:r,setOpen:m,title:j?"Edit Menu":"Add Menu",id:S,edit:j,setEdit:b,moduleId:s==null?void 0:s.moduleId,menuRoleId:s==null?void 0:s.id,moduleName:s==null?void 0:s.moduleName}),e.jsx(Y,{className:"",children:e.jsx(Z,{children:I.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(B,{children:[e.jsx(F,{className:"",children:"#"}),e.jsx(F,{className:"",children:"Menu"}),e.jsx(F,{className:"",children:"Actions"})]})}),e.jsx(ae,{children:(A=(k=(C=(a=_==null?void 0:_.data)==null?void 0:a.data)==null?void 0:C[s==null?void 0:s.moduleName])==null?void 0:k.filter(t=>(t==null?void 0:t.menu_role_id)==(s==null?void 0:s.id)))==null?void 0:A.map((t,P)=>e.jsxs(B,{children:[e.jsx($,{children:p*u-u+P+1}),e.jsx($,{children:t==null?void 0:t.menu_string}),e.jsxs($,{children:[e.jsxs(V,{variant:"secondary",onClick:()=>{n(t==null?void 0:t.id),b(!0),m(!0)},children:[e.jsx(ne,{})," Edit"]}),e.jsxs(V,{onClick:()=>f(t),className:"ml-2",variant:"secondary",children:[e.jsx(xe,{})," View"]})]})]},t==null?void 0:t.id))})]}),e.jsx(O,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:d,totalItems:i,itemsPerPage:N,onPageChange:M,onItemsPerPageChange:T})})]})})})]})})}const He=z().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function We(s){var a,C,k,A;const[p]=l.useState(1),[u]=l.useState(10),[r,m]=l.useState(!1),[S,n]=l.useState(""),[j,b]=l.useState(!1),[v,h]=l.useState(!1),[y,c]=l.useState(!1),[d,x]=l.useState(1),[N,g]=l.useState(10),i=100,M=t=>{x(t)},T=t=>{g(t),x(1)},I=W({resolver:X(He),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),_=me({api:`${(a=q)==null?void 0:a.serviceList}?module=${(C=I==null?void 0:I.watch())==null?void 0:C.moduleId}`,key:"serviceMasterList",options:{enabled:!0}}),f=U({api:(k=q)==null?void 0:k.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}});console.log(S);const o=(((A=f==null?void 0:f.data)==null?void 0:A.data.filter(t=>(t==null?void 0:t.module_id)==(s==null?void 0:s.moduleId)))||[]).slice((d-1)*N,d*N);return e.jsx("main",{className:"grid items-start ",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2 ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end ",children:e.jsx(V,{type:"button",className:"flex items-center gap-2",onClick:()=>{n(""),b(!1),m(!0)},children:"Add Role List"})}),e.jsx(De,{open:r,setOpen:m,title:j?"Edit Role":"Add Role",id:S,edit:j,setEdit:b,menuRoleList:f,moduleId:s==null?void 0:s.moduleId,serviceList:_,moduleList:s==null?void 0:s.moduleList})]}),e.jsxs(je,{open:y,children:[e.jsx(ge,{}),e.jsxs(fe,{className:"h-[700px] max-h-[700px] overflow-scroll sm:max-w-[1200px]",children:[e.jsx(oe,{className:" flex justify-between text-xl font-bold text-gray-500",children:e.jsxs("div",{children:["Module :"," ",e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:s==null?void 0:s.moduleName})]})}),e.jsxs(oe,{className:" flex justify-between text-xl font-bold text-gray-500",children:[e.jsxs("div",{children:["Role :"," ",e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:v==null?void 0:v.menu_role_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"inline cursor-pointer rounded-lg hover:bg-red-100",onClick:()=>c(!1)})})})]}),e.jsxs(Pe,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"flex justify-between py-4",children:e.jsx(Me,{className:"grid w-auto grid-cols-2",children:e.jsx(we,{className:"rounded-lg px-2 data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"MENULIST",children:"Permitted Menu List"})})}),e.jsx(pe,{value:"MENULIST",children:e.jsx(Oe,{moduleId:s==null?void 0:s.moduleId,id:S,moduleName:s==null?void 0:s.moduleName})})]})]})]}),e.jsx(Y,{children:e.jsx(Z,{children:_.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(B,{children:[e.jsx(F,{className:"",children:"#"}),e.jsx(F,{className:"",children:"Role Name"}),e.jsx(F,{className:"",children:"Actions"})]})}),e.jsx(ae,{children:o.map((t,P)=>e.jsxs(B,{children:[e.jsx($,{children:p*u-u+P+1}),e.jsx($,{children:t==null?void 0:t.menu_role_name}),e.jsxs($,{children:[e.jsxs(V,{variant:"secondary",onClick:()=>{n(t==null?void 0:t.id),b(!0),m(!0)},children:[e.jsx(ne,{})," Edit"]}),e.jsxs(V,{onClick:()=>{h(t),c(!0),n(t==null?void 0:t.id)},className:"ml-2",variant:"secondary",children:[e.jsx(xe,{})," View"]})]})]},t==null?void 0:t.id))})]}),e.jsx(O,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:d,totalItems:i,itemsPerPage:N,onPageChange:M,onItemsPerPageChange:T})})]})})})]})})}const Xe=z().shape({ulbId:E(),moduleId:E(),complaintRefNo:E()});function ze(){var C,k,A,t,P,G,D,he;const[s]=l.useState(1),[p]=l.useState(10),[u,r]=l.useState(!1),[m,S]=l.useState(!1),[n,j]=l.useState(""),[b,v]=l.useState(""),[h,y]=l.useState(!1),[c,d]=l.useState(1),[x,N]=l.useState(10),[g,i]=l.useState(!1),M=100,T=w=>{d(w)},I=w=>{N(w),d(1)},_=W({resolver:X(Xe),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:"",fDate:"",toDate:"",complaintRefNo:""}}),f=async()=>{a==null||a.refetch()},L=U({api:(C=q)==null?void 0:C.userManagementModuleList,key:"moduleMasterList",options:{enabled:!0}}),o=U({api:(k=q)==null?void 0:k.getMenuRoleList,key:"menuRoleList",options:{enabled:!0}}),a=me({api:`${(A=q)==null?void 0:A.serviceList}?module=${(t=_==null?void 0:_.watch())==null?void 0:t.moduleId}`,key:"serviceList",options:{enabled:!0}});return console.log(u==null?void 0:u.id,"id"),e.jsx("main",{className:"grid items-start",children:e.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[e.jsxs(je,{open:g,children:[e.jsx(ge,{}),e.jsxs(fe,{className:"sm:max-w-[1200px] h-auto max-h-[700px]  overflow-scroll",children:[e.jsxs(oe,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:[e.jsxs("div",{children:["Module : ",e.jsx("span",{className:"font-bold text-lg text-yellow-500",children:u==null?void 0:u.module_name})]}),e.jsx("div",{children:e.jsx("span",{children:e.jsx(be,{className:"cursor-pointer hover:bg-red-100 rounded-lg inline",onClick:()=>i(!1)})})})]}),e.jsxs(_e,{defaultValue:"MENULIST",className:"w-full",children:[e.jsx("div",{className:"py-4 flex justify-between",children:e.jsxs(Ce,{className:"grid w-auto grid-cols-3",children:[e.jsx(ce,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"MENULIST",children:"Menu List Master"}),e.jsx(ce,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"SERVICE_LIST",children:"Service List Master"}),e.jsx(ce,{className:"data-[state=active]:bg-yellow-400 data-[state=active]:text-white",value:"ROLE_LIST",children:"Role List Master"})]})}),e.jsx(ie,{value:"MENULIST",children:e.jsx(Te,{id:n,mid:u==null?void 0:u.id})}),e.jsx(ie,{value:"SERVICE_LIST",children:e.jsx(Fe,{id:n,setEdit:y,setOpen:S,edit:h,refetch:a==null?void 0:a.refetch,serviceList:a})}),e.jsx(ie,{value:"ROLE_LIST",children:e.jsx(We,{id:n,setEdit:y,setOpen:S,edit:h,refetch:o==null?void 0:o.refetch,serviceList:o,moduleId:u==null?void 0:u.id,moduleName:b})})]})]})]}),e.jsxs(Y,{children:[e.jsx(Q,{methods:_,onSubmit:_.handleSubmit(f),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background px-10 pt-4",children:[e.jsxs("div",{children:[e.jsx(Ie,{htmlFor:"moduleId",children:"Module name"}),e.jsx(ue,{className:"cursor-pointer bg-background",name:"moduleId",data:((G=(P=L.data)==null?void 0:P.data)==null?void 0:G.map(w=>({value:w==null?void 0:w.id,label:w==null?void 0:w.module_name})))??[]})]}),e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsx(le,{variant:"secondary",isLoading:_.formState.isSubmitting,type:"submit",className:"float-right w-auto px-10",children:"Search"})}),e.jsx("div",{className:"mt-6 flex justify-end "}),e.jsx("div",{className:"mt-6 flex justify-end ",children:e.jsx(V,{type:"button",className:"flex items-center gap-2",onClick:()=>{j(""),y(!1),S(!0)},children:"Add New"})}),e.jsx(qe,{open:m,setOpen:S,title:h?"Edit Module":"Add Module",id:n,edit:h,setEdit:y,serviceList:a,moduleList:L})]})}),e.jsx(ye,{className:"px-7",children:e.jsx(Se,{})}),e.jsx(Z,{children:a.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(B,{children:[e.jsx(F,{className:"",children:"#"}),e.jsx(F,{className:"",children:"Module"}),e.jsx(F,{className:"",children:"Actions"})]})}),e.jsx(ae,{children:(he=(D=L==null?void 0:L.data)==null?void 0:D.data)==null?void 0:he.map((w,Ne)=>e.jsxs(B,{children:[e.jsx($,{children:s*p-p+Ne+1}),e.jsx($,{children:w==null?void 0:w.module_name}),e.jsxs($,{children:[e.jsxs(V,{variant:"secondary",onClick:()=>{j(w==null?void 0:w.id),y(!0),S(!0)},children:[e.jsx(ne,{})," Edit"]}),e.jsxs(V,{variant:"secondary",onClick:()=>{j(w==null?void 0:w.id),v(w==null?void 0:w.module_name),r(w),i(!0)},className:"ml-2",children:[e.jsx(xe,{})," View"]})]})]},w==null?void 0:w.id))})]}),e.jsx(O,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(de,{currentPage:c,totalItems:M,itemsPerPage:x,onPageChange:T,onItemsPerPageChange:I})})]})})]})]})})}function ms(){return e.jsx(ve,{title:"Module List (master)",subTitle:"Control all Module here",children:e.jsx("div",{children:e.jsx(ze,{})})})}export{ms as default};
