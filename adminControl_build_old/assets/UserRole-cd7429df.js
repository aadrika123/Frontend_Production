import{j as e,I as je,_ as R,s as yt,g as We}from"./index-360b430d.js";import{r as l}from"./router-b87f8164.js";import{M as jt}from"./MailboxSidebar-b7e24c7f.js";import{G as De,L as be,S as fe,C as Ne,r as Le,a as Nt}from"./ShimmerTable-1b8d8a3e.js";import{c as we,a as B,u as ve,A as k}from"./ApiHeader-060855c5.js";import{a as Ae,A as P,b as Pe,d as wt,e as Ee,f as vt}from"./PowerupFunctions-4da1157a.js";import{u as ye}from"./useSetTitle-47915e05.js";import{R as ee}from"./Hourglass-d57ba855.js";import{F as St}from"./index.esm-68507145.js";import{A as Se}from"./ApiList-24eddacd.js";import{B as ke}from"./BottomErrorCard-6e38f7c9.js";import{t as Ge,b as kt,c as Ct}from"./index.esm-bb346f30.js";import{a as Ve,b as Mt,c as Lt}from"./index.esm-d3a2968b.js";import{a as Oe}from"./axios-096c69c8.js";import"./react-5403e0b7.js";import"./reactQuery-8705a202.js";import"./reactQueryDevtools-9a5be7d4.js";import"./tailwind-64fa9e48.js";function ze(t){const h=l.useRef(),C=we({roleName:B().required("Enter menu role name")}),x=ve({initialValues:{roleName:""},onSubmit:D=>{t==null||t.postRole(D)},validationSchema:C});l.useEffect(()=>{(t==null?void 0:t.modalState)===!0?h.current.showModal():h.current.close(),(t==null?void 0:t.currentSelectedId)!==null&&A()},[t==null?void 0:t.modalState]);const A=()=>{x.setFieldValue("roleName",t==null?void 0:t.currentSelectedName)},v=D=>{let o=D.target.name,q=D.target.value;o=="roleName"&&x.setFieldValue("roleName",Ae(q,x.values.roleName,100))};return e.jsxs("dialog",{ref:h,className:"shadow-xl relative",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{t==null||t.setmodalState(!1),t==null||t.setcurrentSelectedId(null),addEditModal.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold",children:"Add Menu Role "})})]}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsxs("form",{onSubmit:x.handleSubmit,onChange:v,className:"bg-white  rounded px-8 pt-6 pb-8 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm  mb-2",htmlFor:"rolename",children:"Role Name"}),e.jsx("input",{...x.getFieldProps("roleName"),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"rolename",type:"text"}),e.jsx("span",{className:"text-red-600",children:x.touched.roleName&&x.errors.roleName?x.errors.roleName:null})]}),e.jsx("div",{className:"flex items-center justify-between",children:t!=null&&t.addEditLoading?e.jsxs("button",{className:"w-full bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex justify-center items-center",type:"button",children:[" ",e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}):e.jsx("button",{className:"w-full bg-[#1A4D8C]  hover:bg-[#113766] text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:(t==null?void 0:t.currentSelectedId)===null?"Save":"Update"})})]})})]})}function $e(t){const h=l.useRef();return l.useEffect(()=>{(t==null?void 0:t.mappingModal)===!0&&h.current.showModal()},[t==null?void 0:t.mappingModal]),e.jsx("dialog",{ref:h,className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setmappingModal(!1),h.current.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(De,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingMappingUpdate)&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsx("div",{children:Array.isArray(t==null?void 0:t.menuListById)&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.menuListById})})})]})})}function Ce(t){const h=l.useRef();return l.useEffect(()=>{(t==null?void 0:t.deleteModal)===!0?h.current.showModal():h.current.close()},[t==null?void 0:t.deleteModal]),e.jsx("dialog",{ref:h,className:"relative bg-transparent",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[e.jsx("button",{onClick:()=>{t==null||t.setdeleteModal(!1),deleteModal.close()},type:"button",className:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(St,{size:30})})]}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure to delete ?"}),t!=null&&t.deleteLoading?e.jsxs("button",{className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",type:"button",children:[" ",e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}):e.jsx("button",{type:"button",className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:t==null?void 0:t.enableDisableUser,children:"Yes, I'm sure"})]})]})})}function Pt(){const[t,h]=l.useState(!1),[C,x]=l.useState(!1),[A,v]=l.useState(!1),[D,o]=l.useState(null),[q,m]=l.useState(!1),[T,r]=l.useState(null),[M,I]=l.useState(null),[F,U]=l.useState(null),[O,H]=l.useState(null),[d,L]=l.useState([{menu_string:"Home",menuId:1,permission_status:!0}]),[E,S]=l.useState(!1),[G,Q]=l.useState(!1),[z,V]=l.useState(!1),[he,se]=l.useState(!1),[ue,te]=l.useState(!1),[f,$]=l.useState(!1);ye("Menu Role",!0);const{getMenuRole:K,api_PostMenuRole:Z,api_deleteMenuRole:de,api_updateMenuRole:ae,api_getMenuListByMenuRoleId:oe,api_updateMenuRoleMapping:ce}=Se(),ne=[{Header:"Sl.",Cell:({row:c})=>e.jsx("div",{className:"px-1",children:(c==null?void 0:c.index)+1})},{Header:"Menu Name",accessor:"menu_string"},{Header:"Module",accessor:"module_name"},{Header:"Permission",accessor:"is_suspended",Cell:c=>{var a;return e.jsx("div",{className:"",children:e.jsx("input",{checked:!((a=c.row.values)!=null&&a.is_suspended),onChange:i=>{var n;return N((n=c.row.original)==null?void 0:n.id,i.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],le=[{Header:"#",Cell:({row:c})=>e.jsx("div",{className:"pr-2",children:c.index+1})},{Header:"Role Name",accessor:"menu_role_name"},{Header:"Created by",accessor:"created_by"},{Header:"Status",accessor:"is_suspended",Cell:c=>e.jsxs("p",{children:[c.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),c.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:c})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var a,i;U((a=c.row.values)==null?void 0:a.id),H((i=c.row.values)==null?void 0:i.menu_role_name),h(!0)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var a;U((a=c.row.values)==null?void 0:a.id),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"}),e.jsx("button",{onClick:()=>{var a,i;U((a=c.row.values)==null?void 0:a.id),ie((i=c.row.values)==null?void 0:i.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Menu Mapping"})]})}],W=(c=null)=>{c===null?S(!0):Q(!0),P.post(K,{},k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?o((n=a==null?void 0:a.data)==null?void 0:n.data):o(null)}).catch(function(a){}).finally(()=>{c===null?S(!1):Q(!1)})},X=()=>{$(!0);let c={id:500005};P.post(de,c,k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?(v(!1),W("action")):j(!0,(n=res==null?void 0:res.data)==null?void 0:n.message)}).catch(function(a){j(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{$(!1),U(null)})},ge=c=>{te(!0);let a=Z,i={menuRoleName:c==null?void 0:c.roleName};F!==null&&(i.id=F,a=ae),P.post(a,i,k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status?(h(!1),W("action")):j(!0,(_=res==null?void 0:res.data)==null?void 0:_.message)}).catch(function(n){j(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{te(!1),U(null),H(null)})},ie=c=>{V(!0);let a={menuRoleId:c};P.post(oe,a,k()).then(function(i){var n,g;(n=i==null?void 0:i.data)!=null&&n.status&&(r((g=i==null?void 0:i.data)==null?void 0:g.data),x(!0))}).catch(function(i){}).finally(()=>{V(!1)})},N=(c,a)=>{se(!0);let i={menuRoleId:F,menuId:c,isSuspended:!a};P.post(ce,i,k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status?(R.success("Mapping updated successfully!"),ie(F)):R.error((_=n==null?void 0:n.data)==null?void 0:_.message)}).catch(function(n){R.error("Something went wrong")}).finally(()=>{se(!1)})};l.useEffect(()=>{W()},[]);const j=(c,a)=>{I(a),m(c)};return e.jsxs(e.Fragment,{children:[e.jsx(je,{}),q&&e.jsx(ke,{activateBottomErrorCard:j,errorTitle:M}),E&&e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0}),e.jsx(ze,{currentSelectedId:F,setcurrentSelectedId:U,currentSelectedName:O,postRole:ge,addEditLoading:ue,setmodalState:h,modalState:t}),e.jsx($e,{title:"Menu Role Mapping",isLoadingMappingUpdate:he,isLoadingMenuMappingUpdate:z,mappingModal:C,setmappingModal:x,columns:ne,menuListById:T,menuList:d}),e.jsx(Ce,{deleteLoading:f,deleteMenuRole:X,setdeleteModal:v,deleteModal:A}),E&&e.jsx(fe,{}),!E&&D!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[z&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:G,exportStatus:!1,assessmentType:!1,columns:le,dataList:D,children:e.jsxs("button",{onClick:()=>h(!0),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Ne,{})," Add Rolee"]})})]})]})}function At(){const[t,h]=l.useState(!1),[C,x]=l.useState(!1),[A,v]=l.useState(!1),[D,o]=l.useState(null),[q,m]=l.useState(!1),[T,r]=l.useState(!1),[M,I]=l.useState(!1),[F,U]=l.useState(!1),[O,H]=l.useState(!1),[d,L]=l.useState(!1),[E,S]=l.useState(!1),[G,Q]=l.useState(null),[z,V]=l.useState(null),[he,se]=l.useState(null),[ue,te]=l.useState(!1);ye("API Role",!0);const{getApiRole:f,api_PostApiRole:$,api_deleteApiRole:K,api_updateApiRole:Z,api_getApiListByApiRoleId:de,api_updateApiRoleMapping:ae}=Se(),oe=[{Header:"Sl.",Cell:({row:N})=>e.jsx("div",{className:"px-1",children:(N==null?void 0:N.index)+1})},{Header:"API Name",Cell:N=>{var j;return e.jsx("div",{className:"line-clamp-1",children:(j=N.row.original)==null?void 0:j.end_point})}},{Header:"Permission",accessor:"is_suspended",Cell:N=>{var j;return e.jsx("div",{className:"",children:e.jsx("input",{checked:!((j=N.row.values)!=null&&j.is_suspended),onChange:c=>{var a;return ge((a=N.row.original)==null?void 0:a.id,c.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],ce=[{Header:"#",Cell:({row:N})=>e.jsx("div",{className:"pr-2",children:N.index+1})},{Header:"API Role Name",accessor:"api_role_name"},{Header:"Created by",accessor:"created_by"},{Header:"Status",accessor:"is_suspended",Cell:N=>e.jsxs("p",{children:[N.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),N.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:N})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var j,c;V((j=N.row.values)==null?void 0:j.id),se((c=N.row.values)==null?void 0:c.menu_role_name),h(!0)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var j;V((j=N.row.values)==null?void 0:j.id),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"}),e.jsx("button",{onClick:()=>{var j,c;V((j=N.row.values)==null?void 0:j.id),X((c=N.row.values)==null?void 0:c.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"API Mapping"})]})}],ne=(N=null)=>{N===null?m(!0):te(!0),P.post(f,{},k()).then(function(j){var c,a;(c=j==null?void 0:j.data)!=null&&c.status?o((a=j==null?void 0:j.data)==null?void 0:a.data):o(null)}).catch(function(j){}).finally(()=>{N===null?m(!1):te(!1)})},le=()=>{H(!0);let N={id:z};P.post(K,N,k()).then(function(j){var c,a;(c=j==null?void 0:j.data)!=null&&c.status?(v(!1),ne("action")):ie(!0,(a=res==null?void 0:res.data)==null?void 0:a.message)}).catch(function(j){ie(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{H(!1),V(null)})},W=N=>{r(!0);let j=$,c={apiRoleName:N==null?void 0:N.roleName};z!==null&&(c.id=z,j=Z),P.post(j,c,k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?(h(!1),ne("action")):ie(!0,(n=res==null?void 0:res.data)==null?void 0:n.message)}).catch(function(a){ie(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{r(!1),V(null),se(null)})},X=N=>{S(!0);let j={apiRoleId:N};P.post(de,j,k()).then(function(c){var a,i;(a=c==null?void 0:c.data)!=null&&a.status&&(I((i=c==null?void 0:c.data)==null?void 0:i.data),x(!0))}).catch(function(c){}).finally(()=>{S(!1)})},ge=(N,j)=>{U(!0);let c={apiRoleId:z,apiId:N,isSuspended:!j};P.post(ae,c,k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?(R.success("Successfully toasted!"),X(z)):R.error((n=a==null?void 0:a.data)==null?void 0:n.message)}).catch(function(a){R.error("Something went wrong")}).finally(()=>{U(!1)})};l.useEffect(()=>{ne()},[]);const ie=(N,j)=>{Q(j),L(N)};return e.jsxs(e.Fragment,{children:[d&&e.jsx(ke,{activateBottomErrorCard:ie,errorTitle:G}),q&&e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0}),e.jsx(je,{}),e.jsx(ze,{currentSelectedId:z,currentSelectedName:he,setcurrentSelectedId:V,addEditLoading:T,postRole:W,apiListByApiRoleId:M,setmodalState:h,modalState:t}),e.jsx($e,{title:"Api Role Mapping",isLoadingMappingUpdate:F,setmappingModal:x,mappingModal:C,columns:oe,menuListById:M}),e.jsx(Ce,{deleteLoading:O,deleteApiRole:le,setdeleteModal:v,deleteModal:A}),q&&e.jsx(fe,{}),!q&&D!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[E&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:ue,exportStatus:!1,assessmentType:!1,columns:ce,dataList:D,children:e.jsxs("button",{onClick:()=>h(!0),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Ne,{})," Add Role"]})})]})]})}function _t(t){var D,o,q;let h=we({menuName:B().required("Enter menu name"),route:B().required("Enter route"),parent:B(),moduleId:B().required("Select module"),workflowId:B()});const x=ve({initialValues:{menuName:"",route:"",parent:"",moduleId:"",workflowId:""},enableReinitialize:!0,onSubmit:m=>{t==null||t.postMenu(m)},validationSchema:h}),A=m=>{let T=m.target.name,r=m.target.value;T==="moduleId"&&(t==null||t.fetchWorkflowByModule(r)),T=="menuName"&&x.setFieldValue("menuName",Ae(r,x.values.menuName,100))},v=m=>{x.setFieldValue("menuName",m==null?void 0:m.menu_string),x.setFieldValue("route",m==null?void 0:m.route),x.setFieldValue("parent",m==null?void 0:m.parent_id),x.setFieldValue("moduleId",m==null?void 0:m.module_id),x.setFieldValue("workflowId",m==null?void 0:m.workflow_id),t==null||t.fetchWorkflowByModule(m==null?void 0:m.module_id)};return l.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&v(t==null?void 0:t.currentMenuData)},[t==null?void 0:t.currentMenuData]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:A,onSubmit:x.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Menu Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...x.getFieldProps("menuName"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:x.touched.menuName&&x.errors.menuName?x.errors.menuName:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Route",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...x.getFieldProps("route"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:x.touched.route&&x.errors.route?x.errors.route:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Parent"}),e.jsxs("select",{...x.getFieldProps("parent"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"#",className:"font-semibold text-red-500",children:"No Parent"}),Array.isArray(t==null?void 0:t.parentMenuList)&&((D=t==null?void 0:t.parentMenuList)==null?void 0:D.map((m,T)=>e.jsx("option",{value:m==null?void 0:m.id,children:m==null?void 0:m.menu_string})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:x.touched.parent&&x.errors.parent?x.errors.parent:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Module"}),e.jsxs("select",{...x.getFieldProps("moduleId"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),Array.isArray(t==null?void 0:t.moduleList)&&((o=t==null?void 0:t.moduleList)==null?void 0:o.map((m,T)=>e.jsx("option",{value:m==null?void 0:m.id,children:m==null?void 0:m.module_name})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:x.touched.moduleId&&x.errors.moduleId?x.errors.moduleId:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label block mb-1 text-gray-600 text-xs  "}),e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Workflow ",e.jsx("span",{className:"text-xs text-gray-600",children:"(Select module to get workflow list)"})," "]}),e.jsxs("select",{...x.getFieldProps("workflowId"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"#",className:"font-semibold text-red-500",children:"No Workflow"}),Array.isArray(t==null?void 0:t.workflowListByModule)&&((q=t==null?void 0:t.workflowListByModule)==null?void 0:q.map((m,T)=>e.jsx("option",{value:m==null?void 0:m.id,children:m==null?void 0:m.workflow_name})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:x.touched.workflowId&&x.errors.workflowId?x.errors.workflowId:null})]}),e.jsx("div",{className:"col-span-12 mt-10",children:t!=null&&t.addEditLoading?e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})})})})}function Ft(){const[t,h]=l.useState(!1),[C,x]=l.useState(null),[A,v]=l.useState(null),[D,o]=l.useState(null),[q,m]=l.useState(null),[T,r]=l.useState(!1),[M,I]=l.useState(!1),[F,U]=l.useState(!1),[O,H]=l.useState(!1),[d,L]=l.useState(!1),[E,S]=l.useState(!1),[G,Q]=l.useState(null),[z,V]=l.useState(null),[he,se]=l.useState(null),[ue,te]=l.useState(!1),f=l.useRef();ye("Menu List",!0);const{api_getMenuList:$,api_deleteMenu:K,api_updateMenu:Z,api_getModuleList:de,api_PostMenu:ae,api_getWorkflowByModule:oe,api_getParentMenuList:ce,api_getMenuById:ne}=Se(),le=[{Header:"Sl.",Cell:({row:i})=>e.jsx("div",{className:"px-1",children:i.index+1})},{Header:"Parent Name",accessor:"parentName",Cell:({cell:i})=>{var n;return e.jsxs("div",{children:[((n=i.row.values)==null?void 0:n.parentName)||"#"," "]})}},{Header:"Menu List",accessor:"menu_string"},{Header:"Route List",accessor:"route"},{Header:"Module",accessor:"module_name"},{Header:"Status",accessor:"is_suspended",Cell:i=>e.jsxs("p",{children:[i.value==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),i.value==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})},{Header:"Action",accessor:"id",Cell:({cell:i})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var n,g;V((n=i.row.values)==null?void 0:n.id),X((g=i.row.values)==null?void 0:g.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var n;V((n=i.row.values)==null?void 0:n.id),h(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"})]})}],W=(i=null)=>{i===null?r(!0):te(!0),P.post($,{},k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status?x((_=n==null?void 0:n.data)==null?void 0:_.data):x(null)}).catch(function(n){}).finally(()=>{i===null?r(!1):te(!1)})},X=i=>{L(!0);let n={menuId:i};P.post(ne,n,k()).then(function(g){var _,Y;(_=g==null?void 0:g.data)!=null&&_.status&&(H((Y=g==null?void 0:g.data)==null?void 0:Y.data),menuAddEditModal.showModal())}).catch(function(g){}).finally(()=>{L(!1)})},ge=()=>{P.post(de,{},k()).then(function(i){var n,g;(n=i==null?void 0:i.data)!=null&&n.status&&v((g=i==null?void 0:i.data)==null?void 0:g.data)}).catch(function(i){}).finally(()=>{})},ie=i=>{let n={moduleId:i};P.post(oe,n,k()).then(function(g){var _,Y;(_=g==null?void 0:g.data)!=null&&_.status&&o((Y=g==null?void 0:g.data)==null?void 0:Y.data)}).catch(function(g){}).finally(()=>{})},N=i=>{P.post(ce,{},k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status&&m((_=n==null?void 0:n.data)==null?void 0:_.data)}).catch(function(n){}).finally(()=>{})},j=()=>{U(!0);let i={id:z};P.post(K,i,k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status?(R.success("Menu deleted successfully"),h(!1),W("action")):R.error((_=n==null?void 0:n.data)==null?void 0:_.message)}).catch(function(n){R.error("Something went wrong")}).finally(()=>{U(!1),V(null)})},c=i=>{I(!0);let n=ae,g=(i==null?void 0:i.parent)==="#"?"":i==null?void 0:i.parent,_=(i==null?void 0:i.moduleId)==="#"?"":i==null?void 0:i.moduleId,Y={menuName:i==null?void 0:i.menuName,route:i==null?void 0:i.route,parentId:g,moduleId:_,workflowId:i==null?void 0:i.workflowId};z!==null&&(Y.id=z,Y.isSuspended=!1,n=Z),P.post(n,Y,k()).then(function(re){var xe,Me;(xe=re==null?void 0:re.data)!=null&&xe.status?(R.success("Menu added successfully"),menuAddEditModal.close(),W("action")):R.error((Me=re==null?void 0:re.data)==null?void 0:Me.message)}).catch(function(re){R.error("Something went wrong")}).finally(()=>{I(!1),V(null),se(null)})};l.useEffect(()=>{W(),ge(),N()},[]);const a=(i,n)=>{Q(n),S(i)};return e.jsxs(e.Fragment,{children:[E&&e.jsx(ke,{activateBottomErrorCard:a,errorTitle:G}),e.jsx(je,{}),e.jsxs("dialog",{ref:f,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{V(null),f.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Add API"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(_t,{postMenu:c,parentMenuList:q,fetchWorkflowByModule:ie,moduleList:A,workflowListByModule:D,addEditLoading:M,currentSelectedId:z,currentMenuData:O})})]}),e.jsx(Ce,{deleteLoading:F,deleteMenuList:j,setdeleteModal:h,deleteModal:t}),T&&e.jsx(fe,{}),!T&&C!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[d&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:ue,exportStatus:!1,assessmentType:!1,columns:le,dataList:C,children:e.jsxs("button",{onClick:()=>f.current.showModal(),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Ne,{})," Add Menu"]})})]})]})}function It(t){var O,H;const[h,C]=l.useState([]),[x,A]=l.useState(!1),[v,D]=l.useState(""),[o,q]=l.useState(null);let m=we({apiEndPoint:B().required("Enter end point"),category:B().required("Select category"),desc:B().required("Enter description"),usage:B().required("Enter usage"),preCondition:B().required("Enter pre condition"),postCondition:B().required("Enter post condition"),requestPayload:B().required("Enter request payload"),responsePayload:B().required("Enter response payload"),version:B().required("Enter version"),createdBy:B().required("Select created by"),revisionNo:B().required("Enter revision no."),remarks:B().required("Enter remarks")});const r=ve({initialValues:{apiEndPoint:"",category:"",desc:"",usage:"",preCondition:"",postCondition:"",requestPayload:"",responsePayload:"",version:"",createdBy:"",revisionNo:"",remarks:""},enableReinitialize:!0,onSubmit:d=>{t==null||t.saveApiForm(d,h)},validationSchema:m}),M=d=>{r.setFieldValue("apiEndPoint",d==null?void 0:d.end_point),r.setFieldValue("category",d==null?void 0:d.category_id),r.setFieldValue("desc",d==null?void 0:d.description),r.setFieldValue("usage",d==null?void 0:d.usage),r.setFieldValue("preCondition",d==null?void 0:d.pre_condition),r.setFieldValue("postCondition",d==null?void 0:d.post_condition),r.setFieldValue("requestPayload",d==null?void 0:d.request_payload),r.setFieldValue("responsePayload",d==null?void 0:d.response_payload),r.setFieldValue("version",d==null?void 0:d.version),r.setFieldValue("createdBy",d==null?void 0:d.created_by),r.setFieldValue("revisionNo",d==null?void 0:d.revision_no),r.setFieldValue("remarks",d==null?void 0:d.remarks)};l.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&M(t==null?void 0:t.editData)},[t==null?void 0:t.editData]);const I=(d,L)=>{q(L),A(d)},F=d=>{let L=d.target.name,E=d.target.value;L=="usage"&&r.setFieldValue("usage",Pe(E,r.values.usage,100)),L=="preCondition"&&r.setFieldValue("preCondition",Pe(E,r.values.preCondition,100)),L=="postCondition"&&r.setFieldValue("postCondition",Pe(E,r.values.postCondition,100)),L=="version"&&r.setFieldValue("version",wt(E,r.values.version,10)),L=="revisionNo"&&r.setFieldValue("revisionNo",Ee(E,r.values.revisionNo,10)),L=="remarks"&&r.setFieldValue("remarks",Pe(E,r.values.remarks,100))},U=d=>{if(d.keyCode===13){let L=[...h,d.target.value];C(L),D("")}};return e.jsxs(e.Fragment,{children:[x&&e.jsx(BottomErrorCard,{activateBottomErrorCard:I,errorTitle:o}),e.jsxs("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0   ",children:[e.jsx("form",{onChange:F,onSubmit:r.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2",children:[e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["API Endpoint",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("apiEndPoint"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.apiEndPoint&&r.errors.apiEndPoint?r.errors.apiEndPoint:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Category"}),e.jsxs("select",{...r.getFieldProps("category"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(O=t==null?void 0:t.categoryList)==null?void 0:O.map((d,L)=>e.jsx("option",{value:d==null?void 0:d.id,children:d==null?void 0:d.category_name}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.category&&r.errors.category?r.errors.category:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Usage",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("usage"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.usage&&r.errors.usage?r.errors.usage:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Pre Condition",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("preCondition"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.preCondition&&r.errors.preCondition?r.errors.preCondition:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Post Condition",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("postCondition"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.postCondition&&r.errors.postCondition?r.errors.postCondition:null})]}),e.jsx("div",{className:"col-span-12"}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Request Payload",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...r.getFieldProps("requestPayload"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.requestPayload&&r.errors.requestPayload?r.errors.requestPayload:null})]})}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12  mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Response Payload",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...r.getFieldProps("responsePayload"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.responsePayload&&r.errors.responsePayload?r.errors.responsePayload:null})]})}),e.jsx("div",{className:"form-group col-span-12 md:col-span-4 grid grid-cols-12",children:e.jsxs("div",{className:"col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Description",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("textarea",{...r.getFieldProps("desc"),class:"h-40 resize form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.desc&&r.errors.desc?r.errors.desc:null})]})}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Version",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("version"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.version&&r.errors.version?r.errors.version:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Created By"}),e.jsxs("select",{...r.getFieldProps("createdBy"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(H=t==null?void 0:t.apiDeveloperList)==null?void 0:H.map((d,L)=>e.jsx("option",{value:d==null?void 0:d.id,children:d==null?void 0:d.developer_name}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.createdBy&&r.errors.createdBy?r.errors.createdBy:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Revision No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("revisionNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.revisionNo&&r.errors.revisionNo?r.errors.revisionNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 md:col-span-2 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Remarks",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...r.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:r.touched.remarks&&r.errors.remarks?r.errors.remarks:null})]})]})}),e.jsxs("div",{className:"form-group w-40 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Tags",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{onChange:d=>D(d.target.value),value:v,onKeyDown:U,type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("div",{className:"flex",children:Array.isArray(h)&&(h==null?void 0:h.map((d,L)=>e.jsx("div",{class:"flex justify-center items-center m-1 font-medium py-1 px-2 rounded-full text-blue-700 bg-blue-100 border border-blue-300 ",children:e.jsx("div",{class:"text-xs font-normal leading-none max-w-full flex-initial",children:d})})))})]}),e.jsx("div",{className:"col-span-12 mt-10",children:t!=null&&t.isSubmitLoading?e.jsx("button",{className:" px-6 py-2.5 bg-[#1A4D8C] text-white font-medium text-xs leading-tight  rounded   hover:bg-[#113766] hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{onClick:r.handleSubmit,type:"button",className:" px-6 py-2.5 bg-[#1A4D8C] text-white font-medium text-xs leading-tight  rounded   hover:bg-[#113766] hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})]})}function Et(){return{apiErrorMsg:"Something went wrong",formSubmitionMsg:"Submitted Successfully!"}}function Dt(){const[t,h]=l.useState(!1),[C,x]=l.useState(null),[A,v]=l.useState(!1),[D,o]=l.useState(!1),[q,m]=l.useState(null),[T,r]=l.useState(null),[M,I]=l.useState(null),[F,U]=l.useState(!1),[O,H]=l.useState(null),[d,L]=l.useState(null),[E,S]=l.useState(!1),[G,Q]=l.useState(null),[z,V]=l.useState(!1),{formSubmitionMsg:he,apiErrorMsg:se}=Et(),[ue,te]=l.useState(!1),f=l.useRef();ye("API List",!0);const{api_getApiList:$,api_deleteApi:K,api_PostApi:Z,api_updateApi:de,api_getApiById:ae,api_getApiCategory:oe,api_getApiDeveloperList:ce}=Se(),ne=[{Header:"Sl.",Cell:({row:a})=>e.jsx("div",{className:"px-1",children:a.index+1})},{Header:"API EndPoint",accessor:"end_point",Cell:({cell:a})=>{var i;return e.jsx("div",{children:e.jsx("span",{className:"",children:(i=a.row.values)==null?void 0:i.end_point})})}},{Header:"Category",accessor:"category"},{Header:"Created At",accessor:"created_at"},{Header:"Status",accessor:"is_suspended",Cell:({cell:a})=>{var i,n;return e.jsxs("div",{children:[((i=a.row.values)==null?void 0:i.discontinued)&&e.jsx("span",{className:"font-semibold text-red-400",children:"Suspended"}),!((n=a.row.values)!=null&&n.discontinued)&&e.jsx("span",{className:"font-semibold text-green-400",children:"Active"})]})}},{Header:"Action",accessor:"id",Cell:({cell:a})=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var i,n,g;L((i=a.row.values)==null?void 0:i.id),Q((n=a.row.values)==null?void 0:n.menu_role_name),N((g=a.row.values)==null?void 0:g.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),e.jsx("button",{onClick:()=>{var i;L((i=a.row.values)==null?void 0:i.id),h(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Delete"})]})}],le=(a=null)=>{a===null?v(!0):te(!0),P.post($,{},k()).then(function(i){var n,g;(n=i==null?void 0:i.data)!=null&&n.status?x((g=i==null?void 0:i.data)==null?void 0:g.data):x(null)}).catch(function(i){}).finally(()=>{a===null?v(!1):te(!1)})},W=()=>{o(!0);let a={id:d};P.post(K,a,k()).then(function(i){var n,g;(n=i==null?void 0:i.data)!=null&&n.status?(h(!1),le("action")):c(!0,(g=res==null?void 0:res.data)==null?void 0:g.message)}).catch(function(i){c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{o(!1),L(null)})},X=(a,i)=>{S(!0);let n,g,_={endPoint:a==null?void 0:a.apiEndPoint,category:a==null?void 0:a.category,description:a==null?void 0:a.desc,usage:a==null?void 0:a.usage,preCondition:a==null?void 0:a.preCondition,postCondition:a==null?void 0:a.postCondition,requestPayload:a==null?void 0:a.requestPayload,responsePayload:a==null?void 0:a.responsePayload,version:a==null?void 0:a.version,createdBy:a==null?void 0:a.createdBy,revisionNo:a==null?void 0:a.revisionNo,remarks:a==null?void 0:a.remarks,tags:i};d!==null?(n=de,g=_,g.id=d):(n=Z,g=_),P.post(n,g,k()).then(function(Y){var re,xe;(re=Y==null?void 0:Y.data)!=null&&re.status?(R.success("Api Added Successfully"),le("action"),apiSubmitModal.close()):R.error((xe=Y==null?void 0:Y.data)==null?void 0:xe.message)}).catch(function(Y){R.error(se)}).finally(()=>{S(!1)})},ge=()=>{v(!0),P.post(oe,{},k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?r((n=a==null?void 0:a.data)==null?void 0:n.data):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(a){c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{v(!1)})},ie=()=>{v(!0),P.post(ce,{},k()).then(function(a){var i,n;(i=a==null?void 0:a.data)!=null&&i.status?I((n=a==null?void 0:a.data)==null?void 0:n.data):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(a){c(!0,"Error occured in submitting deactivation application. Please try again later.")}).finally(()=>{v(!1)})},N=a=>{V(!0);let i={id:a};P.post(ae,i,k()).then(function(n){var g,_;(g=n==null?void 0:n.data)!=null&&g.status?(m((_=n==null?void 0:n.data)==null?void 0:_.data),f.current.showModal()):c(!0,"Error occured in submitting deactivation application. Please try again later.")}).catch(function(n){}).finally(n=>{V(!1)})};l.useEffect(()=>{le(),ge(),ie()},[]);const j=()=>{apiSubmitModal.close()},c=(a,i)=>{H(i),U(a)};return e.jsxs(e.Fragment,{children:[e.jsx(je,{}),F&&e.jsx(ke,{activateBottomErrorCard:c,errorTitle:O}),e.jsx(Ce,{deleteLoading:D,deleteApi:W,setdeleteModal:h,deleteModal:t}),e.jsxs("dialog",{ref:f,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{L(null),f.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Add API"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(It,{isSubmitLoading:E,editData:q,saveApiForm:X,categoryList:T,apiDeveloperList:M,setcurrentSelectedId:L,currentSelectedId:d,fetchApiMasterList:le,closeApiSubmitModal:j})})]}),A&&e.jsx(fe,{}),!A&&C!==null&&e.jsxs("div",{className:"px-4 pt-4",children:[z&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(be,{isLoadingSingleFetch:ue,exportStatus:!1,assessmentType:!1,columns:ne,dataList:C,children:e.jsxs("button",{onClick:()=>f.current.showModal(),className:"float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl  hover:bg-[#113766] hover:text-white text-white flex items-center",children:[e.jsx(Ne,{})," Add API"]})})]})]})}function Rt(t){var r;const[h,C]=l.useState(null),[x,A]=l.useState(null);let v=we({userType:B().required("Enter user type"),fullName:B().required("Enter full name"),mobileNo:B().required("Enter mobile no."),altMobileNo:B().required("Select alternate mobile"),email:B().required("Enter email"),address:B().required("Enter address"),userImage:B().required("Select user image")});const o=ve({initialValues:{userType:"",fullName:"",mobileNo:"",altMobileNo:"",email:"",address:"",userImage:""},enableReinitialize:!0,onSubmit:M=>{t==null||t.postUser(M,h)},validationSchema:v}),q=M=>{let I=M.target.name,F=M.target.value;I==="userImage"&&m(M),I=="fullName"&&o.setFieldValue("fullName",Ae(F,o.values.fullName,100)),I=="mobileNo"&&o.setFieldValue("mobileNo",Ee(F,o.values.mobileNo,10)),I=="altMobileNo"&&o.setFieldValue("altMobileNo",Ee(F,o.values.altMobileNo,10)),I=="email"&&o.setFieldValue("email",vt(F,o.values.email,100)),I=="address"&&o.setFieldValue("address",Ae(F,o.values.address,100))},m=M=>{C(M.target.files[0]),A(URL.createObjectURL(M.target.files[0]))},T=()=>{var M,I,F,U,O,H,d;o.setFieldValue("userType",(M=t==null?void 0:t.currentUserData)==null?void 0:M.user_type),o.setFieldValue("fullName",(I=t==null?void 0:t.currentUserData)==null?void 0:I.name),o.setFieldValue("fullName",(F=t==null?void 0:t.currentUserData)==null?void 0:F.name),o.setFieldValue("mobileNo",(U=t==null?void 0:t.currentUserData)==null?void 0:U.mobile),o.setFieldValue("altMobileNo",(O=t==null?void 0:t.currentUserData)==null?void 0:O.alternate_mobile),o.setFieldValue("email",(H=t==null?void 0:t.currentUserData)==null?void 0:H.email),o.setFieldValue("address",(d=t==null?void 0:t.currentUserData)==null?void 0:d.address)};return l.useEffect(()=>{(t==null?void 0:t.currentSelectedId)!==null&&T()},[t==null?void 0:t.currentUserData]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"block md:p-4 w-full md:py-6 rounded-lg mx-auto  bg-white px-4 sm:px-0",children:e.jsx("form",{onChange:q,onSubmit:o.handleSubmit,children:e.jsxs("div",{className:"grid grid-cols-12  sm:space-x-2 px-10",children:[e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["User Type",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...o.getFieldProps("userType"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),Array.isArray(t==null?void 0:t.userTypeList)&&((r=t==null?void 0:t.userTypeList)==null?void 0:r.map((M,I)=>e.jsx("option",{value:M,children:M})))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.userType&&o.errors.userType?o.errors.userType:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Full Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("fullName"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.fullName&&o.errors.fullName?o.errors.fullName:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Mobile NO.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("mobileNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.mobileNo&&o.errors.mobileNo?o.errors.mobileNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Alt Mobile No.",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("altMobileNo"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.altMobileNo&&o.errors.altMobileNo?o.errors.altMobileNo:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Email",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("email"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.email&&o.errors.email?o.errors.email:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Address",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("address"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.address&&o.errors.address?o.errors.address:null})]}),e.jsxs("div",{className:"form-group col-span-12 mb-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["User Image",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...o.getFieldProps("userImage"),type:"file",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.userImage&&o.errors.userImage?o.errors.userImage:null}),e.jsx("div",{className:"w-32 h-32 rounded-full border shadow-xl mx-auto overflow-hidden mt-10 flex justify-center items-center",children:e.jsx("img",{src:x||Ge})})]}),e.jsx("div",{className:"col-span-12 mt-4",children:t!=null&&t.addEditLoading?e.jsx("button",{type:"submit",className:"w-full  cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out flex justify-center items-center",children:e.jsx(ee,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",className:"w-full  cypress_next1_button px-6 py-2.5 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:(t==null?void 0:t.currentSelectedId)===null?"Submit":"Update"})})]})})})})}function Bt(t){const h=l.useRef();return l.useEffect(()=>{(t==null?void 0:t.mappingModal)===!0&&h.current.showModal()},[t==null?void 0:t.mappingModal]),e.jsx("dialog",{ref:h,className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setmappingModal(!1),mappingModal.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(De,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingFetchRoles)&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"menu"),t==null||t.setmappingTypeCurrentState(0)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===0?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" Menu Role"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"api"),t==null||t.setmappingTypeCurrentState(1)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===1?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" API Role"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{t==null||t.fetchRoles(t==null?void 0:t.currentSelectedId,"workflow"),t==null||t.setmappingTypeCurrentState(2)},type:"button",className:` rounded-md border  hover:bg-[#1A4D8C] hover:text-white px-3 py-2 text-sm font-semibold   shadow-sm  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black ${(t==null?void 0:t.mappingTypeCurrentState)===2?"bg-[#1A4D8C] text-white":"border-[#1A4D8C] text-[#1A4D8C]"}`,children:" Workflow Role"})})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsx("div",{children:Array.isArray(t==null?void 0:t.roleList)&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.roleList})})})]})})}function Ut(t){const h=l.useRef();return l.useEffect(()=>{(t==null?void 0:t.wardMappingModalState)===!0&&h.current.showModal()},[t==null?void 0:t.wardMappingModalState]),e.jsx("dialog",{ref:h,id:"wardMappingModal",className:"relative bg-transparent",children:e.jsxs("div",{className:"bg-white shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[e.jsx("div",{className:"flex flex-row-reverse",children:e.jsxs("span",{onClick:()=>{t==null||t.setwardMappingModalState(!1),mappingModal.close()},className:"cursor-pointer rounded-full hover:bg-gray-400",children:[e.jsx(De,{size:25})," "]})}),e.jsxs("p",{className:"text-center text-xl",children:[t==null?void 0:t.title,e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.roleName})]}),e.jsx("div",{children:(t==null?void 0:t.wardMappingCurrentState)==="edit"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t==null?void 0:t.changeWardListType("read"),type:"button",className:"rounded-md border border-[#1A4D8C] px-10 py-2 text-sm font-semibold text-[#1A4D8C] shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:[e.jsx(kt,{className:"inline"}),"Back"]}),e.jsx("button",{onClick:()=>t==null?void 0:t.postWardToMapUser(),type:"button",className:"ml-4 rounded-md bg-[#1A4D8C] px-10 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:"Apply"})]}):e.jsx("button",{onClick:()=>t==null?void 0:t.changeWardListType("edit"),type:"button",className:"rounded-md border border-[#1A4D8C] px-10 py-2 text-sm font-semibold text-[#1A4D8C] shadow-sm hover:bg-[#1A4D8C]/80 hover:shadow-xl",children:"Edit"})}),e.jsxs("div",{className:"text-center",children:[" ",(t==null?void 0:t.isLoadingMappingUpdate)&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx("p",{className:"border-b py-1 mb-3"}),e.jsx("div",{children:e.jsxs("div",{children:[Array.isArray(t==null?void 0:t.wardListToMap)&&(t==null?void 0:t.wardMappingCurrentState)==="edit"&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.wardListToMap}),Array.isArray(t==null?void 0:t.wardListToMap)&&(t==null?void 0:t.wardMappingCurrentState)!=="edit"&&e.jsx(be,{exportStatus:!1,searchText:"Menu",columns:t==null?void 0:t.columns,dataList:t==null?void 0:t.wardListToMap})]})})]})})}function qt({filter:t,setFilter:h}){return e.jsxs(e.Fragment,{children:["Search : "," ",e.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:t||"",onChange:C=>h(C.target.value)})]})}function Tt(t){const[h,C]=l.useState("hidden"),x=l.useMemo(()=>t.columns,[]),A=l.useMemo(()=>t.dataList,[t.dataList,t==null?void 0:t.totalCount]),[v,D]=l.useState(10),[o,q]=l.useState(0);l.useEffect(()=>{q(0)},[t==null?void 0:t.totalCount]),l.useEffect(()=>{let S=(t==null?void 0:t.totalCount)/(t==null?void 0:t.perPage);(t==null?void 0:t.totalCount)%(t==null?void 0:t.perPage)!=0?M(parseInt(S)+1):M(parseInt(S))},[t==null?void 0:t.totalCount,v]);const{getTableBodyProps:m,headerGroups:T,prepareRow:r,setPageSize:M,state:I,rows:F,setGlobalFilter:U}=Le.useTable({columns:x,data:A,initialState:{pageIndex:0}},Le.useGlobalFilter,Le.useSortBy,Le.usePagination),{globalFilter:O,pageSize:H}=I,d=()=>{if(parseInt(o)>0&&parseInt(o)<=parseInt(t==null?void 0:t.lastPage))t==null||t.gotoPage(parseInt(o));else return!1},L=()=>{(t==null?void 0:t.lastPage)!=(t==null?void 0:t.currentPage)&&t.nextPage()},E=()=>{(t==null?void 0:t.currentPage)!=1&&t.prevPage()};return e.jsxs(e.Fragment,{children:[(t==null?void 0:t.search)==!1?e.jsxs("div",{className:"absolute -mt-[6.5vh] right-[2vw]",children:[e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>C(""),onMouseLeave:()=>C("hidden"),onClick:t.exportDataF,children:["Export",e.jsx("div",{className:h+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(Ve,{})})]})}),e.jsx("div",{className:"flex-1",children:t.children})]}):e.jsxs("div",{className:"flex mb-2 pb-2",children:[e.jsx("div",{className:"flex-initial opacity-50",children:e.jsx(qt,{filter:O,setFilter:U})}),e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>C(""),onMouseLeave:()=>C("hidden"),onClick:t.exportDataF,children:["Export",e.jsx("div",{className:h+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(Ve,{})})]})}),e.jsx("div",{className:"flex-1",children:t.children})]}),e.jsx("div",{className:"flex w-full",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"opacity-50",children:"Total Result :"}),e.jsx("span",{className:"font-semibold",children:t==null?void 0:t.totalCount})," "]})}),(t==null?void 0:t.feedback)!=null&&e.jsx("div",{children:e.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[e.jsx(Ct,{className:"inline text-xs text-gray-400 mr-2"}),t.feedback]})}),e.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:e.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[e.jsxs("table",{...m,className:"min-w-full leading-normal",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:T==null?void 0:T.map(S=>e.jsx("tr",{...S.getHeaderGroupProps(),children:S.headers.map(G=>e.jsxs("th",{...G.getHeaderProps(G.getSortByToggleProps()),className:(G==null?void 0:G.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[G.render("Header"),e.jsx("span",{children:G.isSorted?G.isSortedDesc?"":"":""})]}))}))}),e.jsxs("tbody",{...m(),className:"text-sm",children:[F.map((S,G)=>{var Q;return r(S),e.jsx("tr",{...S.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:(Q=S==null?void 0:S.cells)==null?void 0:Q.map((z,V)=>e.jsx("td",{...z.getCellProps(),className:"px-2 py-2 text-sm text-left",children:z.render("Cell")}))})}),e.jsx("tr",{children:e.jsx("td",{})})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[e.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[e.jsx("span",{children:e.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:S=>{q(S.target.value)},placeholder:"Go to page..."})}),e.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>d(),children:[" ",e.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:""})," "]})]}),e.jsxs("div",{className:"col-span-2",children:["  ",e.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:v,onChange:S=>{D(Number(S.target.value)),t.perPageC(Number(S.target.value))},children:[5,10,25,50].map(S=>e.jsxs("option",{selected:S===10,value:S,children:["show ",S]},S))})]}),e.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",e.jsxs("span",{children:["page ","",e.jsxs("strong",{children:[t==null?void 0:t.currentPage," of ",t==null?void 0:t.lastPage]}),""]})]}),e.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[e.jsx("abbr",{title:"First Page",children:e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>t==null?void 0:t.goFirst(),disabled:(t==null?void 0:t.currentPage)==1&&!0,children:[e.jsx(Mt,{})," "]})}),e.jsx("abbr",{title:"Previous Page",children:e.jsx("button",{className:((t==null?void 0:t.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>E(),disabled:(t==null?void 0:t.currentPage)==1&&!0,children:""})}),e.jsx("abbr",{title:"Next Page",children:e.jsx("button",{className:((t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>L(),disabled:(t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)&&!0,children:""})}),e.jsx("abbr",{title:"Last Page",children:e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>t==null?void 0:t.goLast(),disabled:(t==null?void 0:t.currentPage)==(t==null?void 0:t.lastPage)&&!0,children:["  ",e.jsx(Lt,{})]})})]})]})]})})]})}const Ht=t=>{const[h,C]=l.useState(10),[x,A]=l.useState(1),[v,D]=l.useState(0),[o,q]=l.useState(0),[m,T]=l.useState(0),[r,M]=l.useState(),[I,F]=l.useState(!1),[U,O]=l.useState(!1),[H,d]=l.useState(),[L,E]=l.useState(!1),S=()=>{O(!1),E(!0),Oe.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:h,page:x},k()).then(f=>{var $,K,Z,de,ae,oe,ce,ne,le,W;(($=f==null?void 0:f.data)==null?void 0:$.status)==!0?(t!=null&&t.getData&&(t==null||t.allData((K=f==null?void 0:f.data)==null?void 0:K.data)),d((de=(Z=f==null?void 0:f.data)==null?void 0:Z.data)==null?void 0:de.data),T((oe=(ae=f==null?void 0:f.data)==null?void 0:ae.data)==null?void 0:oe.total),D((ne=(ce=f==null?void 0:f.data)==null?void 0:ce.data)==null?void 0:ne.current_page),q((W=(le=f==null?void 0:f.data)==null?void 0:le.data)==null?void 0:W.last_page),O(!1)):O(!0),E(!1)}).catch(f=>(E(!1),O(!0)))},G=()=>{A(v+1)},Q=()=>{A(v-1)},z=f=>{let $=parseInt(m/f),K=parseInt(m%f);if(K==0){$<v&&A($),C(f);return}if(K!=0){$+1<v&&A($+1),C(f);return}},V=()=>{A(1)},he=()=>{A(o)},se=f=>{A(f)},ue=()=>{E(!0),F(!1),Oe.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:m},k()).then(f=>{var $,K,Z;(($=f==null?void 0:f.data)==null?void 0:$.status)==!0&&(M((Z=(K=f==null?void 0:f.data)==null?void 0:K.data)==null?void 0:Z.data),te()),E(!1)}).catch(f=>{E(!1)})},te=()=>{F(!0)};return l.useEffect(()=>{(t==null?void 0:t.requestBody)!=null&&(A(1),C(10),S())},[t==null?void 0:t.changeData]),l.useEffect(()=>{E(!0),S()},[x,h]),e.jsxs(e.Fragment,{children:[U&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),I&&e.jsx(Nt,{data:r}),L&&e.jsx(fe,{}),H!=null&&(H==null?void 0:H.length)!=0?e.jsx(e.Fragment,{children:e.jsx(Tt,{search:t==null?void 0:t.search,currentPage:v,lastPage:o,goFirst:V,goLast:he,count1:m,columns:t==null?void 0:t.columns,dataList:H,exportStatus:!0,perPage:h,perPageC:z,totalCount:m,nextPage:G,prevPage:Q,exportDataF:ue,exportData:r,gotoPage:f=>se(f)})}):e.jsx(e.Fragment,{children:!L&&!U&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};function Wt(){const[t,h]=l.useState(!1),[C,x]=l.useState(!1),[A,v]=l.useState(!1),[D,o]=l.useState(0),[q,m]=l.useState(null),[T,r]=l.useState(!1),[M,I]=l.useState(!1),[F,U]=l.useState(null),[O,H]=l.useState(!1),[d,L]=l.useState(!1),[E,S]=l.useState(null),[G,Q]=l.useState(!1),[z,V]=l.useState(!1),[he,se]=l.useState(null),[ue,te]=l.useState(null),[f,$]=l.useState(null),[K,Z]=l.useState(null),[de,ae]=l.useState(null),[oe,ce]=l.useState(!1),[ne,le]=l.useState(null),[W,X]=l.useState(null),[ge,ie]=l.useState(null),[N,j]=l.useState(0),[c,a]=l.useState({}),[i,n]=l.useState(!1),[g,_]=l.useState(!1),[Y,re]=l.useState(null),xe=l.useRef();ye("User List",!0);const Me=we({filterBy:B().required("This is a required field !"),parameter:B().required("Enter search text !")}),me=ve({initialValues:{filterBy:"",parameter:""},onSubmit:s=>{a({[s==null?void 0:s.filterBy]:s==null?void 0:s.parameter}),o(b=>b+1)},validationSchema:Me}),{api_getUserList:Re,api_EnalbeDisableUser:Ke,api_updateUser:Ye,api_PostUser:Je,api_getUserById:Qe,api_getMenuRolesByUser:Xe,api_getApiRolesByUser:Ze,api_getWardListByUser:pe,api_getWorkflowRolesByUser:et,api_getUserTypeList:tt,api_postMenuRoleUserMapping:at,api_postApiRoleUserMapping:lt,api_postWorkflowRoleUserMapping:it,api_postWardUserMapping:st}=Se(),Be=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:(s==null?void 0:s.index)+1})},{Header:"New Ward",accessor:"ward_name"},{Header:"Old Ward",accessor:"old_ward_name"},{Header:"Permission",accessor:"permission_status",Cell:s=>{var b;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(b=s.row.values)==null?void 0:b.permission_status,type:"checkbox",className:" w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded"})})}}],Ue=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:(s==null?void 0:s.index)+1})},{Header:"New Ward",accessor:"ward_name"},{Header:"Old Ward",accessor:"old_ward_name"},{Header:"Permission",accessor:"permission_status",Cell:s=>e.jsx("div",{className:"",children:e.jsx("input",{onChange:b=>{var u;return gt((u=s.row.original)==null?void 0:u.id,b.target.checked)},type:"checkbox",className:" w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}],nt=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:(s==null?void 0:s.index)+1})},{Header:"Role Name",accessor:"menu_role_name"},{Header:"Permission",accessor:"permission_status",Cell:s=>{var b;return e.jsx("div",{className:"",children:e.jsx(e.Fragment,{children:e.jsx("input",{checked:(b=s.row.values)==null?void 0:b.permission_status,onChange:u=>{var y;return Ie(W,"menu",(y=s.row.original)==null?void 0:y.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})})}}],rt=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:(s==null?void 0:s.index)+1})},{Header:"Role Name",accessor:"api_role_name"},{Header:"Permission",accessor:"permission_status",Cell:s=>{var b;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(b=s.row.values)==null?void 0:b.permission_status,onChange:u=>{var y;return Ie(W,"api",(y=s.row.original)==null?void 0:y.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],dt=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:(s==null?void 0:s.index)+1})},{Header:"Role Name",accessor:"role_name"},{Header:"Permission",accessor:"permission_status",Cell:s=>{var b;return e.jsx("div",{className:"",children:e.jsx("input",{checked:(b=s.row.values)==null?void 0:b.permission_status,onChange:u=>{var y;return Ie(W,"workflow",(y=s.row.original)==null?void 0:y.id,u.target.checked)},type:"checkbox",className:"cypress_addressCheckbox w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"})})}}],ot=[{Header:"Sl.",Cell:({row:s})=>e.jsx("div",{className:"px-1",children:s.index+1})},{Header:"User Image",accessor:"photo",Cell:({cell:s})=>e.jsx("div",{className:"rounded-full border w-10 h-10 flex justify-center items-center",children:e.jsx("img",{className:"w-8",src:Ge,alt:""})})},{Header:"Employee Name",accessor:"name",Cell:({cell:s})=>{var b;return e.jsxs("div",{children:[((b=s.row.values)==null?void 0:b.name)||"NA"," "]})}},{Header:"User Name",accessor:"user_name",Cell:({cell:s})=>{var b;return e.jsxs("div",{children:[((b=s.row.values)==null?void 0:b.user_name)||"NA"," "]})}},{Header:"Mobile No.",accessor:"mobile"},{Header:"Alt Mobile No.",accessor:"alternate_mobile"},{Header:"Email",accessor:"email"},{Header:"Address",accessor:"address"},{Header:"Status",accessor:"suspended",Cell:({cell:s})=>{var b,u;return e.jsxs("p",{children:[((b=s.row.values)==null?void 0:b.suspended)==!0&&e.jsx("p",{className:"text-red-400 font-semibold",children:"Suspended"}),((u=s.row.values)==null?void 0:u.suspended)==!1&&e.jsx("p",{className:"text-green-400 font-semibold",children:"Active"})]})}},{Header:"Action",accessor:"id",Cell:({cell:s})=>{var b,u;return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var y,w;X((y=s.row.values)==null?void 0:y.id),ut((w=s.row.values)==null?void 0:w.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Edit"}),((b=s.row.values)==null?void 0:b.suspended)===!0&&e.jsx("button",{onClick:()=>{var y;X((y=s.row.values)==null?void 0:y.id),re(!1),v(!0)},className:"border border-green-500 text-green-600    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-green-800 hover:text-white ",children:"Enable"}),((u=s.row.values)==null?void 0:u.suspended)===!1&&e.jsx("button",{onClick:()=>{var y;X((y=s.row.values)==null?void 0:y.id),re(!0),v(!0)},className:"border border-red-300 text-red-400    mx-1 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white ",children:"Disable"}),e.jsx("button",{onClick:()=>{var y,w,J;yt("currentUserId",(y=s.row.original)==null?void 0:y.id),X((w=s.row.original)==null?void 0:w.id),Fe((J=s.row.original)==null?void 0:J.id,"menu")},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Roles Mapping"}),e.jsx("button",{onClick:()=>{var y,w;X((y=s.row.values)==null?void 0:y.id),qe((w=s.row.values)==null?void 0:w.id)},className:"border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white ",children:"Ward Mapping"})]})}}],_e=(s=null,b=null)=>{s===null?r(!0):_(!0);let u={};P.post(Re,u,k()).then(function(y){var w,J,p;(w=y==null?void 0:y.data)!=null&&w.status?o((p=(J=y==null?void 0:y.data)==null?void 0:J.data)==null?void 0:p.data):o(null)}).catch(function(y){}).finally(()=>{s===null?r(!1):_(!1)})},ct=()=>{r(!0),P.post(tt,{},k()).then(function(s){var b,u;(b=s==null?void 0:s.data)!=null&&b.status&&U((u=s==null?void 0:s.data)==null?void 0:u.data)}).catch(function(s){}).finally(()=>{r(!1)})},qe=s=>{ae(K==="edit"?Ue:Be),V(!0);let b={userId:s};P.post(pe,b,k()).then(function(u){var y,w,J;(y=u==null?void 0:u.data)!=null&&y.status?(se((w=u==null?void 0:u.data)==null?void 0:w.data),te((J=u==null?void 0:u.data)==null?void 0:J.data),x(!0)):se(null)}).catch(function(u){}).finally(()=>{V(!1)})},ut=s=>{S(!0);let b={id:s};P.post(Qe,b,k()).then(function(u){var y,w;(y=u==null?void 0:u.data)!=null&&y.status&&(L((w=u==null?void 0:u.data)==null?void 0:w.data),xe.curent.showModal())}).catch(function(u){}).finally(()=>{S(!1)})},mt=s=>{H(!0);let b={id:W,isSuspended:Y};P.post(Ke,b,k()).then(function(u){var y,w;(y=u==null?void 0:u.data)!=null&&y.status?(R.success("User deleted successfully"),v(!1),_e("action")):R.error((w=u==null?void 0:u.data)==null?void 0:w.message)}).catch(function(u){R.error("Something went wrong")}).finally(()=>{H(!1),X(null)})},xt=(s,b)=>{I(!0);let u=new FormData;u.append("userType",s==null?void 0:s.userType),u.append("name",s==null?void 0:s.fullName),u.append("mobile",s==null?void 0:s.mobileNo),u.append("altMobile",s==null?void 0:s.altMobileNo),u.append("email",s==null?void 0:s.email),u.append("address",s==null?void 0:s.address),u.append("photo",b);let y=Je;W!==null&&(u.append("id",W),y=Ye),P.post(y,u,k()).then(function(w){var J,p;(J=w==null?void 0:w.data)!=null&&J.status?(R.success("User created successfully"),userAddEditModal.close(),_e("action")):R.error((p=w==null?void 0:w.data)==null?void 0:p.message)}).catch(function(w){R.error("Something went wrong")}).finally(()=>{I(!1),X(null)})},Fe=(s,b="menu")=>{n(!0),ie(null);let u;b==="menu"&&(u=Xe,a(nt)),b==="api"&&(u=Ze,a(rt)),b==="workflow"&&(u=et,a(dt));let y={userId:s};P.post(u,y,k()).then(function(w){var J,p;(J=w==null?void 0:w.data)!=null&&J.status&&(ie((p=w==null?void 0:w.data)==null?void 0:p.data),h(!0),X(s))}).catch(function(w){}).finally(()=>{n(!1)})},ht=()=>{Q(!0);let s={userId:W,wardList:Object.values(f)};P.post(st,s,k()).then(function(b){var u,y;(u=b==null?void 0:b.data)!=null&&u.status?(R.success("Mapping updated successfully!"),qe(W)):R.error((y=b==null?void 0:b.data)==null?void 0:y.message)}).catch(function(b){R.error("Something went wrong")}).finally(()=>{Q(!1)})},Ie=(s,b,u,y)=>{Q(!0);let w,J={userId:We("currentUserId"),permissionStatus:y};b==="menu"&&(w=at,J.menuRoleId=u),b==="api"&&(w=lt,J.apiRoleId=u),b==="workflow"&&(w=it,J.wfRoleId=u),P.post(w,J,k()).then(function(p){var Te,He;(Te=p==null?void 0:p.data)!=null&&Te.status?(R.success("Mapping updated successfully!"),Fe(We("currentUserId"),b)):R.error((He=p==null?void 0:p.data)==null?void 0:He.message)}).catch(function(p){R.error("Something went wrong")}).finally(()=>{Q(!1)})},gt=(s,b)=>{$(u=>({...u,[s]:{wardId:s,permissionStatus:b}}))},bt=s=>{s==="edit"?(Z(s),ae(Ue)):(Z(s),ae(Be))};l.useEffect(()=>{_e(),ct()},[]);const ft=(s,b)=>{le(b),ce(s)};return e.jsxs(e.Fragment,{children:[oe&&e.jsx(ke,{activateBottomErrorCard:ft,errorTitle:ne}),e.jsx(je,{}),e.jsxs("div",{className:"text-center",children:[" ",i&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})]}),e.jsx(Bt,{title:"User Role Mapping",isLoadingMappingUpdate:G,isLoadingFetchRoles:i,mappingModal:t,setmappingModal:h,columns:c,currentUserData:d,mappingTypeCurrentState:N,setmappingTypeCurrentState:j,fetchRoles:Fe,currentSelectedId:W,roleList:ge}),C&&e.jsx(Ut,{title:"User Ward Mapping",isLoadingMappingUpdate:G,wardMappingModalState:C,setwardMappingModalState:x,columns:de,changeWardListType:bt,changedWardList:f,wardMappingCurrentState:K,wardListToMap:K==="edit"?ue:he,postWardToMapUser:ht}),e.jsxs("dialog",{ref:xe,className:"shadow-xl relative border-2 border-[#1A4D8C] backdrop-filter-blur ",children:[e.jsxs("div",{className:"",children:[e.jsx("button",{onClick:()=>{X(null),xe.current.close()},className:"absolute top-1 right-3 text-xl p-2 w-8 h-8 rounded-lg hover:bg-red-100 hover:text-red-500 font-semibold flex justify-center items-center",children:"x"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"font-semibold md:px-6 text-lg",children:"Create User"})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Rt,{postUser:xt,parentMenuList:q,addEditLoading:M,currentSelectedId:W,currentUserData:d,userTypeList:F})})]}),e.jsx(Ce,{deleteLoading:O,enableDisableUser:mt,setdeleteModal:v,deleteModal:A}),T&&e.jsx(fe,{}),e.jsxs("div",{className:"px-4 pt-4 mb-40",children:[E&&e.jsx(ee,{strokeColor:"black",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),e.jsx(Ht,{canFilter:!1,canExport:!1,isLoadingSingleFetch:g,api:Re,columns:ot,requestBody:c,changeData:D,children:e.jsx("div",{className:"bg-white mt-2",children:e.jsx("form",{onSubmit:me.handleSubmit,children:e.jsxs("div",{className:"flex  space-x-4 my-5 mx-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...me.getFieldProps("filterBy"),className:"cypress_filterBy cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"email",children:"Email"})]}),e.jsx("p",{className:"text-red-500 text-xs",children:me.touched.filterBy&&me.errors.filterBy?me.errors.filterBy:null})]}),(me.values.filterBy==""||me.values.filterBy!="khataNo")&&e.jsxs("div",{className:"mt-3 sm:mt-0",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By  ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...me.getFieldProps("parameter"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("p",{className:"text-red-500 text-xs",children:me.touched.parameter&&me.errors.parameter?me.errors.parameter:null})]}),e.jsxs("div",{className:"mt-6 flex w-full justify-between h-10",children:[e.jsx("button",{type:"submit",className:" border rounded-md border-[#1A4D8C] hover:bg-[#1A4D8C] text-[#1A4D8C] hover:text-white  shadow-lg text-base font-semibold px-5 py-1",children:"Search record"}),e.jsxs("button",{onClick:()=>xe.current.showModal(),type:"buton",className:" border rounded-md border-[#1A4D8C] bg-[#1A4D8C] hover:bg-[#113b6f] hover:shadow-xl text-white  shadow-lg text-base font-semibold px-5 py-1",children:[e.jsx(Ne,{className:"inline"})," Create User"]})]})]})})})})]})]})}function Vt(){const[t,h]=l.useState(0),C=[{title:"Menu Role",tabIndex:0},{title:"API Role",tabIndex:1},{title:"Menu List",tabIndex:3},{title:"API List",tabIndex:4},{title:"User List",tabIndex:5}],x=A=>{h(A)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 rounded-lg mt-4 shadow-xl broder-2 border-sky-200 bg-white",children:[e.jsx("div",{className:"col-span-12 md:col-span-12 ",children:e.jsx(jt,{tabs:C,fun:x})}),t==0&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Pt,{})," "]}),t==1&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(At,{})," "]}),t==3&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Ft,{})," "]}),t==4&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Dt,{})," "]}),t==5&&e.jsxs("div",{className:"col-span-12 sm:col-span-12 shadow-lg bg-white overflow-y-scroll",children:[" ",e.jsx(Wt,{})," "]})]})})}function ra(){return ye("User Role Management Workfow"),e.jsx(Vt,{})}export{ra as default};
