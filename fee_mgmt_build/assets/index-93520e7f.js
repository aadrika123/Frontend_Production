import{r as l,u as H,A as P,a as O,Q as N,j as e,C as se,b as K}from"./index-db227e36.js";import{C as re}from"./index-fd275632.js";import{E as ie}from"./jspdf.plugin.autotable-3961c679.js";import{u as ce}from"./formik.esm-243b4d91.js";import{B as Q}from"./BarLoader-92cd05ea.js";import{c as oe,a as de}from"./index.esm-d7f7d69e.js";import{s as ne}from"./employeeModal-20a075fc.js";import{n as c}from"./PowerupFunctions-c7a4e16f.js";import{B as me}from"./BottomErrorCard-f7652267.js";import{E as xe,P as fe,T as he,a as U}from"./image 46-449674c3.js";import{L as G,a as ue,R as je}from"./left-4be81ad8.js";import"./Link-6fc20fc6.js";import"./typeof-7fd5df1e.js";import"./hoist-non-react-statics.cjs-6b598447.js";function ge(r){const{isOpen:D,toggle:f}=r;l.useState(!1);const[b,p]=l.useState([]);l.useState(null);const[_,d]=l.useState(!1),{api_getRoleEmployeeById:v,get_active_role:E}=K(),S=H(),I={id:r==null?void 0:r.currentId,roleId:""};l.useEffect(()=>{w()},[]);const w=()=>{d(!0),P.post(E,{},O()).then(function(a){var x,n,h,s;console.log("view Employee Data..",(x=a==null?void 0:a.data)==null?void 0:x.data),((n=a==null?void 0:a.data)==null?void 0:n.status)===!0?p((h=a==null?void 0:a.data)==null?void 0:h.data):N.error(`${(s=a==null?void 0:a.data)==null?void 0:s.message}`),d(!1)}).catch(function(a){console.log("==2 error list...",a),N.warning("Error occured while fetching data."),d(!1)})},F=oe({roleId:de().required("Select Role")}),m=ce({initialValues:I,onSubmit:a=>{console.log(a),L(a)},validationSchema:F}),L=a=>{d(!0);let x,n,h={id:a==null?void 0:a.id,roleId:parseInt(a.roleId)};x=v,n=h,P.post(x,n,O()).then(function(s){var u,k,y;console.log("category master..",(u=s==null?void 0:s.data)==null?void 0:u.data),((k=s==null?void 0:s.data)==null?void 0:k.status)===!0?(N.success("Role Successfully updated"),S("/role/employee"),f()):N.error(`${(y=s==null?void 0:s.data)==null?void 0:y.message}`),d(!1)}).catch(function(s){console.log("==2 error list...",s),N.warning("Error occured while fetching data."),d(!1)})},R=a=>{a.target.name,a.target.value};return e.jsxs(e.Fragment,{children:[_&&e.jsx(Q,{}),e.jsxs(se,{isOpen:D,children:[e.jsx("div",{toggle:f,className:"flex justify-between w-full px-[20px] py-[20px] text-[2.5vh] font-bold bg-[#0F766E] text-white rounded-t-[15px]",close:e.jsx("button",{onClick:()=>f(),children:"Ã—"}),children:e.jsx("h1",{children:"Employee Role"})}),e.jsx("div",{className:"flex items-center  justify-center overflow-hidden bg-white rounded-b-[15px] h-auto max-[606px]:h-[35vh]",children:e.jsx("div",{className:"block w-full   m-[20px] max[784px]:m-[10]",children:e.jsxs("form",{onSubmit:m.handleSubmit,onChange:R,children:[e.jsx("div",{className:"w-full h-auto bg-white px-[20px] py-[20px] max[784px]:px-[0px]",children:e.jsx("div",{className:"m-3 block ",children:e.jsxs("div",{className:"flex max-[425px]:block",children:[e.jsxs("label",{className:"w-[25vh] mr-2 text-[2vh] flex text-teal-900 items-center justify-center max-[625px]:w-full",children:["Role",e.jsx("span",{className:"text-red-600 ml-1 mr-1",children:"*"})]}),e.jsxs("div",{className:"block",children:[e.jsxs("select",{name:"roleId",className:"w-[40vh] h-11  p-2 flex text-[2vh]  items-start justify-start  border border-[#E5E7E9] bg-white rounded-[5px] max-[825px]:w-full max-[825px]:h-full",onChange:m.handleChange,value:m.values.roleId,children:[e.jsx("option",{value:"",children:"Select"}),b==null?void 0:b.map(a=>e.jsx("option",{value:a==null?void 0:a.id,children:a==null?void 0:a.role_name}))]}),e.jsx("p",{className:"text-red-500 text-sm flex items-start justify-start ml-[40px]",children:m.touched.roleId&&m.errors.roleId?m.errors.roleId:null})]})]})})}),e.jsxs("div",{className:" w-full h-[8vh] flex items-center justify-center max-[768px]:block mb-5 max-[768px]:ml-5",children:[e.jsx("button",{type:"submit",className:"text-[2vh] bg-[#0F766E] text-white border border-[#0F766E]  py-[7px] px-[20px] rounded-[5px] m-[20px] hover:text-[#0F766E] hover:border-[#0F766E] hover:bg-white",children:"Update"}),e.jsx("button",{onClick:()=>{f(),r!=null&&r.Link&&S(`${r==null?void 0:r.Link}`)},type:"cancel",className:"text-[2vh] border-red-600 border text-white bg-red-600 px-[20px] py-[7px]  rounded-[5px] hover:border-red-600 hover:bg-white hover:text-red-600",children:"Cancel"})]}),e.jsx("div",{className:"mb-5 w-full flex justify-center items-center max-[350px]:items-end max-[350px]:mt-12",children:e.jsxs("h1",{className:"text-gray-500",children:["Note : (",e.jsx("span",{className:"text-red-600",children:"*"}),") marks is mandatory."]})})]})})})]})]})}function Me(){H();const[r,D]=l.useState(),[f,b]=l.useState(!0),[p,_]=l.useState(""),[d,v]=l.useState([]),[E,S]=l.useState(!1),[I,w]=l.useState(!1),[F,m]=l.useState(!1),[L,R]=l.useState(null),[a,x]=l.useState(null);l.useState(!1);const[n,h]=l.useState(!1),s=()=>h(!n),[u,k]=l.useState(!1),y=()=>k(!u);console.log(a);const{api_addEmployeeData:be,api_editEmployeeData:pe,api_deleteEmployeeData:we,api_getEmployeeData:Y,api_getEmployeeDataById:ye}=K();l.useRef();const[j,z]=l.useState([]),[W,Ne]=l.useState([]),[o,M]=l.useState(1),[g,ve]=l.useState(10),X=()=>{w(!0),P.post(Y,{},O()).then(function(t){var i,C,q,J;console.log("view Employee Data..",(i=t==null?void 0:t.data)==null?void 0:i.data),((C=t==null?void 0:t.data)==null?void 0:C.status)===!0?(D((q=t==null?void 0:t.data)==null?void 0:q.data),z((J=t==null?void 0:t.data)==null?void 0:J.data)):A(!0,"Error occured while fetching data."),w(!1)}).catch(function(t){console.log("==2 error list...",t),A(!0,"Error occured while fetching data."),w(!1)})};console.log(W),l.useEffect(()=>{X()},[]);const $=o*g,Z=$-g,T=j.slice(Z,$),B=Math.ceil((j==null?void 0:j.length)/g);for(let t=1;t<=Math.ceil(j.length/g);t++);const V=()=>{o!==1&&M(o-1)},ee=()=>{o!==B&&M(o+1)},te=[{title:"Emp No",feild:"empNo"},{title:"Name",feild:"full_name"},{title:"Gender",feild:"gender_name"},{title:"Category",feild:"category_name"},{title:"DOB",feild:"dob"},{title:"DOJ",feild:"doj"},{title:"Mobile",feild:"mobile"},{title:"Email",feild:"email"},{title:"Blood Group",feild:"blood_group_name"},{title:"Department",feild:"department_name"}],ae=()=>{const t=new ie;t.text("Employee Details",10,10),t.autoTable({theme:"grid",columns:te.map(i=>({...i,dataKey:i.feild})),body:r}),t.save("employee.pdf")},le=t=>{if(_(t),p!==""){const i=r.filter(C=>Object.values(C).join("").toLowerCase().includes(p.toLowerCase()));v(i)}else v(r)},A=(t,i)=>{R(i),m(t)};return console.log(r,j),e.jsxs(e.Fragment,{children:[I&&e.jsx(Q,{}),F&&e.jsx(me,{activateBottomErrorCard:A,errorTitle:L}),n&&e.jsx(ge,{isOpen:n,toggle:s,currentId:a}),e.jsx("div",{className:"bg-white h-[80vh] overflow-auto  flex  justify-center",children:e.jsxs("div",{className:"block w-full mx-[10px]",children:[e.jsxs("div",{className:"flex  max-[694px]:block",children:[e.jsx("div",{className:"flex w-full items-start justify-start ml-5 mt-5",children:e.jsxs("div",{className:"block w-full",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700 flex justify-start w-full ",children:"Employee List"}),e.jsx("h1",{className:"text-gray-600 flex justify-start text-sm w-full",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),e.jsx("div",{className:"flex items-end justify-end w-full",children:e.jsxs("a",{title:"Add Employees",children:[" ",e.jsx("button",{type:"submit",className:"text-black text-[2.2vh] bg-[#fde047] font-bold py-[5px] px-[10px] rounded-[5px] h-[40px] w-[100px] flex items-center mr-2 justify-center ",onClick:()=>{y()},children:"+ ADD"}),u&&e.jsx(ne,{isOpen:u,toggle:y})]})})]}),e.jsxs("div",{className:"flex float-right mt-2",children:[e.jsx("a",{title:"Download CSV",children:e.jsx("img",{src:xe,onClick:()=>S(!E),className:"  font-bold  mr-4 w-17 h-17 "})}),E&&e.jsx(re,{data:r,target:"_blank"}),e.jsx("a",{title:"Download PDF",children:e.jsx("img",{src:fe,className:"  font-bold  w-17 h-17",onClick:ae})})]}),e.jsx("div",{className:"block  py-2",children:e.jsx("div",{className:"w-auto mt-[10vh] h-[70vh] overflow-y-auto overflow-x-hidden flex pt-[3vh]  pr-[3vh] bg-white max-[1024px]:overflow-auto  max-[768px]:w-[95%] max-[425px]:overflow-auto mr-2",children:e.jsxs("div",{className:"block w-full mt-[-20px]",children:[e.jsxs("div",{className:"flex items-center text-[2.4vh] justify-end mr-4 mb-[10px] max-[918px]:block",children:[e.jsx("div",{className:"float-left w-full flex ml-4 max-[918px]:ml-0",children:e.jsxs("div",{className:"ml-5",children:[" ",e.jsx("h1",{className:"font-bold text-gray-500",children:"List Of Employee"})]})}),e.jsx("div",{className:"items-center float-left  flex mr-4 max-[618px]:ml-4",children:e.jsx("div",{className:"flex w-full mr-4",children:e.jsx("div",{className:`${f?" text-[#4ade80]":""}`,children:e.jsx("h1",{onClick:()=>b(!0),children:e.jsx("a",{title:"List View",children:e.jsx("img",{src:he,alt:"table",className:"w-8 h-8"})})})})})}),e.jsx("input",{placeholder:"search...",onChange:t=>le(t.target.value),className:"ml-2 bg-white border border-[gainsboro] pl-[10px] rounded-[5px] h-10 max-[618px]:w-full"})]}),e.jsx("div",{className:"ml-4 mb-4",children:e.jsx("hr",{className:" border-b-2"})}),f?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-[60vh] block   ",children:[e.jsxs("table",{className:"w-full mx-4 my-1   border-b border-b-gray overflow-auto max-[1000px]:w-[100vh] max-[1000px]:relative max-[1000px]:overflow-auto",children:[e.jsx("thead",{className:" text-gray-600 bg-[#E7EFFC] text-[1.7vh] p-12 w-full border-b border-b-gray h-[6vh] ",children:e.jsxs("tr",{className:"py-2 pl-4 w-full flex items-start justify-start text-left",children:[e.jsx("th",{className:"w-[100%]"}),e.jsx("th",{className:"w-[100%]",children:"Sl no."}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Emp ID"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Full Name"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start ",children:"Aadhar"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Mobile"}),e.jsx("th",{className:"w-[100%] flex items-start justify-start",children:"Email"}),e.jsx("th",{className:"w-[100%] flex items-center justify-center",children:"Role"})]})}),e.jsx("tbody",{children:p.length>1?d&&d.map((t,i)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"py-2 pl-4 w-full text-[2vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100",children:[e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[1.5vh]",children:e.jsx("img",{src:G,className:"w-6 h-6"})}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c((o-1)*g+i+1)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.emp_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.full_name)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.aadhar_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.mobile)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:t.email}),e.jsx("td",{className:" w-[100%] flex items-center center",children:e.jsx("a",{title:"Role",children:e.jsx("img",{src:U,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{x(t.id),s()}})})})]})})):T&&T.map((t,i)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"py-2 pl-4 w-full text-[2vh] flex items-center justify-center text-[#696969] text-left verdana even:bg-gray-100 border-b border-gray-b",children:[e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[2.2vh]",children:e.jsx("img",{src:G,className:"w-6 h-6 hover:border-2 hover:border-[#4338ca]"})}),e.jsx("td",{className:"w-[100%] flex items-start justify-start text-[2.2vh]  px-1",children:c((o-1)*g+i+1)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.emp_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.full_name)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.aadhar_no)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.mobile)}),e.jsx("td",{className:"w-[100%] flex items-start justify-start  px-1",children:c(t.email)}),e.jsx("td",{className:" w-[100%] flex items-center justify-center  ",children:e.jsx("a",{title:"Role",children:e.jsx("img",{src:U,className:"mr-2 text-indigo-600  hover:text-gray-500 w-6 h-6",onClick:()=>{x(t.id),s()}})})})]})}))})]}),e.jsxs("div",{className:"flex justify-between mt-10 ",children:[e.jsxs("div",{className:"ml-10",children:[" ","Page ",o," to ",B," "]}),e.jsxs("div",{className:"flex float-right",children:[e.jsx("img",{src:ue,className:o===1?"opacity-50 mr-2":"opacity-100 mr-2",onClick:V}),e.jsx("img",{src:je,onClick:ee,className:o===B?"opacity-50":"opacity-100"})]})]})]})}):null]})})})]})})]})}export{Me as default};
