import{r as f,u as U,j as e,I as B,a as R,_ as T}from"./index-BpQyUk9T.js";import{u as q,o as H,F as $,B as z,c as V,a as P}from"./switch-nU1vBF5w.js";import{R as _}from"./RHFTextField-C9UetDwM.js";import{g as G}from"./services-KQnp_8oA.js";import{R as D,d as K,e as I}from"./useCrypto-kILsbX-W.js";import"./select-BCubY0Ml.js";import{u as W,a as O}from"./useCustomQuery-D_3o2T9c.js";function X(){const[y,N]=f.useState(""),[L,S]=f.useState(""),[k,A]=f.useState(null),[x,a]=f.useState(!1),[C,c]=f.useState(!0);f.useEffect(()=>{b()},[]);const b=async()=>{const s=[];s.push(window.screen.width),s.push(window.screen.height),s.push(window.screen.colorDepth),s.push(window.screen.pixelDepth),s.push(window.devicePixelRatio),s.push(navigator.userAgent),s.push(navigator.language),s.push(navigator.platform),s.push(navigator.hardwareConcurrency),s.push(navigator.maxTouchPoints),s.push(navigator.vendor),s.push(navigator.deviceMemory||0),s.push(Intl.DateTimeFormat().resolvedOptions().timeZone),s.push(new Date().getTimezoneOffset());const t=j();s.push(t);const n=E();n&&(s.push(n.vendor),s.push(n.renderer));const i=await l();s.push(i);const d=o();s.push(d.join(","));const m=Array.from(navigator.plugins||[]).map(w=>w.name).join(",");s.push(m);const u=s.join("|"),g=await r(u),h=p(g);S(g),N(h),A({screenResolution:`${window.screen.width}x${window.screen.height}`,colorDepth:window.screen.colorDepth,platform:navigator.platform,cpuCores:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory||"N/A",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,canvasFingerprint:t.substring(0,16),webglVendor:(n==null?void 0:n.vendor)||"N/A",audioFingerprint:i.substring(0,16),fontsDetected:d.length}),c(!1)},j=()=>{try{const s=document.createElement("canvas"),t=s.getContext("2d");return t?(s.width=200,s.height=50,t.textBaseline="top",t.font='14px "Arial"',t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText("UniqueSystemðŸŽ¨",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("UniqueSystemðŸŽ¨",4,17),s.toDataURL()):"canvas_error"}catch{return"canvas_error"}},E=()=>{try{const s=document.createElement("canvas"),t=s.getContext("webgl")||s.getContext("experimental-webgl");if(!t)return null;const n=t.getExtension("WEBGL_debug_renderer_info");return n?{vendor:t.getParameter(n.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(n.UNMASKED_RENDERER_WEBGL)}:null}catch{return null}},l=()=>new Promise(s=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t){s("no_audio");return}const n=new t,i=n.createOscillator(),d=n.createAnalyser(),m=n.createGain(),u=n.createScriptProcessor(4096,1,1);m.gain.value=0,i.connect(d),d.connect(u),u.connect(m),m.connect(n.destination),u.onaudioprocess=g=>{const h=g.outputBuffer.getChannelData(0);let w=0;for(let M=0;M<h.length;M++)w+=Math.abs(h[M]);const F=w.toString();i.disconnect(),u.disconnect(),m.disconnect(),n.close(),s(F)},i.start(0),setTimeout(()=>s("audio_timeout"),100)}catch{s("audio_error")}}),o=()=>{const s=["monospace","sans-serif","serif"],t=["Arial","Verdana","Times New Roman","Courier New","Georgia","Palatino","Garamond","Bookman","Comic Sans MS","Trebuchet MS","Impact","Lucida Console","Tahoma","Helvetica","Century Gothic"],i=document.createElement("canvas").getContext("2d");if(!i)return[];const d="mmmmmmmmmmlli",m="72px",u={};s.forEach(h=>{i.font=`${m} ${h}`,u[h]=i.measureText(d).width});const g=[];return t.forEach(h=>{s.forEach(w=>{i.font=`${m} '${h}', ${w}`,i.measureText(d).width!==u[w]&&(g.includes(h)||g.push(h))})}),g},r=async s=>{const n=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(m=>m.toString(16).padStart(2,"0")).join("")},p=s=>{const t=s.match(/.{1,4}/g);return t?t.join("-").toUpperCase():s.toUpperCase()};return{loading:C,uniqueId:y,fingerprint:L,details:k,copied:x,copyToClipboard:()=>{navigator.clipboard.writeText(y).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)})},getCanvasFingerprint:j}}const Z=V({email:P().email("Enter a valid email").required("Email is required"),password:P().min(8,"Password must be at least 8 characters").required(),captcha:P().required("Please enter the captcha")});function Y(){const[y,N]=f.useState(""),{uniqueId:L,fingerprint:S}=X(),k=W({}),{login:A}=U(),x=q({defaultValues:{email:"",password:"",captcha:""},resolver:H(Z)}),a=O({api:`${R.getCaptcha}`,key:"getCaptcha",value:[],options:{enabled:!0}}),C=async()=>{if(a!=null&&a.data){const l=K(a==null?void 0:a.data.data.captcha_code),o=document.createElement("canvas");o.width=200,o.height=50;const r=o.getContext("2d");if(r){const p=r.createLinearGradient(0,0,o.width,o.height);p.addColorStop(0,"#f9fafb"),p.addColorStop(1,"#e5e7eb"),r.fillStyle=p,r.fillRect(0,0,o.width,o.height);for(let t=0;t<30;t++)r.fillStyle=`rgba(0, 0, 0, ${Math.random()*.2})`,r.fillRect(Math.random()*o.width,Math.random()*o.height,1,1);for(let t=0;t<3;t++)r.strokeStyle=`rgba(0, 0, 0, ${Math.random()*.15})`,r.lineWidth=1,r.beginPath(),r.moveTo(Math.random()*o.width,Math.random()*o.height),r.lineTo(Math.random()*o.width,Math.random()*o.height),r.stroke();r.font="bold 26px Arial",r.fillStyle="#374151",r.textAlign="center",r.textBaseline="middle",r.shadowColor="rgba(0, 0, 0, 0.2)",r.shadowBlur=2,r.shadowOffsetX=1,r.shadowOffsetY=1;const v=l.split(""),s=(o.width-v.length*20)/2;v.forEach((t,n)=>{const i=s+n*24+15,d=o.height/2+(Math.random()-.5)*5;r.save(),r.translate(i,d),r.rotate((Math.random()-.5)*.3),r.fillText(t,0,0),r.restore()}),N(o.toDataURL())}}};f.useEffect(()=>{C()},[a==null?void 0:a.data]);const c=l=>(l.preventDefault(),!1),b=l=>{(l.ctrlKey||l.metaKey)&&["c","v","x"].includes(l.key.toLowerCase())&&l.preventDefault()},j=async l=>{var o,r,p,v,s;try{const t=await k.mutateAsync({api:R.login,data:{email:l.email,password:I(l.password),captcha_code:I(l.captcha),captcha_id:(r=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:r.captcha_id,moduleId:25,systemUniqueId:S}});(p=t==null?void 0:t.data)!=null&&p.status?(await A(t==null?void 0:t.data),T.success((v=t==null?void 0:t.data)==null?void 0:v.message)):(T.error((s=t==null?void 0:t.data)==null?void 0:s.message),a==null||a.refetch(),x.setValue("captcha",""))}catch(t){T.error(G(t.message)),a==null||a.refetch(),x.setValue("captcha","")}finally{x.reset({...x.getValues(),email:"",password:"",captcha:""})}},E=()=>{a==null||a.refetch(),x.setValue("captcha","")};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"darks:bg-gray-800 darks:border-gray-800 h-[7vh] w-full border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto xl:max-w-6xl",children:e.jsx("nav",{className:"",id:"desktop-menu",children:e.jsx("a",{className:"",href:"",children:e.jsx("div",{className:"mt-6",children:e.jsx("span",{className:"text-xl font-bold",children:"Login - Legal Management System"})})})})})}),e.jsx("main",{className:"flex h-[80vh] items-center justify-center bg-gray-100",children:e.jsx("div",{className:"darks:bg-gray-900 darks:bg-opacity-40 bg-gray-100",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:e.jsx("div",{className:"mb-12 w-full max-w-full px-2 sm:px-12 lg:mb-0 lg:pr-20",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"darks:bg-gray-800 rounded-lg bg-white p-6 shadow-xl sm:px-12 sm:py-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("h1",{className:"darks:text-gray-300 mb- text-center text-2xl font-bold leading-normal text-gray-800",children:"Welcome Back"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"mb-7 w-10 border border-b border-black"})})]}),e.jsx($,{methods:x,onSubmit:x.handleSubmit(j),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(_,{className:"w-full bg-background px-5 py-5",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your User Name",autoComplete:"off",onPaste:c,onCopy:c,onCut:c,onKeyDown:b})}),e.jsx("div",{className:"space-y-2",children:e.jsx(D,{className:"w-full bg-background px-5 py-5",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:c,onCopy:c,onCut:c,onKeyDown:b})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter CAPTCHA"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:a!=null&&a.isLoading?e.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100",children:e.jsxs("svg",{className:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):y?e.jsx("img",{src:y,alt:"CAPTCHA",className:"h-[50px] w-[150px] rounded border border-gray-300 object-contain"}):e.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100 text-xs text-gray-500",children:"Failed to load"})}),e.jsx("button",{type:"button",onClick:E,disabled:a==null?void 0:a.isLoading,className:"p-2 text-gray-500 transition-colors hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50",title:"Refresh CAPTCHA",children:e.jsx("svg",{className:`h-5 w-5 ${a!=null&&a.isLoading?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx(_,{className:"w-full bg-background px-5 py-3",name:"captcha",placeholder:"Enter the text shown in the image",autoComplete:"off",onPaste:c,onCopy:c,onCut:c,onKeyDown:b})]}),e.jsx("div",{children:e.jsxs(z,{type:"submit",isLoading:x.formState.isSubmitting,className:"mt-2 w-full px-4 py-5 shadow-none",children:[e.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-box-arrow-in-right mr-1 inline-block h-4 w-4 ltr:mr-2 rtl:ml-2",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]})})]})})})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:e.jsxs("div",{className:"mt-6 text-center lg:mt-0",children:[e.jsx(B,{src:"/images/legallogo.png",alt:"welcome",className:"h-68"}),e.jsxs("div",{className:"mt-2 px-4",children:[e.jsx("h1",{className:"text-bold mb-2 text-2xl",children:"Serve Citizen Services with Ease of Access"}),e.jsx("p",{className:"mb-4 text-base text-gray-500",children:"Manage citizen government services with easy of access and serve them in on time."})]})]})})]})})})}),e.jsx("footer",{className:"darks:bg-gray-800 darks:border-gray-800 h-[10vh] w-full border-t border-gray-200 bg-white py-6",children:e.jsx("div",{className:"container mx-auto w-full px-4 xl:max-w-6xl",children:e.jsx("div",{className:"mx-auto px-4",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-left md:rtl:text-right",children:e.jsxs("ul",{className:"space-x-4 ltr:pl-0 rtl:pr-0",children:[e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Support |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Help Center |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Privacy |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Terms of Service"})})]})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-right md:rtl:text-left",children:e.jsxs("p",{className:"mb-0 mt-3 md:mt-0",children:[e.jsx("a",{href:"#",className:"hover:text-indigo-500",children:"UD&HD"})," ","| All right reserved"]})})]})})})})]})}function ne(){return e.jsx("div",{className:"",children:e.jsx(Y,{})})}export{ne as default};
