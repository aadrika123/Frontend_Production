import{e as W,j as e,r as m,l as P,u as q,n as L,B as E,_ as b,o as $,t as Me}from"./index-BAzqxh1R.js";import{h as H}from"./moment-C5S46NFB.js";import{S as ee,C as k,c as T,a as st,b as at,d as rt}from"./separator-BC7qIMwJ.js";import{u as V,c as nt,a as J}from"./useCustomQuery-DOYwqCrp.js";import{S as te}from"./Spinner-C32UjS6P.js";import{c as lt}from"./index-CGzg1cdb.js";import{D as se,a as ae,b as re,c as ne,d as le,g as oe,f as ce,e as ie,T as de,h as Re,i as ot,O as ct,W as it,C as dt,j as mt,k as ut,l as ke,P as xt,R as ht}from"./dialog-GfqueDtF.js";import{u as pt,C as gt,c as Z,b as F,g as Te,a as me,o as ue,F as xe,f as ft,R as X,B as he}from"./switch-DTzIsOGk.js";import{R as pe}from"./RHFTextArea-CY9MhnPa.js";import{I as jt}from"./select-BcBjDmbG.js";import{F as U}from"./file-text-BCyHvZE5.js";import{C as G}from"./calendar-Dk7rYq14.js";import{U as yt}from"./user-CvbmKzW1.js";import{C as Nt}from"./clock-lCDkOQsS.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=W("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=W("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=W("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function bt({name:t,label:s,isDynamic:r,isRequired:i,...a}){const{control:d,setValue:x}=pt();return e.jsx(gt,{name:t,control:d,render:({field:{ref:u},fieldState:{error:h}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:s,children:[s," ",i&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(jt,{type:"file",onChange:o=>{x(t,o.target.files?o.target.files[0]:null)},ref:u,className:`mt-1 ${h?"border-red-400":null}`,...a}),h&&e.jsx("span",{className:"text-red-400 text-xs",children:h.message})]})})}const Dt=(t,s,r)=>{lt({customUI:({onClose:i})=>e.jsxs("div",{className:"rounded-md bg-white p-4 shadow-lg",children:[e.jsx("h1",{className:"text-lg font-bold",children:t}),e.jsx("p",{className:"text-sm",children:s}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{className:"rounded-md bg-red-500 px-4 py-1 text-white",onClick:()=>{r(),i()},children:"Yes"}),e.jsx("button",{className:"ml-2 rounded-md bg-gray-500 px-4 py-1 text-white",onClick:i,children:"No"})]})]})})};Z({name:F().required("Name is required").min(2,"Name must be at least 2 characters"),email:F().required("Email is required").email("Invalid email address"),description:F(),pdfFile:Te().required("PDF file is required")});const wt=[{name:"JavaScript",pattern:/\/JavaScript|\/JS\s*\(|app\.alert|eval\(|document\.|window\./gi,severity:"high"},{name:"OpenAction",pattern:/\/OpenAction/gi,severity:"high"},{name:"AA (Additional Actions)",pattern:/\/AA\s*<</gi,severity:"high"},{name:"Launch Action",pattern:/\/Launch/gi,severity:"high"},{name:"ImportData",pattern:/\/ImportData/gi,severity:"high"},{name:"RichMedia",pattern:/\/RichMedia/gi,severity:"high"},{name:"GoToE",pattern:/\/GoToE/gi,severity:"high"}],_t=t=>new Promise((s,r)=>{const i=new FileReader;i.onload=a=>{var d;return s((d=a.target)==null?void 0:d.result)},i.onerror=()=>r(new Error("Failed to read file")),i.readAsText(t)}),Fe=t=>({high:3,medium:2,low:1})[t]||0,Ct=(t={})=>{const s={maxFileSizeMB:10,strictMode:!0,autoValidate:!0,...t},[r,i]=m.useState(null),[a,d]=m.useState(null),[x,u]=m.useState(!1),h=m.useCallback(async p=>{if(u(!0),i(p),!p){const l={isValid:!1,message:"No file provided",threats:[],severity:"high"};return d(l),u(!1),l}if(p.type!=="application/pdf"){const l={isValid:!1,message:`Invalid file type. Expected PDF, got ${p.type||"unknown"}`,threats:[{name:"Invalid File Type",severity:"high",description:"Only PDF files are allowed"}],severity:"high"};return d(l),u(!1),l}const f=s.maxFileSizeMB*1024*1024;if(p.size>f){const l={isValid:!1,message:`File size (${(p.size/1024/1024).toFixed(2)}MB) exceeds the maximum limit of ${s.maxFileSizeMB}MB`,threats:[{name:"File Too Large",severity:"medium",description:`File size exceeds ${s.maxFileSizeMB}MB limit`}],severity:"medium"};return d(l),u(!1),l}try{const l=await _t(p);if(!l.startsWith("%PDF-")){const v={isValid:!1,message:"Invalid PDF file. File does not have a valid PDF header",threats:[{name:"Invalid PDF Format",severity:"high",description:"File does not contain a valid PDF header"}],severity:"high"};return d(v),u(!1),v}const j=[];let g=null;wt.forEach(({name:v,pattern:C,severity:c})=>{const y=l.match(C);y&&y.length>0&&(j.push({name:v,severity:c,description:`Found ${y.length} occurrence(s) of ${v}`,matchCount:y.length}),(!g||Fe(c)>Fe(g))&&(g=c))});let n;return j.length===0?n={isValid:!0,message:"PDF is safe and contains no security threats",threats:[],severity:null}:(s.strictMode?j.length>0:j.some(C=>C.severity==="high"))?n={isValid:!1,message:`PDF contains security threats: ${j.map(c=>c.name).join(", ")}. Upload blocked for your safety`,threats:j,severity:g}:n={isValid:!0,message:"PDF contains low-risk elements but is approved for upload",threats:j,severity:g},d(n),u(!1),n}catch(l){const j={isValid:!1,message:`Error reading PDF file: ${l.message}`,threats:[{name:"Read Error",severity:"high",description:l.message}],severity:"high"};return d(j),u(!1),j}},[s.maxFileSizeMB,s.strictMode]),o=m.useCallback(()=>{i(null),d(null),u(!1)},[]),D=m.useCallback(async p=>{var l;const f=(l=p.target.files)==null?void 0:l[0];f&&s.autoValidate?await h(f):f&&i(f)},[h,s.autoValidate]);return{validateFile:h,validation:a,isValidating:x,reset:o,file:r,handleFileChange:D}},Q=[{value:"orderSheet",label:"Order Sheet"},{value:"judgementCopy",label:"Judgement Copy"},{value:"HearingDocument",label:"Hearing Document"},{value:"Other",label:"Other"}],At=Z().shape({documentName:F().required("Document Name is required"),docType:F(),docPath:Te().required("Document is required").test("fileRequired","Document is required",t=>t instanceof File||typeof t=="string"&&t!==""),description:F().required("Description is required"),currentHearingDate:F().when("documentName",{is:"Hearing Document",then:()=>F().required("Hearing Date is required")})});function St({title:t,id:s,edit:r,refetch:i}){var N,we,_e;const{validation:a,isValidating:d,validateFile:x,reset:u}=Ct({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),h=V({}),o=nt({}),[D,p]=m.useState(""),f=m.useRef(null),{data:l,isFetching:j}=J({api:`${P.getCaseTypeById}/${s}`,key:"getCaseTypeById",options:{enabled:r}}),{user:g}=q(),n=me({defaultValues:{documentName:((N=l==null?void 0:l.data)==null?void 0:N.document_name)||"",docType:((we=l==null?void 0:l.data)==null?void 0:we.doc_type)||"",docPath:void 0,description:((_e=l==null?void 0:l.data)==null?void 0:_e.description)||""},resolver:ue(At)}),{id:v}=L(),C=async w=>{var M;const _=(M=w.target.files)==null?void 0:M[0];if(_&&(_==null?void 0:_.type)==="application/pdf"){const A=await x(_);A.isValid?(b.success(A.message),u(),n.setValue("docPath",_)):(b.error(A.message),w.target.value="",n.resetField("docPath"))}else _&&n.setValue("docPath",_)},c=async w=>{var M,A;const _=new FormData;_.append("img",w);try{const S=await o.mutateAsync({api:P.uploadDocumentDms,data:_});if((M=S.data)!=null&&M.status)return S.data.data;throw new Error(((A=S.data)==null?void 0:A.message)||"DMS upload failed")}catch(S){throw console.error("DMS Upload Error:",S),S}},y=async w=>{var _,M,A,S,z,Ce,Ae,Se;try{let O=D;if((!r||w.docPath instanceof File)&&(b.loading("Uploading document..."),O=await c(w.docPath),p(O),b.dismiss()),r&&w){const K={id:s,documentName:w.documentName,description:w.description,docPath:O,docType:w.docType,currentHearingDate:w.currentHearingDate},R=await h.mutateAsync({api:P.updateCaseType,data:K});(_=R.data)!=null&&_.success?(b.success((M=R==null?void 0:R.data)==null?void 0:M.message),(A=f.current)==null||A.click()):b.error(((S=R.data)==null?void 0:S.message)||"Document updated successfully")}else{const K={caseId:v||"",documentName:w.documentName,description:w.description,docPath:O,actionByUserId:g==null?void 0:g._id,actionByRoleId:g==null?void 0:g.roleId,actionByRoleName:g==null?void 0:g.roleName,actionByUserName:g==null?void 0:g.fullName,currentHearingDate:w.currentHearingDate},R=await h.mutateAsync({api:P.attachDocument,data:K});(z=R.data)!=null&&z.success?(b.success((Ce=R==null?void 0:R.data)==null?void 0:Ce.message),(Ae=f.current)==null||Ae.click()):b.error(((Se=R.data)==null?void 0:Se.message)||"Document not attached successfully"),n.reset({documentName:"",description:"",docPath:""})}i(),p("")}catch(O){console.log("Submit Error:",O),b.error("An error occurred while processing your request")}};m.useEffect(()=>{var w,_,M,A,S,z;r&&l?(n.reset({documentName:((w=l.data)==null?void 0:w.document_name)||"",description:((_=l.data)==null?void 0:_.description)||"",docPath:(M=l.data)==null?void 0:M.document_path,docType:(A=l.data)==null?void 0:A.doc_type,currentHearingDate:((S=l.data)==null?void 0:S.current_hearing_date)||""}),p(((z=l.data)==null?void 0:z.document_path)||"")):(n.reset({documentName:"",description:"",docPath:"",docType:"",currentHearingDate:""}),p(""))},[r,l]);const B=n.formState.isSubmitting||o.isPending;return e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(re,{className:"sm:max-w-[425px]",children:e.jsxs(xe,{methods:n,onSubmit:n.handleSubmit(y),children:[e.jsxs(ne,{children:[e.jsx(le,{children:t}),e.jsx(oe,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ft,{label:"Select Document",name:"documentName",data:(Q==null?void 0:Q.map(w=>({label:String(w.label),value:String(w.label)})))||[]})}),n.watch("documentName")=="Hearing Document"&&e.jsx("div",{children:e.jsx(X,{label:"Current hearing date",name:"currentHearingDate",type:"date"})}),e.jsx("div",{children:e.jsx(bt,{label:"Upload Document",name:"docPath",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:C,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(pe,{label:"Description",name:"description",placeholder:"Enter your description"})}),e.jsx(ee,{})]}),e.jsxs(ce,{className:"mt-5 flex justify-between",children:[e.jsx(ie,{asChild:!0,children:e.jsx(E,{variant:"outline",ref:f,children:"Cancel"})}),e.jsx(he,{type:"submit",isLoading:B,children:"Save changes"})]})]})})]})}function hs({caseStatus:t}){var f,l,j,g;const{user:s}=q(),[r,i]=m.useState(""),[a,d]=m.useState(""),[x,u]=m.useState(!1),{id:h}=L(),o=J({api:`${P.getAllDocuments}/${h}`,key:"getAllDocumentsList",value:[],options:{enabled:!0}}),D=V({}),p=async n=>{Dt("Are you sure?","Please confirm",async()=>{var v,C,c;try{const y=await D.mutateAsync({api:`${P.deleteAttachedDocument}`,data:{id:n}});(v=y==null?void 0:y.data)!=null&&v.success?(b.success(((C=y==null?void 0:y.data)==null?void 0:C.message)||"Deleted successfully"),o.refetch()):b.error(((c=y==null?void 0:y.data)==null?void 0:c.message)||"Failed to delete")}catch(y){b.error("Error deleting item"),console.error("Delete Error:",y)}})};return e.jsx("main",{className:"min-h-screen bg-gray-50/50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Case Related Documents"})}),t!="2"&&e.jsx(St,{title:x?"Edit Document":"Attach Document",id:a,edit:x,setEdit:u,refetch:o.refetch})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.isLoading?e.jsx(k,{children:e.jsx(T,{className:"flex h-32 items-center justify-center",children:e.jsx(te,{})})}):e.jsxs(e.Fragment,{children:[(l=(f=o==null?void 0:o.data)==null?void 0:f.data)==null?void 0:l.map((n,v)=>e.jsxs(k,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(st,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(at,{className:"text-lg font-semibold text-gray-900",children:(n==null?void 0:n.document_name)||"Document"}),e.jsxs(rt,{className:"mt-1 text-sm text-gray-600",children:["Case ID: #",n==null?void 0:n.case_id," • Document #",v+1]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{children:["Created:"," ",H(n==null?void 0:n.created_at).format("DD-MM-YYYY")]}),(n==null?void 0:n.document_name)==="Hearing Document"&&e.jsxs("h1",{children:["Current Hearing Date:"," ",H(n==null?void 0:n.current_hearing_date).format("DD-MM-YYYY")]})]}),t!="2"&&(s==null?void 0:s.roleId)==77&&e.jsx("div",{className:"ml-auto flex justify-end",children:e.jsx(E,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>p(n==null?void 0:n.id),children:e.jsx(de,{className:"h-3.5 w-3.5"})})})]})})]})}),e.jsxs(T,{className:"pt-0",children:[(n==null?void 0:n.description)&&e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-gray-700",children:n.description}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 text-sm sm:grid-cols-2 lg:grid-cols-3",children:[(n==null?void 0:n.doc_type)&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs("span",{children:["Type: ",n.doc_type]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(yt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Action By:","",e.jsx("span",{className:"font-medium",children:n==null?void 0:n.action_by_role_name}),n!=null&&n.action_by_user_name?` (${n==null?void 0:n.action_by_user_name})`:""]})]})]}),(n==null?void 0:n.document_path)&&e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Document Path:"})]}),e.jsx("a",{href:n.document_path,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"View Document"})]}),e.jsx("p",{className:"mt-1 break-all text-xs text-gray-500",children:n.document_path})]})]})]},n==null?void 0:n.id)),((g=(j=o==null?void 0:o.data)==null?void 0:j.data)==null?void 0:g.length)===0&&e.jsx(k,{className:"py-12 text-center",children:e.jsxs(T,{children:[e.jsx(U,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:r?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})})}function Ft(t,s=[]){let r=[];function i(d,x){const u=m.createContext(x),h=r.length;r=[...r,x];const o=p=>{var v;const{scope:f,children:l,...j}=p,g=((v=f==null?void 0:f[t])==null?void 0:v[h])||u,n=m.useMemo(()=>j,Object.values(j));return e.jsx(g.Provider,{value:n,children:l})};o.displayName=d+"Provider";function D(p,f){var g;const l=((g=f==null?void 0:f[t])==null?void 0:g[h])||u,j=m.useContext(l);if(j)return j;if(x!==void 0)return x;throw new Error(`\`${p}\` must be used within \`${d}\``)}return[o,D]}const a=()=>{const d=r.map(x=>m.createContext(x));return function(u){const h=(u==null?void 0:u[t])||d;return m.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return a.scopeName=t,[i,Pt(a,...s)]}function Pt(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const i=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const x=i.reduce((u,{useScope:h,scopeName:o})=>{const p=h(d)[`__scope${o}`];return{...u,...p}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:x}),[x])}};return r.scopeName=s.scopeName,r}function Pe(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Mt(...t){return s=>{let r=!1;const i=t.map(a=>{const d=Pe(a,s);return!r&&typeof d=="function"&&(r=!0),d});if(r)return()=>{for(let a=0;a<i.length;a++){const d=i[a];typeof d=="function"?d():Pe(t[a],null)}}}}function Ee(...t){return m.useCallback(Mt(...t),t)}function Rt(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}var kt=Symbol("radix.slottable");function Tt(t){const s=({children:r})=>e.jsx(e.Fragment,{children:r});return s.displayName=`${t}.Slottable`,s.__radixId=kt,s}var Ie="AlertDialog",[Et,ps]=Ft(Ie,[Re]),I=Re(),$e=t=>{const{__scopeAlertDialog:s,...r}=t,i=I(s);return e.jsx(ht,{...i,...r,modal:!0})};$e.displayName=Ie;var It="AlertDialogTrigger",$t=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,a=I(r);return e.jsx(ot,{...a,...i,ref:s})});$t.displayName=It;var Bt="AlertDialogPortal",Be=t=>{const{__scopeAlertDialog:s,...r}=t,i=I(s);return e.jsx(xt,{...i,...r})};Be.displayName=Bt;var Ot="AlertDialogOverlay",Oe=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,a=I(r);return e.jsx(ct,{...a,...i,ref:s})});Oe.displayName=Ot;var Y="AlertDialogContent",[Ht,Yt]=Et(Y),qt=Tt("AlertDialogContent"),He=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:i,...a}=t,d=I(r),x=m.useRef(null),u=Ee(s,x),h=m.useRef(null);return e.jsx(it,{contentName:Y,titleName:Ye,docsSlug:"alert-dialog",children:e.jsx(Ht,{scope:r,cancelRef:h,children:e.jsxs(dt,{role:"alertdialog",...d,...a,ref:u,onOpenAutoFocus:Rt(a.onOpenAutoFocus,o=>{var D;o.preventDefault(),(D=h.current)==null||D.focus({preventScroll:!0})}),onPointerDownOutside:o=>o.preventDefault(),onInteractOutside:o=>o.preventDefault(),children:[e.jsx(qt,{children:i}),e.jsx(Vt,{contentRef:x})]})})})});He.displayName=Y;var Ye="AlertDialogTitle",qe=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,a=I(r);return e.jsx(mt,{...a,...i,ref:s})});qe.displayName=Ye;var Le="AlertDialogDescription",Ve=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,a=I(r);return e.jsx(ut,{...a,...i,ref:s})});Ve.displayName=Le;var Lt="AlertDialogAction",ze=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,a=I(r);return e.jsx(ke,{...a,...i,ref:s})});ze.displayName=Lt;var Ue="AlertDialogCancel",Ge=m.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...i}=t,{cancelRef:a}=Yt(Ue,r),d=I(r),x=Ee(s,a);return e.jsx(ke,{...d,...i,ref:x})});Ge.displayName=Ue;var Vt=({contentRef:t})=>{const s=`\`${Y}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Y}\` by passing a \`${Le}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Y}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var i;document.getElementById((i=t.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},zt=$e,Ut=Be,We=Oe,Je=He,Ze=ze,Ke=Ge,Qe=qe,Xe=Ve;const et=zt,Gt=Ut,tt=m.forwardRef(({className:t,...s},r)=>e.jsx(We,{className:$("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));tt.displayName=We.displayName;const fe=m.forwardRef(({className:t,...s},r)=>e.jsxs(Gt,{children:[e.jsx(tt,{}),e.jsx(Je,{ref:r,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));fe.displayName=Je.displayName;const je=({className:t,...s})=>e.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...s});je.displayName="AlertDialogHeader";const ye=({className:t,...s})=>e.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ye.displayName="AlertDialogFooter";const Ne=m.forwardRef(({className:t,...s},r)=>e.jsx(Qe,{ref:r,className:$("text-lg font-semibold",t),...s}));Ne.displayName=Qe.displayName;const ve=m.forwardRef(({className:t,...s},r)=>e.jsx(Xe,{ref:r,className:$("text-sm text-muted-foreground",t),...s}));ve.displayName=Xe.displayName;const be=m.forwardRef(({className:t,...s},r)=>e.jsx(Ze,{ref:r,className:$(Me(),t),...s}));be.displayName=Ze.displayName;const De=m.forwardRef(({className:t,...s},r)=>e.jsx(Ke,{ref:r,className:$(Me({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));De.displayName=Ke.displayName;const Wt=Z().shape({content:F().required().label("Content")});function Jt({title:t,refetch:s}){const r=V({}),{id:i}=L(),{user:a}=q(),d=m.useRef(null),x=me({defaultValues:{content:""},resolver:ue(Wt)}),u=async h=>{var o,D,p,f;try{const l=await r.mutateAsync({api:P.createContentCaseLog,data:{case_id:Number(i),content:h.content,action_by_user_name:a==null?void 0:a.fullName,action_by_user_id:a==null?void 0:a._id,action_by_role_name:a==null?void 0:a.roleName,action_by_role_id:a==null?void 0:a.roleId}});(o=l.data)!=null&&o.success?(b.success((D=l==null?void 0:l.data)==null?void 0:D.message),x.reset({content:""}),s==null||s(),(p=d.current)==null||p.click()):b.error(((f=l.data)==null?void 0:f.message)||"created successfully")}catch(l){console.log(l)}};return e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Add Case Log"]})}),e.jsx(re,{className:"sm:max-w-[425px]",children:e.jsxs(xe,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(ne,{children:[e.jsx(le,{children:t}),e.jsx(oe,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(pe,{name:"content",placeholder:"Enter your content"})}),e.jsx(ee,{})]}),e.jsxs(ce,{className:"mt-5 flex justify-between",children:[e.jsx(ie,{asChild:!0,children:e.jsx(E,{ref:d,variant:"outline",children:"Cancel"})}),e.jsx(he,{type:"submit",isLoading:r.isPending,children:"Save changes"})]})]})})]})}function gs({caseStatus:t}){var l,j,g,n,v,C;const[s,r]=m.useState(""),[i,a]=m.useState(!1),[d,x]=m.useState(null),{user:u}=q(),{id:h}=L(),o=J({api:`${P.getContentLogByCaseId}/${h}`,key:"asdasdasd23123123edasdasdas",value:[],options:{enabled:!0}}),D=c=>{x(c),a(!0)},p=V({}),f=async()=>{var c,y,B;try{const N=await p.mutateAsync({api:`${P.deleteCaseContentLog}`,data:{id:d==null?void 0:d.id}});(c=N==null?void 0:N.data)!=null&&c.success?(b.success(((y=N==null?void 0:N.data)==null?void 0:y.message)||"Deleted successfully"),o.refetch()):b.error(((B=N==null?void 0:N.data)==null?void 0:B.message)||"Failed to delete")}catch(N){b.error("Error deleting item"),console.error("Delete Error:",N)}finally{a(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(et,{open:i,onOpenChange:a,children:e.jsxs(fe,{className:"max-w-md",children:[e.jsxs(je,{children:[e.jsx(Ne,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(ve,{className:"text-sm text-slate-600",children:['This action cannot be undone. The document "',(d==null?void 0:d.action_by_role_name)||"",'" will be permanently deleted.']})]}),e.jsxs(ye,{className:"gap-2",children:[e.jsx(De,{className:"text-sm",children:"Cancel"}),e.jsx(be,{onClick:f,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Content"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((j=(l=o==null?void 0:o.data)==null?void 0:l.data)==null?void 0:j.length)||0," Total Case Content"]})]}),t!="2"&&e.jsx(Jt,{title:"Add Case Log",refetch:o.refetch})]})}),e.jsx("div",{className:"space-y-3",children:o.isLoading?e.jsx(k,{className:"bg-white",children:e.jsx(T,{className:"flex h-24 items-center justify-center",children:e.jsx(te,{})})}):e.jsxs(e.Fragment,{children:[(n=(g=o==null?void 0:o.data)==null?void 0:g.data)==null?void 0:n.map(c=>e.jsx(k,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(U,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"mb-1 truncate text-sm font-semibold text-slate-900",children:(c==null?void 0:c.action_by_role_name)||"Document"}),e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:c==null?void 0:c.content}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx("span",{children:H(c==null?void 0:c.created_at).format("MMM DD, YYYY")})]})})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&t!="2"&&e.jsx(E,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>D(c),children:e.jsx(de,{className:"h-3.5 w-3.5"})})})]})})},c==null?void 0:c.id)),((C=(v=o==null?void 0:o.data)==null?void 0:v.data)==null?void 0:C.length)===0&&e.jsx(k,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(T,{className:"py-8 text-center",children:[e.jsx(U,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No content found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:s?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})]})}const Zt=Z().shape({hearing_date:F().required().label("Hearing Date"),hearing_time:F().required().label("Hearing Time"),description:F().optional().label("Description")});function Kt({title:t,refetch:s}){const r=V({}),{id:i}=L(),{user:a}=q(),d=m.useRef(null),x=me({defaultValues:{hearing_date:"",hearing_time:"",description:""},resolver:ue(Zt)}),u=async h=>{var o,D,p,f;try{const l=await r.mutateAsync({api:P.createCaseHearingSchedule,data:{case_id:Number(i),hearing_date:h.hearing_date,hearing_time:h.hearing_time,description:h.description,action_by_user_name:a==null?void 0:a.fullName,action_by_user_id:a==null?void 0:a._id,action_by_role_name:a==null?void 0:a.roleName,action_by_role_id:a==null?void 0:a.roleId}});(o=l.data)!=null&&o.success?(b.success((D=l==null?void 0:l.data)==null?void 0:D.message),(p=d.current)==null||p.click()):b.error(((f=l.data)==null?void 0:f.message)||"Something went wrong"),x.reset({hearing_date:"",hearing_time:"",description:""}),s()}catch(l){console.log(l)}};return e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(E,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Add Case Hearing"]})}),e.jsx(re,{className:"sm:max-w-[425px]",children:e.jsxs(xe,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(ne,{children:[e.jsx(le,{children:t}),e.jsx(oe,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(X,{name:"hearing_date",type:"date",placeholder:"Select date",label:"Hearing Date"})}),e.jsx("div",{children:e.jsx(X,{name:"hearing_time",type:"time",placeholder:"Select time",label:"Hearing Time"})}),e.jsx("div",{children:e.jsx(pe,{name:"description",placeholder:"Enter hearing description (optional)",label:"Description"})}),e.jsx(ee,{})]}),e.jsxs(ce,{className:"mt-5 flex justify-between",children:[e.jsx(ie,{asChild:!0,children:e.jsx(E,{ref:d,variant:"outline",children:"Cancel"})}),e.jsx(he,{type:"submit",isLoading:r.isPending,children:"Save changes"})]})]})})]})}function fs({caseStatus:t}){var l,j,g,n,v,C;const[s,r]=m.useState(""),[i,a]=m.useState(!1),[d,x]=m.useState(null),{user:u}=q(),{id:h}=L(),o=J({api:`${P.getCaseHearingScheduleByCaseId}/${h}`,key:"case-hearings-list",value:[],options:{enabled:!0}}),D=c=>{x(c),a(!0)},p=V({}),f=async()=>{var c,y,B;try{const N=await p.mutateAsync({api:`${P.deleteCaseHearingSchedule}`,data:{id:d==null?void 0:d.id}});(c=N==null?void 0:N.data)!=null&&c.success?(b.success(((y=N==null?void 0:N.data)==null?void 0:y.message)||"Deleted successfully"),o.refetch()):b.error(((B=N==null?void 0:N.data)==null?void 0:B.message)||"Failed to delete")}catch(N){b.error("Error deleting item"),console.error("Delete Error:",N)}finally{a(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(et,{open:i,onOpenChange:a,children:e.jsxs(fe,{className:"max-w-md",children:[e.jsxs(je,{children:[e.jsx(Ne,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(ve,{className:"text-sm text-slate-600",children:['This action cannot be undone. The hearing on "',H(d==null?void 0:d.hearing_date).format("MMM DD, YYYY"),'" will be permanently deleted.']})]}),e.jsxs(ye,{className:"gap-2",children:[e.jsx(De,{className:"text-sm",children:"Cancel"}),e.jsx(be,{onClick:f,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Hearings"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((j=(l=o==null?void 0:o.data)==null?void 0:l.data)==null?void 0:j.length)||0," Total Case Hearings"]})]}),t!="2"&&e.jsx(Kt,{title:"Add Case Log",refetch:o.refetch})]})}),e.jsx("div",{className:"space-y-3",children:o.isLoading?e.jsx(k,{className:"bg-white",children:e.jsx(T,{className:"flex h-24 items-center justify-center",children:e.jsx(te,{})})}):e.jsxs(e.Fragment,{children:[(n=(g=o==null?void 0:o.data)==null?void 0:g.data)==null?void 0:n.map((c,y)=>e.jsx(k,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(G,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex  gap-2",children:[e.jsxs("h3",{className:"mb-1 text-sm font-semibold text-slate-900",children:["Hearing -"," ",H(c==null?void 0:c.hearing_date).format("MMM DD, YYYY")," ","-"]}),e.jsx("div",{children:y==0?e.jsx("h1",{className:"text-sm font-semibold text-green-600",children:"Next hearing"}):e.jsx("h1",{className:"text-sm font-semibold text-red-600",children:"Past"})})]}),(c==null?void 0:c.description)&&e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:c.description}),e.jsxs("p",{className:"mb-2 text-xs text-slate-600",children:["Scheduled by:"," ",(c==null?void 0:c.action_by_user_name)||(c==null?void 0:c.action_by_role_name)]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx("span",{children:H(c==null?void 0:c.hearing_date).format("MMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nt,{className:"h-3 w-3"}),e.jsx("span",{children:c==null?void 0:c.hearing_time})]})]})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&t!="2"&&e.jsx(E,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>D(c),children:e.jsx(de,{className:"h-3.5 w-3.5"})})})]})})},c==null?void 0:c.id)),((C=(v=o==null?void 0:o.data)==null?void 0:v.data)==null?void 0:C.length)===0&&e.jsx(k,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(T,{className:"py-8 text-center",children:[e.jsx(G,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No hearings found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:s?"Try adjusting your search criteria":"Schedule your first hearing to get started"})]})})]})})]})]})}export{us as B,gs as C,xs as F,hs as H,fs as a};
