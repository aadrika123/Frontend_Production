import{r as x,f as G,u as K,l as H,j as e,B as O,_ as g}from"./index-BnYbweqe.js";import{P as V}from"./index-DKzsd27U.js";import{S as W,h as p}from"./Spinner-g9qmRSCK.js";import{B as i}from"./badge-CtnS3lCp.js";import{C as X,b as Z,d as L,a as F,S as ee}from"./separator-DT5LB2U3.js";import{T as ae,a as se,b as f,c as n,d as te,e as r}from"./table-bwenXWVs.js";import{u as re,c as ne}from"./useCustomQuery-D43Eykb5.js";import{g as ie}from"./services-KQnp_8oA.js";import{S as le,Q as de,P as ce}from"./switch-Ba9EtzZG.js";import{L as oe}from"./loader-circle-BvX9-U8q.js";import{E as xe}from"./eye-Btn1tJ6j.js";import{S as he}from"./square-pen-BQ8BZX1P.js";import{S as h}from"./scale-9YzWgqDt.js";import"./input-DzLpXj53.js";function ue(){var y,w,_,P,C,B,M,T,k,U;const R=re({}),[c,Y]=x.useState(1),[o,I]=x.useState(10),[u,z]=x.useState(""),[v,N]=x.useState(null),b=G(),{user:j}=K(),s=ne({api:`${H.getCaseByUserList}`,key:"getCaseByUserList",config:{userId:j==null?void 0:j._id,page:c,limit:o,search:u},value:[c,o,u],options:{enabled:!0}}),Q=async a=>{var l,d,$,A,D,E;N(a);try{const t=await R.mutateAsync({api:`${(l=H)==null?void 0:l.updateCaseNatureStatus}`,data:{id:a}});(d=t==null?void 0:t.data)!=null&&d.success?(s.refetch(),g[((A=($=t==null?void 0:t.data)==null?void 0:$.data)==null?void 0:A.status)==1?"success":"error"]((D=t==null?void 0:t.data)==null?void 0:D.message)):g.error((E=t.data)==null?void 0:E.message)}catch(t){g.error(ie(t))}finally{N(null)}},q=a=>{const d={1:{label:"Pending",variant:"secondary"},2:{label:"Disposed",variant:"outline"},3:{label:"Dismissed",variant:"destructive"},4:{label:"Close",variant:"success"}}[a]||{label:"Unknown",variant:"secondary"};return e.jsx(i,{variant:d.variant,children:d.label})};function J(a){return a==1?e.jsxs(i,{variant:"default",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Judge"]}):a==2?e.jsxs(i,{variant:"success",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Advocate"]}):a==0?e.jsxs(i,{variant:"destructive",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Case Opretor"]}):e.jsx(i,{variant:"secondary",children:e.jsx(h,{className:"w-3 h-3 mr-1"})})}const S=a=>a?p(a).format("DD MMM YYYY"):"-",m=a=>a?p(a).isBefore(p(),"day"):!1;return e.jsx("main",{className:"grid items-start px-4 pb-8",children:e.jsxs("div",{className:"grid auto-rows-max gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(le,{search:u,setSearch:z,refetch:s.refetch,isFetching:s==null?void 0:s.isLoading})}),e.jsxs(X,{className:"shadow-md",children:[e.jsx(Z,{className:"px-6 pt-6 pb-2",children:e.jsxs(L,{children:["Showing ",((w=(y=s==null?void 0:s.data)==null?void 0:y.data)==null?void 0:w.length)||0," of ",((P=(_=s==null?void 0:s.data)==null?void 0:_.pagination)==null?void 0:P.total)||0," cases"]})}),e.jsx(F,{className:"overflow-x-auto px-6",children:s.isLoading?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(W,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(se,{children:e.jsxs(f,{children:[e.jsx(n,{children:"#"}),e.jsx(n,{children:"Case No"}),e.jsx(n,{children:"Filed On"}),e.jsx(n,{children:"Next Hearing"}),e.jsx(n,{children:"Petitioner"}),e.jsx(n,{children:"Respondent"}),e.jsx(n,{children:"Court"}),e.jsx(n,{children:"Current Status"}),e.jsx(n,{children:"Case Status"}),e.jsx(n,{children:"Status"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(te,{children:((B=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:B.length)===0?e.jsx(f,{children:e.jsx(r,{colSpan:11,className:"text-center py-8 text-muted-foreground",children:"No cases found"})}):(T=(M=s==null?void 0:s.data)==null?void 0:M.data)==null?void 0:T.map((a,l)=>e.jsxs(f,{className:m(a.next_hearing_date)?"bg-red-50":"",children:[e.jsx(r,{children:(c-1)*o+l+1}),e.jsx(r,{className:"font-medium font-mono text-sm",children:a.case_no}),e.jsx(r,{children:S(a.filed_on)}),e.jsx(r,{children:e.jsxs("div",{className:`${m(a.next_hearing_date)?"text-red-600 font-medium":""}`,children:[S(a.next_hearing_date),m(a.next_hearing_date)&&e.jsx(i,{variant:"destructive",className:"ml-1 text-xs",children:"Overdue"})]})}),e.jsx(r,{children:e.jsx("div",{className:"max-w-[150px] truncate",title:a.petitioner_name,children:a.petitioner_name})}),e.jsx(r,{children:e.jsx("div",{className:"max-w-[150px] truncate",title:a.respondent??void 0,children:a.respondent||"-"})}),e.jsx(r,{children:e.jsx("div",{className:"max-w-[120px] truncate",title:a.court_location,children:a.court_location})}),e.jsx(r,{children:J(a.application_status)}),e.jsx(r,{children:q(a.case_status)}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(de,{checked:a.status===1,onChange:()=>Q(String(a.id)),disabled:v===String(a.id),className:`${a.status===1?"bg-green-600":"bg-gray-300"} relative inline-flex h-6 w-11 items-center rounded-full transition`,children:[e.jsx("span",{className:"sr-only",children:"Toggle status"}),e.jsx("span",{className:`${a.status===1?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition`})]}),v===String(a.id)&&e.jsx(oe,{className:"h-4 w-4 animate-spin text-primary"})]})}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(O,{size:"sm",variant:"outline",onClick:()=>b(`/legal/dashboard/case-view-details/${a.id}`),children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(O,{size:"sm",variant:"outline",onClick:()=>b(`/legal/dashboard/edit-case-details/${a.id}`),children:e.jsx(he,{className:"h-4 w-4"})})]})})]},a.id))})]}),e.jsx(ee,{className:"my-4"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ce,{page:c,limit:o,totalPages:(U=(k=s==null?void 0:s.data)==null?void 0:k.pagination)==null?void 0:U.totalPages,setPage:Y,setLimit:I})})]})})]})]})})}function Be(){return e.jsx(V,{title:"Case by User List",subTitle:"Manage all the Case here",children:e.jsx("div",{children:e.jsx(ue,{})})})}export{Be as default};
