import{e as z,j as e,r as m,l as A,u as O,n as H,B as k,_ as N,o as I,x as we}from"./index-Cdj1Jy6u.js";import{S as Z,h as L}from"./Spinner-fgW46zgR.js";import{S as K,C as P,c as R,a as Je,b as Ze,d as Ke}from"./separator-BfBBNqMB.js";import{u as Y,c as Qe,a as V}from"./useCustomQuery-NcheFNpp.js";import{c as Xe}from"./index-DQsQnGmg.js";import{D as Q,a as X,b as ee,c as se,d as te,g as ae,f as re,e as ne,T as le,h as Ce,i as es,O as ss,W as ts,C as as,j as rs,k as ns,l as Ae,P as ls,R as os}from"./dialog-2Id0Wc9w.js";import{u as cs,C as is,c as oe,b as M,g as ds,a as ce,o as ie,F as de,f as ms,R as J,B as me}from"./switch-Dfdce-Lm.js";import{R as xe}from"./RHFTextArea-YWndVsy7.js";import{I as xs}from"./select-CVoSWmcW.js";import{F as q}from"./file-text-u2NU1Xsl.js";import{C as U}from"./calendar-C9Dercx2.js";import{U as us}from"./user-cfUCme6O.js";import{C as hs}from"./clock-DbluRhmm.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function gs({name:s,label:t,isDynamic:n,isRequired:c,...r}){const{control:d,setValue:x}=cs();return e.jsx(is,{name:s,control:d,render:({field:{ref:u},fieldState:{error:h}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:t,children:[t," ",c&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(xs,{type:"file",onChange:a=>{x(s,a.target.files?a.target.files[0]:null)},ref:u,className:`mt-1 ${h?"border-red-400":null}`,...r}),h&&e.jsx("span",{className:"text-red-400 text-xs",children:h.message})]})})}const fs=(s,t,n)=>{Xe({customUI:({onClose:c})=>e.jsxs("div",{className:"rounded-md bg-white p-4 shadow-lg",children:[e.jsx("h1",{className:"text-lg font-bold",children:s}),e.jsx("p",{className:"text-sm",children:t}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{className:"rounded-md bg-red-500 px-4 py-1 text-white",onClick:()=>{n(),c()},children:"Yes"}),e.jsx("button",{className:"ml-2 rounded-md bg-gray-500 px-4 py-1 text-white",onClick:c,children:"No"})]})]})})},G=[{value:"orderSheet",label:"Order Sheet"},{value:"judgementCopy",label:"Judgement Copy"},{value:"HearingDocument",label:"Hearing Document"},{value:"Other",label:"Other"}],js=oe().shape({documentName:M().required("Document Name is required"),docType:M(),docPath:ds().required("Document is required"),description:M().required("Description is required"),currentHearingDate:M().when("documentName",{is:"Hearing Document",then:()=>M().required("Hearing Date is required")})});function Ns({title:s,id:t,edit:n,refetch:c}){var _,o,l;const r=Y({}),d=Qe({}),[x,u]=m.useState(""),h=m.useRef(null),{data:a,isFetching:y}=V({api:`${A.getCaseTypeById}/${t}`,key:"getCaseTypeById",options:{enabled:n}}),{user:p}=O(),j=ce({defaultValues:{documentName:((_=a==null?void 0:a.data)==null?void 0:_.document_name)||"",docType:((o=a==null?void 0:a.data)==null?void 0:o.doc_type)||"",docPath:void 0,description:((l=a==null?void 0:a.data)==null?void 0:l.description)||""},resolver:ie(js)}),{id:g}=H(),v=async f=>{var i,F;const b=new FormData;b.append("img",f);try{const C=await d.mutateAsync({api:A.uploadDocumentDms,data:b});if((i=C.data)!=null&&i.status)return C.data.data;throw new Error(((F=C.data)==null?void 0:F.message)||"DMS upload failed")}catch(C){throw console.error("DMS Upload Error:",C),C}},D=async f=>{var b,i,F,C,B,be,ve,De;try{let $=x;if((!n||f.docPath instanceof File)&&(N.loading("Uploading document..."),$=await v(f.docPath),u($),N.dismiss()),n&&f){const W={id:t,documentName:f.documentName,description:f.description,docPath:$,docType:f.docType,currentHearingDate:f.currentHearingDate},S=await r.mutateAsync({api:A.updateCaseType,data:W});(b=S.data)!=null&&b.success?(N.success((i=S==null?void 0:S.data)==null?void 0:i.message),(F=h.current)==null||F.click()):N.error(((C=S.data)==null?void 0:C.message)||"Document updated successfully")}else{const W={caseId:g||"",documentName:f.documentName,description:f.description,docPath:$,actionByUserId:p==null?void 0:p._id,actionByRoleId:p==null?void 0:p.roleId,actionByRoleName:p==null?void 0:p.roleName,actionByUserName:p==null?void 0:p.fullName,currentHearingDate:f.currentHearingDate},S=await r.mutateAsync({api:A.attachDocument,data:W});(B=S.data)!=null&&B.success?(N.success((be=S==null?void 0:S.data)==null?void 0:be.message),(ve=h.current)==null||ve.click()):N.error(((De=S.data)==null?void 0:De.message)||"Document not attached successfully"),j.reset({documentName:"",description:"",docPath:""})}c(),u("")}catch($){console.log("Submit Error:",$),N.error("An error occurred while processing your request")}};m.useEffect(()=>{var f,b,i,F,C,B;n&&a?(j.reset({documentName:((f=a.data)==null?void 0:f.document_name)||"",description:((b=a.data)==null?void 0:b.description)||"",docPath:(i=a.data)==null?void 0:i.document_path,docType:(F=a.data)==null?void 0:F.doc_type,currentHearingDate:((C=a.data)==null?void 0:C.current_hearing_date)||""}),u(((B=a.data)==null?void 0:B.document_path)||"")):(j.reset({documentName:"",description:"",docPath:"",docType:"",currentHearingDate:""}),u(""))},[n,a]);const w=j.formState.isSubmitting||d.isPending;return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(k,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:j,onSubmit:j.handleSubmit(D),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ms,{label:"Select Document",name:"documentName",data:(G==null?void 0:G.map(f=>({label:String(f.label),value:String(f.label)})))||[]})}),j.watch("documentName")=="Hearing Document"&&e.jsx("div",{children:e.jsx(J,{label:"Current hearing date",name:"currentHearingDate",type:"date"})}),e.jsx("div",{children:e.jsx(gs,{label:"Upload Document",name:"docPath",placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(xe,{label:"Description",name:"description",placeholder:"Enter your description"})}),e.jsx(K,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(k,{variant:"outline",ref:h,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:w,children:"Save changes"})]})]})})]})}function rt({caseStatus:s}){var j,g,v,D,w,_;const{user:t}=O(),[n,c]=m.useState(""),[r,d]=m.useState(""),[x,u]=m.useState(!1),{id:h}=H(),a=V({api:`${A.getAllDocuments}/${h}`,key:"getAllDocumentsList",value:[],options:{enabled:!0}}),y=Y({}),p=async o=>{fs("Are you sure?","Please confirm",async()=>{var l,f,b;try{const i=await y.mutateAsync({api:`${A.deleteAttachedDocument}`,data:{id:o}});(l=i==null?void 0:i.data)!=null&&l.success?(N.success(((f=i==null?void 0:i.data)==null?void 0:f.message)||"Deleted successfully"),a.refetch()):N.error(((b=i==null?void 0:i.data)==null?void 0:b.message)||"Failed to delete")}catch(i){N.error("Error deleting item"),console.error("Delete Error:",i)}})};return e.jsx("main",{className:"min-h-screen bg-gray-50/50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Document Management"}),e.jsxs("p",{className:"mt-1 text-gray-600",children:["Manage case documents (",((g=(j=a==null?void 0:a.data)==null?void 0:j.pagination)==null?void 0:g.total)||0," total)"]})]}),s!="2"&&e.jsx(Ns,{title:x?"Edit Document":"Attach Document",id:r,edit:x,setEdit:u,refetch:a.refetch})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.isLoading?e.jsx(P,{children:e.jsx(R,{className:"flex h-32 items-center justify-center",children:e.jsx(Z,{})})}):e.jsxs(e.Fragment,{children:[(D=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:D.map((o,l)=>e.jsxs(P,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(Je,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ze,{className:"text-lg font-semibold text-gray-900",children:(o==null?void 0:o.document_name)||"Document"}),e.jsxs(Ke,{className:"mt-1 text-sm text-gray-600",children:["Case ID: #",o==null?void 0:o.case_id," â€¢ Document #",l+1]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs("span",{children:["Created:"," ",L(o==null?void 0:o.created_at).format("DD-MM-YYYY")]}),s!="2"&&(t==null?void 0:t.roleId)==77&&e.jsx("div",{className:"ml-auto flex justify-end",children:e.jsx(k,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>p(o==null?void 0:o.id),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})]})}),e.jsxs(R,{className:"pt-0",children:[(o==null?void 0:o.description)&&e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-gray-700",children:o.description}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 text-sm sm:grid-cols-2 lg:grid-cols-3",children:[(o==null?void 0:o.doc_type)&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{children:["Type: ",o.doc_type]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsxs("span",{children:["Action By:","",e.jsx("span",{className:"font-medium",children:o==null?void 0:o.action_by_role_name}),o!=null&&o.action_by_user_name?` (${o==null?void 0:o.action_by_user_name})`:""]})]})]}),(o==null?void 0:o.document_path)&&e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Document Path:"})]}),e.jsx("a",{href:o.document_path,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"View Document"})]}),e.jsx("p",{className:"mt-1 break-all text-xs text-gray-500",children:o.document_path})]})]})]},o==null?void 0:o.id)),((_=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:_.length)===0&&e.jsx(P,{className:"py-12 text-center",children:e.jsxs(R,{children:[e.jsx(q,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:n?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})})}function ys(s,t=[]){let n=[];function c(d,x){const u=m.createContext(x),h=n.length;n=[...n,x];const a=p=>{var _;const{scope:j,children:g,...v}=p,D=((_=j==null?void 0:j[s])==null?void 0:_[h])||u,w=m.useMemo(()=>v,Object.values(v));return e.jsx(D.Provider,{value:w,children:g})};a.displayName=d+"Provider";function y(p,j){var D;const g=((D=j==null?void 0:j[s])==null?void 0:D[h])||u,v=m.useContext(g);if(v)return v;if(x!==void 0)return x;throw new Error(`\`${p}\` must be used within \`${d}\``)}return[a,y]}const r=()=>{const d=n.map(x=>m.createContext(x));return function(u){const h=(u==null?void 0:u[s])||d;return m.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return r.scopeName=s,[c,bs(r,...t)]}function bs(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const c=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(d){const x=c.reduce((u,{useScope:h,scopeName:a})=>{const p=h(d)[`__scope${a}`];return{...u,...p}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:x}),[x])}};return n.scopeName=t.scopeName,n}function _e(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function vs(...s){return t=>{let n=!1;const c=s.map(r=>{const d=_e(r,t);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let r=0;r<c.length;r++){const d=c[r];typeof d=="function"?d():_e(s[r],null)}}}}function Se(...s){return m.useCallback(vs(...s),s)}function Ds(s,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(s==null||s(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}var _s=Symbol("radix.slottable");function ws(s){const t=({children:n})=>e.jsx(e.Fragment,{children:n});return t.displayName=`${s}.Slottable`,t.__radixId=_s,t}var Me="AlertDialog",[Cs,nt]=ys(Me,[Ce]),T=Ce(),Pe=s=>{const{__scopeAlertDialog:t,...n}=s,c=T(t);return e.jsx(os,{...c,...n,modal:!0})};Pe.displayName=Me;var As="AlertDialogTrigger",Ss=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,r=T(n);return e.jsx(es,{...r,...c,ref:t})});Ss.displayName=As;var Ms="AlertDialogPortal",Re=s=>{const{__scopeAlertDialog:t,...n}=s,c=T(t);return e.jsx(ls,{...c,...n})};Re.displayName=Ms;var Ps="AlertDialogOverlay",ke=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,r=T(n);return e.jsx(ss,{...r,...c,ref:t})});ke.displayName=Ps;var E="AlertDialogContent",[Rs,ks]=Cs(E),Ts=ws("AlertDialogContent"),Te=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,children:c,...r}=s,d=T(n),x=m.useRef(null),u=Se(t,x),h=m.useRef(null);return e.jsx(ts,{contentName:E,titleName:Fe,docsSlug:"alert-dialog",children:e.jsx(Rs,{scope:n,cancelRef:h,children:e.jsxs(as,{role:"alertdialog",...d,...r,ref:u,onOpenAutoFocus:Ds(r.onOpenAutoFocus,a=>{var y;a.preventDefault(),(y=h.current)==null||y.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[e.jsx(Ts,{children:c}),e.jsx(Is,{contentRef:x})]})})})});Te.displayName=E;var Fe="AlertDialogTitle",Ie=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,r=T(n);return e.jsx(rs,{...r,...c,ref:t})});Ie.displayName=Fe;var $e="AlertDialogDescription",Ee=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,r=T(n);return e.jsx(ns,{...r,...c,ref:t})});Ee.displayName=$e;var Fs="AlertDialogAction",Oe=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,r=T(n);return e.jsx(Ae,{...r,...c,ref:t})});Oe.displayName=Fs;var He="AlertDialogCancel",Ye=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,{cancelRef:r}=ks(He,n),d=T(n),x=Se(t,r);return e.jsx(Ae,{...d,...c,ref:x})});Ye.displayName=He;var Is=({contentRef:s})=>{const t=`\`${E}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${E}\` by passing a \`${$e}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${E}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var c;document.getElementById((c=s.current)==null?void 0:c.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},$s=Pe,Es=Re,Be=ke,Le=Te,qe=Oe,Ue=Ye,ze=Ie,Ve=Ee;const We=$s,Os=Es,Ge=m.forwardRef(({className:s,...t},n)=>e.jsx(Be,{className:I("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:n}));Ge.displayName=Be.displayName;const he=m.forwardRef(({className:s,...t},n)=>e.jsxs(Os,{children:[e.jsx(Ge,{}),e.jsx(Le,{ref:n,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));he.displayName=Le.displayName;const pe=({className:s,...t})=>e.jsx("div",{className:I("flex flex-col space-y-2 text-center sm:text-left",s),...t});pe.displayName="AlertDialogHeader";const ge=({className:s,...t})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});ge.displayName="AlertDialogFooter";const fe=m.forwardRef(({className:s,...t},n)=>e.jsx(ze,{ref:n,className:I("text-lg font-semibold",s),...t}));fe.displayName=ze.displayName;const je=m.forwardRef(({className:s,...t},n)=>e.jsx(Ve,{ref:n,className:I("text-sm text-muted-foreground",s),...t}));je.displayName=Ve.displayName;const Ne=m.forwardRef(({className:s,...t},n)=>e.jsx(qe,{ref:n,className:I(we(),s),...t}));Ne.displayName=qe.displayName;const ye=m.forwardRef(({className:s,...t},n)=>e.jsx(Ue,{ref:n,className:I(we({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));ye.displayName=Ue.displayName;const Hs=oe().shape({content:M().required().label("Content")});function Ys({title:s,refetch:t}){const n=Y({}),{id:c}=H(),{user:r}=O(),d=m.useRef(null),x=ce({defaultValues:{content:""},resolver:ie(Hs)}),u=async h=>{var a,y,p,j;try{const g=await n.mutateAsync({api:A.createContentCaseLog,data:{case_id:Number(c),content:h.content,action_by_user_name:r==null?void 0:r.fullName,action_by_user_id:r==null?void 0:r._id,action_by_role_name:r==null?void 0:r.roleName,action_by_role_id:r==null?void 0:r.roleId}});(a=g.data)!=null&&a.success?(N.success((y=g==null?void 0:g.data)==null?void 0:y.message),x.reset({content:""}),t==null||t(),(p=d.current)==null||p.click()):N.error(((j=g.data)==null?void 0:j.message)||"created successfully")}catch(g){console.log(g)}};return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(k,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Case Log"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(xe,{name:"content",placeholder:"Enter your content"})}),e.jsx(K,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(k,{ref:d,variant:"outline",children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:n.isPending,children:"Save changes"})]})]})})]})}function lt({caseStatus:s}){var g,v,D,w,_,o;const[t,n]=m.useState(""),[c,r]=m.useState(!1),[d,x]=m.useState(null),{user:u}=O(),{id:h}=H(),a=V({api:`${A.getContentLogByCaseId}/${h}`,key:"asdasdasd23123123edasdasdas",value:[],options:{enabled:!0}}),y=l=>{x(l),r(!0)},p=Y({}),j=async()=>{var l,f,b;try{const i=await p.mutateAsync({api:`${A.deleteCaseContentLog}`,data:{id:d==null?void 0:d.id}});(l=i==null?void 0:i.data)!=null&&l.success?(N.success(((f=i==null?void 0:i.data)==null?void 0:f.message)||"Deleted successfully"),a.refetch()):N.error(((b=i==null?void 0:i.data)==null?void 0:b.message)||"Failed to delete")}catch(i){N.error("Error deleting item"),console.error("Delete Error:",i)}finally{r(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(We,{open:c,onOpenChange:r,children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(fe,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(je,{className:"text-sm text-slate-600",children:['This action cannot be undone. The document "',(d==null?void 0:d.action_by_role_name)||"",'" will be permanently deleted.']})]}),e.jsxs(ge,{className:"gap-2",children:[e.jsx(ye,{className:"text-sm",children:"Cancel"}),e.jsx(Ne,{onClick:j,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Content"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((v=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:v.length)||0," Total Case Content"]})]}),s!="2"&&e.jsx(Ys,{title:"Add Case Log",refetch:a.refetch})]})}),e.jsx("div",{className:"space-y-3",children:a.isLoading?e.jsx(P,{className:"bg-white",children:e.jsx(R,{className:"flex h-24 items-center justify-center",children:e.jsx(Z,{})})}):e.jsxs(e.Fragment,{children:[(w=(D=a==null?void 0:a.data)==null?void 0:D.data)==null?void 0:w.map(l=>e.jsx(P,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(q,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"mb-1 truncate text-sm font-semibold text-slate-900",children:(l==null?void 0:l.action_by_role_name)||"Document"}),e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:l==null?void 0:l.content}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsx("span",{children:L(l==null?void 0:l.created_at).format("MMM DD, YYYY")})]})})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&s!="2"&&e.jsx(k,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>y(l),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})},l==null?void 0:l.id)),((o=(_=a==null?void 0:a.data)==null?void 0:_.data)==null?void 0:o.length)===0&&e.jsx(P,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(R,{className:"py-8 text-center",children:[e.jsx(q,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No content found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:t?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})]})}const Bs=oe().shape({hearing_date:M().required().label("Hearing Date"),hearing_time:M().required().label("Hearing Time"),description:M().optional().label("Description")});function Ls({title:s,refetch:t}){const n=Y({}),{id:c}=H(),{user:r}=O(),d=m.useRef(null),x=ce({defaultValues:{hearing_date:"",hearing_time:"",description:""},resolver:ie(Bs)}),u=async h=>{var a,y,p,j;try{const g=await n.mutateAsync({api:A.createCaseHearingSchedule,data:{case_id:Number(c),hearing_date:h.hearing_date,hearing_time:h.hearing_time,description:h.description,action_by_user_name:r==null?void 0:r.fullName,action_by_user_id:r==null?void 0:r._id,action_by_role_name:r==null?void 0:r.roleName,action_by_role_id:r==null?void 0:r.roleId}});(a=g.data)!=null&&a.success?(N.success((y=g==null?void 0:g.data)==null?void 0:y.message),(p=d.current)==null||p.click()):N.error(((j=g.data)==null?void 0:j.message)||"Something went wrong"),x.reset({hearing_date:"",hearing_time:"",description:""}),t()}catch(g){console.log(g)}};return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(k,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Case Hearing"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(J,{name:"hearing_date",type:"date",placeholder:"Select date",label:"Hearing Date"})}),e.jsx("div",{children:e.jsx(J,{name:"hearing_time",type:"time",placeholder:"Select time",label:"Hearing Time"})}),e.jsx("div",{children:e.jsx(xe,{name:"description",placeholder:"Enter hearing description (optional)",label:"Description"})}),e.jsx(K,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(k,{ref:d,variant:"outline",children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:n.isPending,children:"Save changes"})]})]})})]})}function ot({caseStatus:s}){var g,v,D,w,_,o;const[t,n]=m.useState(""),[c,r]=m.useState(!1),[d,x]=m.useState(null),{user:u}=O(),{id:h}=H(),a=V({api:`${A.getCaseHearingScheduleByCaseId}/${h}`,key:"case-hearings-list",value:[],options:{enabled:!0}}),y=l=>{x(l),r(!0)},p=Y({}),j=async()=>{var l,f,b;try{const i=await p.mutateAsync({api:`${A.deleteCaseHearingSchedule}`,data:{id:d==null?void 0:d.id}});(l=i==null?void 0:i.data)!=null&&l.success?(N.success(((f=i==null?void 0:i.data)==null?void 0:f.message)||"Deleted successfully"),a.refetch()):N.error(((b=i==null?void 0:i.data)==null?void 0:b.message)||"Failed to delete")}catch(i){N.error("Error deleting item"),console.error("Delete Error:",i)}finally{r(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(We,{open:c,onOpenChange:r,children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(fe,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(je,{className:"text-sm text-slate-600",children:['This action cannot be undone. The hearing on "',L(d==null?void 0:d.hearing_date).format("MMM DD, YYYY"),'" will be permanently deleted.']})]}),e.jsxs(ge,{className:"gap-2",children:[e.jsx(ye,{className:"text-sm",children:"Cancel"}),e.jsx(Ne,{onClick:j,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Hearings"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((v=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:v.length)||0," Total Case Hearings"]})]}),s!="2"&&e.jsx(Ls,{title:"Add Case Log",refetch:a.refetch})]})}),e.jsx("div",{className:"space-y-3",children:a.isLoading?e.jsx(P,{className:"bg-white",children:e.jsx(R,{className:"flex h-24 items-center justify-center",children:e.jsx(Z,{})})}):e.jsxs(e.Fragment,{children:[(w=(D=a==null?void 0:a.data)==null?void 0:D.data)==null?void 0:w.map((l,f)=>e.jsx(P,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(U,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex  gap-2",children:[e.jsxs("h3",{className:"mb-1 text-sm font-semibold text-slate-900",children:["Hearing -"," ",L(l==null?void 0:l.hearing_date).format("MMM DD, YYYY")," ","-"]}),e.jsx("div",{children:f==0?e.jsx("h1",{className:"text-sm font-semibold text-green-600",children:"Next hearing"}):e.jsx("h1",{className:"text-sm font-semibold text-red-600",children:"Past"})})]}),(l==null?void 0:l.description)&&e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:l.description}),e.jsxs("p",{className:"mb-2 text-xs text-slate-600",children:["Scheduled by:"," ",(l==null?void 0:l.action_by_user_name)||(l==null?void 0:l.action_by_role_name)]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsx("span",{children:L(l==null?void 0:l.hearing_date).format("MMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hs,{className:"h-3 w-3"}),e.jsx("span",{children:l==null?void 0:l.hearing_time})]})]})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&s!="2"&&e.jsx(k,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>y(l),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})},l==null?void 0:l.id)),((o=(_=a==null?void 0:a.data)==null?void 0:_.data)==null?void 0:o.length)===0&&e.jsx(P,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(R,{className:"py-8 text-center",children:[e.jsx(U,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No hearings found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:t?"Try adjusting your search criteria":"Schedule your first hearing to get started"})]})})]})})]})]})}export{tt as B,lt as C,at as F,rt as H,ot as a};
