import{r as g,j as e,u as w,I as b,_ as x,a as y}from"./index-Dh4RvaE-.js";import{u as N,o as C,F as k,B as M,c as P,a as f}from"./switch-CI0SRZ4u.js";import{R as v}from"./RHFTextField-DjdG2KSu.js";import{g as A}from"./services-KQnp_8oA.js";import{R as S,e as F}from"./useCrypto-DSj1sD3q.js";import"./select-CjqHXMpB.js";import{u as E}from"./useCustomQuery-BfHcfG1q.js";const L=()=>{const[o,p]=g.useState(""),[d,u]=g.useState(""),i=()=>{const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",a=Array.from({length:6},()=>r[Math.floor(Math.random()*r.length)]).join("");p(a),n(a)},n=r=>{const a=document.createElement("canvas");a.width=200,a.height=70;const t=a.getContext("2d");t.fillStyle="#E3F2FD",t.fillRect(0,0,a.width,a.height);for(let c=0;c<7;c++)t.beginPath(),t.moveTo(Math.random()*a.width,Math.random()*a.height),t.bezierCurveTo(Math.random()*a.width,Math.random()*a.height,Math.random()*a.width,Math.random()*a.height,Math.random()*a.width,Math.random()*a.height),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.lineWidth=2,t.stroke();t.font="bold 30px Arial";for(let c=0;c<r.length;c++){t.save();const h=20+c*30,s=40+Math.random()*10,j=(Math.random()-.5)*.6;t.translate(h,s),t.rotate(j),t.fillStyle=`rgba(0,0,0,${Math.random()*.9+.1})`,t.fillText(r[c],0,0),t.restore()}u(a.toDataURL())};return g.useEffect(()=>{i()},[]),{captchaInputField:r=>e.jsxs("div",{children:[e.jsx("input",{type:"text",...r.getFieldProps("captcha"),autoComplete:"off",spellCheck:"false",className:"w-full p-2 border rounded",onPaste:a=>a.preventDefault(),onCopy:a=>a.preventDefault(),onCut:a=>a.preventDefault()}),e.jsx("span",{className:"text-red-600 text-xs",children:r.touched.captcha&&r.errors.captcha?r.errors.captcha:null})]}),captcha:o,captchaImage:d,verifyCaptcha:(r,a)=>r===o?!0:(a({captcha:""},!1),i(),!1),generateRandomCaptcha:i}},D=L,R=P({email:f().email("Enter a valid email").required("Email is required"),password:f().min(8,"Password must be at least 8 characters").required(),captcha:f().required("Please enter the captcha")});function H(){const{captchaImage:o,verifyCaptcha:p,generateRandomCaptcha:d}=D(),u=E({}),{login:i}=w(),n=N({defaultValues:{email:"",password:"",captcha:""},resolver:C(R)}),l=a=>(a.preventDefault(),!1),m=a=>{(a.ctrlKey||a.metaKey)&&["c","v","x"].includes(a.key.toLowerCase())&&a.preventDefault()},r=async a=>{var t,c,h;if(console.log("data",a),!p(a.captcha,n.reset)){x.error("Invalid CAPTCHA. Please try again.");return}try{const s=await u.mutateAsync({api:y.login,data:{email:a.email,password:F(a.password)}});console.log("response",s),(t=s==null?void 0:s.data)!=null&&t.status?(await i(s==null?void 0:s.data),x.success((c=s==null?void 0:s.data)==null?void 0:c.message)):x.error((h=s==null?void 0:s.data)==null?void 0:h.message)}catch(s){x.error(A(s.message))}finally{n.reset({...n.getValues(),email:"",password:"",captcha:""}),d()}};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:" darks:bg-gray-800 darks:border-gray-800 h-[7vh] w-full border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto xl:max-w-6xl ",children:e.jsx("nav",{className:" ",id:"desktop-menu",children:e.jsx("a",{className:"",href:"",children:e.jsxs("div",{className:"mt-6",children:[" ",e.jsx("span",{className:"text-xl font-bold uppercase",children:"Login - Legal Management System"})]})})})})}),e.jsx("main",{className:"flex h-[80vh] items-center justify-center bg-gray-100",children:e.jsx("div",{className:" darks:bg-gray-900 darks:bg-opacity-40 bg-gray-100",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl ",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap ",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2 ",children:e.jsx("div",{className:"mb-12 w-full max-w-full px-2 sm:px-12 lg:mb-0 lg:pr-20  ",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"darks:bg-gray-800 rounded-lg bg-white p-6 shadow-xl sm:px-12 sm:py-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("h1",{className:"darks:text-gray-300 mb-  text-center text-2xl font-bold leading-normal text-gray-800",children:"Welcome Back"}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsx("div",{className:"mb-7 w-10 border border-b border-black"})})]}),e.jsx(k,{methods:n,onSubmit:n.handleSubmit(r),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(v,{className:" w-full bg-background px-5 py-5",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your User Name",autoComplete:"off",onPaste:l,onCopy:l,onCut:l,onKeyDown:m})}),e.jsx("div",{className:"space-y-2",children:e.jsx(S,{className:"w-full bg-background px-5 py-5",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:l,onCopy:l,onCut:l,onKeyDown:m})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter CAPTCHA"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:o,alt:"CAPTCHA",className:"border border-gray-300 rounded h-[50px] w-[150px]"})}),e.jsx("button",{type:"button",onClick:()=>{d(),n.setValue("captcha","")},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Refresh CAPTCHA",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx(v,{className:"w-full bg-background px-5 py-3",name:"captcha",placeholder:"Enter the text shown in the image",autoComplete:"off",onPaste:l,onCopy:l,onCut:l,onKeyDown:m})]}),e.jsx("div",{children:e.jsxs(M,{type:"submit",isLoading:n.formState.isSubmitting,className:"mt-2  w-full px-4 py-5 shadow-none",children:[e.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-box-arrow-in-right mr-1 inline-block h-4 w-4 ltr:mr-2 rtl:ml-2",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]})})]})})})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:e.jsxs("div",{className:"mt-6 text-center lg:mt-0",children:[e.jsx(b,{src:"/images/legallogo.png",alt:"welcome",className:"h-68 "}),e.jsxs("div",{className:"mt-2 px-4",children:[e.jsx("h1",{className:"text-bold mb-2 text-2xl",children:"Serve Citizen Services with Ease of Access"}),e.jsxs("p",{className:"mb-4 text-base text-gray-500",children:["Manage citizen government services with easy of access and serve them in on time."," "]})]})]})})]})})})}),e.jsx("footer",{className:" darks:bg-gray-800 darks:border-gray-800 h-[10vh] w-full border-t border-gray-200 bg-white py-6",children:e.jsx("div",{className:"container mx-auto w-full px-4 xl:max-w-6xl",children:e.jsx("div",{className:"mx-auto px-4",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-left md:rtl:text-right",children:e.jsxs("ul",{className:"space-x-4 ltr:pl-0 rtl:pr-0",children:[e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Support |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Help Center |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Privacy |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Terms of Service"})})]})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-right md:rtl:text-left",children:e.jsxs("p",{className:"mb-0 mt-3 md:mt-0",children:[e.jsx("a",{href:"#",className:"hover:text-indigo-500",children:"UD&HD"})," ","| All right reserved"]})})]})})})})]})}function q(){return e.jsx("div",{className:"",children:e.jsx(H,{})})}export{q as default};
