import{j as t,bf as L,A as g,bh as I,l as C,b as A,r,p as _,m as k,o as F,aL as v,G as H,bX as R,cI as E,bM as W}from"./index-Bd-ioIk0.js";import{u as M}from"./useQuery-DNLnyGd_.js";function P(){const{isLoading:c,data:d,isError:u,error:n}=M("first-query",()=>g.get("http://localhost:3001/applicationList")),m=[{Header:"Ward No.",accessor:"ward_no"},{Header:"Saf No.",accessor:"saf_no"},{Header:"Owner Name",accessor:"owner_name"},{Header:"Property Type",accessor:"property_type"},{Header:"Assessment Type",accessor:"assessment_type",Cell:({cell:a})=>t.jsx("div",{className:" rounded-full shadow-lg h-7 mx-auto w-7 font-semibold text-center py-1 text-sm px-1  "+(a.row.values.assessment_type=="New Assessment"?"bg-green-200 text-green-900 ":"")+(a.row.values.assessment_type=="Reassessment"?"bg-indigo-200 text-indigo-900 ":"")+(a.row.values.assessment_type=="Mutation"?"bg-red-200 text-red-900 ":""),children:Array.from(a.row.values.assessment_type)[0]})},{Header:"Received at",accessor:"received_at",Cell:({value:a})=>I(new Date(a),"dd/MM/yyyy")},{Header:"Action",accessor:"id",Cell:({cell:a})=>t.jsx("button",{className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];return t.jsxs(t.Fragment,{children:[c&&t.jsx("h1",{children:"Looading ..."}),!c&&t.jsx(L,{columns:m,dataList:d==null?void 0:d.data})]})}const $=()=>{const{levelWisePendingCollection:c,api_getAllUlb:d}=W();C("Level Wise Pending Report");const u=A(),[n,m]=r.useState(),[a,x]=r.useState(!1),[h,w]=r.useState([]),[j,f]=r.useState(!1),y="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",o=window.localStorage.getItem("ulbId"),i=_({initialValues:{ulbId:o||""},onSubmit:e=>{b(e)},validationSchema:k({ulbId:F().required("Select ULB")})});r.useEffect(()=>{f(!0),!o&&N(),o&&b()},[]);const N=()=>{g.get(d,v()).then(e=>{var s,l;((s=e==null?void 0:e.data)==null?void 0:s.status)==!0&&w((l=e==null?void 0:e.data)==null?void 0:l.data)}).catch(e=>{}).finally(()=>f(!1))},b=e=>{x(!0),g.post(c,{ulbId:(e==null?void 0:e.ulbId)||""},v()).then(s=>{var l;x(!1),m((l=s==null?void 0:s.data)==null?void 0:l.data)}).catch(s=>x(!1))},S=[{Header:"S.No.",Cell:({row:e})=>t.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Employee Name",accessor:"role_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return t.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Total No of Form(s)",accessor:"total",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return t.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:t.jsx("div",{className:"w-full text-center",children:"Actions"}),accessor:"id",Cell:({cell:e})=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full flex justify-evenly",children:[t.jsx("button",{className:"w-max px-4 py-1 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-sky-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",onClick:()=>{var s,l;return u(`/saf-wise-details/${(l=(s=e==null?void 0:e.row)==null?void 0:s.values)==null?void 0:l.id}/${i.values.ulbId}`)},children:"View SAF Wise Details"}),t.jsx("button",{className:"w-max px-4 py-1 bg-indigo-500 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-sky-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",onClick:()=>{var s,l;return u(`/employee-wise-details/${(l=(s=e==null?void 0:e.row)==null?void 0:s.values)==null?void 0:l.id}/${i.values.ulbId}`)},children:"View Employee Wise Details"})]})})}];return t.jsxs(t.Fragment,{children:[!o&&t.jsxs("form",{onChange:i.handleChange,onSubmit:i.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md",children:[t.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Report"}),t.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[t.jsxs("div",{className:"flex flex-col w-full md:w-[15%]",children:[t.jsx("div",{className:"col-span-6 font-semibold",children:"Select ULB :"}),t.jsx("div",{className:"col-span-6",children:t.jsxs("select",{name:"ulbId",id:"",className:y,disabled:a,children:[j?t.jsx("option",{disabled:!0,children:"Loading..."}):t.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map(e=>t.jsx("option",{value:e.id,children:e.ulb_name}))]})}),t.jsx("div",{className:"col-span-12 text-start",children:i.touched.ulbId&&i.errors.ulbId&&t.jsx(t.Fragment,{children:t.jsx("span",{className:"text-red-600 text-xs",children:i.errors.ulbId})})})]}),t.jsx("div",{className:"mt-4 w-full md:w-[20%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:t.jsx("div",{className:" ",children:a?t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(H,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):t.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[t.jsx("span",{className:"",children:t.jsx(R,{fontSize:""})}),t.jsx("span",{children:"Search Record"})]})})})]})]}),t.jsx("div",{className:"mt-4"}),a&&t.jsx(E,{}),n!=null&&(n==null?void 0:n.length)!=0&&!a?t.jsxs(t.Fragment,{children:[t.jsx(P,{dataList:n,columns:S})," "]}):t.jsx(t.Fragment,{children:!a&&t.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})}),t.jsx("div",{className:"h-[20vh]"})]})};export{$ as default};
