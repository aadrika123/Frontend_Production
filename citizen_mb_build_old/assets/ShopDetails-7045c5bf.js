import{M as v,u as q,r as d,c as N,A as w,b as n,F as i,j as t,Q as u}from"./index-1aa8c14e.js";import{R as H,T as V}from"./RentalApiList-afb7b831.js";import{u as Q}from"./formik.esm-0998d631.js";import{l as G,n as l}from"./PowerupFunctions-9e63719f.js";const J={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"gray",border:"none",overflowY:"scroll"}};v.setAppElement("#root");function te(){const{id:p}=q(),{api_shopDetailsById:S,api_shopTcPayment:_}=H(),{titleColor:M,bgHeaderColor:K}=V(),h=(a,s)=>{u.dismiss(),s=="success"&&u.success(a),s=="error"&&u.error(a)},[C,m]=d.useState(!1),[e,z]=d.useState(),[F,$]=d.useState(""),[f,k]=d.useState(""),[A,I]=d.useState(""),[x,P]=d.useState(""),[R,y]=d.useState(!1);function T(){y(!0)}function g(){y(!1)}const Y=()=>{const a=new Date(A),s=new Date(x);return`${(s.getFullYear()-a.getFullYear())*12+(s.getMonth()-a.getMonth())}`},j=()=>{const a=new Date,s=new Date(f);return`${(s.getFullYear()-a.getFullYear())*12+(s.getMonth()-a.getMonth())}`},O=a=>{const s=new Date,r=a,c=(s.getFullYear()-r.getFullYear())*12+(s.getMonth()-r.getMonth())+1;$(c)},B=a=>{const[s,r,c]=a.split("/"),U=new Date(`${c}/${r}/${s}`);O(U)},o=Q({initialValues:{ddmmyy:"",amount:"",fromDate:"",uptoDate:""},onSubmit:a=>{L(a)}}),E=a=>{let s=a.target.name,r=a.target.value;s=="ddmmyy"&&k(r),s=="fromDate"&&I(r),s=="uptoDate"&&P(r)},L=a=>{m(!0);let s;(e==null?void 0:e.payment_upto)==null?s={shopId:p,paymentFrom:a==null?void 0:a.fromDate,paymentTo:a==null?void 0:a.uptoDate}:s={shopId:p,paymentFrom:e==null?void 0:e.payment_upto,paymentTo:a==null?void 0:a.ddmmyy},N.post(_,s,w()).then(r=>{var c;r.data.status&&(h((c=r==null?void 0:r.data)==null?void 0:c.message,"success"),b()),m(!1)}).catch(r=>{var c;h((c=res==null?void 0:res.data)==null?void 0:c.message,"error"),m(!1)})};d.useEffect(()=>{b()},[]);const b=()=>{m(!0);const a={shopId:p};N.post(S,a,w()).then(s=>{s.data.status&&(z(s.data.data),B(s.data.data.payment_upto)),m(!1)}).catch(s=>{m(!1)})};return n(i,{children:[C&&G(),n("div",{className:"bg-[#eff2f0]",children:[n("div",{className:"col-span-12",children:[" ",t("h1",{className:`font-bold ${M} text-xl px-4 py-2 text-gray-600`,children:"Shop Details"})]}),t("div",{className:" flex justify-center items-center  overflow-hidden p-4 ",children:n("div",{class:"  w-full md:w-1/3 rounded-lg bg-[#fdfdfd] shadow-indigo-50 shadow-md",children:[n("div",{className:"bg-[#6c68f0] rounded-lg p-4 text-white",children:[n("p",{class:"text-md text-center font-semibold ",children:["Shop No. : ",t("span",{children:l(e==null?void 0:e.shop_no)})]}),t("p",{class:"text-center py-1",children:n("span",{class:"flex space-x-2 py-1 ",children:[t("span",{className:"text-sm text-center py-1 px-1",children:"Payable Amount :  "}),(e==null?void 0:e.payment_upto)==null?n(i,{children:[x&&t("span",{class:"text-md font-bold  px-2 w-full border shadow-md text-gray-700",children:n("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*Y()]})}),!x&&t("span",{className:"text-xs text-red-300",children:"Since last payment is not available , Please select month "})]}):t(i,{children:f?t("span",{class:"text-md font-bold px-2 w-full border shadow-md text-gray-700",children:n("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*j()+`${e==null?void 0:e.arrear}`*1]})}):t("span",{class:"text-md font-bold px-2 w-full border shadow-md text-gray-700",children:n("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*`${F}`+`${e==null?void 0:e.arrear}`*1]})})})]})}),n("form",{onSubmit:o.handleSubmit,onChange:E,children:[n("div",{className:"flex space-x-2 py-1  ",children:[n("p",{class:"text-sm text-center py-1 px-1",children:["Payment Upto : ",t("span",{children:l(e==null?void 0:e.payment_upto)})]}),n(v,{isOpen:R,onRequestClose:g,style:J,contentLabel:"Example Modal",children:[(e==null?void 0:e.payment_upto)==null?n("div",{className:"flex space-x-2",children:[n("div",{children:[t("p",{className:"capitalize text-xs",children:"date from"}),t("input",{type:"date",name:"fromDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm",onChange:o.handleChange,value:o.values.fromDate})]}),n("div",{children:[t("p",{className:"capitalize text-xs",children:"date upto"}),t("input",{type:"date",name:"uptoDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm",onChange:o.handleChange,value:o.values.uptoDate})]})]}):n(i,{children:[t("p",{className:"capitalize text-xs",children:"select date"}),t("input",{type:"date",name:"ddmmyy",className:"px-2 text-gray-800 border border-gray-300 rounded-sm ",onChange:o.handleChange,value:o.values.ddmmyy})]}),t("div",{className:"mt-1 text-center",children:t("button",{className:"text-xs border bg-blue-500 py-1 px-2",onClick:g,children:"Confirm"})})]}),t("div",{className:"bg-gray-300 text-gray-600 py-1 px-4 rounded-sm capitalize text-xs mt-1",onClick:T,children:"select month"})]}),t("div",{className:"flex space-x-1 py-1"}),t("div",{className:"",children:t("button",{type:"submit",className:"bg-amber-500 mt-1 py-2 px-2 rounded-sm capitalize text-xs w-full ",children:"Submit"})})]})]}),t("div",{class:"bg-white shadow-lg rounded-lg  w-full mt-4",children:t("div",{children:n("ul",{children:[n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["sairat Name :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.allottee)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Present occupier :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.present_occupier)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["Contact no. :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.contact_no)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["circle :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.circle_name)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["market :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.market_name)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["monthly rent :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.rate)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["last demand :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.last_payment_amount)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["paid upto :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.payment_upto)})]}),n("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["last pmt on :",t("span",{className:"px-4 text-md text-gray-500 uppercase",children:l(e==null?void 0:e.last_payment_date)})]})]})})})]})})]})]})}export{te as default};
