import{d as W,r as i,c as h,A as F,j as r,F as C,b as s,Q as x}from"./index-0ba47181.js";import{u as G}from"./formik.esm-a256dd9b.js";import{T as J,R as K}from"./RentalApiList-ca0a0770.js";import{c as X,a as n}from"./index.esm-fa8677c9.js";import{A as y}from"./ApiHeader2-b363f7b8.js";function ce(){const{saveButtonColor:Y,inputStyle:c,labelStyle:o,headingStyle:Z,titleStyle:D,addButtonColor:ee,formStyle:le,titleColor:P}=J(),{api_UlbCircleList:S,api_locationByCircleList:q,api_addToll:T,api_getTollRateList:L}=K(),b=W();i.useState();const[V,u]=i.useState(!1);i.useState(),i.useState(""),i.useState(!1),i.useState("");const[re,g]=i.useState(""),[I,A]=i.useState(""),[R,B]=i.useState(""),[m,_]=i.useState();i.useState();const[p,H]=i.useState(),[f,j]=i.useState(),U=X({circle:n().required("This field is required"),market:n().required("This field is required"),vendorName:n().required("This field is required"),mobile:n().required("This field is required"),address:n().required("This field is required"),rate:n().required("This field is required"),remarks:n().required("This field is required"),photo1Path:n().required("This field is required"),photo2Path:n().required("This field is required"),longitude:n().required("This field is required"),latitude:n().required("This field is required")}),v=(e,t)=>{x.dismiss(),t=="success"&&x.success(e),t=="error"&&x.error(e)},l=G({initialValues:{circle:"",market:"",vendorName:"",mobile:"",address:"",rate:"",remarks:"",photo1Path:"",photo2Path:"",longitude:"",latitude:""},enableReinitialize:!0,onSubmit:e=>{E(e)},validationSchema:U}),O=e=>{let t=e.target.name,a=e.target.value;t=="photo1Path"&&w(t,e.target.files[0]),t=="photo2Path"&&w(t,e.target.files[0]),t=="circle"&&Q(a),g(file),t=="vendorName"&&l.setFieldValue("vendorName",allowCharacterInput(a,l.values.vendorName,50)),t=="mobile"&&l.setFieldValue("mobile",allowNumberInput(a,l.values.mobile,10)),t=="rate"&&l.setFieldValue("rate",allowNumberInput(a,l.values.rate,10)),t=="lastAmount"&&l.setFieldValue("lastAmount",allowNumberInput(a,l.values.lastAmount,10)),t=="presentLength"&&l.setFieldValue("presentLength",allowFloatInput(a,l.values.presentLength,10)),t=="presentBreadth"&&l.setFieldValue("presentBreadth",allowNumberInput(a,l.values.presentBreadth,10)),t=="presentHeight"&&l.setFieldValue("presentHeight",allowNumberInput(a,l.values.presentHeight,10)),t=="longitude"&&l.setFieldValue("longitude",allowFloatInput(a,l.values.longitude,10)),t=="latitude"&&l.setFieldValue("latitude",allowFloatInput(a,l.values.latitude,10))},w=(e,t)=>{g(t),e=="photo1Path"?l.setFieldValue("photo1Path",t):l.setFieldValue("photo2Path",t);const a=new FileReader;a.onloadend=()=>{e=="photo1Path"?A(a.result):B(a.result)},a.readAsDataURL(t)},E=e=>{let t,a;t=T,a={circleId:e==null?void 0:e.circle,marketId:e==null?void 0:e.market,vendorName:e==null?void 0:e.vendorName,address:e==null?void 0:e.address,rate:e==null?void 0:e.rate,mobile:e==null?void 0:e.mobile,photograph1:e==null?void 0:e.photo1Path,photograph2:e==null?void 0:e.photo2Path,longitude:e==null?void 0:e.longitude,latitude:e==null?void 0:e.latitude,remarks:e==null?void 0:e.remarks},h.post(`${t}`,a,y()).then(function(d){var N,k,$;((N=d==null?void 0:d.data)==null?void 0:N.status)===!0?(v("submitted successfully","success"),b(`/submitScreen/toll/${($=(k=d==null?void 0:d.data)==null?void 0:k.data)==null?void 0:$.tollNo}`)):(v("Failed to submit","error"),b("/municipal-rental"))}).catch(function(d){})},M=()=>{h.post(S,{},y()).then(e=>{_(e.data.data),u(!1)}).catch(e=>{u(!1)})};i.useEffect(()=>{M(),z()},[]);const z=()=>{h.post(L,{},F()).then(e=>{j(e.data.data),u(!1)}).catch(e=>{u(!1)})},Q=e=>{const t={circleId:e};h.post(q,t,F()).then(a=>{a.data.status&&H(a.data.data)}).catch(a=>{})};return V?r(C,{children:r("div",{className:"min-h-screen"})}):r(C,{children:r("div",{className:" bg-[#eff2f0]",children:r("form",{onSubmit:l.handleSubmit,onChange:O,encType:"multipart/form-data",children:s("div",{className:"container mx-auto p-4",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 p-4 border-b",children:[s("div",{className:"col-span-6 flex space-x-3",children:[r("img",{src:"https://cdn-icons-png.flaticon.com/128/2981/2981313.png",className:"h-10 -mt-2"}),r("h1",{className:`font-semibold ${P} text-xl px-4 py-2 text-gray-600 -mt-2`,children:"Add Toll"})]}),r("div",{className:"col-span-6 flex space-x-3 justify-end"})]}),s("div",{className:"bg-[#fdfdfd]  rounded-2xl shadow-md p-2",children:[s("div",{className:"p-2",children:[s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Circle"}),s("select",{...l.getFieldProps("circle"),className:`${c} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),m==null?void 0:m.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.circle_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.circle&&l.errors.circle?l.errors.circle:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Market"}),s("select",{...l.getFieldProps("market"),className:`${c} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),p==null?void 0:p.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.market_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.market&&l.errors.market?l.errors.market:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${o} inline-block mb-2`,children:"Vendor name"}),r("input",{type:"text",name:"vendorName",className:`${c} inline-block w-full relative`,onChange:l.handleChange,value:l.values.vendorName}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.vendorName&&l.errors.vendorName?l.errors.vendorName:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${o} inline-block mb-2`,children:"Mobile no."}),r("input",{type:"text",name:"mobile",className:`${c} inline-block w-full relative`,onChange:l.handleChange,value:l.values.mobile}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.mobile&&l.errors.mobile?l.errors.mobile:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Landmark"}),r("input",{type:"text",name:"address",className:`${c} inline-block w-full relative`,onChange:l.handleChange,value:l.values.address}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.address&&l.errors.address?l.errors.address:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Rate"}),s("select",{...l.getFieldProps("rate"),className:`${c} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),f==null?void 0:f.map(e=>s("option",{value:e==null?void 0:e.id,children:[e==null?void 0:e.toll_type," (Rs.",e==null?void 0:e.rate,")"]}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.rate&&l.errors.rate?l.errors.rate:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${o} inline-block mb-2`,children:"Longitude"}),r("input",{type:"text",name:"longitude",className:`${c} inline-block w-full relative`,onChange:l.handleChange,value:l.values.longitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.longitude&&l.errors.longitude?l.errors.longitude:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${o} inline-block mb-2`,children:"Latitude"}),r("input",{type:"text",name:"latitude",className:`${c} inline-block w-full relative`,onChange:l.handleChange,value:l.values.latitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.latitude&&l.errors.latitude?l.errors.latitude:null})]})]}),s("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Photo1 path"}),r("input",{type:"file",name:"photo1Path",className:`${c} inline-block w-full relative`,onChange:l.handleChange}),r("img",{src:`${I}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo1Path&&l.errors.photo1Path?l.errors.photo1Path:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${o} inline-block mb-2 `,children:"Photo2 path"}),r("input",{type:"file",name:"photo2Path",className:`${c} inline-block w-full relative`,onChange:l.handleChange}),r("img",{src:`${R}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo2Path&&l.errors.photo2Path?l.errors.photo2Path:null})]}),s("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${o} inline-block mb-2`,children:"Remarks"}),r("textarea",{name:"remarks",onChange:l.handleChange,value:l.values.remarks,className:"border  p-2 w-full h-24",placeholder:"Write your remark..."}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.remarks&&l.errors.remarks?l.errors.remarks:null})]})]})]}),r("div",{className:"pb-8",children:r("button",{type:"submit",className:"bg-green-500 px-7 py-2 text-white font-semibold rounded leading-5 shadow-lg w-full",children:"Save"})})]})]})})})})}export{ce as default};
