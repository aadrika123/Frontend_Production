import{r as c,a as B,j as l,F as s,b as e}from"./index-5063306b.js";import{c as C,b as p,u as F}from"./index.esm-5e7901be.js";import{R as _}from"./index.esm-5c94e3ba.js";import{a as D}from"./axios-28c6f114.js";import{W as k}from"./WaterApiList-bae670fd.js";import A from"./CommonLoader-75dae4cb.js";import"./iconBase-0b91e11c.js";import"./BeatLoader-556eb540.js";function R(){const[u,n]=c.useState(),[g,d]=c.useState(!1),[i,b]=c.useState(),{api_waterSearchConsumer:f,header:N}=k(),v=B(),y=a=>{d(!0);const o={filterBy:r.values.filterBy,parameter:r.values.parameter};console.log("before fetch holding details....",o),D.post(f,o,N).then(t=>{var h,m,x;console.log("search property list",(h=t==null?void 0:t.data)==null?void 0:h.data),(m=t==null?void 0:t.data)!=null&&m.status&&b((x=t==null?void 0:t.data)==null?void 0:x.data),d(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),d(!1)})},w=C({filterBy:p().required("This is a required field !"),parameter:p().required("This is a required field !")}),r=F({initialValues:{filterBy:"",parameter:""},onSubmit:a=>{y()},validationSchema:w}),S=a=>{r.values.filterBy=a.target.value,a.target.value=="holdingNo"&&n("Holding No"),a.target.value=="ownerDetails"&&n("Owner Details"),a.target.value=="address"&&n("Address")};return l(s,{children:[g&&e(A,{}),e("div",{className:"text-center font-bold text-gray-700 text-lg border-b-2 border-gray-700 mx-4 mb-4",children:e("p",{children:"  Search Water Consumer "})}),l("div",{className:"mt-6",children:[e("div",{className:"flex ml-5 mt-2 "}),e("form",{onSubmit:r.handleSubmit,children:l("div",{className:"justify-center my-5 m-10",children:[l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"filterBy",onChange:S,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"consumerNo",children:"Consumer No"}),e("option",{value:"holdingNo",children:"Holding No"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"applicantName",children:"Applicant Name"}),e("option",{value:"mobileNo",children:"Mobile No"})]}),e("p",{className:"text-red-500 text-xs",children:r.touched.filterBy&&r.errors.filterBy?r.errors.filterBy:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By ",u," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:r.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:r.touched.parameter&&r.errors.parameter?r.errors.parameter:null})]}),e("div",{className:"mt-4",children:e("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-700 text-gray-200 hover:text-white shadow-lg rounded-sm text-base font-semibold  py-1",children:l("p",{className:"flex justify-center",children:[" ",l("span",{className:"mt-1 mx-2",children:[" ",e(_,{})," "]})," Search record "]})})})]})}),e("div",{className:"mt-10 mx-4",children:i?l("div",{className:"w-full relative bg-indigo-50 shadow-md  rounded-sm pb-2 border-2 border-indigo-600 mb-4 select-none cursor-pointer",children:[e("div",{className:"font-semibold bg-indigo-600 px-4 text-white",children:"Consumer Details"}),e("div",{className:"w-full rounded-lg space-b-2",children:e("div",{className:"",children:i&&i.map((a,o)=>l("div",{children:[l("div",{className:"w-full md:w-[40%] grid grid-cols-12 p-4",children:[l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Consumer No"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.consumer_no})]}),(a==null?void 0:a.holding_no)&&l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Holding No"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.holding_no})]}),(a==null?void 0:a.saf_no)&&l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Saf No"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.saf_no})]}),l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Applicant Name"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.applicant_name})]}),l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Guardian Name"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.guardian_name})]}),l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Mobile No"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.mobile_no})]}),l(s,{children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Address"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-sm",children:a==null?void 0:a.address})]})]},o),e("div",{className:"float-right -mt-4 -pl-1",children:e("button",{onClick:()=>v(`/water-consumer-view/${a==null?void 0:a.id}`),className:"px-3 mt-1 rounded-l-sm -mr-0.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm",children:"Click to View"})})]}))})})]}):e("div",{})})]})]})}export{R as default};
