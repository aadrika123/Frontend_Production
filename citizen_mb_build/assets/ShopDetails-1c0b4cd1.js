import{M as _,u as q,r as c,c as v,A as S,b as s,F as p,j as a,Q as u}from"./index-b446bed8.js";import{R as H,T as V}from"./RentalApiList-9a601e30.js";import{u as Q}from"./formik.esm-7b462340.js";import{l as G,n as o}from"./PowerupFunctions-50dbe47a.js";const J={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"gray",border:"none",overflowY:"scroll"}};_.setAppElement("#root");function te(){const{id:i}=q();console.log("id.....",i);const{api_shopDetailsById:M,api_shopTcPayment:C}=H(),{titleColor:z,bgHeaderColor:K}=V(),g=(t,n)=>{u.dismiss(),n=="success"&&u.success(t),n=="error"&&u.error(t)},[F,m]=c.useState(!1),[e,$]=c.useState(),[h,k]=c.useState(""),[f,A]=c.useState(""),[I,P]=c.useState(""),[x,R]=c.useState(""),[T,y]=c.useState(!1);function Y(){y(!0)}function b(){y(!1)}const j=()=>{const t=new Date(I),n=new Date(x);return`${(n.getFullYear()-t.getFullYear())*12+(n.getMonth()-t.getMonth())}`},O=()=>{const t=new Date,n=new Date(f);return console.log("current date 2",n),`${(n.getFullYear()-t.getFullYear())*12+(n.getMonth()-t.getMonth())}`},B=t=>{console.log("==2======",t);const n=new Date,l=t,r=(n.getFullYear()-l.getFullYear())*12+(n.getMonth()-l.getMonth())+1;console.log("==3======",r),k(r)},E=t=>{console.log("==1======",t);const[n,l,r]=t.split("/"),w=new Date(`${r}/${l}/${n}`);console.log("===1.1= after splitting==",w),B(w)},d=Q({initialValues:{ddmmyy:"",amount:"",fromDate:"",uptoDate:""},onSubmit:t=>{console.log("shop data",t),U(t)}}),L=t=>{console.log("target value",t.target.value),console.log("target value",t.target.name);let n=t.target.name,l=t.target.value;console.log("value to ...",l),n=="ddmmyy"&&A(l),n=="fromDate"&&P(l),n=="uptoDate"&&R(l)},U=t=>{m(!0);let n;(e==null?void 0:e.payment_upto)==null?n={shopId:i,paymentFrom:t==null?void 0:t.fromDate,paymentTo:t==null?void 0:t.uptoDate}:n={shopId:i,paymentFrom:e==null?void 0:e.payment_upto,paymentTo:t==null?void 0:t.ddmmyy},v.post(C,n,S()).then(l=>{var r;console.log("shop details...1",l.data.message),l.data.status&&(g((r=l==null?void 0:l.data)==null?void 0:r.message,"success"),N()),m(!1)}).catch(l=>{var r;console.log(l),g((r=res==null?void 0:res.data)==null?void 0:r.message,"error"),m(!1)})};c.useEffect(()=>{N()},[]);const N=()=>{m(!0);const t={shopId:i};v.post(M,t,S()).then(n=>{console.log("shop details...",n.data),n.data.status&&($(n.data.data),E(n.data.data.payment_upto)),m(!1)}).catch(n=>{console.log(n),m(!1)})};return console.log("database date",h),console.log("shop details by id 11",e==null?void 0:e.payment_upto),s(p,{children:[F&&G(),s("div",{className:"bg-[#eff2f0]",children:[s("div",{className:"col-span-12",children:[" ",a("h1",{className:`font-bold ${z} text-xl px-4 py-2 text-gray-600`,children:"Shop Details"})]}),a("div",{className:" flex justify-center items-center  overflow-hidden p-4 ",children:s("div",{class:"  w-full md:w-1/3 rounded-lg bg-[#fdfdfd] shadow-indigo-50 shadow-md",children:[s("div",{className:"bg-[#6c68f0] rounded-lg p-4 text-white",children:[s("p",{class:"text-md text-center font-semibold ",children:["Shop No. : ",a("span",{children:o(e==null?void 0:e.shop_no)})]}),a("p",{class:"text-center py-1",children:s("span",{class:"flex space-x-2 py-1 ",children:[a("span",{className:"text-sm text-center py-1 px-1",children:"Payable Amount :  "}),(e==null?void 0:e.payment_upto)==null?s(p,{children:[x&&a("span",{class:"text-md font-bold  px-2 w-full border shadow-md text-gray-700",children:s("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*j()]})}),!x&&a("span",{className:"text-xs text-red-300",children:"Since last payment is not available , Please select month "})]}):a(p,{children:f?a("span",{class:"text-md font-bold px-2 w-full border shadow-md text-gray-700",children:s("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*O()+`${e==null?void 0:e.arrear}`*1]})}):a("span",{class:"text-md font-bold px-2 w-full border shadow-md text-gray-700",children:s("p",{children:[" Rs. ",`${e==null?void 0:e.rate}`*`${h}`+`${e==null?void 0:e.arrear}`*1]})})})]})}),s("form",{onSubmit:d.handleSubmit,onChange:L,children:[s("div",{className:"flex space-x-2 py-1  ",children:[s("p",{class:"text-sm text-center py-1 px-1",children:["Payment Upto : ",a("span",{children:o(e==null?void 0:e.payment_upto)})]}),s(_,{isOpen:T,onRequestClose:b,style:J,contentLabel:"Example Modal",children:[(e==null?void 0:e.payment_upto)==null?s("div",{className:"flex space-x-2",children:[s("div",{children:[a("p",{className:"capitalize text-xs",children:"date from"}),a("input",{type:"date",name:"fromDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm",onChange:d.handleChange,value:d.values.fromDate})]}),s("div",{children:[a("p",{className:"capitalize text-xs",children:"date upto"}),a("input",{type:"date",name:"uptoDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm",onChange:d.handleChange,value:d.values.uptoDate})]})]}):s(p,{children:[a("p",{className:"capitalize text-xs",children:"select date"}),a("input",{type:"date",name:"ddmmyy",className:"px-2 text-gray-800 border border-gray-300 rounded-sm ",onChange:d.handleChange,value:d.values.ddmmyy})]}),a("div",{className:"mt-1 text-center",children:a("button",{className:"text-xs border bg-blue-500 py-1 px-2",onClick:b,children:"Confirm"})})]}),a("div",{className:"bg-gray-300 text-gray-600 py-1 px-4 rounded-sm capitalize text-xs mt-1",onClick:Y,children:"select month"})]}),a("div",{className:"flex space-x-1 py-1"}),a("div",{className:"",children:a("button",{type:"submit",className:"bg-amber-500 mt-1 py-2 px-2 rounded-sm capitalize text-xs w-full ",children:"Submit"})})]})]}),a("div",{class:"bg-white shadow-lg rounded-lg  w-full mt-4",children:a("div",{children:s("ul",{children:[s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["sairat Name :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.allottee)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Present occupier :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.present_occupier)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["Contact no. :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.contact_no)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["circle :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.circle_name)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["market :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.market_name)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["monthly rent :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.rate)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["last demand :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.last_payment_amount)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["paid upto :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.payment_upto)})]}),s("li",{className:"p-2 px-5 text-md text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["last pmt on :",a("span",{className:"px-4 text-md text-gray-500 uppercase",children:o(e==null?void 0:e.last_payment_date)})]})]})})})]})})]})]})}export{te as default};
