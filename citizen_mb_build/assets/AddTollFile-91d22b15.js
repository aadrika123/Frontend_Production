import{u as K,r as a,d as p,A as S,j as r,F as P,b as o,Q as b}from"./index-ebb70fb5.js";import{u as X}from"./formik.esm-24e7dac8.js";import{T as Y}from"./ThemeStyle-994f51bc.js";import{c as Z,a as c}from"./index.esm-815bb49a.js";import{R as D}from"./RentalApiList-42f87136.js";import{A as L}from"./ApiHeader2-b363f7b8.js";import{u as ee}from"./useCustomGeoLocation-66570bb9.js";import{r as T}from"./resizeImage-f1558408.js";function ge(){const{saveButtonColor:le,inputStyle:d,labelStyle:n,headingStyle:re,titleStyle:te,addButtonColor:se,formStyle:oe,titleColor:V}=Y(),{coords:u}=ee(),{api_UlbCircleList:I,api_locationByCircleList:R,api_addToll:A,api_getTollRateList:B}=D(),x=K();a.useState();const[U,m]=a.useState(!1);a.useState(),a.useState(""),a.useState(!1),a.useState("");const[ie,v]=a.useState(""),[w,_]=a.useState(""),[N,j]=a.useState(""),[f,H]=a.useState();a.useState();const[g,O]=a.useState(),[h,z]=a.useState(),E=Z({circle:c().required("This field is required"),market:c().required("This field is required"),vendorName:c().required("This field is required"),mobile:c().required("This field is required"),address:c().required("This field is required"),rate:c().required("This field is required"),remarks:c().required("This field is required"),photo1Path:c().required("This field is required"),photo2Path:c().required("This field is required"),longitude:c().required("This field is required"),latitude:c().required("This field is required")}),k=(e,t)=>{b.dismiss(),t=="success"&&b.success(e),t=="error"&&b.error(e)},l=X({initialValues:{circle:"",market:"",vendorName:"",mobile:"",address:"",rate:"",remarks:"",photo1Path:"",photo2Path:"",longitude:"",latitude:""},enableReinitialize:!0,onSubmit:e=>{console.log("shop data",e),G(e)},validationSchema:E}),M=e=>{console.log("target type",e.target.type),console.log("check box name",e.target.name);let t=e.target.name,s=e.target.value;t=="photo1Path"&&y(t,e.target.files[0]),t=="photo2Path"&&y(t,e.target.files[0]),t=="circle"&&J(s),v(file),t=="vendorName"&&l.setFieldValue("vendorName",allowCharacterInput(s,l.values.vendorName,50)),t=="mobile"&&l.setFieldValue("mobile",allowNumberInput(s,l.values.mobile,10)),t=="rate"&&l.setFieldValue("rate",allowNumberInput(s,l.values.rate,10)),t=="lastAmount"&&l.setFieldValue("lastAmount",allowNumberInput(s,l.values.lastAmount,10)),t=="presentLength"&&l.setFieldValue("presentLength",allowFloatInput(s,l.values.presentLength,10)),t=="presentBreadth"&&l.setFieldValue("presentBreadth",allowNumberInput(s,l.values.presentBreadth,10)),t=="presentHeight"&&l.setFieldValue("presentHeight",allowNumberInput(s,l.values.presentHeight,10)),t=="longitude"&&l.setFieldValue("longitude",allowFloatInput(s,l.values.longitude,10)),t=="latitude"&&l.setFieldValue("latitude",allowFloatInput(s,l.values.latitude,10))},y=async(e,t)=>{if(console.log("name ,fileData ",e,t),v(t),e=="photo1Path"){const s=await T(t),i=new File([s],t==null?void 0:t.name,{type:t==null?void 0:t.type});l.setFieldValue("latitude",u==null?void 0:u.latitude),l.setFieldValue("longitude",u==null?void 0:u.longitude),l.setFieldValue("photo1Path",i),_(URL.createObjectURL(t))}else{const s=await T(t),i=new File([s],t==null?void 0:t.name,{type:t==null?void 0:t.type});l.setFieldValue("photo2Path",i),j(URL.createObjectURL(t))}};console.log("form values",l.values);const G=e=>{console.log("data in form",e);let t,s;t=A,s={circleId:e==null?void 0:e.circle,marketId:e==null?void 0:e.market,vendorName:e==null?void 0:e.vendorName,address:e==null?void 0:e.address,rate:e==null?void 0:e.rate,mobile:e==null?void 0:e.mobile,photograph1:e==null?void 0:e.photo1Path,photograph2:e==null?void 0:e.photo2Path,longitude:e==null?void 0:e.longitude,latitude:e==null?void 0:e.latitude,remarks:e==null?void 0:e.remarks},console.log("request body",s),p.post(`${t}`,s,L()).then(function(i){var F,C,$,q;console.log("response after data submitted",(F=i==null?void 0:i.data)==null?void 0:F.message),((C=i==null?void 0:i.data)==null?void 0:C.status)===!0?(k("submitted successfully","success"),x(`/submitScreen/toll/${(q=($=i==null?void 0:i.data)==null?void 0:$.data)==null?void 0:q.tollNo}`)):(k("Failed to submit","error"),x("/municipal-rental"))}).catch(function(i){console.log("errorrr.... ",i)})},Q=()=>{p.post(I,{},L()).then(e=>{console.log("circle list 1",e.data),H(e.data.data),m(!1)}).catch(e=>{console.log(e),m(!1)})};a.useEffect(()=>{Q(),W()},[]);const W=()=>{p.post(B,{},S()).then(e=>{console.log("circle list 1",e.data),z(e.data.data),m(!1)}).catch(e=>{console.log(e),m(!1)})};console.log("rate data",h);const J=e=>{const t={circleId:e};p.post(R,t,S()).then(s=>{console.log("location list",s.data),s.data.status&&O(s.data.data)}).catch(s=>{console.log(s)})};return U?r(P,{children:r("div",{className:"min-h-screen"})}):r(P,{children:r("div",{className:" bg-[#eff2f0]",children:r("form",{onSubmit:l.handleSubmit,onChange:M,encType:"multipart/form-data",children:o("div",{className:"container mx-auto p-4",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 p-4 border-b",children:[o("div",{className:"col-span-6 flex space-x-3",children:[r("img",{src:"https://cdn-icons-png.flaticon.com/128/2981/2981313.png",className:"h-10 -mt-2"}),r("h1",{className:`font-semibold ${V} text-xl px-4 py-2 text-gray-600 -mt-2`,children:"Add Toll"})]}),r("div",{className:"col-span-6 flex space-x-3 justify-end"})]}),o("div",{className:"bg-[#fdfdfd]  rounded-2xl shadow-md p-2",children:[o("div",{className:"p-2",children:[o("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Circle"}),o("select",{...l.getFieldProps("circle"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),f==null?void 0:f.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.circle_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.circle&&l.errors.circle?l.errors.circle:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Market"}),o("select",{...l.getFieldProps("market"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),g==null?void 0:g.map(e=>r("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.market_name}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.market&&l.errors.market?l.errors.market:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${n} inline-block mb-2`,children:"Vendor name"}),r("input",{type:"text",name:"vendorName",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.vendorName}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.vendorName&&l.errors.vendorName?l.errors.vendorName:null})]})]}),o("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${n} inline-block mb-2`,children:"Mobile no."}),r("input",{type:"text",name:"mobile",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.mobile}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.mobile&&l.errors.mobile?l.errors.mobile:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Landmark"}),r("input",{type:"text",name:"address",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.address}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.address&&l.errors.address?l.errors.address:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Rate"}),o("select",{...l.getFieldProps("rate"),className:`${d} inline-block w-full relative`,children:[r("option",{selected:!0,children:"select"}),h==null?void 0:h.map(e=>o("option",{value:e==null?void 0:e.id,children:[e==null?void 0:e.toll_type," (Rs.",e==null?void 0:e.rate,")"]}))]}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.rate&&l.errors.rate?l.errors.rate:null})]})]}),o("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${n} inline-block mb-2`,children:"Longitude"}),r("input",{disabled:!0,type:"text",name:"longitude",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.longitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.longitude&&l.errors.longitude?l.errors.longitude:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${n} inline-block mb-2`,children:"Latitude"}),r("input",{disabled:!0,type:"text",name:"latitude",className:`${d} inline-block w-full relative`,onChange:l.handleChange,value:l.values.latitude}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.latitude&&l.errors.latitude?l.errors.latitude:null})]})]}),o("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Photo1 path"}),r("input",{type:"file",name:"photo1Path",className:`${d} inline-block w-full relative`,onChange:l.handleChange}),w&&r("img",{src:`${w}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo1Path&&l.errors.photo1Path?l.errors.photo1Path:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("label",{className:`${n} inline-block mb-2 `,children:"Photo2 path"}),r("input",{type:"file",name:"photo2Path",className:`${d} inline-block w-full relative`,onChange:l.handleChange}),N&&r("img",{src:`${N}`,alt:"Upload img",className:"h-20"}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.photo2Path&&l.errors.photo2Path?l.errors.photo2Path:null})]}),o("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[r("h1",{className:`${n} inline-block mb-2`,children:"Remarks"}),r("textarea",{name:"remarks",onChange:l.handleChange,value:l.values.remarks,className:"border  p-2 w-full h-24",placeholder:"Write your remark..."}),r("p",{className:"text-red-500 text-xs absolute",children:l.touched.remarks&&l.errors.remarks?l.errors.remarks:null})]})]})]}),r("div",{className:"pb-8",children:r("button",{type:"submit",className:"bg-green-500 px-7 py-2 text-white font-semibold rounded leading-5 shadow-lg w-full",children:"Save"})})]})]})})})})}export{ge as default};
