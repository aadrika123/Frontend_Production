import{k as e,r as s,j as t,B as a,A as i,z as n,e as l}from"./index-pyCvve81.js";import{P as r}from"./index-BN0jNiUj.js";import{C as c,c as d}from"./card-bx3Oa7DD.js";import{T as m,a as o,b as x,c as p,d as h,e as j}from"./table-vFocFjjc.js";import{A as u,a as f,b as v,c as y}from"./accordion-CutjTMIQ.js";import{B as N}from"./badge-Cy7OSyyd.js";import{u as g,b as S}from"./useCustomQuery-B1PLu8pZ.js";import{S as b}from"./Spinner-BDgO_yrk.js";import{A as C,a as T,b as w,c as L,d as D,e as I,f as A,g as k}from"./alert-dialog-DqRU8PY3.js";import{R as _}from"./refresh-cw-CuK8fDd8.js";import{I as E}from"./indian-rupee-CViZAfMh.js";import{F as P}from"./file-text-D21bLVNp.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),H={"80C":{name:"Section 80C",description:"PPF, LIC, ELSS, NSC, Tuition Fees, etc.",maxLimit:15e4},"80CCD":{name:"Section 80CCD(1B)",description:"Additional NPS Contribution",maxLimit:5e4},"80D":{name:"Section 80D",description:"Health Insurance Premium",maxLimit:1e5},"80E":{name:"Section 80E",description:"Education Loan Interest",maxLimit:null},"80G":{name:"Section 80G",description:"Donations to Charitable Organizations",maxLimit:null},SEC_24:{name:"Section 24(b)",description:"Home Loan Interest Deduction",maxLimit:2e5},HRA:{name:"HRA Exemption",description:"House Rent Allowance",maxLimit:null},"80TTA":{name:"Section 80TTA",description:"Savings Account Interest",maxLimit:1e4},"80U":{name:"Section 80U",description:"Disability Deduction",maxLimit:125e3},"80DD":{name:"Section 80DD",description:"Dependent Disability",maxLimit:125e3}},M=e=>null==e?"No Limit":`â‚¹${e.toLocaleString("en-IN")}`;function R(){var e;const r=g({}),[R,z]=s.useState(!1),[B,O]=s.useState(!1),U=S({api:i.getInvestmentTypes,key:"getInvestmentTypes",options:{enabled:!0}}),V=(null==(e=U.data)?void 0:e.data)||[],G=V.reduce((e,s)=>(e[s.section_code]||(e[s.section_code]=[]),e[s.section_code].push(s),e),{}),Q=Object.keys(G).sort();return t.jsxs("main",{className:"grid items-start",children:[t.jsx(C,{open:R,onOpenChange:z,children:t.jsxs(T,{children:[t.jsxs(w,{children:[t.jsx(L,{children:"Seed Investment Types"}),t.jsx(D,{children:"This will populate the investment type masters with default values for all tax sections (80C, 80D, 80E, etc.). Existing entries will be preserved."})]}),t.jsxs(I,{children:[t.jsx(A,{children:"Cancel"}),t.jsx(k,{onClick:async()=>{var e,s,t;O(!0);try{const a=await r.mutateAsync({api:i.seedInvestmentTypes,data:{}});(null==(e=null==a?void 0:a.data)?void 0:e.success)?(n.success((null==(s=null==a?void 0:a.data)?void 0:s.message)||"Investment types seeded successfully"),U.refetch(),z(!1)):n.error((null==(t=null==a?void 0:a.data)?void 0:t.message)||"Failed to seed investment types")}catch(a){n.error(l(a))}finally{O(!1)}},disabled:B,children:B?"Seeding...":"Seed Investment Types"})]})]})}),t.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[t.jsxs("div",{className:"flex w-full flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(N,{variant:"outline",className:"text-sm",children:["Total Types: ",V.length]}),t.jsxs(N,{variant:"outline",className:"text-sm",children:["Sections: ",Q.length]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(a,{variant:"outline",onClick:()=>U.refetch(),children:[t.jsx(_,{className:"mr-2 h-4 w-4"}),"Refresh"]}),t.jsxs(a,{onClick:()=>z(!0),children:[t.jsx(F,{className:"mr-2 h-4 w-4"}),"Seed Default Types"]})]})]}),(null==U?void 0:U.isLoading)?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(b,{})}):0===V.length?t.jsx(c,{children:t.jsxs(d,{className:"py-12 text-center",children:[t.jsx(F,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),t.jsx("h3",{className:"text-lg font-semibold",children:"No Investment Types Found"}),t.jsx("p",{className:"text-muted-foreground",children:'Click "Seed Default Types" to populate the investment type masters.'}),t.jsxs(a,{className:"mt-4",onClick:()=>z(!0),children:[t.jsx(F,{className:"mr-2 h-4 w-4"}),"Seed Default Types"]})]})}):t.jsx(u,{type:"multiple",defaultValue:Q,className:"space-y-4",children:Q.map(e=>{const s=G[e],a=H[e]||{name:e,description:"",maxLimit:null};return t.jsxs(f,{value:e,className:"rounded-lg border bg-card",children:[t.jsx(v,{className:"px-4 hover:no-underline",children:t.jsxs("div",{className:"flex w-full items-center justify-between pr-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(N,{variant:"secondary",children:e}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-semibold",children:a.name}),t.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[t.jsx(E,{className:"h-4 w-4"}),M(a.maxLimit)]}),t.jsxs(N,{variant:"outline",children:[s.length," types"]})]})]})}),t.jsx(y,{className:"px-4 pb-4",children:t.jsxs(m,{children:[t.jsx(o,{children:t.jsxs(x,{children:[t.jsx(p,{children:"#"}),t.jsx(p,{children:"Code"}),t.jsx(p,{children:"Investment Name"}),t.jsx(p,{children:"Max Limit"}),t.jsx(p,{children:"Proof Types"}),t.jsx(p,{children:"Status"})]})}),t.jsx(h,{children:s.sort((e,s)=>e.display_order-s.display_order).map((e,s)=>t.jsxs(x,{children:[t.jsx(j,{children:s+1}),t.jsx(j,{children:t.jsx(N,{variant:"outline",children:e.investment_code})}),t.jsx(j,{className:"font-medium",children:e.investment_name}),t.jsx(j,{children:M(e.max_limit)}),t.jsx(j,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:(e.proof_types_accepted||[]).map(e=>t.jsxs(N,{variant:"secondary",className:"text-xs",children:[t.jsx(P,{className:"mr-1 h-3 w-3"}),e.replace("_"," ")]},e))})}),t.jsx(j,{children:t.jsx(N,{variant:1===e.status?"default":"secondary",children:1===e.status?"Active":"Inactive"})})]},e.id))})]})})]},e)})})]})]})}function z(){return t.jsx(r,{title:"Investment Type Masters",subTitle:"Manage investment types for tax declarations",children:t.jsx("div",{className:"py-12",children:t.jsx(R,{})})})}export{z as default};
