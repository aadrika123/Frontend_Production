import{k as e,w as s,f as l,r as a,h as n,R as t,j as i,B as r}from"./index-pyCvve81.js";import{P as d,D as c,e as o,f as x,h as m}from"./index-BN0jNiUj.js";import{C as h,a as j,d as u,c as p}from"./card-bx3Oa7DD.js";import{B as f}from"./badge-Cy7OSyyd.js";import{T as N,a as y,b as g,c as v,d as b,e as w}from"./table-vFocFjjc.js";import{S as _,a as S,b as D,c as A,d as P}from"./select-BIraycn9.js";import{S as k}from"./separator-DS4WD8aU.js";import{b as T}from"./useCustomQuery-B1PLu8pZ.js";import{R as C}from"./refresh-cw-CuK8fDd8.js";import{T as $}from"./trending-up-BlDC2PXP.js";import{I as R}from"./indian-rupee-CViZAfMh.js";import{F as E}from"./file-text-D21bLVNp.js";import{C as I}from"./calendar-DxovkaVF.js";import{E as F}from"./eye-DTo8qJux.js";import{P as L}from"./printer-BbCqTDaM.js";import"./check-BHEPqzdD.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),B=()=>{var e,B,G;const{user:M}=s(),z=l(String(null==M?void 0:M._id)),H=(new Date).getFullYear(),[V,O]=a.useState(H.toString()),[q,Q]=a.useState(null),[U,Z]=a.useState(null),[J,K]=a.useState(!1),W=a.useRef(null),{data:X,refetch:ee,isLoading:se}=T({api:`${n.getPaySlipList}?emp_id=${z}&year=${V}`,key:`salarySlips-${V}`,options:{enabled:!!z}}),le=(null==(e=null==X?void 0:X.data)?void 0:e.salary_slips)||[],ae=null==(B=null==X?void 0:X.data)?void 0:B.employee,ne=(null==(G=null==X?void 0:X.data)?void 0:G.summary)||{total_gross:0,total_deductions:0,total_net:0,total_records:0},{data:te,refetch:ie}=T({api:q?`${n.getPaySlipById}?id=${q.id}`:"",key:`salarySlipDetail-${(null==q?void 0:q.id)||"none"}`,options:{enabled:!!(null==q?void 0:q.id)}});t.useEffect(()=>{(null==te?void 0:te.data)&&Z(te.data)},[te]);const re=e=>null==e?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),de=Array.from({length:5},(e,s)=>H-s),ce=e=>{switch(null==e?void 0:e.toLowerCase()){case"paid":return i.jsx(f,{className:"bg-green-100 text-green-700 hover:bg-green-100",children:"Paid"});case"processed":return i.jsx(f,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:"Processed"});case"pending":return i.jsx(f,{className:"bg-yellow-100 text-yellow-700 hover:bg-yellow-100",children:"Pending"});default:return i.jsx(f,{variant:"outline",children:e||"N/A"})}};return i.jsx(d,{title:"Salary Slips",children:i.jsxs("div",{className:"container mx-auto space-y-6 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Salary Slips"}),i.jsx("p",{className:"text-muted-foreground",children:"View and download your monthly salary slips"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(_,{value:V,onValueChange:O,children:[i.jsx(S,{className:"w-[120px]",children:i.jsx(D,{placeholder:"Year"})}),i.jsx(A,{children:de.map(e=>i.jsx(P,{value:e.toString(),children:e},e))})]}),i.jsxs(r,{variant:"outline",size:"sm",onClick:()=>ee(),children:[i.jsx(C,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[i.jsxs(h,{children:[i.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(u,{className:"text-sm font-medium",children:"Total Gross"}),i.jsx($,{className:"h-4 w-4 text-green-600"})]}),i.jsxs(p,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:re(ne.total_gross)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Year to date"})]})]}),i.jsxs(h,{children:[i.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(u,{className:"text-sm font-medium",children:"Total Deductions"}),i.jsx(Y,{className:"h-4 w-4 text-red-600"})]}),i.jsxs(p,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:re(ne.total_deductions)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Year to date"})]})]}),i.jsxs(h,{children:[i.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(u,{className:"text-sm font-medium",children:"Net Received"}),i.jsx(R,{className:"h-4 w-4 text-blue-600"})]}),i.jsxs(p,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re(ne.total_net)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Year to date"})]})]}),i.jsxs(h,{children:[i.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(u,{className:"text-sm font-medium",children:"Slips Generated"}),i.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(p,{children:[i.jsx("div",{className:"text-2xl font-bold",children:ne.total_records}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Months in ",V]})]})]})]}),i.jsxs(h,{children:[i.jsx(j,{children:i.jsxs(u,{className:"flex items-center gap-2",children:[i.jsx(I,{className:"h-5 w-5"}),"Monthly Salary Slips - ",V]})}),i.jsx(p,{children:se?i.jsx("div",{className:"py-8 text-center",children:"Loading..."}):0===le.length?i.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[i.jsx(E,{className:"mx-auto mb-4 h-12 w-12 opacity-50"}),i.jsxs("p",{children:["No salary slips found for ",V]})]}):i.jsxs(N,{children:[i.jsx(y,{children:i.jsxs(g,{children:[i.jsx(v,{children:"Month"}),i.jsx(v,{className:"text-right",children:"Gross Salary"}),i.jsx(v,{className:"text-right",children:"Deductions"}),i.jsx(v,{className:"text-right",children:"Net Salary"}),i.jsx(v,{children:"Status"}),i.jsx(v,{className:"text-right",children:"Actions"})]})}),i.jsx(b,{children:le.map(e=>i.jsxs(g,{children:[i.jsxs(w,{className:"font-medium",children:[e.month_name," ",e.year]}),i.jsx(w,{className:"text-right",children:re(e.gross_salary)}),i.jsx(w,{className:"text-right text-red-600",children:re(e.total_deductions)}),i.jsx(w,{className:"text-right font-semibold text-green-600",children:re(e.net_salary)}),i.jsx(w,{children:ce(e.payment_status)}),i.jsx(w,{className:"text-right",children:i.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>(e=>{Q(e),K(!0),ie()})(e),children:[i.jsx(F,{className:"mr-1 h-4 w-4"}),"View"]})})]},e.id))})]})})]}),i.jsx(c,{open:J,onOpenChange:K,children:i.jsxs(o,{className:"max-h-[90vh] max-w-3xl overflow-y-auto",children:[i.jsx(x,{children:i.jsxs(m,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Salary Slip - ",null==U?void 0:U.month_name," ",null==U?void 0:U.year]}),i.jsxs(r,{variant:"outline",size:"sm",onClick:()=>(()=>{if(W.current){const e=W.current.innerHTML,s=window.open("","","width=800,height=600");s&&(s.document.write(`\n          <html>\n            <head>\n              <title>Salary Slip - ${null==U?void 0:U.month_name} ${null==U?void 0:U.year}</title>\n              <style>\n                body { font-family: Arial, sans-serif; padding: 20px; }\n                .text-muted-foreground { color: #6b7280; }\n                .font-semibold { font-weight: 600; }\n                .font-bold { font-weight: 700; }\n              </style>\n            </head>\n            <body>${e}</body>\n          </html>\n        `),s.document.close(),s.print())}})(),children:[i.jsx(L,{className:"mr-2 h-4 w-4"}),"Print"]})]})}),i.jsxs("div",{ref:W,className:"p-4",children:[i.jsxs("div",{className:"mb-6 border-b pb-4 text-center",children:[i.jsx("h2",{className:"text-xl font-bold",children:"SALARY SLIP"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["For the month of ",null==U?void 0:U.month_name," ",null==U?void 0:U.year]})]}),i.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Employee Name:"})," ",i.jsx("strong",{children:(null==U?void 0:U.emp_name)||(null==ae?void 0:ae.emp_name)})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Employee Code:"})," ",i.jsx("strong",{children:(null==U?void 0:U.emp_code)||(null==ae?void 0:ae.emp_code)})]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Department:"})," ",(null==U?void 0:U.department_name)||(null==ae?void 0:ae.department_name)]})]}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Designation:"})," ",(null==U?void 0:U.designation)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"PAN:"})," ",(null==U?void 0:U.pan_no)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Bank A/C:"})," ",(null==U?void 0:U.bank_account_no)||"-"]})]})]}),i.jsx(k,{className:"my-4"}),i.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-3 font-semibold text-green-700",children:"Earnings"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Basic Pay"}),i.jsx("span",{children:re(null==q?void 0:q.basic_pay)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Dearness Allowance (DA)"}),i.jsx("span",{children:re(null==q?void 0:q.da_amount)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"House Rent Allowance (HRA)"}),i.jsx("span",{children:re(null==q?void 0:q.hra_amount)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Other Allowances"}),i.jsx("span",{children:re(null==q?void 0:q.other_allowances)})]}),i.jsx(k,{className:"my-2"}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Gross Salary"}),i.jsx("span",{className:"text-green-600",children:re(null==q?void 0:q.gross_salary)})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-3 font-semibold text-red-700",children:"Deductions"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Provident Fund (Employee)"}),i.jsx("span",{children:re(null==q?void 0:q.pf_employee)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Professional Tax"}),i.jsx("span",{children:re(null==q?void 0:q.professional_tax)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Income Tax (TDS)"}),i.jsx("span",{children:re(null==q?void 0:q.income_tax)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"ESI (Employee)"}),i.jsx("span",{children:re(null==q?void 0:q.esi_employee)})]}),i.jsx(k,{className:"my-2"}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Total Deductions"}),i.jsx("span",{className:"text-red-600",children:re(null==q?void 0:q.total_deductions)})]})]})]})]}),i.jsx(k,{className:"my-6"}),i.jsx("div",{className:"rounded-lg bg-blue-50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-lg font-semibold",children:"Net Salary"}),i.jsx("span",{className:"text-2xl font-bold text-blue-600",children:re(null==q?void 0:q.net_salary)})]})}),i.jsx("p",{className:"mt-6 text-center text-xs text-muted-foreground",children:"This is a computer generated salary slip and does not require a signature."})]})]})})]})})};export{B as default};
