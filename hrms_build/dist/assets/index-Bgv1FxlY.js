import{k as e,r as a,j as s,h as t,z as r}from"./index-pyCvve81.js";import{P as i}from"./index-BN0jNiUj.js";import{a as l,o as n,c as o,b as m,f as d}from"./yup-C9jKbjb2.js";import{F as c}from"./datetime-picker-CYDyb3rk.js";import{R as x}from"./RHFTextField-oGT6ZvhB.js";import{R as p}from"./RHFTextArea-DiyrAPVA.js";import{B as j}from"./ButtonLoading-C9GHL4iQ.js";import{R as g}from"./RHFSelectField-C9SERau7.js";import"./input-DWARB5Y9.js";import"./switch-Br0yiZF5.js";import"./checkbox-BD1KnAu3.js";import"./label-D5MVRa8l.js";import{R as h}from"./DateAndTimePicker-CD_49ExZ.js";import{S as u}from"./separator-DS4WD8aU.js";import{C as v,a as f,d as b,b as y,c as N}from"./card-bx3Oa7DD.js";import{u as R}from"./useCustomQuery-B1PLu8pZ.js";import{B as _}from"./badge-Cy7OSyyd.js";import{C as k}from"./calendar-DxovkaVF.js";import{F as w}from"./file-text-D21bLVNp.js";import"./select-BIraycn9.js";import"./check-BHEPqzdD.js";import"./format-BkNqQ0tt.js";import"./chevron-right-CT2wJ-fK.js";import"./clock-DqQh3QaC.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=e("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),T=o().shape({emp_id:d().required("Employee ID is required").positive(),date_of_leaving:m().required("Date of leaving is required"),leaving_reason:m().required("Reason for leaving is required"),leaving_remarks:m().nullable()}),D=[{value:"resignation",label:"Resignation"},{value:"termination",label:"Termination"},{value:"retirement",label:"Retirement"},{value:"death",label:"Death"},{value:"transfer",label:"Transfer"},{value:"other",label:"Other"}];function F(){const e=R({}),[i,o]=a.useState(null),m=l({defaultValues:{emp_id:void 0,date_of_leaving:"",leaving_reason:"",leaving_remarks:""},resolver:n(T)});return s.jsxs("main",{className:"grid items-start gap-4 lg:grid-cols-2",children:[s.jsxs(v,{children:[s.jsxs(f,{children:[s.jsxs(b,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-5 w-5"}),"Record Employee Leaving"]}),s.jsx(y,{children:"Record resignation, termination, retirement, or other leaving scenarios. Final settlement salary will be pro-rated based on the leaving date."})]}),s.jsx(N,{children:s.jsx(c,{methods:m,onSubmit:m.handleSubmit(async a=>{var s,i,l,n,m;try{const d=await e.mutateAsync({api:null==(s=t)?void 0:s.setEmployeeLeaving,data:a});(null==(i=d.data)?void 0:i.success)?(r.success((null==(l=null==d?void 0:d.data)?void 0:l.message)||"Employee leaving date set successfully"),o(null==(n=d.data)?void 0:n.data)):r.error((null==(m=d.data)?void 0:m.message)||"Failed to set employee leaving date")}catch(d){r.error("Failed to set employee leaving date")}}),children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:[s.jsx("div",{children:s.jsx(x,{label:"Employee ID",name:"emp_id",placeholder:"Enter Employee ID",type:"number"})}),s.jsx("div",{children:s.jsx(h,{name:"date_of_leaving",label:"Date of Leaving",placeholder:"Select leaving date"})}),s.jsx("div",{children:s.jsx(g,{label:"Reason for Leaving",name:"leaving_reason",data:D})}),s.jsx("div",{children:s.jsx(p,{label:"Remarks (Optional)",name:"leaving_remarks",placeholder:"Enter additional remarks"})}),s.jsxs("div",{children:[s.jsx(u,{className:"my-2"}),s.jsx(j,{isLoading:m.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Record Leaving"})]})]})})})]}),i&&s.jsxs(v,{className:"border-orange-200 bg-orange-50",children:[s.jsx(f,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-5 w-5 text-orange-500"}),s.jsx(b,{className:"text-orange-700",children:"Employee Leaving Recorded"})]})}),s.jsx(N,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Employee ID:"}),s.jsx("span",{className:"font-semibold",children:i.emp_id})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-1 text-slate-600",children:[s.jsx(k,{className:"h-4 w-4"}),"Date of Leaving:"]}),s.jsx("span",{className:"font-semibold",children:i.date_of_leaving})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Reason:"}),s.jsx(_,{className:(e=>{switch(e){case"resignation":return"bg-yellow-100 text-yellow-700";case"termination":return"bg-red-100 text-red-700";case"retirement":return"bg-blue-100 text-blue-700";case"death":return"bg-gray-100 text-gray-700";case"transfer":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-700"}})(i.leaving_reason),children:(d=i.leaving_reason,{resignation:"Resignation",termination:"Termination",retirement:"Retirement",death:"Death",transfer:"Transfer",other:"Other"}[d]||d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Status:"}),s.jsx(_,{variant:"outline",className:"bg-gray-100 text-gray-700",children:"Inactive"})]}),i.leaving_remarks&&s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsxs("span",{className:"flex items-center gap-1 text-slate-600",children:[s.jsx(w,{className:"h-4 w-4"}),"Remarks:"]}),s.jsx("p",{className:"mt-1 text-sm font-medium",children:i.leaving_remarks})]}),s.jsx("div",{className:"mt-4 rounded-lg bg-amber-100 p-3",children:s.jsxs("p",{className:"text-sm text-amber-800",children:[s.jsx("strong",{children:"Note:"})," The employee's final settlement salary will be automatically pro-rated based on the leaving date. Any pending arrears will be included in the final settlement."]})})]})})]})]});var d}function L(){return s.jsx(i,{title:"Employee Leaving",subTitle:"Record Employee Resignation/Termination/Retirement",children:s.jsx("div",{className:"py-12",children:s.jsx(F,{})})})}export{L as default};
