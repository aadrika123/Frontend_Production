import{h as e,f as s,r as i,j as t,z as a,B as l,e as r}from"./index-pyCvve81.js";import{P as n}from"./index-BN0jNiUj.js";import{h as d}from"./moment-CBOc1lqT.js";import{C as o,a as c,b as p,c as m}from"./card-bx3Oa7DD.js";import{T as u,a as j,b as h,c as x,d as v,e as y}from"./table-vFocFjjc.js";import{u as f,b as g}from"./useCustomQuery-B1PLu8pZ.js";import{P as S}from"./index-By2ZT1Is.js";import{S as E}from"./separator-DS4WD8aU.js";import{S as b}from"./index-cYG0LkNy.js";import{S as N}from"./Spinner-BDgO_yrk.js";import{a as T,o as w,c as k,b as _}from"./yup-C9jKbjb2.js";import{F as A}from"./datetime-picker-CYDyb3rk.js";import{R as L}from"./RHFTextField-oGT6ZvhB.js";import{R as $}from"./RHFTextArea-DiyrAPVA.js";import{B as C}from"./ButtonLoading-C9GHL4iQ.js";import"./select-BIraycn9.js";import"./input-DWARB5Y9.js";import"./switch-Br0yiZF5.js";import"./checkbox-BD1KnAu3.js";import"./label-D5MVRa8l.js";import{D as F}from"./index-CDBXPzA7.js";import{t as P}from"./switch-Qnvyg-ta.js";import{L as q}from"./loader-circle-DXaVvWTg.js";import"./calendar-DxovkaVF.js";import"./format-BkNqQ0tt.js";import"./chevron-right-CT2wJ-fK.js";import"./clock-DqQh3QaC.js";import"./check-BHEPqzdD.js";const B=k().shape({emp_type:_().required("Employee Type is required"),description:_().required("Description is required")});function D({open:l,setOpen:r,title:n,id:d,edit:o,setEdit:c,refetch:p}){var m;const u=f({}),{data:j,isFetching:h}=g({api:`${null==(m=e)?void 0:m.getEmpTypeById}/${s(String(d))}`,key:"getEmpTypeById",options:{enabled:o}}),x=T({defaultValues:{emp_type:"",description:""},resolver:w(B)});return i.useEffect(()=>{var e,s;o&&j?x.reset({emp_type:(null==(e=null==j?void 0:j.data)?void 0:e.emp_type)||"",description:(null==(s=null==j?void 0:j.data)?void 0:s.description)||""}):x.reset({emp_type:"",description:""})},[o,j]),t.jsx(F,{open:l,setOpen:r,title:n,setEdit:c,edit:o,isLoading:h,children:t.jsx(A,{methods:x,onSubmit:x.handleSubmit(async i=>{var t,l,n,m,j,h,v,y;try{if(o&&i){const r=await u.mutateAsync({api:`${null==(t=e)?void 0:t.updateEmpType}`,data:{id:s(String(d)),...i}});(null==(l=r.data)?void 0:l.success)?a.success(null==(n=null==r?void 0:r.data)?void 0:n.message):a.error((null==(m=r.data)?void 0:m.message)||"Employee Type not updated successfully")}else{const s=await u.mutateAsync({api:null==(j=e)?void 0:j.createEmpType,data:i});(null==(h=s.data)?void 0:h.success)?a.success(null==(v=null==s?void 0:s.data)?void 0:v.message):a.error((null==(y=s.data)?void 0:y.message)||"Employee Type not created successfully"),x.reset({emp_type:"",description:""})}r(!1),c(!1),p()}catch(f){}}),children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(L,{name:"emp_type",placeholder:"Enter Employee Type",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx($,{name:"description",placeholder:"Enter your description",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx(E,{}),t.jsx("div",{children:t.jsx(C,{isLoading:x.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function R(){var n,T,w,k,_,A;const L=f({}),[$,C]=i.useState(1),[F,B]=i.useState(10),[R,Y]=i.useState(""),[V,M]=i.useState(!1),[O,H]=i.useState(""),[I,Q]=i.useState(!1),[z,U]=i.useState(null),W=g({api:`${e.getAllEmpTypes}?page=${$}&limit=${F}&q=${R}`,key:"getAllEmpTypes",value:[$,F],options:{enabled:!0}});return t.jsxs("main",{className:"grid items-start",children:[t.jsx(D,{open:V,setOpen:M,title:I?"Edit Employee Type":"Add Employee Type",id:O,edit:I,setEdit:Q,refetch:W.refetch}),t.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[t.jsxs("div",{className:"flex w-full justify-between gap-2",children:[t.jsx("div",{children:t.jsx(b,{search:R,setSearch:Y,refetch:W.refetch,isFetching:null==W?void 0:W.isLoading})}),t.jsx("div",{children:t.jsx(l,{className:"flex items-center gap-2",onClick:()=>M(!0),children:"Add New"})})]}),t.jsxs(o,{children:[t.jsx(c,{className:"px-7",children:t.jsxs(p,{children:["Employee Type List (",null==(T=null==(n=null==W?void 0:W.data)?void 0:n.pagination)?void 0:T.total,")"]})}),t.jsx(m,{children:W.isLoading?t.jsx("div",{className:"flex h-32 items-center justify-center",children:t.jsx(N,{})}):t.jsxs(t.Fragment,{children:[t.jsxs(u,{children:[t.jsx(j,{children:t.jsxs(h,{children:[t.jsx(x,{className:"",children:"#"}),t.jsx(x,{className:"",children:"Employee Type"}),t.jsx(x,{className:"",children:"Description"}),t.jsx(x,{className:"",children:"Created at"}),t.jsx(x,{className:"",children:"Status"}),t.jsx(x,{children:"Action"})]})}),t.jsx(v,{children:null==(k=null==(w=null==W?void 0:W.data)?void 0:w.data)?void 0:k.map((i,n)=>t.jsxs(h,{children:[t.jsx(y,{children:n+1}),t.jsx(y,{children:null==i?void 0:i.emp_type}),t.jsx(y,{children:null==i?void 0:i.description}),t.jsx(y,{children:d(null==i?void 0:i.created_at).format("DD-MM-YYYY")}),t.jsx(y,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(P,{checked:1==(null==i?void 0:i.status),onChange:()=>(async i=>{var t,l,n,d;U(i);try{const r=await L.mutateAsync({api:`${null==(t=e)?void 0:t.updateEmpTypeStatus}`,data:{id:s(String(i))}});(null==(l=null==r?void 0:r.data)?void 0:l.success)?(W.refetch(),a.success(null==(n=null==r?void 0:r.data)?void 0:n.message)):a.error(null==(d=r.data)?void 0:d.message)}catch(o){a.error(r(o))}finally{U(null)}})(String(null==i?void 0:i.id)),disabled:z===String(null==i?void 0:i.id),className:((null==i?void 0:i.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[t.jsx("span",{className:"sr-only",children:"Enable notifications"}),t.jsx("span",{className:((null==i?void 0:i.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),z===String(null==i?void 0:i.id)&&t.jsx(q,{className:"h-4 w-4 animate-spin text-primary"})]})}),t.jsx(y,{children:t.jsx(l,{className:"bg-primary",onClick:()=>{return e=String(null==i?void 0:i.id),Q(!0),M(!0),void H(e);var e},children:"Edit"})})]},null==i?void 0:i.id))})]}),t.jsx(E,{className:"mb-2 mt-4"}),t.jsx("div",{className:"flex w-full justify-end",children:t.jsx(S,{page:$,limit:F,totalPages:null==(A=null==(_=null==W?void 0:W.data)?void 0:_.pagination)?void 0:A.totalPages,setPage:C,setLimit:B})})]})})]})]})]})}function Y(){return t.jsx(n,{title:"Employee Type List",subTitle:"Manage all the Employee types here",children:t.jsx("div",{className:"py-12",children:t.jsx(R,{})})})}export{Y as default};
