import{r as e,j as s,al as a}from"./vendor-RyuIgj66.js";import{u as n,b as t}from"./useCustomQuery-DTB6aAiD.js";import{c as l,t as i,g as r,B as d,f as c}from"./index-ey2GEmQz.js";import{C as o,a as m,d as x,b as u,c as p}from"./card-u7M7FP5y.js";import{I as h}from"./input-DlX9dTT0.js";import{L as j}from"./label-BcY3kv5U.js";import{B as f}from"./badge-DbWnzWn2.js";import{A as v,b as g,a as N}from"./alert-CtVSl8Dx.js";import{S as y,a as b,b as _,c as S,d as P}from"./select-8PAfYjod.js";import{T as w,a as C,b as D,c as I,d as E,e as A}from"./table-B_npepsp.js";import{A as T,a as R,b as F,c as L,d as U,e as $,f as k,g as H}from"./alert-dialog-DDS3Mbsz.js";import{A as O,a as q,b as V,c as Y}from"./accordion-sVAat7fC.js";import{T as z,a as G,b as M,c as B}from"./tabs-BzFjL9ks.js";import{T as J}from"./textarea-CIMcDPG7.js";import{S as Q}from"./Spinner-BwGzvoRj.js";import{F as W,a4 as X,$ as Z,al as K,aC as ee,N as se,_ as ae,aD as ne,s as te,v as le,az as ie,a9 as re,Z as de,aE as ce,T as oe}from"./icons-CxCh8mm_.js";import{P as me}from"./index-DFF4_m_G.js";import"./query-BH9sOW2X.js";import"./ui-B3c1eQmf.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const xe=e=>e?`₹${e.toLocaleString("en-IN")}`:"₹0",ue=e=>{const a={pending:{variant:"secondary",icon:s.jsx(X,{className:"mr-1 h-3 w-3"}),label:"Pending Review"},approved:{variant:"default",icon:s.jsx(ae,{className:"mr-1 h-3 w-3"}),label:"Approved"},rejected:{variant:"destructive",icon:s.jsx(Z,{className:"mr-1 h-3 w-3"}),label:"Rejected"},needs_clarification:{variant:"outline",icon:s.jsx(ce,{className:"mr-1 h-3 w-3"}),label:"Needs Clarification"}},{variant:n,icon:t,label:l}=a[e]||a.pending;return s.jsxs(f,{variant:n,className:"flex items-center",children:[t," ",l]})},pe=e=>{const{variant:a,label:n}={VERIFIED:{variant:"default",label:"Verified"},UPLOADED:{variant:"secondary",label:"Uploaded"},INCOMPLETE:{variant:"destructive",label:"Incomplete"}}[e]||{variant:"outline",label:e};return s.jsx(f,{variant:a,children:n})},he=[{code:"80C",name:"Section 80C",description:"PPF, LIC, ELSS, etc.",limit:15e4},{code:"80CCD",name:"Section 80CCD(1B)",description:"NPS Additional",limit:5e4},{code:"80D",name:"Section 80D",description:"Health Insurance",limit:1e5},{code:"80E",name:"Section 80E",description:"Education Loan Interest",limit:null},{code:"80G",name:"Section 80G",description:"Donations",limit:null},{code:"SEC_24",name:"Section 24",description:"Home Loan Interest",limit:2e5},{code:"HRA",name:"HRA Exemption",description:"Rent Receipts",limit:null},{code:"80TTA",name:"Section 80TTA",description:"Savings Interest",limit:1e4}],je={"80C":[{code:"PPF",name:"Public Provident Fund (PPF)"},{code:"EPF",name:"Employee Provident Fund (EPF)"},{code:"ELSS",name:"ELSS Mutual Funds"},{code:"LIC",name:"Life Insurance Premium (LIC)"},{code:"NSC",name:"National Savings Certificate (NSC)"},{code:"TUITION",name:"Children Tuition Fees"},{code:"HOME_LOAN_PRINCIPAL",name:"Home Loan Principal"},{code:"SSY",name:"Sukanya Samriddhi Yojana"},{code:"TAX_SAVER_FD",name:"5 Year Tax Saver FD"},{code:"ULIP",name:"ULIP"},{code:"OTHER",name:"Other 80C Investments"}],"80CCD":[{code:"NPS_SELF",name:"NPS Self Contribution"}],"80D":[{code:"HEALTH_SELF",name:"Health Insurance - Self & Family"},{code:"HEALTH_PARENTS",name:"Health Insurance - Parents"},{code:"PREVENTIVE",name:"Preventive Health Check-up"}],"80E":[{code:"EDU_LOAN",name:"Education Loan Interest"}],"80G":[{code:"DONATION_100",name:"Donation (100% Deduction)"},{code:"DONATION_50",name:"Donation (50% Deduction)"}],SEC_24:[{code:"HOME_LOAN_INTEREST",name:"Home Loan Interest"}],HRA:[{code:"RENT_RECEIPT",name:"Rent Receipt"}],"80TTA":[{code:"SAVINGS_INTEREST",name:"Savings Account Interest"}]};function fe(){var me,fe,ve,ge,Ne,ye,be,_e,Se,Pe,we,Ce,De,Ie,Ee;const{user:Ae}=l(),Te=n({}),Re=e.useRef(null),Fe=e.useRef(null),[Le]=e.useState((()=>{const e=new Date,s=e.getFullYear();return e.getMonth()+1>=4?`${s}-${(s+1).toString().slice(-2)}`:`${s-1}-${s.toString().slice(-2)}`})()),[Ue,$e]=e.useState(!1),[ke,He]=e.useState(!1),[Oe,qe]=e.useState(null),[Ve,Ye]=e.useState("dashboard"),[ze,Ge]=e.useState(""),[Me,Be]=e.useState(""),[Je,Qe]=e.useState(""),[We,Xe]=e.useState(""),[Ze,Ke]=e.useState(null),[es,ss]=e.useState(!1),[as,ns]=e.useState(""),[ts,ls]=e.useState(null),[is,rs]=e.useState(!1),[ds,cs]=e.useState(null),[os,ms]=e.useState(!1),xs=t({api:`${i.getTaxDeclaration}/me?financial_year=${Le}`,key:"getMyTaxDeclaration",value:[Le],options:{enabled:!!Ae}}),us=null==(me=xs.data)?void 0:me.data,ps=t({api:`${i.getProofCompletionStatus}?financial_year=${Le}`,key:"getProofCompletionStatus",value:[Le],options:{enabled:!!Ae&&!!(null==us?void 0:us.id)}}),hs=null==(fe=ps.data)?void 0:fe.data,js=t({api:(null==us?void 0:us.id)?`${i.getRequiredProofs}/${us.id}`:"",key:"getRequiredProofs",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),fs=null==(ve=js.data)?void 0:ve.data,vs=t({api:(null==us?void 0:us.id)?`${i.getProofSectionSummary}/${us.id}`:"",key:"getProofSectionSummary",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),gs=null==(ge=vs.data)?void 0:ge.data,Ns=t({api:(null==us?void 0:us.id)?`${i.getInvestmentProofs}/${us.id}`:"",key:"getMyProofs",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),ys=(null==(ye=null==(Ne=Ns.data)?void 0:Ne.data)?void 0:ye.proofs)||[],bs=us&&["approved","partially_verified","verified"].includes(us.verification_status)&&!us.declaration_locked,_s=()=>{Ge(""),Be(""),Qe(""),Xe(""),Ke(null),Re.current&&(Re.current.value="")},Ss=()=>{He(!1),ns(""),ls(null),qe(null),Fe.current&&(Fe.current.value="")},Ps=()=>{Ns.refetch(),ps.refetch(),js.refetch(),vs.refetch()};return xs.isLoading?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsx(Q,{})}):xs.isError?s.jsxs(v,{variant:"destructive",children:[s.jsx(W,{className:"h-4 w-4"}),s.jsx(g,{children:"Error Loading Declaration"}),s.jsxs(N,{children:["Failed to load your tax declaration. Please try again later.",s.jsx("br",{}),s.jsx("span",{className:"text-xs opacity-70",children:r(xs.error)})]})]}):us?"pending"===us.verification_status?s.jsxs(v,{children:[s.jsx(X,{className:"h-4 w-4"}),s.jsx(g,{children:"Declaration Pending Approval"}),s.jsx(N,{children:"Your tax declaration is pending HR approval. You can upload investment proofs once it's approved."})]}):"rejected"===us.verification_status?s.jsxs(v,{variant:"destructive",children:[s.jsx(Z,{className:"h-4 w-4"}),s.jsx(g,{children:"Declaration Rejected"}),s.jsx(N,{children:"Your tax declaration was rejected. Please update and resubmit your declaration."})]}):s.jsxs("main",{className:"space-y-6",children:[s.jsx(T,{open:Ue,onOpenChange:$e,children:s.jsxs(R,{className:"max-w-lg",children:[s.jsxs(F,{children:[s.jsx(L,{children:"Upload Investment Proof"}),s.jsx(U,{children:"Upload proof document for your investment declaration."})]}),s.jsxs("div",{className:"max-h-[60vh] space-y-4 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx(j,{children:"Investment Section *"}),s.jsxs(y,{value:ze,onValueChange:e=>{Ge(e),Be("")},children:[s.jsx(b,{children:s.jsx(_,{placeholder:"Select section"})}),s.jsx(S,{children:he.map(e=>s.jsxs(P,{value:e.code,children:[e.name," - ",e.description]},e.code))})]})]}),ze&&s.jsxs("div",{children:[s.jsx(j,{children:"Investment Type *"}),s.jsxs(y,{value:Me,onValueChange:Be,children:[s.jsx(b,{children:s.jsx(_,{placeholder:"Select type"})}),s.jsx(S,{children:(je[ze]||[]).map(e=>s.jsx(P,{value:e.code,children:e.name},e.code))})]})]}),s.jsxs("div",{children:[s.jsx(j,{children:"Declared Amount (₹) *"}),s.jsx(h,{type:"number",value:Je,onChange:e=>Qe(e.target.value),placeholder:"Enter amount",min:1})]}),s.jsxs("div",{children:[s.jsx(j,{children:"Description (Optional)"}),s.jsx(J,{value:We,onChange:e=>Xe(e.target.value),placeholder:"e.g., Policy number, FD number, etc."})]}),s.jsxs("div",{children:[s.jsx(j,{children:"Upload Document (PDF/Image) *"}),s.jsx(h,{ref:Re,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var s;const n=null==(s=e.target.files)?void 0:s[0];if(n){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(n.type))return void a.error("Invalid file type. Allowed: PDF, JPEG, PNG");if(n.size>5242880)return void a.error("File size should be less than 5MB");Ke(n)}},className:"mt-1"}),Ze&&s.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["Selected: ",Ze.name]})]})]}),s.jsxs($,{children:[s.jsx(k,{onClick:_s,children:"Cancel"}),s.jsx(H,{onClick:async()=>{var e,s;if(ze&&Me&&Je&&Ze&&us){ss(!0);try{const n=new FormData;n.append("document",Ze),n.append("declaration_id",String(us.id)),n.append("financial_year",Le),n.append("section_code",ze),n.append("investment_type",Me),n.append("investment_description",We),n.append("declared_amount",Je),n.append("ulb_id",String((null==Ae?void 0:Ae.ulbId)||""));const t=await c.post(i.uploadInvestmentProof,n,{headers:{"Content-Type":"multipart/form-data"}});(null==(e=t.data)?void 0:e.success)?(a.success("Investment proof uploaded successfully"),Ps(),$e(!1),_s()):a.error((null==(s=t.data)?void 0:s.message)||"Failed to upload proof")}catch(n){a.error(r(n))}finally{ss(!1)}}else a.error("Please fill all required fields")},disabled:es,children:es?"Uploading...":"Upload Proof"})]})]})}),s.jsx(T,{open:ke,onOpenChange:e=>!e&&Ss(),children:s.jsxs(R,{children:[s.jsxs(F,{children:[s.jsx(L,{children:"Respond to Clarification Request"}),s.jsxs(U,{children:[s.jsx("strong",{children:"HR's Request:"})," ",null==Oe?void 0:Oe.clarification_request]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(j,{children:"Your Response *"}),s.jsx(J,{value:as,onChange:e=>ns(e.target.value),placeholder:"Enter your response to the clarification request...",rows:4})]}),s.jsxs("div",{children:[s.jsx(j,{children:"Upload New Document (Optional)"}),s.jsx(h,{ref:Fe,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var s;const n=null==(s=e.target.files)?void 0:s[0];if(n){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(n.type))return void a.error("Invalid file type. Allowed: PDF, JPEG, PNG");if(n.size>5242880)return void a.error("File size should be less than 5MB");ls(n)}},className:"mt-1"}),ts&&s.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["New document: ",ts.name]}),s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"You can optionally upload a replacement document along with your response."})]})]}),s.jsxs($,{children:[s.jsx(k,{children:"Cancel"}),s.jsx(H,{onClick:async()=>{var e,s,n,t;if(Oe&&as.trim())try{if(ts){const n=new FormData;n.append("document",ts),n.append("employee_response",as);const t=await c.put(`${i.respondWithFile}/${Oe.id}/respond-with-file`,n,{headers:{"Content-Type":"multipart/form-data"}});(null==(e=t.data)?void 0:e.success)?(a.success("Response with document submitted successfully"),Ps(),Ss()):a.error((null==(s=t.data)?void 0:s.message)||"Failed to submit response")}else{const e=await Te.mutateAsync({api:`${i.respondToClarification}/${Oe.id}/respond`,data:{employee_response:as}});(null==(n=null==e?void 0:e.data)?void 0:n.success)?(a.success("Response submitted successfully"),Ps(),Ss()):a.error((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Failed to submit response")}}catch(l){a.error(r(l))}else a.error("Please enter a response")},disabled:!as.trim(),children:"Submit Response"})]})]})}),s.jsx(T,{open:is,onOpenChange:rs,children:s.jsxs(R,{children:[s.jsxs(F,{children:[s.jsx(L,{children:"Delete Investment Proof"}),s.jsx(U,{children:"Are you sure you want to delete this proof? This action cannot be undone."})]}),s.jsxs($,{children:[s.jsx(k,{disabled:os,onClick:()=>{rs(!1),cs(null)},children:"Cancel"}),s.jsx(H,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:os,onClick:()=>ds&&(async e=>{var s,n;ms(!0);try{const t=await c.delete(`${i.deleteInvestmentProof}/${e}`);(null==(s=t.data)?void 0:s.success)?(a.success("Proof deleted successfully"),rs(!1),cs(null),await Ps()):a.error((null==(n=t.data)?void 0:n.message)||"Failed to delete proof")}catch(t){a.error(r(t))}finally{ms(!1)}})(ds),children:os?"Deleting...":"Delete"})]})]})}),s.jsxs(o,{children:[s.jsx(m,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(x,{children:["Investment Proofs - FY ",Le]}),s.jsx(u,{children:"Upload and track proofs for your declared investments"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(f,{variant:"verified"===us.verification_status?"default":"outline",children:["approved"===us.verification_status&&"Declaration Approved","partially_verified"===us.verification_status&&"Partially Verified","verified"===us.verification_status&&"Fully Verified"]}),s.jsx(d,{variant:"outline",size:"icon",onClick:Ps,children:s.jsx(K,{className:"h-4 w-4"})})]})]})}),s.jsxs(p,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Declared Deductions:"," ",s.jsx("strong",{children:xe(us.grand_total_deductions)})]}),bs&&s.jsxs(d,{onClick:()=>$e(!0),children:[s.jsx(ee,{className:"mr-2 h-4 w-4"}),"Upload Proof"]})]}),us.declaration_locked&&s.jsxs(v,{className:"mt-4",children:[s.jsx(W,{className:"h-4 w-4"}),s.jsx(N,{children:"Declaration is locked. You cannot upload new proofs."})]})]})]}),s.jsxs(z,{value:Ve,onValueChange:Ye,children:[s.jsxs(G,{className:"grid w-full grid-cols-4",children:[s.jsx(M,{value:"dashboard",children:"Dashboard"}),s.jsx(M,{value:"required",children:"Required Proofs"}),s.jsx(M,{value:"sections",children:"Section Summary"}),s.jsxs(M,{value:"uploaded",children:["Uploaded (",ys.length,")"]})]}),s.jsx(B,{value:"dashboard",className:"space-y-4",children:ps.isLoading?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Q,{})}):hs?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(o,{children:[s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:"Total Proofs"}),s.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold",children:(null==(be=hs.proof_stats)?void 0:be.total_proofs)||0})})]}),s.jsxs(o,{children:[s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:"Approved"}),s.jsx(ae,{className:"h-4 w-4 text-green-500"})]}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==(_e=hs.proof_stats)?void 0:_e.approved)||0})})]}),s.jsxs(o,{children:[s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:"Pending"}),s.jsx(X,{className:"h-4 w-4 text-yellow-500"})]}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(null==(Se=hs.proof_stats)?void 0:Se.pending)||0})})]}),s.jsxs(o,{children:[s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:"Action Required"}),s.jsx(ne,{className:"h-4 w-4 text-red-500"})]}),s.jsx(p,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:((null==(Pe=hs.proof_stats)?void 0:Pe.rejected)||0)+((null==(we=hs.proof_stats)?void 0:we.needs_clarification)||0)})})]})]}),s.jsxs(o,{children:[s.jsx(m,{children:s.jsx(x,{className:"text-lg",children:"Approval Progress"})}),s.jsxs(p,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Amount Approved"}),s.jsxs("span",{children:[xe(null==(Ce=hs.amounts)?void 0:Ce.total_approved)," ","/"," ",xe(null==(De=hs.amounts)?void 0:De.total_declared)]})]}),s.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:s.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(null==(Ie=hs.amounts)?void 0:Ie.approval_percentage)||0}%`}})}),s.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[(null==(Ee=hs.amounts)?void 0:Ee.approval_percentage)||0,"% approved"]})]})]}),hs.deadline&&s.jsxs(v,{variant:hs.deadline.passed?"destructive":(hs.deadline.days_remaining,"default"),children:[s.jsx(te,{className:"h-4 w-4"}),s.jsx(g,{children:"Submission Deadline"}),s.jsx(N,{children:hs.deadline.passed?"Deadline has passed. Contact HR for assistance.":`${hs.deadline.days_remaining} days remaining until ${hs.deadline.date}`})]}),hs.action_items&&hs.action_items.length>0&&s.jsxs(o,{children:[s.jsx(m,{children:s.jsx(x,{className:"text-lg",children:"Action Items"})}),s.jsx(p,{children:s.jsx("div",{className:"space-y-2",children:hs.action_items.map((e,a)=>s.jsxs(v,{variant:"high"===e.priority?"destructive":"default",children:[s.jsx(ne,{className:"h-4 w-4"}),s.jsx(N,{children:e.message})]},a))})})]})]}):s.jsx(o,{children:s.jsx(p,{className:"py-8 text-center text-muted-foreground",children:"No completion status available"})})}),s.jsx(B,{value:"required",className:"space-y-4",children:js.isLoading?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Q,{})}):fs?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:s.jsx(le,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completion"}),s.jsxs("p",{className:"text-2xl font-bold",children:[fs.summary.completion_percentage,"%"]})]})]})}),s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx("div",{className:"rounded-full bg-green-100 p-3",children:s.jsx(ie,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploaded"}),s.jsxs("p",{className:"text-2xl font-bold",children:[fs.summary.uploaded," /"," ",fs.summary.total_required]})]})]})}),s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx("div",{className:"rounded-full bg-yellow-100 p-3",children:s.jsx(X,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Upload"}),s.jsx("p",{className:"text-2xl font-bold",children:fs.summary.pending})]})]})})]}),s.jsxs(o,{children:[s.jsxs(m,{children:[s.jsx(x,{children:"Required Proofs Based on Declaration"}),s.jsx(u,{children:"Upload proofs for all investments you declared"})]}),s.jsx(p,{children:s.jsxs(w,{children:[s.jsx(C,{children:s.jsxs(D,{children:[s.jsx(I,{children:"Section"}),s.jsx(I,{children:"Investment"}),s.jsx(I,{children:"Declared"}),s.jsx(I,{children:"Uploaded"}),s.jsx(I,{children:"Gap"}),s.jsx(I,{children:"Status"}),s.jsx(I,{children:"Action"})]})}),s.jsx(E,{children:fs.required_proofs.map((e,a)=>s.jsxs(D,{children:[s.jsx(A,{children:s.jsx(f,{variant:"outline",children:e.section_code})}),s.jsx(A,{className:"font-medium",children:e.investment_name}),s.jsx(A,{children:xe(e.declared_amount)}),s.jsx(A,{children:xe(e.uploaded_amount)}),s.jsx(A,{children:e.pending_amount>0?s.jsx("span",{className:"text-red-600",children:xe(e.pending_amount)}):s.jsx("span",{className:"text-green-600",children:"-"})}),s.jsx(A,{children:s.jsx(f,{variant:"UPLOADED"===e.status?"default":"secondary",children:e.status})}),s.jsx(A,{children:"PENDING"===e.status&&bs&&s.jsxs(d,{size:"sm",variant:"outline",onClick:()=>{Ge(e.section_code),Be(e.investment_type),$e(!0)},children:[s.jsx(ee,{className:"mr-1 h-3 w-3"}),"Upload"]})})]},a))})]})})]})]}):s.jsx(o,{children:s.jsx(p,{className:"py-8 text-center text-muted-foreground",children:"No required proofs data available"})})}),s.jsx(B,{value:"sections",className:"space-y-4",children:vs.isLoading?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(Q,{})}):gs?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx(re,{className:"h-8 w-8 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Declared"}),s.jsx("p",{className:"text-xl font-bold",children:xe(gs.totals.declared)})]})]})}),s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx(ee,{className:"h-8 w-8 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Uploaded"}),s.jsx("p",{className:"text-xl font-bold",children:xe(gs.totals.uploaded)})]})]})}),s.jsx(o,{children:s.jsxs(p,{className:"flex items-center gap-4 pt-6",children:[s.jsx(ae,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Approved"}),s.jsx("p",{className:"text-xl font-bold",children:xe(gs.totals.approved)})]})]})})]}),s.jsx(O,{type:"multiple",defaultValue:gs.sections.map(e=>e.code),children:gs.sections.map(e=>s.jsxs(q,{value:e.code,className:"mb-2 rounded-lg border bg-card",children:[s.jsx(V,{className:"px-4 hover:no-underline",children:s.jsxs("div",{className:"flex w-full items-center justify-between pr-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(f,{variant:"outline",children:e.code}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:e.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[pe(e.status),s.jsxs("div",{className:"text-right text-sm",children:[s.jsx("div",{children:xe(e.amounts.approved)}),s.jsxs("div",{className:"text-muted-foreground",children:["of ",xe(e.declared)]})]})]})]})}),s.jsxs(Y,{className:"px-4 pb-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Declared"}),s.jsx("p",{className:"text-lg font-semibold",children:xe(e.declared)})]}),s.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploaded"}),s.jsx("p",{className:"text-lg font-semibold",children:xe(e.amounts.uploaded)})]}),s.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),s.jsx("p",{className:"text-lg font-semibold text-green-600",children:xe(e.amounts.approved)})]}),s.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gap"}),s.jsx("p",{className:"text-lg font-semibold "+(e.amounts.gap>0?"text-red-600":"text-green-600"),children:xe(e.amounts.gap)})]})]}),s.jsx("div",{className:"mt-4 flex gap-4 text-sm text-muted-foreground",children:s.jsxs("span",{children:["Proofs: ",e.proofs.count," | Pending:"," ",e.proofs.pending," | Approved:"," ",e.proofs.approved," | Rejected:"," ",e.proofs.rejected]})})]})]},e.code))})]}):s.jsx(o,{children:s.jsx(p,{className:"py-8 text-center text-muted-foreground",children:"No section summary available"})})}),s.jsx(B,{value:"uploaded",children:s.jsxs(o,{children:[s.jsx(m,{children:s.jsxs(x,{children:["Uploaded Proofs (",ys.length,")"]})}),s.jsx(p,{children:Ns.isLoading?s.jsx("div",{className:"flex justify-center p-4",children:s.jsx(Q,{})}):0===ys.length?s.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[s.jsx(se,{className:"mx-auto mb-2 h-12 w-12 opacity-50"}),s.jsx("p",{children:"No investment proofs uploaded yet."}),bs&&s.jsx(d,{variant:"outline",className:"mt-4",onClick:()=>$e(!0),children:"Upload Your First Proof"})]}):s.jsxs(w,{children:[s.jsx(C,{children:s.jsxs(D,{children:[s.jsx(I,{children:"#"}),s.jsx(I,{children:"Section"}),s.jsx(I,{children:"Investment Type"}),s.jsx(I,{children:"Declared"}),s.jsx(I,{children:"Verified"}),s.jsx(I,{children:"Document"}),s.jsx(I,{children:"Status"}),s.jsx(I,{children:"Actions"})]})}),s.jsx(E,{children:ys.map((e,a)=>s.jsxs(D,{children:[s.jsx(A,{children:a+1}),s.jsx(A,{className:"font-medium",children:e.section_code}),s.jsx(A,{children:e.investment_type}),s.jsx(A,{children:xe(e.declared_amount)}),s.jsx(A,{children:null!==e.verified_amount?xe(e.verified_amount):"-"}),s.jsx(A,{children:e.document_url?s.jsx(d,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:e.document_url,target:"_blank",rel:"noreferrer",title:"View Document",children:s.jsx(de,{className:"h-4 w-4"})})}):"-"}),s.jsx(A,{children:s.jsxs("div",{className:"space-y-1",children:[ue(e.verification_status),e.rejection_reason&&s.jsxs("p",{className:"text-xs text-destructive",children:["Reason: ",e.rejection_reason]})]})}),s.jsx(A,{children:s.jsxs("div",{className:"flex gap-1",children:["needs_clarification"===e.verification_status&&s.jsx(d,{variant:"outline",size:"icon",title:"Respond to Clarification",onClick:()=>{qe(e),He(!0)},children:s.jsx(ce,{className:"h-4 w-4 text-orange-500"})}),"pending"===e.verification_status&&!us.declaration_locked&&s.jsx(d,{variant:"outline",size:"icon",title:"Delete Proof",onClick:()=>{return s=e.id,cs(s),void rs(!0);var s},children:s.jsx(oe,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})})]})})]})]}):s.jsxs(v,{variant:"destructive",children:[s.jsx(W,{className:"h-4 w-4"}),s.jsx(g,{children:"No Tax Declaration Found"}),s.jsx(N,{children:"Please submit your tax declaration first before uploading investment proofs."})]})}function ve(){return s.jsx(me,{title:"Investment Proofs",subTitle:"Upload proofs for your declared investments",children:s.jsx("div",{className:"py-6",children:s.jsx(fe,{})})})}export{ve as default};
