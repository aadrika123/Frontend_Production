import{k as e,r as a,q as s,j as t,h as l,z as i,s as n,t as r,v as d,B as o,f as c,w as m,L as x,n as u,R as p,l as h,x as g}from"./index-CaGgFSeq.js";import{g as b,d as j,U as v,C as f,a as y,D as _,b as N,c as w,e as S,f as D,h as k,i as A,j as E,E as C,k as I,l as P,m as M,n as F,o as T,p as $,q,P as R}from"./index-_Ebnz7ZO.js";import{a as V,o as B,h as L,c as Y,e as O,f as U,b as H,i as z,d as G,g as W}from"./yup-CKEuqCyz.js";import{F as J}from"./datetime-picker-BtprqcV1.js";import{R as Q}from"./RHFTextField-DnsEykRH.js";import{R as K}from"./RHFTextArea-7uaYu2_S.js";import{B as X}from"./ButtonLoading-B22z2lRV.js";import{R as Z}from"./RHFSelectField-XaTdgr7j.js";import"./input-D-UmUPn3.js";import"./switch-Dzwmyki0.js";import"./checkbox-BzF0hRJq.js";import"./label-CInbbuF8.js";import{u as ee,c as ae,b as se,a as te}from"./useCustomQuery-kAcgaiYY.js";import{E as le}from"./employeeTypes-BSpBpKLh.js";import{B as ie}from"./briefcase-CezUY-pi.js";import{H as ne,S as re,P as de,M as oe,R as ce}from"./RHFUploadFiled-y-Nqrtk_.js";import{B as me}from"./building-2-DIKb5mk1.js";import{C as xe}from"./calendar-B5etLz2h.js";import{U as ue}from"./users-D_1I5uef.js";import{C as pe}from"./circle-alert-2e3QFMXj.js";import{H as he,M as ge,C as be,F as je,u as ve,W as fe,U as ye,a as _e}from"./usePdfValidator-CPWtCsKo.js";import{F as Ne}from"./file-text--YAkbBG1.js";import{T as we}from"./trash-2-DL1oepIx.js";import{P as Se}from"./plus-CDHvFTH0.js";import{H as De}from"./house-9ObSu603.js";import{C as ke}from"./check-DrWmecxK.js";import{h as Ae}from"./moment-CBOc1lqT.js";import{C as Ee,c as Ce,a as Ie,d as Pe}from"./card-DpoqoWLt.js";import{S as Me}from"./Spinner-qexXCl2s.js";import{C as Fe}from"./index-C3Xhupw1.js";import{S as Te}from"./separator-BjkNEWW3.js";import{E as $e}from"./eye-Bg6KHRh8.js";import{D as qe}from"./download-e8mIBQ33.js";import{R as Re}from"./RHFCheckbox-Ma2BiBD9.js";import{C as Ve}from"./circle-check-big-BWcM736c.js";import{C as Be}from"./circle-x-DjmCeqLK.js";import{S as Le}from"./search-De7hYMPA.js";import{C as Ye}from"./clock-B2whL4Nd.js";import{C as Oe}from"./calendar-days-Y4XlIsR5.js";import{A as Ue}from"./award-B1WTnzSx.js";import"./select-CIf9vlQt.js";import{T as He}from"./trending-up-DwVAwMK7.js";import{I as ze}from"./indian-rupee-B3XGdIY5.js";import{P as Ge}from"./pen-B8UHeaKW.js";import{A as We}from"./arrow-right-C7F8x3A_.js";import{A as Je,a as Qe}from"./alert-DBiCqTPE.js";import{T as Ke,a as Xe,b as Ze,c as ea}from"./tabs-B-r2fYeN.js";import{F as aa}from"./filter-BLdAbYlU.js";import{G as sa}from"./grid-3x3-B9erYxnS.js";import{L as ta}from"./loader-circle-Oz4TaF6r.js";import{S as la}from"./square-pen-B80NRgFT.js";import{A as ia}from"./arrow-up-right-C-JU_UPC.js";import"./format-BkNqQ0tt.js";import"./chevron-right-CSfpr0N3.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=e("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),ra=e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),da=e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),oa=e("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),ca=e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),ma=Y().shape({emp_type:H().required().label("Employee Type"),emp_code:H().max(50).required().label("Employee Code"),emp_name:H().max(100).required().label("Employee Name"),gender:H().oneOf(["male","female","other"]).required().label("Gender"),dob:O().required().label("Date of Birth"),marital_status:H().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:H().max(50).required().label("Religion"),emp_blood_group:H().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:H().max(50).required().label("Health Status").required(),physical_disability_status:H().optional().label("Physical Disability"),height:U().optional().label("Height"),weight:U().optional().label("Weight"),cps_no:H().max(50).optional().label("CPS"),gpf_no:H().max(50).optional().label("GPF"),identification_mark:H().max(200).optional().label("Identification Mark"),caste:H().max(100).optional().label("Caste"),languages_known:z().of(Y().shape({language:H().required("Language is required"),read:G().required(),write:G().required(),speak:G().required()})),contact_no:H().max(10).required().label("Contact Number").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),emergency_contact_no:H().max(10).required().label("Emergency Contact").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),email:H().email().max(100).required().label("Email"),emp_present_address:H().required().label("Present Address"),present_post_office:H().max(100).required().label("Present Post Office"),present_pin_code:H().max(6).required().label("Present PIN Code"),present_police_station:H().max(100).optional().label("Present Police Station"),present_state:H().max(100).required().label("Present State"),present_district:H().max(100).required().label("Present District"),present_nearest_railway_station:H().max(100).optional().label("Nearest Railway Station"),emp_permanent_address:H().required().label("Permanent Address"),permanent_post_office:H().max(100).required().label("Permanent Post Office"),permanent_pin_code:H().max(6).required().label("Permanent PIN Code"),permanent_police_station:H().max(100).optional().label("Permanent Police Station"),permanent_state:H().max(100).required().label("Permanent State"),permanent_district:H().max(100).required().label("Permanent District"),permanent_nearest_railway_station:H().max(100).optional().label("Permanent Nearest Railway Station"),aadhaar_no:H().max(12).nullable().optional().label("Aadhaar Number"),pan_no:H().max(10).nullable().optional().label("PAN Number"),voter_id:H().max(20).nullable().optional().label("Voter ID"),uan_no:H().max(12).nullable().optional().label("UAN Number"),esi_no:H().max(17).nullable().optional().label("ESI Number"),passport_no:H().max(20).nullable().optional().label("Passport Number"),driving_license_no:H().max(20).nullable().optional().label("Driving License"),department_id:H().required().label("Department"),department_name:H().label("Department Name").optional(),designation_id:U().integer().required().label("Designation"),date_of_joining:O().required().label("Date of Joining")});
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function xa({id:e,getDataById:d}){var o,c,m,x,u,p;const h=b(),[g,y]=a.useState(!1),_=ee({}),N=s(),w=j(),S=a.useMemo(()=>{var e;if(!(null==(e=d.data)?void 0:e.data))return{emp_name:"",contact_no:"",emergency_contact_no:"",email:"",gender:"",marital_status:"",religion:"",caste:"",identification_mark:"",emp_health_status:"",emp_blood_group:"",weight:"",height:"",dob:"",date_of_joining:"",emp_present_address:"",present_post_office:"",present_pin_code:"",present_police_station:"",present_state:"",present_district:"",present_nearest_railway_station:"",emp_permanent_address:"",permanent_post_office:"",permanent_pin_code:"",permanent_police_station:"",permanent_state:"",permanent_district:"",permanent_nearest_railway_station:"",aadhaar_no:"",pan_no:"",uan_no:"",esi_no:"",passport_no:"",driving_license_no:"",voter_id:"",gpf_no:"",cps_no:"",physical_disability_status:"",department_id:"",department_name:"",designation_id:void 0,languages_known:[{language:"Hindi",read:!0,write:!0,speak:!0}]};const{ulb_id:a,status:s,created_at:t,updated_at:l,id:i,emp_image:n,...r}=d.data.data,o={};return Object.entries(r).forEach(([e,a])=>{null==a?o[e]="":Array.isArray(a)||"object"==typeof a||"number"==typeof a?o[e]=a:o[e]=String(a)}),(!o.languages_known||Array.isArray(o.languages_known)&&0===o.languages_known.length)&&(o.languages_known=[{language:"Hindi",read:!0,write:!0,speak:!0}]),o},[d.data]),D=V({defaultValues:S,resolver:B(ma)}),k=L({control:D.control,name:"languages_known"});a.useEffect(()=>{d.data&&D.reset(S)},[d.data,D,S]);const A=async e=>{const a=await fetch(e),s=await a.blob(),t=new Blob([s],{type:s.type});return Object.defineProperty(t,"name",{value:"employee_image.jpg",writable:!1}),Object.defineProperty(t,"lastModified",{value:Date.now(),writable:!1}),t},E=e=>{var a;const s=new FormData,t=null==(a=d.data)?void 0:a.data;return s.append("name",D.getValues("emp_name")),s.append("mobile",D.getValues("contact_no")),s.append("altMobile",D.getValues("emergency_contact_no")),s.append("email",D.getValues("email")),s.append("address",D.getValues("emp_present_address")),s.append("userType","Employee"),s.append("ulbId",(null==t?void 0:t.ulb_id)||""),s.append("photo",e),s},C=async e=>{var a,s;const t=await _.mutateAsync({api:null==(a=r)?void 0:a.createMenuRoleAuth,data:{userId:e,permissionStatus:!0,menuRoleId:129}});if(!(null==(s=t.data)?void 0:s.status))throw new Error("Failed to create menu role permission");return t},I=async e=>{var a;return _.mutateAsync({api:null==(a=r)?void 0:a.createWorkFlowRoleAuth,data:{userId:e,permissionStatus:!0,wfRoleId:79}})},P=async e=>{var a,s,t,i;const n=await _.mutateAsync({api:null==(a=l)?void 0:a.approveEmployee,data:{id:String(null==(t=null==(s=d.data)?void 0:s.data)?void 0:t.id),authorization_id:String(e),approval_status:1}});if(!(null==(i=n.data)?void 0:i.success))throw new Error("Failed to update employee approval status");return n},M=async(e,a)=>{var s;try{return await _.mutateAsync({api:null==(s=n)?void 0:s.updateUserName,data:{id:Number(e),emp_id:String(a)||""}})}catch(t){const e=t instanceof Error?t.message:"An error occurred while updating User Name";throw i.error(e),t}};return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:t.jsx(v,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),t.jsxs(J,{methods:D,onSubmit:D.handleSubmit(async a=>{var s,t,n,r,o,c,m,x;try{const u=await _.mutateAsync({api:`${null==(s=l)?void 0:s.updateEmployeeById}`,data:{id:e,...a}});(null==(t=u.data)?void 0:t.success)?(await M(String(null==(r=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:r.authorization_id),String(null==(c=null==(o=null==d?void 0:d.data)?void 0:o.data)?void 0:c.id)),i.success(null==(m=null==u?void 0:u.data)?void 0:m.message),N("/hrms/dashboard/employee-list")):i.error((null==(x=u.data)?void 0:x.message)||"Employee not created successfully")}catch(u){i.error("An error occurred while creating employee")}}),children:[t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(ie,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Z,{name:"emp_type",data:le,disabled:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Q,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(me,{className:"h-4 w-4 text-gray-400"}),"Department"]}),t.jsx(Z,{name:"department_id",selectedText:"department_name",isSearch:!0,data:(null==(c=null==(o=null==h?void 0:h.data)?void 0:o.data)?void 0:c.length)?h.data.data.map(e=>({label:String(e.department_name),value:String(e.id)})):[]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),t.jsx(Z,{name:"designation_id",isSearch:!0,data:(null==(x=null==(m=null==w?void 0:w.data)?void 0:m.data)?void 0:x.map(e=>({label:String(e.designation_name),value:String(e.id)})))||[]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),t.jsx(Q,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(v,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(v,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),t.jsx(Q,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),t.jsx(Z,{name:"gender",data:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),t.jsx(Q,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),t.jsx(Z,{name:"marital_status",data:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),t.jsx(Q,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(pe,{className:"h-4 w-4 text-gray-400"}),"Caste"]}),t.jsx(Q,{name:"caste",placeholder:"Enter Caste",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),t.jsx(Z,{name:"emp_blood_group",data:[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),t.jsx(Z,{name:"emp_health_status",data:[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Identification Mark"]}),t.jsx(Q,{name:"identification_mark",placeholder:"Enter Identification Mark",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Physical Disability Status"]}),t.jsx(Z,{name:"physical_disability_status",data:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ra,{className:"h-4 w-4 text-gray-400"}),"Height (cm)"]}),t.jsx(Q,{name:"height",placeholder:"Enter Height in cm",inputValidation:["number"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ra,{className:"h-4 w-4 text-gray-400"}),"Weight (kg)"]}),t.jsx(Q,{name:"weight",placeholder:"Enter Weight in kg",inputValidation:["number"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),"CPS"]}),t.jsx(Q,{name:"cps_no",placeholder:"Enter CPS",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),"GPF"]}),t.jsx(Q,{name:"gpf_no",placeholder:"Enter GPF",inputValidation:["removeSpecialCharacterExceptSpace"]})]})]}),t.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"space-y-2",children:k.fields.map((e,a)=>t.jsxs("div",{className:"group flex flex-col gap-3 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md sm:flex-row sm:items-center",children:[t.jsxs("div",{className:"flex items-center justify-between sm:contents",children:[t.jsx("span",{className:"inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-emerald-100 text-xs font-semibold text-emerald-700",children:a+1}),k.fields.length>1&&t.jsx("button",{type:"button",onClick:()=>k.remove(a),className:"flex-shrink-0 transition-opacity sm:order-last sm:opacity-0 sm:group-hover:opacity-100",title:"Remove language",children:t.jsx(we,{className:"h-4 w-4 text-red-500 hover:text-red-600"})})]}),t.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:t.jsx(Q,{name:`languages_known.${a}.language`,placeholder:"Enter Language",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-blue-300 hover:bg-blue-50 has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50",children:[t.jsx("input",{type:"checkbox",...D.register(`languages_known.${a}.read`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ“– Read"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-purple-300 hover:bg-purple-50 has-[:checked]:border-purple-400 has-[:checked]:bg-purple-50",children:[t.jsx("input",{type:"checkbox",...D.register(`languages_known.${a}.write`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-purple-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"âœï¸ Write"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-green-300 hover:bg-green-50 has-[:checked]:border-green-400 has-[:checked]:bg-green-50",children:[t.jsx("input",{type:"checkbox",...D.register(`languages_known.${a}.speak`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-green-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ—£ï¸ Speak"})]})]})]},e.id))}),t.jsxs("button",{type:"button",onClick:()=>k.append({language:"",read:!1,write:!1,speak:!1}),className:"mt-3 flex w-full items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-600 transition-all hover:border-emerald-400 hover:bg-emerald-50 hover:text-emerald-700",children:[t.jsx(Se,{className:"h-4 w-4"}),"Add Language"]})]})})]})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(de,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),t.jsx(Q,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(pe,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),t.jsx(Q,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(oe,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),t.jsx(Q,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"col-span-full space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),t.jsx(K,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),t.jsx(Q,{name:"present_post_office",placeholder:"Enter Post Office"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),t.jsx(Q,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),t.jsx(Q,{name:"present_police_station",placeholder:"Enter Police Station"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),t.jsx(Q,{name:"present_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"District"]}),t.jsx(Q,{name:"present_district",placeholder:"Enter District"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"State"]}),t.jsx(Q,{name:"present_state",placeholder:"Enter State"})]})]})}),t.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[t.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:g,onChange:e=>(e=>{if(y(e),e){const e=D.getValues("emp_present_address"),a=D.getValues("present_post_office"),s=D.getValues("present_pin_code"),t=D.getValues("present_police_station"),l=D.getValues("present_state"),i=D.getValues("present_district"),n=D.getValues("present_nearest_railway_station");D.setValue("emp_permanent_address",e),D.setValue("permanent_post_office",a),D.setValue("permanent_pin_code",s),D.setValue("permanent_police_station",t),D.setValue("permanent_state",l),D.setValue("permanent_district",i),D.setValue("permanent_nearest_railway_station",n)}else D.setValue("emp_permanent_address",""),D.setValue("permanent_post_office",""),D.setValue("permanent_pin_code",""),D.setValue("permanent_police_station",""),D.setValue("permanent_state",""),D.setValue("permanent_district",""),D.setValue("permanent_nearest_railway_station","")})(e.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),t.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(De,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),t.jsx("div",{children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"col-span-full space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),t.jsx(K,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:g})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),t.jsx(Q,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:g})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),t.jsx(Q,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:g})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),t.jsx(Q,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:g})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),t.jsx(Q,{name:"permanent_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"District"]}),t.jsx(Q,{name:"permanent_district",placeholder:"Enter District",disabled:g})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4 text-gray-400"}),"State"]}),t.jsx(Q,{name:"permanent_state",placeholder:"Enter State",disabled:g})]})]})})]})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(be,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Voter ID"]}),t.jsx(Q,{name:"voter_id",placeholder:"Enter Voter ID",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),t.jsx(Q,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),t.jsx(Q,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),t.jsx(Q,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),t.jsx(Q,{name:"esi_no",placeholder:"Enter ESI Number"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),t.jsx(Q,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),t.jsx(Q,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),t.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(X,{isLoading:D.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:t.jsxs(t.Fragment,{children:[t.jsx(v,{className:"h-4 w-4"}),"Update Employee"]})}),0==(null==(p=null==(u=d.data)?void 0:u.data)?void 0:p.approval_status)&&t.jsx(X,{onClick:async()=>{f("Are you sure you want to approve this employee?","Please confirm",async()=>{var e,a,s,t,l,n,o;try{const c=(null==(a=null==(e=d.data)?void 0:e.data)?void 0:a.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",m=await A(c),x=E(m),u=await _.mutateAsync({api:null==(s=r)?void 0:s.createUserAuth,data:x});if(!(null==(t=u.data)?void 0:t.status))throw new Error((null==(l=u.data)?void 0:l.message)||"Employee approval failed");const p=u.data.data.id;await Promise.all([C(p),I(p),M(String(p),String(null==(o=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:o.id))]),await P(p),i.success("Employee approved successfully"),N("/hrms/dashboard/employee-list")}catch(c){const e=c instanceof Error?c.message:"An error occurred while approving employee";i.error(e)}})},type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:t.jsxs(t.Fragment,{children:[t.jsx(ke,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),t.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const ua=Y().shape({doc_name:H().required("Document Name is required"),doc_type_id:H().required("Document Type is required"),doc_path:W().required("Document is required").test("fileRequired","Document is required",e=>e instanceof File||"string"==typeof e&&""!==e),description:H().required("Description is required")});function pa({title:e,id:s,edit:n,refetch:r,getDataById:c}){var m,x,u,p,h,g,b;const{validateFile:j,reset:v}=ve({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),f=ee({}),C=ae({}),I=a.useRef(null),P=y(),{data:M}=se({api:`${null==(m=l)?void 0:m.updateEmployeeById}/${s}`,key:"getDocumentById",options:{enabled:n}}),F=V({defaultValues:{doc_type_id:(null==(x=null==M?void 0:M.data)?void 0:x.doc_type_id)||"",doc_name:(null==(u=null==M?void 0:M.data)?void 0:u.doc_name)||"",doc_path:(null==(p=null==M?void 0:M.data)?void 0:p.doc_path)||"",description:(null==(h=null==M?void 0:M.data)?void 0:h.description)||""},resolver:B(ua)}),{id:T}=d();a.useEffect(()=>{var e,a,s,t;n&&M?F.reset({doc_type_id:null==(e=null==M?void 0:M.data)?void 0:e.doc_type_id,doc_name:null==(a=null==M?void 0:M.data)?void 0:a.doc_name,doc_path:null==(s=null==M?void 0:M.data)?void 0:s.doc_path,description:(null==(t=null==M?void 0:M.data)?void 0:t.description)??""}):F.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[n,M]),a.useEffect(()=>{var e,a,s,t;"Aadhaar Card"===(null==F?void 0:F.watch("doc_name"))?F.setValue("description",(null==(a=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:a.aadhaar_no)||""):"Pan Card"===(null==F?void 0:F.watch("doc_name"))?F.setValue("description",(null==(t=null==(s=null==c?void 0:c.data)?void 0:s.data)?void 0:t.pan_no)||""):F.setValue("description","")},[null==F?void 0:F.watch("doc_name")]);const $=F.formState.isSubmitting||C.isPending;return t.jsxs(_,{children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),t.jsx(w,{className:"sm:max-w-[425px]",children:t.jsxs(J,{methods:F,onSubmit:F.handleSubmit(async e=>{var a,s,t,d;try{const o=new FormData;if(o.append("emp_id",String(T)),o.append("doc_type_id",e.doc_type_id),o.append("doc_name",e.doc_name),o.append("description",e.description),o.append("file",null==e?void 0:e.doc_path),n&&e);else{const e=await f.mutateAsync({api:l.uploadEmployeeDocument,data:o});(null==(a=e.data)?void 0:a.success)?(i.success(null==(s=null==e?void 0:e.data)?void 0:s.message),null==(t=I.current)||t.click()):i.error((null==(d=e.data)?void 0:d.message)||"Document not attached successfully"),F.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}r()}catch(o){i.error("An error occurred while processing your request")}}),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(Z,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:(null==(b=null==(g=null==P?void 0:P.data)?void 0:g.data)?void 0:b.map(e=>({label:String(e.doc_name),value:String(e.id)})))||[]})}),t.jsx("div",{children:t.jsx(ce,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:async e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s&&"application/pdf"===(null==s?void 0:s.type)){const a=await j(s);a.isValid?(i.success(a.message),v(),F.setValue("doc_path",s)):(i.error(a.message),e.target.value="",F.resetField("doc_path"))}else s&&F.setValue("doc_path",s)},placeholder:"Upload your document"})}),t.jsx("div",{children:t.jsx(Q,{label:`${(null==F?void 0:F.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(null==F?void 0:F.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsx(Te,{})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:I,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:$,children:"Save changes"})]})]})})]})}function ha({id:e,getDataById:s}){var n,r,m,x;const[u,p]=a.useState(""),[h,g]=a.useState(!1),{id:b}=d(),j=se({api:`${l.getEmployeeDocuments}?emp_id=${b}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),v=ee({}),f=e=>{var a;return(null==(a=e.split(".").pop())?void 0:a.toLowerCase())||""},y=e=>{const a=f(e);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(a)};return t.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),t.jsx(pa,{title:h?"Edit Document":"Attach Document",id:e,edit:h,setEdit:g,refetch:j.refetch,getDataById:s})]}),j.isLoading?t.jsx("div",{className:"flex h-64 items-center justify-center",children:t.jsx(Me,{})}):t.jsx(t.Fragment,{children:0===(null==(r=null==(n=null==j?void 0:j.data)?void 0:n.data)?void 0:r.length)?t.jsx(Ee,{className:"border-2 border-dashed border-gray-300 bg-white",children:t.jsxs(Ce,{className:"flex flex-col items-center justify-center py-16",children:[t.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:t.jsx(Ne,{className:"h-16 w-16 text-gray-400"})}),t.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),t.jsx("p",{className:"mt-2 text-center text-gray-600",children:u?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):t.jsx("div",{className:"space-y-4",children:null==(x=null==(m=null==j?void 0:j.data)?void 0:m.data)?void 0:x.map(e=>{return t.jsx(Ee,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[y(null==e?void 0:e.doc_path)?t.jsx("img",{src:e.doc_path,alt:(null==e?void 0:e.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{var a,s;e.currentTarget.style.display="none",null==(s=null==(a=e.currentTarget.parentElement)?void 0:a.querySelector(".fallback-icon"))||s.classList.remove("hidden")}}):(a=null==e?void 0:e.doc_path,"pdf"===f(a)?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:t.jsx(je,{className:"h-12 w-12 text-red-600"})})}):t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:t.jsx(Ne,{className:"h-12 w-12 text-blue-600"})})})),t.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:t.jsx(Ne,{className:"h-12 w-12 text-gray-400"})})}),t.jsx("div",{className:"absolute bottom-1 left-1",children:t.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:f(null==e?void 0:e.doc_path)||"file"})}),t.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:t.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[t.jsx("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:t.jsx($e,{className:"h-3 w-3"})}),t.jsx("a",{href:e.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:t.jsx(qe,{className:"h-3 w-3"})})]})})]}),t.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(null==e?void 0:e.doc_name)||"Document"}),t.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(null==e?void 0:e.description)||"No description available"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(xe,{className:"h-4 w-4"}),t.jsx("span",{className:"whitespace-nowrap",children:Ae(null==e?void 0:e.created_at).format("DD MMM YYYY")})]}),t.jsxs("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[t.jsx(C,{className:"h-4 w-4"}),"Open"]}),t.jsx(o,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Fe("Are you sure?","Please confirm",async()=>{var a,s,t;try{const n=await v.mutateAsync({api:`${l.deleteEmployeeDocument}`,data:{id:c(e.toString())}});(null==(a=null==n?void 0:n.data)?void 0:a.success)?(i.success((null==(s=null==n?void 0:n.data)?void 0:s.message)||"Deleted successfully"),j.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting item")}})})(null==e?void 0:e.id),children:t.jsx(we,{className:"h-4 w-4"})})]})]})})})]})},null==e?void 0:e.id);var a})})})]})})}const ga=Y().shape({family_member_name:H().required("Family member name is required").min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),relationship:H().required("Relationship is required"),dob:H().nullable().optional(),address:H().nullable().optional().max(255,"Address cannot exceed 255 characters"),is_dependent:G().default(!1),is_nominee:G().default(!1),nominee_percentage:U().nullable().when("is_nominee",{is:!0,then:e=>e.required("Nominee percentage is required when marked as nominee").min(1,"Percentage must be at least 1%").max(100,"Percentage cannot exceed 100%"),otherwise:e=>e.notRequired()})}),ba=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function ja({title:e="Add Family Member",id:s,edit:n,refetch:r,getDataById:c}){var m;const x=ee({}),u=a.useRef(null),{id:p}=d(),{data:h}=se({api:`${null==(m=l)?void 0:m.getFamilyMemberById}/${s}`,key:"getFamilyMemberById",options:{enabled:n&&!!s}}),g=V({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null},resolver:B(ga)}),b=g.watch("is_nominee");a.useEffect(()=>{var e,a,s,t,l,i,r;n&&h?g.reset({family_member_name:(null==(e=null==h?void 0:h.data)?void 0:e.family_member_name)||"",relationship:(null==(a=null==h?void 0:h.data)?void 0:a.relationship)||"",dob:(null==(s=null==h?void 0:h.data)?void 0:s.dob)||"",address:(null==(t=null==h?void 0:h.data)?void 0:t.address)||"",is_dependent:(null==(l=null==h?void 0:h.data)?void 0:l.is_dependent)||!1,is_nominee:(null==(i=null==h?void 0:h.data)?void 0:i.is_nominee)||!1,nominee_percentage:(null==(r=null==h?void 0:h.data)?void 0:r.nominee_percentage)||null}):g.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null})},[n,h,g]);const j=g.formState.isSubmitting||x.isPending;return t.jsxs(_,{children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),t.jsx(w,{className:"sm:max-w-[500px]",children:t.jsxs(J,{methods:g,onSubmit:g.handleSubmit(async e=>{var a,t,d,o,c,m,h,b;try{const j={emp_id:p,family_member_name:e.family_member_name,relationship:e.relationship,dob:e.dob,address:e.address,is_dependent:e.is_dependent||!1,is_nominee:e.is_nominee||!1,nominee_percentage:e.is_nominee?e.nominee_percentage:null};if(n&&s){const e=await x.mutateAsync({api:`${l.updateFamilyMemberById}/${s}`,data:j});(null==(a=e.data)?void 0:a.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Family member updated successfully"),null==(d=u.current)||d.click()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update family member")}else{const e=await x.mutateAsync({api:l.createFamily,data:j});(null==(c=e.data)?void 0:c.success)?(i.success((null==(m=null==e?void 0:e.data)?void 0:m.message)||"Family member added successfully"),null==(h=u.current)||h.click()):i.error((null==(b=e.data)?void 0:b.message)||"Failed to add family member")}g.reset(),null==r||r()}catch(j){i.error("An error occurred while processing your request")}}),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{children:n?"Update family member information":"Add a new family member"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(Q,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(Z,{label:"Relationship",name:"relationship",selectedText:"relationship",data:ba})}),t.jsx("div",{children:t.jsx(Q,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),t.jsx("div",{children:t.jsx(Q,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),t.jsx(Te,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Re,{name:"is_dependent",label:"Mark as Dependent"}),t.jsx(Re,{name:"is_nominee",label:"Mark as Nominee"}),b&&t.jsx("div",{className:"ml-6",children:t.jsx(Q,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:u,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:j,children:n?"Update":"Save"})]})]})})]})}function va({id:e,getDataById:s}){var n,r,d,m;const[x,u]=a.useState(""),[p,h]=a.useState(!1),g=se({api:`${l.getAllFamilyDetail}?emp_id=${e}`,key:"getEmployeeFamilyDetailsId",value:[e],options:{enabled:!0}}),b=ee({});return t.jsx("main",{className:"min-h-screen bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),t.jsx(ja,{title:p?"Edit Family Member":"Add Family Member",id:e,edit:p,setEdit:h,refetch:g.refetch})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:g.isLoading?t.jsx(Ee,{children:t.jsx(Ce,{className:"flex h-32 items-center justify-center",children:t.jsx(Me,{})})}):t.jsxs(t.Fragment,{children:[null==(r=null==(n=null==g?void 0:g.data)?void 0:n.data)?void 0:r.map(e=>{return t.jsxs(Ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx(Ie,{className:"pb-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ue,{className:"h-6 w-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx(Pe,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${a=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[a]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Fe("Are you sure?","Please confirm",async()=>{var a,s,t;try{const n=await b.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:c(e.toString())}});(null==(a=null==n?void 0:n.data)?void 0:a.success)?(i.success((null==(s=null==n?void 0:n.data)?void 0:s.message)||"Deleted successfully"),g.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:t.jsx(we,{className:"h-3.5 w-3.5"})})})]})}),t.jsxs(Ce,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(xe,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Ae(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(ge,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Address:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?t.jsx(Ve,{className:"h-4 w-4 text-green-500"}):t.jsx(Be,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),t.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?t.jsxs(t.Fragment,{children:[t.jsx(Ve,{className:"h-4 w-4 text-green-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Be,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(xe,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Ae(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var a}),0===(null==(m=null==(d=null==g?void 0:g.data)?void 0:d.data)?void 0:m.length)&&t.jsx(Ee,{className:"py-12 text-center",children:t.jsxs(Ce,{children:[t.jsx(ue,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),t.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const fa=Y().shape({name:H().required("Name is required"),mobile:H().required("Mobile is required"),altMobile:H().required("Alternate Mobile is required"),email:H().email("Invalid email").required("Email is required"),address:H().required("Address is required"),userType:H().required("User Type is required"),module_name:H().optional()});function ya({title:e="Add New User",edit:s,moduleAccessRefetch:d,getDataById:c,userData:x}){var u,p,h,g,b,j,v,f,y;const C=I(),M=ee({}),F=a.useRef(null),T=P(),{user:$}=m(),q=(null==(h=null==(p=null==(u=null==c?void 0:c.data)?void 0:u.data)?void 0:p.email)?void 0:h.split("@")[0])||"",R=(null==(g=localStorage.getItem("ulbName"))?void 0:g.split(" ")[0])||"",L=a.useMemo(()=>{var e,a,t,l,i,n,r,d,o,m,u,p;return s?{name:(null==x?void 0:x.name)||"",mobile:(null==x?void 0:x.mobile)||"",altMobile:(null==x?void 0:x.alternateMobile)||"",email:(null==x?void 0:x.email)||"",address:(null==x?void 0:x.address)||"",userType:(null==x?void 0:x.user_type)||""}:{name:(null==(a=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:a.emp_name)||"",mobile:(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.contact_no)||"",altMobile:(null==(n=null==(i=null==c?void 0:c.data)?void 0:i.data)?void 0:n.emergency_contact_no)||(null==(d=null==(r=null==c?void 0:c.data)?void 0:r.data)?void 0:d.contact_no)||"",email:"",address:(null==(m=null==(o=null==c?void 0:c.data)?void 0:o.data)?void 0:m.emp_present_address)||(null==(p=null==(u=null==c?void 0:c.data)?void 0:u.data)?void 0:p.emp_permanent_address)||"",userType:""}},[c]),Y=V({defaultValues:L,resolver:B(fa)}),O=(null==(b=Y.watch("userType"))?void 0:b.replace(/\s+/g,""))||"";a.useEffect(()=>{Y.reset(L)},[L,Y]),a.useEffect(()=>{(null==Y?void 0:Y.watch("userType"))&&!s&&Y.setValue("email",`${q}@${O.toLocaleLowerCase()}.${R.toLocaleLowerCase()}`)},[Y,q,O,R]);const U="Public Transport Management System",H="PTMS All Ulb",z=async(e,a)=>{var s,t,l,i;const r=a===U?null==(s=n)?void 0:s.onBoardingConductor:null==(t=n)?void 0:t.onBoardingConductorNew,d=await ie(r);if(!(null==(l=null==d?void 0:d.data)?void 0:l.status))return;const o=await W(e);(null==(i=null==o?void 0:o.data)?void 0:i.status)&&(await ne(String(o.data.data.id),d.data.data.cunique_id||""),re())},G=async e=>{var a,t;const l=await W(e);if(await ne(String(l.data.data.id??(null==x?void 0:x.id))),!(null==(a=null==l?void 0:l.data)?void 0:a.status))return;const n=s?"User updated successfully":"User created successfully";i.success(n),null==d||d(),null==(t=F.current)||t.click()},W=async e=>{try{const a=await K(),t=ae(e,a);return s?await se(t):await te(t)}catch(a){throw a}},K=async()=>{var e,a;const s=(null==(a=null==(e=c.data)?void 0:e.data)?void 0:a.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",t=await fetch(s),l=await t.blob();return new File([l],"employee_image.jpg",{type:l.type})},ae=(e,a)=>{var s,t;const l=new FormData;return l.append("name",e.name),l.append("mobile",e.mobile),l.append("altMobile",e.altMobile),l.append("email",e.email),l.append("address",e.address),l.append("userType",e.userType),l.append("ulbId",(null==(t=null==(s=c.data)?void 0:s.data)?void 0:t.ulb_id)||""),l.append("photo",a),l.append("id",parseInt(null==x?void 0:x.id)||""),l},se=async e=>await M.mutateAsync({api:r.updateUser,data:e}),te=async e=>{const a=await M.mutateAsync({api:r.createUserAuth,data:e});return await le(a),a},le=async e=>{var a,s,t,i,n;await M.mutateAsync({api:null==(a=l)?void 0:a.createModuleAccess,data:{emp_id:String(null==(t=null==(s=null==c?void 0:c.data)?void 0:s.data)?void 0:t.id),module_access_id:String(null==(n=null==(i=null==e?void 0:e.data)?void 0:i.data)?void 0:n.id),module_user_type:Y.getValues("userType")}})},ie=async e=>{var a,s,t,l,n,r;try{return await M.mutateAsync({api:e,data:{firstName:(null==(s=null==(a=null==c?void 0:c.data)?void 0:a.data)?void 0:s.emp_name)||"",bloodGrp:(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.emp_blood_group)||"",mobileNo:Y.getValues("mobile"),emailId:Y.getValues("email"),adhar_no:null==(r=null==(n=null==c?void 0:c.data)?void 0:n.data)?void 0:r.aadhaar_no}})}catch(d){const e=d instanceof Error?d.message:"An error occurred while creating PTMS User";throw i.error(e),d}},ne=async(e,a)=>{var s,t,l;try{return await M.mutateAsync({api:null==(s=n)?void 0:s.updateUserName,data:{id:Number(e),...a&&{user_name:a},emp_id:String(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.id)||""}})}catch(r){const e=r instanceof Error?r.message:"An error occurred while updating User Name";throw i.error(e),r}},re=()=>{var e;null==d||d(),i.success("User created successfully"),null==(e=F.current)||e.click()},de=Y.formState.isSubmitting||M.isPending;return t.jsxs(_,{children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),e]})}),t.jsx(w,{className:"sm:max-w-[500px]",children:t.jsxs(J,{methods:Y,onSubmit:Y.handleSubmit(async e=>{const a=Y.watch("module_name");a===U||a===H?await z(e,a):await G(e)}),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{children:s?"Update user information":"Add a new user to the system"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(Z,{name:"module_name",isSearch:!0,data:(null==(v=null==(j=null==C?void 0:C.data)?void 0:j.data)?void 0:v.map(e=>({label:String(e.module_name),value:String(e.module_name)})))||[]})}),t.jsx("div",{children:t.jsx(Z,{label:"User Type",name:"userType",isSearch:!0,selectedText:"Select user type",data:(null==(y=null==(f=null==T?void 0:T.data)?void 0:f.data)?void 0:y.map(e=>({label:String(e),value:String(e)})))||[]})}),t.jsx("div",{children:t.jsx(Q,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(Q,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),t.jsx(Q,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),t.jsx("div",{children:t.jsx(Q,{label:"Email",disabled:s,name:"email",type:"email",placeholder:"Enter email address"})}),t.jsx("div",{children:t.jsx(Q,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),t.jsx(Te,{})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:F,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:de,children:s?"Update":"Save"})]})]})})]})}function _a({userId:e}){const s=M(e),l=ee({}),[n,d]=a.useState([]),[o,c]=a.useState({}),[m,x]=a.useState("");a.useEffect(()=>{var e;(null==s?void 0:s.data)&&d((null==(e=s.data)?void 0:e.data)||[])},[s]);const u=n.filter(e=>e.role_name.toLowerCase().includes(m.toLowerCase())),p=n.filter(e=>e.permission_status).length,h=n.length,g=n.some(e=>e.permission_status);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[p," of ",h," roles enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(a=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(a.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",a.id]}),a.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:a.role_name})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:a.permission_status,onChange:()=>(async(a,t)=>{var n,o;c(e=>({...e,[a]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createWorkFlowRoleAuth}`,data:{userId:parseInt(e),wfRoleId:a,permissionStatus:!t}});c&&(null==(o=c.data)?void 0:o.status)&&(s.refetch(),d(e=>e.map(e=>e.id===a?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[a]:!1}))}})(a.id,a.permission_status),disabled:o[a.id]||!a.permission_status&&g,className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[a.id]||!a.permission_status&&g?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${a.permission_status?"translate-x-5":"translate-x-0"} ${o[a.id]?"animate-pulse":""}`,children:o[a.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},a.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function Na({userId:e}){const s=F(e),l=ee({}),[n,d]=a.useState([]),[o,c]=a.useState({}),[m,x]=a.useState("");a.useEffect(()=>{var e;(null==s?void 0:s.data)&&d((null==(e=s.data)?void 0:e.data)||[])},[s]);const u=n.filter(e=>e.menu_role_name.toLowerCase().includes(m.toLowerCase())),p=n.filter(e=>e.permission_status).length,h=n.length;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[p," of ",h," roles enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(a=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(a.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",a.id]}),a.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:a.menu_role_name})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:a.permission_status,onChange:()=>(async(a,t)=>{var n,o;c(e=>({...e,[a]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createMenuRoleAuth}`,data:{userId:parseInt(e),menuRoleId:a,permissionStatus:!t}});c&&(null==(o=c.data)?void 0:o.status)&&(s.refetch(),d(e=>e.map(e=>e.id===a?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[a]:!1}))}})(a.id,a.permission_status),disabled:o[a.id],className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[a.id]?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${a.permission_status?"translate-x-5":"translate-x-0"} ${o[a.id]?"animate-pulse":""}`,children:o[a.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},a.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function wa({userId:e}){const s=T(e),l=ee({}),[n,d]=a.useState([]),[o,c]=a.useState({}),[m,x]=a.useState("");a.useEffect(()=>{var e;(null==s?void 0:s.data)&&d((null==(e=s.data)?void 0:e.data)||[])},[s]);const u=n.filter(e=>e.ward_name.toString().includes(m)),p=n.filter(e=>e.permission_status).length,h=n.length;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[p," of ",h," wards enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search wards...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(a=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(a.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",a.id]}),a.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",a.ward_name]})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:a.permission_status,onChange:()=>(async(a,t)=>{var n,o;c(e=>({...e,[a]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createWardAuth}`,data:{userId:parseInt(e),wardList:[{permissionStatus:!t,wardId:a}]}});c&&(null==(o=c.data)?void 0:o.status)&&(s.refetch(),d(e=>e.map(e=>e.id===a?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[a]:!1}))}})(a.id,a.permission_status),disabled:o[a.id],className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[a.id]?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${a.permission_status?"translate-x-5":"translate-x-0"} ${o[a.id]?"animate-pulse":""}`,children:o[a.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},a.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',m,'"']})})]})})}function Sa({getDataById:e}){var s,l,i,n,d,o,m,x;const[u,p]=a.useState(""),[h,g]=a.useState("workflow"),b=$(c(String(null==(l=null==(s=null==e?void 0:e.data)?void 0:s.data)?void 0:l.id))),j=te({api:null==(i=r)?void 0:i.getUsrByIdAuth,config:{id:u},value:[u],options:{enabled:!!u}}),f=null==(o=null==(d=null==(n=null==j?void 0:j.data)?void 0:n.data)?void 0:d.data)?void 0:o[0],y=[{id:"workflow",label:"Workflow Permission",icon:fe},{id:"permittedRoles",label:" Permitted Roles",icon:ye},{id:"ward",label:"Ward Role",icon:me}];return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[t.jsx("div",{children:t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("div",{children:t.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"h-9 w-full cursor-pointer rounded-md border-2 border-slate-300 bg-slate-50 px-3 transition-colors\r\n                     duration-200 hover:border-blue-400 focus:border-blue-400 focus:outline-none focus:ring-2\r\n                     focus:ring-blue-500 md:w-52",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Module Access"}),null==(x=null==(m=null==b?void 0:b.data)?void 0:m.data)?void 0:x.map(e=>t.jsx("option",{value:e.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:e.module_user_type},e.module_access_id))]})}),t.jsx(ya,{title:"Add User",edit:!1,moduleAccessRefetch:b.refetch,getDataById:e,userData:f})]})]}),f?t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4 flex justify-end",children:t.jsx(ya,{title:"Edit User",edit:!0,moduleAccessRefetch:b.refetch,getDataById:e,userData:f})}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:t.jsx(v,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:f.id})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:t.jsx(v,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:f.user_name})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:t.jsx(v,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:f.name})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:t.jsx(oe,{className:"h-5 w-5 text-orange-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:f.email})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:t.jsx(de,{className:"h-5 w-5 text-cyan-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:f.mobile})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:t.jsx(re,{className:"h-5 w-5 text-indigo-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),t.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:f.user_type})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:t.jsx(re,{className:"h-5 w-5 text-emerald-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),t.jsx("span",{className:"inline-block rounded-full px-3 py-1 text-xs font-medium "+(f.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:f.suspended?"Suspended":"Active"})]})]}),f.photo&&"/"!==f.photo&&t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:t.jsx(v,{className:"h-5 w-5 text-pink-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),t.jsx("img",{src:f.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),t.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[t.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:t.jsx("div",{className:"flex overflow-x-auto",children:y.map(e=>{const a=e.icon;return t.jsxs("button",{onClick:()=>g(e.id),className:"flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all "+(h===e.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[t.jsx(a,{className:"h-4 w-4"}),e.label]},e.id)})})}),t.jsxs("div",{className:"p-6",children:["workflow"===h&&t.jsx(_a,{userId:u}),"permittedRoles"===h&&t.jsx(Na,{userId:u}),"ward"===h&&t.jsx(wa,{userId:u})]})]})]}):t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:t.jsx(re,{className:"h-10 w-10 text-slate-400"})}),t.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),t.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Da({id:e,getDataById:s}){var i;const[n,r]=a.useState("calendar"),[d,o]=a.useState(""),[c,m]=a.useState((new Date).getFullYear()),[u,p]=a.useState("all"),h=se({api:`${l.getAllAttendanceByEmpId}?emp_id=${e}`,key:"getAllAttendanceByEmpId",options:{enabled:!0}}),g=(null==(i=null==h?void 0:h.data)?void 0:i.data)||[],b=e=>{switch(e){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:t.jsx(Ve,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:t.jsx(_e,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:t.jsx(xe,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:t.jsx(Oe,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:t.jsx(Be,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},j=e=>{if(!e)return"--:--";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},v=a.useMemo(()=>{if(!d.trim())return g;const e=d.toLowerCase();return g.filter(a=>`${a.month} ${a.year}`.toLowerCase().includes(e))},[g,d]),f=a.useMemo(()=>"calendar"!==n?v:g.filter(e=>{const a=parseInt(e.year)===c,s="all"===u||e.month===u;return a&&s}),[g,c,u,n,v]),y=("calendar"===n?f:v).reduce((e,a)=>(1===a.attendance_status?e.present++:2===a.attendance_status?e.leave++:e.absent++,e.totalHours+=parseInt(a.working_hours||"0"),e.totalDays++,e),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),_=v.reduce((e,a)=>{const s=`${a.month} ${a.year}`;return e[s]||(e[s]=[]),e[s].push(a),e},{}),N=a.useMemo(()=>{const e=(new Date).getFullYear();return[e-1,e,e+1]},[g]),w=a.useMemo(()=>{const e={};return g.forEach(a=>{const s=parseInt(a.year),t=a.month;e[s]||(e[s]={}),e[s][t]||(e[s][t]={});const l=new Date(a.date).getDate().toString();e[s][t][l]=a}),e},[g]),S=a.useMemo(()=>{const e=new Set;return g.forEach(a=>{e.add(`${a.month} ${a.year}`)}),Array.from(e).sort((e,a)=>{const[s,t]=e.split(" "),[l,i]=a.split(" "),n=new Date(`${s} 1, ${t}`);return new Date(`${l} 1, ${i}`).getTime()-n.getTime()})},[g]),D=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[t.jsx("div",{children:t.jsx("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Attendance Records"})}),t.jsxs("div",{className:"relative w-64",children:[t.jsx(Le,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:d,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),d&&t.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(Be,{className:"h-4 w-4"})})]})]}),d&&S.filter(e=>e.toLowerCase().includes(d.toLowerCase())).length>0&&t.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:S.filter(e=>e.toLowerCase().includes(d.toLowerCase())).slice(0,5).map(e=>t.jsx("button",{onClick:()=>o(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:e},e))})]}),t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[t.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y.present})]}),t.jsx(Ve,{className:"h-10 w-10 text-green-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y.absent})]}),t.jsx(Be,{className:"h-10 w-10 text-red-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y.leave})]}),t.jsx(_e,{className:"h-10 w-10 text-blue-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y.totalHours})]}),t.jsx(Ye,{className:"h-10 w-10 text-purple-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y.totalDays})]}),t.jsx(xe,{className:"h-10 w-10 text-indigo-500"})]})})]}),t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>r("calendar"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("calendar"===n?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[t.jsx(Oe,{className:"h-4 w-4"}),"Calendar View"]}),t.jsxs("button",{onClick:()=>r("list"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("list"===n?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[t.jsx(x,{className:"h-4 w-4"}),"List View"]})]})}),"calendar"===n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:N.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),t.jsx("select",{value:c,onChange:e=>m(parseInt(e.target.value)),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:N.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Month:"}),t.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:"All Months"}),D.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),"all"!==u&&t.jsxs("button",{onClick:()=>p("all"),className:"flex items-center gap-1 rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200",children:[t.jsx(Be,{className:"h-4 w-4"}),"Clear Filter"]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2",children:D.filter(e=>"all"===u||u===e).map(e=>{var a;const s=((e,a)=>{const s=new Date(`${e} 1, ${a}`).getMonth();return new Date(a,s+1,0).getDate()})(e,c),l=((e,a)=>{const s=new Date(`${e} 1, ${a}`).getMonth();return new Date(a,s,1).getDay()})(e,c),i=Array.from({length:s},(e,a)=>a+1),n=Array.from({length:l},(e,a)=>a),r=(null==(a=w[c])?void 0:a[e])||{};return t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("h3",{className:"mb-3 text-center text-lg font-semibold text-gray-800",children:e}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((a,s)=>t.jsx("div",{className:"p-1 text-center text-xs font-semibold text-gray-600",children:a},`${e}-${a}-${s}`)),n.map(a=>t.jsx("div",{className:"p-1"},`empty-${e}-${a}`)),i.map(a=>{const s=r[a.toString()],l=s?b(s.attendance_status):null;return t.jsxs("div",{className:`min-h-24 rounded border p-1.5 text-xs transition-all ${s?null==l?void 0:l.color:"border-gray-200 bg-gray-50"} ${s?"cursor-pointer hover:shadow-md":""}`,children:[t.jsx("div",{className:"mb-1 font-semibold text-gray-700",children:a}),s&&l&&t.jsxs("div",{className:"space-y-0.5",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:l.iconColor,children:l.icon}),t.jsx("span",{className:"text-[10px] font-medium",children:l.label})]}),1===s.attendance_status&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-[9px] text-gray-600",children:["In: ",j(s.emp_in_time)]}),t.jsxs("div",{className:"text-[9px] text-gray-600",children:["Out: ",j(s.emp_out_time)]}),t.jsxs("div",{className:"text-[10px] font-medium text-gray-700",children:[s.working_hours,"h"]})]})]})]},`${e}-${a}`)})]})]},e)})})]}),"list"===n&&t.jsx(t.Fragment,{children:Object.entries(_).map(([e,a])=>t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[t.jsx(xe,{className:"h-5 w-5 text-gray-600"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e})]}),t.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(e=>{const a=b(e.attendance_status);return t.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:(s=e.date,new Date(s).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${a.color}`,children:[t.jsx("span",{className:null==a?void 0:a.iconColor,children:null==a?void 0:a.icon}),null==a?void 0:a.label]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[t.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),j(e.emp_in_time)]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[t.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),j(e.emp_out_time)]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.working_hours||"0","h"]})})]},e.id);var s})})]})})})]},e))}),0===v.length&&t.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[t.jsx(xe,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),t.jsx("p",{className:"text-lg text-gray-500",children:d?"No attendance records found for the search term":"No attendance records found"}),d&&t.jsx("button",{onClick:()=>o(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const ka=Y().shape({education:z().of(Y().shape({qualification:H().notRequired(),specialization:H().required(),board_university:H().notRequired(),passing_year:H().notRequired(),percentage:H().notRequired(),grade:H().notRequired(),place:H().notRequired()})),trainingInfo:z().of(Y().shape({training_name:H().notRequired(),training_type:H().notRequired(),institute:H().notRequired(),start_date:H().notRequired(),end_date:H().notRequired(),duration:H().notRequired(),certificate:W().notRequired()}))});function Aa({id:e,getDataById:s}){var n,r;const d=ee({}),o=ee({}),c=se({api:`${l.getEducationDetails}?emp_id=${e}`,key:"get-employee-qualificationsdddddddd",value:[e],options:{enabled:!!e}}),m=se({api:`${l.getEmployeeTrainings}?emp_id=${e}`,key:"get-employee-training",value:[e],options:{enabled:!!e}}),x=a.useMemo(()=>{var e,a,s,t;return(null==(a=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:a.length)>0?null==(t=null==(s=null==c?void 0:c.data)?void 0:s.data)?void 0:t.map(e=>{var a;return{qualification:e.qualification,specialization:e.specialization,board_university:e.board_university,passing_year:null==(a=e.passing_year)?void 0:a.toString(),percentage:e.percentage,grade:e.grade,place:e.place}}):[{qualification:"Matriculation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Intermediate",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Post Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""}]},[null==(n=null==c?void 0:c.data)?void 0:n.data]),p=a.useMemo(()=>{var e,a,s,t;return(null==(a=null==(e=null==m?void 0:m.data)?void 0:e.data)?void 0:a.length)>0?null==(t=null==(s=null==m?void 0:m.data)?void 0:s.data)?void 0:t.map(e=>({training_name:e.training_name,training_type:String(e.training_type),institute:e.institute,start_date:e.start_date,end_date:e.end_date,duration:e.duration,certificate:null})):[{training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null}]},[null==(r=null==m?void 0:m.data)?void 0:r.data]),h=V({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{education:x,trainingInfo:p},resolver:B(ka)}),g=L({control:h.control,name:"education"}),b=L({control:h.control,name:"trainingInfo"});a.useEffect(()=>{h.reset({trainingInfo:p,education:x})},[p,x]);return t.jsx("div",{children:t.jsx(J,{methods:h,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded bg-blue-100 p-1",children:t.jsx(ca,{className:"h-4 w-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Education Records"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Academic qualifications"})]})]})}),t.jsxs("div",{className:"space-y-2.5",children:[null==g?void 0:g.fields.map((e,a)=>t.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-blue-300 hover:shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white",children:a+1}),t.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",a+1]})]}),a>=4&&t.jsx("button",{type:"button",onClick:()=>(e=>{g.remove(e)})(a),className:"rounded p-1 text-red-600 hover:bg-red-50",children:t.jsx(we,{size:14})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-7",children:[t.jsx(Q,{name:`education[${a}].qualification`,label:"Qualification",disabled:a<4,placeholder:"Qualification"}),t.jsx(Q,{name:`education[${a}].specialization`,label:"Specialization",placeholder:"Specialization"}),t.jsx(Q,{name:`education[${a}].board_university`,label:"Board/University",placeholder:"Board/University"}),t.jsx(Q,{name:`education[${a}].passing_year`,label:"Passing Year",placeholder:"Year",inputValidation:["number","zip"]}),t.jsx(Q,{name:`education[${a}].percentage`,label:"Marks %",placeholder:"Marks",inputValidation:["number","zip"]}),t.jsx(Q,{name:`education[${a}].grade`,label:"Grade",placeholder:"Grade"}),t.jsx(Q,{name:`education[${a}].place`,label:"Place",placeholder:"Location"})]})]},e.id)),t.jsxs("div",{className:"flex justify-center pt-0.5",children:[t.jsxs("button",{type:"button",onClick:()=>{g.append({qualification:"",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-blue-300 bg-blue-50 px-3 py-1.5 text-xs font-medium text-blue-700 transition-all hover:border-blue-400 hover:bg-blue-100",children:[t.jsx(oa,{size:13}),"Add Record"]}),t.jsxs(X,{type:"button",isLoading:d.isPending,onClick:async()=>{var a,s,t,n;h.clearErrors("education");if(!(await h.trigger("education"))){const e=h.formState.errors.education;if(e&&Array.isArray(e))for(let a=0;a<e.length;a++)if(e[a]){const s=Object.keys(e[a]||{});if(s.length>0){const e=`education.${a}.${s[0]}`;h.setFocus(e);break}}return}const r=h.watch("education");try{const o=await d.mutateAsync({api:null==(a=l)?void 0:a.addEducationDetails,data:{emp_id:String(u(e)),qualifications:r}});(null==(s=null==o?void 0:o.data)?void 0:s.success)?i.success((null==(t=null==o?void 0:o.data)?void 0:t.message)||"Education details submitted successfully"):i.error((null==(n=null==o?void 0:o.data)?void 0:n.message)||"Failed to submit Education details")}catch(o){i.error("Failed to submit Education details")}},className:"\r\nml-3 inline-flex items-center gap-1 rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1\r\n                  ",children:[t.jsx(oa,{size:13}),"Submit Education Details"]})]})]})]}),t.jsx("div",{className:"border-t border-gray-200"}),t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded bg-indigo-100 p-1",children:t.jsx(Ue,{className:"h-4 w-4 text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Training Records"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Professional training"})]})]})}),t.jsxs("div",{className:"space-y-2.5",children:[null==b?void 0:b.fields.map((e,a)=>t.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-indigo-300 hover:shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-indigo-600 text-xs font-semibold text-white",children:a+1}),t.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",a+1]})]}),a>=1&&t.jsx("button",{type:"button",onClick:()=>(e=>{b.remove(e)})(a),className:"rounded p-1 text-red-600 transition-all hover:bg-red-50",children:t.jsx(we,{size:14})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-6",children:[t.jsx(Q,{name:`trainingInfo[${a}].training_name`,label:"Training Name",placeholder:"Training Name"}),t.jsx("div",{children:t.jsx(Z,{name:`trainingInfo[${a}].training_type`,label:"Type",data:[{label:"Online",value:"Online"},{label:"Offline",value:"Offline"},{label:"Hybrid",value:"Hybrid"},{label:"Workshop",value:"Workshop"},{label:"Certification",value:"Certification"}]})}),t.jsx(Q,{name:`trainingInfo[${a}].institute`,label:"Institute",placeholder:"Institute"}),t.jsx(Q,{type:"date",name:`trainingInfo[${a}].start_date`,label:"Start Date",placeholder:"Start Date"}),t.jsx(Q,{type:"date",name:`trainingInfo[${a}].end_date`,label:"End Date",placeholder:"End Date"}),t.jsx(Q,{name:`trainingInfo[${a}].duration`,label:"Duration",placeholder:"Duration"})]})]},e.id)),t.jsxs("div",{className:"flex justify-center pt-0.5",children:[t.jsxs("button",{type:"button",onClick:()=>{b.append({training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-indigo-300 bg-indigo-50 px-3 py-1.5 text-xs font-medium text-indigo-700 transition-all hover:border-indigo-400 hover:bg-indigo-100",children:[t.jsx(oa,{size:13}),"Add Record"]}),t.jsxs(X,{isLoading:o.isPending,type:"button",onClick:async()=>{var a,s,t;h.clearErrors("trainingInfo");if(!(await h.trigger("trainingInfo"))){const e=h.formState.errors.trainingInfo;if(e&&Array.isArray(e))for(let a=0;a<e.length;a++)if(e[a]){const s=Object.keys(e[a]||{});if(s.length>0){const e=`trainingInfo.${a}.${s[0]}`;h.setFocus(e);break}}return}const n=h.getValues("trainingInfo");try{const r=await o.mutateAsync({api:`${l.createEmployeeTraining}`,data:{emp_id:String(u(e)),trainings:n}});(null==(a=null==r?void 0:r.data)?void 0:a.success)?i.success((null==(s=null==r?void 0:r.data)?void 0:s.message)||"Training details submitted successfully"):i.error((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Failed to submit Training details")}catch(r){i.error("Failed to submit Training details")}},className:"ml-3 inline-flex items-center gap-1 rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1\r\n                    ",children:[t.jsx(oa,{size:13}),"Submit Training Details"]})]})]})]})]})})})}function Ea({id:e,getDataById:a}){return t.jsx(Aa,{id:e,getDataById:a})}const Ca=Y().shape({scale:U().nullable().transform((e,a)=>""===a?null:e),increment_date:H().required("Increment date is required"),increment_percentage:U().required("Increment percentage is required").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),increment_amount:U().required("Increment amount is required").min(0,"Amount must be at least 0"),old_basic_pay:U().nullable().transform((e,a)=>""===a?null:e),new_basic_pay:U().required("New basic pay is required").min(0,"Basic pay must be at least 0"),vide_order_no:H().nullable(),vide_order_date:H().nullable(),reference_doc:W().nullable(),is_under_esic_deduction:G().default(!1),esic_amount:U().nullable().min(0).default(0),effective_from_date:H().required("Effective from date is required")});function Ia({title:e="Add Increment Record",empId:s,editData:n,isOpen:r,onClose:d,refetch:c,getDataById:m}){ee({});const x=ae({}),u=a.useRef(null),[p,h]=a.useState(!1),g=void 0!==r,b=g?r:p,j=!!n,v=V({defaultValues:{scale:null,increment_date:"",increment_percentage:0,increment_amount:0,old_basic_pay:null,new_basic_pay:0,vide_order_no:"",vide_order_date:"",reference_doc:null,is_under_esic_deduction:!1,esic_amount:0,effective_from_date:""},resolver:B(Ca)}),f=async e=>{var a,t,r,d,o,m;try{const u=e.reference_doc instanceof File,p=new window.FormData;if(p.append("emp_id",s),p.append("scale",String(e.scale||"")),p.append("increment_date",e.increment_date),p.append("increment_percentage",String(e.increment_percentage)),p.append("increment_amount",String(e.increment_amount)),p.append("old_basic_pay",String(e.old_basic_pay||"")),p.append("new_basic_pay",String(e.new_basic_pay)),p.append("vide_order_no",e.vide_order_no||""),p.append("vide_order_date",e.vide_order_date||""),p.append("is_under_esic_deduction",String(e.is_under_esic_deduction)),p.append("esic_amount",String(e.esic_amount||0)),p.append("effective_from_date",e.effective_from_date),u&&p.append("reference_doc",e.reference_doc),j&&n){const e=await x.mutateAsync({api:`${l.updateIncrementRecord}?emp_id=${s}&increment_id=${n.id}`,data:p});(null==(a=e.data)?void 0:a.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Increment record updated successfully"),y()):i.error((null==(r=e.data)?void 0:r.message)||"Failed to update increment record")}else{const e=await x.mutateAsync({api:`${l.addIncrementRecord}?emp_id=${s}`,data:p});(null==(d=e.data)?void 0:d.success)?(i.success((null==(o=null==e?void 0:e.data)?void 0:o.message)||"Increment record added successfully"),y()):i.error((null==(m=e.data)?void 0:m.message)||"Failed to add increment record")}v.reset(),null==c||c()}catch(u){i.error("An error occurred while processing your request")}},y=()=>{g&&d?d():h(!1),v.reset()},C=e=>{g?!e&&d&&d():h(e)};a.useEffect(()=>{var e,a,s;j&&n?v.reset({scale:n.scale,increment_date:(null==(e=n.increment_date)?void 0:e.split("T")[0])||"",increment_percentage:n.increment_percentage,increment_amount:n.increment_amount,old_basic_pay:n.old_basic_pay,new_basic_pay:n.new_basic_pay,vide_order_no:n.vide_order_no||"",vide_order_date:(null==(a=n.vide_order_date)?void 0:a.split("T")[0])||"",reference_doc:null,is_under_esic_deduction:n.is_under_esic_deduction||!1,esic_amount:n.esic_amount||0,effective_from_date:(null==(s=n.effective_from_date)?void 0:s.split("T")[0])||""}):v.reset({scale:null,increment_date:"",increment_percentage:0,increment_amount:0,old_basic_pay:null,new_basic_pay:0,vide_order_no:"",vide_order_date:"",reference_doc:null,is_under_esic_deduction:!1,esic_amount:0,effective_from_date:""})},[j,n,v]);const I=v.formState.isSubmitting||x.isPending;return g?t.jsx(_,{open:b,onOpenChange:C,children:t.jsx(w,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[600px]",children:t.jsxs(J,{methods:v,onSubmit:v.handleSubmit(f),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{children:j?"Update increment record details":"Add a new increment record"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[t.jsx("div",{children:t.jsx(Q,{label:"Increment Date *",name:"increment_date",type:"date"})}),t.jsx("div",{children:t.jsx(Q,{label:"Effective From Date *",name:"effective_from_date",type:"date"})}),t.jsx("div",{children:t.jsx(Q,{label:"Increment Percentage (%) *",name:"increment_percentage",type:"number",placeholder:"Enter percentage"})}),t.jsx("div",{children:t.jsx(Q,{label:"Increment Amount *",name:"increment_amount",type:"number",placeholder:"Enter increment amount"})}),t.jsx("div",{children:t.jsx(Q,{label:"Old Basic Pay",name:"old_basic_pay",type:"number",placeholder:"Enter old basic pay"})}),t.jsx("div",{children:t.jsx(Q,{label:"New Basic Pay *",name:"new_basic_pay",type:"number",placeholder:"Enter new basic pay"})}),t.jsx("div",{children:t.jsx(Q,{label:"Scale",name:"scale",type:"number",placeholder:"Enter scale"})}),t.jsx("div",{children:t.jsx(ce,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),t.jsx(Te,{className:"col-span-full"}),t.jsx("div",{children:t.jsx(Q,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number"})}),t.jsx("div",{children:t.jsx(Q,{label:"Vide Order Date",name:"vide_order_date",type:"date"})}),t.jsx(Te,{className:"col-span-full"}),t.jsxs("div",{className:"col-span-full",children:[t.jsx(Re,{name:"is_under_esic_deduction",label:"Under ESIC Deduction"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Check this if the employee is covered under Employee State Insurance Corporation (ESIC) scheme after this increment"})]}),v.watch("is_under_esic_deduction")&&t.jsx("div",{children:t.jsx(Q,{label:"ESIC Amount",name:"esic_amount",type:"number",placeholder:"Enter ESIC amount"})})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(o,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),t.jsx(X,{type:"submit",isLoading:I,children:j?"Update":"Save"})]})]})})}):t.jsxs(_,{open:b,onOpenChange:C,children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Add Increment Record"]})}),t.jsx(w,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[600px]",children:t.jsxs(J,{methods:v,onSubmit:v.handleSubmit(f),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{children:"Add a new increment record"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[t.jsx("div",{children:t.jsx(Q,{label:"Increment Date *",name:"increment_date",type:"date"})}),t.jsx("div",{children:t.jsx(Q,{label:"Effective From Date *",name:"effective_from_date",type:"date"})}),t.jsx("div",{children:t.jsx(Q,{label:"Increment Percentage (%) *",name:"increment_percentage",type:"number",placeholder:"Enter percentage"})}),t.jsx("div",{children:t.jsx(Q,{label:"Increment Amount *",name:"increment_amount",type:"number",placeholder:"Enter increment amount"})}),t.jsx("div",{children:t.jsx(Q,{label:"Old Basic Pay",name:"old_basic_pay",type:"number",placeholder:"Enter old basic pay"})}),t.jsx("div",{children:t.jsx(Q,{label:"New Basic Pay *",name:"new_basic_pay",type:"number",placeholder:"Enter new basic pay"})}),t.jsx("div",{children:t.jsx(Q,{label:"Scale",name:"scale",type:"number",placeholder:"Enter scale"})}),t.jsx("div",{children:t.jsx(ce,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),t.jsx(Te,{className:"col-span-full"}),t.jsx("div",{children:t.jsx(Q,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number"})}),t.jsx("div",{children:t.jsx(Q,{label:"Vide Order Date",name:"vide_order_date",type:"date"})}),t.jsx(Te,{className:"col-span-full"}),t.jsxs("div",{className:"col-span-full",children:[t.jsx(Re,{name:"is_under_esic_deduction",label:"Under ESIC Deduction"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Check this if the employee is covered under Employee State Insurance Corporation (ESIC) scheme after this increment"})]}),v.watch("is_under_esic_deduction")&&t.jsx("div",{children:t.jsx(Q,{label:"ESIC Amount",name:"esic_amount",type:"number",placeholder:"Enter ESIC amount"})})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:u,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:I,children:"Save"})]})]})})]})}function Pa({id:e,getDataById:s}){var n,r,d,c,m,x,u,p,h,g,b,j;const[v,f]=a.useState(null),y=se({api:`${l.getIncrementHistory}?emp_id=${e}`,key:"getIncrementHistory",value:[e],options:{enabled:!!e}}),_=ee({}),N=e=>null==e?"â€”":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return t.jsx("main",{className:"bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage increment history of the employee. Total increments:"," ",(null==(r=null==(n=null==y?void 0:y.data)?void 0:n.data)?void 0:r.total_records)||0]}),(null==(c=null==(d=null==y?void 0:y.data)?void 0:d.data)?void 0:c.total_increment_amount)?t.jsxs("p",{className:"text-sm font-medium text-green-600",children:["Total Increment Amount:"," ",N(y.data.data.total_increment_amount)]}):null]}),t.jsx(Ia,{title:"Add Increment Record",empId:e,refetch:y.refetch,getDataById:s})]}),v&&t.jsx(Ia,{title:"Edit Increment Record",empId:e,editData:v,isOpen:!0,onClose:()=>{f(null)},refetch:y.refetch,getDataById:s}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:y.isLoading?t.jsx(Ee,{children:t.jsx(Ce,{className:"flex h-32 items-center justify-center",children:t.jsx(Me,{})})}):t.jsxs(t.Fragment,{children:[null==(u=null==(x=null==(m=null==y?void 0:y.data)?void 0:m.data)?void 0:x.increment_history)?void 0:u.map(a=>t.jsxs(Ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx(Ie,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-full bg-green-100 p-2",children:t.jsx(He,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{children:[t.jsxs(Pe,{className:"text-lg font-semibold text-gray-900",children:["Increment -"," ",Ae(a.increment_date).format("DD MMM YYYY")]}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700",children:[t.jsx(ze,{className:"mr-1 h-3 w-3"}),N(a.increment_amount)]}),t.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-700",children:[a.increment_percentage,"%"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{f(e)})(a),children:t.jsx(Ge,{className:"h-4 w-4"})}),t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async a=>{Fe("Are you sure?","This will delete the increment record permanently.",async()=>{var s,t,n;try{const r=await _.mutateAsync({api:`${l.deleteIncrementRecord}?emp_id=${e}&increment_id=${a}`,data:{}});(null==(s=null==r?void 0:r.data)?void 0:s.success)?(i.success((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Increment record deleted successfully"),y.refetch()):i.error((null==(n=null==r?void 0:r.data)?void 0:n.message)||"Failed to delete increment record")}catch(r){i.error("Error deleting increment record")}})})(a.id),children:t.jsx(we,{className:"h-4 w-4"})})]})]})}),t.jsxs(Ce,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Old Basic Pay"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:N(a.old_basic_pay)})]}),t.jsxs("div",{className:"rounded-lg border bg-green-50 p-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500",children:"New Basic Pay"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-green-700",children:N(a.new_basic_pay)})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Effective From"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:a.effective_from_date?Ae(a.effective_from_date).format("DD MMM YYYY"):"â€”"})]})]}),(a.vide_order_no||a.vide_order_date)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[a.vide_order_no&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",t.jsx("span",{className:"font-medium",children:a.vide_order_no})]})]}),a.vide_order_date&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",t.jsx("span",{className:"font-medium",children:Ae(a.vide_order_date).format("DD MMM YYYY")})]})]})]}),a.is_under_esic_deduction&&t.jsx("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-3",children:t.jsxs("p",{className:"text-sm text-orange-700",children:["Under ESIC Deduction - Amount:"," ",N(a.esic_amount)]})}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(xe,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Ae(a.created_at).format("DD MMM YYYY, hh:mm A")]}),a.scale&&t.jsxs("span",{className:"ml-2",children:["| Scale: ",a.scale]})]})})]})]},a.id)),(!(null==(h=null==(p=null==y?void 0:y.data)?void 0:p.data)?void 0:h.increment_history)||0===(null==(j=null==(b=null==(g=null==y?void 0:y.data)?void 0:g.data)?void 0:b.increment_history)?void 0:j.length))&&t.jsx(Ee,{className:"py-12 text-center",children:t.jsxs(Ce,{children:[t.jsx(He,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No increment records found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add increment history records to track salary progression"})]})})]})})]})})}const Ma=[{label:"Regular",value:"regular"},{label:"Ad-hoc",value:"adhoc"},{label:"Time Bound",value:"time_bound"},{label:"Merit Based",value:"merit_based"}],Fa=Y().shape({to_designation_id:U().required("To designation is required"),from_designation_id:U().nullable().transform((e,a)=>""===a?null:e),from_basic_pay:U().nullable().transform((e,a)=>""===a?null:e),from_grade_pay:U().nullable().transform((e,a)=>""===a?null:e),to_basic_pay:U().nullable().transform((e,a)=>""===a?null:e),to_grade_pay:U().nullable().transform((e,a)=>""===a?null:e),from_pay_level_id:U().nullable().transform((e,a)=>""===a?null:e),to_pay_level_id:U().nullable().transform((e,a)=>""===a?null:e),promotion_type:H().oneOf(["regular","adhoc","time_bound","merit_based"]).default("regular"),promotion_date:H().required("Promotion date is required"),effective_from:H().required("Effective from date is required"),vide_order_no:H().nullable(),vide_order_date:H().nullable(),reference_doc:W().nullable(),remarks:H().nullable()});function Ta({title:e="Add Promotion Record",empId:s,editData:n,isOpen:r,onClose:d,refetch:c,getDataById:m}){var x,u;const p=ee({}),h=ae({}),g=a.useRef(null),[b,j]=a.useState(!1),v=void 0!==r,f=v?r:b,y=!!n,C=se({api:l.getAllDesignationMstr,key:"getAllDesignations",options:{enabled:!0}}),I=(null==(u=null==(x=null==C?void 0:C.data)?void 0:x.data)?void 0:u.map(e=>({label:e.designation_name,value:e.id.toString()})))||[],P=V({defaultValues:{to_designation_id:0,from_designation_id:null,from_basic_pay:null,from_grade_pay:null,to_basic_pay:null,to_grade_pay:null,from_pay_level_id:null,to_pay_level_id:null,promotion_type:"regular",promotion_date:"",effective_from:"",vide_order_no:"",vide_order_date:"",reference_doc:null,remarks:""},resolver:B(Fa)}),M=()=>{v&&d?d():j(!1),P.reset()},F=e=>{v?!e&&d&&d():j(e)};a.useEffect(()=>{var e,a,s;y&&n?P.reset({to_designation_id:n.to_designation_id,from_designation_id:n.from_designation_id,from_basic_pay:n.from_basic_pay,from_grade_pay:n.from_grade_pay,to_basic_pay:n.to_basic_pay,to_grade_pay:n.to_grade_pay,from_pay_level_id:n.from_pay_level_id,to_pay_level_id:n.to_pay_level_id,promotion_type:n.promotion_type||"regular",promotion_date:(null==(e=n.promotion_date)?void 0:e.split("T")[0])||"",effective_from:(null==(a=n.effective_from)?void 0:a.split("T")[0])||"",vide_order_no:n.vide_order_no||"",vide_order_date:(null==(s=n.vide_order_date)?void 0:s.split("T")[0])||"",reference_doc:null,remarks:n.remarks||""}):P.reset({to_designation_id:0,from_designation_id:null,from_basic_pay:null,from_grade_pay:null,to_basic_pay:null,to_grade_pay:null,from_pay_level_id:null,to_pay_level_id:null,promotion_type:"regular",promotion_date:"",effective_from:"",vide_order_no:"",vide_order_date:"",reference_doc:null,remarks:""})},[y,n,P]);const T=P.formState.isSubmitting||p.isPending||h.isPending,$=t.jsxs(J,{methods:P,onSubmit:P.handleSubmit(async e=>{var a,t,r,d,o,m;try{const x=e.reference_doc instanceof File,u=new window.FormData;if(u.append("to_designation_id",String(e.to_designation_id)),u.append("from_designation_id",String(e.from_designation_id||"")),u.append("from_basic_pay",String(e.from_basic_pay||"")),u.append("from_grade_pay",String(e.from_grade_pay||"")),u.append("to_basic_pay",String(e.to_basic_pay||"")),u.append("to_grade_pay",String(e.to_grade_pay||"")),u.append("from_pay_level_id",String(e.from_pay_level_id||"")),u.append("to_pay_level_id",String(e.to_pay_level_id||"")),u.append("promotion_type",e.promotion_type||"regular"),u.append("promotion_date",e.promotion_date),u.append("effective_from",e.effective_from),u.append("vide_order_no",e.vide_order_no||""),u.append("vide_order_date",e.vide_order_date||""),u.append("remarks",e.remarks||""),x&&u.append("reference_doc",e.reference_doc),y&&n){const e=await h.mutateAsync({api:`${l.updatePromotionRecord}?emp_id=${s}&promotion_id=${n.id}`,data:u});(null==(a=e.data)?void 0:a.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Promotion record updated successfully"),M()):i.error((null==(r=e.data)?void 0:r.message)||"Failed to update promotion record")}else{const e=await h.mutateAsync({api:`${l.addPromotionRecord}?emp_id=${s}`,data:u});(null==(d=e.data)?void 0:d.success)?(i.success((null==(o=null==e?void 0:e.data)?void 0:o.message)||"Promotion record added successfully"),M()):i.error((null==(m=e.data)?void 0:m.message)||"Failed to add promotion record")}P.reset(),null==c||c()}catch(x){i.error("An error occurred while processing your request")}}),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(k,{children:y?"Update promotion record details":"Add a new promotion record"})]}),t.jsxs("div",{className:"mt-5 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-3",children:[t.jsx("div",{children:t.jsx(Q,{label:"Promotion Date *",name:"promotion_date",type:"date"})}),t.jsx("div",{children:t.jsx(Q,{label:"Effective From Date *",name:"effective_from",type:"date"})}),t.jsx("div",{children:t.jsx(Z,{label:"Promotion Type",name:"promotion_type",data:Ma,initialValue:"",initialValueText:"Select"})})]}),t.jsx(Te,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation Change"}),t.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[t.jsx("div",{children:t.jsx(Z,{label:"From Designation",name:"from_designation_id",data:I,isSearch:!0,initialValue:"",initialValueText:"Select"})}),t.jsx("div",{children:t.jsx(Z,{label:"To Designation *",name:"to_designation_id",data:I,isSearch:!0,initialValue:"",initialValueText:"Select"})})]})]}),t.jsx(Te,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Pay Details"}),t.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500",children:"From Pay"}),t.jsx(Q,{label:"Basic Pay",name:"from_basic_pay",type:"number",placeholder:"Enter basic pay"}),t.jsx(Q,{label:"Grade Pay",name:"from_grade_pay",type:"number",placeholder:"Enter grade pay"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500",children:"To Pay"}),t.jsx(Q,{label:"Basic Pay",name:"to_basic_pay",type:"number",placeholder:"Enter basic pay"}),t.jsx(Q,{label:"Grade Pay",name:"to_grade_pay",type:"number",placeholder:"Enter grade pay"})]})]})]}),t.jsx(Te,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Order Details"}),t.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[t.jsx("div",{children:t.jsx(Q,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter order number"})}),t.jsx("div",{children:t.jsx(Q,{label:"Vide Order Date",name:"vide_order_date",type:"date"})})]}),t.jsx("div",{children:t.jsx(ce,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),t.jsx("div",{children:t.jsx(Q,{label:"Remarks",name:"remarks",placeholder:"Enter any remarks"})})]})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[v?t.jsx(o,{type:"button",variant:"outline",onClick:M,children:"Cancel"}):t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:g,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:T,children:y?"Update":"Save"})]})]});return v?t.jsx(_,{open:f,onOpenChange:F,children:t.jsx(w,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[700px]",children:$})}):t.jsxs(_,{open:f,onOpenChange:F,children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Add Promotion Record"]})}),t.jsx(w,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[700px]",children:$})]})}function $a({id:e,getDataById:s}){var n,r,d,c,m,x,u,p,h,g;const[b,j]=a.useState(null),v=se({api:`${l.getPromotionHistory}?emp_id=${e}`,key:"getPromotionHistory",value:[e],options:{enabled:!!e}}),f=ee({}),y=e=>null==e?"â€”":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),_=e=>({regular:{label:"Regular",color:"bg-blue-100 text-blue-700"},adhoc:{label:"Ad-hoc",color:"bg-orange-100 text-orange-700"},time_bound:{label:"Time Bound",color:"bg-purple-100 text-purple-700"},merit_based:{label:"Merit Based",color:"bg-green-100 text-green-700"}}[e]||{label:e,color:"bg-gray-100 text-gray-700"});return t.jsx("main",{className:"bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage promotion history of the employee. Total promotions:"," ",(null==(r=null==(n=null==v?void 0:v.data)?void 0:n.data)?void 0:r.total_records)||0]})}),t.jsx(Ta,{title:"Add Promotion Record",empId:e,refetch:v.refetch,getDataById:s})]}),b&&t.jsx(Ta,{title:"Edit Promotion Record",empId:e,editData:b,isOpen:!0,onClose:()=>{j(null)},refetch:v.refetch,getDataById:s}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.isLoading?t.jsx(Ee,{children:t.jsx(Ce,{className:"flex h-32 items-center justify-center",children:t.jsx(Me,{})})}):t.jsxs(t.Fragment,{children:[null==(m=null==(c=null==(d=null==v?void 0:v.data)?void 0:d.data)?void 0:c.promotion_history)?void 0:m.map(a=>t.jsxs(Ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx(Ie,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:t.jsx(Ue,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsxs(Pe,{className:"text-lg font-semibold text-gray-900",children:["Promotion -"," ",Ae(a.promotion_date).format("DD MMM YYYY")]}),t.jsx("div",{className:"mt-1 flex items-center gap-2",children:t.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${_(a.promotion_type).color}`,children:_(a.promotion_type).label})})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{j(e)})(a),children:t.jsx(Ge,{className:"h-4 w-4"})}),t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async a=>{Fe("Are you sure?","This will delete the promotion record permanently.",async()=>{var s,t,n;try{const r=await f.mutateAsync({api:`${l.deletePromotionRecord}?emp_id=${e}&promotion_id=${a}`,data:{}});(null==(s=null==r?void 0:r.data)?void 0:s.success)?(i.success((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Promotion record deleted successfully"),v.refetch()):i.error((null==(n=null==r?void 0:r.data)?void 0:n.message)||"Failed to delete promotion record")}catch(r){i.error("Error deleting promotion record")}})})(a.id),children:t.jsx(we,{className:"h-4 w-4"})})]})]})}),t.jsxs(Ce,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"rounded-lg border bg-gradient-to-r from-gray-50 to-purple-50 p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ie,{className:"h-4 w-4"}),"Designation Change"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"From"}),t.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:a.from_designation_name||"â€”"})]}),t.jsx(We,{className:"h-5 w-5 text-purple-500"}),t.jsxs("div",{className:"flex-1 rounded-lg bg-purple-100 p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"To"}),t.jsx("p",{className:"mt-1 font-semibold text-purple-700",children:a.to_designation_name||"â€”"})]})]})]}),(a.from_basic_pay||a.to_basic_pay)&&t.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-500",children:[t.jsx(ze,{className:"h-3 w-3"}),"From Pay"]}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Basic: ",y(a.from_basic_pay),a.from_grade_pay?` + GP: ${y(a.from_grade_pay)}`:""]}),a.from_pay_level_name&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Level: ",a.from_pay_level_name]})]}),t.jsxs("div",{className:"rounded-lg border bg-green-50 p-3",children:[t.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-500",children:[t.jsx(ze,{className:"h-3 w-3"}),"To Pay"]}),t.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Basic: ",y(a.to_basic_pay),a.to_grade_pay?` + GP: ${y(a.to_grade_pay)}`:""]}),a.to_pay_level_name&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Level: ",a.to_pay_level_name]})]})]}),t.jsx("div",{className:"rounded-lg border bg-gray-50 p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Effective From:"," ",t.jsx("span",{className:"font-medium",children:Ae(a.effective_from).format("DD MMM YYYY")})]})]})}),(a.vide_order_no||a.vide_order_date)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[a.vide_order_no&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",t.jsx("span",{className:"font-medium",children:a.vide_order_no})]})]}),a.vide_order_date&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",t.jsx("span",{className:"font-medium",children:Ae(a.vide_order_date).format("DD MMM YYYY")})]})]})]}),a.remarks&&t.jsx("div",{className:"rounded-lg border bg-yellow-50 p-3",children:t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("span",{className:"font-medium",children:"Remarks:"})," ",a.remarks]})}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(xe,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Ae(a.created_at).format("DD MMM YYYY, hh:mm A")]})]})})]})]},a.id)),(!(null==(u=null==(x=null==v?void 0:v.data)?void 0:x.data)?void 0:u.promotion_history)||0===(null==(g=null==(h=null==(p=null==v?void 0:v.data)?void 0:p.data)?void 0:h.promotion_history)?void 0:g.length))&&t.jsx(Ee,{className:"py-12 text-center",children:t.jsxs(Ce,{children:[t.jsx(Ue,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No promotion records found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add promotion history records to track career progression"})]})})]})})]})})}const qa=Y().shape({from_department_id:H().nullable(),to_department_id:H().nullable(),from_designation_id:H().nullable(),to_designation_id:H().nullable(),reason:H().nullable(),transfer_date:H().required("Transfer date is required"),joining_date:H().required("Joining date is required"),is_transfer_promotion:G().default(!1),vide_order_no:H().nullable(),vide_order_date:H().nullable(),description:H().nullable()});function Ra({title:e="Add Transfer Record",empId:s,editData:n,isOpen:r,onClose:d,refetch:c,getDataById:m}){var x,u,p,h;const g=ee({}),v=a.useRef(null),[f,y]=a.useState(!1),k=null!=n,C=k?r:f,I=k?e=>{!e&&d&&d()}:y,P=b(),M=j(),F=V({defaultValues:{from_department_id:"",to_department_id:"",from_designation_id:"",to_designation_id:"",reason:"",transfer_date:"",joining_date:"",is_transfer_promotion:!1,vide_order_no:"",vide_order_date:"",description:""},resolver:B(qa)}),T=(null==(u=null==(x=null==P?void 0:P.data)?void 0:x.data)?void 0:u.map(e=>({value:String(e.id),label:String(e.department_name)})))||[],$=(null==(h=null==(p=null==M?void 0:M.data)?void 0:p.data)?void 0:h.map(e=>({value:String(e.id),label:String(e.designation_name)})))||[];a.useEffect(()=>{var e,a,s,t;n?F.reset({from_department_id:(null==(e=n.from_department_id)?void 0:e.toString())||"",to_department_id:(null==(a=n.to_department_id)?void 0:a.toString())||"",from_designation_id:(null==(s=n.from_designation_id)?void 0:s.toString())||"",to_designation_id:(null==(t=n.to_designation_id)?void 0:t.toString())||"",reason:n.reason||"",transfer_date:n.transfer_date?Ae(n.transfer_date).format("YYYY-MM-DD"):"",joining_date:n.joining_date?Ae(n.joining_date).format("YYYY-MM-DD"):"",is_transfer_promotion:n.is_transfer_promotion||!1,vide_order_no:n.vide_order_no||"",vide_order_date:n.vide_order_date?Ae(n.vide_order_date).format("YYYY-MM-DD"):"",description:n.description||""}):F.reset({from_department_id:"",to_department_id:"",from_designation_id:"",to_designation_id:"",reason:"",transfer_date:"",joining_date:"",is_transfer_promotion:!1,vide_order_no:"",vide_order_date:"",description:""})},[n]);const q=F.formState.isSubmitting||g.isPending,R=t.jsx(w,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[900px]",children:t.jsxs(J,{methods:F,onSubmit:F.handleSubmit(async e=>{var a,t,r,o,m,x,u,p;try{const h={emp_id:s,from_department_id:e.from_department_id||null,to_department_id:e.to_department_id||null,from_designation_id:e.from_designation_id||null,to_designation_id:e.to_designation_id||null,reason:e.reason||null,transfer_date:e.transfer_date,joining_date:e.joining_date,is_transfer_promotion:e.is_transfer_promotion||!1,vide_order_no:e.vide_order_no||null,vide_order_date:e.vide_order_date||null,description:e.description||null};if(null==n?void 0:n.id){const e=await g.mutateAsync({api:`${l.updateTransferRecord}?emp_id=${s}&transfer_id=${n.id}`,data:h});(null==(a=e.data)?void 0:a.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Transfer record updated successfully"),null==(r=v.current)||r.click(),null==d||d()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update transfer record")}else{const e=await g.mutateAsync({api:`${l.addTransferRecord}?emp_id=${s}`,data:h});(null==(m=e.data)?void 0:m.success)?(i.success((null==(x=null==e?void 0:e.data)?void 0:x.message)||"Transfer record added successfully"),null==(u=v.current)||u.click()):i.error((null==(p=e.data)?void 0:p.message)||"Failed to add transfer record")}F.reset(),null==c||c()}catch(h){i.error("An error occurred while processing your request")}}),children:[t.jsxs(S,{children:[t.jsx(D,{children:e}),t.jsx(Te,{className:"my-4"})]}),t.jsxs("div",{className:"mt-5 space-y-6",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[t.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Department Change"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"From Department"}),t.jsx(Z,{name:"from_department_id",data:T,isSearch:!0,initialValue:"",initialValueText:"Select department"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"To Department"}),t.jsx(Z,{name:"to_department_id",data:T,isSearch:!0,initialValue:"",initialValueText:"Select department"})]})]})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[t.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Designation Change"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"From Designation"}),t.jsx(Z,{name:"from_designation_id",data:$,isSearch:!0,initialValue:"",initialValueText:"Select designation"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"To Designation"}),t.jsx(Z,{name:"to_designation_id",data:$,isSearch:!0,initialValue:"",initialValueText:"Select designation"})]})]})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[t.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Transfer Dates"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm text-gray-600",children:["Transfer Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Q,{name:"transfer_date",type:"date"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm text-gray-600",children:["Joining Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Q,{name:"joining_date",type:"date"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Reason for Transfer"}),t.jsx(Q,{name:"reason",placeholder:"Enter reason",inputValidation:["removeDoubleSpace"]})]}),t.jsx("div",{className:"flex items-center pt-6",children:t.jsx(Re,{name:"is_transfer_promotion",label:"Transfer with Promotion"})})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[t.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Order Details"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Vide Order No."}),t.jsx(Q,{name:"vide_order_no",placeholder:"Enter order number",inputValidation:["removeDoubleSpace"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Vide Order Date"}),t.jsx(Q,{name:"vide_order_date",type:"date"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Description / Remarks"}),t.jsx(K,{name:"description",placeholder:"Enter any additional remarks or description",rows:3})]})]}),t.jsxs(A,{className:"mt-5 flex justify-between",children:[t.jsx(E,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:v,children:"Cancel"})}),t.jsx(X,{type:"submit",isLoading:q,children:n?"Update":"Save"})]})]})});return k?t.jsx(_,{open:C,onOpenChange:I,children:R}):t.jsxs(_,{open:f,onOpenChange:y,children:[t.jsx(N,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Add Transfer"]})}),R]})}function Va({id:e,getDataById:s}){var n,r,d,c,m,x,u,p,h,g;const[b,j]=a.useState(null),v=se({api:`${l.getTransferHistory}?emp_id=${e}`,key:"getTransferHistory",value:[e],options:{enabled:!!e}}),f=ee({});return t.jsx("main",{className:"bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage transfer history of the employee. Total transfers:"," ",(null==(r=null==(n=null==v?void 0:v.data)?void 0:n.data)?void 0:r.total_records)||0]})}),t.jsx(Ra,{title:"Add Transfer Record",empId:e,refetch:v.refetch,getDataById:s})]}),b&&t.jsx(Ra,{title:"Edit Transfer Record",empId:e,editData:b,isOpen:!0,onClose:()=>{j(null)},refetch:v.refetch,getDataById:s}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.isLoading?t.jsx(Ee,{children:t.jsx(Ce,{className:"flex h-32 items-center justify-center",children:t.jsx(Me,{})})}):t.jsxs(t.Fragment,{children:[null==(m=null==(c=null==(d=null==v?void 0:v.data)?void 0:d.data)?void 0:c.transfer_history)?void 0:m.map(a=>t.jsxs(Ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx(Ie,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-full bg-orange-100 p-2",children:t.jsx(na,{className:"h-5 w-5 text-orange-600"})}),t.jsxs("div",{children:[t.jsxs(Pe,{className:"text-lg font-semibold text-gray-900",children:["Transfer -"," ",Ae(a.transfer_date).format("DD MMM YYYY")]}),t.jsx("div",{className:"mt-1 flex items-center gap-2",children:a.is_transfer_promotion?t.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700",children:[t.jsx(Ve,{className:"mr-1 h-3 w-3"}),"With Promotion"]}):t.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-700",children:[t.jsx(Be,{className:"mr-1 h-3 w-3"}),"Transfer Only"]})})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{j(e)})(a),children:t.jsx(Ge,{className:"h-4 w-4"})}),t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async a=>{Fe("Are you sure?","This will delete the transfer record permanently.",async()=>{var s,t,n;try{const r=await f.mutateAsync({api:`${l.deleteTransferRecord}?emp_id=${e}&transfer_id=${a}`,data:{}});(null==(s=null==r?void 0:r.data)?void 0:s.success)?(i.success((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Transfer record deleted successfully"),v.refetch()):i.error((null==(n=null==r?void 0:r.data)?void 0:n.message)||"Failed to delete transfer record")}catch(r){i.error("Error deleting transfer record")}})})(a.id),children:t.jsx(we,{className:"h-4 w-4"})})]})]})}),t.jsxs(Ce,{className:"space-y-4 pt-0",children:[(a.from_department_name||a.to_department_name)&&t.jsxs("div",{className:"rounded-lg border bg-gradient-to-r from-gray-50 to-orange-50 p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(me,{className:"h-4 w-4"}),"Department Change"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"From"}),t.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:a.from_department_name||"â€”"})]}),t.jsx(We,{className:"h-5 w-5 text-orange-500"}),t.jsxs("div",{className:"flex-1 rounded-lg bg-orange-100 p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"To"}),t.jsx("p",{className:"mt-1 font-semibold text-orange-700",children:a.to_department_name||"â€”"})]})]})]}),(a.from_designation_name||a.to_designation_name)&&t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ie,{className:"h-4 w-4"}),"Designation Change"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"From"}),t.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:a.from_designation_name||"â€”"})]}),t.jsx(We,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[t.jsx("p",{className:"text-xs text-gray-500",children:"To"}),t.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:a.to_designation_name||"â€”"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[t.jsx("div",{className:"rounded-lg border bg-gray-50 p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Transfer Date:"," ",t.jsx("span",{className:"font-medium",children:Ae(a.transfer_date).format("DD MMM YYYY")})]})]})}),t.jsx("div",{className:"rounded-lg border bg-green-50 p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-green-600"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Joining Date:"," ",t.jsx("span",{className:"font-medium text-green-700",children:Ae(a.joining_date).format("DD MMM YYYY")})]})]})})]}),a.reason&&t.jsx("div",{className:"rounded-lg border bg-blue-50 p-3",children:t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("span",{className:"font-medium",children:"Reason:"})," ",a.reason]})}),(a.vide_order_no||a.vide_order_date)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[a.vide_order_no&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",t.jsx("span",{className:"font-medium",children:a.vide_order_no})]})]}),a.vide_order_date&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",t.jsx("span",{className:"font-medium",children:Ae(a.vide_order_date).format("DD MMM YYYY")})]})]})]}),a.description&&t.jsx("div",{className:"rounded-lg border bg-yellow-50 p-3",children:t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("span",{className:"font-medium",children:"Description:"})," ",a.description]})}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(xe,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Ae(a.created_at).format("DD MMM YYYY, hh:mm A")]})]})})]})]},a.id)),(!(null==(u=null==(x=null==v?void 0:v.data)?void 0:x.data)?void 0:u.transfer_history)||0===(null==(g=null==(h=null==(p=null==v?void 0:v.data)?void 0:p.data)?void 0:h.transfer_history)?void 0:g.length))&&t.jsx(Ee,{className:"py-12 text-center",children:t.jsxs(Ce,{children:[t.jsx(na,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No transfer records found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add transfer history records to track department/location changes"})]})})]})})]})})}function Ba({id:e,getDataById:a}){return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Increment History"}),t.jsx(Pa,{id:e,getDataById:a})]}),t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Promotion History"}),t.jsx($a,{id:e,getDataById:a})]}),t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Transfer History"}),t.jsx(Va,{id:e,getDataById:a})]})]})}function La(){return t.jsx("div",{children:"JoiningInformation"})}function Ya(){var e,a,s,i,n,r,o;const[m,u]=p.useState(""),[g,b]=p.useState(""),{id:j}=d(),v=j||"",f=se({api:`${null==(e=l)?void 0:e.getPaySlipList}?emp_id=${v}&${(()=>{let e="";return m&&(e+=`year=${m}&`),g&&(e+=`month=${g}&`),e})()}`,key:"salary-slip-list",value:[v,m,g],options:{enabled:!!v}}),y=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),_=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-700 border-blue-200";case"approved":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},[N,w]=p.useState("list");if(f.isLoading)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading salary slips..."})]})});if(f.error)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"max-w-md rounded-lg border border-red-200 bg-red-50 p-6",children:[t.jsx(pe,{className:"mx-auto mb-4 h-12 w-12 text-red-500"}),t.jsx("p",{className:"text-center text-red-700",children:"Error loading salary slips"})]})});null==(s=null==(a=f.data)?void 0:a.data)||s.employee;const S=(null==(n=null==(i=f.data)?void 0:i.data)?void 0:n.salary_slips)||[],D=null==(o=null==(r=f.data)?void 0:r.data)?void 0:o.summary;return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[t.jsxs("div",{className:"mb-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(aa,{className:"h-5 w-5 text-gray-400"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Salary Slips"})]}),t.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-100 p-1",children:[t.jsxs("button",{onClick:()=>w("card"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("card"===N?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[t.jsx(sa,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"Card"})]}),t.jsxs("button",{onClick:()=>w("list"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("list"===N?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[t.jsx(x,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"List"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Year"}),t.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Years"}),["2024","2025","2026"].map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Month"}),t.jsxs("select",{value:g,onChange:e=>b(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Months"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,a)=>t.jsx("option",{value:a+1,children:e},e))]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:()=>{u(""),b("")},className:"w-full rounded-lg bg-gray-100 px-4 py-2 font-medium text-gray-700 transition hover:bg-gray-200",children:"Clear Filters"})})]})]}),D&&t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-blue-100",children:"Total Gross Salary"}),t.jsx(ze,{className:"h-5 w-5 text-blue-200"})]}),t.jsx("p",{className:"text-3xl font-bold",children:y(D.total_gross_salary)})]}),t.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-500 to-red-600 p-6 text-white shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-red-100",children:"Total Deductions"}),t.jsx(ze,{className:"h-5 w-5 text-red-200"})]}),t.jsx("p",{className:"text-3xl font-bold",children:y(D.total_deductions)})]}),t.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-6 text-white shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-green-100",children:"Total Net Salary"}),t.jsx(ze,{className:"h-5 w-5 text-green-200"})]}),t.jsx("p",{className:"text-3xl font-bold",children:y(D.total_net_salary)})]})]}),t.jsx("div",{className:"space-y-4",children:0===S.length?t.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm",children:[t.jsx(Ne,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No salary slips found"}),t.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Try adjusting your filters"})]}):"card"===N?S.map(e=>t.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"rounded-lg bg-blue-100 p-3",children:t.jsx(xe,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[e.month_name," ",e.year]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Generated on"," ",new Date(e.salary_generation_date).toLocaleDateString("en-IN")]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${_(e.salary_status)}`,children:e.salary_status.toUpperCase()}),t.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:[t.jsx(qe,{className:"h-4 w-4"}),"Download"]})]})]}),t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Working Days"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.payable_days,"/",e.total_working_days]})]}),t.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Basic Pay"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:y(e.basic_pay)})]}),t.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Grade Pay"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:y(e.grade_pay)})]}),t.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"HRA"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:y(e.house_rent_allowance)})]})]}),t.jsx("div",{className:"border-t border-gray-200 pt-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Gross Salary"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(e.gross_salary)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Total Deductions"}),t.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",y(e.total_deductions)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Net Salary"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:y(e.net_salary)})]})]})})]})},e.id)):t.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Period"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Working Days"}),t.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Basic Pay"}),t.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Allowances"}),t.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Gross Salary"}),t.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Deductions"}),t.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Net Salary"}),t.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map(e=>{const a=e.grade_pay+e.dearness_allowance+e.house_rent_allowance+e.transport_allowance;return t.jsxs("tr",{className:"transition hover:bg-gray-50",children:[t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-lg bg-blue-100 p-2",children:t.jsx(xe,{className:"h-4 w-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.month_name," ",e.year]}),t.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.salary_generation_date).toLocaleDateString("en-IN")})]})]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:e.payable_days}),t.jsxs("span",{className:"text-gray-500",children:["/",e.total_working_days]})]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y(e.basic_pay)})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:y(a)})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:t.jsx("p",{className:"text-sm font-bold text-gray-900",children:y(e.gross_salary)})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:t.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["-",y(e.total_deductions)]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:t.jsx("p",{className:"text-sm font-bold text-green-600",children:y(e.net_salary)})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:t.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${_(e.salary_status)}`,children:e.salary_status.toUpperCase()})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:t.jsx(h,{to:`/hrms/dashboard/salary-slip-by-id/${c(e.id.toString())}`,target:"_blank",children:t.jsxs("button",{className:"inline-flex items-center gap-1 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-blue-700",children:[t.jsx(qe,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"hidden lg:inline",children:"Download"})]})})})]},e.id)})})]})})})})]})}const Oa=Y({id:H().required(),is_matrix_based:G().optional(),is_custom_commission:G().optional(),cell_index:H().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>e&&!a,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:H().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>!e&&!a,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),basic_pay:H().when("is_custom_commission",{is:!0,then:e=>e.required("Basic Pay is required for custom commissions"),otherwise:e=>e.optional()}),da_percentage:H().nullable().optional(),city_classification:H().optional(),hra_percentage:H().nullable().optional(),transport_allowance:H().optional(),medical_allowance:H().optional(),special_allowance:H().optional(),pension_scheme:H().optional(),nps_contribution_rate:H().nullable().optional(),gpf_contribution_rate:H().nullable().optional(),pf_employee_contribution_rate:H().nullable().optional(),bank_name:H().optional(),bank_account_no:H().optional(),bank_ifsc:H().optional(),tax_regime:H().oneOf(["old","new"]).optional()});function Ua({empId:e}){var s,i,n,r,d,m,x,u,p,h,b,j,v,f,y,_,N,w,S,D,k,A,E,C,I,P,M,F,T,$,R,L,Y,O,U,H,z,G,W,K,X,ee,ae,te,le,ie,ne,re,de,oe,ce,me,xe,ue,pe,he,ge,be,je,ve,fe,ye,_e,Ne,we,Se,De,ke,Ae,Ee,Ce,Ie,Pe,Me,Fe,$e,qe,Re,Ve,Be,Le,Ye,Oe,Ue,He,Ge,We,aa,sa,ia,na,ra,da,oa,ca,ma,xa,ua,pa,ha,ga,ba,ja,va,fa,ya,_a,Na,wa,Sa,Da,ka,Aa,Ea,Ca,Ia,Pa,Ma,Fa,Ta,$a,qa,Ra,Va,Ba,La,Ua,Ha,za,Ga,Wa,Ja,Qa,Ka,Xa,Za,es,as,ss,ts,ls,is,ns,rs,ds,os,cs,ms,xs,us,ps,hs,gs,bs,js,vs,fs,ys,_s,Ns,ws,Ss,Ds,ks,As,Es,Cs,Is,Ps,Ms,Fs,Ts,$s,qs,Rs,Vs,Bs,Ls,Ys,Os,Us,Hs,zs,Gs,Ws,Js,Qs,Ks,Xs,Zs,et,at,st,tt,lt,it;const[nt,rt]=a.useState(!1),[dt,ot]=a.useState(!1),{data:ct,isLoading:mt}=se({api:`${l.getEmployeeSalary}?emp_id=${e}`,key:`getEmployeeSalary-${e}`,value:[e],options:{enabled:!!e}}),xt=c(String((null==(n=null==(i=null==(s=null==ct?void 0:ct.data)?void 0:s.pay_config)?void 0:i.pay_level)?void 0:n.id)||"")),{data:ut}=q(xt),pt=V({resolver:B(Oa)}),{reset:ht,watch:gt}=pt,bt=gt("pension_scheme"),jt=gt("is_custom_commission"),vt=gt("is_matrix_based");null==(d=null==(r=null==ct?void 0:ct.data)?void 0:r.pay_config)||d.pay_level,a.useEffect(()=>{var e,a,s,t;if(null==(e=null==ct?void 0:ct.data)?void 0:e.pay_config){const e=ct.data.pay_config,l=!e.pay_level;ht({id:e.id.toString(),cell_index:String(e.cell_index||""),is_matrix_based:(null==(a=e.pay_commission)?void 0:a.is_matrix_based)??!1,is_custom_commission:l,grade_pay:String(e.grade_pay||0),basic_pay:String(e.current_basic_pay||""),da_percentage:(null==(t=null==(s=ct.data)?void 0:s.config)?void 0:t.da_percentage)?String(ct.data.config.da_percentage):"",city_classification:e.city_classification,hra_percentage:String(e.hra_percentage||""),transport_allowance:String(e.transport_allowance||""),medical_allowance:String(e.medical_allowance||""),special_allowance:String(e.special_allowance||0),pension_scheme:e.pension_scheme,...e.nps_contribution_rate&&{nps_contribution_rate:String(e.nps_contribution_rate)},...e.pf_employee_contribution_rate&&{pf_employee_contribution_rate:String(e.pf_employee_contribution_rate)},...e.gpf_contribution_rate&&{gpf_contribution_rate:String(e.gpf_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})}},[ct,ht]);const ft=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return mt?t.jsx("div",{className:"flex min-h-[300px] items-center justify-center",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ta,{className:"h-6 w-6 animate-spin text-slate-500"}),t.jsx("span",{className:"text-sm text-slate-600",children:"Loading salary data..."})]})}):ct?t.jsx("div",{className:"space-y-4 p-4",children:t.jsxs(Ke,{defaultValue:"overview",className:"w-full",children:[t.jsxs(Xe,{className:"mb-6 inline-flex h-auto gap-1 rounded-lg border border-slate-200 bg-slate-100 p-1",children:[t.jsx(Ze,{value:"overview",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Overview"}),t.jsx(Ze,{value:"monthly",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Monthly"}),t.jsx(Ze,{value:"annual",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Annual"}),t.jsx(Ze,{value:"config",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Settings"}),t.jsx(Ze,{value:"pay-slip",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Pay Slip"})]}),t.jsxs(ea,{value:"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx("div",{className:"rounded-lg bg-emerald-600 p-5 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-emerald-100",children:"Net Monthly Salary"}),t.jsx("p",{className:"mt-1 text-2xl font-bold",children:ft((null==(x=null==(m=ct.data)?void 0:m.monthly)?void 0:x.net_salary)||0)})]}),t.jsx(ze,{className:"h-8 w-8 text-emerald-200"})]})}),t.jsx("div",{className:"rounded-lg bg-blue-600 p-5 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-100",children:"Net Annual Salary"}),t.jsx("p",{className:"mt-1 text-2xl font-bold",children:ft((null==(p=null==(u=ct.data)?void 0:u.annual)?void 0:p.net_salary)||0)})]}),t.jsx(ze,{className:"h-8 w-8 text-blue-200"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Structure"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Pay Commission"}),t.jsx("span",{className:"font-medium text-slate-900",children:(null==(j=null==(b=null==(h=ct.data)?void 0:h.pay_config)?void 0:b.pay_commission)?void 0:j.commission_name)||"Custom"})]}),(null==(f=null==(v=ct.data)?void 0:v.pay_config)?void 0:f.pay_level)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Pay Level"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(N=null==(_=null==(y=ct.data)?void 0:y.pay_config)?void 0:_.pay_level)?void 0:N.level_name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(S=null==(w=ct.data)?void 0:w.pay_config)?void 0:S.current_basic_pay)})]}),(null==(A=null==(k=null==(D=ct.data)?void 0:D.pay_config)?void 0:k.pay_commission)?void 0:A.is_matrix_based)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Cell Index"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(C=null==(E=ct.data)?void 0:E.pay_config)?void 0:C.cell_index})]}),void 0!==(null==(P=null==(I=ct.data)?void 0:I.config)?void 0:P.da_percentage)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA Rate"}),t.jsxs("span",{className:"font-medium text-slate-900",children:[null==(F=null==(M=ct.data)?void 0:M.config)?void 0:F.da_percentage,"%"]})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Deductions & Tax"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Pension Scheme"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==($=null==(T=ct.data)?void 0:T.pay_config)?void 0:$.pension_scheme})]}),(null==(L=null==(R=ct.data)?void 0:R.pay_config)?void 0:L.nps_contribution_rate)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),t.jsxs("span",{className:"font-medium text-slate-900",children:[null==(O=null==(Y=ct.data)?void 0:Y.pay_config)?void 0:O.nps_contribution_rate,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),t.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(H=null==(U=ct.data)?void 0:U.pay_config)?void 0:H.tax_regime)?"New":"Old"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"City Class"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(G=null==(z=ct.data)?void 0:z.pay_config)?void 0:G.city_classification})]})]})]})]})]}),t.jsxs(ea,{value:"monthly",className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(X=null==(K=null==(W=ct.data)?void 0:W.monthly)?void 0:K.earnings)?void 0:X.basic_pay)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(te=null==(ae=null==(ee=ct.data)?void 0:ee.monthly)?void 0:ae.earnings)?void 0:te.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"HRA"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ne=null==(ie=null==(le=ct.data)?void 0:le.monthly)?void 0:ie.earnings)?void 0:ne.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Transport"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(oe=null==(de=null==(re=ct.data)?void 0:re.monthly)?void 0:de.earnings)?void 0:oe.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Medical"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(xe=null==(me=null==(ce=ct.data)?void 0:ce.monthly)?void 0:me.earnings)?void 0:xe.medical_allowance)||0)})]}),(null==(he=null==(pe=null==(ue=ct.data)?void 0:ue.monthly)?void 0:pe.earnings)?void 0:he.special_allowance)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Special"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(je=null==(be=null==(ge=ct.data)?void 0:ge.monthly)?void 0:be.earnings)?void 0:je.special_allowance)})]}),t.jsx(Te,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),t.jsx("span",{className:"font-bold text-emerald-700",children:ft((null==(ye=null==(fe=null==(ve=ct.data)?void 0:ve.monthly)?void 0:fe.earnings)?void 0:ye.gross_salary)||0)})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(we=null==(Ne=null==(_e=ct.data)?void 0:_e.monthly)?void 0:Ne.deductions)?void 0:we.pf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"PF"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(ke=null==(De=null==(Se=ct.data)?void 0:Se.monthly)?void 0:De.deductions)?void 0:ke.pf_contribution)})]}),(null==(Ce=null==(Ee=null==(Ae=ct.data)?void 0:Ae.monthly)?void 0:Ee.deductions)?void 0:Ce.nps_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Me=null==(Pe=null==(Ie=ct.data)?void 0:Ie.monthly)?void 0:Pe.deductions)?void 0:Me.nps_contribution)})]}),(null==(qe=null==($e=null==(Fe=ct.data)?void 0:Fe.monthly)?void 0:$e.deductions)?void 0:qe.gpf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"GPF"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Be=null==(Ve=null==(Re=ct.data)?void 0:Re.monthly)?void 0:Ve.deductions)?void 0:Be.gpf_contribution)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Oe=null==(Ye=null==(Le=ct.data)?void 0:Le.monthly)?void 0:Ye.deductions)?void 0:Oe.professional_tax)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Income Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Ge=null==(He=null==(Ue=ct.data)?void 0:Ue.monthly)?void 0:He.deductions)?void 0:Ge.income_tax)||0)})]}),t.jsx(Te,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),t.jsx("span",{className:"font-bold text-red-700",children:ft((null==(sa=null==(aa=null==(We=ct.data)?void 0:We.monthly)?void 0:aa.deductions)?void 0:sa.total_deductions)||0)})]})]})]})]}),t.jsx("div",{className:"rounded-lg bg-emerald-600 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Net Monthly Salary"}),t.jsx("span",{className:"text-xl font-bold",children:ft((null==(na=null==(ia=ct.data)?void 0:ia.monthly)?void 0:na.net_salary)||0)})]})}),(null==(oa=null==(da=null==(ra=ct.data)?void 0:ra.monthly)?void 0:da.employer_contributions)?void 0:oa.total)>0&&t.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-slate-600",children:"Employer Contribution"}),t.jsx("span",{className:"font-semibold text-slate-900",children:ft((null==(xa=null==(ma=null==(ca=ct.data)?void 0:ca.monthly)?void 0:ma.employer_contributions)?void 0:xa.total)||0)})]})})]}),t.jsxs(ea,{value:"annual",className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Annual Earnings"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ha=null==(pa=null==(ua=ct.data)?void 0:ua.annual)?void 0:pa.earnings)?void 0:ha.basic_pay)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ja=null==(ba=null==(ga=ct.data)?void 0:ga.annual)?void 0:ba.earnings)?void 0:ja.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"HRA"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ya=null==(fa=null==(va=ct.data)?void 0:va.annual)?void 0:fa.earnings)?void 0:ya.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Transport"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(wa=null==(Na=null==(_a=ct.data)?void 0:_a.annual)?void 0:Na.earnings)?void 0:wa.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Medical"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ka=null==(Da=null==(Sa=ct.data)?void 0:Sa.annual)?void 0:Da.earnings)?void 0:ka.medical_allowance)||0)})]}),t.jsx(Te,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),t.jsx("span",{className:"font-bold text-emerald-700",children:ft((null==(Ca=null==(Ea=null==(Aa=ct.data)?void 0:Aa.annual)?void 0:Ea.earnings)?void 0:Ca.gross_salary)||0)})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Annual Deductions"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Ma=null==(Pa=null==(Ia=ct.data)?void 0:Ia.annual)?void 0:Pa.deductions)?void 0:Ma.pf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"PF"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==($a=null==(Ta=null==(Fa=ct.data)?void 0:Fa.annual)?void 0:Ta.deductions)?void 0:$a.pf_contribution)})]}),(null==(Va=null==(Ra=null==(qa=ct.data)?void 0:qa.annual)?void 0:Ra.deductions)?void 0:Va.nps_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Ua=null==(La=null==(Ba=ct.data)?void 0:Ba.annual)?void 0:La.deductions)?void 0:Ua.nps_contribution)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Ga=null==(za=null==(Ha=ct.data)?void 0:Ha.annual)?void 0:za.deductions)?void 0:Ga.professional_tax)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Income Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Qa=null==(Ja=null==(Wa=ct.data)?void 0:Wa.annual)?void 0:Ja.deductions)?void 0:Qa.income_tax)||0)})]}),t.jsx(Te,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),t.jsx("span",{className:"font-bold text-red-700",children:ft((null==(Za=null==(Xa=null==(Ka=ct.data)?void 0:Ka.annual)?void 0:Xa.deductions)?void 0:Za.total_deductions)||0)})]})]})]})]}),t.jsx("div",{className:"rounded-lg bg-blue-600 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Net Annual Salary"}),t.jsx("span",{className:"text-xl font-bold",children:ft((null==(as=null==(es=ct.data)?void 0:es.annual)?void 0:as.net_salary)||0)})]})}),(null==(ss=ct.data)?void 0:ss.tax_info)&&t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Tax Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-500",children:"Regime"}),t.jsx("p",{className:"font-medium text-slate-900",children:"new"===ct.data.tax_info.regime?"New":"Old"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-500",children:"Taxable Income"}),t.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.annual_taxable_income)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-500",children:"Annual Tax"}),t.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.annual_tax)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-500",children:"Monthly Tax"}),t.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.monthly_tax)})]})]})]})]}),t.jsx(ea,{value:"config",className:"space-y-4",children:dt?t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6",children:[t.jsx("h4",{className:"mb-4 text-sm font-semibold text-slate-900",children:"Update Salary Configuration"}),t.jsxs(J,{methods:pt,onSubmit:pt.handleSubmit(async e=>{var a,s;rt(!0);try{(await g.post(l.updateEmployeeSalary,{id:Number(e.id),...e.is_custom_commission&&{basic_pay:Number(e.basic_pay),da_percentage:e.da_percentage?Number(e.da_percentage):null},...!e.is_custom_commission&&e.is_matrix_based&&{cell_index:Number(e.cell_index)},...!e.is_custom_commission&&!e.is_matrix_based&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,hra_percentage:Number(e.hra_percentage)||null,transport_allowance:Number(e.transport_allowance),medical_allowance:Number(e.medical_allowance),special_allowance:Number(e.special_allowance),pension_scheme:e.pension_scheme,..."EPF_NPS"===e.pension_scheme&&{nps_contribution_rate:Number(e.nps_contribution_rate),pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},..."OPS"===e.pension_scheme&&{gpf_contribution_rate:Number(e.gpf_contribution_rate)},..."EPF"===e.pension_scheme&&{pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})).data.success&&(alert("Salary configuration updated successfully!"),ot(!1))}catch(t){alert((null==(s=null==(a=null==t?void 0:t.response)?void 0:a.data)?void 0:s.message)||"Failed to update salary configuration")}finally{rt(!1)}}),children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[jt?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx(Q,{name:"basic_pay",label:"Basic Pay",type:"number",placeholder:"Enter basic pay"})}),t.jsx("div",{children:t.jsx(Q,{name:"da_percentage",label:"DA Percentage",type:"number",placeholder:"e.g., 50"})})]}):t.jsx(t.Fragment,{children:vt?t.jsx("div",{children:t.jsx(Z,{name:"cell_index",label:"Cell Index",data:(null==(ts=null==ut?void 0:ut.data)?void 0:ts.map(e=>({label:`Index ${e.cell_index} - â‚¹${e.basic_pay}`,value:String(e.cell_index)})))||[]})}):t.jsx("div",{children:t.jsx(Q,{name:"grade_pay",label:"Grade Pay"})})}),t.jsx("div",{children:t.jsx(Z,{name:"city_classification",label:"City Classification",data:[{label:"X - Metro (24%)",value:"X"},{label:"Y - Other (16%)",value:"Y"},{label:"Z - Rural (8%)",value:"Z"}]})}),t.jsx("div",{children:t.jsx(Q,{name:"hra_percentage",label:"HRA %"})}),t.jsx("div",{children:t.jsx(Q,{name:"transport_allowance",label:"Transport"})}),t.jsx("div",{children:t.jsx(Q,{name:"medical_allowance",label:"Medical"})}),t.jsx("div",{children:t.jsx(Q,{name:"special_allowance",label:"Special"})}),t.jsx("div",{children:t.jsx(Z,{name:"pension_scheme",label:"Pension Scheme",data:[{label:"EPF + NPS",value:"EPF_NPS"},{label:"GPF",value:"OPS"},{label:"EPF Only",value:"EPF"}]})}),"EPF_NPS"===bt&&t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx(Q,{name:"nps_contribution_rate",label:"NPS Rate (%)",type:"number"})}),t.jsx("div",{children:t.jsx(Q,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})})]}),"EPF"===bt&&t.jsx("div",{children:t.jsx(Q,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})}),"OPS"===bt&&t.jsx("div",{children:t.jsx(Q,{name:"gpf_contribution_rate",label:"GPF Rate (%)",type:"number"})}),t.jsxs("div",{children:[" ",t.jsx(Q,{name:"bank_name",label:"Bank Name"})]}),t.jsx("div",{children:t.jsx(Q,{name:"bank_account_no",label:"Account No."})}),t.jsx("div",{children:t.jsx(Q,{name:"bank_ifsc",label:"IFSC Code"})}),t.jsx("div",{children:t.jsx(Z,{name:"tax_regime",label:"Tax Regime",data:[{label:"New Regime",value:"new"},{label:"Old Regime",value:"old"}]})})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-slate-200 pt-4",children:[t.jsx(o,{type:"button",variant:"outline",onClick:()=>ot(!1),children:"Cancel"}),t.jsx(o,{type:"submit",disabled:nt,children:nt?t.jsxs(t.Fragment,{children:[t.jsx(ta,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end",children:t.jsxs(o,{onClick:()=>ot(!0),variant:"outline",size:"sm",children:[t.jsx(la,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Configuration"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Commission"}),t.jsx("span",{className:"font-medium text-slate-900",children:(null==(ns=null==(is=null==(ls=ct.data)?void 0:ls.pay_config)?void 0:is.pay_commission)?void 0:ns.commission_name)||"Custom"})]}),(null==(ds=null==(rs=ct.data)?void 0:rs.pay_config)?void 0:ds.pay_level)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Pay Level"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(ms=null==(cs=null==(os=ct.data)?void 0:os.pay_config)?void 0:cs.pay_level)?void 0:ms.level_name})]}),(null==(ps=null==(us=null==(xs=ct.data)?void 0:xs.pay_config)?void 0:us.pay_commission)?void 0:ps.is_matrix_based)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Cell Index"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(gs=null==(hs=ct.data)?void 0:hs.pay_config)?void 0:gs.cell_index})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(js=null==(bs=ct.data)?void 0:bs.pay_config)?void 0:js.current_basic_pay)})]}),!(null==(ys=null==(fs=null==(vs=ct.data)?void 0:vs.pay_config)?void 0:fs.pay_commission)?void 0:ys.is_matrix_based)&&(null==(Ns=null==(_s=ct.data)?void 0:_s.pay_config)?void 0:Ns.grade_pay)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Grade Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Ss=null==(ws=ct.data)?void 0:ws.pay_config)?void 0:Ss.grade_pay)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Effective From"}),t.jsx("span",{className:"font-medium text-slate-900",children:new Date(null==(ks=null==(Ds=ct.data)?void 0:Ds.pay_config)?void 0:ks.effective_from).toLocaleDateString()})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Allowances"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"City Class"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(Es=null==(As=ct.data)?void 0:As.pay_config)?void 0:Es.city_classification})]}),void 0!==(null==(Is=null==(Cs=ct.data)?void 0:Cs.config)?void 0:Is.da_percentage)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA %"}),t.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Ms=null==(Ps=ct.data)?void 0:Ps.config)?void 0:Ms.da_percentage,"%"]})]}),(null==(Ts=null==(Fs=ct.data)?void 0:Fs.pay_config)?void 0:Ts.hra_percentage)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"HRA %"}),t.jsxs("span",{className:"font-medium text-slate-900",children:[null==(qs=null==($s=ct.data)?void 0:$s.pay_config)?void 0:qs.hra_percentage,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Transport"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Vs=null==(Rs=ct.data)?void 0:Rs.pay_config)?void 0:Vs.transport_allowance)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Medical"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Ls=null==(Bs=ct.data)?void 0:Bs.pay_config)?void 0:Ls.medical_allowance)})]}),(null==(Os=null==(Ys=ct.data)?void 0:Ys.pay_config)?void 0:Os.special_allowance)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Special"}),t.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Hs=null==(Us=ct.data)?void 0:Us.pay_config)?void 0:Hs.special_allowance)})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Retirement & Tax"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Pension"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(Gs=null==(zs=ct.data)?void 0:zs.pay_config)?void 0:Gs.pension_scheme})]}),(null==(Js=null==(Ws=ct.data)?void 0:Ws.pay_config)?void 0:Js.nps_contribution_rate)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),t.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Ks=null==(Qs=ct.data)?void 0:Qs.pay_config)?void 0:Ks.nps_contribution_rate,"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),t.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(Zs=null==(Xs=ct.data)?void 0:Xs.pay_config)?void 0:Zs.tax_regime)?"New":"Old"})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Bank Details"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Bank"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(at=null==(et=ct.data)?void 0:et.pay_config)?void 0:at.bank_name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Account"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(tt=null==(st=ct.data)?void 0:st.pay_config)?void 0:tt.bank_account_no})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"IFSC"}),t.jsx("span",{className:"font-medium text-slate-900",children:null==(it=null==(lt=ct.data)?void 0:lt.pay_config)?void 0:it.bank_ifsc})]})]})]})]})]})}),t.jsx(ea,{value:"pay-slip",className:"space-y-4",children:t.jsx(Ya,{})})]})}):t.jsx("div",{className:"p-4",children:t.jsx(Je,{className:"border-amber-200 bg-amber-50",children:t.jsx(Qe,{className:"text-slate-700",children:"No salary configuration found. Please estimate and set the salary first."})})})}function Ha(){const{id:e}=d(),s=e||"",[i,n]=a.useState("estimate"),[r,c]=a.useState(!1),[m,x]=a.useState(null),[u,p]=a.useState(!0),g=se({api:`${l.getEmployeeSalary}?emp_id=${e}`,key:`checkExistingSalary-${e}`,value:[e],options:{enabled:!!e}});return a.useEffect(()=>{var e,a;(null==(e=g.data)?void 0:e.success)&&(null==(a=g.data)?void 0:a.data)&&(x(g.data.data),c(!0),n("view")),p(g.isLoading)},[g]),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 ",children:t.jsxs("div",{className:"space-y-6",children:[u?t.jsxs(Je,{className:"border-blue-200 bg-white shadow-sm",children:[t.jsx(ta,{className:"h-4 w-4 animate-spin text-blue-600"}),t.jsx(Qe,{className:"ml-2 text-slate-700",children:"Checking existing salary configuration..."})]}):r||m?t.jsx(t.Fragment,{}):t.jsx(Je,{className:"border-blue-200 bg-white shadow-sm",children:t.jsx(Qe,{className:"text-slate-700",children:t.jsx("div",{className:"space-y-2",children:t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"font-semibold text-blue-700",children:"Salary Not Configured"})," ","- Please proceed with salary setup to manage employee compensation.",t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(h,{to:`/hrms/dashboard/salary/${s}`,children:t.jsxs(o,{className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["Create Salary",t.jsx(ia,{className:"ml-2 h-4 w-4"})]})})})]})})})})}),r||m?t.jsx(Ee,{className:"border-slate-200 bg-white shadow-lg",children:t.jsx(Ce,{className:"p-2",children:t.jsx(Ua,{empId:s})})}):t.jsx(t.Fragment,{})]})})}const za=()=>{var e,s,i,n,r;const[o,c]=a.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:m}=d();a.useEffect(()=>{localStorage.setItem("employeeActiveTab",o)},[o]);const x=[{id:"basic",label:"Basic Details",icon:v,shortLabel:"Basic"},{id:"family",label:"Family Details",icon:ue,shortLabel:"Family"},{id:"educationAndTraining",label:"Education & Training",icon:da,shortLabel:"Education"},{id:"document",label:"Documents",icon:Ne,shortLabel:"Documents"},{id:"joiningInformation",label:"Joining Information",icon:xe,shortLabel:"Joining"},{id:"salary",label:"Salary Details",icon:ze,shortLabel:"Salary"},{id:"attendance",label:"Attendance",icon:xe,shortLabel:"Attendance"},{id:"serviceHistory",label:"Service History",icon:Ve,shortLabel:"Service History"},{id:"moduleAccess",label:"Module Access",icon:Ve,shortLabel:"Modules Access"}],u=se({api:`${null==(e=l)?void 0:e.getEmployeeById}?id=${m}`,key:"getEmployeeByIddsadasdasdasd",value:[m],options:{enabled:Boolean(m)}});return t.jsx(R,{title:"Employee Management",subTitle:"\r\n      View and manage employee details\r\n    ",children:t.jsx("div",{className:"min-h-screen",children:t.jsxs("div",{className:"overflow-hidden rounded-2xl bg-white shadow-2xl",children:[t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 px-4 py-5 text-white sm:px-6 sm:py-6",children:[t.jsx("div",{className:"absolute right-0 top-0 h-48 w-48 -translate-y-1/3 translate-x-1/3 rounded-full bg-white/10 sm:h-64 sm:w-64"}),t.jsxs("div",{className:"relative z-10 flex items-center gap-3 sm:gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-white/95 shadow-lg sm:h-16 sm:w-16",children:t.jsx(v,{className:"h-6 w-6 text-indigo-500 sm:h-8 sm:w-8"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h2",{className:"truncate text-xl font-bold tracking-tight sm:text-2xl md:text-3xl",children:(null==(i=null==(s=null==u?void 0:u.data)?void 0:s.data)?void 0:i.emp_name)||"Employee Name"}),t.jsxs("p",{className:"mt-1 text-xs font-medium text-white/90 sm:text-sm",children:["ID: ",(null==(r=null==(n=null==u?void 0:u.data)?void 0:n.data)?void 0:r.emp_code)||"EMP0001"]})]})]})]}),t.jsx("div",{className:"border-b border-gray-200 bg-gradient-to-b from-gray-50 to-white px-3 py-3 sm:px-5 sm:py-4",children:t.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2",children:x.map(e=>{const a=e.icon,s=o===e.id;return t.jsxs("button",{onClick:()=>c(e.id),className:"flex min-w-[70px] items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-xs font-semibold transition-all duration-300 sm:min-w-fit sm:gap-2 sm:px-3 sm:py-2 sm:text-sm "+(s?"-translate-y-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/40":"border border-gray-200 bg-white text-gray-600 hover:-translate-y-0.5 hover:border-indigo-400 hover:bg-gray-50 hover:text-indigo-600"),children:[t.jsx(a,{className:"h-3.5 w-3.5 flex-shrink-0 sm:h-4 sm:w-4"}),t.jsx("span",{className:"whitespace-nowrap",children:e.shortLabel})]},e.id)})})}),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:["basic"===o&&t.jsx("div",{children:t.jsx(xa,{id:m,getDataById:u})}),"family"===o&&t.jsx("div",{children:t.jsx(va,{id:m,getDataById:u})}),"educationAndTraining"===o&&t.jsx("div",{children:t.jsx(Ea,{getDataById:u,id:m})}),"document"===o&&t.jsx("div",{children:t.jsx(ha,{id:m,getDataById:u})}),"joiningInformation"===o&&t.jsx("div",{children:t.jsx(La,{})}),"salary"===o&&t.jsx("div",{children:t.jsx(Ha,{})}),"attendance"===o&&t.jsx("div",{children:t.jsx(Da,{id:m,getDataById:u})}),"serviceHistory"===o&&t.jsx("div",{children:t.jsx(Ba,{id:m,getDataById:u})}),"moduleAccess"===o&&t.jsx("div",{children:t.jsx(Sa,{getDataById:u})})]})]})})})};export{za as default};
