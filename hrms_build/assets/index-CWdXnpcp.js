import{aA as s,r as e,j as i,aB as a,al as t}from"./vendor-RyuIgj66.js";import{P as n}from"./index-DFF4_m_G.js";import{h as l}from"./moment-CBOc1lqT.js";import{h as r,e as d,B as o,g as c}from"./index-ey2GEmQz.js";import{C as m,a as u,b as p,c as j}from"./card-u7M7FP5y.js";import{T as g,a as x,b as h,c as v,d as f,e as y}from"./table-B_npepsp.js";import{u as S,b}from"./useCustomQuery-DTB6aAiD.js";import{P as N}from"./index-BHR1l08i.js";import{S as D}from"./separator-BQijJEjG.js";import{S as w}from"./index-CUStUwt1.js";import{S as E}from"./Spinner-BwGzvoRj.js";import{c as M,a as _}from"./yup-CH6wvET8.js";import{F as A}from"./datetime-picker-dN6E5dqy.js";import{R as $}from"./RHFTextField-BSZ_cEI3.js";import{B as k}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{D as L}from"./index-B2ia16z0.js";import{q as B}from"./icons-CxCh8mm_.js";import{t as C}from"./ui-B3c1eQmf.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const F=M().shape({designation_name:_().required("Designation is required")});function T({open:n,setOpen:l,title:o,id:c,edit:m,setEdit:u,refetch:p}){var j;const g=S({}),{data:x,isFetching:h}=b({api:`${null==(j=r)?void 0:j.getDesignationMstrById}/${d(String(c))}`,key:"getDesignationMstrById",options:{enabled:m}}),v=s({defaultValues:{designation_name:""},resolver:a(F)});return e.useEffect(()=>{var s;m&&x?v.reset({designation_name:null==(s=null==x?void 0:x.data)?void 0:s.designation_name}):v.reset({designation_name:""})},[m,x]),i.jsx(L,{open:n,setOpen:l,title:o,setEdit:u,edit:m,isLoading:h,children:i.jsx(A,{methods:v,onSubmit:v.handleSubmit(async s=>{var e,i,a,n,o,j,x,h;try{if(m&&s){const l=await g.mutateAsync({api:`${null==(e=r)?void 0:e.updateDesignationMstrById}`,data:{id:d(String(c)),...s}});(null==(i=l.data)?void 0:i.success)?t.success(null==(a=null==l?void 0:l.data)?void 0:a.message):t.error((null==(n=l.data)?void 0:n.message)||"Designation not updated successfully")}else{const e=await g.mutateAsync({api:null==(o=r)?void 0:o.createDesignationMstr,data:s});(null==(j=e.data)?void 0:j.success)?t.success(null==(x=null==e?void 0:e.data)?void 0:x.message):t.error((null==(h=e.data)?void 0:h.message)||"Designation not created successfully"),v.reset({designation_name:""})}l(!1),u(!1),p()}catch(f){}}),children:i.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[i.jsx("div",{children:i.jsx($,{name:"designation_name",placeholder:"Enter Designation",inputValidation:["removeSpecialCharacterExceptSpace"]})}),i.jsx(D,{}),i.jsx("div",{children:i.jsx(k,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function q(){var s,a,n,M,_,A;const $=S({}),[k,L]=e.useState(1),[F,q]=e.useState(10),[P,Y]=e.useState(""),[I,O]=e.useState(!1),[R,V]=e.useState(""),[z,H]=e.useState(!1),[Q,Z]=e.useState(null),G=b({api:`${r.getAllDesignationMstr}?page=${k}&limit=${F}&q=${P}`,key:"getAllDesignationMstr",value:[k,F],options:{enabled:!0}});return i.jsxs("main",{className:"grid items-start",children:[i.jsx(T,{open:I,setOpen:O,title:z?"Edit Employee Type":"Add Employee Type",id:R,edit:z,setEdit:H,refetch:null==G?void 0:G.refetch}),i.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[i.jsxs("div",{className:"flex w-full justify-between gap-2",children:[i.jsx("div",{children:i.jsx(w,{search:P,setSearch:Y,refetch:null==G?void 0:G.refetch,isFetching:null==G?void 0:G.isLoading})}),i.jsx("div",{children:i.jsx(o,{className:"flex items-center gap-2",onClick:()=>O(!0),children:"Add New"})})]}),i.jsxs(m,{children:[i.jsx(u,{className:"px-7",children:i.jsxs(p,{children:["Department List (",null==(a=null==(s=null==G?void 0:G.data)?void 0:s.pagination)?void 0:a.total,")"]})}),i.jsx(j,{children:(null==G?void 0:G.isLoading)?i.jsx("div",{className:"flex h-32 items-center justify-center",children:i.jsx(E,{})}):i.jsxs(i.Fragment,{children:[i.jsxs(g,{children:[i.jsx(x,{children:i.jsxs(h,{children:[i.jsx(v,{className:"",children:"#"}),i.jsx(v,{className:"",children:"Designation"}),i.jsx(v,{className:"",children:"Created at"}),i.jsx(v,{className:"",children:"Status"}),i.jsx(v,{children:"Action"})]})}),i.jsx(f,{children:null==(M=null==(n=null==G?void 0:G.data)?void 0:n.data)?void 0:M.map((s,e)=>i.jsxs(h,{children:[i.jsx(y,{children:e+1}),i.jsx(y,{children:null==s?void 0:s.designation_name}),i.jsx(y,{children:l(null==s?void 0:s.created_at).format("DD-MM-YYYY")}),i.jsx(y,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(C,{checked:1==(null==s?void 0:s.status),onChange:()=>(async s=>{var e,i,a,n;Z(s);try{const l=await $.mutateAsync({api:`${null==(e=r)?void 0:e.toggleDesignationMstr}`,data:{id:d(String(s))}});(null==(i=null==l?void 0:l.data)?void 0:i.success)?(null==G||G.refetch(),t.success(null==(a=null==l?void 0:l.data)?void 0:a.message)):t.error(null==(n=l.data)?void 0:n.message)}catch(l){t.error(c(l))}finally{Z(null)}})(String(null==s?void 0:s.id)),disabled:Q===String(null==s?void 0:s.id),className:((null==s?void 0:s.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:"Enable notifications"}),i.jsx("span",{className:((null==s?void 0:s.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),Q===String(null==s?void 0:s.id)&&i.jsx(B,{className:"h-4 w-4 animate-spin text-primary"})]})}),i.jsx(y,{children:i.jsx(o,{className:"bg-primary",onClick:()=>{return e=String(null==s?void 0:s.id),H(!0),O(!0),void V(e);var e},children:"Edit"})})]},null==s?void 0:s.id))})]}),i.jsx(D,{className:"mb-2 mt-4"}),i.jsx("div",{className:"flex w-full justify-end",children:i.jsx(N,{page:k,limit:F,totalPages:null==(A=null==(_=null==G?void 0:G.data)?void 0:_.pagination)?void 0:A.totalPages,setPage:L,setLimit:q})})]})})]})]})]})}function P(){return i.jsx(n,{title:"Designation Type List",subTitle:"Manage all the Designation here",children:i.jsx("div",{className:"py-12",children:i.jsx(q,{})})})}export{P as default};
