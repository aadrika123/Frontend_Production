import{aA as e,r as a,j as s,aB as i,al as t}from"./vendor-RyuIgj66.js";import{P as l}from"./index-DFF4_m_G.js";import{h as d}from"./moment-CBOc1lqT.js";import{h as n,e as r,B as o,g as c}from"./index-ey2GEmQz.js";import{C as m,a as u,b as p,c as j}from"./card-u7M7FP5y.js";import{T as x,a as h,b as v,c as f,d as g,e as y}from"./table-B_npepsp.js";import{u as D,b as S}from"./useCustomQuery-DTB6aAiD.js";import{P as _}from"./index-BHR1l08i.js";import{S as N}from"./separator-BQijJEjG.js";import{S as b}from"./index-CUStUwt1.js";import{S as E}from"./Spinner-BwGzvoRj.js";import{c as w,a as C}from"./yup-CH6wvET8.js";import{F as O}from"./datetime-picker-dN6E5dqy.js";import{R as L}from"./RHFTextField-BSZ_cEI3.js";import{B as T}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{D as A}from"./index-B2ia16z0.js";import{t as M}from"./ui-B3c1eQmf.js";import{q as $}from"./icons-CxCh8mm_.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const k=w().shape({ddo_code:C().required().label("DDO Code"),ddo_name:C().required().label("DDO Name"),office_name:C().required().label("Office Name"),treasury_name:C().required().label("Treasury Name")});function q({open:l,setOpen:d,title:o,id:c,edit:m,setEdit:u,refetch:p}){var j;const x=D({}),{data:h,isFetching:v}=S({api:`${null==(j=n)?void 0:j.getDDoMstrById}/${r(String(c))}`,key:"getDDoMstrById",options:{enabled:m}}),f=e({defaultValues:{ddo_code:"",ddo_name:"",office_name:"",treasury_name:""},resolver:i(k)});return a.useEffect(()=>{var e,a,s,i;m&&h?f.reset({ddo_code:null==(e=null==h?void 0:h.data)?void 0:e.ddo_code,ddo_name:null==(a=null==h?void 0:h.data)?void 0:a.ddo_name,office_name:null==(s=null==h?void 0:h.data)?void 0:s.office_name,treasury_name:null==(i=null==h?void 0:h.data)?void 0:i.treasury_name}):f.reset({ddo_code:"",ddo_name:"",office_name:"",treasury_name:""})},[m,h]),s.jsx(A,{open:l,setOpen:d,title:o,setEdit:u,edit:m,isLoading:v,children:s.jsx(O,{methods:f,onSubmit:f.handleSubmit(async e=>{var a,s,i,l,o,j,h,v;try{if(m&&e){const d=await x.mutateAsync({api:`${null==(a=n)?void 0:a.updateDDoMstrById}`,data:{id:r(String(c)),...e}});(null==(s=d.data)?void 0:s.success)?t.success(null==(i=null==d?void 0:d.data)?void 0:i.message):t.error((null==(l=d.data)?void 0:l.message)||"Employee Type not updated successfully")}else{const a=await x.mutateAsync({api:null==(o=n)?void 0:o.createDDoMstr,data:e});(null==(j=a.data)?void 0:j.success)?t.success(null==(h=null==a?void 0:a.data)?void 0:h.message):t.error((null==(v=a.data)?void 0:v.message)||"Employee Type not created successfully"),f.reset({ddo_code:"",ddo_name:"",office_name:"",treasury_name:""})}d(!1),u(!1),p()}catch(g){}}),children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[s.jsx("div",{children:s.jsx(L,{name:"ddo_code",placeholder:"Enter DDO Code",inputValidation:["removeSpecialCharacterExceptSpace"]})}),s.jsx("div",{children:s.jsx(L,{name:"ddo_name",placeholder:"Enter DDO Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),s.jsx("div",{children:s.jsx(L,{name:"office_name",placeholder:"Enter Office Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),s.jsx("div",{children:s.jsx(L,{name:"treasury_name",placeholder:"Enter Treasury Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),s.jsx(N,{}),s.jsx("div",{children:s.jsx(T,{isLoading:f.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function B(){var e,i,l,w,C,O;const L=D({}),[T,A]=a.useState(1),[k,B]=a.useState(10),[F,P]=a.useState(""),[V,Y]=a.useState(!1),[I,R]=a.useState(""),[z,H]=a.useState(!1),[Q,Z]=a.useState(null),G=S({api:`${n.getAllDDoMstr}?page=${T}&limit=${k}&q=${F}`,key:"getAllDDoList",value:[T,k],options:{enabled:!0}});return s.jsxs("main",{className:"grid items-start",children:[s.jsx(q,{open:V,setOpen:Y,title:z?"Edit Employee Type":"Add Employee Type",id:I,edit:z,setEdit:H,refetch:G.refetch}),s.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[s.jsxs("div",{className:"flex w-full justify-between gap-2",children:[s.jsx("div",{children:s.jsx(b,{search:F,setSearch:P,refetch:G.refetch,isFetching:null==G?void 0:G.isLoading})}),s.jsx("div",{children:s.jsx(o,{className:"flex items-center gap-2",onClick:()=>Y(!0),children:"Add New"})})]}),s.jsxs(m,{children:[s.jsx(u,{className:"px-7",children:s.jsxs(p,{children:["Employee Type List (",null==(i=null==(e=null==G?void 0:G.data)?void 0:e.pagination)?void 0:i.total,")"]})}),s.jsx(j,{children:G.isLoading?s.jsx("div",{className:"flex h-32 items-center justify-center",children:s.jsx(E,{})}):s.jsxs(s.Fragment,{children:[s.jsxs(x,{children:[s.jsx(h,{children:s.jsxs(v,{children:[s.jsx(f,{className:"",children:"#"}),s.jsx(f,{className:"",children:"DDO Code"}),s.jsx(f,{className:"",children:"DDO Name"}),s.jsx(f,{className:"",children:"Office Name"}),s.jsx(f,{className:"",children:"Created at"}),s.jsx(f,{className:"",children:"Status"}),s.jsx(f,{children:"Action"})]})}),s.jsx(g,{children:null==(w=null==(l=null==G?void 0:G.data)?void 0:l.data)?void 0:w.map((e,a)=>s.jsxs(v,{children:[s.jsx(y,{children:a+1}),s.jsx(y,{children:null==e?void 0:e.ddo_code}),s.jsx(y,{children:null==e?void 0:e.ddo_name}),s.jsx(y,{children:null==e?void 0:e.office_name}),s.jsx(y,{children:d(null==e?void 0:e.created_at).format("DD-MM-YYYY")}),s.jsx(y,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(M,{checked:1==(null==e?void 0:e.status),onChange:()=>(async e=>{var a,s,i,l;Z(e);try{const d=await L.mutateAsync({api:`${null==(a=n)?void 0:a.toggleDDoMstr}`,data:{id:r(String(e))}});(null==(s=null==d?void 0:d.data)?void 0:s.success)?(G.refetch(),t.success(null==(i=null==d?void 0:d.data)?void 0:i.message)):t.error(null==(l=d.data)?void 0:l.message)}catch(d){t.error(c(d))}finally{Z(null)}})(String(null==e?void 0:e.id)),disabled:Q===String(null==e?void 0:e.id),className:((null==e?void 0:e.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[s.jsx("span",{className:"sr-only",children:"Enable notifications"}),s.jsx("span",{className:((null==e?void 0:e.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),Q===String(null==e?void 0:e.id)&&s.jsx($,{className:"h-4 w-4 animate-spin text-primary"})]})}),s.jsx(y,{children:s.jsx(o,{className:"bg-primary",onClick:()=>{return a=String(null==e?void 0:e.id),H(!0),Y(!0),void R(a);var a},children:"Edit"})})]},null==e?void 0:e.id))})]}),s.jsx(N,{className:"mb-2 mt-4"}),s.jsx("div",{className:"flex w-full justify-end",children:s.jsx(_,{page:T,limit:k,totalPages:null==(O=null==(C=null==G?void 0:G.data)?void 0:C.pagination)?void 0:O.totalPages,setPage:A,setLimit:B})})]})})]})]})]})}function F(){return s.jsx(l,{title:"DDO List",subTitle:"Manage all the DDo List",children:s.jsx("div",{className:"py-12",children:s.jsx(B,{})})})}export{F as default};
