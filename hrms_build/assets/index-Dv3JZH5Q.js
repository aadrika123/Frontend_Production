import{r as e,aA as a,j as s,aB as t,al as r}from"./vendor-RyuIgj66.js";import{P as i}from"./index-DFF4_m_G.js";import{c as l,a as n,e as o}from"./yup-CH6wvET8.js";import{F as m}from"./datetime-picker-dN6E5dqy.js";import{R as d}from"./RHFTextField-BSZ_cEI3.js";import{R as c}from"./RHFTextArea-DpBxMoiQ.js";import{B as x}from"./ButtonLoading-DDalXO-W.js";import{R as p}from"./RHFSelectField-oISAIiMK.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{R as j}from"./DateAndTimePicker-CtTdRVKm.js";import{S as g}from"./separator-BQijJEjG.js";import{C as u,a as h,d as v,b as f,c as b}from"./card-u7M7FP5y.js";import{u as y}from"./useCustomQuery-DTB6aAiD.js";import{h as N}from"./index-ey2GEmQz.js";import{B as R}from"./badge-DbWnzWn2.js";import{aL as _,s as w,N as E}from"./icons-CxCh8mm_.js";import"./ui-B3c1eQmf.js";import"./select-8PAfYjod.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const k=l().shape({emp_id:o().required("Employee ID is required").positive(),date_of_leaving:n().required("Date of leaving is required"),leaving_reason:n().required("Reason for leaving is required"),leaving_remarks:n().nullable()}),L=[{value:"resignation",label:"Resignation"},{value:"termination",label:"Termination"},{value:"retirement",label:"Retirement"},{value:"death",label:"Death"},{value:"transfer",label:"Transfer"},{value:"other",label:"Other"}];function D(){const i=y({}),[l,n]=e.useState(null),o=a({defaultValues:{emp_id:void 0,date_of_leaving:"",leaving_reason:"",leaving_remarks:""},resolver:t(k)});return s.jsxs("main",{className:"grid items-start gap-4 lg:grid-cols-2",children:[s.jsxs(u,{children:[s.jsxs(h,{children:[s.jsxs(v,{className:"flex items-center gap-2",children:[s.jsx(_,{className:"h-5 w-5"}),"Record Employee Leaving"]}),s.jsx(f,{children:"Record resignation, termination, retirement, or other leaving scenarios. Final settlement salary will be pro-rated based on the leaving date."})]}),s.jsx(b,{children:s.jsx(m,{methods:o,onSubmit:o.handleSubmit(async e=>{var a,s,t,l,o;try{const m=await i.mutateAsync({api:null==(a=N)?void 0:a.setEmployeeLeaving,data:e});(null==(s=m.data)?void 0:s.success)?(r.success((null==(t=null==m?void 0:m.data)?void 0:t.message)||"Employee leaving date set successfully"),n(null==(l=m.data)?void 0:l.data)):r.error((null==(o=m.data)?void 0:o.message)||"Failed to set employee leaving date")}catch(m){r.error("Failed to set employee leaving date")}}),children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:[s.jsx("div",{children:s.jsx(d,{label:"Employee ID",name:"emp_id",placeholder:"Enter Employee ID",type:"number"})}),s.jsx("div",{children:s.jsx(j,{name:"date_of_leaving",label:"Date of Leaving",placeholder:"Select leaving date"})}),s.jsx("div",{children:s.jsx(p,{label:"Reason for Leaving",name:"leaving_reason",data:L})}),s.jsx("div",{children:s.jsx(c,{label:"Remarks (Optional)",name:"leaving_remarks",placeholder:"Enter additional remarks"})}),s.jsxs("div",{children:[s.jsx(g,{className:"my-2"}),s.jsx(x,{isLoading:o.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Record Leaving"})]})]})})})]}),l&&s.jsxs(u,{className:"border-orange-200 bg-orange-50",children:[s.jsx(h,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{className:"h-5 w-5 text-orange-500"}),s.jsx(v,{className:"text-orange-700",children:"Employee Leaving Recorded"})]})}),s.jsx(b,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Employee ID:"}),s.jsx("span",{className:"font-semibold",children:l.emp_id})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-1 text-slate-600",children:[s.jsx(w,{className:"h-4 w-4"}),"Date of Leaving:"]}),s.jsx("span",{className:"font-semibold",children:l.date_of_leaving})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Reason:"}),s.jsx(R,{className:(e=>{switch(e){case"resignation":return"bg-yellow-100 text-yellow-700";case"termination":return"bg-red-100 text-red-700";case"retirement":return"bg-blue-100 text-blue-700";case"death":return"bg-gray-100 text-gray-700";case"transfer":return"bg-purple-100 text-purple-700";default:return"bg-slate-100 text-slate-700"}})(l.leaving_reason),children:(D=l.leaving_reason,{resignation:"Resignation",termination:"Termination",retirement:"Retirement",death:"Death",transfer:"Transfer",other:"Other"}[D]||D)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Status:"}),s.jsx(R,{variant:"outline",className:"bg-gray-100 text-gray-700",children:"Inactive"})]}),l.leaving_remarks&&s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsxs("span",{className:"flex items-center gap-1 text-slate-600",children:[s.jsx(E,{className:"h-4 w-4"}),"Remarks:"]}),s.jsx("p",{className:"mt-1 text-sm font-medium",children:l.leaving_remarks})]}),s.jsx("div",{className:"mt-4 rounded-lg bg-amber-100 p-3",children:s.jsxs("p",{className:"text-sm text-amber-800",children:[s.jsx("strong",{children:"Note:"})," The employee's final settlement salary will be automatically pro-rated based on the leaving date. Any pending arrears will be included in the final settlement."]})})]})})]})]});var D}function T(){return s.jsx(i,{title:"Employee Leaving",subTitle:"Record Employee Resignation/Termination/Retirement",children:s.jsx("div",{className:"py-12",children:s.jsx(D,{})})})}export{T as default};
