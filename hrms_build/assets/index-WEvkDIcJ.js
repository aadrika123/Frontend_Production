import{j as e,r as s,h as a,z as n}from"./index-UYY99J9q.js";import{P as r}from"./index-Dj741qwl.js";import{u as t,C as i,a as l,o as d,c as o,b as m,d as c,f as p}from"./yup-jtZe4Tk8.js";import{F as u}from"./datetime-picker-CgwSorNf.js";import{R as x}from"./RHFTextField-BtYg5IGX.js";import{R as j}from"./RHFTextArea-twp-JmnQ.js";import{B as h}from"./ButtonLoading-C1bL9ixh.js";import"./select-CcbMZzqU.js";import"./input-qBPs6xkH.js";import{S as f}from"./switch-CnTLVnvq.js";import"./checkbox-D8MNaO54.js";import"./label-DVj88vWk.js";import{R as _}from"./DateAndTimePicker-B2EAKoFR.js";import{S as b}from"./separator-BrVypJ4m.js";import{C as N,a as g,d as v,b as S,c as y}from"./card-CtI_IPLF.js";import{u as k}from"./useCustomQuery-Dp3AX7R2.js";import{T as E}from"./triangle-alert-DjEcOefH.js";import{C as w}from"./circle-check-big-COIXu31i.js";import"./calendar-ddNksXQs.js";import"./format-BkNqQ0tt.js";import"./chevron-right-BO4a-O50.js";import"./clock-CXHA5hGN.js";import"./check-B5JmqH3y.js";function F({name:s,label:a,...n}){const{control:r}=t();return e.jsx(i,{name:s,control:r,render:({field:{ref:s,...r},fieldState:{error:t}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:a,children:[a," ",t&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("div",{className:"relative mt-1",children:e.jsx(f,{onCheckedChange:r.onChange,checked:r.value,ref:s,className:`mt-1 ${t?"border-red-400":null}`,...n})}),t&&e.jsx("span",{className:"text-red-400 text-xs",children:null==t?void 0:t.message})]})})}const D=o().shape({emp_id:p().required("Employee ID is required").positive(),is_suspended:c().required(),suspension_start_date:m().when("is_suspended",{is:!0,then:e=>e.required("Suspension start date is required"),otherwise:e=>e.nullable()}),suspension_end_date:m().nullable(),suspension_order_no:m().nullable(),suspension_remarks:m().nullable()});function R(){const r=k({}),[t,i]=s.useState(null),o=l({defaultValues:{emp_id:void 0,is_suspended:!0,suspension_start_date:"",suspension_end_date:"",suspension_order_no:"",suspension_remarks:""},resolver:d(D)}),m=o.watch("is_suspended");return e.jsxs("main",{className:"grid items-start gap-4 lg:grid-cols-2",children:[e.jsxs(N,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Set Employee Suspension"}),e.jsx(S,{children:"Suspend an employee or lift their suspension"})]}),e.jsx(y,{children:e.jsx(u,{methods:o,onSubmit:o.handleSubmit(async e=>{var s,t,l,d,o;try{const m=await r.mutateAsync({api:null==(s=a)?void 0:s.setEmployeeSuspension,data:e});(null==(t=m.data)?void 0:t.success)?(n.success((null==(l=null==m?void 0:m.data)?void 0:l.message)||"Suspension status updated successfully"),i(null==(d=m.data)?void 0:d.data)):n.error((null==(o=m.data)?void 0:o.message)||"Failed to update suspension status")}catch(m){n.error("Failed to update suspension status")}}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:[e.jsx("div",{children:e.jsx(x,{label:"Employee ID",name:"emp_id",placeholder:"Enter Employee ID",type:"number"})}),e.jsxs("div",{className:"flex items-center gap-4 rounded-lg border p-4",children:[e.jsx(F,{name:"is_suspended",label:"Suspend Employee"}),e.jsx("span",{className:"text-sm font-medium "+(m?"text-red-600":"text-green-600"),children:m?"Employee will be suspended":"Suspension will be lifted"})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(_,{name:"suspension_start_date",label:"Suspension Start Date",placeholder:"Select start date"})}),e.jsx("div",{children:e.jsx(_,{name:"suspension_end_date",label:"Suspension End Date (Optional)",placeholder:"Select end date"})}),e.jsx("div",{children:e.jsx(x,{label:"Suspension Order Number (Optional)",name:"suspension_order_no",placeholder:"Enter order number"})}),e.jsx("div",{children:e.jsx(j,{label:"Remarks (Optional)",name:"suspension_remarks",placeholder:"Enter remarks for suspension"})})]}),e.jsxs("div",{children:[e.jsx(b,{className:"my-2"}),e.jsx(h,{isLoading:o.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:m?"Suspend Employee":"Lift Suspension"})]})]})})})]}),t&&e.jsxs(N,{className:t.is_suspended?"border-red-200 bg-red-50":"border-green-200 bg-green-50",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.is_suspended?e.jsx(E,{className:"h-5 w-5 text-red-500"}):e.jsx(w,{className:"h-5 w-5 text-green-500"}),e.jsx(v,{className:t.is_suspended?"text-red-700":"text-green-700",children:t.is_suspended?"Employee Suspended":"Suspension Lifted"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Employee ID:"}),e.jsx("span",{className:"font-medium",children:t.emp_id})]}),t.is_suspended&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:t.suspension_start_date||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"End Date:"}),e.jsx("span",{className:"font-medium",children:t.suspension_end_date||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Order No:"}),e.jsx("span",{className:"font-medium",children:t.suspension_order_no||"-"})]}),t.suspension_remarks&&e.jsxs("div",{className:"mt-2 border-t pt-2",children:[e.jsx("span",{className:"text-slate-600",children:"Remarks:"}),e.jsx("p",{className:"mt-1 font-medium",children:t.suspension_remarks})]})]})]})})]})]})}function C(){return e.jsx(r,{title:"Suspension Management",subTitle:"Manage Employee Suspension Status",children:e.jsx("div",{className:"py-12",children:e.jsx(R,{})})})}export{C as default};
