import{r as e,an as a,aA as s,aB as t,aD as l,j as n,al as i,ao as r,a6 as d,ak as o}from"./vendor-RyuIgj66.js";import{g as c,d as m,C as x,a as u,D as p,b as h,c as g,e as b,f as j,h as v,i as f,j as y,k as _,l as N,m as w,n as S,o as D,p as k,q as A,P as E}from"./index-DFF4_m_G.js";import{c as C,d as I,e as P,a as M,g as F,b as $,f as T}from"./yup-CH6wvET8.js";import{F as q}from"./datetime-picker-dN6E5dqy.js";import{R}from"./RHFTextField-BSZ_cEI3.js";import{R as V}from"./RHFTextArea-DpBxMoiQ.js";import{B}from"./ButtonLoading-DDalXO-W.js";import{R as Y}from"./RHFSelectField-oISAIiMK.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{u as L,c as O,b as U,a as H}from"./useCustomQuery-DTB6aAiD.js";import{h as z,p as G,b as W,B as J,e as Q,c as K,d as X,f as Z}from"./index-ey2GEmQz.js";import{E as ee}from"./employeeTypes-BSpBpKLh.js";import{y as ae,B as se,H as te,A as le,s as ne,U as ie,F as re,J as de,x as oe,K as ce,N as me,T as xe,O as ue,z as pe,M as he,Q as ge,R as be,V as je,W as ve,X as fe,E as ye,Y as _e,Z as Ne,_ as we,$ as Se,a0 as De,a1 as ke,a2 as Ae,a3 as Ee,a4 as Ce,a5 as Ie,L as Pe,a6 as Me,a7 as Fe,a8 as $e,v as Te,a9 as qe,P as Re,aa as Ve,ab as Be,ac as Ye,G as Le,q as Oe,S as Ue,ad as He,ae as ze}from"./icons-CxCh8mm_.js";import{h as Ge}from"./moment-CBOc1lqT.js";import{C as We,c as Je,a as Qe,d as Ke}from"./card-u7M7FP5y.js";import{S as Xe}from"./Spinner-BwGzvoRj.js";import{C as Ze}from"./index-B9zcFpnH.js";import{R as ea}from"./RHFUploadFiled-BT1Vxvcm.js";import{S as aa}from"./separator-BQijJEjG.js";import{u as sa}from"./usePdfValidator-C1h71nJm.js";import{R as ta}from"./RHFCheckbox-BZ4qq51l.js";import"./select-8PAfYjod.js";import{A as la,a as na}from"./alert-CtVSl8Dx.js";import{T as ia,a as ra,b as da,c as oa}from"./tabs-BzFjL9ks.js";import"./ui-B3c1eQmf.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const ca=C().shape({emp_type:M().required().label("Employee Type"),emp_code:M().max(50).required().label("Employee Code"),emp_name:M().max(100).required().label("Employee Name"),gender:M().oneOf(["male","female","other"]).required().label("Gender"),dob:I().required().label("Date of Birth"),marital_status:M().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:M().max(50).required().label("Religion"),emp_blood_group:M().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:M().max(50).required().label("Health Status").required(),physical_disability_status:M().optional().label("Physical Disability"),height:P().optional().label("Height"),weight:P().optional().label("Weight"),cps_no:M().max(50).optional().label("CPS"),gpf_no:M().max(50).optional().label("GPF"),identification_mark:M().max(200).optional().label("Identification Mark"),caste:M().max(100).optional().label("Caste"),languages_known:F().of(C().shape({language:M().required("Language is required"),read:$().required(),write:$().required(),speak:$().required()})),contact_no:M().max(10).required().label("Contact Number").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),emergency_contact_no:M().max(10).required().label("Emergency Contact").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),email:M().email().max(100).required().label("Email"),emp_present_address:M().required().label("Present Address"),present_post_office:M().max(100).required().label("Present Post Office"),present_pin_code:M().max(6).required().label("Present PIN Code"),present_police_station:M().max(100).optional().label("Present Police Station"),present_state:M().max(100).required().label("Present State"),present_district:M().max(100).required().label("Present District"),present_nearest_railway_station:M().max(100).optional().label("Nearest Railway Station"),emp_permanent_address:M().required().label("Permanent Address"),permanent_post_office:M().max(100).required().label("Permanent Post Office"),permanent_pin_code:M().max(6).required().label("Permanent PIN Code"),permanent_police_station:M().max(100).optional().label("Permanent Police Station"),permanent_state:M().max(100).required().label("Permanent State"),permanent_district:M().max(100).required().label("Permanent District"),permanent_nearest_railway_station:M().max(100).optional().label("Permanent Nearest Railway Station"),aadhaar_no:M().max(12).nullable().optional().label("Aadhaar Number"),pan_no:M().max(10).nullable().optional().label("PAN Number"),voter_id:M().max(20).nullable().optional().label("Voter ID"),uan_no:M().max(12).nullable().optional().label("UAN Number"),esi_no:M().max(17).nullable().optional().label("ESI Number"),passport_no:M().max(20).nullable().optional().label("Passport Number"),driving_license_no:M().max(20).nullable().optional().label("Driving License"),department_id:M().required().label("Department"),department_name:M().label("Department Name").optional(),designation_id:P().integer().required().label("Designation"),date_of_joining:I().required().label("Date of Joining")});function ma({id:r,getDataById:d}){var o,u,p,h,g,b;const j=c(),[v,f]=e.useState(!1),y=L({}),_=a(),N=m(),w=e.useMemo(()=>{var e;if(!(null==(e=d.data)?void 0:e.data))return{emp_name:"",contact_no:"",emergency_contact_no:"",email:"",gender:"",marital_status:"",religion:"",caste:"",identification_mark:"",emp_health_status:"",emp_blood_group:"",weight:"",height:"",dob:"",date_of_joining:"",emp_present_address:"",present_post_office:"",present_pin_code:"",present_police_station:"",present_state:"",present_district:"",present_nearest_railway_station:"",emp_permanent_address:"",permanent_post_office:"",permanent_pin_code:"",permanent_police_station:"",permanent_state:"",permanent_district:"",permanent_nearest_railway_station:"",aadhaar_no:"",pan_no:"",uan_no:"",esi_no:"",passport_no:"",driving_license_no:"",voter_id:"",gpf_no:"",cps_no:"",physical_disability_status:"",department_id:"",department_name:"",designation_id:void 0,languages_known:[{language:"Hindi",read:!0,write:!0,speak:!0}]};const{ulb_id:a,status:s,created_at:t,updated_at:l,id:n,emp_image:i,...r}=d.data.data,o={};return Object.entries(r).forEach(([e,a])=>{null==a?o[e]="":Array.isArray(a)||"object"==typeof a||"number"==typeof a?o[e]=a:o[e]=String(a)}),(!o.languages_known||Array.isArray(o.languages_known)&&0===o.languages_known.length)&&(o.languages_known=[{language:"Hindi",read:!0,write:!0,speak:!0}]),o},[d.data]),S=s({defaultValues:w,resolver:t(ca)}),D=l({control:S.control,name:"languages_known"});e.useEffect(()=>{d.data&&S.reset(w)},[d.data,S,w]);const k=async e=>{const a=await fetch(e),s=await a.blob(),t=new Blob([s],{type:s.type});return Object.defineProperty(t,"name",{value:"employee_image.jpg",writable:!1}),Object.defineProperty(t,"lastModified",{value:Date.now(),writable:!1}),t},A=e=>{var a;const s=new FormData,t=null==(a=d.data)?void 0:a.data;return s.append("name",S.getValues("emp_name")),s.append("mobile",S.getValues("contact_no")),s.append("altMobile",S.getValues("emergency_contact_no")),s.append("email",S.getValues("email")),s.append("address",S.getValues("emp_present_address")),s.append("userType","Employee"),s.append("ulbId",(null==t?void 0:t.ulb_id)||""),s.append("photo",e),s},E=async e=>{var a,s;const t=await y.mutateAsync({api:null==(a=W)?void 0:a.createMenuRoleAuth,data:{userId:e,permissionStatus:!0,menuRoleId:129}});if(!(null==(s=t.data)?void 0:s.status))throw new Error("Failed to create menu role permission");return t},C=async e=>{var a;return y.mutateAsync({api:null==(a=W)?void 0:a.createWorkFlowRoleAuth,data:{userId:e,permissionStatus:!0,wfRoleId:79}})},I=async e=>{var a,s,t,l;const n=await y.mutateAsync({api:null==(a=z)?void 0:a.approveEmployee,data:{id:String(null==(t=null==(s=d.data)?void 0:s.data)?void 0:t.id),authorization_id:String(e),approval_status:1}});if(!(null==(l=n.data)?void 0:l.success))throw new Error("Failed to update employee approval status");return n},P=async(e,a)=>{var s;try{return await y.mutateAsync({api:null==(s=G)?void 0:s.updateUserName,data:{id:Number(e),emp_id:String(a)||""}})}catch(t){const e=t instanceof Error?t.message:"An error occurred while updating User Name";throw i.error(e),t}};return n.jsxs("div",{className:"",children:[n.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:n.jsx(ae,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),n.jsxs(q,{methods:S,onSubmit:S.handleSubmit(async e=>{var a,s,t,l,n,o,c,m;try{const x=await y.mutateAsync({api:`${null==(a=z)?void 0:a.updateEmployeeById}`,data:{id:r,...e}});(null==(s=x.data)?void 0:s.success)?(await P(String(null==(l=null==(t=null==d?void 0:d.data)?void 0:t.data)?void 0:l.authorization_id),String(null==(o=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:o.id)),i.success(null==(c=null==x?void 0:x.data)?void 0:c.message),_("/hrms/dashboard/employee-list")):i.error((null==(m=x.data)?void 0:m.message)||"Employee not created successfully")}catch(x){i.error("An error occurred while creating employee")}}),children:[n.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[n.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[n.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[n.jsx(se,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{name:"emp_type",data:ee,disabled:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(R,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(le,{className:"h-4 w-4 text-gray-400"}),"Department"]}),n.jsx(Y,{name:"department_id",selectedText:"department_name",isSearch:!0,data:(null==(u=null==(o=null==j?void 0:j.data)?void 0:o.data)?void 0:u.length)?j.data.data.map(e=>({label:String(e.department_name),value:String(e.id)})):[]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(se,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),n.jsx(Y,{name:"designation_id",isSearch:!0,data:(null==(h=null==(p=null==N?void 0:N.data)?void 0:p.data)?void 0:h.map(e=>({label:String(e.designation_name),value:String(e.id)})))||[]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),n.jsx(R,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),n.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[n.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[n.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[n.jsx(ae,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),n.jsx(R,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),n.jsx(Y,{name:"gender",data:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),n.jsx(R,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),n.jsx(Y,{name:"marital_status",data:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),n.jsx(R,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Caste"]}),n.jsx(R,{name:"caste",placeholder:"Enter Caste",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),n.jsx(Y,{name:"emp_blood_group",data:[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),n.jsx(Y,{name:"emp_health_status",data:[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(oe,{className:"h-4 w-4 text-gray-400"}),"Identification Mark"]}),n.jsx(R,{name:"identification_mark",placeholder:"Enter Identification Mark",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(oe,{className:"h-4 w-4 text-gray-400"}),"Physical Disability Status"]}),n.jsx(Y,{name:"physical_disability_status",data:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ce,{className:"h-4 w-4 text-gray-400"}),"Height (cm)"]}),n.jsx(R,{name:"height",placeholder:"Enter Height in cm",inputValidation:["number"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ce,{className:"h-4 w-4 text-gray-400"}),"Weight (kg)"]}),n.jsx(R,{name:"weight",placeholder:"Enter Weight in kg",inputValidation:["number"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(me,{className:"h-4 w-4 text-gray-400"}),"CPS"]}),n.jsx(R,{name:"cps_no",placeholder:"Enter CPS",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(me,{className:"h-4 w-4 text-gray-400"}),"GPF"]}),n.jsx(R,{name:"gpf_no",placeholder:"Enter GPF",inputValidation:["removeSpecialCharacterExceptSpace"]})]})]}),n.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"space-y-2",children:D.fields.map((e,a)=>n.jsxs("div",{className:"group flex flex-col gap-3 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md sm:flex-row sm:items-center",children:[n.jsxs("div",{className:"flex items-center justify-between sm:contents",children:[n.jsx("span",{className:"inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-emerald-100 text-xs font-semibold text-emerald-700",children:a+1}),D.fields.length>1&&n.jsx("button",{type:"button",onClick:()=>D.remove(a),className:"flex-shrink-0 transition-opacity sm:order-last sm:opacity-0 sm:group-hover:opacity-100",title:"Remove language",children:n.jsx(xe,{className:"h-4 w-4 text-red-500 hover:text-red-600"})})]}),n.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:n.jsx(R,{name:`languages_known.${a}.language`,placeholder:"Enter Language",inputValidation:["removeSpecialCharacterExceptSpace"]})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-blue-300 hover:bg-blue-50 has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50",children:[n.jsx("input",{type:"checkbox",...S.register(`languages_known.${a}.read`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600"}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ğŸ“– Read"})]}),n.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-purple-300 hover:bg-purple-50 has-[:checked]:border-purple-400 has-[:checked]:bg-purple-50",children:[n.jsx("input",{type:"checkbox",...S.register(`languages_known.${a}.write`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-purple-600"}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"âœï¸ Write"})]}),n.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-green-300 hover:bg-green-50 has-[:checked]:border-green-400 has-[:checked]:bg-green-50",children:[n.jsx("input",{type:"checkbox",...S.register(`languages_known.${a}.speak`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-green-600"}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ğŸ—£ï¸ Speak"})]})]})]},e.id))}),n.jsxs("button",{type:"button",onClick:()=>D.append({language:"",read:!1,write:!1,speak:!1}),className:"mt-3 flex w-full items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-600 transition-all hover:border-emerald-400 hover:bg-emerald-50 hover:text-emerald-700",children:[n.jsx(ue,{className:"h-4 w-4"}),"Add Language"]})]})})]})]}),n.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[n.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[n.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[n.jsx(pe,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(pe,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),n.jsx(R,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),n.jsx(R,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),n.jsx(R,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),n.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[n.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[n.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[n.jsx(ge,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"col-span-full space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),n.jsx(V,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),n.jsx(R,{name:"present_post_office",placeholder:"Enter Post Office"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(te,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),n.jsx(R,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),n.jsx(R,{name:"present_police_station",placeholder:"Enter Police Station"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),n.jsx(R,{name:"present_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"District"]}),n.jsx(R,{name:"present_district",placeholder:"Enter District"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"State"]}),n.jsx(R,{name:"present_state",placeholder:"Enter State"})]})]})}),n.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[n.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:v,onChange:e=>(e=>{if(f(e),e){const e=S.getValues("emp_present_address"),a=S.getValues("present_post_office"),s=S.getValues("present_pin_code"),t=S.getValues("present_police_station"),l=S.getValues("present_state"),n=S.getValues("present_district"),i=S.getValues("present_nearest_railway_station");S.setValue("emp_permanent_address",e),S.setValue("permanent_post_office",a),S.setValue("permanent_pin_code",s),S.setValue("permanent_police_station",t),S.setValue("permanent_state",l),S.setValue("permanent_district",n),S.setValue("permanent_nearest_railway_station",i)}else S.setValue("emp_permanent_address",""),S.setValue("permanent_post_office",""),S.setValue("permanent_pin_code",""),S.setValue("permanent_police_station",""),S.setValue("permanent_state",""),S.setValue("permanent_district",""),S.setValue("permanent_nearest_railway_station","")})(e.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),n.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ge,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),n.jsx("div",{children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"col-span-full space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),n.jsx(V,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),n.jsx(R,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(te,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),n.jsx(R,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),n.jsx(R,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),n.jsx(R,{name:"permanent_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"District"]}),n.jsx(R,{name:"permanent_district",placeholder:"Enter District",disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(be,{className:"h-4 w-4 text-gray-400"}),"State"]}),n.jsx(R,{name:"permanent_state",placeholder:"Enter State",disabled:v})]})]})})]})]}),n.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[n.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[n.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[n.jsx(je,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(ve,{className:"h-4 w-4 text-gray-400"}),"Voter ID"]}),n.jsx(R,{name:"voter_id",placeholder:"Enter Voter ID",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),n.jsx(R,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),n.jsx(R,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),n.jsx(R,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),n.jsx(R,{name:"esi_no",placeholder:"Enter ESI Number"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),n.jsx(R,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),n.jsx(R,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),n.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(B,{isLoading:S.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"h-4 w-4"}),"Update Employee"]})}),0==(null==(b=null==(g=d.data)?void 0:g.data)?void 0:b.approval_status)&&n.jsx(B,{onClick:async()=>{x("Are you sure you want to approve this employee?","Please confirm",async()=>{var e,a,s,t,l,n,r;try{const o=(null==(a=null==(e=d.data)?void 0:e.data)?void 0:a.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",c=await k(o),m=A(c),x=await y.mutateAsync({api:null==(s=W)?void 0:s.createUserAuth,data:m});if(!(null==(t=x.data)?void 0:t.status))throw new Error((null==(l=x.data)?void 0:l.message)||"Employee approval failed");const u=x.data.data.id;await Promise.all([E(u),C(u),P(String(u),String(null==(r=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:r.id))]),await I(u),i.success("Employee approved successfully"),_("/hrms/dashboard/employee-list")}catch(o){const e=o instanceof Error?o.message:"An error occurred while approving employee";i.error(e)}})},type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:n.jsxs(n.Fragment,{children:[n.jsx(fe,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),n.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const xa=C().shape({doc_name:M().required("Document Name is required"),doc_type_id:M().required("Document Type is required"),doc_path:T().required("Document is required").test("fileRequired","Document is required",e=>e instanceof File||"string"==typeof e&&""!==e),description:M().required("Description is required")});function ua({title:a,id:l,edit:d,refetch:o,getDataById:c}){var m,x,_,N,w,S,D;const{validateFile:k,reset:A}=sa({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),E=L({}),C=O({}),I=e.useRef(null),P=u(),{data:M}=U({api:`${null==(m=z)?void 0:m.updateEmployeeById}/${l}`,key:"getDocumentById",options:{enabled:d}}),F=s({defaultValues:{doc_type_id:(null==(x=null==M?void 0:M.data)?void 0:x.doc_type_id)||"",doc_name:(null==(_=null==M?void 0:M.data)?void 0:_.doc_name)||"",doc_path:(null==(N=null==M?void 0:M.data)?void 0:N.doc_path)||"",description:(null==(w=null==M?void 0:M.data)?void 0:w.description)||""},resolver:t(xa)}),{id:$}=r();e.useEffect(()=>{var e,a,s,t;d&&M?F.reset({doc_type_id:null==(e=null==M?void 0:M.data)?void 0:e.doc_type_id,doc_name:null==(a=null==M?void 0:M.data)?void 0:a.doc_name,doc_path:null==(s=null==M?void 0:M.data)?void 0:s.doc_path,description:(null==(t=null==M?void 0:M.data)?void 0:t.description)??""}):F.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[d,M]),e.useEffect(()=>{var e,a,s,t;"Aadhaar Card"===(null==F?void 0:F.watch("doc_name"))?F.setValue("description",(null==(a=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:a.aadhaar_no)||""):"Pan Card"===(null==F?void 0:F.watch("doc_name"))?F.setValue("description",(null==(t=null==(s=null==c?void 0:c.data)?void 0:s.data)?void 0:t.pan_no)||""):F.setValue("description","")},[null==F?void 0:F.watch("doc_name")]);const T=F.formState.isSubmitting||C.isPending;return n.jsxs(p,{children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),n.jsx(g,{className:"sm:max-w-[425px]",children:n.jsxs(q,{methods:F,onSubmit:F.handleSubmit(async e=>{var a,s,t,l;try{const n=new FormData;if(n.append("emp_id",String($)),n.append("doc_type_id",e.doc_type_id),n.append("doc_name",e.doc_name),n.append("description",e.description),n.append("file",null==e?void 0:e.doc_path),d&&e);else{const e=await E.mutateAsync({api:z.uploadEmployeeDocument,data:n});(null==(a=e.data)?void 0:a.success)?(i.success(null==(s=null==e?void 0:e.data)?void 0:s.message),null==(t=I.current)||t.click()):i.error((null==(l=e.data)?void 0:l.message)||"Document not attached successfully"),F.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}o()}catch(n){i.error("An error occurred while processing your request")}}),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[n.jsx("div",{children:n.jsx(Y,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:(null==(D=null==(S=null==P?void 0:P.data)?void 0:S.data)?void 0:D.map(e=>({label:String(e.doc_name),value:String(e.id)})))||[]})}),n.jsx("div",{children:n.jsx(ea,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:async e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s&&"application/pdf"===(null==s?void 0:s.type)){const a=await k(s);a.isValid?(i.success(a.message),A(),F.setValue("doc_path",s)):(i.error(a.message),e.target.value="",F.resetField("doc_path"))}else s&&F.setValue("doc_path",s)},placeholder:"Upload your document"})}),n.jsx("div",{children:n.jsx(R,{label:`${(null==F?void 0:F.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(null==F?void 0:F.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),n.jsx(aa,{})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:I,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:T,children:"Save changes"})]})]})})]})}function pa({id:a,getDataById:s}){var t,l,d,o;const[c,m]=e.useState(""),[x,u]=e.useState(!1),{id:p}=r(),h=U({api:`${z.getEmployeeDocuments}?emp_id=${p}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),g=L({}),b=e=>{var a;return(null==(a=e.split(".").pop())?void 0:a.toLowerCase())||""},j=e=>{const a=b(e);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(a)};return n.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),n.jsx(ua,{title:x?"Edit Document":"Attach Document",id:a,edit:x,setEdit:u,refetch:h.refetch,getDataById:s})]}),h.isLoading?n.jsx("div",{className:"flex h-64 items-center justify-center",children:n.jsx(Xe,{})}):n.jsx(n.Fragment,{children:0===(null==(l=null==(t=null==h?void 0:h.data)?void 0:t.data)?void 0:l.length)?n.jsx(We,{className:"border-2 border-dashed border-gray-300 bg-white",children:n.jsxs(Je,{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:n.jsx(me,{className:"h-16 w-16 text-gray-400"})}),n.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),n.jsx("p",{className:"mt-2 text-center text-gray-600",children:c?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):n.jsx("div",{className:"space-y-4",children:null==(o=null==(d=null==h?void 0:h.data)?void 0:d.data)?void 0:o.map(e=>{return n.jsx(We,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:n.jsxs("div",{className:"flex flex-col md:flex-row",children:[n.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[j(null==e?void 0:e.doc_path)?n.jsx("img",{src:e.doc_path,alt:(null==e?void 0:e.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{var a,s;e.currentTarget.style.display="none",null==(s=null==(a=e.currentTarget.parentElement)?void 0:a.querySelector(".fallback-icon"))||s.classList.remove("hidden")}}):(a=null==e?void 0:e.doc_path,"pdf"===b(a)?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:n.jsx(ve,{className:"h-12 w-12 text-red-600"})})}):n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:n.jsx(me,{className:"h-12 w-12 text-blue-600"})})})),n.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:n.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:n.jsx(me,{className:"h-12 w-12 text-gray-400"})})}),n.jsx("div",{className:"absolute bottom-1 left-1",children:n.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:b(null==e?void 0:e.doc_path)||"file"})}),n.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:n.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[n.jsx("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:n.jsx(ye,{className:"h-3 w-3"})}),n.jsx("a",{href:e.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:n.jsx(_e,{className:"h-3 w-3"})})]})})]}),n.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(null==e?void 0:e.doc_name)||"Document"}),n.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(null==e?void 0:e.description)||"No description available"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[n.jsx(ne,{className:"h-4 w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:Ge(null==e?void 0:e.created_at).format("DD MMM YYYY")})]}),n.jsxs("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[n.jsx(Ne,{className:"h-4 w-4"}),"Open"]}),n.jsx(J,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ze("Are you sure?","Please confirm",async()=>{var a,s,t;try{const l=await g.mutateAsync({api:`${z.deleteEmployeeDocument}`,data:{id:Q(e.toString())}});(null==(a=null==l?void 0:l.data)?void 0:a.success)?(i.success((null==(s=null==l?void 0:l.data)?void 0:s.message)||"Deleted successfully"),h.refetch()):i.error((null==(t=null==l?void 0:l.data)?void 0:t.message)||"Failed to delete")}catch(l){i.error("Error deleting item")}})})(null==e?void 0:e.id),children:n.jsx(xe,{className:"h-4 w-4"})})]})]})})})]})},null==e?void 0:e.id);var a})})})]})})}const ha=C().shape({family_member_name:M().required("Family member name is required").min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),relationship:M().required("Relationship is required"),dob:M().nullable().optional(),address:M().nullable().optional().max(255,"Address cannot exceed 255 characters"),is_dependent:$().default(!1),is_nominee:$().default(!1),nominee_percentage:P().nullable().when("is_nominee",{is:!0,then:e=>e.required("Nominee percentage is required when marked as nominee").min(1,"Percentage must be at least 1%").max(100,"Percentage cannot exceed 100%"),otherwise:e=>e.notRequired()})}),ga=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function ba({title:a="Add Family Member",id:l,edit:d,refetch:o,getDataById:c}){var m;const x=L({}),u=e.useRef(null),{id:_}=r(),{data:N}=U({api:`${null==(m=z)?void 0:m.getFamilyMemberById}/${l}`,key:"getFamilyMemberById",options:{enabled:d&&!!l}}),w=s({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null},resolver:t(ha)}),S=w.watch("is_nominee");e.useEffect(()=>{var e,a,s,t,l,n,i;d&&N?w.reset({family_member_name:(null==(e=null==N?void 0:N.data)?void 0:e.family_member_name)||"",relationship:(null==(a=null==N?void 0:N.data)?void 0:a.relationship)||"",dob:(null==(s=null==N?void 0:N.data)?void 0:s.dob)||"",address:(null==(t=null==N?void 0:N.data)?void 0:t.address)||"",is_dependent:(null==(l=null==N?void 0:N.data)?void 0:l.is_dependent)||!1,is_nominee:(null==(n=null==N?void 0:N.data)?void 0:n.is_nominee)||!1,nominee_percentage:(null==(i=null==N?void 0:N.data)?void 0:i.nominee_percentage)||null}):w.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null})},[d,N,w]);const D=w.formState.isSubmitting||x.isPending;return n.jsxs(p,{children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),n.jsx(g,{className:"sm:max-w-[500px]",children:n.jsxs(q,{methods:w,onSubmit:w.handleSubmit(async e=>{var a,s,t,n,r,c,m,p;try{const h={emp_id:_,family_member_name:e.family_member_name,relationship:e.relationship,dob:e.dob,address:e.address,is_dependent:e.is_dependent||!1,is_nominee:e.is_nominee||!1,nominee_percentage:e.is_nominee?e.nominee_percentage:null};if(d&&l){const e=await x.mutateAsync({api:`${z.updateFamilyMemberById}/${l}`,data:h});(null==(a=e.data)?void 0:a.success)?(i.success((null==(s=null==e?void 0:e.data)?void 0:s.message)||"Family member updated successfully"),null==(t=u.current)||t.click()):i.error((null==(n=e.data)?void 0:n.message)||"Failed to update family member")}else{const e=await x.mutateAsync({api:z.createFamily,data:h});(null==(r=e.data)?void 0:r.success)?(i.success((null==(c=null==e?void 0:e.data)?void 0:c.message)||"Family member added successfully"),null==(m=u.current)||m.click()):i.error((null==(p=e.data)?void 0:p.message)||"Failed to add family member")}w.reset(),null==o||o()}catch(h){i.error("An error occurred while processing your request")}}),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{children:d?"Update family member information":"Add a new family member"})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[n.jsx("div",{children:n.jsx(R,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),n.jsx("div",{children:n.jsx(Y,{label:"Relationship",name:"relationship",selectedText:"relationship",data:ga})}),n.jsx("div",{children:n.jsx(R,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),n.jsx("div",{children:n.jsx(R,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),n.jsx(aa,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ta,{name:"is_dependent",label:"Mark as Dependent"}),n.jsx(ta,{name:"is_nominee",label:"Mark as Nominee"}),S&&n.jsx("div",{className:"ml-6",children:n.jsx(R,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:u,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:D,children:d?"Update":"Save"})]})]})})]})}function ja({id:a,getDataById:s}){var t,l,r,d;const[o,c]=e.useState(""),[m,x]=e.useState(!1),u=U({api:`${z.getAllFamilyDetail}?emp_id=${a}`,key:"getEmployeeFamilyDetailsId",value:[a],options:{enabled:!0}}),p=L({});return n.jsx("main",{className:"min-h-screen bg-gray-50/50",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),n.jsx(ba,{title:m?"Edit Family Member":"Add Family Member",id:a,edit:m,setEdit:x,refetch:u.refetch})]}),n.jsx("div",{className:"grid grid-cols-1 gap-6",children:u.isLoading?n.jsx(We,{children:n.jsx(Je,{className:"flex h-32 items-center justify-center",children:n.jsx(Xe,{})})}):n.jsxs(n.Fragment,{children:[null==(l=null==(t=null==u?void 0:u.data)?void 0:t.data)?void 0:l.map(e=>{return n.jsxs(We,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[n.jsx(Qe,{className:"pb-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ie,{className:"h-6 w-6 text-blue-500"}),n.jsxs("div",{children:[n.jsx(Ke,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),n.jsx("div",{className:"mt-2 flex items-center gap-2",children:n.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${a=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[a]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ze("Are you sure?","Please confirm",async()=>{var a,s,t;try{const l=await p.mutateAsync({api:`${z.deleteFamilyMember}`,data:{id:Q(e.toString())}});(null==(a=null==l?void 0:l.data)?void 0:a.success)?(i.success((null==(s=null==l?void 0:l.data)?void 0:s.message)||"Deleted successfully"),u.refetch()):i.error((null==(t=null==l?void 0:l.data)?void 0:t.message)||"Failed to delete")}catch(l){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:n.jsx(xe,{className:"h-3.5 w-3.5"})})})]})}),n.jsxs(Je,{className:"space-y-4 pt-0",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[n.jsx(ne,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Ge(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[n.jsx(be,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Address:"})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?n.jsx(we,{className:"h-4 w-4 text-green-500"}):n.jsx(Se,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),n.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(ne,{className:"h-3 w-3"}),n.jsxs("span",{children:["Added on"," ",Ge(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var a}),0===(null==(d=null==(r=null==u?void 0:u.data)?void 0:r.data)?void 0:d.length)&&n.jsx(We,{className:"py-12 text-center",children:n.jsxs(Je,{children:[n.jsx(ie,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),n.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),n.jsx(J,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const va=C().shape({name:M().required("Name is required"),mobile:M().required("Mobile is required"),altMobile:M().required("Alternate Mobile is required"),email:M().email("Invalid email").required("Email is required"),address:M().required("Address is required"),userType:M().required("User Type is required"),module_name:M().optional()});function fa({title:a="Add New User",edit:l,moduleAccessRefetch:r,getDataById:d,userData:o}){var c,m,x,u,w,S,D,k,A;const E=_(),C=L({}),I=e.useRef(null),P=N(),{user:M}=K(),F=(null==(x=null==(m=null==(c=null==d?void 0:d.data)?void 0:c.data)?void 0:m.email)?void 0:x.split("@")[0])||"",$=(null==(u=localStorage.getItem("ulbName"))?void 0:u.split(" ")[0])||"",T=e.useMemo(()=>{var e,a,s,t,n,i,r,c,m,x,u,p;return l?{name:(null==o?void 0:o.name)||"",mobile:(null==o?void 0:o.mobile)||"",altMobile:(null==o?void 0:o.alternateMobile)||"",email:(null==o?void 0:o.email)||"",address:(null==o?void 0:o.address)||"",userType:(null==o?void 0:o.user_type)||""}:{name:(null==(a=null==(e=null==d?void 0:d.data)?void 0:e.data)?void 0:a.emp_name)||"",mobile:(null==(t=null==(s=null==d?void 0:d.data)?void 0:s.data)?void 0:t.contact_no)||"",altMobile:(null==(i=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:i.emergency_contact_no)||(null==(c=null==(r=null==d?void 0:d.data)?void 0:r.data)?void 0:c.contact_no)||"",email:"",address:(null==(x=null==(m=null==d?void 0:d.data)?void 0:m.data)?void 0:x.emp_present_address)||(null==(p=null==(u=null==d?void 0:d.data)?void 0:u.data)?void 0:p.emp_permanent_address)||"",userType:""}},[d]),V=s({defaultValues:T,resolver:t(va)}),O=(null==(w=V.watch("userType"))?void 0:w.replace(/\s+/g,""))||"";e.useEffect(()=>{V.reset(T)},[T,V]),e.useEffect(()=>{(null==V?void 0:V.watch("userType"))&&!l&&V.setValue("email",`${F}@${O.toLocaleLowerCase()}.${$.toLocaleLowerCase()}`)},[V,F,O,$]);const U="Public Transport Management System",H="PTMS All Ulb",Q=async(e,a)=>{var s,t,l,n;const i=a===U?null==(s=G)?void 0:s.onBoardingConductor:null==(t=G)?void 0:t.onBoardingConductorNew,r=await ne(i);if(!(null==(l=null==r?void 0:r.data)?void 0:l.status))return;const d=await Z(e);(null==(n=null==d?void 0:d.data)?void 0:n.status)&&(await ie(String(d.data.data.id),r.data.data.cunique_id||""),re())},X=async e=>{var a,s;const t=await Z(e);if(await ie(String(t.data.data.id??(null==o?void 0:o.id))),!(null==(a=null==t?void 0:t.data)?void 0:a.status))return;const n=l?"User updated successfully":"User created successfully";i.success(n),null==r||r(),null==(s=I.current)||s.click()},Z=async e=>{try{const a=await ee(),s=ae(e,a);return l?await se(s):await te(s)}catch(a){throw a}},ee=async()=>{var e,a;const s=(null==(a=null==(e=d.data)?void 0:e.data)?void 0:a.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",t=await fetch(s),l=await t.blob();return new File([l],"employee_image.jpg",{type:l.type})},ae=(e,a)=>{var s,t;const l=new FormData;return l.append("name",e.name),l.append("mobile",e.mobile),l.append("altMobile",e.altMobile),l.append("email",e.email),l.append("address",e.address),l.append("userType",e.userType),l.append("ulbId",(null==(t=null==(s=d.data)?void 0:s.data)?void 0:t.ulb_id)||""),l.append("photo",a),l.append("id",parseInt(null==o?void 0:o.id)||""),l},se=async e=>await C.mutateAsync({api:W.updateUser,data:e}),te=async e=>{const a=await C.mutateAsync({api:W.createUserAuth,data:e});return await le(a),a},le=async e=>{var a,s,t,l,n;await C.mutateAsync({api:null==(a=z)?void 0:a.createModuleAccess,data:{emp_id:String(null==(t=null==(s=null==d?void 0:d.data)?void 0:s.data)?void 0:t.id),module_access_id:String(null==(n=null==(l=null==e?void 0:e.data)?void 0:l.data)?void 0:n.id),module_user_type:V.getValues("userType")}})},ne=async e=>{var a,s,t,l,n,r;try{return await C.mutateAsync({api:e,data:{firstName:(null==(s=null==(a=null==d?void 0:d.data)?void 0:a.data)?void 0:s.emp_name)||"",bloodGrp:(null==(l=null==(t=null==d?void 0:d.data)?void 0:t.data)?void 0:l.emp_blood_group)||"",mobileNo:V.getValues("mobile"),emailId:V.getValues("email"),adhar_no:null==(r=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:r.aadhaar_no}})}catch(o){const e=o instanceof Error?o.message:"An error occurred while creating PTMS User";throw i.error(e),o}},ie=async(e,a)=>{var s,t,l;try{return await C.mutateAsync({api:null==(s=G)?void 0:s.updateUserName,data:{id:Number(e),...a&&{user_name:a},emp_id:String(null==(l=null==(t=null==d?void 0:d.data)?void 0:t.data)?void 0:l.id)||""}})}catch(n){const e=n instanceof Error?n.message:"An error occurred while updating User Name";throw i.error(e),n}},re=()=>{var e;null==r||r(),i.success("User created successfully"),null==(e=I.current)||e.click()},de=V.formState.isSubmitting||C.isPending;return n.jsxs(p,{children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),a]})}),n.jsx(g,{className:"sm:max-w-[500px]",children:n.jsxs(q,{methods:V,onSubmit:V.handleSubmit(async e=>{const a=V.watch("module_name");a===U||a===H?await Q(e,a):await X(e)}),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{children:l?"Update user information":"Add a new user to the system"})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[n.jsx("div",{children:n.jsx(Y,{name:"module_name",isSearch:!0,data:(null==(D=null==(S=null==E?void 0:E.data)?void 0:S.data)?void 0:D.map(e=>({label:String(e.module_name),value:String(e.module_name)})))||[]})}),n.jsx("div",{children:n.jsx(Y,{label:"User Type",name:"userType",isSearch:!0,selectedText:"Select user type",data:(null==(A=null==(k=null==P?void 0:P.data)?void 0:k.data)?void 0:A.map(e=>({label:String(e),value:String(e)})))||[]})}),n.jsx("div",{children:n.jsx(R,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(R,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),n.jsx(R,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),n.jsx("div",{children:n.jsx(R,{label:"Email",disabled:l,name:"email",type:"email",placeholder:"Enter email address"})}),n.jsx("div",{children:n.jsx(R,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),n.jsx(aa,{})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:I,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:de,children:l?"Update":"Save"})]})]})})]})}function ya({userId:a}){const s=w(a),t=L({}),[l,r]=e.useState([]),[d,o]=e.useState({}),[c,m]=e.useState("");e.useEffect(()=>{var e;(null==s?void 0:s.data)&&r((null==(e=s.data)?void 0:e.data)||[])},[s]);const x=l.filter(e=>e.role_name.toLowerCase().includes(c.toLowerCase())),u=l.filter(e=>e.permission_status).length,p=l.length,h=l.some(e=>e.permission_status);return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),n.jsxs("p",{className:"text-sm text-slate-500",children:[u," of ",p," roles enabled"]})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search roles...",value:c,onChange:e=>m(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:x.map(e=>n.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[n.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&n.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),n.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:e.role_name})]}),n.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[n.jsx("input",{type:"checkbox",checked:e.permission_status,onChange:()=>(async(e,l)=>{var n,d;o(a=>({...a,[e]:!0}));try{const o=await t.mutateAsync({api:`${null==(n=W)?void 0:n.createWorkFlowRoleAuth}`,data:{userId:parseInt(a),wfRoleId:e,permissionStatus:!l}});o&&(null==(d=o.data)?void 0:d.status)&&(s.refetch(),r(a=>a.map(a=>a.id===e?{...a,permission_status:!l}:a))),i.success("Permission updated successfully")}catch(c){}finally{o(a=>({...a,[e]:!1}))}})(e.id,e.permission_status),disabled:d[e.id]||!e.permission_status&&h,className:"peer sr-only"}),n.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(d[e.id]||!e.permission_status&&h?"cursor-not-allowed opacity-50":""),children:n.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${d[e.id]?"animate-pulse":""}`,children:d[e.id]&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===x.length&&n.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:n.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',c,'"']})})]})})}function _a({userId:a}){const s=S(a),t=L({}),[l,r]=e.useState([]),[d,o]=e.useState({}),[c,m]=e.useState("");e.useEffect(()=>{var e;(null==s?void 0:s.data)&&r((null==(e=s.data)?void 0:e.data)||[])},[s]);const x=l.filter(e=>e.menu_role_name.toLowerCase().includes(c.toLowerCase())),u=l.filter(e=>e.permission_status).length,p=l.length;return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),n.jsxs("p",{className:"text-sm text-slate-500",children:[u," of ",p," roles enabled"]})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search roles...",value:c,onChange:e=>m(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:x.map(e=>n.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[n.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&n.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),n.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:e.menu_role_name})]}),n.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[n.jsx("input",{type:"checkbox",checked:e.permission_status,onChange:()=>(async(e,l)=>{var n,d;o(a=>({...a,[e]:!0}));try{const o=await t.mutateAsync({api:`${null==(n=W)?void 0:n.createMenuRoleAuth}`,data:{userId:parseInt(a),menuRoleId:e,permissionStatus:!l}});o&&(null==(d=o.data)?void 0:d.status)&&(s.refetch(),r(a=>a.map(a=>a.id===e?{...a,permission_status:!l}:a))),i.success("Permission updated successfully")}catch(c){}finally{o(a=>({...a,[e]:!1}))}})(e.id,e.permission_status),disabled:d[e.id],className:"peer sr-only"}),n.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(d[e.id]?"cursor-not-allowed opacity-50":""),children:n.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${d[e.id]?"animate-pulse":""}`,children:d[e.id]&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===x.length&&n.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:n.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',c,'"']})})]})})}function Na({userId:a}){const s=D(a),t=L({}),[l,r]=e.useState([]),[d,o]=e.useState({}),[c,m]=e.useState("");e.useEffect(()=>{var e;(null==s?void 0:s.data)&&r((null==(e=s.data)?void 0:e.data)||[])},[s]);const x=l.filter(e=>e.ward_name.toString().includes(c)),u=l.filter(e=>e.permission_status).length,p=l.length;return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:n.jsxs("div",{children:[n.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),n.jsxs("p",{className:"text-sm text-slate-500",children:[u," of ",p," wards enabled"]})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search wards...",value:c,onChange:e=>m(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:x.map(e=>n.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[n.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&n.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),n.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",e.ward_name]})]}),n.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[n.jsx("input",{type:"checkbox",checked:e.permission_status,onChange:()=>(async(e,l)=>{var n,d;o(a=>({...a,[e]:!0}));try{const o=await t.mutateAsync({api:`${null==(n=W)?void 0:n.createWardAuth}`,data:{userId:parseInt(a),wardList:[{permissionStatus:!l,wardId:e}]}});o&&(null==(d=o.data)?void 0:d.status)&&(s.refetch(),r(a=>a.map(a=>a.id===e?{...a,permission_status:!l}:a))),i.success("Permission updated successfully")}catch(c){}finally{o(a=>({...a,[e]:!1}))}})(e.id,e.permission_status),disabled:d[e.id],className:"peer sr-only"}),n.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(d[e.id]?"cursor-not-allowed opacity-50":""),children:n.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${d[e.id]?"animate-pulse":""}`,children:d[e.id]&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===x.length&&n.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:n.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',c,'"']})})]})})}function wa({getDataById:a}){var s,t,l,i,r,d,o,c;const[m,x]=e.useState(""),[u,p]=e.useState("workflow"),h=k(Q(String(null==(t=null==(s=null==a?void 0:a.data)?void 0:s.data)?void 0:t.id))),g=H({api:null==(l=W)?void 0:l.getUsrByIdAuth,config:{id:m},value:[m],options:{enabled:!!m}}),b=null==(d=null==(r=null==(i=null==g?void 0:g.data)?void 0:i.data)?void 0:r.data)?void 0:d[0],j=[{id:"workflow",label:"Workflow Permission",icon:De},{id:"permittedRoles",label:" Permitted Roles",icon:ke},{id:"ward",label:"Ward Role",icon:le}];return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:n.jsxs("div",{children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[n.jsx("div",{children:n.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("div",{children:n.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"h-9 w-full cursor-pointer rounded-md border-2 border-slate-300 bg-slate-50 px-3 transition-colors\r\n                     duration-200 hover:border-blue-400 focus:border-blue-400 focus:outline-none focus:ring-2\r\n                     focus:ring-blue-500 md:w-52",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Module Access"}),null==(c=null==(o=null==h?void 0:h.data)?void 0:o.data)?void 0:c.map(e=>n.jsx("option",{value:e.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:e.module_user_type},e.module_access_id))]})}),n.jsx(fa,{title:"Add User",edit:!1,moduleAccessRefetch:h.refetch,getDataById:a,userData:b})]})]}),b?n.jsxs("div",{children:[n.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"mb-4 flex justify-end",children:n.jsx(fa,{title:"Edit User",edit:!0,moduleAccessRefetch:h.refetch,getDataById:a,userData:b})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:n.jsx(ae,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),n.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:b.id})]})]}),n.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:n.jsx(ae,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),n.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:b.user_name})]})]}),n.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:n.jsx(ae,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),n.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:b.name})]})]}),n.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:n.jsx(he,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),n.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:b.email})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:n.jsx(pe,{className:"h-5 w-5 text-cyan-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),n.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:b.mobile})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:n.jsx(oe,{className:"h-5 w-5 text-indigo-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),n.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:b.user_type})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:n.jsx(oe,{className:"h-5 w-5 text-emerald-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),n.jsx("span",{className:"inline-block rounded-full px-3 py-1 text-xs font-medium "+(b.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:b.suspended?"Suspended":"Active"})]})]}),b.photo&&"/"!==b.photo&&n.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[n.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:n.jsx(ae,{className:"h-5 w-5 text-pink-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),n.jsx("img",{src:b.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),n.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[n.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:n.jsx("div",{className:"flex overflow-x-auto",children:j.map(e=>{const a=e.icon;return n.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all "+(u===e.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[n.jsx(a,{className:"h-4 w-4"}),e.label]},e.id)})})}),n.jsxs("div",{className:"p-6",children:["workflow"===u&&n.jsx(ya,{userId:m}),"permittedRoles"===u&&n.jsx(_a,{userId:m}),"ward"===u&&n.jsx(Na,{userId:m})]})]})]}):n.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[n.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:n.jsx(oe,{className:"h-10 w-10 text-slate-400"})}),n.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),n.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Sa({id:a,getDataById:s}){var t;const[l,i]=e.useState("calendar"),[r,d]=e.useState(""),[o,c]=e.useState((new Date).getFullYear()),[m,x]=e.useState("all"),u=U({api:`${z.getAllAttendanceByEmpId}?emp_id=${a}`,key:"getAllAttendanceByEmpId",options:{enabled:!0}}),p=(null==(t=null==u?void 0:u.data)?void 0:t.data)||[],h=e=>{switch(e){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:n.jsx(we,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:n.jsx(Ee,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:n.jsx(ne,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:n.jsx(Ie,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:n.jsx(Se,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},g=e=>{if(!e)return"--:--";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},b=e.useMemo(()=>{if(!r.trim())return p;const e=r.toLowerCase();return p.filter(a=>`${a.month} ${a.year}`.toLowerCase().includes(e))},[p,r]),j=e.useMemo(()=>"calendar"!==l?b:p.filter(e=>{const a=parseInt(e.year)===o,s="all"===m||e.month===m;return a&&s}),[p,o,m,l,b]),v=("calendar"===l?j:b).reduce((e,a)=>(1===a.attendance_status?e.present++:2===a.attendance_status?e.leave++:e.absent++,e.totalHours+=parseInt(a.working_hours||"0"),e.totalDays++,e),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),f=b.reduce((e,a)=>{const s=`${a.month} ${a.year}`;return e[s]||(e[s]=[]),e[s].push(a),e},{}),y=e.useMemo(()=>{const e=(new Date).getFullYear();return[e-1,e,e+1]},[p]),_=e.useMemo(()=>{const e={};return p.forEach(a=>{const s=parseInt(a.year),t=a.month;e[s]||(e[s]={}),e[s][t]||(e[s][t]={});const l=new Date(a.date).getDate().toString();e[s][t][l]=a}),e},[p]),N=e.useMemo(()=>{const e=new Set;return p.forEach(a=>{e.add(`${a.month} ${a.year}`)}),Array.from(e).sort((e,a)=>{const[s,t]=e.split(" "),[l,n]=a.split(" "),i=new Date(`${s} 1, ${t}`);return new Date(`${l} 1, ${n}`).getTime()-i.getTime()})},[p]),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return n.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[n.jsx("div",{children:n.jsx("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Attendance Records"})}),n.jsxs("div",{className:"relative w-64",children:[n.jsx(Ae,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:r,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),r&&n.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(Se,{className:"h-4 w-4"})})]})]}),r&&N.filter(e=>e.toLowerCase().includes(r.toLowerCase())).length>0&&n.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:N.filter(e=>e.toLowerCase().includes(r.toLowerCase())).slice(0,5).map(e=>n.jsx("button",{onClick:()=>d(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:e},e))})]}),n.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[n.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:v.present})]}),n.jsx(we,{className:"h-10 w-10 text-green-500"})]})}),n.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:v.absent})]}),n.jsx(Se,{className:"h-10 w-10 text-red-500"})]})}),n.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:v.leave})]}),n.jsx(Ee,{className:"h-10 w-10 text-blue-500"})]})}),n.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:v.totalHours})]}),n.jsx(Ce,{className:"h-10 w-10 text-purple-500"})]})}),n.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),n.jsx("p",{className:"text-3xl font-bold text-gray-800",children:v.totalDays})]}),n.jsx(ne,{className:"h-10 w-10 text-indigo-500"})]})})]}),n.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:n.jsxs("div",{className:"flex border-b border-gray-200",children:[n.jsxs("button",{onClick:()=>i("calendar"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("calendar"===l?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[n.jsx(Ie,{className:"h-4 w-4"}),"Calendar View"]}),n.jsxs("button",{onClick:()=>i("list"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("list"===l?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[n.jsx(Pe,{className:"h-4 w-4"}),"List View"]})]})}),"calendar"===l&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:y.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),n.jsx("select",{value:o,onChange:e=>c(parseInt(e.target.value)),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:y.map(e=>n.jsx("option",{value:e,children:e},e))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Month:"}),n.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[n.jsx("option",{value:"all",children:"All Months"}),w.map(e=>n.jsx("option",{value:e,children:e},e))]})]}),"all"!==m&&n.jsxs("button",{onClick:()=>x("all"),className:"flex items-center gap-1 rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200",children:[n.jsx(Se,{className:"h-4 w-4"}),"Clear Filter"]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2",children:w.filter(e=>"all"===m||m===e).map(e=>{var a;const s=((e,a)=>{const s=new Date(`${e} 1, ${a}`).getMonth();return new Date(a,s+1,0).getDate()})(e,o),t=((e,a)=>{const s=new Date(`${e} 1, ${a}`).getMonth();return new Date(a,s,1).getDay()})(e,o),l=Array.from({length:s},(e,a)=>a+1),i=Array.from({length:t},(e,a)=>a),r=(null==(a=_[o])?void 0:a[e])||{};return n.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[n.jsx("h3",{className:"mb-3 text-center text-lg font-semibold text-gray-800",children:e}),n.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((a,s)=>n.jsx("div",{className:"p-1 text-center text-xs font-semibold text-gray-600",children:a},`${e}-${a}-${s}`)),i.map(a=>n.jsx("div",{className:"p-1"},`empty-${e}-${a}`)),l.map(a=>{const s=r[a.toString()],t=s?h(s.attendance_status):null;return n.jsxs("div",{className:`min-h-24 rounded border p-1.5 text-xs transition-all ${s?null==t?void 0:t.color:"border-gray-200 bg-gray-50"} ${s?"cursor-pointer hover:shadow-md":""}`,children:[n.jsx("div",{className:"mb-1 font-semibold text-gray-700",children:a}),s&&t&&n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:t.iconColor,children:t.icon}),n.jsx("span",{className:"text-[10px] font-medium",children:t.label})]}),1===s.attendance_status&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-[9px] text-gray-600",children:["In: ",g(s.emp_in_time)]}),n.jsxs("div",{className:"text-[9px] text-gray-600",children:["Out: ",g(s.emp_out_time)]}),n.jsxs("div",{className:"text-[10px] font-medium text-gray-700",children:[s.working_hours,"h"]})]})]})]},`${e}-${a}`)})]})]},e)})})]}),"list"===l&&n.jsx(n.Fragment,{children:Object.entries(f).map(([e,a])=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[n.jsx(ne,{className:"h-5 w-5 text-gray-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e})]}),n.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(e=>{const a=h(e.attendance_status);return n.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:(s=e.date,new Date(s).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${a.color}`,children:[n.jsx("span",{className:null==a?void 0:a.iconColor,children:null==a?void 0:a.icon}),null==a?void 0:a.label]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[n.jsx(Ce,{className:"h-4 w-4 text-gray-400"}),g(e.emp_in_time)]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[n.jsx(Ce,{className:"h-4 w-4 text-gray-400"}),g(e.emp_out_time)]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.working_hours||"0","h"]})})]},e.id);var s})})]})})})]},e))}),0===b.length&&n.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[n.jsx(ne,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),n.jsx("p",{className:"text-lg text-gray-500",children:r?"No attendance records found for the search term":"No attendance records found"}),r&&n.jsx("button",{onClick:()=>d(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const Da=C().shape({education:F().of(C().shape({qualification:M().notRequired(),specialization:M().required(),board_university:M().notRequired(),passing_year:M().notRequired(),percentage:M().notRequired(),grade:M().notRequired(),place:M().notRequired()})),trainingInfo:F().of(C().shape({training_name:M().notRequired(),training_type:M().notRequired(),institute:M().notRequired(),start_date:M().notRequired(),end_date:M().notRequired(),duration:M().notRequired(),certificate:T().notRequired()}))});function ka({id:a,getDataById:r}){var d,o;const c=L({}),m=L({}),x=U({api:`${z.getEducationDetails}?emp_id=${a}`,key:"get-employee-qualificationsdddddddd",value:[a],options:{enabled:!!a}}),u=U({api:`${z.getEmployeeTrainings}?emp_id=${a}`,key:"get-employee-training",value:[a],options:{enabled:!!a}}),p=e.useMemo(()=>{var e,a,s,t;return(null==(a=null==(e=null==x?void 0:x.data)?void 0:e.data)?void 0:a.length)>0?null==(t=null==(s=null==x?void 0:x.data)?void 0:s.data)?void 0:t.map(e=>{var a;return{qualification:e.qualification,specialization:e.specialization,board_university:e.board_university,passing_year:null==(a=e.passing_year)?void 0:a.toString(),percentage:e.percentage,grade:e.grade,place:e.place}}):[{qualification:"Matriculation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Intermediate",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Post Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""}]},[null==(d=null==x?void 0:x.data)?void 0:d.data]),h=e.useMemo(()=>{var e,a,s,t;return(null==(a=null==(e=null==u?void 0:u.data)?void 0:e.data)?void 0:a.length)>0?null==(t=null==(s=null==u?void 0:u.data)?void 0:s.data)?void 0:t.map(e=>({training_name:e.training_name,training_type:String(e.training_type),institute:e.institute,start_date:e.start_date,end_date:e.end_date,duration:e.duration,certificate:null})):[{training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null}]},[null==(o=null==u?void 0:u.data)?void 0:o.data]),g=s({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{education:p,trainingInfo:h},resolver:t(Da)}),b=l({control:g.control,name:"education"}),j=l({control:g.control,name:"trainingInfo"});e.useEffect(()=>{g.reset({trainingInfo:h,education:p})},[h,p]);return n.jsx("div",{children:n.jsx(q,{methods:g,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"rounded bg-blue-100 p-1",children:n.jsx(Me,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Education Records"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Academic qualifications"})]})]})}),n.jsxs("div",{className:"space-y-2.5",children:[null==b?void 0:b.fields.map((e,a)=>n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-blue-300 hover:shadow-sm",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white",children:a+1}),n.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",a+1]})]}),a>=4&&n.jsx("button",{type:"button",onClick:()=>(e=>{b.remove(e)})(a),className:"rounded p-1 text-red-600 hover:bg-red-50",children:n.jsx(xe,{size:14})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-7",children:[n.jsx(R,{name:`education[${a}].qualification`,label:"Qualification",disabled:a<4,placeholder:"Qualification"}),n.jsx(R,{name:`education[${a}].specialization`,label:"Specialization",placeholder:"Specialization"}),n.jsx(R,{name:`education[${a}].board_university`,label:"Board/University",placeholder:"Board/University"}),n.jsx(R,{name:`education[${a}].passing_year`,label:"Passing Year",placeholder:"Year",inputValidation:["number","zip"]}),n.jsx(R,{name:`education[${a}].percentage`,label:"Marks %",placeholder:"Marks",inputValidation:["number","zip"]}),n.jsx(R,{name:`education[${a}].grade`,label:"Grade",placeholder:"Grade"}),n.jsx(R,{name:`education[${a}].place`,label:"Place",placeholder:"Location"})]})]},e.id)),n.jsxs("div",{className:"flex justify-center pt-0.5",children:[n.jsxs("button",{type:"button",onClick:()=>{b.append({qualification:"",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-blue-300 bg-blue-50 px-3 py-1.5 text-xs font-medium text-blue-700 transition-all hover:border-blue-400 hover:bg-blue-100",children:[n.jsx(Fe,{size:13}),"Add Record"]}),n.jsxs(B,{type:"button",isLoading:c.isPending,onClick:async()=>{var e,s,t,l;g.clearErrors("education");if(!(await g.trigger("education"))){const e=g.formState.errors.education;if(e&&Array.isArray(e))for(let a=0;a<e.length;a++)if(e[a]){const s=Object.keys(e[a]||{});if(s.length>0){const e=`education.${a}.${s[0]}`;g.setFocus(e);break}}return}const n=g.watch("education");try{const r=await c.mutateAsync({api:null==(e=z)?void 0:e.addEducationDetails,data:{emp_id:String(X(a)),qualifications:n}});(null==(s=null==r?void 0:r.data)?void 0:s.success)?i.success((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Education details submitted successfully"):i.error((null==(l=null==r?void 0:r.data)?void 0:l.message)||"Failed to submit Education details")}catch(r){i.error("Failed to submit Education details")}},className:"\r\nml-3 inline-flex items-center gap-1 rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1\r\n                  ",children:[n.jsx(Fe,{size:13}),"Submit Education Details"]})]})]})]}),n.jsx("div",{className:"border-t border-gray-200"}),n.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"rounded bg-indigo-100 p-1",children:n.jsx($e,{className:"h-4 w-4 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Training Records"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Professional training"})]})]})}),n.jsxs("div",{className:"space-y-2.5",children:[null==j?void 0:j.fields.map((e,a)=>n.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-indigo-300 hover:shadow-sm",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-indigo-600 text-xs font-semibold text-white",children:a+1}),n.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",a+1]})]}),a>=1&&n.jsx("button",{type:"button",onClick:()=>(e=>{j.remove(e)})(a),className:"rounded p-1 text-red-600 transition-all hover:bg-red-50",children:n.jsx(xe,{size:14})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-6",children:[n.jsx(R,{name:`trainingInfo[${a}].training_name`,label:"Training Name",placeholder:"Training Name"}),n.jsx("div",{children:n.jsx(Y,{name:`trainingInfo[${a}].training_type`,label:"Type",data:[{label:"Online",value:"Online"},{label:"Offline",value:"Offline"},{label:"Hybrid",value:"Hybrid"},{label:"Workshop",value:"Workshop"},{label:"Certification",value:"Certification"}]})}),n.jsx(R,{name:`trainingInfo[${a}].institute`,label:"Institute",placeholder:"Institute"}),n.jsx(R,{type:"date",name:`trainingInfo[${a}].start_date`,label:"Start Date",placeholder:"Start Date"}),n.jsx(R,{type:"date",name:`trainingInfo[${a}].end_date`,label:"End Date",placeholder:"End Date"}),n.jsx(R,{name:`trainingInfo[${a}].duration`,label:"Duration",placeholder:"Duration"})]})]},e.id)),n.jsxs("div",{className:"flex justify-center pt-0.5",children:[n.jsxs("button",{type:"button",onClick:()=>{j.append({training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-indigo-300 bg-indigo-50 px-3 py-1.5 text-xs font-medium text-indigo-700 transition-all hover:border-indigo-400 hover:bg-indigo-100",children:[n.jsx(Fe,{size:13}),"Add Record"]}),n.jsxs(B,{isLoading:m.isPending,type:"button",onClick:async()=>{var e,s,t;g.clearErrors("trainingInfo");if(!(await g.trigger("trainingInfo"))){const e=g.formState.errors.trainingInfo;if(e&&Array.isArray(e))for(let a=0;a<e.length;a++)if(e[a]){const s=Object.keys(e[a]||{});if(s.length>0){const e=`trainingInfo.${a}.${s[0]}`;g.setFocus(e);break}}return}const l=g.getValues("trainingInfo");try{const n=await m.mutateAsync({api:`${z.createEmployeeTraining}`,data:{emp_id:String(X(a)),trainings:l}});(null==(e=null==n?void 0:n.data)?void 0:e.success)?i.success((null==(s=null==n?void 0:n.data)?void 0:s.message)||"Training details submitted successfully"):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to submit Training details")}catch(n){i.error("Failed to submit Training details")}},className:"ml-3 inline-flex items-center gap-1 rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1\r\n                    ",children:[n.jsx(Fe,{size:13}),"Submit Training Details"]})]})]})]})]})})})}function Aa({id:e,getDataById:a}){return n.jsx(ka,{id:e,getDataById:a})}const Ea=C().shape({scale:P().nullable().transform((e,a)=>""===a?null:e),increment_date:M().required("Increment date is required"),increment_percentage:P().required("Increment percentage is required").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),increment_amount:P().required("Increment amount is required").min(0,"Amount must be at least 0"),old_basic_pay:P().nullable().transform((e,a)=>""===a?null:e),new_basic_pay:P().required("New basic pay is required").min(0,"Basic pay must be at least 0"),vide_order_no:M().nullable(),vide_order_date:M().nullable(),reference_doc:T().nullable(),is_under_esic_deduction:$().default(!1),esic_amount:P().nullable().min(0).default(0),effective_from_date:M().required("Effective from date is required")});function Ca({title:a="Add Increment Record",empId:l,editData:r,isOpen:d,onClose:o,refetch:c,getDataById:m}){L({});const x=O({}),u=e.useRef(null),[_,N]=e.useState(!1),w=void 0!==d,S=w?d:_,D=!!r,k=s({defaultValues:{scale:null,increment_date:"",increment_percentage:0,increment_amount:0,old_basic_pay:null,new_basic_pay:0,vide_order_no:"",vide_order_date:"",reference_doc:null,is_under_esic_deduction:!1,esic_amount:0,effective_from_date:""},resolver:t(Ea)}),A=async e=>{var a,s,t,n,d,o;try{const m=e.reference_doc instanceof File,u=new window.FormData;if(u.append("emp_id",l),u.append("scale",String(e.scale||"")),u.append("increment_date",e.increment_date),u.append("increment_percentage",String(e.increment_percentage)),u.append("increment_amount",String(e.increment_amount)),u.append("old_basic_pay",String(e.old_basic_pay||"")),u.append("new_basic_pay",String(e.new_basic_pay)),u.append("vide_order_no",e.vide_order_no||""),u.append("vide_order_date",e.vide_order_date||""),u.append("is_under_esic_deduction",String(e.is_under_esic_deduction)),u.append("esic_amount",String(e.esic_amount||0)),u.append("effective_from_date",e.effective_from_date),m&&u.append("reference_doc",e.reference_doc),D&&r){const e=await x.mutateAsync({api:`${z.updateIncrementRecord}?emp_id=${l}&increment_id=${r.id}`,data:u});(null==(a=e.data)?void 0:a.success)?(i.success((null==(s=null==e?void 0:e.data)?void 0:s.message)||"Increment record updated successfully"),E()):i.error((null==(t=e.data)?void 0:t.message)||"Failed to update increment record")}else{const e=await x.mutateAsync({api:`${z.addIncrementRecord}?emp_id=${l}`,data:u});(null==(n=e.data)?void 0:n.success)?(i.success((null==(d=null==e?void 0:e.data)?void 0:d.message)||"Increment record added successfully"),E()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to add increment record")}k.reset(),null==c||c()}catch(m){i.error("An error occurred while processing your request")}},E=()=>{w&&o?o():N(!1),k.reset()},C=e=>{w?!e&&o&&o():N(e)};e.useEffect(()=>{var e,a,s;D&&r?k.reset({scale:r.scale,increment_date:(null==(e=r.increment_date)?void 0:e.split("T")[0])||"",increment_percentage:r.increment_percentage,increment_amount:r.increment_amount,old_basic_pay:r.old_basic_pay,new_basic_pay:r.new_basic_pay,vide_order_no:r.vide_order_no||"",vide_order_date:(null==(a=r.vide_order_date)?void 0:a.split("T")[0])||"",reference_doc:null,is_under_esic_deduction:r.is_under_esic_deduction||!1,esic_amount:r.esic_amount||0,effective_from_date:(null==(s=r.effective_from_date)?void 0:s.split("T")[0])||""}):k.reset({scale:null,increment_date:"",increment_percentage:0,increment_amount:0,old_basic_pay:null,new_basic_pay:0,vide_order_no:"",vide_order_date:"",reference_doc:null,is_under_esic_deduction:!1,esic_amount:0,effective_from_date:""})},[D,r,k]);const I=k.formState.isSubmitting||x.isPending;return w?n.jsx(p,{open:S,onOpenChange:C,children:n.jsx(g,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[600px]",children:n.jsxs(q,{methods:k,onSubmit:k.handleSubmit(A),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{children:D?"Update increment record details":"Add a new increment record"})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[n.jsx("div",{children:n.jsx(R,{label:"Increment Date *",name:"increment_date",type:"date"})}),n.jsx("div",{children:n.jsx(R,{label:"Effective From Date *",name:"effective_from_date",type:"date"})}),n.jsx("div",{children:n.jsx(R,{label:"Increment Percentage (%) *",name:"increment_percentage",type:"number",placeholder:"Enter percentage"})}),n.jsx("div",{children:n.jsx(R,{label:"Increment Amount *",name:"increment_amount",type:"number",placeholder:"Enter increment amount"})}),n.jsx("div",{children:n.jsx(R,{label:"Old Basic Pay",name:"old_basic_pay",type:"number",placeholder:"Enter old basic pay"})}),n.jsx("div",{children:n.jsx(R,{label:"New Basic Pay *",name:"new_basic_pay",type:"number",placeholder:"Enter new basic pay"})}),n.jsx("div",{children:n.jsx(R,{label:"Scale",name:"scale",type:"number",placeholder:"Enter scale"})}),n.jsx("div",{children:n.jsx(ea,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),n.jsx(aa,{className:"col-span-full"}),n.jsx("div",{children:n.jsx(R,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number"})}),n.jsx("div",{children:n.jsx(R,{label:"Vide Order Date",name:"vide_order_date",type:"date"})}),n.jsx(aa,{className:"col-span-full"}),n.jsxs("div",{className:"col-span-full",children:[n.jsx(ta,{name:"is_under_esic_deduction",label:"Under ESIC Deduction"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Check this if the employee is covered under Employee State Insurance Corporation (ESIC) scheme after this increment"})]}),k.watch("is_under_esic_deduction")&&n.jsx("div",{children:n.jsx(R,{label:"ESIC Amount",name:"esic_amount",type:"number",placeholder:"Enter ESIC amount"})})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(J,{type:"button",variant:"outline",onClick:E,children:"Cancel"}),n.jsx(B,{type:"submit",isLoading:I,children:D?"Update":"Save"})]})]})})}):n.jsxs(p,{open:S,onOpenChange:C,children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Increment Record"]})}),n.jsx(g,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[600px]",children:n.jsxs(q,{methods:k,onSubmit:k.handleSubmit(A),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{children:"Add a new increment record"})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[n.jsx("div",{children:n.jsx(R,{label:"Increment Date *",name:"increment_date",type:"date"})}),n.jsx("div",{children:n.jsx(R,{label:"Effective From Date *",name:"effective_from_date",type:"date"})}),n.jsx("div",{children:n.jsx(R,{label:"Increment Percentage (%) *",name:"increment_percentage",type:"number",placeholder:"Enter percentage"})}),n.jsx("div",{children:n.jsx(R,{label:"Increment Amount *",name:"increment_amount",type:"number",placeholder:"Enter increment amount"})}),n.jsx("div",{children:n.jsx(R,{label:"Old Basic Pay",name:"old_basic_pay",type:"number",placeholder:"Enter old basic pay"})}),n.jsx("div",{children:n.jsx(R,{label:"New Basic Pay *",name:"new_basic_pay",type:"number",placeholder:"Enter new basic pay"})}),n.jsx("div",{children:n.jsx(R,{label:"Scale",name:"scale",type:"number",placeholder:"Enter scale"})}),n.jsx("div",{children:n.jsx(ea,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),n.jsx(aa,{className:"col-span-full"}),n.jsx("div",{children:n.jsx(R,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number"})}),n.jsx("div",{children:n.jsx(R,{label:"Vide Order Date",name:"vide_order_date",type:"date"})}),n.jsx(aa,{className:"col-span-full"}),n.jsxs("div",{className:"col-span-full",children:[n.jsx(ta,{name:"is_under_esic_deduction",label:"Under ESIC Deduction"}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Check this if the employee is covered under Employee State Insurance Corporation (ESIC) scheme after this increment"})]}),k.watch("is_under_esic_deduction")&&n.jsx("div",{children:n.jsx(R,{label:"ESIC Amount",name:"esic_amount",type:"number",placeholder:"Enter ESIC amount"})})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:u,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:I,children:"Save"})]})]})})]})}function Ia({id:a,getDataById:s}){var t,l,r,d,o,c,m,x,u,p,h,g;const[b,j]=e.useState(null),v=U({api:`${z.getIncrementHistory}?emp_id=${a}`,key:"getIncrementHistory",value:[a],options:{enabled:!!a}}),f=L({}),y=e=>null==e?"â€”":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return n.jsx("main",{className:"bg-gray-50/50",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage increment history of the employee. Total increments:"," ",(null==(l=null==(t=null==v?void 0:v.data)?void 0:t.data)?void 0:l.total_records)||0]}),(null==(d=null==(r=null==v?void 0:v.data)?void 0:r.data)?void 0:d.total_increment_amount)?n.jsxs("p",{className:"text-sm font-medium text-green-600",children:["Total Increment Amount:"," ",y(v.data.data.total_increment_amount)]}):null]}),n.jsx(Ca,{title:"Add Increment Record",empId:a,refetch:v.refetch,getDataById:s})]}),b&&n.jsx(Ca,{title:"Edit Increment Record",empId:a,editData:b,isOpen:!0,onClose:()=>{j(null)},refetch:v.refetch,getDataById:s}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.isLoading?n.jsx(We,{children:n.jsx(Je,{className:"flex h-32 items-center justify-center",children:n.jsx(Xe,{})})}):n.jsxs(n.Fragment,{children:[null==(m=null==(c=null==(o=null==v?void 0:v.data)?void 0:o.data)?void 0:c.increment_history)?void 0:m.map(e=>n.jsxs(We,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[n.jsx(Qe,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"rounded-full bg-green-100 p-2",children:n.jsx(Te,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs(Ke,{className:"text-lg font-semibold text-gray-900",children:["Increment -"," ",Ge(e.increment_date).format("DD MMM YYYY")]}),n.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700",children:[n.jsx(qe,{className:"mr-1 h-3 w-3"}),y(e.increment_amount)]}),n.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-700",children:[e.increment_percentage,"%"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{j(e)})(e),children:n.jsx(Re,{className:"h-4 w-4"})}),n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ze("Are you sure?","This will delete the increment record permanently.",async()=>{var s,t,l;try{const n=await f.mutateAsync({api:`${z.deleteIncrementRecord}?emp_id=${a}&increment_id=${e}`,data:{}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Increment record deleted successfully"),v.refetch()):i.error((null==(l=null==n?void 0:n.data)?void 0:l.message)||"Failed to delete increment record")}catch(n){i.error("Error deleting increment record")}})})(e.id),children:n.jsx(xe,{className:"h-4 w-4"})})]})]})}),n.jsxs(Je,{className:"space-y-4 pt-0",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Old Basic Pay"}),n.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:y(e.old_basic_pay)})]}),n.jsxs("div",{className:"rounded-lg border bg-green-50 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-500",children:"New Basic Pay"}),n.jsx("p",{className:"mt-1 text-sm font-semibold text-green-700",children:y(e.new_basic_pay)})]}),n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Effective From"}),n.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:e.effective_from_date?Ge(e.effective_from_date).format("DD MMM YYYY"):"â€”"})]})]}),(e.vide_order_no||e.vide_order_date)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[e.vide_order_no&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(me,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",n.jsx("span",{className:"font-medium",children:e.vide_order_no})]})]}),e.vide_order_date&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",n.jsx("span",{className:"font-medium",children:Ge(e.vide_order_date).format("DD MMM YYYY")})]})]})]}),e.is_under_esic_deduction&&n.jsx("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-3",children:n.jsxs("p",{className:"text-sm text-orange-700",children:["Under ESIC Deduction - Amount:"," ",y(e.esic_amount)]})}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(ne,{className:"h-3 w-3"}),n.jsxs("span",{children:["Added on"," ",Ge(e.created_at).format("DD MMM YYYY, hh:mm A")]}),e.scale&&n.jsxs("span",{className:"ml-2",children:["| Scale: ",e.scale]})]})})]})]},e.id)),(!(null==(u=null==(x=null==v?void 0:v.data)?void 0:x.data)?void 0:u.increment_history)||0===(null==(g=null==(h=null==(p=null==v?void 0:v.data)?void 0:p.data)?void 0:h.increment_history)?void 0:g.length))&&n.jsx(We,{className:"py-12 text-center",children:n.jsxs(Je,{children:[n.jsx(Te,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No increment records found"}),n.jsx("p",{className:"mb-4 text-gray-600",children:"Add increment history records to track salary progression"})]})})]})})]})})}const Pa=[{label:"Regular",value:"regular"},{label:"Ad-hoc",value:"adhoc"},{label:"Time Bound",value:"time_bound"},{label:"Merit Based",value:"merit_based"}],Ma=C().shape({to_designation_id:P().required("To designation is required"),from_designation_id:P().nullable().transform((e,a)=>""===a?null:e),from_basic_pay:P().nullable().transform((e,a)=>""===a?null:e),from_grade_pay:P().nullable().transform((e,a)=>""===a?null:e),to_basic_pay:P().nullable().transform((e,a)=>""===a?null:e),to_grade_pay:P().nullable().transform((e,a)=>""===a?null:e),from_pay_level_id:P().nullable().transform((e,a)=>""===a?null:e),to_pay_level_id:P().nullable().transform((e,a)=>""===a?null:e),promotion_type:M().oneOf(["regular","adhoc","time_bound","merit_based"]).default("regular"),promotion_date:M().required("Promotion date is required"),effective_from:M().required("Effective from date is required"),vide_order_no:M().nullable(),vide_order_date:M().nullable(),reference_doc:T().nullable(),remarks:M().nullable()});function Fa({title:a="Add Promotion Record",empId:l,editData:r,isOpen:d,onClose:o,refetch:c,getDataById:m}){var x,u;const _=L({}),N=O({}),w=e.useRef(null),[S,D]=e.useState(!1),k=void 0!==d,A=k?d:S,E=!!r,C=U({api:z.getAllDesignationMstr,key:"getAllDesignations",options:{enabled:!0}}),I=(null==(u=null==(x=null==C?void 0:C.data)?void 0:x.data)?void 0:u.map(e=>({label:e.designation_name,value:e.id.toString()})))||[],P=s({defaultValues:{to_designation_id:0,from_designation_id:null,from_basic_pay:null,from_grade_pay:null,to_basic_pay:null,to_grade_pay:null,from_pay_level_id:null,to_pay_level_id:null,promotion_type:"regular",promotion_date:"",effective_from:"",vide_order_no:"",vide_order_date:"",reference_doc:null,remarks:""},resolver:t(Ma)}),M=()=>{k&&o?o():D(!1),P.reset()},F=e=>{k?!e&&o&&o():D(e)};e.useEffect(()=>{var e,a,s;E&&r?P.reset({to_designation_id:r.to_designation_id,from_designation_id:r.from_designation_id,from_basic_pay:r.from_basic_pay,from_grade_pay:r.from_grade_pay,to_basic_pay:r.to_basic_pay,to_grade_pay:r.to_grade_pay,from_pay_level_id:r.from_pay_level_id,to_pay_level_id:r.to_pay_level_id,promotion_type:r.promotion_type||"regular",promotion_date:(null==(e=r.promotion_date)?void 0:e.split("T")[0])||"",effective_from:(null==(a=r.effective_from)?void 0:a.split("T")[0])||"",vide_order_no:r.vide_order_no||"",vide_order_date:(null==(s=r.vide_order_date)?void 0:s.split("T")[0])||"",reference_doc:null,remarks:r.remarks||""}):P.reset({to_designation_id:0,from_designation_id:null,from_basic_pay:null,from_grade_pay:null,to_basic_pay:null,to_grade_pay:null,from_pay_level_id:null,to_pay_level_id:null,promotion_type:"regular",promotion_date:"",effective_from:"",vide_order_no:"",vide_order_date:"",reference_doc:null,remarks:""})},[E,r,P]);const $=P.formState.isSubmitting||_.isPending||N.isPending,T=n.jsxs(q,{methods:P,onSubmit:P.handleSubmit(async e=>{var a,s,t,n,d,o;try{const m=e.reference_doc instanceof File,x=new window.FormData;if(x.append("to_designation_id",String(e.to_designation_id)),x.append("from_designation_id",String(e.from_designation_id||"")),x.append("from_basic_pay",String(e.from_basic_pay||"")),x.append("from_grade_pay",String(e.from_grade_pay||"")),x.append("to_basic_pay",String(e.to_basic_pay||"")),x.append("to_grade_pay",String(e.to_grade_pay||"")),x.append("from_pay_level_id",String(e.from_pay_level_id||"")),x.append("to_pay_level_id",String(e.to_pay_level_id||"")),x.append("promotion_type",e.promotion_type||"regular"),x.append("promotion_date",e.promotion_date),x.append("effective_from",e.effective_from),x.append("vide_order_no",e.vide_order_no||""),x.append("vide_order_date",e.vide_order_date||""),x.append("remarks",e.remarks||""),m&&x.append("reference_doc",e.reference_doc),E&&r){const e=await N.mutateAsync({api:`${z.updatePromotionRecord}?emp_id=${l}&promotion_id=${r.id}`,data:x});(null==(a=e.data)?void 0:a.success)?(i.success((null==(s=null==e?void 0:e.data)?void 0:s.message)||"Promotion record updated successfully"),M()):i.error((null==(t=e.data)?void 0:t.message)||"Failed to update promotion record")}else{const e=await N.mutateAsync({api:`${z.addPromotionRecord}?emp_id=${l}`,data:x});(null==(n=e.data)?void 0:n.success)?(i.success((null==(d=null==e?void 0:e.data)?void 0:d.message)||"Promotion record added successfully"),M()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to add promotion record")}P.reset(),null==c||c()}catch(m){i.error("An error occurred while processing your request")}}),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(v,{children:E?"Update promotion record details":"Add a new promotion record"})]}),n.jsxs("div",{className:"mt-5 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-3",children:[n.jsx("div",{children:n.jsx(R,{label:"Promotion Date *",name:"promotion_date",type:"date"})}),n.jsx("div",{children:n.jsx(R,{label:"Effective From Date *",name:"effective_from",type:"date"})}),n.jsx("div",{children:n.jsx(Y,{label:"Promotion Type",name:"promotion_type",data:Pa,initialValue:"",initialValueText:"Select"})})]}),n.jsx(aa,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation Change"}),n.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[n.jsx("div",{children:n.jsx(Y,{label:"From Designation",name:"from_designation_id",data:I,isSearch:!0,initialValue:"",initialValueText:"Select"})}),n.jsx("div",{children:n.jsx(Y,{label:"To Designation *",name:"to_designation_id",data:I,isSearch:!0,initialValue:"",initialValueText:"Select"})})]})]}),n.jsx(aa,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Pay Details"}),n.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-500",children:"From Pay"}),n.jsx(R,{label:"Basic Pay",name:"from_basic_pay",type:"number",placeholder:"Enter basic pay"}),n.jsx(R,{label:"Grade Pay",name:"from_grade_pay",type:"number",placeholder:"Enter grade pay"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-500",children:"To Pay"}),n.jsx(R,{label:"Basic Pay",name:"to_basic_pay",type:"number",placeholder:"Enter basic pay"}),n.jsx(R,{label:"Grade Pay",name:"to_grade_pay",type:"number",placeholder:"Enter grade pay"})]})]})]}),n.jsx(aa,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4 md:grid-cols-2",children:[n.jsx("div",{children:n.jsx(R,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter order number"})}),n.jsx("div",{children:n.jsx(R,{label:"Vide Order Date",name:"vide_order_date",type:"date"})})]}),n.jsx("div",{children:n.jsx(ea,{label:"Reference Document",name:"reference_doc",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",placeholder:"Upload reference document"})}),n.jsx("div",{children:n.jsx(R,{label:"Remarks",name:"remarks",placeholder:"Enter any remarks"})})]})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[k?n.jsx(J,{type:"button",variant:"outline",onClick:M,children:"Cancel"}):n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:w,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:$,children:E?"Update":"Save"})]})]});return k?n.jsx(p,{open:A,onOpenChange:F,children:n.jsx(g,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[700px]",children:T})}):n.jsxs(p,{open:A,onOpenChange:F,children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Promotion Record"]})}),n.jsx(g,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[700px]",children:T})]})}function $a({id:a,getDataById:s}){var t,l,r,d,o,c,m,x,u,p;const[h,g]=e.useState(null),b=U({api:`${z.getPromotionHistory}?emp_id=${a}`,key:"getPromotionHistory",value:[a],options:{enabled:!!a}}),j=L({}),v=e=>null==e?"â€”":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),f=e=>({regular:{label:"Regular",color:"bg-blue-100 text-blue-700"},adhoc:{label:"Ad-hoc",color:"bg-orange-100 text-orange-700"},time_bound:{label:"Time Bound",color:"bg-purple-100 text-purple-700"},merit_based:{label:"Merit Based",color:"bg-green-100 text-green-700"}}[e]||{label:e,color:"bg-gray-100 text-gray-700"});return n.jsx("main",{className:"bg-gray-50/50",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage promotion history of the employee. Total promotions:"," ",(null==(l=null==(t=null==b?void 0:b.data)?void 0:t.data)?void 0:l.total_records)||0]})}),n.jsx(Fa,{title:"Add Promotion Record",empId:a,refetch:b.refetch,getDataById:s})]}),h&&n.jsx(Fa,{title:"Edit Promotion Record",empId:a,editData:h,isOpen:!0,onClose:()=>{g(null)},refetch:b.refetch,getDataById:s}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:b.isLoading?n.jsx(We,{children:n.jsx(Je,{className:"flex h-32 items-center justify-center",children:n.jsx(Xe,{})})}):n.jsxs(n.Fragment,{children:[null==(o=null==(d=null==(r=null==b?void 0:b.data)?void 0:r.data)?void 0:d.promotion_history)?void 0:o.map(e=>n.jsxs(We,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[n.jsx(Qe,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"rounded-full bg-purple-100 p-2",children:n.jsx($e,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsxs(Ke,{className:"text-lg font-semibold text-gray-900",children:["Promotion -"," ",Ge(e.promotion_date).format("DD MMM YYYY")]}),n.jsx("div",{className:"mt-1 flex items-center gap-2",children:n.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${f(e.promotion_type).color}`,children:f(e.promotion_type).label})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{g(e)})(e),children:n.jsx(Re,{className:"h-4 w-4"})}),n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ze("Are you sure?","This will delete the promotion record permanently.",async()=>{var s,t,l;try{const n=await j.mutateAsync({api:`${z.deletePromotionRecord}?emp_id=${a}&promotion_id=${e}`,data:{}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Promotion record deleted successfully"),b.refetch()):i.error((null==(l=null==n?void 0:n.data)?void 0:l.message)||"Failed to delete promotion record")}catch(n){i.error("Error deleting promotion record")}})})(e.id),children:n.jsx(xe,{className:"h-4 w-4"})})]})]})}),n.jsxs(Je,{className:"space-y-4 pt-0",children:[n.jsxs("div",{className:"rounded-lg border bg-gradient-to-r from-gray-50 to-purple-50 p-4",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(se,{className:"h-4 w-4"}),"Designation Change"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"From"}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:e.from_designation_name||"â€”"})]}),n.jsx(Ve,{className:"h-5 w-5 text-purple-500"}),n.jsxs("div",{className:"flex-1 rounded-lg bg-purple-100 p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"To"}),n.jsx("p",{className:"mt-1 font-semibold text-purple-700",children:e.to_designation_name||"â€”"})]})]})]}),(e.from_basic_pay||e.to_basic_pay)&&n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[n.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-500",children:[n.jsx(qe,{className:"h-3 w-3"}),"From Pay"]}),n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Basic: ",v(e.from_basic_pay),e.from_grade_pay?` + GP: ${v(e.from_grade_pay)}`:""]}),e.from_pay_level_name&&n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Level: ",e.from_pay_level_name]})]}),n.jsxs("div",{className:"rounded-lg border bg-green-50 p-3",children:[n.jsxs("div",{className:"mb-1 flex items-center gap-2 text-xs font-medium text-gray-500",children:[n.jsx(qe,{className:"h-3 w-3"}),"To Pay"]}),n.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Basic: ",v(e.to_basic_pay),e.to_grade_pay?` + GP: ${v(e.to_grade_pay)}`:""]}),e.to_pay_level_name&&n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Level: ",e.to_pay_level_name]})]})]}),n.jsx("div",{className:"rounded-lg border bg-gray-50 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Effective From:"," ",n.jsx("span",{className:"font-medium",children:Ge(e.effective_from).format("DD MMM YYYY")})]})]})}),(e.vide_order_no||e.vide_order_date)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[e.vide_order_no&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(me,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",n.jsx("span",{className:"font-medium",children:e.vide_order_no})]})]}),e.vide_order_date&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",n.jsx("span",{className:"font-medium",children:Ge(e.vide_order_date).format("DD MMM YYYY")})]})]})]}),e.remarks&&n.jsx("div",{className:"rounded-lg border bg-yellow-50 p-3",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("span",{className:"font-medium",children:"Remarks:"})," ",e.remarks]})}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(ne,{className:"h-3 w-3"}),n.jsxs("span",{children:["Added on"," ",Ge(e.created_at).format("DD MMM YYYY, hh:mm A")]})]})})]})]},e.id)),(!(null==(m=null==(c=null==b?void 0:b.data)?void 0:c.data)?void 0:m.promotion_history)||0===(null==(p=null==(u=null==(x=null==b?void 0:b.data)?void 0:x.data)?void 0:u.promotion_history)?void 0:p.length))&&n.jsx(We,{className:"py-12 text-center",children:n.jsxs(Je,{children:[n.jsx($e,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No promotion records found"}),n.jsx("p",{className:"mb-4 text-gray-600",children:"Add promotion history records to track career progression"})]})})]})})]})})}const Ta=C().shape({from_department_id:M().nullable(),to_department_id:M().nullable(),from_designation_id:M().nullable(),to_designation_id:M().nullable(),reason:M().nullable(),transfer_date:M().required("Transfer date is required"),joining_date:M().required("Joining date is required"),is_transfer_promotion:$().default(!1),vide_order_no:M().nullable(),vide_order_date:M().nullable(),description:M().nullable()});function qa({title:a="Add Transfer Record",empId:l,editData:r,isOpen:d,onClose:o,refetch:x,getDataById:u}){var v,_,N,w;const S=L({}),D=e.useRef(null),[k,A]=e.useState(!1),E=null!=r,C=E?d:k,I=E?e=>{!e&&o&&o()}:A,P=c(),M=m(),F=s({defaultValues:{from_department_id:"",to_department_id:"",from_designation_id:"",to_designation_id:"",reason:"",transfer_date:"",joining_date:"",is_transfer_promotion:!1,vide_order_no:"",vide_order_date:"",description:""},resolver:t(Ta)}),$=(null==(_=null==(v=null==P?void 0:P.data)?void 0:v.data)?void 0:_.map(e=>({value:String(e.id),label:String(e.department_name)})))||[],T=(null==(w=null==(N=null==M?void 0:M.data)?void 0:N.data)?void 0:w.map(e=>({value:String(e.id),label:String(e.designation_name)})))||[];e.useEffect(()=>{var e,a,s,t;r?F.reset({from_department_id:(null==(e=r.from_department_id)?void 0:e.toString())||"",to_department_id:(null==(a=r.to_department_id)?void 0:a.toString())||"",from_designation_id:(null==(s=r.from_designation_id)?void 0:s.toString())||"",to_designation_id:(null==(t=r.to_designation_id)?void 0:t.toString())||"",reason:r.reason||"",transfer_date:r.transfer_date?Ge(r.transfer_date).format("YYYY-MM-DD"):"",joining_date:r.joining_date?Ge(r.joining_date).format("YYYY-MM-DD"):"",is_transfer_promotion:r.is_transfer_promotion||!1,vide_order_no:r.vide_order_no||"",vide_order_date:r.vide_order_date?Ge(r.vide_order_date).format("YYYY-MM-DD"):"",description:r.description||""}):F.reset({from_department_id:"",to_department_id:"",from_designation_id:"",to_designation_id:"",reason:"",transfer_date:"",joining_date:"",is_transfer_promotion:!1,vide_order_no:"",vide_order_date:"",description:""})},[r]);const O=F.formState.isSubmitting||S.isPending,U=n.jsx(g,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[900px]",children:n.jsxs(q,{methods:F,onSubmit:F.handleSubmit(async e=>{var a,s,t,n,d,c,m,u;try{const p={emp_id:l,from_department_id:e.from_department_id||null,to_department_id:e.to_department_id||null,from_designation_id:e.from_designation_id||null,to_designation_id:e.to_designation_id||null,reason:e.reason||null,transfer_date:e.transfer_date,joining_date:e.joining_date,is_transfer_promotion:e.is_transfer_promotion||!1,vide_order_no:e.vide_order_no||null,vide_order_date:e.vide_order_date||null,description:e.description||null};if(null==r?void 0:r.id){const e=await S.mutateAsync({api:`${z.updateTransferRecord}?emp_id=${l}&transfer_id=${r.id}`,data:p});(null==(a=e.data)?void 0:a.success)?(i.success((null==(s=null==e?void 0:e.data)?void 0:s.message)||"Transfer record updated successfully"),null==(t=D.current)||t.click(),null==o||o()):i.error((null==(n=e.data)?void 0:n.message)||"Failed to update transfer record")}else{const e=await S.mutateAsync({api:`${z.addTransferRecord}?emp_id=${l}`,data:p});(null==(d=e.data)?void 0:d.success)?(i.success((null==(c=null==e?void 0:e.data)?void 0:c.message)||"Transfer record added successfully"),null==(m=D.current)||m.click()):i.error((null==(u=e.data)?void 0:u.message)||"Failed to add transfer record")}F.reset(),null==x||x()}catch(p){i.error("An error occurred while processing your request")}}),children:[n.jsxs(b,{children:[n.jsx(j,{children:a}),n.jsx(aa,{className:"my-4"})]}),n.jsxs("div",{className:"mt-5 space-y-6",children:[n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[n.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Department Change"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"From Department"}),n.jsx(Y,{name:"from_department_id",data:$,isSearch:!0,initialValue:"",initialValueText:"Select department"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"To Department"}),n.jsx(Y,{name:"to_department_id",data:$,isSearch:!0,initialValue:"",initialValueText:"Select department"})]})]})]}),n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[n.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Designation Change"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"From Designation"}),n.jsx(Y,{name:"from_designation_id",data:T,isSearch:!0,initialValue:"",initialValueText:"Select designation"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"To Designation"}),n.jsx(Y,{name:"to_designation_id",data:T,isSearch:!0,initialValue:"",initialValueText:"Select designation"})]})]})]}),n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[n.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Transfer Dates"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"mb-1 block text-sm text-gray-600",children:["Transfer Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(R,{name:"transfer_date",type:"date"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"mb-1 block text-sm text-gray-600",children:["Joining Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(R,{name:"joining_date",type:"date"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Reason for Transfer"}),n.jsx(R,{name:"reason",placeholder:"Enter reason",inputValidation:["removeDoubleSpace"]})]}),n.jsx("div",{className:"flex items-center pt-6",children:n.jsx(ta,{name:"is_transfer_promotion",label:"Transfer with Promotion"})})]}),n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[n.jsx("h3",{className:"mb-4 text-sm font-semibold text-gray-700",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Vide Order No."}),n.jsx(R,{name:"vide_order_no",placeholder:"Enter order number",inputValidation:["removeDoubleSpace"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Vide Order Date"}),n.jsx(R,{name:"vide_order_date",type:"date"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm text-gray-600",children:"Description / Remarks"}),n.jsx(V,{name:"description",placeholder:"Enter any additional remarks or description",rows:3})]})]}),n.jsxs(f,{className:"mt-5 flex justify-between",children:[n.jsx(y,{asChild:!0,children:n.jsx(J,{variant:"outline",ref:D,children:"Cancel"})}),n.jsx(B,{type:"submit",isLoading:O,children:r?"Update":"Save"})]})]})});return E?n.jsx(p,{open:C,onOpenChange:I,children:U}):n.jsxs(p,{open:k,onOpenChange:A,children:[n.jsx(h,{asChild:!0,children:n.jsxs(J,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[n.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Transfer"]})}),U]})}function Ra({id:a,getDataById:s}){var t,l,r,d,o,c,m,x,u,p;const[h,g]=e.useState(null),b=U({api:`${z.getTransferHistory}?emp_id=${a}`,key:"getTransferHistory",value:[a],options:{enabled:!!a}}),j=L({});return n.jsx("main",{className:"bg-gray-50/50",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Manage transfer history of the employee. Total transfers:"," ",(null==(l=null==(t=null==b?void 0:b.data)?void 0:t.data)?void 0:l.total_records)||0]})}),n.jsx(qa,{title:"Add Transfer Record",empId:a,refetch:b.refetch,getDataById:s})]}),h&&n.jsx(qa,{title:"Edit Transfer Record",empId:a,editData:h,isOpen:!0,onClose:()=>{g(null)},refetch:b.refetch,getDataById:s}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:b.isLoading?n.jsx(We,{children:n.jsx(Je,{className:"flex h-32 items-center justify-center",children:n.jsx(Xe,{})})}):n.jsxs(n.Fragment,{children:[null==(o=null==(d=null==(r=null==b?void 0:b.data)?void 0:r.data)?void 0:d.transfer_history)?void 0:o.map(e=>n.jsxs(We,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[n.jsx(Qe,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"rounded-full bg-orange-100 p-2",children:n.jsx(Be,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsxs(Ke,{className:"text-lg font-semibold text-gray-900",children:["Transfer -"," ",Ge(e.transfer_date).format("DD MMM YYYY")]}),n.jsx("div",{className:"mt-1 flex items-center gap-2",children:e.is_transfer_promotion?n.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-700",children:[n.jsx(we,{className:"mr-1 h-3 w-3"}),"With Promotion"]}):n.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-700",children:[n.jsx(Se,{className:"mr-1 h-3 w-3"}),"Transfer Only"]})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-blue-500 hover:bg-blue-50 hover:text-blue-700",onClick:()=>(e=>{g(e)})(e),children:n.jsx(Re,{className:"h-4 w-4"})}),n.jsx(J,{size:"sm",variant:"ghost",className:"flex h-8 w-8 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ze("Are you sure?","This will delete the transfer record permanently.",async()=>{var s,t,l;try{const n=await j.mutateAsync({api:`${z.deleteTransferRecord}?emp_id=${a}&transfer_id=${e}`,data:{}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Transfer record deleted successfully"),b.refetch()):i.error((null==(l=null==n?void 0:n.data)?void 0:l.message)||"Failed to delete transfer record")}catch(n){i.error("Error deleting transfer record")}})})(e.id),children:n.jsx(xe,{className:"h-4 w-4"})})]})]})}),n.jsxs(Je,{className:"space-y-4 pt-0",children:[(e.from_department_name||e.to_department_name)&&n.jsxs("div",{className:"rounded-lg border bg-gradient-to-r from-gray-50 to-orange-50 p-4",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(le,{className:"h-4 w-4"}),"Department Change"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"From"}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:e.from_department_name||"â€”"})]}),n.jsx(Ve,{className:"h-5 w-5 text-orange-500"}),n.jsxs("div",{className:"flex-1 rounded-lg bg-orange-100 p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"To"}),n.jsx("p",{className:"mt-1 font-semibold text-orange-700",children:e.to_department_name||"â€”"})]})]})]}),(e.from_designation_name||e.to_designation_name)&&n.jsxs("div",{className:"rounded-lg border bg-gray-50 p-4",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700",children:[n.jsx(se,{className:"h-4 w-4"}),"Designation Change"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"From"}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:e.from_designation_name||"â€”"})]}),n.jsx(Ve,{className:"h-5 w-5 text-gray-400"}),n.jsxs("div",{className:"flex-1 rounded-lg bg-white p-3 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"To"}),n.jsx("p",{className:"mt-1 font-semibold text-gray-900",children:e.to_designation_name||"â€”"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[n.jsx("div",{className:"rounded-lg border bg-gray-50 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Transfer Date:"," ",n.jsx("span",{className:"font-medium",children:Ge(e.transfer_date).format("DD MMM YYYY")})]})]})}),n.jsx("div",{className:"rounded-lg border bg-green-50 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Joining Date:"," ",n.jsx("span",{className:"font-medium text-green-700",children:Ge(e.joining_date).format("DD MMM YYYY")})]})]})})]}),e.reason&&n.jsx("div",{className:"rounded-lg border bg-blue-50 p-3",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("span",{className:"font-medium",children:"Reason:"})," ",e.reason]})}),(e.vide_order_no||e.vide_order_date)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border bg-gray-50 p-3",children:[e.vide_order_no&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(me,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order No:"," ",n.jsx("span",{className:"font-medium",children:e.vide_order_no})]})]}),e.vide_order_date&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:["Order Date:"," ",n.jsx("span",{className:"font-medium",children:Ge(e.vide_order_date).format("DD MMM YYYY")})]})]})]}),e.description&&n.jsx("div",{className:"rounded-lg border bg-yellow-50 p-3",children:n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("span",{className:"font-medium",children:"Description:"})," ",e.description]})}),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(ne,{className:"h-3 w-3"}),n.jsxs("span",{children:["Added on"," ",Ge(e.created_at).format("DD MMM YYYY, hh:mm A")]})]})})]})]},e.id)),(!(null==(m=null==(c=null==b?void 0:b.data)?void 0:c.data)?void 0:m.transfer_history)||0===(null==(p=null==(u=null==(x=null==b?void 0:b.data)?void 0:x.data)?void 0:u.transfer_history)?void 0:p.length))&&n.jsx(We,{className:"py-12 text-center",children:n.jsxs(Je,{children:[n.jsx(Be,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No transfer records found"}),n.jsx("p",{className:"mb-4 text-gray-600",children:"Add transfer history records to track department/location changes"})]})})]})})]})})}function Va({id:e,getDataById:a}){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[n.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Increment History"}),n.jsx(Ia,{id:e,getDataById:a})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[n.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Promotion History"}),n.jsx($a,{id:e,getDataById:a})]}),n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[n.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Transfer History"}),n.jsx(Ra,{id:e,getDataById:a})]})]})}function Ba(){return n.jsx("div",{children:"JoiningInformation"})}function Ya(){var e,a,s,t,l,i,c;const[m,x]=d.useState(""),[u,p]=d.useState(""),{id:h}=r(),g=h||"",b=U({api:`${null==(e=z)?void 0:e.getPaySlipList}?emp_id=${g}&${(()=>{let e="";return m&&(e+=`year=${m}&`),u&&(e+=`month=${u}&`),e})()}`,key:"salary-slip-list",value:[g,m,u],options:{enabled:!!g}}),j=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),v=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-700 border-blue-200";case"approved":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},[f,y]=d.useState("list");if(b.isLoading)return n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading salary slips..."})]})});if(b.error)return n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"max-w-md rounded-lg border border-red-200 bg-red-50 p-6",children:[n.jsx(re,{className:"mx-auto mb-4 h-12 w-12 text-red-500"}),n.jsx("p",{className:"text-center text-red-700",children:"Error loading salary slips"})]})});null==(s=null==(a=b.data)?void 0:a.data)||s.employee;const _=(null==(l=null==(t=b.data)?void 0:t.data)?void 0:l.salary_slips)||[],N=null==(c=null==(i=b.data)?void 0:i.data)?void 0:c.summary;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[n.jsxs("div",{className:"mb-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ye,{className:"h-5 w-5 text-gray-400"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Salary Slips"})]}),n.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-100 p-1",children:[n.jsxs("button",{onClick:()=>y("card"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("card"===f?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[n.jsx(Le,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"Card"})]}),n.jsxs("button",{onClick:()=>y("list"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("list"===f?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[n.jsx(Pe,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"List"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Year"}),n.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Years"}),["2024","2025","2026"].map(e=>n.jsx("option",{value:e,children:e},e))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Month"}),n.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"All Months"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,a)=>n.jsx("option",{value:a+1,children:e},e))]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:()=>{x(""),p("")},className:"w-full rounded-lg bg-gray-100 px-4 py-2 font-medium text-gray-700 transition hover:bg-gray-200",children:"Clear Filters"})})]})]}),N&&n.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-sm",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-blue-100",children:"Total Gross Salary"}),n.jsx(qe,{className:"h-5 w-5 text-blue-200"})]}),n.jsx("p",{className:"text-3xl font-bold",children:j(N.total_gross_salary)})]}),n.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-500 to-red-600 p-6 text-white shadow-sm",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-red-100",children:"Total Deductions"}),n.jsx(qe,{className:"h-5 w-5 text-red-200"})]}),n.jsx("p",{className:"text-3xl font-bold",children:j(N.total_deductions)})]}),n.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-6 text-white shadow-sm",children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-green-100",children:"Total Net Salary"}),n.jsx(qe,{className:"h-5 w-5 text-green-200"})]}),n.jsx("p",{className:"text-3xl font-bold",children:j(N.total_net_salary)})]})]}),n.jsx("div",{className:"space-y-4",children:0===_.length?n.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm",children:[n.jsx(me,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),n.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No salary slips found"}),n.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Try adjusting your filters"})]}):"card"===f?_.map(e=>n.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"rounded-lg bg-blue-100 p-3",children:n.jsx(ne,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[e.month_name," ",e.year]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Generated on"," ",new Date(e.salary_generation_date).toLocaleDateString("en-IN")]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${v(e.salary_status)}`,children:e.salary_status.toUpperCase()}),n.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:[n.jsx(_e,{className:"h-4 w-4"}),"Download"]})]})]}),n.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[n.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Working Days"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.payable_days,"/",e.total_working_days]})]}),n.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[n.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Basic Pay"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j(e.basic_pay)})]}),n.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[n.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Grade Pay"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j(e.grade_pay)})]}),n.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[n.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"HRA"}),n.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j(e.house_rent_allowance)})]})]}),n.jsx("div",{className:"border-t border-gray-200 pt-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Gross Salary"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(e.gross_salary)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Total Deductions"}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",j(e.total_deductions)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Net Salary"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:j(e.net_salary)})]})]})})]})},e.id)):n.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Period"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Working Days"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Basic Pay"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Allowances"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Gross Salary"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Deductions"}),n.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Net Salary"}),n.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(e=>{const a=e.grade_pay+e.dearness_allowance+e.house_rent_allowance+e.transport_allowance;return n.jsxs("tr",{className:"transition hover:bg-gray-50",children:[n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"rounded-lg bg-blue-100 p-2",children:n.jsx(ne,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.month_name," ",e.year]}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.salary_generation_date).toLocaleDateString("en-IN")})]})]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:e.payable_days}),n.jsxs("span",{className:"text-gray-500",children:["/",e.total_working_days]})]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:j(e.basic_pay)})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:j(a)})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:n.jsx("p",{className:"text-sm font-bold text-gray-900",children:j(e.gross_salary)})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:n.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["-",j(e.total_deductions)]})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:n.jsx("p",{className:"text-sm font-bold text-green-600",children:j(e.net_salary)})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:n.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${v(e.salary_status)}`,children:e.salary_status.toUpperCase()})}),n.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:n.jsx(o,{to:`/hrms/dashboard/salary-slip-by-id/${Q(e.id.toString())}`,target:"_blank",children:n.jsxs("button",{className:"inline-flex items-center gap-1 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-blue-700",children:[n.jsx(_e,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"hidden lg:inline",children:"Download"})]})})})]},e.id)})})]})})})})]})}const La=C({id:M().required(),is_matrix_based:$().optional(),is_custom_commission:$().optional(),cell_index:M().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>e&&!a,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:M().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>!e&&!a,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),basic_pay:M().when("is_custom_commission",{is:!0,then:e=>e.required("Basic Pay is required for custom commissions"),otherwise:e=>e.optional()}),da_percentage:M().nullable().optional(),city_classification:M().optional(),hra_percentage:M().nullable().optional(),transport_allowance:M().optional(),medical_allowance:M().optional(),special_allowance:M().optional(),pension_scheme:M().optional(),nps_contribution_rate:M().nullable().optional(),gpf_contribution_rate:M().nullable().optional(),pf_employee_contribution_rate:M().nullable().optional(),bank_name:M().optional(),bank_account_no:M().optional(),bank_ifsc:M().optional(),tax_regime:M().oneOf(["old","new"]).optional()});function Oa({empId:a}){var l,i,r,d,o,c,m,x,u,p,h,g,b,j,v,f,y,_,N,w,S,D,k,E,C,I,P,M,F,$,T,V,B,L,O,H,G,W,K,X,ee,ae,se,te,le,ne,ie,re,de,oe,ce,me,xe,ue,pe,he,ge,be,je,ve,fe,ye,_e,Ne,we,Se,De,ke,Ae,Ee,Ce,Ie,Pe,Me,Fe,$e,Te,Re,Ve,Be,Ye,Le,He,ze,Ge,We,Je,Qe,Ke,Xe,Ze,ea,sa,ta,ca,ma,xa,ua,pa,ha,ga,ba,ja,va,fa,ya,_a,Na,wa,Sa,Da,ka,Aa,Ea,Ca,Ia,Pa,Ma,Fa,$a,Ta,qa,Ra,Va,Ba,Oa,Ua,Ha,za,Ga,Wa,Ja,Qa,Ka,Xa,Za,es,as,ss,ts,ls,ns,is,rs,ds,os,cs,ms,xs,us,ps,hs,gs,bs,js,vs,fs,ys,_s,Ns,ws,Ss,Ds,ks,As,Es,Cs,Is,Ps,Ms,Fs,$s,Ts,qs,Rs,Vs,Bs,Ys,Ls,Os,Us,Hs,zs,Gs,Ws,Js,Qs,Ks,Xs,Zs,et,at,st,tt,lt,nt;const[it,rt]=e.useState(!1),[dt,ot]=e.useState(!1),{data:ct,isLoading:mt}=U({api:`${z.getEmployeeSalary}?emp_id=${a}`,key:`getEmployeeSalary-${a}`,value:[a],options:{enabled:!!a}}),xt=Q(String((null==(r=null==(i=null==(l=null==ct?void 0:ct.data)?void 0:l.pay_config)?void 0:i.pay_level)?void 0:r.id)||"")),{data:ut}=A(xt),pt=s({resolver:t(La)}),{reset:ht,watch:gt}=pt,bt=gt("pension_scheme"),jt=gt("is_custom_commission"),vt=gt("is_matrix_based");null==(o=null==(d=null==ct?void 0:ct.data)?void 0:d.pay_config)||o.pay_level,e.useEffect(()=>{var e,a,s,t;if(null==(e=null==ct?void 0:ct.data)?void 0:e.pay_config){const e=ct.data.pay_config,l=!e.pay_level;ht({id:e.id.toString(),cell_index:String(e.cell_index||""),is_matrix_based:(null==(a=e.pay_commission)?void 0:a.is_matrix_based)??!1,is_custom_commission:l,grade_pay:String(e.grade_pay||0),basic_pay:String(e.current_basic_pay||""),da_percentage:(null==(t=null==(s=ct.data)?void 0:s.config)?void 0:t.da_percentage)?String(ct.data.config.da_percentage):"",city_classification:e.city_classification,hra_percentage:String(e.hra_percentage||""),transport_allowance:String(e.transport_allowance||""),medical_allowance:String(e.medical_allowance||""),special_allowance:String(e.special_allowance||0),pension_scheme:e.pension_scheme,...e.nps_contribution_rate&&{nps_contribution_rate:String(e.nps_contribution_rate)},...e.pf_employee_contribution_rate&&{pf_employee_contribution_rate:String(e.pf_employee_contribution_rate)},...e.gpf_contribution_rate&&{gpf_contribution_rate:String(e.gpf_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})}},[ct,ht]);const ft=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return mt?n.jsx("div",{className:"flex min-h-[300px] items-center justify-center",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Oe,{className:"h-6 w-6 animate-spin text-slate-500"}),n.jsx("span",{className:"text-sm text-slate-600",children:"Loading salary data..."})]})}):ct?n.jsx("div",{className:"space-y-4 p-4",children:n.jsxs(ia,{defaultValue:"overview",className:"w-full",children:[n.jsxs(ra,{className:"mb-6 inline-flex h-auto gap-1 rounded-lg border border-slate-200 bg-slate-100 p-1",children:[n.jsx(da,{value:"overview",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Overview"}),n.jsx(da,{value:"monthly",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Monthly"}),n.jsx(da,{value:"annual",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Annual"}),n.jsx(da,{value:"config",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Settings"}),n.jsx(da,{value:"pay-slip",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Pay Slip"})]}),n.jsxs(oa,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsx("div",{className:"rounded-lg bg-emerald-600 p-5 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-emerald-100",children:"Net Monthly Salary"}),n.jsx("p",{className:"mt-1 text-2xl font-bold",children:ft((null==(m=null==(c=ct.data)?void 0:c.monthly)?void 0:m.net_salary)||0)})]}),n.jsx(qe,{className:"h-8 w-8 text-emerald-200"})]})}),n.jsx("div",{className:"rounded-lg bg-blue-600 p-5 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-100",children:"Net Annual Salary"}),n.jsx("p",{className:"mt-1 text-2xl font-bold",children:ft((null==(u=null==(x=ct.data)?void 0:x.annual)?void 0:u.net_salary)||0)})]}),n.jsx(qe,{className:"h-8 w-8 text-blue-200"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Structure"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Pay Commission"}),n.jsx("span",{className:"font-medium text-slate-900",children:(null==(g=null==(h=null==(p=ct.data)?void 0:p.pay_config)?void 0:h.pay_commission)?void 0:g.commission_name)||"Custom"})]}),(null==(j=null==(b=ct.data)?void 0:b.pay_config)?void 0:j.pay_level)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Pay Level"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(y=null==(f=null==(v=ct.data)?void 0:v.pay_config)?void 0:f.pay_level)?void 0:y.level_name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(N=null==(_=ct.data)?void 0:_.pay_config)?void 0:N.current_basic_pay)})]}),(null==(D=null==(S=null==(w=ct.data)?void 0:w.pay_config)?void 0:S.pay_commission)?void 0:D.is_matrix_based)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Cell Index"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(E=null==(k=ct.data)?void 0:k.pay_config)?void 0:E.cell_index})]}),void 0!==(null==(I=null==(C=ct.data)?void 0:C.config)?void 0:I.da_percentage)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"DA Rate"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[null==(M=null==(P=ct.data)?void 0:P.config)?void 0:M.da_percentage,"%"]})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Deductions & Tax"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Pension Scheme"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==($=null==(F=ct.data)?void 0:F.pay_config)?void 0:$.pension_scheme})]}),(null==(V=null==(T=ct.data)?void 0:T.pay_config)?void 0:V.nps_contribution_rate)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[null==(L=null==(B=ct.data)?void 0:B.pay_config)?void 0:L.nps_contribution_rate,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),n.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(H=null==(O=ct.data)?void 0:O.pay_config)?void 0:H.tax_regime)?"New":"Old"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"City Class"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(W=null==(G=ct.data)?void 0:G.pay_config)?void 0:W.city_classification})]})]})]})]})]}),n.jsxs(oa,{value:"monthly",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ee=null==(X=null==(K=ct.data)?void 0:K.monthly)?void 0:X.earnings)?void 0:ee.basic_pay)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"DA"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(te=null==(se=null==(ae=ct.data)?void 0:ae.monthly)?void 0:se.earnings)?void 0:te.dearness_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"HRA"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ie=null==(ne=null==(le=ct.data)?void 0:le.monthly)?void 0:ne.earnings)?void 0:ie.house_rent_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Transport"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(oe=null==(de=null==(re=ct.data)?void 0:re.monthly)?void 0:de.earnings)?void 0:oe.transport_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Medical"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(xe=null==(me=null==(ce=ct.data)?void 0:ce.monthly)?void 0:me.earnings)?void 0:xe.medical_allowance)||0)})]}),(null==(he=null==(pe=null==(ue=ct.data)?void 0:ue.monthly)?void 0:pe.earnings)?void 0:he.special_allowance)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Special"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(je=null==(be=null==(ge=ct.data)?void 0:ge.monthly)?void 0:be.earnings)?void 0:je.special_allowance)})]}),n.jsx(aa,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),n.jsx("span",{className:"font-bold text-emerald-700",children:ft((null==(ye=null==(fe=null==(ve=ct.data)?void 0:ve.monthly)?void 0:fe.earnings)?void 0:ye.gross_salary)||0)})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(we=null==(Ne=null==(_e=ct.data)?void 0:_e.monthly)?void 0:Ne.deductions)?void 0:we.pf_contribution)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"PF"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(ke=null==(De=null==(Se=ct.data)?void 0:Se.monthly)?void 0:De.deductions)?void 0:ke.pf_contribution)})]}),(null==(Ce=null==(Ee=null==(Ae=ct.data)?void 0:Ae.monthly)?void 0:Ee.deductions)?void 0:Ce.nps_contribution)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"NPS"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Me=null==(Pe=null==(Ie=ct.data)?void 0:Ie.monthly)?void 0:Pe.deductions)?void 0:Me.nps_contribution)})]}),(null==(Te=null==($e=null==(Fe=ct.data)?void 0:Fe.monthly)?void 0:$e.deductions)?void 0:Te.gpf_contribution)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"GPF"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Be=null==(Ve=null==(Re=ct.data)?void 0:Re.monthly)?void 0:Ve.deductions)?void 0:Be.gpf_contribution)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(He=null==(Le=null==(Ye=ct.data)?void 0:Ye.monthly)?void 0:Le.deductions)?void 0:He.professional_tax)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Income Tax"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(We=null==(Ge=null==(ze=ct.data)?void 0:ze.monthly)?void 0:Ge.deductions)?void 0:We.income_tax)||0)})]}),n.jsx(aa,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),n.jsx("span",{className:"font-bold text-red-700",children:ft((null==(Ke=null==(Qe=null==(Je=ct.data)?void 0:Je.monthly)?void 0:Qe.deductions)?void 0:Ke.total_deductions)||0)})]})]})]})]}),n.jsx("div",{className:"rounded-lg bg-emerald-600 p-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold",children:"Net Monthly Salary"}),n.jsx("span",{className:"text-xl font-bold",children:ft((null==(Ze=null==(Xe=ct.data)?void 0:Xe.monthly)?void 0:Ze.net_salary)||0)})]})}),(null==(ta=null==(sa=null==(ea=ct.data)?void 0:ea.monthly)?void 0:sa.employer_contributions)?void 0:ta.total)>0&&n.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Employer Contribution"}),n.jsx("span",{className:"font-semibold text-slate-900",children:ft((null==(xa=null==(ma=null==(ca=ct.data)?void 0:ca.monthly)?void 0:ma.employer_contributions)?void 0:xa.total)||0)})]})})]}),n.jsxs(oa,{value:"annual",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Annual Earnings"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ha=null==(pa=null==(ua=ct.data)?void 0:ua.annual)?void 0:pa.earnings)?void 0:ha.basic_pay)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"DA"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ja=null==(ba=null==(ga=ct.data)?void 0:ga.annual)?void 0:ba.earnings)?void 0:ja.dearness_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"HRA"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ya=null==(fa=null==(va=ct.data)?void 0:va.annual)?void 0:fa.earnings)?void 0:ya.house_rent_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Transport"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(wa=null==(Na=null==(_a=ct.data)?void 0:_a.annual)?void 0:Na.earnings)?void 0:wa.transport_allowance)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Medical"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(ka=null==(Da=null==(Sa=ct.data)?void 0:Sa.annual)?void 0:Da.earnings)?void 0:ka.medical_allowance)||0)})]}),n.jsx(aa,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),n.jsx("span",{className:"font-bold text-emerald-700",children:ft((null==(Ca=null==(Ea=null==(Aa=ct.data)?void 0:Aa.annual)?void 0:Ea.earnings)?void 0:Ca.gross_salary)||0)})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Annual Deductions"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Ma=null==(Pa=null==(Ia=ct.data)?void 0:Ia.annual)?void 0:Pa.deductions)?void 0:Ma.pf_contribution)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"PF"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Ta=null==($a=null==(Fa=ct.data)?void 0:Fa.annual)?void 0:$a.deductions)?void 0:Ta.pf_contribution)})]}),(null==(Va=null==(Ra=null==(qa=ct.data)?void 0:qa.annual)?void 0:Ra.deductions)?void 0:Va.nps_contribution)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"NPS"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Ua=null==(Oa=null==(Ba=ct.data)?void 0:Ba.annual)?void 0:Oa.deductions)?void 0:Ua.nps_contribution)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Ga=null==(za=null==(Ha=ct.data)?void 0:Ha.annual)?void 0:za.deductions)?void 0:Ga.professional_tax)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Income Tax"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Qa=null==(Ja=null==(Wa=ct.data)?void 0:Wa.annual)?void 0:Ja.deductions)?void 0:Qa.income_tax)||0)})]}),n.jsx(aa,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),n.jsx("span",{className:"font-bold text-red-700",children:ft((null==(Za=null==(Xa=null==(Ka=ct.data)?void 0:Ka.annual)?void 0:Xa.deductions)?void 0:Za.total_deductions)||0)})]})]})]})]}),n.jsx("div",{className:"rounded-lg bg-blue-600 p-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold",children:"Net Annual Salary"}),n.jsx("span",{className:"text-xl font-bold",children:ft((null==(as=null==(es=ct.data)?void 0:es.annual)?void 0:as.net_salary)||0)})]})}),(null==(ss=ct.data)?void 0:ss.tax_info)&&n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Tax Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Regime"}),n.jsx("p",{className:"font-medium text-slate-900",children:"new"===ct.data.tax_info.regime?"New":"Old"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Taxable Income"}),n.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.annual_taxable_income)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Annual Tax"}),n.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.annual_tax)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-500",children:"Monthly Tax"}),n.jsx("p",{className:"font-medium text-slate-900",children:ft(ct.data.tax_info.monthly_tax)})]})]})]})]}),n.jsx(oa,{value:"config",className:"space-y-4",children:dt?n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6",children:[n.jsx("h4",{className:"mb-4 text-sm font-semibold text-slate-900",children:"Update Salary Configuration"}),n.jsxs(q,{methods:pt,onSubmit:pt.handleSubmit(async e=>{var a,s;rt(!0);try{(await Z.post(z.updateEmployeeSalary,{id:Number(e.id),...e.is_custom_commission&&{basic_pay:Number(e.basic_pay),da_percentage:e.da_percentage?Number(e.da_percentage):null},...!e.is_custom_commission&&e.is_matrix_based&&{cell_index:Number(e.cell_index)},...!e.is_custom_commission&&!e.is_matrix_based&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,hra_percentage:Number(e.hra_percentage)||null,transport_allowance:Number(e.transport_allowance),medical_allowance:Number(e.medical_allowance),special_allowance:Number(e.special_allowance),pension_scheme:e.pension_scheme,..."EPF_NPS"===e.pension_scheme&&{nps_contribution_rate:Number(e.nps_contribution_rate),pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},..."OPS"===e.pension_scheme&&{gpf_contribution_rate:Number(e.gpf_contribution_rate)},..."EPF"===e.pension_scheme&&{pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})).data.success&&(alert("Salary configuration updated successfully!"),ot(!1))}catch(t){alert((null==(s=null==(a=null==t?void 0:t.response)?void 0:a.data)?void 0:s.message)||"Failed to update salary configuration")}finally{rt(!1)}}),children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[jt?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsx(R,{name:"basic_pay",label:"Basic Pay",type:"number",placeholder:"Enter basic pay"})}),n.jsx("div",{children:n.jsx(R,{name:"da_percentage",label:"DA Percentage",type:"number",placeholder:"e.g., 50"})})]}):n.jsx(n.Fragment,{children:vt?n.jsx("div",{children:n.jsx(Y,{name:"cell_index",label:"Cell Index",data:(null==(ts=null==ut?void 0:ut.data)?void 0:ts.map(e=>({label:`Index ${e.cell_index} - â‚¹${e.basic_pay}`,value:String(e.cell_index)})))||[]})}):n.jsx("div",{children:n.jsx(R,{name:"grade_pay",label:"Grade Pay"})})}),n.jsx("div",{children:n.jsx(Y,{name:"city_classification",label:"City Classification",data:[{label:"X - Metro (24%)",value:"X"},{label:"Y - Other (16%)",value:"Y"},{label:"Z - Rural (8%)",value:"Z"}]})}),n.jsx("div",{children:n.jsx(R,{name:"hra_percentage",label:"HRA %"})}),n.jsx("div",{children:n.jsx(R,{name:"transport_allowance",label:"Transport"})}),n.jsx("div",{children:n.jsx(R,{name:"medical_allowance",label:"Medical"})}),n.jsx("div",{children:n.jsx(R,{name:"special_allowance",label:"Special"})}),n.jsx("div",{children:n.jsx(Y,{name:"pension_scheme",label:"Pension Scheme",data:[{label:"EPF + NPS",value:"EPF_NPS"},{label:"GPF",value:"OPS"},{label:"EPF Only",value:"EPF"}]})}),"EPF_NPS"===bt&&n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsx(R,{name:"nps_contribution_rate",label:"NPS Rate (%)",type:"number"})}),n.jsx("div",{children:n.jsx(R,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})})]}),"EPF"===bt&&n.jsx("div",{children:n.jsx(R,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})}),"OPS"===bt&&n.jsx("div",{children:n.jsx(R,{name:"gpf_contribution_rate",label:"GPF Rate (%)",type:"number"})}),n.jsxs("div",{children:[" ",n.jsx(R,{name:"bank_name",label:"Bank Name"})]}),n.jsx("div",{children:n.jsx(R,{name:"bank_account_no",label:"Account No."})}),n.jsx("div",{children:n.jsx(R,{name:"bank_ifsc",label:"IFSC Code"})}),n.jsx("div",{children:n.jsx(Y,{name:"tax_regime",label:"Tax Regime",data:[{label:"New Regime",value:"new"},{label:"Old Regime",value:"old"}]})})]}),n.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-slate-200 pt-4",children:[n.jsx(J,{type:"button",variant:"outline",onClick:()=>ot(!1),children:"Cancel"}),n.jsx(J,{type:"submit",disabled:it,children:it?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(J,{onClick:()=>ot(!0),variant:"outline",size:"sm",children:[n.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Edit"]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Configuration"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Commission"}),n.jsx("span",{className:"font-medium text-slate-900",children:(null==(is=null==(ns=null==(ls=ct.data)?void 0:ls.pay_config)?void 0:ns.pay_commission)?void 0:is.commission_name)||"Custom"})]}),(null==(ds=null==(rs=ct.data)?void 0:rs.pay_config)?void 0:ds.pay_level)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Pay Level"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(ms=null==(cs=null==(os=ct.data)?void 0:os.pay_config)?void 0:cs.pay_level)?void 0:ms.level_name})]}),(null==(ps=null==(us=null==(xs=ct.data)?void 0:xs.pay_config)?void 0:us.pay_commission)?void 0:ps.is_matrix_based)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Cell Index"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(gs=null==(hs=ct.data)?void 0:hs.pay_config)?void 0:gs.cell_index})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(js=null==(bs=ct.data)?void 0:bs.pay_config)?void 0:js.current_basic_pay)})]}),!(null==(ys=null==(fs=null==(vs=ct.data)?void 0:vs.pay_config)?void 0:fs.pay_commission)?void 0:ys.is_matrix_based)&&(null==(Ns=null==(_s=ct.data)?void 0:_s.pay_config)?void 0:Ns.grade_pay)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Grade Pay"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft((null==(Ss=null==(ws=ct.data)?void 0:ws.pay_config)?void 0:Ss.grade_pay)||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Effective From"}),n.jsx("span",{className:"font-medium text-slate-900",children:new Date(null==(ks=null==(Ds=ct.data)?void 0:Ds.pay_config)?void 0:ks.effective_from).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Allowances"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"City Class"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(Es=null==(As=ct.data)?void 0:As.pay_config)?void 0:Es.city_classification})]}),void 0!==(null==(Is=null==(Cs=ct.data)?void 0:Cs.config)?void 0:Is.da_percentage)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"DA %"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Ms=null==(Ps=ct.data)?void 0:Ps.config)?void 0:Ms.da_percentage,"%"]})]}),(null==($s=null==(Fs=ct.data)?void 0:Fs.pay_config)?void 0:$s.hra_percentage)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"HRA %"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[null==(qs=null==(Ts=ct.data)?void 0:Ts.pay_config)?void 0:qs.hra_percentage,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Transport"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Vs=null==(Rs=ct.data)?void 0:Rs.pay_config)?void 0:Vs.transport_allowance)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Medical"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Ys=null==(Bs=ct.data)?void 0:Bs.pay_config)?void 0:Ys.medical_allowance)})]}),(null==(Os=null==(Ls=ct.data)?void 0:Ls.pay_config)?void 0:Os.special_allowance)>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Special"}),n.jsx("span",{className:"font-medium text-slate-900",children:ft(null==(Hs=null==(Us=ct.data)?void 0:Us.pay_config)?void 0:Hs.special_allowance)})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Retirement & Tax"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Pension"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(Gs=null==(zs=ct.data)?void 0:zs.pay_config)?void 0:Gs.pension_scheme})]}),(null==(Js=null==(Ws=ct.data)?void 0:Ws.pay_config)?void 0:Js.nps_contribution_rate)&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),n.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Ks=null==(Qs=ct.data)?void 0:Qs.pay_config)?void 0:Ks.nps_contribution_rate,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),n.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(Zs=null==(Xs=ct.data)?void 0:Xs.pay_config)?void 0:Zs.tax_regime)?"New":"Old"})]})]})]}),n.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[n.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Bank Details"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Bank"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(at=null==(et=ct.data)?void 0:et.pay_config)?void 0:at.bank_name})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Account"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(tt=null==(st=ct.data)?void 0:st.pay_config)?void 0:tt.bank_account_no})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"IFSC"}),n.jsx("span",{className:"font-medium text-slate-900",children:null==(nt=null==(lt=ct.data)?void 0:lt.pay_config)?void 0:nt.bank_ifsc})]})]})]})]})]})}),n.jsx(oa,{value:"pay-slip",className:"space-y-4",children:n.jsx(Ya,{})})]})}):n.jsx("div",{className:"p-4",children:n.jsx(la,{className:"border-amber-200 bg-amber-50",children:n.jsx(na,{className:"text-slate-700",children:"No salary configuration found. Please estimate and set the salary first."})})})}function Ua(){const{id:a}=r(),s=a||"",[t,l]=e.useState("estimate"),[i,d]=e.useState(!1),[c,m]=e.useState(null),[x,u]=e.useState(!0),p=U({api:`${z.getEmployeeSalary}?emp_id=${a}`,key:`checkExistingSalary-${a}`,value:[a],options:{enabled:!!a}});return e.useEffect(()=>{var e,a;(null==(e=p.data)?void 0:e.success)&&(null==(a=p.data)?void 0:a.data)&&(m(p.data.data),d(!0),l("view")),u(p.isLoading)},[p]),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 ",children:n.jsxs("div",{className:"space-y-6",children:[x?n.jsxs(la,{className:"border-blue-200 bg-white shadow-sm",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin text-blue-600"}),n.jsx(na,{className:"ml-2 text-slate-700",children:"Checking existing salary configuration..."})]}):i||c?n.jsx(n.Fragment,{}):n.jsx(la,{className:"border-blue-200 bg-white shadow-sm",children:n.jsx(na,{className:"text-slate-700",children:n.jsx("div",{className:"space-y-2",children:n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"font-semibold text-blue-700",children:"Salary Not Configured"})," ","- Please proceed with salary setup to manage employee compensation.",n.jsx("div",{className:"mt-4 flex justify-center",children:n.jsx(o,{to:`/hrms/dashboard/salary/${s}`,children:n.jsxs(J,{className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["Create Salary",n.jsx(He,{className:"ml-2 h-4 w-4"})]})})})]})})})})}),i||c?n.jsx(We,{className:"border-slate-200 bg-white shadow-lg",children:n.jsx(Je,{className:"p-2",children:n.jsx(Oa,{empId:s})})}):n.jsx(n.Fragment,{})]})})}const Ha=()=>{var a,s,t,l,i;const[d,o]=e.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:c}=r();e.useEffect(()=>{localStorage.setItem("employeeActiveTab",d)},[d]);const m=[{id:"basic",label:"Basic Details",icon:ae,shortLabel:"Basic"},{id:"family",label:"Family Details",icon:ie,shortLabel:"Family"},{id:"educationAndTraining",label:"Education & Training",icon:ze,shortLabel:"Education"},{id:"document",label:"Documents",icon:me,shortLabel:"Documents"},{id:"joiningInformation",label:"Joining Information",icon:ne,shortLabel:"Joining"},{id:"salary",label:"Salary Details",icon:qe,shortLabel:"Salary"},{id:"attendance",label:"Attendance",icon:ne,shortLabel:"Attendance"},{id:"serviceHistory",label:"Service History",icon:we,shortLabel:"Service History"},{id:"moduleAccess",label:"Module Access",icon:we,shortLabel:"Modules Access"}],x=U({api:`${null==(a=z)?void 0:a.getEmployeeById}?id=${c}`,key:"getEmployeeByIddsadasdasdasd",value:[c],options:{enabled:Boolean(c)}});return n.jsx(E,{title:"Employee Management",subTitle:"\r\n      View and manage employee details\r\n    ",children:n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"overflow-hidden rounded-2xl bg-white shadow-2xl",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 px-4 py-5 text-white sm:px-6 sm:py-6",children:[n.jsx("div",{className:"absolute right-0 top-0 h-48 w-48 -translate-y-1/3 translate-x-1/3 rounded-full bg-white/10 sm:h-64 sm:w-64"}),n.jsxs("div",{className:"relative z-10 flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-white/95 shadow-lg sm:h-16 sm:w-16",children:n.jsx(ae,{className:"h-6 w-6 text-indigo-500 sm:h-8 sm:w-8"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h2",{className:"truncate text-xl font-bold tracking-tight sm:text-2xl md:text-3xl",children:(null==(t=null==(s=null==x?void 0:x.data)?void 0:s.data)?void 0:t.emp_name)||"Employee Name"}),n.jsxs("p",{className:"mt-1 text-xs font-medium text-white/90 sm:text-sm",children:["ID: ",(null==(i=null==(l=null==x?void 0:x.data)?void 0:l.data)?void 0:i.emp_code)||"EMP0001"]})]})]})]}),n.jsx("div",{className:"border-b border-gray-200 bg-gradient-to-b from-gray-50 to-white px-3 py-3 sm:px-5 sm:py-4",children:n.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2",children:m.map(e=>{const a=e.icon,s=d===e.id;return n.jsxs("button",{onClick:()=>o(e.id),className:"flex min-w-[70px] items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-xs font-semibold transition-all duration-300 sm:min-w-fit sm:gap-2 sm:px-3 sm:py-2 sm:text-sm "+(s?"-translate-y-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/40":"border border-gray-200 bg-white text-gray-600 hover:-translate-y-0.5 hover:border-indigo-400 hover:bg-gray-50 hover:text-indigo-600"),children:[n.jsx(a,{className:"h-3.5 w-3.5 flex-shrink-0 sm:h-4 sm:w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:e.shortLabel})]},e.id)})})}),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:["basic"===d&&n.jsx("div",{children:n.jsx(ma,{id:c,getDataById:x})}),"family"===d&&n.jsx("div",{children:n.jsx(ja,{id:c,getDataById:x})}),"educationAndTraining"===d&&n.jsx("div",{children:n.jsx(Aa,{getDataById:x,id:c})}),"document"===d&&n.jsx("div",{children:n.jsx(pa,{id:c,getDataById:x})}),"joiningInformation"===d&&n.jsx("div",{children:n.jsx(Ba,{})}),"salary"===d&&n.jsx("div",{children:n.jsx(Ua,{})}),"attendance"===d&&n.jsx("div",{children:n.jsx(Sa,{id:c,getDataById:x})}),"serviceHistory"===d&&n.jsx("div",{children:n.jsx(Va,{id:c,getDataById:x})}),"moduleAccess"===d&&n.jsx("div",{children:n.jsx(wa,{getDataById:x})})]})]})})})};export{Ha as default};
