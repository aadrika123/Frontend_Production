import{r as e,aA as a,j as s,aB as l,a6 as t,ao as n,ak as i,al as d}from"./vendor-RyuIgj66.js";import{C as c,c as r,a as o,d as m,b as x}from"./card-u7M7FP5y.js";import{T as u,a as h,b as p,c as j}from"./tabs-BzFjL9ks.js";import{A as v,b,a as y}from"./alert-CtVSl8Dx.js";import{B as f}from"./badge-DbWnzWn2.js";import{j as g,d as N,e as _,h as w,B as S,f as A,T as k,k as P,l as C,m as T,A as D,C as F}from"./index-ey2GEmQz.js";import{c as R,b as E,a as I}from"./yup-CH6wvET8.js";import{F as M}from"./datetime-picker-dN6E5dqy.js";import{R as O}from"./RHFTextField-BSZ_cEI3.js";import{R as B}from"./RHFSelectField-oISAIiMK.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{r as q,s as L,q as G,D as H,c as $,e as V,f as Y,h as W,i as J,P as z}from"./index-DFF4_m_G.js";import{S as Z}from"./separator-BQijJEjG.js";import{b as U,u as X}from"./useCustomQuery-DTB6aAiD.js";import{aB as Q,F as K,ao as ee,B as ae,aj as se,y as le,q as te,a8 as ne,a4 as ie,aF as de,ax as ce,N as re,aG as oe,A as me,a5 as xe,ai as ue,E as he,aH as pe,v as je,aI as ve,a9 as be,ac as ye,G as fe,L as ge,s as Ne,Y as _e,S as we,ad as Se}from"./icons-CxCh8mm_.js";import{c as Ae}from"./query-BH9sOW2X.js";import{B as ke}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import{R as Pe}from"./SelectField-CQPezaQs.js";import{D as Ce}from"./index-B2ia16z0.js";import"./ui-B3c1eQmf.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";import"./Spinner-BwGzvoRj.js";const Te={permanent:{salaryMode:"monthly",tdsType:"slab",flatTdsRate:0,pfApplicable:!0,esiApplicable:!0,ptApplicable:!0},contractual:{salaryMode:"contractual",tdsType:"flat",flatTdsRate:10,pfApplicable:!1,esiApplicable:!1,ptApplicable:!0},daily_wage:{salaryMode:"daily",tdsType:"flat",flatTdsRate:1,pfApplicable:!1,esiApplicable:!1,ptApplicable:!1},consultant:{salaryMode:"contractual",tdsType:"flat",flatTdsRate:10,pfApplicable:!1,esiApplicable:!1,ptApplicable:!1}},De={monthly:{type:"slab",description:"Income tax calculated as per tax slabs (Old/New Regime)"},contractual:{type:"threshold",rate:10,annualThreshold:5e4,description:"TDS @10% applicable if annual payment exceeds ₹50,000 (Section 194J)"},daily:{type:"threshold",rate:1,singlePaymentThreshold:3e4,annualAggregateThreshold:1e5,description:"TDS @1% if single payment >₹30,000 OR annual total >₹1,00,000 (Section 194C)"}},Fe=R({emp_id:I().optional(),pay_commission_id:I().when("salary_mode",{is:e=>"daily"===e||"contractual"===e,then:e=>e.nullable().optional(),otherwise:e=>e.required("Pay Commission is required")}),pay_commission_name:I().optional(),is_matrix_based:E().optional(),commission_type:I().optional(),pay_level_id:I().when(["commission_type","salary_mode"],{is:(e,a)=>"custom"===e||"daily"===a||"contractual"===a,then:e=>e.nullable().optional(),otherwise:e=>e.required("Pay Level is required for standard commissions")}),basic_pay:I().when(["commission_type","salary_mode"],{is:(e,a)=>"custom"===e&&"monthly"===a,then:e=>e.required("Basic Pay is required for custom commission"),otherwise:e=>e.optional()}),cell_index:I().when(["is_matrix_based","commission_type","salary_mode"],{is:(e,a,s)=>e&&"custom"!==a&&"monthly"===s,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:I().when(["is_matrix_based","commission_type","salary_mode"],{is:(e,a,s)=>!e&&"custom"!==a&&"monthly"===s,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),city_classification:I().when("salary_mode",{is:"monthly",then:e=>e.required("City Classification is required"),otherwise:e=>e.nullable().optional()}),da_percentage:I().nullable().optional(),hra_percentage:I().nullable().optional(),transport_allowance:I().default("0"),medical_allowance:I().default("0"),special_allowance:I().default("0"),children_education_allowance:I().default("0"),hostel_allowance:I().default("0"),leave_travel_allowance:I().default("0"),washing_allowance:I().default("0"),conveyance_allowance:I().default("0"),dress_allowance:I().default("0"),non_practicing_allowance:I().default("0"),risk_allowance:I().default("0"),hardship_allowance:I().default("0"),deputation_allowance:I().default("0"),hill_area_allowance:I().default("0"),project_allowance:I().default("0"),other_allowance:I().default("0"),other_allowance_description:I().nullable().optional(),pension_scheme:I().default("EPF"),nps_contribution_rate:I().nullable().optional(),gpf_contribution_rate:I().nullable().optional(),pf_employee_contribution_rate:I().nullable().optional(),bank_name:I().nullable().optional(),bank_account_no:I().nullable().optional(),bank_ifsc:I().nullable().optional(),tax_regime:I().oneOf(["old","new"],"Tax Regime must be either old or new").default("new"),effective_from:I().required("Effective Date is required"),salary_mode:I().oneOf(["monthly","daily","contractual"]).default("monthly"),daily_rate:I().when("salary_mode",{is:"daily",then:e=>e.required("Daily Rate is required for daily wage employees"),otherwise:e=>e.nullable().optional()}),expected_working_days:I().default("26"),contract_amount:I().when("salary_mode",{is:"contractual",then:e=>e.required("Contract Amount is required for contractual employees"),otherwise:e=>e.nullable().optional()}),flat_tds_rate:I().nullable().optional(),pf_applicable:E().default(!0),esi_applicable:E().default(!0),pt_applicable:E().default(!0)});function Re({empId:t,employeeData:n,onEstimateComplete:i}){var d,u,h,p,j,D,F,R,E,I,z,X,ve,be,ye,fe,ge,Ne,_e,we,Se,Ae,ke,Pe,Ce,Re,Ee,Ie,Me,Oe,Be,qe,Le,Ge,He,$e,Ve,Ye,We,Je,ze,Ze,Ue,Xe,Qe,Ke,ea,aa,sa,la,ta,na,ia,da,ca,ra,oa,ma,xa,ua,ha,pa,ja,va,ba,ya,fa,ga,Na,_a,wa,Sa,Aa,ka,Pa,Ca,Ta,Da,Fa,Ra,Ea,Ia,Ma,Oa,Ba,qa,La,Ga,Ha,$a,Va,Ya,Wa,Ja,za,Za,Ua,Xa,Qa,Ka,es,as,ss,ls,ts,ns,is,ds,cs,rs,os,ms,xs,us,hs,ps,js,vs;const[bs,ys]=e.useState(!1),[fs,gs]=e.useState(null),[Ns,_s]=e.useState(!1),ws=e.useMemo(()=>{if(!(null==n?void 0:n.emp_type))return"Unknown Employee Type";return{permanent:"Permanent",contractual:"Contractual",daily_wage:"Daily Wage",consultant:"Consultant"}[n.emp_type]||n.emp_type},[null==n?void 0:n.emp_type]),Ss=U({api:`${g.getEmpTypeSalaryMapping}?emp_type=${(null==n?void 0:n.emp_type)||""}`,key:`getEmpTypeSalaryMapping-${null==n?void 0:n.emp_type}`,value:[null==n?void 0:n.emp_type],options:{enabled:Boolean(null==n?void 0:n.emp_type)}}),As=e.useMemo(()=>{var e;const a=null==(e=Ss.data)?void 0:e.data;if(a&&a.salary_mode)return{salaryMode:a.salary_mode,tdsType:a.default_tds_type||"slab",flatTdsRate:a.default_flat_tds_rate||0,pfApplicable:a.default_pf_applicable??!0,esiApplicable:a.default_esi_applicable??!0,ptApplicable:a.default_pt_applicable??!0,isLoaded:!0};const s=null==n?void 0:n.emp_type;if(s&&Te[s]){const e=Te[s];return{salaryMode:e.salaryMode,tdsType:e.tdsType,flatTdsRate:e.flatTdsRate,pfApplicable:e.pfApplicable,esiApplicable:e.esiApplicable,ptApplicable:e.ptApplicable,isLoaded:!0}}return{salaryMode:"monthly",tdsType:"slab",flatTdsRate:10,pfApplicable:!0,esiApplicable:!0,ptApplicable:!0,isLoaded:!1}},[Ss.data,null==n?void 0:n.emp_type]),ks=a({resolver:l(Fe),defaultValues:{emp_id:N(String(t)),grade_pay:"0",basic_pay:"",commission_type:"",da_percentage:"",hra_percentage:"",city_classification:"Y",transport_allowance:"3600",medical_allowance:"500",special_allowance:"0",children_education_allowance:"0",hostel_allowance:"0",leave_travel_allowance:"0",washing_allowance:"0",conveyance_allowance:"0",dress_allowance:"0",non_practicing_allowance:"0",risk_allowance:"0",hardship_allowance:"0",deputation_allowance:"0",hill_area_allowance:"0",project_allowance:"0",other_allowance:"0",other_allowance_description:"",tax_regime:"new",pension_scheme:"EPF",nps_contribution_rate:"10",pf_employee_contribution_rate:"12",salary_mode:"monthly",daily_rate:"",expected_working_days:"26",contract_amount:"",flat_tds_rate:"10",pf_applicable:!0,esi_applicable:!0,pt_applicable:!0}}),{watch:Ps}=ks;e.useEffect(()=>{As.isLoaded&&(ks.setValue("salary_mode",As.salaryMode),ks.setValue("flat_tds_rate",String(As.flatTdsRate||0)),ks.setValue("pf_applicable",As.pfApplicable),ks.setValue("esi_applicable",As.esiApplicable),ks.setValue("pt_applicable",As.ptApplicable))},[As,ks]);const{data:Cs}=q(),{data:Ts}=L(_(Ps("pay_commission_id")||"")),{data:Ds}=G(_(Ps("pay_level_id")||"")),Fs=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);e.useEffect(()=>{var e;if(Ps("pay_commission_id")){const a=null==(e=null==Cs?void 0:Cs.data)?void 0:e.find(e=>e.id===Number(Ps("pay_commission_id")));a&&(ks.setValue("is_matrix_based",a.is_matrix_based),ks.setValue("commission_type",a.commission_type))}},[Ps("pay_commission_id")]);const Rs=Ps("pay_commission_id"),Es=Ps("city_classification"),Is=Ps("is_matrix_based"),Ms=U({api:w.getSalaryDefaults+(()=>{let e="?";return Es&&(e+=`city_classification=${Es}&`),void 0!==Is&&(e+=`is_matrix_based=${Is?"true":"false"}&`),e.slice(0,-1)})(),value:[Rs,Es,Is],options:{enabled:Boolean(Es)&&void 0!==Is}});e.useEffect(()=>{var e,a,s,l,t;(null==Ms?void 0:Ms.data)&&(null==(e=null==Ms?void 0:Ms.data)?void 0:e.success)&&(ks.setValue("da_percentage",String((null==(s=null==(a=null==Ms?void 0:Ms.data)?void 0:a.data)?void 0:s.da_percentage)||"")),ks.setValue("hra_percentage",String((null==(t=null==(l=null==Ms?void 0:Ms.data)?void 0:l.data)?void 0:t.hra_percentage)||"")))},[null==Ms?void 0:Ms.data]),e.useEffect(()=>{var e;if(Ps("pay_level_id")){const a=null==(e=null==Ts?void 0:Ts.data)?void 0:e.find(e=>e.id===Number(Ps("pay_level_id")));a&&ks.setValue("grade_pay",String(a.grade_pay))}},[Ps("pay_level_id")]);const Os=({content:e})=>s.jsx(k,{children:s.jsxs(P,{children:[s.jsx(C,{asChild:!0,children:s.jsx(ee,{className:"ml-1 inline h-3.5 w-3.5 cursor-help text-slate-400 hover:text-slate-600"})}),s.jsx(T,{className:"max-w-xs",children:s.jsx("p",{className:"text-sm",children:e})})]})});return s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-600",children:s.jsx(Q,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Salary Configuration"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Configure employee salary structure and calculate compensation"})]})]})}),s.jsxs(v,{className:"border-l-4 border-l-blue-600 bg-slate-50",children:[s.jsx(K,{className:"h-4 w-4 text-blue-600"}),s.jsx(b,{className:"text-sm font-semibold text-slate-900",children:"Getting Started"}),s.jsxs(y,{className:"text-sm text-slate-600",children:["Fill in the form below to configure salary. Hover over"," ",s.jsx(ee,{className:"inline h-3.5 w-3.5"})," icons for help."]})]}),s.jsx(c,{className:"border-slate-200 shadow-sm",children:s.jsx(r,{className:"p-6",children:s.jsxs(M,{methods:ks,onSubmit:ks.handleSubmit(async e=>{var a,s;ys(!0);try{const a="monthly"===e.salary_mode||!e.salary_mode,s={emp_id:Number(e.emp_id),salary_mode:e.salary_mode||"monthly",effective_from:e.effective_from,...e.bank_name&&{bank_name:e.bank_name},...e.bank_account_no&&{bank_account_no:e.bank_account_no},...e.bank_ifsc&&{bank_ifsc:e.bank_ifsc},pf_applicable:e.pf_applicable??!0,esi_applicable:e.esi_applicable??!0,pt_applicable:e.pt_applicable??!0};a?Object.assign(s,{pay_commission_id:Number(e.pay_commission_id),...e.pay_level_id&&{pay_level_id:Number(e.pay_level_id)},..."custom"===e.commission_type&&{basic_pay:Number(e.basic_pay)},...e.is_matrix_based&&"custom"!==e.commission_type&&{cell_index:Number(e.cell_index)},...!e.is_matrix_based&&"custom"!==e.commission_type&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,...e.da_percentage&&""!==e.da_percentage.trim()&&{da_percentage:Number(e.da_percentage)},...e.hra_percentage&&""!==e.hra_percentage.trim()&&{hra_percentage:Number(e.hra_percentage)},transport_allowance:Number(e.transport_allowance)||0,medical_allowance:Number(e.medical_allowance)||0,special_allowance:Number(e.special_allowance)||0,children_education_allowance:Number(e.children_education_allowance)||0,hostel_allowance:Number(e.hostel_allowance)||0,leave_travel_allowance:Number(e.leave_travel_allowance)||0,washing_allowance:Number(e.washing_allowance)||0,conveyance_allowance:Number(e.conveyance_allowance)||0,dress_allowance:Number(e.dress_allowance)||0,non_practicing_allowance:Number(e.non_practicing_allowance)||0,risk_allowance:Number(e.risk_allowance)||0,hardship_allowance:Number(e.hardship_allowance)||0,deputation_allowance:Number(e.deputation_allowance)||0,hill_area_allowance:Number(e.hill_area_allowance)||0,project_allowance:Number(e.project_allowance)||0,other_allowance:Number(e.other_allowance)||0,...e.other_allowance_description&&{other_allowance_description:e.other_allowance_description},pension_scheme:"EPF",pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)||12,tax_regime:e.tax_regime||"new"}):"daily"===e.salary_mode?Object.assign(s,{daily_rate:Number(e.daily_rate)||0,expected_working_days:Number(e.expected_working_days)||26,flat_tds_rate:Number(e.flat_tds_rate)||10}):"contractual"===e.salary_mode&&Object.assign(s,{contract_amount:Number(e.contract_amount)||0,flat_tds_rate:Number(e.flat_tds_rate)||10});const l=await A.post(w.estimateSalary,s);l.data.success&&(gs(l.data),null==i||i(l.data,e))}catch(l){alert((null==(s=null==(a=null==l?void 0:l.response)?void 0:a.data)?void 0:s.message)||"Failed to estimate salary")}finally{ys(!1)}}),children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(ae,{className:"h-5 w-5 text-purple-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Employment Type"}),s.jsxs(f,{variant:"secondary",className:"ml-2",children:[s.jsx(se,{className:"mr-1 h-3 w-3"}),"Auto-configured"]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:[s.jsx(le,{className:"mr-1.5 h-4 w-4 text-slate-500"}),"Employee Type"]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2",children:[s.jsx("span",{className:"font-medium text-slate-900",children:ws}),s.jsx(se,{className:"ml-auto h-4 w-4 text-slate-400"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:[s.jsx(ae,{className:"mr-1.5 h-4 w-4 text-slate-500"}),"Salary Mode",s.jsx(Os,{content:"Salary mode is automatically determined based on the employee type configuration."})]}),s.jsx("div",{className:"flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2",children:Ss.isLoading?s.jsx(te,{className:"h-4 w-4 animate-spin text-slate-400"}):s.jsxs(s.Fragment,{children:["monthly"===As.salaryMode&&s.jsxs(f,{className:"bg-blue-100 text-blue-800",children:[s.jsx(ne,{className:"mr-1 h-3 w-3"}),"Monthly (Permanent)"]}),"daily"===As.salaryMode&&s.jsxs(f,{className:"bg-orange-100 text-orange-800",children:[s.jsx(ie,{className:"mr-1 h-3 w-3"}),"Daily Wage"]}),"contractual"===As.salaryMode&&s.jsxs(f,{className:"bg-green-100 text-green-800",children:[s.jsx(de,{className:"mr-1 h-3 w-3"}),"Contractual"]}),s.jsx(se,{className:"ml-auto h-4 w-4 text-slate-400"})]})})]})]}),s.jsxs(v,{className:"monthly"===As.salaryMode?"border-blue-200 bg-blue-50":"contractual"===As.salaryMode?"border-green-200 bg-green-50":"border-orange-200 bg-orange-50",children:[s.jsx(ee,{className:"h-4 w-4 "+("monthly"===As.salaryMode?"text-blue-600":"contractual"===As.salaryMode?"text-green-600":"text-orange-600")}),s.jsx(b,{className:"monthly"===As.salaryMode?"text-blue-800":"contractual"===As.salaryMode?"text-green-800":"text-orange-800",children:"TDS Calculation Rule"}),s.jsx(y,{className:"monthly"===As.salaryMode?"text-blue-700":"contractual"===As.salaryMode?"text-green-700":"text-orange-700",children:De[As.salaryMode].description})]}),s.jsxs("div",{className:"space-y-4",children:["daily"===ks.watch("salary_mode")&&s.jsxs("div",{className:"rounded-lg border-2 border-orange-300 bg-white p-4 shadow-sm",children:[s.jsxs("h4",{className:"mb-4 flex items-center gap-2 border-b border-orange-200 pb-2 text-sm font-semibold text-orange-700",children:[s.jsx(ce,{className:"h-4 w-4"}),"Daily Wage Details"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Daily Rate (₹)"," ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"The daily wage amount paid to the employee per working day."})]}),s.jsx(O,{name:"daily_rate",label:"",type:"number",placeholder:"Enter daily rate"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Expected Working Days",s.jsx(Os,{content:"Expected number of working days per month for salary estimation. Default is 26 days."})]}),s.jsx(O,{name:"expected_working_days",label:"",type:"number",placeholder:"26"})]})]})]}),"contractual"===ks.watch("salary_mode")&&s.jsxs("div",{className:"rounded-lg border-2 border-green-300 bg-white p-4 shadow-sm",children:[s.jsxs("h4",{className:"mb-4 flex items-center gap-2 border-b border-green-200 pb-2 text-sm font-semibold text-green-700",children:[s.jsx(re,{className:"h-4 w-4"}),"Contract Details"]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Contract Amount (₹/month)"," ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"The fixed monthly contract amount to be paid to the employee."})]}),s.jsx(O,{name:"contract_amount",label:"",type:"number",placeholder:"Enter contract amount"})]})})]}),("daily"===ks.watch("salary_mode")||"contractual"===ks.watch("salary_mode"))&&s.jsxs("div",{className:"space-y-4 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[s.jsxs("h4",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[s.jsx(re,{className:"h-4 w-4"}),"Tax & Statutory Deductions",s.jsxs(f,{variant:"secondary",className:"ml-2",children:[s.jsx(se,{className:"mr-1 h-3 w-3"}),"Configured"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["TDS Rate (%)",s.jsx(Os,{content:"contractual"===ks.watch("salary_mode")?"TDS @10% applicable only if annual payment exceeds ₹50,000 as per Section 194J (Budget 2025)":"TDS @1% applicable only if single payment >₹30,000 OR annual total >₹1,00,000 as per Section 194C"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-slate-300 bg-white px-3 py-2",children:[s.jsx("span",{className:"font-medium text-slate-900",children:"contractual"===ks.watch("salary_mode")?"10% (if annual > ₹50,000)":"1% (if thresholds exceeded)"}),s.jsx(se,{className:"ml-auto h-4 w-4 text-slate-400"})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"contractual"===ks.watch("salary_mode")?"Section 194J - TDS applicable if annual payment > ₹50,000":"Section 194C - TDS applicable if single > ₹30,000 OR annual > ₹1,00,000"})]})}),s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Statutory Deductions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-md px-3 py-2 "+(As.pfApplicable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[s.jsx("span",{className:"font-medium",children:"PF"}),s.jsx(f,{variant:As.pfApplicable?"default":"destructive",children:As.pfApplicable?"Applicable":"Not Applicable"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-md px-3 py-2 "+(As.esiApplicable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[s.jsx("span",{className:"font-medium",children:"ESI"}),s.jsx(f,{variant:As.esiApplicable?"default":"destructive",children:As.esiApplicable?"Applicable":"Not Applicable"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-md px-3 py-2 "+(As.ptApplicable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[s.jsx("span",{className:"font-medium",children:"PT"}),s.jsx(f,{variant:As.ptApplicable?"default":"destructive",children:As.ptApplicable?"Applicable":"Not Applicable"})]})]}),s.jsx("p",{className:"text-xs text-slate-500",children:"Statutory deduction applicability is configured based on employee type mapping"})]}),s.jsxs(v,{className:"border-amber-200 bg-amber-50",children:[s.jsx(K,{className:"h-4 w-4 text-amber-600"}),s.jsx(y,{className:"text-xs text-amber-800",children:"contractual"===ks.watch("salary_mode")?s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"Contractual Employees (Section 194J):"}),s.jsxs("ul",{className:"mt-1 list-inside list-disc",children:[s.jsx("li",{children:"No TDS if annual payment ≤ ₹50,000"}),s.jsx("li",{children:"10% TDS applicable if annual payment exceeds ₹50,000"}),s.jsx("li",{children:"20% TDS if PAN not provided"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:"Daily Wage Workers (Section 194C):"}),s.jsxs("ul",{className:"mt-1 list-inside list-disc",children:[s.jsx("li",{children:"No TDS if single payment ≤ ₹30,000 AND annual total ≤ ₹1,00,000"}),s.jsx("li",{children:"1% TDS applicable if either threshold is exceeded"}),s.jsx("li",{children:"20% TDS if PAN not provided"})]})]})})]})]})]})]}),"monthly"===ks.watch("salary_mode")&&s.jsxs(s.Fragment,{children:[s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(ne,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Pay Structure"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pay Commission ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"The pay commission determines the salary structure and rules applicable to the employee"})]}),s.jsx(B,{selectedText:"pay_commission_name",name:"pay_commission_id",label:"",data:(null==(d=null==Cs?void 0:Cs.data)?void 0:d.map(e=>({label:String(e.commission_name),value:String(e.id)})))||[]})]}),"custom"!==ks.watch("commission_type")&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pay Level ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"Pay level defines the grade and salary range. Select pay commission first."})]}),s.jsx(B,{name:"pay_level_id",label:"",data:(null==(u=null==Ts?void 0:Ts.data)?void 0:u.map(e=>({label:`${e.level_name} (₹${e.min_basic_pay} - ₹${e.max_basic_pay})`,value:String(e.id)})))||[],disabled:!ks.watch("pay_commission_id")})]}),ks.watch("is_matrix_based")&&"custom"!==ks.watch("commission_type")&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Cell Index ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"Cell index determines the exact basic pay within the pay level. Select pay level first."})]}),s.jsx(B,{name:"cell_index",label:"",data:(null==(h=null==Ds?void 0:Ds.data)?void 0:h.map(e=>({label:`Index ${e.cell_index} - ₹${e.basic_pay}`,value:String(e.cell_index)})))||[],disabled:!ks.watch("pay_level_id")})]}),"custom"===ks.watch("commission_type")&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Basic Pay ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"Enter the direct basic pay amount for custom pay commission."})]}),s.jsx(O,{name:"basic_pay",label:"",type:"number",placeholder:"Enter basic pay"})]}),!ks.watch("is_matrix_based")&&"custom"!==ks.watch("commission_type")&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Grade Pay",s.jsx(Os,{content:"Additional grade pay amount, if applicable (usually for 6th Pay Commission)"})]}),s.jsx(O,{name:"grade_pay",label:"",type:"number",placeholder:"0"})]})]})]})]}),"monthly"===ks.watch("salary_mode")&&s.jsxs(s.Fragment,{children:[s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(ce,{className:"h-5 w-5 text-emerald-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Allowances"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["City Classification"," ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"HRA is calculated based on city classification: Metro (24%), Other Cities (16%), Rural (8%)"})]}),s.jsx(B,{name:"city_classification",label:"",data:[{label:"X - Metro (24% HRA)",value:"X"},{label:"Y - Other Cities (16% HRA)",value:"Y"},{label:"Z - Rural (8% HRA)",value:"Z"}]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["DA Percentage (%)","custom"===ks.watch("commission_type")&&s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"custom"===ks.watch("commission_type")?"Enter Dearness Allowance percentage for custom pay commission.":"Pre-filled from DA revisions. You can modify if needed."})]}),s.jsx(O,{name:"da_percentage",label:"",type:"number",placeholder:"Auto-calculated"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["HRA Percentage (%)",s.jsx(Os,{content:"Pre-filled based on city classification. You can modify if needed."})]}),s.jsx(O,{name:"hra_percentage",label:"",type:"number",placeholder:"Auto-calculated"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Transport Allowance",s.jsx(Os,{content:"Monthly transport allowance amount. Standard is ₹3,600"})]}),s.jsx(O,{name:"transport_allowance",label:"",type:"number",placeholder:"3600"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Medical Allowance",s.jsx(Os,{content:"Monthly medical allowance amount. Standard is ₹500"})]}),s.jsx(O,{name:"medical_allowance",label:"",type:"number",placeholder:"500"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Special Allowance",s.jsx(Os,{content:"Any additional special allowance if applicable"})]}),s.jsx(O,{name:"special_allowance",label:"",type:"number",placeholder:"0"})]})]}),s.jsxs("details",{className:"group rounded-lg border border-slate-200 bg-slate-50 p-4",children:[s.jsxs("summary",{className:"flex cursor-pointer items-center justify-between text-sm font-medium text-slate-700",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ne,{className:"h-4 w-4 text-slate-500"}),"Additional Government Allowances (Optional)"]}),s.jsx("span",{className:"text-xs text-slate-400 group-open:hidden",children:"Click to expand"})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Children Education Allowance"}),s.jsx(O,{name:"children_education_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Hostel Allowance"}),s.jsx(O,{name:"hostel_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Leave Travel Allowance"}),s.jsx(O,{name:"leave_travel_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Washing Allowance"}),s.jsx(O,{name:"washing_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Conveyance Allowance"}),s.jsx(O,{name:"conveyance_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Dress Allowance"}),s.jsx(O,{name:"dress_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Non-Practicing Allowance"}),s.jsx(O,{name:"non_practicing_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Risk Allowance"}),s.jsx(O,{name:"risk_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Hardship Allowance"}),s.jsx(O,{name:"hardship_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Deputation Allowance"}),s.jsx(O,{name:"deputation_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Hill Area Allowance"}),s.jsx(O,{name:"hill_area_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Project Allowance"}),s.jsx(O,{name:"project_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Other Allowance"}),s.jsx(O,{name:"other_allowance",label:"",type:"number",placeholder:"0"})]}),s.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Other Allowance Description"}),s.jsx(O,{name:"other_allowance_description",label:"",placeholder:"Describe the other allowance (if any)"})]})]})]})]})]}),"monthly"===ks.watch("salary_mode")&&s.jsxs(s.Fragment,{children:[s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(oe,{className:"h-5 w-5 text-amber-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Retirement & Tax"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pension Scheme",s.jsx(Os,{content:"Employee Provident Fund (EPF) pension scheme"})]}),s.jsx(B,{name:"pension_scheme",label:"",disabled:!0,data:[{label:"EPF",value:"EPF"}]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["PF Employee Contribution Rate (%)",s.jsx(Os,{content:"Percentage of basic pay + DA contributed to PF (typically 12%)"})]}),s.jsx(O,{name:"pf_employee_contribution_rate",label:"",type:"number",placeholder:"12"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Tax Regime ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"Choose between New Tax Regime (lower rates, fewer deductions) or Old Tax Regime (higher rates, more deductions)"})]}),s.jsx(B,{name:"tax_regime",label:"",data:[{label:"New Tax Regime",value:"new"},{label:"Old Tax Regime",value:"old"}]})]})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(me,{className:"h-5 w-5 text-purple-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Bank Details"}),s.jsx("span",{className:"text-xs text-slate-500",children:"(Optional)"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Bank Name",s.jsx(Os,{content:"Name of the bank where the employee holds their salary account"})]}),s.jsx(O,{name:"bank_name",label:"",placeholder:"e.g., State Bank of India"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Account Number",s.jsx(Os,{content:"Employee bank account number for salary credit"})]}),s.jsx(O,{name:"bank_account_no",label:"",placeholder:"Account number"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["IFSC Code",s.jsx(Os,{content:"11-character IFSC code of the bank branch (e.g., SBIN0001234)"})]}),s.jsx(O,{name:"bank_ifsc",label:"",placeholder:"e.g., SBIN0001234"})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[s.jsx(xe,{className:"h-5 w-5 text-indigo-600"}),s.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Effective Date"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Effective From ",s.jsx("span",{className:"text-red-500",children:"*"}),s.jsx(Os,{content:"The date from which this salary configuration will be applicable"})]}),s.jsx(O,{name:"effective_from",label:"",type:"date"})]})})]})]}),s.jsx(Z,{className:"my-8"}),s.jsx("div",{className:"flex justify-end",children:s.jsx(S,{type:"submit",disabled:bs,size:"lg",className:"min-w-[200px] bg-blue-600 hover:bg-blue-700",children:bs?s.jsxs(s.Fragment,{children:[s.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Q,{className:"mr-2 h-4 w-4"}),"Calculate Salary"]})})})]})})}),fs&&s.jsxs(c,{className:"border-slate-200 shadow-sm",children:[s.jsx(o,{className:"border-b border-slate-100 bg-slate-50 pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100",children:s.jsx(ue,{className:"h-5 w-5 text-emerald-700"})}),s.jsxs("div",{children:[s.jsx(m,{className:"text-lg font-semibold text-slate-900",children:"Salary Calculated"}),s.jsx(x,{className:"text-sm",children:"Review the breakdown and confirm"})]})]}),s.jsxs(S,{onClick:()=>_s(!0),variant:"outline",size:"sm",className:"text-sm",children:[s.jsx(he,{className:"mr-2 h-4 w-4"}),"View Details"]})]})}),s.jsxs(r,{className:"p-6",children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Monthly Net"}),s.jsx("p",{className:"mt-1 text-xl font-bold text-emerald-700",children:Fs((null==(j=null==(p=fs.data)?void 0:p.monthly)?void 0:j.net_salary)||0)})]}),s.jsx(pe,{className:"h-8 w-8 text-emerald-200"})]})}),s.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Annual Net"}),s.jsx("p",{className:"mt-1 text-xl font-bold text-blue-700",children:Fs((null==(F=null==(D=fs.data)?void 0:D.annual)?void 0:F.net_salary)||0)})]}),s.jsx(je,{className:"h-8 w-8 text-blue-200"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Monthly Breakdown"}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(I=null==(E=null==(R=fs.data)?void 0:R.monthly)?void 0:E.earnings)?void 0:I.basic_pay)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ve=null==(X=null==(z=fs.data)?void 0:z.monthly)?void 0:X.earnings)?void 0:ve.dearness_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"HRA"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(fe=null==(ye=null==(be=fs.data)?void 0:be.monthly)?void 0:ye.earnings)?void 0:fe.house_rent_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transport"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(_e=null==(Ne=null==(ge=fs.data)?void 0:ge.monthly)?void 0:Ne.earnings)?void 0:_e.transport_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Medical"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(Ae=null==(Se=null==(we=fs.data)?void 0:we.monthly)?void 0:Se.earnings)?void 0:Ae.medical_allowance)||0)})]}),(null==(Ce=null==(Pe=null==(ke=fs.data)?void 0:ke.monthly)?void 0:Pe.earnings)?void 0:Ce.special_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Special"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(Ie=null==(Ee=null==(Re=fs.data)?void 0:Re.monthly)?void 0:Ee.earnings)?void 0:Ie.special_allowance)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),s.jsx("span",{className:"font-bold text-emerald-700",children:Fs((null==(Be=null==(Oe=null==(Me=fs.data)?void 0:Me.monthly)?void 0:Oe.earnings)?void 0:Be.gross_salary)||0)})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Ge=null==(Le=null==(qe=fs.data)?void 0:qe.monthly)?void 0:Le.deductions)?void 0:Ge.pf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"PF"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(Ve=null==($e=null==(He=fs.data)?void 0:He.monthly)?void 0:$e.deductions)?void 0:Ve.pf_contribution)})]}),(null==(Je=null==(We=null==(Ye=fs.data)?void 0:Ye.monthly)?void 0:We.deductions)?void 0:Je.nps_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(Ue=null==(Ze=null==(ze=fs.data)?void 0:ze.monthly)?void 0:Ze.deductions)?void 0:Ue.nps_contribution)})]}),(null==(Ke=null==(Qe=null==(Xe=fs.data)?void 0:Xe.monthly)?void 0:Qe.deductions)?void 0:Ke.gpf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"GPF"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(sa=null==(aa=null==(ea=fs.data)?void 0:ea.monthly)?void 0:aa.deductions)?void 0:sa.gpf_contribution)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(na=null==(ta=null==(la=fs.data)?void 0:la.monthly)?void 0:ta.deductions)?void 0:na.professional_tax)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Income Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ca=null==(da=null==(ia=fs.data)?void 0:ia.monthly)?void 0:da.deductions)?void 0:ca.income_tax)||0)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),s.jsx("span",{className:"font-bold text-red-700",children:Fs((null==(ma=null==(oa=null==(ra=fs.data)?void 0:ra.monthly)?void 0:oa.deductions)?void 0:ma.total_deductions)||0)})]})]})]}),s.jsx("div",{className:"rounded-lg bg-emerald-600 p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Monthly Salary"}),s.jsx("span",{className:"text-xl font-bold",children:Fs((null==(ua=null==(xa=fs.data)?void 0:xa.monthly)?void 0:ua.net_salary)||0)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Annual Breakdown"}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ja=null==(pa=null==(ha=fs.data)?void 0:ha.annual)?void 0:pa.earnings)?void 0:ja.basic_pay)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ya=null==(ba=null==(va=fs.data)?void 0:va.annual)?void 0:ba.earnings)?void 0:ya.dearness_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"HRA"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(Na=null==(ga=null==(fa=fs.data)?void 0:fa.annual)?void 0:ga.earnings)?void 0:Na.house_rent_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transport"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(Sa=null==(wa=null==(_a=fs.data)?void 0:_a.annual)?void 0:wa.earnings)?void 0:Sa.transport_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Medical"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(Pa=null==(ka=null==(Aa=fs.data)?void 0:Aa.annual)?void 0:ka.earnings)?void 0:Pa.medical_allowance)||0)})]}),(null==(Da=null==(Ta=null==(Ca=fs.data)?void 0:Ca.annual)?void 0:Ta.earnings)?void 0:Da.special_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Special"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(Ea=null==(Ra=null==(Fa=fs.data)?void 0:Fa.annual)?void 0:Ra.earnings)?void 0:Ea.special_allowance)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),s.jsx("span",{className:"font-bold text-emerald-700",children:Fs((null==(Oa=null==(Ma=null==(Ia=fs.data)?void 0:Ia.annual)?void 0:Ma.earnings)?void 0:Oa.gross_salary)||0)})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(La=null==(qa=null==(Ba=fs.data)?void 0:Ba.annual)?void 0:qa.deductions)?void 0:La.pf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"PF"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==($a=null==(Ha=null==(Ga=fs.data)?void 0:Ga.annual)?void 0:Ha.deductions)?void 0:$a.pf_contribution)})]}),(null==(Wa=null==(Ya=null==(Va=fs.data)?void 0:Va.annual)?void 0:Ya.deductions)?void 0:Wa.nps_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(Za=null==(za=null==(Ja=fs.data)?void 0:Ja.annual)?void 0:za.deductions)?void 0:Za.nps_contribution)})]}),(null==(Qa=null==(Xa=null==(Ua=fs.data)?void 0:Ua.annual)?void 0:Xa.deductions)?void 0:Qa.gpf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"GPF"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs(null==(as=null==(es=null==(Ka=fs.data)?void 0:Ka.annual)?void 0:es.deductions)?void 0:as.gpf_contribution)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ts=null==(ls=null==(ss=fs.data)?void 0:ss.annual)?void 0:ls.deductions)?void 0:ts.professional_tax)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Income Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:Fs((null==(ds=null==(is=null==(ns=fs.data)?void 0:ns.annual)?void 0:is.deductions)?void 0:ds.income_tax)||0)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),s.jsx("span",{className:"font-bold text-red-700",children:Fs((null==(os=null==(rs=null==(cs=fs.data)?void 0:cs.annual)?void 0:rs.deductions)?void 0:os.total_deductions)||0)})]})]})]}),s.jsx("div",{className:"rounded-lg bg-blue-600 p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Annual Salary"}),s.jsx("span",{className:"text-xl font-bold",children:Fs((null==(xs=null==(ms=fs.data)?void 0:ms.annual)?void 0:xs.net_salary)||0)})]})})]})]}),(null==(us=fs.data)?void 0:us.tax_info)&&s.jsxs("div",{className:"mt-6 rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Tax Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-600",children:"Tax Regime"}),s.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:"new"===fs.data.tax_info.regime?"New":"Old"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-600",children:"Taxable Income"}),s.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:Fs(fs.data.tax_info.annual_taxable_income)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-600",children:"Standard Deduction"}),s.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:Fs(fs.data.tax_info.standard_deduction)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-600",children:"Annual Tax"}),s.jsx("p",{className:"mt-1 font-semibold text-red-700",children:Fs(fs.data.tax_info.annual_tax)})]})]})]})]})]}),s.jsx(H,{open:Ns,onOpenChange:_s,children:s.jsxs($,{className:"max-h-[90vh] max-w-4xl overflow-y-auto",children:[s.jsxs(V,{children:[s.jsxs(Y,{className:"flex items-center gap-2 text-xl",children:[s.jsx(re,{className:"h-5 w-5 text-blue-600"}),"Complete Configuration Details"]}),s.jsx(W,{children:"Review all configuration parameters and calculated values"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[s.jsx(ne,{className:"h-4 w-4 text-blue-600"}),"Pay Structure"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pay Commission"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==(ps=null==(hs=null==Cs?void 0:Cs.data)?void 0:hs.find(e=>String(e.id)===ks.watch("pay_commission_id")))?void 0:ps.commission_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pay Level"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==(vs=null==(js=null==Ts?void 0:Ts.data)?void 0:js.find(e=>String(e.id)===ks.watch("pay_level_id")))?void 0:vs.level_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Cell Index"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:ks.watch("cell_index")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Grade Pay"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["₹",ks.watch("grade_pay")]})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[s.jsx(ce,{className:"h-4 w-4 text-emerald-600"}),"Allowances"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"City Classification"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[ks.watch("city_classification")," -","X"===ks.watch("city_classification")&&" Metro (24% HRA)","Y"===ks.watch("city_classification")&&" Other Cities (16% HRA)","Z"===ks.watch("city_classification")&&" Rural (8% HRA)"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"HRA Percentage"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:ks.watch("hra_percentage")||"Auto-calculated"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Transport Allowance"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["₹",ks.watch("transport_allowance")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Medical Allowance"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["₹",ks.watch("medical_allowance")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Special Allowance"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["₹",ks.watch("special_allowance")||"0"]})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[s.jsx(oe,{className:"h-4 w-4 text-amber-600"}),"Retirement & Tax"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pension Scheme"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[ks.watch("pension_scheme")," -","EPF_NPS"===ks.watch("pension_scheme")&&" EPF + National Pension System","OPS"===ks.watch("pension_scheme")&&" General Provident Fund","EPF"===ks.watch("pension_scheme")&&" Employee Provident Fund"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Contribution Rate"}),s.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[ks.watch("nps_contribution_rate")||ks.watch("gpf_contribution_rate")||"N/A","%"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Tax Regime"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:"new"===ks.watch("tax_regime")?"New Tax Regime":"Old Tax Regime"})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[s.jsx(me,{className:"h-4 w-4 text-purple-600"}),"Bank Details"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Bank Name"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:ks.watch("bank_name")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Account Number"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:ks.watch("bank_account_no")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"IFSC Code"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:ks.watch("bank_ifsc")})]})]})]}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[s.jsx(xe,{className:"h-4 w-4 text-indigo-600"}),"Effective Date"]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:[s.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Effective From"}),s.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:new Date(ks.watch("effective_from")).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),s.jsx(J,{children:s.jsx(S,{variant:"outline",onClick:()=>_s(!1),children:"Close"})})]})})]})}function Ee({estimatedData:a,formData:l,onSetComplete:t}){var n,i,d,u,h,p,j,b,g,N,_,k,P,C,T,D,F,R,E,I,M,O,B,q,L,G,H,$,V,Y,W,J,z,Z,U,X,Q,K,ee,ae,se,le,ne,ie,de,ce,re,oe,me,xe,he,pe,je,ye,fe,ge,Ne,_e,we,Se,Ae,ke,Pe,Ce,Te,De,Fe,Re,Ee,Ie,Me,Oe,Be,qe,Le,Ge,He,$e,Ve,Ye,We,Je,ze,Ze,Ue,Xe,Qe,Ke,ea,aa,sa,la,ta,na,ia,da,ca,ra,oa,ma,xa,ua,ha,pa,ja,va,ba,ya,fa,ga,Na,_a,wa,Sa,Aa,ka,Pa,Ca,Ta,Da,Fa,Ra,Ea,Ia,Ma,Oa,Ba,qa,La,Ga,Ha,$a,Va,Ya,Wa,Ja,za,Za,Ua,Xa,Qa,Ka,es,as,ss,ls,ts,ns,is,ds,cs,rs,os,ms,xs,us,hs,ps,js,vs,bs,ys,fs,gs,Ns,_s,ws,Ss,As,ks,Ps,Cs,Ts,Ds,Fs,Rs,Es,Is,Ms,Os,Bs,qs,Ls,Gs,Hs,$s,Vs,Ys,Ws,Js,zs,Zs,Us,Xs,Qs,Ks,el,al,sl,ll,tl,nl,il,dl,cl,rl,ol,ml,xl,ul,hl,pl,jl,vl,bl,yl,fl,gl,Nl,_l,wl;const[Sl,Al]=e.useState(!1),[kl,Pl]=e.useState(!1),Cl=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return a?s.jsxs(c,{className:"border-t-4 border-t-green-500 shadow-lg",children:[s.jsxs(o,{className:"bg-gradient-to-r from-green-50 to-white",children:[s.jsx(m,{className:"flex items-center gap-2 text-xl",children:kl?s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"h-6 w-6 text-green-600"}),"Salary Configuration Set Successfully"]}):s.jsxs(s.Fragment,{children:[s.jsx(ve,{className:"h-6 w-6 text-blue-600"}),"Confirm Salary Configuration"]})}),s.jsx(x,{className:"mt-2 text-base",children:kl?"The salary configuration has been successfully saved to the system.":"Please review the estimated salary carefully before confirming the configuration."})]}),s.jsx(r,{className:"space-y-6 pt-6",children:kl?s.jsxs(v,{className:"border-green-200 bg-green-50",children:[s.jsx(ue,{className:"h-4 w-4 text-green-600"}),s.jsxs(y,{className:"text-green-800",children:[s.jsx("strong",{children:"Success!"})," The salary configuration has been set successfully. You can now view the complete salary details or make updates if needed."]})]}):s.jsxs(s.Fragment,{children:[s.jsx(v,{className:"border-yellow-300 bg-yellow-50 p-4",children:s.jsxs(y,{className:"text-yellow-900",children:[s.jsx("strong",{className:"text-lg",children:"⚠️ Important Notice:"}),s.jsx("p",{className:"mt-2",children:"Once you confirm and set the salary, it will be saved to the system and will be used for payroll processing. Please review all details carefully before confirming."})]})}),s.jsxs("div",{className:"space-y-4 rounded-lg border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[s.jsx(be,{className:"h-5 w-5"}),"Salary Summary"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[s.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Monthly Net Salary (In Hand)"}),s.jsx("span",{className:"text-2xl font-bold text-green-600",children:Cl((null==(i=null==(n=null==a?void 0:a.data)?void 0:n.monthly)?void 0:i.net_salary)||0)})]}),s.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[s.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Annual Net Salary (In Hand)"}),s.jsx("span",{className:"text-2xl font-bold text-green-600",children:Cl((null==(u=null==(d=null==a?void 0:a.data)?void 0:d.annual)?void 0:u.net_salary)||0)})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border-2 border-green-200 bg-white p-5 shadow-sm",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 border-b border-green-200 pb-2 text-lg font-bold text-green-700",children:[s.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-green-100 text-sm",children:"+"}),"Monthly Earnings"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(j=null==(p=null==(h=null==a?void 0:a.data)?void 0:h.monthly)?void 0:p.earnings)?void 0:j.basic_pay)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium",children:Cl(null==(g=null==(b=null==a?void 0:a.data)?void 0:b.monthly)?void 0:g.earnings.basic_pay)})]}),(null==(k=null==(_=null==(N=null==a?void 0:a.data)?void 0:N.monthly)?void 0:_.earnings)?void 0:k.grade_pay)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Grade Pay"}),s.jsx("span",{className:"font-medium",children:Cl(null==(C=null==(P=null==a?void 0:a.data)?void 0:P.monthly)?void 0:C.earnings.grade_pay)})]}),(null==(F=null==(D=null==(T=null==a?void 0:a.data)?void 0:T.monthly)?void 0:D.earnings)?void 0:F.dearness_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:["Dearness Allowance (DA)"," ",s.jsxs("span",{className:"font-bold",children:[null==(E=null==(R=null==a?void 0:a.data)?void 0:R.config)?void 0:E.da_percentage,"%"]})]}),s.jsx("span",{className:"font-medium",children:Cl(null==(O=null==(M=null==(I=null==a?void 0:a.data)?void 0:I.monthly)?void 0:M.earnings)?void 0:O.dearness_allowance)})]}),(null==(L=null==(q=null==(B=null==a?void 0:a.data)?void 0:B.monthly)?void 0:q.earnings)?void 0:L.house_rent_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600",children:["House Rent Allowance (HRA)"," ",s.jsxs("span",{className:"font-bold",children:[null==(H=null==(G=null==a?void 0:a.data)?void 0:G.config)?void 0:H.hra_percentage,"%"]})]}),s.jsx("span",{className:"font-medium",children:Cl(null==(Y=null==(V=null==($=null==a?void 0:a.data)?void 0:$.monthly)?void 0:V.earnings)?void 0:Y.house_rent_allowance)})]}),(null==(z=null==(J=null==(W=null==a?void 0:a.data)?void 0:W.monthly)?void 0:J.earnings)?void 0:z.transport_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Transport Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(X=null==(U=null==(Z=null==a?void 0:a.data)?void 0:Z.monthly)?void 0:U.earnings)?void 0:X.transport_allowance)})]}),(null==(ee=null==(K=null==(Q=null==a?void 0:a.data)?void 0:Q.monthly)?void 0:K.earnings)?void 0:ee.medical_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Medical Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(le=null==(se=null==(ae=null==a?void 0:a.data)?void 0:ae.monthly)?void 0:se.earnings)?void 0:le.medical_allowance)})]}),(null==(de=null==(ie=null==(ne=null==a?void 0:a.data)?void 0:ne.monthly)?void 0:ie.earnings)?void 0:de.special_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Special Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(oe=null==(re=null==(ce=null==a?void 0:a.data)?void 0:ce.monthly)?void 0:re.earnings)?void 0:oe.special_allowance)})]}),(null==(he=null==(xe=null==(me=null==a?void 0:a.data)?void 0:me.monthly)?void 0:xe.earnings)?void 0:he.children_education_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Children Education Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(ye=null==(je=null==(pe=null==a?void 0:a.data)?void 0:pe.monthly)?void 0:je.earnings)?void 0:ye.children_education_allowance)})]}),(null==(Ne=null==(ge=null==(fe=null==a?void 0:a.data)?void 0:fe.monthly)?void 0:ge.earnings)?void 0:Ne.hostel_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Hostel Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Se=null==(we=null==(_e=null==a?void 0:a.data)?void 0:_e.monthly)?void 0:we.earnings)?void 0:Se.hostel_allowance)})]}),(null==(Pe=null==(ke=null==(Ae=null==a?void 0:a.data)?void 0:Ae.monthly)?void 0:ke.earnings)?void 0:Pe.leave_travel_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Leave Travel Allowance (LTA)"}),s.jsx("span",{className:"font-medium",children:Cl(null==(De=null==(Te=null==(Ce=null==a?void 0:a.data)?void 0:Ce.monthly)?void 0:Te.earnings)?void 0:De.leave_travel_allowance)})]}),(null==(Ee=null==(Re=null==(Fe=null==a?void 0:a.data)?void 0:Fe.monthly)?void 0:Re.earnings)?void 0:Ee.washing_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Washing Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Oe=null==(Me=null==(Ie=null==a?void 0:a.data)?void 0:Ie.monthly)?void 0:Me.earnings)?void 0:Oe.washing_allowance)})]}),(null==(Le=null==(qe=null==(Be=null==a?void 0:a.data)?void 0:Be.monthly)?void 0:qe.earnings)?void 0:Le.conveyance_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Conveyance Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==($e=null==(He=null==(Ge=null==a?void 0:a.data)?void 0:Ge.monthly)?void 0:He.earnings)?void 0:$e.conveyance_allowance)})]}),(null==(We=null==(Ye=null==(Ve=null==a?void 0:a.data)?void 0:Ve.monthly)?void 0:Ye.earnings)?void 0:We.dress_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Dress Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(ze=null==(Je=null==a?void 0:a.data)?void 0:Je.monthly)?void 0:ze.earnings.dress_allowance)})]}),(null==(Xe=null==(Ue=null==(Ze=null==a?void 0:a.data)?void 0:Ze.monthly)?void 0:Ue.earnings)?void 0:Xe.non_practicing_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Non-Practicing Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(ea=null==(Ke=null==(Qe=null==a?void 0:a.data)?void 0:Qe.monthly)?void 0:Ke.earnings)?void 0:ea.non_practicing_allowance)})]}),(null==(la=null==(sa=null==(aa=null==a?void 0:a.data)?void 0:aa.monthly)?void 0:sa.earnings)?void 0:la.risk_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Risk Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(na=null==(ta=null==a?void 0:a.data)?void 0:ta.monthly)?void 0:na.earnings.risk_allowance)})]}),(null==(ca=null==(da=null==(ia=null==a?void 0:a.data)?void 0:ia.monthly)?void 0:da.earnings)?void 0:ca.hardship_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Hardship Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(ma=null==(oa=null==(ra=null==a?void 0:a.data)?void 0:ra.monthly)?void 0:oa.earnings)?void 0:ma.hardship_allowance)})]}),(null==(ha=null==(ua=null==(xa=null==a?void 0:a.data)?void 0:xa.monthly)?void 0:ua.earnings)?void 0:ha.deputation_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Deputation Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(va=null==(ja=null==(pa=null==a?void 0:a.data)?void 0:pa.monthly)?void 0:ja.earnings)?void 0:va.deputation_allowance)})]}),(null==(fa=null==(ya=null==(ba=null==a?void 0:a.data)?void 0:ba.monthly)?void 0:ya.earnings)?void 0:fa.hill_area_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Hill Area Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(_a=null==(Na=null==(ga=null==a?void 0:a.data)?void 0:ga.monthly)?void 0:Na.earnings)?void 0:_a.hill_area_allowance)})]}),(null==(Aa=null==(Sa=null==(wa=null==a?void 0:a.data)?void 0:wa.monthly)?void 0:Sa.earnings)?void 0:Aa.project_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Project Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Ca=null==(Pa=null==(ka=null==a?void 0:a.data)?void 0:ka.monthly)?void 0:Pa.earnings)?void 0:Ca.project_allowance)})]}),(null==(Fa=null==(Da=null==(Ta=null==a?void 0:a.data)?void 0:Ta.monthly)?void 0:Da.earnings)?void 0:Fa.other_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Other Allowance"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Ea=null==(Ra=null==a?void 0:a.data)?void 0:Ra.monthly)?void 0:Ea.earnings.other_allowance)})]}),(null==(Oa=null==(Ma=null==(Ia=null==a?void 0:a.data)?void 0:Ia.monthly)?void 0:Ma.earnings)?void 0:Oa.arrears)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Arrears"}),s.jsx("span",{className:"font-medium",children:Cl(null==(qa=null==(Ba=null==a?void 0:a.data)?void 0:Ba.monthly)?void 0:qa.earnings.arrears)})]}),s.jsxs("div",{className:"mt-3 flex justify-between border-t border-green-200 pt-3 font-semibold",children:[s.jsx("span",{className:"text-green-700",children:"Gross Salary"}),s.jsx("span",{className:"text-green-700",children:Cl((null==(Ha=null==(Ga=null==(La=null==a?void 0:a.data)?void 0:La.monthly)?void 0:Ga.earnings)?void 0:Ha.gross_salary)||0)})]})]})]}),s.jsxs("div",{className:"rounded-lg border-2 border-red-200 bg-white p-5 shadow-sm",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 border-b border-red-200 pb-2 text-lg font-bold text-red-700",children:[s.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-100 text-sm",children:"−"}),"Monthly Deductions"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Ya=null==(Va=null==($a=null==a?void 0:a.data)?void 0:$a.monthly)?void 0:Va.deductions)?void 0:Ya.pf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"PF Contribution (Employee)"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Ja=null==(Wa=null==a?void 0:a.data)?void 0:Wa.monthly)?void 0:Ja.deductions.pf_contribution)})]}),(null==(Ua=null==(Za=null==(za=null==a?void 0:a.data)?void 0:za.monthly)?void 0:Za.deductions)?void 0:Ua.gpf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"GPF Contribution"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Qa=null==(Xa=null==a?void 0:a.data)?void 0:Xa.monthly)?void 0:Qa.deductions.gpf_contribution)})]}),(null==(as=null==(es=null==(Ka=null==a?void 0:a.data)?void 0:Ka.monthly)?void 0:es.deductions)?void 0:as.nps_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"NPS Contribution"}),s.jsx("span",{className:"font-medium",children:Cl(null==(ls=null==(ss=null==a?void 0:a.data)?void 0:ss.monthly)?void 0:ls.deductions.nps_contribution)})]}),(null==(is=null==(ns=null==(ts=null==a?void 0:a.data)?void 0:ts.monthly)?void 0:ns.deductions)?void 0:is.esi_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"ESI Contribution"}),s.jsx("span",{className:"font-medium",children:Cl(null==(cs=null==(ds=null==a?void 0:a.data)?void 0:ds.monthly)?void 0:cs.deductions.esi_contribution)})]}),(null==(ms=null==(os=null==(rs=null==a?void 0:a.data)?void 0:rs.monthly)?void 0:os.deductions)?void 0:ms.professional_tax)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Professional Tax"}),s.jsx("span",{className:"font-medium",children:Cl(null==(us=null==(xs=null==a?void 0:a.data)?void 0:xs.monthly)?void 0:us.deductions.professional_tax)})]}),(null==(js=null==(ps=null==(hs=null==a?void 0:a.data)?void 0:hs.monthly)?void 0:ps.deductions)?void 0:js.income_tax)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Income Tax (TDS)"}),s.jsx("span",{className:"font-medium",children:Cl(null==(bs=null==(vs=null==a?void 0:a.data)?void 0:vs.monthly)?void 0:bs.deductions.income_tax)})]}),(null==(gs=null==(fs=null==(ys=null==a?void 0:a.data)?void 0:ys.monthly)?void 0:fs.deductions)?void 0:gs.loan_deduction)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Loan Deduction"}),s.jsx("span",{className:"font-medium",children:Cl(null==(_s=null==(Ns=null==a?void 0:a.data)?void 0:Ns.monthly)?void 0:_s.deductions.loan_deduction)})]}),(null==(As=null==(Ss=null==(ws=null==a?void 0:a.data)?void 0:ws.monthly)?void 0:Ss.deductions)?void 0:As.advance_deduction)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Advance Deduction"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Ps=null==(ks=null==a?void 0:a.data)?void 0:ks.monthly)?void 0:Ps.deductions.advance_deduction)})]}),(null==(Ds=null==(Ts=null==(Cs=null==a?void 0:a.data)?void 0:Cs.monthly)?void 0:Ts.deductions)?void 0:Ds.other_deductions)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Other Deductions"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Rs=null==(Fs=null==a?void 0:a.data)?void 0:Fs.monthly)?void 0:Rs.deductions.other_deductions)})]}),s.jsxs("div",{className:"mt-3 flex justify-between border-t border-red-200 pt-3 font-semibold",children:[s.jsx("span",{className:"text-red-700",children:"Total Deductions"}),s.jsx("span",{className:"text-red-700",children:Cl((null==(Ms=null==(Is=null==(Es=null==a?void 0:a.data)?void 0:Es.monthly)?void 0:Is.deductions)?void 0:Ms.total_deductions)||0)})]})]}),((null==(qs=null==(Bs=null==(Os=null==a?void 0:a.data)?void 0:Os.monthly)?void 0:Bs.employer_contributions)?void 0:qs.total)||0)>0&&s.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"mb-2 text-sm font-semibold text-gray-700",children:"Employer Contributions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Hs=null==(Gs=null==(Ls=null==a?void 0:a.data)?void 0:Ls.monthly)?void 0:Gs.employer_contributions)?void 0:Hs.pf)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"PF (Employer)"}),s.jsx("span",{className:"font-medium",children:Cl(null==($s=null==a?void 0:a.data)?void 0:$s.monthly.employer_contributions.pf)})]}),(null==(Ws=null==(Ys=null==(Vs=null==a?void 0:a.data)?void 0:Vs.monthly)?void 0:Ys.employer_contributions)?void 0:Ws.nps)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"NPS (Employer)"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Js=null==a?void 0:a.data)?void 0:Js.monthly.employer_contributions.nps)})]}),(null==(Us=null==(Zs=null==(zs=null==a?void 0:a.data)?void 0:zs.monthly)?void 0:Zs.employer_contributions)?void 0:Us.esi)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"ESI (Employer)"}),s.jsx("span",{className:"font-medium",children:Cl(null==(Xs=null==a?void 0:a.data)?void 0:Xs.monthly.employer_contributions.esi)})]})]})]})]})]}),(null==(Qs=null==a?void 0:a.data)?void 0:Qs.tax_info)&&s.jsxs("div",{className:"rounded-lg border-2 border-purple-200 bg-white p-5 shadow-sm",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 border-b border-purple-200 pb-2 text-lg font-bold text-purple-700",children:[s.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-sm",children:"₹"}),"Tax Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm sm:grid-cols-3 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Tax Regime"}),s.jsxs("p",{className:"font-medium capitalize",children:[null==(Ks=null==a?void 0:a.data)?void 0:Ks.tax_info.regime," Regime"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Annual Gross Income"}),s.jsx("p",{className:"font-medium",children:Cl((null==(el=null==a?void 0:a.data)?void 0:el.tax_info.annual_gross_income)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Standard Deduction"}),s.jsx("p",{className:"font-medium",children:Cl((null==(al=null==a?void 0:a.data)?void 0:al.tax_info.standard_deduction)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Taxable Income"}),s.jsx("p",{className:"font-medium",children:Cl((null==(sl=null==a?void 0:a.data)?void 0:sl.tax_info.annual_taxable_income)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Annual Tax"}),s.jsx("p",{className:"font-medium",children:Cl((null==(ll=null==a?void 0:a.data)?void 0:ll.tax_info.annual_tax)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Monthly TDS"}),s.jsx("p",{className:"font-medium",children:Cl((null==(tl=null==a?void 0:a.data)?void 0:tl.tax_info.monthly_tax)||0)})]}),(null==(nl=null==a?void 0:a.data)?void 0:nl.tax_info.rebate_applicable)&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-600",children:"Rebate Status"}),s.jsx("p",{className:"font-medium text-green-600",children:"✓ Eligible for Rebate (u/s 87A)"})]})]})]}),(null==(il=null==a?void 0:a.data)?void 0:il.config)&&"monthly"===(null==l?void 0:l.salary_mode)&&s.jsxs("div",{className:"rounded-lg border-2 border-orange-200 bg-white p-5 shadow-sm",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 border-b border-orange-200 pb-2 text-lg font-bold text-orange-700",children:[s.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-orange-100 text-sm",children:"%"}),"Pay Configuration"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm sm:grid-cols-3 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"DA Percentage"}),s.jsxs("p",{className:"font-medium",children:[null==(dl=null==a?void 0:a.data)?void 0:dl.config.da_percentage,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"HRA Percentage"}),s.jsxs("p",{className:"font-medium",children:[null==(cl=null==a?void 0:a.data)?void 0:cl.config.hra_percentage,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Pension Scheme"}),s.jsx("p",{className:"font-medium",children:null==(ol=null==(rl=null==a?void 0:a.data)?void 0:rl.config.pension_scheme)?void 0:ol.replace(/_/g," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"ESI Applicable"}),s.jsx("p",{className:"font-medium",children:(null==(ml=null==a?void 0:a.data)?void 0:ml.config.esi_applicable)?"Yes":"No"})]})]})]}),(null==(xl=null==a?void 0:a.data)?void 0:xl.config)&&("contractual"===(null==l?void 0:l.salary_mode)||"daily"===(null==l?void 0:l.salary_mode))&&s.jsxs("div",{className:"rounded-lg border-2 border-purple-200 bg-white p-5 shadow-sm",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 border-b border-purple-200 pb-2 text-lg font-bold text-purple-700",children:[s.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-100 text-sm",children:"⚙"}),"contractual"===(null==l?void 0:l.salary_mode)?"Contract Configuration":"Daily Wage Configuration"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm sm:grid-cols-3 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Salary Mode"}),s.jsx("p",{className:"font-medium capitalize",children:null==l?void 0:l.salary_mode})]}),"contractual"===(null==l?void 0:l.salary_mode)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Contract Amount"}),s.jsxs("p",{className:"font-medium",children:["₹",Number((null==(hl=null==(ul=null==a?void 0:a.data)?void 0:ul.config)?void 0:hl.contract_amount)||0).toLocaleString("en-IN"),"/month"]})]}),"daily"===(null==l?void 0:l.salary_mode)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Daily Rate"}),s.jsxs("p",{className:"font-medium",children:["₹",Number((null==(jl=null==(pl=null==a?void 0:a.data)?void 0:pl.config)?void 0:jl.daily_rate)||0).toLocaleString("en-IN"),"/day"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Expected Working Days"}),s.jsxs("p",{className:"font-medium",children:[(null==(bl=null==(vl=null==a?void 0:a.data)?void 0:vl.config)?void 0:bl.expected_working_days)||26," ","days"]})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"TDS Rate"}),s.jsxs("p",{className:"font-medium",children:[(null==(fl=null==(yl=null==a?void 0:a.data)?void 0:yl.config)?void 0:fl.flat_tds_rate)||("daily"===(null==l?void 0:l.salary_mode)?1:10),"%",s.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(Section"," ","daily"===(null==l?void 0:l.salary_mode)?"194C":"194J",")"]})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"PF Applicable"}),s.jsx("p",{className:"font-medium",children:(null==(Nl=null==(gl=null==a?void 0:a.data)?void 0:gl.config)?void 0:Nl.pf_applicable)?"Yes":"No"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"ESI Applicable"}),s.jsx("p",{className:"font-medium",children:(null==(wl=null==(_l=null==a?void 0:a.data)?void 0:_l.config)?void 0:wl.esi_applicable)?"Yes":"No"})]})]})]}),s.jsxs("div",{className:"space-y-3 rounded-lg border-2 border-gray-200 bg-white p-6 shadow-sm",children:[s.jsx("h3",{className:"border-b pb-2 text-lg font-bold text-gray-800",children:"Bank & Other Details"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"City Classification:"}),s.jsx("div",{className:"mt-1",children:s.jsx(f,{variant:"outline",children:l.city_classification})})]}),"monthly"===(null==l?void 0:l.salary_mode)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Pension Scheme:"}),s.jsx("div",{className:"mt-1",children:s.jsx(f,{children:l.pension_scheme})})]}),"monthly"===(null==l?void 0:l.salary_mode)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Tax Regime:"}),s.jsx("div",{className:"mt-1",children:s.jsx(f,{variant:"secondary",children:"new"===l.tax_regime?"New Regime":"Old Regime"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Bank Name:"}),s.jsx("p",{className:"font-medium",children:l.bank_name||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Account Number:"}),s.jsx("p",{className:"font-medium",children:l.bank_account_no||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"IFSC Code:"}),s.jsx("p",{className:"font-medium",children:l.bank_ifsc||"-"})]})]})]}),s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx(S,{onClick:async()=>{var e,s,n,i,d,c;Al(!0);try{const d="monthly"===l.salary_mode||!l.salary_mode,c={emp_id:Number(l.emp_id),salary_mode:l.salary_mode||"monthly",effective_from:l.effective_from,...l.bank_name&&{bank_name:l.bank_name},...l.bank_account_no&&{bank_account_no:l.bank_account_no},...l.bank_ifsc&&{bank_ifsc:l.bank_ifsc},pf_applicable:l.pf_applicable??!0,esi_applicable:l.esi_applicable??!0,pt_applicable:l.pt_applicable??!0};d?Object.assign(c,{pay_commission_id:Number(l.pay_commission_id),...l.pay_level_id&&{pay_level_id:Number(l.pay_level_id)},..."custom"===l.commission_type&&{basic_pay:Number(l.basic_pay)},...l.da_percentage&&""!==String(l.da_percentage).trim()&&{da_percentage:Number(l.da_percentage)},...l.is_matrix_based&&"custom"!==l.commission_type&&{cell_index:Number(l.cell_index)},...!l.is_matrix_based&&"custom"!==l.commission_type&&{grade_pay:Number(l.grade_pay)},city_classification:l.city_classification,...l.hra_percentage&&""!==String(l.hra_percentage).trim()&&{hra_percentage:Number(l.hra_percentage)},transport_allowance:Number(l.transport_allowance)||0,medical_allowance:Number(l.medical_allowance)||0,special_allowance:Number(l.special_allowance)||0,children_education_allowance:Number(l.children_education_allowance)||0,hostel_allowance:Number(l.hostel_allowance)||0,leave_travel_allowance:Number(l.leave_travel_allowance)||0,washing_allowance:Number(l.washing_allowance)||0,conveyance_allowance:Number(l.conveyance_allowance)||0,dress_allowance:Number(l.dress_allowance)||0,non_practicing_allowance:Number(l.non_practicing_allowance)||0,risk_allowance:Number(l.risk_allowance)||0,hardship_allowance:Number(l.hardship_allowance)||0,deputation_allowance:Number(l.deputation_allowance)||0,hill_area_allowance:Number(l.hill_area_allowance)||0,project_allowance:Number(l.project_allowance)||0,other_allowance:Number(l.other_allowance)||0,...l.other_allowance_description&&{other_allowance_description:l.other_allowance_description},pension_scheme:"EPF",pf_employee_contribution_rate:Number(l.pf_employee_contribution_rate)||12,tax_regime:l.tax_regime||"new"}):"daily"===l.salary_mode?Object.assign(c,{daily_rate:Number(l.daily_rate)||0,expected_working_days:Number(l.expected_working_days)||26,flat_tds_rate:Number(null==(s=null==(e=null==a?void 0:a.data)?void 0:e.config)?void 0:s.flat_tds_rate)||1}):"contractual"===l.salary_mode&&Object.assign(c,{contract_amount:Number(l.contract_amount)||0,flat_tds_rate:Number(null==(i=null==(n=null==a?void 0:a.data)?void 0:n.config)?void 0:i.flat_tds_rate)||10});const r=await A.post(w.setEmployeeSalary,c);r.data.success&&(Pl(!0),null==t||t(r.data))}catch(r){alert((null==(c=null==(d=null==r?void 0:r.response)?void 0:d.data)?void 0:c.message)||"Failed to set employee salary")}finally{Al(!1)}},disabled:Sl,size:"lg",className:"min-w-[200px]",children:Sl?s.jsxs(s.Fragment,{children:[s.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting Salary..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ve,{className:"mr-2 h-4 w-4"}),"Confirm & Set Salary"]})})})]})})]}):s.jsx(c,{children:s.jsx(r,{className:"pt-6",children:s.jsx(v,{children:s.jsx(y,{children:"Please estimate the salary first before setting it."})})})})}function Ie(){var e,a,l,d,c,r,o;const[m,x]=t.useState(""),[u,h]=t.useState(""),{id:p}=n(),j=p||"",v=U({api:`${null==(e=w)?void 0:e.getPaySlipList}?emp_id=${j}&${(()=>{let e="";return m&&(e+=`year=${m}&`),u&&(e+=`month=${u}&`),e})()}`,key:"salary-slip-list",value:[j,m,u],options:{enabled:!!j}}),b=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),y=e=>{switch(e){case"generated":return"bg-blue-100 text-blue-700 border-blue-200";case"approved":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},[f,g]=t.useState("list");if(v.isLoading)return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading salary slips..."})]})});if(v.error)return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md rounded-lg border border-red-200 bg-red-50 p-6",children:[s.jsx(K,{className:"mx-auto mb-4 h-12 w-12 text-red-500"}),s.jsx("p",{className:"text-center text-red-700",children:"Error loading salary slips"})]})});null==(l=null==(a=v.data)?void 0:a.data)||l.employee;const N=(null==(c=null==(d=v.data)?void 0:d.data)?void 0:c.salary_slips)||[],S=null==(o=null==(r=v.data)?void 0:r.data)?void 0:o.summary;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsxs("div",{className:"mb-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{className:"h-5 w-5 text-gray-400"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter Salary Slips"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-gray-100 p-1",children:[s.jsxs("button",{onClick:()=>g("card"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("card"===f?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[s.jsx(fe,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"Card"})]}),s.jsxs("button",{onClick:()=>g("list"),className:"flex items-center gap-2 rounded-md px-3 py-2 transition "+("list"===f?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[s.jsx(ge,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden text-sm font-medium sm:inline",children:"List"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Year"}),s.jsxs("select",{value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Years"}),["2024","2025","2026"].map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Month"}),s.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"w-full rounded-lg border border-gray-300 px-4 py-2 outline-none transition focus:border-transparent focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Months"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,a)=>s.jsx("option",{value:a+1,children:e},e))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{x(""),h("")},className:"w-full rounded-lg bg-gray-100 px-4 py-2 font-medium text-gray-700 transition hover:bg-gray-200",children:"Clear Filters"})})]})]}),S&&s.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-sm",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-blue-100",children:"Total Gross Salary"}),s.jsx(be,{className:"h-5 w-5 text-blue-200"})]}),s.jsx("p",{className:"text-3xl font-bold",children:b(S.total_gross_salary)})]}),s.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-500 to-red-600 p-6 text-white shadow-sm",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-red-100",children:"Total Deductions"}),s.jsx(be,{className:"h-5 w-5 text-red-200"})]}),s.jsx("p",{className:"text-3xl font-bold",children:b(S.total_deductions)})]}),s.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-6 text-white shadow-sm",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-green-100",children:"Total Net Salary"}),s.jsx(be,{className:"h-5 w-5 text-green-200"})]}),s.jsx("p",{className:"text-3xl font-bold",children:b(S.total_net_salary)})]})]}),s.jsx("div",{className:"space-y-4",children:0===N.length?s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm",children:[s.jsx(re,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No salary slips found"}),s.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Try adjusting your filters"})]}):"card"===f?N.map(e=>s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition hover:shadow-md",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"rounded-lg bg-blue-100 p-3",children:s.jsx(Ne,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[e.month_name," ",e.year]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Generated on"," ",new Date(e.salary_generation_date).toLocaleDateString("en-IN")]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${y(e.salary_status)}`,children:e.salary_status.toUpperCase()}),s.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition hover:bg-blue-700",children:[s.jsx(_e,{className:"h-4 w-4"}),"Download"]})]})]}),s.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[s.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Working Days"}),s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.payable_days,"/",e.total_working_days]})]}),s.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[s.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Basic Pay"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:b(e.basic_pay)})]}),s.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[s.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Grade Pay"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:b(e.grade_pay)})]}),s.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[s.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"HRA"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:b(e.house_rent_allowance)})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Gross Salary"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b(e.gross_salary)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Total Deductions"}),s.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",b(e.total_deductions)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Net Salary"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:b(e.net_salary)})]})]})})]})},e.id)):s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Period"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Paid / Working"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Basic Pay"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Allowances"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Gross Salary"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Deductions"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Net Salary"}),s.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map(e=>{const a=e.grade_pay+e.dearness_allowance+e.house_rent_allowance+e.transport_allowance;return s.jsxs("tr",{className:"transition hover:bg-gray-50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"rounded-lg bg-blue-100 p-2",children:s.jsx(Ne,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.month_name," ",e.year]}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.salary_generation_date).toLocaleDateString("en-IN")})]})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:e.payable_days}),s.jsxs("span",{className:"text-gray-500",children:["/",e.total_working_days]})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(e.basic_pay)})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(a)})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:s.jsx("p",{className:"text-sm font-bold text-gray-900",children:b(e.gross_salary)})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:s.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["-",b(e.total_deductions)]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:s.jsx("p",{className:"text-sm font-bold text-green-600",children:b(e.net_salary)})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:s.jsx("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs font-semibold ${y(e.salary_status)}`,children:e.salary_status.toUpperCase()})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-center",children:s.jsx(i,{to:`/hrms/dashboard/salary-slip-by-id/${_(e.id.toString())}`,target:"_blank",children:s.jsxs("button",{className:"inline-flex items-center gap-1 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-blue-700",children:[s.jsx(_e,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"hidden lg:inline",children:"Download"})]})})})]},e.id)})})]})})})})]})}const Me=R({id:I().required(),is_matrix_based:E().optional(),is_custom_commission:E().optional(),cell_index:I().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>e&&!a,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:I().when(["is_matrix_based","is_custom_commission"],{is:(e,a)=>!e&&!a,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),basic_pay:I().when("is_custom_commission",{is:!0,then:e=>e.required("Basic Pay is required for custom commissions"),otherwise:e=>e.optional()}),da_percentage:I().nullable().optional(),city_classification:I().optional(),hra_percentage:I().nullable().optional(),transport_allowance:I().optional(),medical_allowance:I().optional(),special_allowance:I().optional(),pension_scheme:I().optional(),nps_contribution_rate:I().nullable().optional(),gpf_contribution_rate:I().nullable().optional(),pf_employee_contribution_rate:I().nullable().optional(),bank_name:I().optional(),bank_account_no:I().optional(),bank_ifsc:I().optional(),tax_regime:I().oneOf(["old","new"]).optional()});function Oe({getEmpPay:t,tabView:n}){var i,d,c,r,o,m,x,b,f,g,N,k,P,C,T,D,F,R,E,I,q,L,H,$,V,Y,W,J,z,U,X,Q,K,ee,ae,se,le,ne,ie,de,ce,re,oe,me,xe,ue,he,pe,je,ve,be,ye,fe,ge,Ne,_e,Se,Ae,ke,Pe,Ce,Te,De,Fe,Re,Ee,Oe,Be,qe,Le,Ge,He,$e,Ve,Ye,We,Je,ze,Ze,Ue,Xe,Qe,Ke,ea,aa,sa,la,ta,na,ia,da,ca,ra,oa,ma,xa,ua,ha,pa,ja,va,ba,ya,fa,ga,Na,_a,wa,Sa,Aa,ka,Pa,Ca,Ta,Da,Fa,Ra,Ea,Ia,Ma,Oa,Ba,qa,La,Ga,Ha,$a,Va,Ya,Wa,Ja,za,Za,Ua,Xa,Qa,Ka,es,as,ss,ls,ts,ns,is,ds,cs,rs,os,ms,xs,us,hs,ps,js,vs,bs,ys,fs,gs,Ns,_s,ws,Ss,As,ks,Ps,Cs,Ts,Ds,Fs,Rs,Es,Is,Ms,Os,Bs,qs,Ls,Gs,Hs,$s,Vs,Ys,Ws,Js,zs,Zs,Us,Xs,Qs,Ks,el,al,sl,ll,tl,nl,il,dl,cl,rl,ol,ml,xl;const[ul,hl]=e.useState(!1),[pl,jl]=e.useState(!1),{data:vl,isLoading:bl}=t,yl=_(String((null==(c=null==(d=null==(i=null==vl?void 0:vl.data)?void 0:i.pay_config)?void 0:d.pay_level)?void 0:c.id)||"")),{data:fl}=G(yl),gl=a({resolver:l(Me)}),{reset:Nl,watch:_l}=gl,wl=_l("pension_scheme"),Sl=_l("is_custom_commission"),Al=_l("is_matrix_based");null==(o=null==(r=null==vl?void 0:vl.data)?void 0:r.pay_config)||o.pay_level,e.useEffect(()=>{var e,a,s,l;if(null==(e=null==vl?void 0:vl.data)?void 0:e.pay_config){const e=vl.data.pay_config,t=!e.pay_level;Nl({id:e.id.toString(),cell_index:String(e.cell_index||""),is_matrix_based:(null==(a=e.pay_commission)?void 0:a.is_matrix_based)??!1,is_custom_commission:t,grade_pay:String(e.grade_pay||0),basic_pay:String(e.current_basic_pay||""),da_percentage:(null==(l=null==(s=vl.data)?void 0:s.config)?void 0:l.da_percentage)?String(vl.data.config.da_percentage):"",city_classification:e.city_classification,hra_percentage:String(e.hra_percentage||""),transport_allowance:String(e.transport_allowance||""),medical_allowance:String(e.medical_allowance||""),special_allowance:String(e.special_allowance||0),pension_scheme:e.pension_scheme,...e.nps_contribution_rate&&{nps_contribution_rate:String(e.nps_contribution_rate)},...e.pf_employee_contribution_rate&&{pf_employee_contribution_rate:String(e.pf_employee_contribution_rate)},...e.gpf_contribution_rate&&{gpf_contribution_rate:String(e.gpf_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:vl.data.pay_config.bank_ifsc,tax_regime:vl.data.pay_config.tax_regime})}},[vl,Nl]);const kl=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return bl?s.jsx("div",{className:"flex min-h-[500px] items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(te,{className:"h-12 w-12 animate-spin text-blue-600"}),s.jsx("div",{className:"absolute inset-0 h-12 w-12 animate-ping rounded-full bg-blue-400 opacity-20"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-base font-medium text-slate-700",children:"Loading salary data..."}),s.jsx("p",{className:"text-sm text-slate-500",children:"Please wait a moment"})]})]})}):vl?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:s.jsx("div",{className:"space-y-6",children:s.jsxs(u,{defaultValue:n,className:"w-full",children:[s.jsxs(h,{className:"mb-6 inline-flex h-auto gap-1 rounded-lg border border-slate-200 bg-slate-100 p-1",children:[s.jsx(p,{value:"overview",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Overview"}),s.jsx(p,{value:"monthly",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Monthly"}),s.jsx(p,{value:"annual",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Annual"}),s.jsx(p,{value:"config",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Settings"}),s.jsx(p,{value:"slip-list",className:"rounded-md px-4 py-2 text-sm font-medium text-slate-600 transition-all data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Pay Slips"})]}),s.jsxs(j,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg bg-emerald-600 p-5 text-white",children:[s.jsx("p",{className:"text-sm font-medium text-emerald-100",children:"Net Monthly Salary"}),s.jsx("p",{className:"mt-1 text-2xl font-bold",children:kl((null==(x=null==(m=vl.data)?void 0:m.monthly)?void 0:x.net_salary)||0)})]}),s.jsxs("div",{className:"rounded-lg bg-blue-600 p-5 text-white",children:[s.jsx("p",{className:"text-sm font-medium text-blue-100",children:"Net Annual Salary"}),s.jsx("p",{className:"mt-1 text-2xl font-bold",children:kl((null==(f=null==(b=vl.data)?void 0:b.annual)?void 0:f.net_salary)||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Structure"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Pay Commission"}),s.jsx("span",{className:"font-medium text-slate-900",children:(null==(k=null==(N=null==(g=vl.data)?void 0:g.pay_config)?void 0:N.pay_commission)?void 0:k.commission_name)||"Custom"})]}),(null==(C=null==(P=vl.data)?void 0:P.pay_config)?void 0:C.pay_level)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Pay Level"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(F=null==(D=null==(T=vl.data)?void 0:T.pay_config)?void 0:D.pay_level)?void 0:F.level_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(E=null==(R=vl.data)?void 0:R.pay_config)?void 0:E.current_basic_pay)})]}),(null==(L=null==(q=null==(I=vl.data)?void 0:I.pay_config)?void 0:q.pay_commission)?void 0:L.is_matrix_based)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cell Index"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==($=null==(H=vl.data)?void 0:H.pay_config)?void 0:$.cell_index})]}),void 0!==(null==(Y=null==(V=vl.data)?void 0:V.config)?void 0:Y.da_percentage)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA Rate"}),s.jsxs("span",{className:"font-medium text-slate-900",children:[null==(J=null==(W=vl.data)?void 0:W.config)?void 0:J.da_percentage,"%"]})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Deductions & Tax"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Pension Scheme"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(U=null==(z=vl.data)?void 0:z.pay_config)?void 0:U.pension_scheme})]}),(null==(Q=null==(X=vl.data)?void 0:X.pay_config)?void 0:Q.nps_contribution_rate)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),s.jsxs("span",{className:"font-medium text-slate-900",children:[null==(ee=null==(K=vl.data)?void 0:K.pay_config)?void 0:ee.nps_contribution_rate,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),s.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(se=null==(ae=vl.data)?void 0:ae.pay_config)?void 0:se.tax_regime)?"New":"Old"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"City Class"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(ne=null==(le=vl.data)?void 0:le.pay_config)?void 0:ne.city_classification})]})]})]})]})]}),s.jsxs(j,{value:"monthly",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(ce=null==(de=null==(ie=vl.data)?void 0:ie.monthly)?void 0:de.earnings)?void 0:ce.basic_pay)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(me=null==(oe=null==(re=vl.data)?void 0:re.monthly)?void 0:oe.earnings)?void 0:me.dearness_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"HRA"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(he=null==(ue=null==(xe=vl.data)?void 0:xe.monthly)?void 0:ue.earnings)?void 0:he.house_rent_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transport"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(ve=null==(je=null==(pe=vl.data)?void 0:pe.monthly)?void 0:je.earnings)?void 0:ve.transport_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Medical"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(fe=null==(ye=null==(be=vl.data)?void 0:be.monthly)?void 0:ye.earnings)?void 0:fe.medical_allowance)||0)})]}),(null==(_e=null==(Ne=null==(ge=vl.data)?void 0:ge.monthly)?void 0:Ne.earnings)?void 0:_e.special_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Special"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(ke=null==(Ae=null==(Se=vl.data)?void 0:Se.monthly)?void 0:Ae.earnings)?void 0:ke.special_allowance)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),s.jsx("span",{className:"font-bold text-emerald-700",children:kl((null==(Te=null==(Ce=null==(Pe=vl.data)?void 0:Pe.monthly)?void 0:Ce.earnings)?void 0:Te.gross_salary)||0)})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Re=null==(Fe=null==(De=vl.data)?void 0:De.monthly)?void 0:Fe.deductions)?void 0:Re.pf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"PF"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Be=null==(Oe=null==(Ee=vl.data)?void 0:Ee.monthly)?void 0:Oe.deductions)?void 0:Be.pf_contribution)})]}),(null==(Ge=null==(Le=null==(qe=vl.data)?void 0:qe.monthly)?void 0:Le.deductions)?void 0:Ge.nps_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Ve=null==($e=null==(He=vl.data)?void 0:He.monthly)?void 0:$e.deductions)?void 0:Ve.nps_contribution)})]}),(null==(Je=null==(We=null==(Ye=vl.data)?void 0:Ye.monthly)?void 0:We.deductions)?void 0:Je.gpf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"GPF"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Ue=null==(Ze=null==(ze=vl.data)?void 0:ze.monthly)?void 0:Ze.deductions)?void 0:Ue.gpf_contribution)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Ke=null==(Qe=null==(Xe=vl.data)?void 0:Xe.monthly)?void 0:Qe.deductions)?void 0:Ke.professional_tax)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Income Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(sa=null==(aa=null==(ea=vl.data)?void 0:ea.monthly)?void 0:aa.deductions)?void 0:sa.income_tax)||0)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),s.jsx("span",{className:"font-bold text-red-700",children:kl((null==(na=null==(ta=null==(la=vl.data)?void 0:la.monthly)?void 0:ta.deductions)?void 0:na.total_deductions)||0)})]})]})]})]}),s.jsx("div",{className:"rounded-lg bg-emerald-600 p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Monthly Salary"}),s.jsx("span",{className:"text-xl font-bold",children:kl((null==(da=null==(ia=vl.data)?void 0:ia.monthly)?void 0:da.net_salary)||0)})]})}),(null==(oa=null==(ra=null==(ca=vl.data)?void 0:ca.monthly)?void 0:ra.employer_contributions)?void 0:oa.total)>0&&s.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Employer Contribution"}),s.jsx("span",{className:"font-semibold text-slate-900",children:kl((null==(ua=null==(xa=null==(ma=vl.data)?void 0:ma.monthly)?void 0:xa.employer_contributions)?void 0:ua.total)||0)})]})})]}),s.jsxs(j,{value:"annual",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Annual Earnings"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(ja=null==(pa=null==(ha=vl.data)?void 0:ha.annual)?void 0:pa.earnings)?void 0:ja.basic_pay)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(ya=null==(ba=null==(va=vl.data)?void 0:va.annual)?void 0:ba.earnings)?void 0:ya.dearness_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"HRA"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Na=null==(ga=null==(fa=vl.data)?void 0:fa.annual)?void 0:ga.earnings)?void 0:Na.house_rent_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transport"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Sa=null==(wa=null==(_a=vl.data)?void 0:_a.annual)?void 0:wa.earnings)?void 0:Sa.transport_allowance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Medical"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Pa=null==(ka=null==(Aa=vl.data)?void 0:Aa.annual)?void 0:ka.earnings)?void 0:Pa.medical_allowance)||0)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),s.jsx("span",{className:"font-bold text-emerald-700",children:kl((null==(Da=null==(Ta=null==(Ca=vl.data)?void 0:Ca.annual)?void 0:Ta.earnings)?void 0:Da.gross_salary)||0)})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Annual Deductions"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Ea=null==(Ra=null==(Fa=vl.data)?void 0:Fa.annual)?void 0:Ra.deductions)?void 0:Ea.pf_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"PF"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Oa=null==(Ma=null==(Ia=vl.data)?void 0:Ia.annual)?void 0:Ma.deductions)?void 0:Oa.pf_contribution)})]}),(null==(La=null==(qa=null==(Ba=vl.data)?void 0:Ba.annual)?void 0:qa.deductions)?void 0:La.nps_contribution)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==($a=null==(Ha=null==(Ga=vl.data)?void 0:Ga.annual)?void 0:Ha.deductions)?void 0:$a.nps_contribution)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Wa=null==(Ya=null==(Va=vl.data)?void 0:Va.annual)?void 0:Ya.deductions)?void 0:Wa.professional_tax)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Income Tax"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Za=null==(za=null==(Ja=vl.data)?void 0:Ja.annual)?void 0:za.deductions)?void 0:Za.income_tax)||0)})]}),s.jsx(Z,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),s.jsx("span",{className:"font-bold text-red-700",children:kl((null==(Qa=null==(Xa=null==(Ua=vl.data)?void 0:Ua.annual)?void 0:Xa.deductions)?void 0:Qa.total_deductions)||0)})]})]})]})]}),s.jsx("div",{className:"rounded-lg bg-blue-600 p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Net Annual Salary"}),s.jsx("span",{className:"text-xl font-bold",children:kl((null==(es=null==(Ka=vl.data)?void 0:Ka.annual)?void 0:es.net_salary)||0)})]})}),(null==(as=vl.data)?void 0:as.tax_info)&&s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Tax Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Regime"}),s.jsx("p",{className:"font-medium text-slate-900",children:"new"===vl.data.tax_info.regime?"New":"Old"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Taxable Income"}),s.jsx("p",{className:"font-medium text-slate-900",children:kl(vl.data.tax_info.annual_taxable_income)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Annual Tax"}),s.jsx("p",{className:"font-medium text-slate-900",children:kl(vl.data.tax_info.annual_tax)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Monthly Tax"}),s.jsx("p",{className:"font-medium text-slate-900",children:kl(vl.data.tax_info.monthly_tax)})]})]})]})]}),s.jsx(j,{value:"config",className:"space-y-4",children:pl?s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6",children:[s.jsx("h4",{className:"mb-6 text-sm font-semibold text-slate-900",children:"Update Salary Configuration"}),s.jsxs(M,{methods:gl,onSubmit:gl.handleSubmit(async e=>{var a,s;hl(!0);try{(await A.post(w.updateEmployeeSalary,{id:Number(e.id),...e.is_custom_commission&&{basic_pay:Number(e.basic_pay),da_percentage:e.da_percentage?Number(e.da_percentage):null},...!e.is_custom_commission&&e.is_matrix_based&&{cell_index:Number(e.cell_index)},...!e.is_custom_commission&&!e.is_matrix_based&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,hra_percentage:Number(e.hra_percentage)||null,transport_allowance:Number(e.transport_allowance),medical_allowance:Number(e.medical_allowance),special_allowance:Number(e.special_allowance),pension_scheme:e.pension_scheme,..."EPF_NPS"===e.pension_scheme&&{nps_contribution_rate:Number(e.nps_contribution_rate),pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},..."OPS"===e.pension_scheme&&{gpf_contribution_rate:Number(e.gpf_contribution_rate)},..."EPF"===e.pension_scheme&&{pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})).data.success&&(alert("Salary configuration updated successfully!"),jl(!1))}catch(l){alert((null==(s=null==(a=null==l?void 0:l.response)?void 0:a.data)?void 0:s.message)||"Failed to update salary configuration")}finally{hl(!1)}}),children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Structure"}),s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:Sl?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(O,{name:"basic_pay",label:"Basic Pay",type:"number",placeholder:"Enter basic pay"})}),s.jsx("div",{children:s.jsx(O,{name:"da_percentage",label:"DA Percentage",type:"number",placeholder:"e.g., 50"})})]}):s.jsx(s.Fragment,{children:Al?s.jsx("div",{children:s.jsx(B,{name:"cell_index",label:"Cell Index",data:(null==(ss=null==fl?void 0:fl.data)?void 0:ss.map(e=>({label:`Index ${e.cell_index} - ₹${e.basic_pay}`,value:String(e.cell_index)})))||[]})}):s.jsx("div",{children:s.jsx(O,{name:"grade_pay",label:"Grade Pay"})})})})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Allowances"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx("div",{children:s.jsx(B,{name:"city_classification",label:"City Classification",data:[{label:"X - Metro (24%)",value:"X"},{label:"Y - Other (16%)",value:"Y"},{label:"Z - Rural (8%)",value:"Z"}]})}),s.jsx("div",{children:s.jsx(O,{name:"hra_percentage",label:"HRA %"})}),s.jsx("div",{children:s.jsx(O,{name:"transport_allowance",label:"Transport Allowance"})})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx("div",{children:s.jsx(O,{name:"medical_allowance",label:"Medical Allowance"})}),s.jsx("div",{children:s.jsx(O,{name:"special_allowance",label:"Special Allowance"})})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Retirement & Contributions"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Pension Scheme"}),s.jsx("div",{className:"flex h-10 items-center rounded-md border border-slate-200 bg-slate-100 px-3 text-sm text-slate-600",children:"EPF_NPS"===(null==(ts=null==(ls=vl.data)?void 0:ls.pay_config)?void 0:ts.pension_scheme)?"EPF + NPS":"OPS"===(null==(is=null==(ns=vl.data)?void 0:ns.pay_config)?void 0:is.pension_scheme)?"GPF":"EPF"===(null==(cs=null==(ds=vl.data)?void 0:ds.pay_config)?void 0:cs.pension_scheme)?"EPF Only":null==(os=null==(rs=vl.data)?void 0:rs.pay_config)?void 0:os.pension_scheme}),s.jsx("p",{className:"text-xs text-slate-500",children:"Cannot be changed"})]}),"EPF_NPS"===wl&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(O,{name:"nps_contribution_rate",label:"NPS Rate (%)",type:"number"})}),s.jsx("div",{children:s.jsx(O,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})})]}),"EPF"===wl&&s.jsx("div",{children:s.jsx(O,{name:"pf_employee_contribution_rate",label:"PF Rate (%)",type:"number"})}),"OPS"===wl&&s.jsx("div",{children:s.jsx(O,{name:"gpf_contribution_rate",label:"GPF Rate (%)",type:"number"})})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Bank & Tax Details"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx("div",{children:s.jsx(O,{name:"bank_name",label:"Bank Name"})}),s.jsx("div",{children:s.jsx(O,{name:"bank_account_no",label:"Account No."})}),s.jsx("div",{children:s.jsx(O,{name:"bank_ifsc",label:"IFSC Code"})}),s.jsx("div",{children:s.jsx(B,{name:"tax_regime",label:"Tax Regime",data:[{label:"New Regime",value:"new"},{label:"Old Regime",value:"old"}]})})]})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-slate-200 pt-4",children:[s.jsx(S,{type:"button",variant:"outline",onClick:()=>jl(!1),children:"Cancel"}),s.jsx(S,{type:"submit",disabled:ul,children:ul?s.jsxs(s.Fragment,{children:[s.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs(S,{onClick:()=>jl(!0),variant:"outline",size:"sm",children:[s.jsx(we,{className:"mr-2 h-4 w-4"}),"Edit"]})}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Pay Configuration"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Commission"}),s.jsx("span",{className:"font-medium text-slate-900",children:(null==(us=null==(xs=null==(ms=vl.data)?void 0:ms.pay_config)?void 0:xs.pay_commission)?void 0:us.commission_name)||"Custom"})]}),(null==(ps=null==(hs=vl.data)?void 0:hs.pay_config)?void 0:ps.pay_level)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Pay Level"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(bs=null==(vs=null==(js=vl.data)?void 0:js.pay_config)?void 0:vs.pay_level)?void 0:bs.level_name})]}),(null==(gs=null==(fs=null==(ys=vl.data)?void 0:ys.pay_config)?void 0:fs.pay_commission)?void 0:gs.is_matrix_based)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cell Index"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(_s=null==(Ns=vl.data)?void 0:Ns.pay_config)?void 0:_s.cell_index})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Ss=null==(ws=vl.data)?void 0:ws.pay_config)?void 0:Ss.current_basic_pay)})]}),!(null==(Ps=null==(ks=null==(As=vl.data)?void 0:As.pay_config)?void 0:ks.pay_commission)?void 0:Ps.is_matrix_based)&&(null==(Ts=null==(Cs=vl.data)?void 0:Cs.pay_config)?void 0:Ts.grade_pay)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Grade Pay"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl((null==(Fs=null==(Ds=vl.data)?void 0:Ds.pay_config)?void 0:Fs.grade_pay)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Effective From"}),s.jsx("span",{className:"font-medium text-slate-900",children:new Date(null==(Es=null==(Rs=vl.data)?void 0:Rs.pay_config)?void 0:Es.effective_from).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Allowances"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"City Class"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(Ms=null==(Is=vl.data)?void 0:Is.pay_config)?void 0:Ms.city_classification})]}),void 0!==(null==(Bs=null==(Os=vl.data)?void 0:Os.config)?void 0:Bs.da_percentage)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"DA %"}),s.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Ls=null==(qs=vl.data)?void 0:qs.config)?void 0:Ls.da_percentage,"%"]})]}),(null==(Hs=null==(Gs=vl.data)?void 0:Gs.pay_config)?void 0:Hs.hra_percentage)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"HRA %"}),s.jsxs("span",{className:"font-medium text-slate-900",children:[null==(Vs=null==($s=vl.data)?void 0:$s.pay_config)?void 0:Vs.hra_percentage,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transport"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Ws=null==(Ys=vl.data)?void 0:Ys.pay_config)?void 0:Ws.transport_allowance)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Medical"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(zs=null==(Js=vl.data)?void 0:Js.pay_config)?void 0:zs.medical_allowance)})]}),(null==(Us=null==(Zs=vl.data)?void 0:Zs.pay_config)?void 0:Us.special_allowance)>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Special"}),s.jsx("span",{className:"font-medium text-slate-900",children:kl(null==(Qs=null==(Xs=vl.data)?void 0:Xs.pay_config)?void 0:Qs.special_allowance)})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Retirement & Tax"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Pension"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(el=null==(Ks=vl.data)?void 0:Ks.pay_config)?void 0:el.pension_scheme})]}),(null==(sl=null==(al=vl.data)?void 0:al.pay_config)?void 0:sl.nps_contribution_rate)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"NPS Rate"}),s.jsxs("span",{className:"font-medium text-slate-900",children:[null==(tl=null==(ll=vl.data)?void 0:ll.pay_config)?void 0:tl.nps_contribution_rate,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Tax Regime"}),s.jsx("span",{className:"font-medium text-slate-900",children:"new"===(null==(il=null==(nl=vl.data)?void 0:nl.pay_config)?void 0:il.tax_regime)?"New":"Old"})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[s.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Bank Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Bank"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(cl=null==(dl=vl.data)?void 0:dl.pay_config)?void 0:cl.bank_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Account"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(ol=null==(rl=vl.data)?void 0:rl.pay_config)?void 0:ol.bank_account_no})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"IFSC"}),s.jsx("span",{className:"font-medium text-slate-900",children:null==(xl=null==(ml=vl.data)?void 0:ml.pay_config)?void 0:xl.bank_ifsc})]})]})]})]})]})}),s.jsx(j,{value:"slip-list",children:s.jsx(Ie,{})})]})})}):s.jsx("div",{className:"mx-auto max-w-2xl p-6",children:s.jsx(v,{className:"border-l-4 border-l-amber-500 bg-amber-50",children:s.jsx(y,{className:"text-center text-slate-700",children:"No salary configuration found for this employee. Please estimate and set the salary first."})})})}const Be=R().shape({month:I().required("Month is required"),year:I().required("Year is required")});function qe({open:e,setOpen:t,title:n,id:i,edit:c,setEdit:r,refetch:o,setTabView:m}){const x=X({}),u=Ae(),h=a({defaultValues:{year:"2026",month:""},resolver:l(Be)});return s.jsx(Ce,{open:e,setOpen:t,title:n,setEdit:r,edit:c,isLoading:!1,children:s.jsx(M,{methods:h,onSubmit:h.handleSubmit(async e=>{var a,s,l,n;try{const c=await x.mutateAsync({api:null==(a=w)?void 0:a.generatePaySlip,data:{emp_id:N(i||""),month:e.month,year:e.year}});(null==(s=c.data)?void 0:s.success)?(m&&m("slip-list"),u.refetchQueries({queryKey:["salary-slip-list"]}),d.success(null==(l=null==c?void 0:c.data)?void 0:l.message)):d.error((null==(n=c.data)?void 0:n.message)||"Pay slip not generated successfully"),h.reset({year:"2026",month:""}),t(!1),r(!1),o()}catch(c){}}),children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[s.jsx("div",{children:s.jsx(Pe,{name:"year",label:"Select Financial Year",data:D})}),s.jsx("div",{children:s.jsx(Pe,{name:"month",label:"Select Month",data:F})}),s.jsx(Z,{}),s.jsx("div",{children:s.jsx(ke,{isLoading:null==x?void 0:x.isPending,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function Le(){var a,l,t,d,b,g,N;const{id:_}=n(),A=_||"",[k,P]=e.useState("estimate"),[C,T]=e.useState(null),[D,F]=e.useState(null),[R,E]=e.useState(!1),[I,M]=e.useState(null),[O,B]=e.useState(!0),[q,L]=e.useState("overview"),[G,H]=e.useState(!1),$=U({api:`${null==(a=w)?void 0:a.getEmployeeById}?id=${_}`,key:`${null==(l=w)?void 0:l.getEmployeeById}-${_}`,value:[_],options:{enabled:Boolean(_)}}),V=U({api:`${w.getEmployeeSalary}?emp_id=${_}`,key:`checkExistingSalary-${_}`,value:[_],options:{enabled:!!_}});e.useEffect(()=>{var e,a;(null==(e=V.data)?void 0:e.success)&&(null==(a=V.data)?void 0:a.data)&&(M(V.data.data),E(!0),P("view")),B(V.isLoading)},[V]);const Y=e=>"estimate"===e||("set"===e?!!C&&!R:"view"===e&&R);return V.isLoading?s.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:s.jsx(te,{className:"h-8 w-8 animate-spin text-blue-600"})}):s.jsxs(z,{title:"Salary Management",subTitle:"Configure and manage employee compensation structure",name:(null==(d=null==(t=null==$?void 0:$.data)?void 0:t.data)?void 0:d.emp_name)||"",code:(null==(g=null==(b=null==$?void 0:$.data)?void 0:b.data)?void 0:g.emp_code)||"",children:[s.jsx(qe,{open:G,setOpen:H,title:"Generate Pay Slip",id:A,edit:!1,setEdit:()=>{},setTabView:L}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 ",children:s.jsxs("div",{className:"space-y-6",children:[O?s.jsxs(v,{className:"border-blue-200 bg-white shadow-sm",children:[s.jsx(te,{className:"h-4 w-4 animate-spin text-blue-600"}),s.jsx(y,{className:"ml-2 text-slate-700",children:"Checking existing salary configuration..."})]}):R||I?s.jsxs(v,{className:"border-emerald-200 bg-white shadow-sm",children:[s.jsx(ue,{className:"h-4 w-4 text-emerald-600"}),s.jsxs(y,{className:"ml-2 text-slate-700",children:[s.jsx("span",{className:"font-semibold text-emerald-700",children:"Salary Configured"})," ","- Use Increment & Promotion button to process salary revisions"]})]}):s.jsx(v,{className:"border-blue-200 bg-white shadow-sm",children:s.jsx(y,{className:"text-slate-700",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-semibold text-slate-900",children:"Setup Process:"}),s.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[s.jsx(f,{variant:"outline",className:"mt-0.5",children:"1"}),s.jsx("span",{children:"Calculate salary by entering employee details"})]}),s.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[s.jsx(f,{variant:"outline",className:"mt-0.5",children:"2"}),s.jsx("span",{children:"Review and confirm the salary configuration"})]}),s.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[s.jsx(f,{variant:"outline",className:"mt-0.5",children:"3"}),s.jsx("span",{children:"View complete details and update when needed"})]})]})})}),R||I?s.jsxs(c,{className:"border-slate-200 bg-white shadow-lg",children:[s.jsx(o,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(m,{className:"flex items-center gap-2 text-xl",children:[s.jsx(ce,{className:"h-5 w-5 text-blue-600"}),"Salary Details"]}),s.jsx(x,{children:"Complete salary breakdown and management"})]}),s.jsxs("div",{className:"space-x-4",children:[s.jsxs(S,{onClick:()=>H(!0),className:"bg-gradient-to-r from-green-600 to-green-600 text-white hover:from-green-700 hover:to-green-700",children:[s.jsx(ce,{className:"mr-2 h-4 w-4"}),"Generate Pay Slip"]}),s.jsx(i,{to:`/hrms/dashboard/increment-promotion/${A}`,children:s.jsxs(S,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700",children:[s.jsx(Se,{className:"mr-2 h-4 w-4"}),"Increment & Promotion"]})})]})]})}),s.jsx(r,{className:"p-6",children:s.jsx(Oe,{getEmpPay:V,tabView:q})})]}):s.jsxs(c,{className:"border-slate-200 bg-white shadow-lg",children:[s.jsxs(o,{className:"border-b border-slate-100",children:[s.jsx(m,{className:"text-xl",children:"Salary Configuration Workflow"}),s.jsx(x,{children:"Follow the step-by-step process to configure employee salary"})]}),s.jsx(r,{className:"p-6",children:s.jsxs(u,{value:k,onValueChange:P,className:"w-full",children:[s.jsxs(h,{className:"grid h-auto w-full grid-cols-3 gap-2 bg-slate-100 p-1.5",children:[s.jsxs(p,{value:"estimate",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[s.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-xs font-bold text-white",children:"1"}),s.jsx("span",{className:"hidden sm:inline",children:"Calculate"}),C&&s.jsx(ue,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(p,{value:"set",disabled:!Y("set"),className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[s.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-600 text-xs font-bold text-white",children:"2"}),s.jsx("span",{className:"hidden sm:inline",children:"Confirm"}),R&&s.jsx(ue,{className:"h-4 w-4 text-emerald-600"})]}),s.jsxs(p,{value:"view",disabled:!Y("view"),className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[s.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-600 text-xs font-bold text-white",children:"3"}),s.jsx("span",{className:"hidden sm:inline",children:"Review"})]})]}),s.jsx(j,{value:"estimate",className:"mt-6",children:s.jsx(Re,{empId:A,employeeData:null==(N=null==$?void 0:$.data)?void 0:N.data,onEstimateComplete:(e,a)=>{T(e),F(a),R||I?setTimeout(()=>P("view"),500):setTimeout(()=>P("set"),500)}})}),s.jsx(j,{value:"set",className:"mt-6",children:s.jsx(Ee,{estimatedData:C,formData:D,onSetComplete:e=>{E(!0),M(e.data),setTimeout(()=>P("view"),500)}})}),s.jsx(j,{value:"view",className:"mt-6",children:s.jsx(Oe,{getEmpPay:V,tabView:q})})]})})]})]})})]})}export{Le as default};
