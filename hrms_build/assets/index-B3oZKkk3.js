import{k as e,h as s,f as i,r as a,j as t,z as d,B as o,L as n,l as r}from"./index-BJ2Di0BB.js";import{P as l}from"./index-L2kacWh6.js";import{h as m}from"./moment-CBOc1lqT.js";import{C as c,a as v,b as u,c as x}from"./card-CrOEotWM.js";import{S as p,T as h,a as j,b as _,c as f,d as g,e as y}from"./index-BxKGIMG5.js";import{u as b,b as N}from"./useCustomQuery-DkqDqiry.js";import{S as C}from"./Spinner-DjUjMlqR.js";import{a as S,o as w,c as E,d as P,b as k,e as F}from"./yup-BTlf5Wf5.js";import{F as M}from"./datetime-picker-cKnQNXMD.js";import{R as q}from"./RHFTextField-BK1QXo_s.js";import{R as D}from"./RHFTextArea-CtK9XJcE.js";import{B as O}from"./ButtonLoading-B5GmY3N3.js";import{R as L}from"./RHFSelectField-CxYg0t7R.js";import"./select-4D5dQM-6.js";import{R as T}from"./RHFCheckbox-gxPdkAtn.js";import{S as Y}from"./separator-BtSn9EpY.js";import{D as $}from"./index-ClKtlEeL.js";import"./calendar-B99NsLtP.js";import"./clock-PqgEqIzL.js";import"./check-DiqtQ1XW.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),B=[{label:"7th CPC",value:"7th_cpc"},{label:"6th CPC",value:"6th_cpc"},{label:"5th CPC",value:"5th_cpc"},{label:"Custom",value:"custom"}],V=E().shape({commission_name:k().required("Commission Name is required"),commission_type:k().required("Commission Type is required"),effective_from:F().required("Effective From date is required"),effective_to:F().nullable(),government_order_no:k().required("Government Order No is required"),government_order_date:F().required("Government Order Date is required"),description:k().required("Description is required"),is_matrix_based:P().default(!1)});function R({open:e,setOpen:o,title:n,id:r,edit:l,setEdit:m,refetch:c}){var v;const u=b({}),{data:x,isFetching:p}=N({api:`${null==(v=s)?void 0:v.getPayCommissionById}?id=${i(String(r))}`,key:"getPayCommissionById",options:{enabled:!!l}}),h=S({defaultValues:{commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1},resolver:w(V)});return a.useEffect(()=>{var e,s,i,a,t,d,o,n;l&&(null==x?void 0:x.data)?h.reset({commission_name:(null==(e=null==x?void 0:x.data)?void 0:e.commission_name)||"",commission_type:(null==(s=null==x?void 0:x.data)?void 0:s.commission_type)||"",effective_from:(null==(i=null==x?void 0:x.data)?void 0:i.effective_from)||void 0,effective_to:(null==(a=null==x?void 0:x.data)?void 0:a.effective_to)||void 0,government_order_no:(null==(t=null==x?void 0:x.data)?void 0:t.government_order_no)||"",government_order_date:(null==(d=null==x?void 0:x.data)?void 0:d.government_order_date)||void 0,description:(null==(o=null==x?void 0:x.data)?void 0:o.description)||"",is_matrix_based:(null==(n=null==x?void 0:x.data)?void 0:n.is_matrix_based)||!1}):h.reset({commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1})},[l,x,h]),a.useEffect(()=>{"7th_cpc"==h.watch("commission_type")&&h.setValue("is_matrix_based",!0),"6th_cpc"==h.watch("commission_type")&&h.setValue("is_matrix_based",!1)},[h.watch("commission_type")]),t.jsx($,{open:e,setOpen:o,title:n,setEdit:m,edit:l,isLoading:p,children:t.jsx(M,{methods:h,onSubmit:h.handleSubmit(async e=>{var i,a,t,n,v,x,p,j;try{if(l&&e){const o=await u.mutateAsync({api:`${null==(i=s)?void 0:i.updatePayCommissionById}`,data:{id:r,...e}});(null==(a=o.data)?void 0:a.success)?d.success(null==(t=null==o?void 0:o.data)?void 0:t.message):d.error((null==(n=o.data)?void 0:n.message)||"Pay Commission not updated successfully")}else{const i=await u.mutateAsync({api:null==(v=s)?void 0:v.createPayCommission,data:e});(null==(x=i.data)?void 0:x.success)?d.success(null==(p=null==i?void 0:i.data)?void 0:p.message):d.error((null==(j=i.data)?void 0:j.message)||"Pay Commission not created successfully"),h.reset({commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1})}o(!1),m(!1),c()}catch(_){}}),children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(q,{label:"Commission Name",name:"commission_name",placeholder:"Enter Commission Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(L,{label:"Commission Type",name:"commission_type",data:B})}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-2",children:[t.jsx(q,{type:"date",name:"effective_from",placeholder:"Effective From"}),t.jsx(q,{type:"date",label:"Effective To",name:"effective_to",placeholder:"Effective To (Optional)"})]}),t.jsx("div",{children:t.jsx(q,{name:"government_order_no",label:"Government Order No",placeholder:"Enter Government Order No"})}),t.jsx("div",{children:t.jsx(q,{type:"date",name:"government_order_date",label:"Government Order Date",placeholder:"Government Order Date"})}),t.jsx("div",{children:t.jsx(D,{name:"description",placeholder:"Enter description",label:"Description",rows:4,inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(T,{disabled:"custom"!==h.watch("commission_type"),name:"is_matrix_based",label:"Is Matrix Based Pay Structure"})}),t.jsx(Y,{}),t.jsx("div",{children:t.jsx(O,{isLoading:h.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function G(){var e,d,l,b,S,w;const[E,P]=a.useState(""),[k,F]=a.useState(!1),[M,q]=a.useState(""),[D,O]=a.useState(!1),[L,T]=a.useState("list"),Y=N({api:`${s.getAllPayCommissions}`,key:"getAllPayCommissions",options:{enabled:!0}}),$=e=>{O(!0),F(!0),q(e)};return t.jsxs("main",{className:"grid items-start",children:[t.jsx(R,{open:k,setOpen:F,title:D?"Edit Pay Commission":"Add Pay Commission",id:M,edit:D,setEdit:O,refetch:Y.refetch}),t.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[t.jsxs("div",{className:"flex w-full justify-between gap-2",children:[t.jsx("div",{children:t.jsx(p,{search:E,setSearch:P,refetch:Y.refetch,isFetching:null==Y?void 0:Y.isLoading})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex rounded-lg border",children:[t.jsxs(o,{variant:"list"===L?"default":"ghost",size:"sm",onClick:()=>T("list"),className:"rounded-r-none",children:[t.jsx(n,{className:"mr-2 h-4 w-4"}),"List"]}),t.jsxs(o,{variant:"chart"===L?"default":"ghost",size:"sm",onClick:()=>T("chart"),className:"rounded-l-none",children:[t.jsx(A,{className:"mr-2 h-4 w-4"}),"Chart"]})]}),t.jsx(o,{className:"flex items-center gap-2",onClick:()=>F(!0),children:"Add New"})]})]}),t.jsxs(c,{children:[t.jsx(v,{className:"px-7",children:t.jsxs(u,{children:["Employee Type List (",null==(d=null==(e=null==Y?void 0:Y.data)?void 0:e.pagination)?void 0:d.total,")"]})}),t.jsx(x,{children:Y.isLoading?t.jsx("div",{className:"flex h-32 items-center justify-center",children:t.jsx(C,{})}):t.jsx(t.Fragment,{children:"list"===L?t.jsxs(h,{children:[t.jsx(j,{children:t.jsxs(_,{children:[t.jsx(f,{className:"",children:"#"}),t.jsx(f,{className:"",children:"Pay Commission"}),t.jsx(f,{className:"",children:"Is Matrix"}),t.jsx(f,{className:"",children:"Created at"}),t.jsx(f,{children:"Action"})]})}),t.jsx(g,{children:null==(b=null==(l=null==Y?void 0:Y.data)?void 0:l.data)?void 0:b.map((e,s)=>t.jsxs(_,{children:[t.jsx(y,{children:s+1}),t.jsx(y,{children:null==e?void 0:e.commission_name}),t.jsx(y,{children:(null==e?void 0:e.is_matrix_based)?"Yes":"No"}),t.jsx(y,{children:m(null==e?void 0:e.created_at).format("DD-MM-YYYY")}),t.jsx(y,{children:t.jsx(o,{className:"bg-primary",onClick:()=>$(String(null==e?void 0:e.id)),children:"Edit"})}),t.jsx(y,{children:t.jsx(r,{className:"rounded-lg bg-green-600 px-4 py-2 text-white",to:`pay-level?commission_id=${i(String(null==e?void 0:e.id))}&is_matrix_based=${null==e?void 0:e.is_matrix_based}&commission_name=${null==e?void 0:e.commission_name}`,children:"View Levels"})})]},null==e?void 0:e.id))})]}):t.jsx("div",{className:"space-y-6",children:null==(w=null==(S=null==Y?void 0:Y.data)?void 0:S.data)?void 0:w.map((e,s)=>t.jsxs(c,{className:"border-2",children:[t.jsx(v,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-semibold",children:null==e?void 0:e.commission_name})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(o,{size:"sm",className:"bg-primary",onClick:()=>$(String(null==e?void 0:e.id)),children:"Edit"}),t.jsx(r,{className:"flex items-center rounded-lg bg-green-600 px-4 py-2 text-sm text-white",to:`pay-level?commission_id=${i(String(null==e?void 0:e.id))}&is_matrix_based=${null==e?void 0:e.is_matrix_based}&commission_name=${null==e?void 0:e.commission_name}`,children:"View Levels"})]})]})}),t.jsx(x,{children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Index:"}),t.jsx("span",{className:"ml-2 font-medium",children:s+1})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Matrix Based:"}),t.jsx("span",{className:"ml-2 font-medium",children:(null==e?void 0:e.is_matrix_based)?"Yes":"No"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Created:"}),t.jsx("span",{className:"ml-2 font-medium",children:m(null==e?void 0:e.created_at).format("DD-MM-YYYY")})]})]})})]},null==e?void 0:e.id))})})})]})]})]})}function I(){return t.jsx(l,{title:"Pay Commission",subTitle:"Manage all the Pay Commissions here",children:t.jsx("div",{className:"py-12",children:t.jsx(G,{})})})}export{I as default};
