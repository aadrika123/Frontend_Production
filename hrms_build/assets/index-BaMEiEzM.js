import{r as e,q as s,j as a,f as t,h as l,z as r,v as i,B as d,t as n,L as c}from"./index-CaGgFSeq.js";import{g as o,d as m,U as x,a as u,D as h,b as p,c as g,e as b,f as j,h as f,i as v,j as N,E as y,m as w,n as _,o as S,p as D,P as k}from"./index-_Ebnz7ZO.js";import{a as E,o as A,c as C,e as P,f as F,b as B,g as I,d as M}from"./yup-CKEuqCyz.js";import{F as V}from"./datetime-picker-BtprqcV1.js";import{R as q}from"./RHFTextField-DnsEykRH.js";import{B as $}from"./ButtonLoading-B22z2lRV.js";import{S as L,a as R,b as O,c as T,d as U}from"./select-CIf9vlQt.js";import"./input-D-UmUPn3.js";import"./switch-Dzwmyki0.js";import{R as H}from"./SelectField-DuXiJ2pI.js";import"./checkbox-BzF0hRJq.js";import"./label-CInbbuF8.js";import{u as z,c as Y,b as W,a as G}from"./useCustomQuery-kAcgaiYY.js";import{E as J}from"./employeeTypes-BSpBpKLh.js";import{B as Q}from"./briefcase-CezUY-pi.js";import{H as X,P as Z,M as K,R as ee,S as se}from"./RHFUploadFiled-y-Nqrtk_.js";import{B as ae}from"./building-2-DIKb5mk1.js";import{C as te}from"./calendar-B5etLz2h.js";import{U as le}from"./users-D_1I5uef.js";import{H as re,M as ie,C as de,u as ne,F as ce,W as oe,U as me,a as xe}from"./usePdfValidator-CPWtCsKo.js";import{C as ue}from"./circle-alert-2e3QFMXj.js";import{H as he}from"./house-9ObSu603.js";import{h as pe}from"./moment-CBOc1lqT.js";import{C as ge,c as be,a as je,d as fe}from"./card-DpoqoWLt.js";import{S as ve}from"./Spinner-qexXCl2s.js";import{C as Ne}from"./index-C3Xhupw1.js";import{R as ye}from"./RHFSelectField-XaTdgr7j.js";import{S as we}from"./separator-BjkNEWW3.js";import{P as _e}from"./plus-CDHvFTH0.js";import{F as Se}from"./file-text--YAkbBG1.js";import{E as De}from"./eye-Bg6KHRh8.js";import{D as ke}from"./download-e8mIBQ33.js";import{T as Ee}from"./trash-2-DL1oepIx.js";import{R as Ae}from"./RHFCheckbox-Ma2BiBD9.js";import{C as Ce}from"./circle-check-big-BWcM736c.js";import{C as Pe}from"./circle-x-DjmCeqLK.js";import{S as Fe}from"./search-De7hYMPA.js";import{C as Be}from"./clock-B2whL4Nd.js";import{C as Ie}from"./calendar-days-Y4XlIsR5.js";import{D as Me}from"./dollar-sign-CdU8B4Is.js";import"./format-BkNqQ0tt.js";import"./chevron-right-CSfpr0N3.js";import"./check-DrWmecxK.js";const Ve=()=>{(document.documentElement||document.body).scrollTo({top:0,behavior:"smooth"})},qe=C().shape({emp_type:B().required().label("Employee Type"),emp_code:B().max(50).required().label("Employee Code"),emp_name:B().max(100).required().label("Employee Name"),gender:B().oneOf(["male","female","other"]).required().label("Gender"),dob:P().required().label("Date of Birth"),marital_status:B().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:B().max(50).required().label("Religion"),emp_blood_group:B().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:B().max(50).required().label("Health Status").required(),contact_no:B().max(10).required().label("Contact Number"),emergency_contact_no:B().max(10).optional().label("Emergency Contact"),email:B().email().max(100).required().label("Email"),emp_present_address:B().required().label("Present Address"),present_post_office:B().max(100).required().label("Present Post Office"),present_pin_code:B().max(6).required().label("Present PIN Code"),present_police_station:B().max(100).optional().label("Present Police Station"),present_state:B().max(100).required().label("Present State"),present_district:B().max(100).required().label("Present District"),emp_permanent_address:B().required().label("Permanent Address"),permanent_post_office:B().max(100).required().label("Permanent Post Office"),permanent_pin_code:B().max(6).required().label("Permanent PIN Code"),permanent_police_station:B().max(100).optional().label("Permanent Police Station"),permanent_state:B().max(100).required().label("Permanent State"),permanent_district:B().max(100).required().label("Permanent District"),aadhaar_no:B().max(12).nullable().optional().label("Aadhaar Number"),pan_no:B().max(10).nullable().optional().label("PAN Number"),voter_id:B().max(20).nullable().optional().label("Voter ID"),uan_no:B().max(12).nullable().optional().label("UAN Number"),esi_no:B().max(17).nullable().optional().label("ESI Number"),passport_no:B().max(20).nullable().optional().label("Passport Number"),driving_license_no:B().max(20).nullable().optional().label("Driving License"),department_id:F().integer().required().label("Department"),department_name:B().label("Department Name").optional(),designation_id:F().integer().required().label("Designation"),date_of_joining:P().required().label("Date of Joining")});function $e({id:i,getDataById:d}){var n,c,u,h;const[p,g]=e.useState(!1),b=z({});s();const j=o(),f=m(),v=e.useMemo(()=>{var e;if(!(null==(e=d.data)?void 0:e.data))return{};const{ulb_id:s,status:a,created_at:t,updated_at:l,id:r,emp_image:i,...n}=d.data.data,c={};return Object.entries(n).forEach(([e,s])=>{c[e]=null===s?void 0:s}),c},[d.data]),N=E({defaultValues:v,resolver:A(qe)});e.useEffect(()=>{d.data&&N.reset(v)},[d.data,N]);return a.jsxs("div",{className:"",children:[a.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:a.jsx(x,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),a.jsxs(V,{methods:N,onSubmit:N.handleSubmit(async e=>{var s,a,i,n,c,o;try{const m=await b.mutateAsync({api:`${null==(s=l)?void 0:s.updateEmployeeById}`,data:{id:t((null==(i=null==(a=null==d?void 0:d.data)?void 0:a.data)?void 0:i.id.toString())||""),...e}});(null==(n=m.data)?void 0:n.success)?(r.success(null==(c=null==m?void 0:m.data)?void 0:c.message),d.refetch(),Ve()):r.error((null==(o=m.data)?void 0:o.message)||"Employee not created successfully"),Ve()}catch(m){r.error("An error occurred while creating employee")}}),children:[a.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[a.jsx(Q,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(X,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(H,{name:"emp_type",data:J,disabled:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(X,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(q,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Department"]}),a.jsx(H,{name:"department_id",selectedText:"department_name",data:(null==(c=null==(n=null==j?void 0:j.data)?void 0:n.data)?void 0:c.map(e=>({label:String(e.department_name),value:String(e.id)})))||[]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),a.jsx(H,{name:"designation_id",data:(null==(h=null==(u=null==f?void 0:f.data)?void 0:u.data)?void 0:h.map(e=>({label:String(e.designation_name),value:String(e.id)})))||[]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),a.jsx(q,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),a.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[a.jsx(x,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(x,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),a.jsx(q,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(le,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),a.jsx(H,{name:"gender",data:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),a.jsx(q,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(le,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),a.jsx(H,{name:"marital_status",data:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(le,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),a.jsx(q,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),a.jsx(H,{name:"emp_blood_group",data:[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(re,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),a.jsx(H,{name:"emp_health_status",data:[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}]})]})]})})]}),a.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[a.jsx(Z,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(Z,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),a.jsx(q,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),a.jsx(q,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),a.jsx(q,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),a.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[a.jsx(he,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"col-span-full space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),a.jsx(q,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),a.jsx(q,{name:"present_post_office",placeholder:"Enter Post Office"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(X,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),a.jsx(q,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),a.jsx(q,{name:"present_police_station",placeholder:"Enter Police Station"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"District"]}),a.jsx(q,{name:"present_district",placeholder:"Enter District"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"State"]}),a.jsx(q,{name:"present_state",placeholder:"Enter State"})]})]})}),a.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[a.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:p,onChange:e=>(e=>{if(g(e),e){const e=N.getValues("emp_present_address"),s=N.getValues("present_post_office"),a=N.getValues("present_pin_code"),t=N.getValues("present_police_station"),l=N.getValues("present_state"),r=N.getValues("present_district");N.setValue("emp_permanent_address",e),N.setValue("permanent_post_office",s),N.setValue("permanent_pin_code",a),N.setValue("permanent_police_station",t),N.setValue("permanent_state",l),N.setValue("permanent_district",r)}else N.setValue("emp_permanent_address",""),N.setValue("permanent_post_office",""),N.setValue("permanent_pin_code",""),N.setValue("permanent_police_station",""),N.setValue("permanent_state",""),N.setValue("permanent_district","")})(e.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(he,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),a.jsx("div",{children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"col-span-full space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),a.jsx(q,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:p})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),a.jsx(q,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:p})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(X,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),a.jsx(q,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:p})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),a.jsx(q,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:p})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"District"]}),a.jsx(q,{name:"permanent_district",placeholder:"Enter District",disabled:p})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4 text-gray-400"}),"State"]}),a.jsx(q,{name:"permanent_state",placeholder:"Enter State",disabled:p})]})]})})]})]}),a.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[a.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[a.jsx(de,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),a.jsx(q,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),a.jsx(q,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),a.jsx(q,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),a.jsx(q,{name:"esi_no",placeholder:"Enter ESI Number"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),a.jsx(q,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),a.jsx(q,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),a.jsx("div",{className:"flex gap-3",children:a.jsx($,{isLoading:N.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:a.jsxs(a.Fragment,{children:[a.jsx(x,{className:"h-4 w-4"}),"Update Employee"]})})})]})})]}),a.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const Le=C().shape({doc_name:B().required("Document Name is required"),doc_type_id:B().required("Document Type is required"),doc_path:I().required("Document is required").test("fileRequired","Document is required",e=>e instanceof File||"string"==typeof e&&""!==e),description:B().required("Description is required")});function Re({title:s,id:n,edit:c,refetch:o,getDataById:m}){var x,y,w,_,S,D,k;const{validateFile:C,reset:P}=ne({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),F=z({}),B=Y({}),I=e.useRef(null),M=u(),{data:L}=W({api:`${null==(x=l)?void 0:x.updateEmployeeById}/${n}`,key:"getDocumentById",options:{enabled:c}}),R=E({defaultValues:{doc_type_id:(null==(y=null==L?void 0:L.data)?void 0:y.doc_type_id)||"",doc_name:(null==(w=null==L?void 0:L.data)?void 0:w.doc_name)||"",doc_path:(null==(_=null==L?void 0:L.data)?void 0:_.doc_path)||"",description:(null==(S=null==L?void 0:L.data)?void 0:S.description)||""},resolver:A(Le)}),{id:O}=i();e.useEffect(()=>{var e,s,a,t;c&&L?R.reset({doc_type_id:null==(e=null==L?void 0:L.data)?void 0:e.doc_type_id,doc_name:null==(s=null==L?void 0:L.data)?void 0:s.doc_name,doc_path:null==(a=null==L?void 0:L.data)?void 0:a.doc_path,description:(null==(t=null==L?void 0:L.data)?void 0:t.description)??""}):R.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[c,L]),e.useEffect(()=>{var e,s,a,t;"Aadhaar Card"===(null==R?void 0:R.watch("doc_name"))?R.setValue("description",(null==(s=null==(e=null==m?void 0:m.data)?void 0:e.data)?void 0:s.aadhaar_no)||""):"Pan Card"===(null==R?void 0:R.watch("doc_name"))?R.setValue("description",(null==(t=null==(a=null==m?void 0:m.data)?void 0:a.data)?void 0:t.pan_no)||""):R.setValue("description","")},[null==R?void 0:R.watch("doc_name")]);const T=R.formState.isSubmitting||B.isPending;return a.jsxs(h,{children:[a.jsx(p,{asChild:!0,children:a.jsxs(d,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[a.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),a.jsx(g,{className:"sm:max-w-[425px]",children:a.jsxs(V,{methods:R,onSubmit:R.handleSubmit(async e=>{var s,a,i,d,n,x;try{const u=new FormData;if(u.append("emp_id",t(String(null==(a=null==(s=null==m?void 0:m.data)?void 0:s.data)?void 0:a.id))),u.append("doc_type_id",e.doc_type_id),u.append("doc_name",e.doc_name),u.append("description",e.description),u.append("file",null==e?void 0:e.doc_path),c&&e);else{const e=await F.mutateAsync({api:l.uploadEmployeeDocument,data:u});(null==(i=e.data)?void 0:i.success)?(r.success(null==(d=null==e?void 0:e.data)?void 0:d.message),null==(n=I.current)||n.click()):r.error((null==(x=e.data)?void 0:x.message)||"Document not attached successfully"),R.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}o()}catch(u){r.error("An error occurred while processing your request")}}),children:[a.jsxs(b,{children:[a.jsx(j,{children:s}),a.jsx(f,{})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(ye,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:(null==(k=null==(D=null==M?void 0:M.data)?void 0:D.data)?void 0:k.map(e=>({label:String(e.doc_name),value:String(e.id)})))||[]})}),a.jsx("div",{children:a.jsx(ee,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a&&"application/pdf"===(null==a?void 0:a.type)){const s=await C(a);s.isValid?(r.success(s.message),P(),R.setValue("doc_path",a)):(r.error(s.message),e.target.value="",R.resetField("doc_path"))}else a&&R.setValue("doc_path",a)},placeholder:"Upload your document"})}),a.jsx("div",{children:a.jsx(q,{label:`${(null==R?void 0:R.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(null==R?void 0:R.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),a.jsx(we,{})]}),a.jsxs(v,{className:"mt-5 flex justify-between",children:[a.jsx(N,{asChild:!0,children:a.jsx(d,{variant:"outline",ref:I,children:"Cancel"})}),a.jsx($,{type:"submit",isLoading:T,children:"Save changes"})]})]})})]})}function Oe({id:s,getDataById:n}){var c,o,m,x;const[u,h]=e.useState(""),[p,g]=e.useState(!1),{id:b}=i(),j=W({api:`${l.getEmployeeDocuments}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),f=z({}),v=e=>{var s;return(null==(s=e.split(".").pop())?void 0:s.toLowerCase())||""},N=e=>{const s=v(e);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(s)};return a.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),a.jsx(Re,{title:p?"Edit Document":"Attach Document",id:s,edit:p,setEdit:g,refetch:j.refetch,getDataById:n})]}),j.isLoading?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsx(ve,{})}):a.jsx(a.Fragment,{children:0===(null==(o=null==(c=null==j?void 0:j.data)?void 0:c.data)?void 0:o.length)?a.jsx(ge,{className:"border-2 border-dashed border-gray-300 bg-white",children:a.jsxs(be,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:a.jsx(Se,{className:"h-16 w-16 text-gray-400"})}),a.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),a.jsx("p",{className:"mt-2 text-center text-gray-600",children:u?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):a.jsx("div",{className:"space-y-4",children:null==(x=null==(m=null==j?void 0:j.data)?void 0:m.data)?void 0:x.map(e=>{return a.jsx(ge,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[N(null==e?void 0:e.doc_path)?a.jsx("img",{src:e.doc_path,alt:(null==e?void 0:e.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{var s,a;e.currentTarget.style.display="none",null==(a=null==(s=e.currentTarget.parentElement)?void 0:s.querySelector(".fallback-icon"))||a.classList.remove("hidden")}}):(s=null==e?void 0:e.doc_path,"pdf"===v(s)?a.jsx("div",{className:"flex h-full items-center justify-center",children:a.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:a.jsx(ce,{className:"h-12 w-12 text-red-600"})})}):a.jsx("div",{className:"flex h-full items-center justify-center",children:a.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:a.jsx(Se,{className:"h-12 w-12 text-blue-600"})})})),a.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:a.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:a.jsx(Se,{className:"h-12 w-12 text-gray-400"})})}),a.jsx("div",{className:"absolute bottom-1 left-1",children:a.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:v(null==e?void 0:e.doc_path)||"file"})}),a.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:a.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[a.jsx("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:a.jsx(De,{className:"h-3 w-3"})}),a.jsx("a",{href:e.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:a.jsx(ke,{className:"h-3 w-3"})})]})})]}),a.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:a.jsx("div",{className:"min-w-0 flex-1",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(null==e?void 0:e.doc_name)||"Document"}),a.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(null==e?void 0:e.description)||"No description available"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(te,{className:"h-4 w-4"}),a.jsx("span",{className:"whitespace-nowrap",children:pe(null==e?void 0:e.created_at).format("DD MMM YYYY")})]}),a.jsxs("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[a.jsx(y,{className:"h-4 w-4"}),"Open"]}),a.jsx(d,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ne("Are you sure?","Please confirm",async()=>{var s,a,i;try{const d=await f.mutateAsync({api:`${l.deleteEmployeeDocument}`,data:{id:t(e.toString())}});(null==(s=null==d?void 0:d.data)?void 0:s.success)?(r.success((null==(a=null==d?void 0:d.data)?void 0:a.message)||"Deleted successfully"),j.refetch()):r.error((null==(i=null==d?void 0:d.data)?void 0:i.message)||"Failed to delete")}catch(d){r.error("Error deleting item")}})})(null==e?void 0:e.id),children:a.jsx(Ee,{className:"h-4 w-4"})})]})]})})})]})},null==e?void 0:e.id);var s})})})]})})}const Te=C().shape({family_member_name:B().required("Family member name is required").min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),relationship:B().required("Relationship is required"),dob:B().nullable().optional(),address:B().nullable().optional().max(255,"Address cannot exceed 255 characters"),is_dependent:M().default(!1),is_nominee:M().default(!1),nominee_percentage:F().nullable().when("is_nominee",{is:!0,then:e=>e.required("Nominee percentage is required when marked as nominee").min(1,"Percentage must be at least 1%").max(100,"Percentage cannot exceed 100%"),otherwise:e=>e.notRequired()})}),Ue=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function He({title:s="Add Family Member",id:n,edit:c,refetch:o,getDataById:m}){var x;const u=z({}),y=e.useRef(null),{id:w}=i(),{data:_}=W({api:`${null==(x=l)?void 0:x.getFamilyMemberById}`,key:"getFamilyMemberById",options:{enabled:!0}}),S=E({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null},resolver:A(Te)}),D=S.watch("is_nominee");e.useEffect(()=>{var e,s,a,t,l,r,i;c&&_?S.reset({family_member_name:(null==(e=null==_?void 0:_.data)?void 0:e.family_member_name)||"",relationship:(null==(s=null==_?void 0:_.data)?void 0:s.relationship)||"",dob:(null==(a=null==_?void 0:_.data)?void 0:a.dob)||"",address:(null==(t=null==_?void 0:_.data)?void 0:t.address)||"",is_dependent:(null==(l=null==_?void 0:_.data)?void 0:l.is_dependent)||!1,is_nominee:(null==(r=null==_?void 0:_.data)?void 0:r.is_nominee)||!1,nominee_percentage:(null==(i=null==_?void 0:_.data)?void 0:i.nominee_percentage)||null}):S.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,is_nominee:!1,nominee_percentage:null})},[c,_,S]);const k=S.formState.isSubmitting||u.isPending;return a.jsxs(h,{children:[a.jsx(p,{asChild:!0,children:a.jsxs(d,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[a.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),a.jsx(g,{className:"sm:max-w-[500px]",children:a.jsxs(V,{methods:S,onSubmit:S.handleSubmit(async e=>{var s,a,i,d,x,h,p,g,b,j;try{const f={emp_id:t(String(null==(a=null==(s=null==m?void 0:m.data)?void 0:s.data)?void 0:a.id)),family_member_name:e.family_member_name,relationship:e.relationship,dob:e.dob,address:e.address,is_dependent:e.is_dependent||!1,is_nominee:e.is_nominee||!1,nominee_percentage:e.is_nominee?e.nominee_percentage:null};if(c&&n){const e=await u.mutateAsync({api:`${l.updateFamilyMemberById}/${n}`,data:f});(null==(i=e.data)?void 0:i.success)?(r.success((null==(d=null==e?void 0:e.data)?void 0:d.message)||"Family member updated successfully"),null==(x=y.current)||x.click()):r.error((null==(h=e.data)?void 0:h.message)||"Failed to update family member")}else{const e=await u.mutateAsync({api:l.createFamily,data:f});(null==(p=e.data)?void 0:p.success)?(r.success((null==(g=null==e?void 0:e.data)?void 0:g.message)||"Family member added successfully"),null==(b=y.current)||b.click()):r.error((null==(j=e.data)?void 0:j.message)||"Failed to add family member")}S.reset(),null==o||o()}catch(f){r.error("An error occurred while processing your request")}}),children:[a.jsxs(b,{children:[a.jsx(j,{children:s}),a.jsx(f,{children:c?"Update family member information":"Add a new family member"})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(q,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),a.jsx("div",{children:a.jsx(ye,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Ue})}),a.jsx("div",{children:a.jsx(q,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),a.jsx("div",{children:a.jsx(q,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),a.jsx(we,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ae,{name:"is_dependent",label:"Mark as Dependent"}),a.jsx(Ae,{name:"is_nominee",label:"Mark as Nominee"}),D&&a.jsx("div",{className:"ml-6",children:a.jsx(q,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),a.jsxs(v,{className:"mt-5 flex justify-between",children:[a.jsx(N,{asChild:!0,children:a.jsx(d,{variant:"outline",ref:y,children:"Cancel"})}),a.jsx($,{type:"submit",isLoading:k,children:c?"Update":"Save"})]})]})})]})}function ze({id:s,getDataById:i}){var n,c,o,m;const[x,u]=e.useState(""),[h,p]=e.useState(!1),g=W({api:`${l.getAllFamilyDetail}`,key:"getEmployeeFamilyDetails",value:[s],options:{enabled:!0}}),b=z({});return a.jsx("main",{className:"min-h-screen bg-gray-50/50",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),a.jsx(He,{title:h?"Edit Family Member":"Add Family Member",id:s,edit:h,setEdit:p,refetch:g.refetch,getDataById:i})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:g.isLoading?a.jsx(ge,{children:a.jsx(be,{className:"flex h-32 items-center justify-center",children:a.jsx(ve,{})})}):a.jsxs(a.Fragment,{children:[null==(c=null==(n=null==g?void 0:g.data)?void 0:n.data)?void 0:c.map(e=>{return a.jsxs(ge,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[a.jsx(je,{className:"pb-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(le,{className:"h-6 w-6 text-blue-500"}),a.jsxs("div",{children:[a.jsx(fe,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),a.jsx("div",{className:"mt-2 flex items-center gap-2",children:a.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[s]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(d,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ne("Are you sure?","Please confirm",async()=>{var s,a,i;try{const d=await b.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:t(e.toString())}});(null==(s=null==d?void 0:d.data)?void 0:s.success)?(r.success((null==(a=null==d?void 0:d.data)?void 0:a.message)||"Deleted successfully"),g.refetch()):r.error((null==(i=null==d?void 0:d.data)?void 0:i.message)||"Failed to delete")}catch(d){r.error("Error deleting family member")}})})(null==e?void 0:e.id),children:a.jsx(Ee,{className:"h-3.5 w-3.5"})})})]})}),a.jsxs(be,{className:"space-y-4 pt-0",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx(te,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:pe(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),a.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx(ie,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Address:"})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?a.jsx(Ce,{className:"h-4 w-4 text-green-500"}):a.jsx(Pe,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),a.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?a.jsxs(a.Fragment,{children:[a.jsx(Ce,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Pe,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),a.jsx("div",{className:"border-t pt-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx(te,{className:"h-3 w-3"}),a.jsxs("span",{children:["Added on"," ",pe(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var s}),0===(null==(m=null==(o=null==g?void 0:g.data)?void 0:o.data)?void 0:m.length)&&a.jsx(ge,{className:"py-12 text-center",children:a.jsxs(be,{children:[a.jsx(le,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),a.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),a.jsx(d,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}function Ye({userId:s}){const t=w(s);z({});const[l,r]=e.useState([]),[i,d]=e.useState({}),[n,c]=e.useState("");e.useEffect(()=>{var e;(null==t?void 0:t.data)&&r((null==(e=t.data)?void 0:e.data)||[])},[t]);const o=l.filter(e=>e.role_name.toLowerCase().includes(n.toLowerCase())),m=l.filter(e=>e.permission_status).length,x=l.length,u=l.some(e=>e.permission_status);return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),a.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",x," roles enabled"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search roles...",value:n,onChange:e=>c(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:o.map(e=>a.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[a.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&a.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),a.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:e.role_name})]}),a.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[a.jsx("input",{type:"checkbox",checked:e.permission_status,disabled:!0,className:"peer sr-only"}),a.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(i[e.id]||!e.permission_status&&u?"cursor-not-allowed opacity-50":""),children:a.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${i[e.id]?"animate-pulse":""}`,children:i[e.id]&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===o.length&&a.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:a.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',n,'"']})})]})})}function We({userId:s}){const t=_(s);z({});const[l,r]=e.useState([]),[i,d]=e.useState({}),[n,c]=e.useState("");e.useEffect(()=>{var e;(null==t?void 0:t.data)&&r((null==(e=t.data)?void 0:e.data)||[])},[t]);const o=l.filter(e=>e.menu_role_name.toLowerCase().includes(n.toLowerCase())),m=l.filter(e=>e.permission_status).length,x=l.length;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),a.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",x," roles enabled"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search roles...",value:n,onChange:e=>c(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:o.map(e=>a.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[a.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&a.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),a.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:e.menu_role_name})]}),a.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[a.jsx("input",{type:"checkbox",checked:e.permission_status,disabled:!0,className:"peer sr-only"}),a.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(i[e.id]?"cursor-not-allowed opacity-50":""),children:a.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${i[e.id]?"animate-pulse":""}`,children:i[e.id]&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===o.length&&a.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:a.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',n,'"']})})]})})}function Ge({userId:s}){const t=S(s);z({});const[l,r]=e.useState([]),[i,d]=e.useState({}),[n,c]=e.useState("");e.useEffect(()=>{var e;(null==t?void 0:t.data)&&r((null==(e=t.data)?void 0:e.data)||[])},[t]);const o=l.filter(e=>e.ward_name.toString().includes(n)),m=l.filter(e=>e.permission_status).length,x=l.length;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),a.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",x," wards enabled"]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search wards...",value:n,onChange:e=>c(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:o.map(e=>a.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(e.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[a.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",e.id]}),e.permission_status&&a.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),a.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",e.ward_name]})]}),a.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[a.jsx("input",{type:"checkbox",checked:e.permission_status,disabled:!0,className:"peer sr-only"}),a.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(i[e.id]?"cursor-not-allowed opacity-50":""),children:a.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${e.permission_status?"translate-x-5":"translate-x-0"} ${i[e.id]?"animate-pulse":""}`,children:i[e.id]&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},e.id))}),0===o.length&&a.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:a.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',n,'"']})})]})})}function Je({getDataById:s}){var l,r,i,d,c,o,m,u;const[h,p]=e.useState(""),[g,b]=e.useState(!1),[j,f]=e.useState(""),[v,N]=e.useState("workflow"),y=D(t(String(null==(r=null==(l=null==s?void 0:s.data)?void 0:l.data)?void 0:r.id))),w=G({api:null==(i=n)?void 0:i.getUsrByIdAuth,config:{id:j},value:[j],options:{enabled:!!j}}),_=null==(o=null==(c=null==(d=null==w?void 0:w.data)?void 0:d.data)?void 0:c.data)?void 0:o[0],S=[{id:"workflow",label:"Workflow Permission",icon:oe},{id:"permittedRoles",label:" Permitted Roles",icon:me},{id:"ward",label:"Ward Role",icon:ae}];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsxs("div",{children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),a.jsx("div",{className:"flex justify-end gap-4",children:a.jsx("div",{children:a.jsxs(L,{onValueChange:e=>f(e),value:j,children:[a.jsx(R,{className:"h-9 w-full border-2 border-slate-300 bg-slate-50 hover:border-blue-400 focus:ring-2 focus:ring-blue-500 md:w-52",children:a.jsx(O,{placeholder:"Select Module Access"})}),a.jsx(T,{children:null==(u=null==(m=null==y?void 0:y.data)?void 0:m.data)?void 0:u.map(e=>a.jsx(U,{value:e.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:e.module_user_type},e.module_access_id))})]})})})]}),_?a.jsxs("div",{children:[a.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:a.jsx(x,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),a.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:_.id})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:a.jsx(x,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),a.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:_.user_name})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:a.jsx(x,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),a.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:_.name})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:a.jsx(K,{className:"h-5 w-5 text-orange-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),a.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:_.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:a.jsx(Z,{className:"h-5 w-5 text-cyan-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),a.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:_.mobile})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:a.jsx(se,{className:"h-5 w-5 text-indigo-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),a.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:_.user_type})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:a.jsx(se,{className:"h-5 w-5 text-emerald-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),a.jsx("span",{className:"inline-block rounded-full px-3 py-1 text-xs font-medium "+(_.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:_.suspended?"Suspended":"Active"})]})]}),_.photo&&"/"!==_.photo&&a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[a.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:a.jsx(x,{className:"h-5 w-5 text-pink-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),a.jsx("img",{src:_.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})})}),a.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[a.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:a.jsx("div",{className:"flex overflow-x-auto",children:S.map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>N(e.id),className:"flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all "+(v===e.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[a.jsx(s,{className:"h-4 w-4"}),e.label]},e.id)})})}),a.jsxs("div",{className:"p-6",children:["workflow"===v&&a.jsx(Ye,{userId:j}),"permittedRoles"===v&&a.jsx(We,{userId:j}),"ward"===v&&a.jsx(Ge,{userId:j})]})]})]}):a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:a.jsx(se,{className:"h-10 w-10 text-slate-400"})}),a.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),a.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Qe({id:s,getDataById:r}){var i,d,n,o,m,x,u,h,p;const[g,b]=e.useState("calendar"),[j,f]=e.useState(""),v=W({api:`${l.getAllAttendanceByEmpId}?emp_id=${t((null==(d=null==(i=null==r?void 0:r.data)?void 0:i.data)?void 0:d.id.toString())||"")}`,key:"getAllAttendanceByEmpId",value:[null==(o=null==(n=null==r?void 0:r.data)?void 0:n.data)?void 0:o.id],options:{enabled:!!(null==(x=null==(m=null==r?void 0:r.data)?void 0:m.data)?void 0:x.id)}}),N=(null==(u=null==v?void 0:v.data)?void 0:u.data)||[],y=e=>{switch(e){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:a.jsx(Ce,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:a.jsx(xe,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:a.jsx(te,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:a.jsx(Ie,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:a.jsx(Pe,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},w=e=>{if(!e)return"--:--";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},_=e.useMemo(()=>{if(!j.trim())return N;const e=j.toLowerCase();return N.filter(s=>`${s.month} ${s.year}`.toLowerCase().includes(e))},[N,j]),S=_.reduce((e,s)=>(1===s.attendance_status?e.present++:2===s.attendance_status?e.leave++:e.absent++,e.totalHours+=parseInt(s.working_hours||"0"),e.totalDays++,e),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),D=_.reduce((e,s)=>{const a=`${s.month} ${s.year}`;return e[a]||(e[a]=[]),e[a].push(s),e},{}),k={};_.forEach(e=>{const s=`${e.month} ${e.year}`;k[s]||(k[s]={});const a=new Date(e.date).getDate().toString();k[s][a]=e});const E=e.useMemo(()=>{const e=new Set;return N.forEach(s=>{e.add(`${s.month} ${s.year}`)}),Array.from(e).sort((e,s)=>{const[a,t]=e.split(" "),[l,r]=s.split(" "),i=new Date(`${a} 1, ${t}`);return new Date(`${l} 1, ${r}`).getTime()-i.getTime()})},[N]);return a.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[a.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[a.jsx("div",{children:a.jsxs("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:["Attendance Records ",JSON.stringify(null==(p=null==(h=null==r?void 0:r.data)?void 0:h.data)?void 0:p.id)]})}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(Fe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:j,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),j&&a.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Pe,{className:"h-4 w-4"})})]})]}),j&&E.filter(e=>e.toLowerCase().includes(j.toLowerCase())).length>0&&a.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:E.filter(e=>e.toLowerCase().includes(j.toLowerCase())).slice(0,5).map(e=>a.jsx("button",{onClick:()=>f(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:e},e))})]}),a.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[a.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S.present})]}),a.jsx(Ce,{className:"h-10 w-10 text-green-500"})]})}),a.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S.absent})]}),a.jsx(Pe,{className:"h-10 w-10 text-red-500"})]})}),a.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S.leave})]}),a.jsx(xe,{className:"h-10 w-10 text-blue-500"})]})}),a.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S.totalHours})]}),a.jsx(Be,{className:"h-10 w-10 text-purple-500"})]})}),a.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S.totalDays})]}),a.jsx(te,{className:"h-10 w-10 text-indigo-500"})]})})]}),a.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsxs("button",{onClick:()=>b("calendar"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("calendar"===g?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[a.jsx(Ie,{className:"h-4 w-4"}),"Calendar View"]}),a.jsxs("button",{onClick:()=>b("list"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("list"===g?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[a.jsx(c,{className:"h-4 w-4"}),"List View"]})]})}),"calendar"===g&&a.jsx(a.Fragment,{children:Object.entries(k).map(([e,s])=>{const[t,l]=e.split(" "),r=((e,s)=>{const a=new Date(`${e} 1, ${s}`).getMonth();return new Date(parseInt(s),a+1,0).getDate()})(t,l),i=((e,s)=>{const a=new Date(`${e} 1, ${s}`).getMonth();return new Date(parseInt(s),a,1).getDay()})(t,l),d=Array.from({length:r},(e,s)=>s+1),n=Array.from({length:i},(e,s)=>s);return a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[a.jsx(te,{className:"h-5 w-5 text-gray-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e})]}),a.jsx("div",{className:"overflow-hidden rounded-lg bg-white p-6 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>a.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-600",children:e},e)),n.map(e=>a.jsx("div",{className:"p-2"},`empty-${e}`)),d.map(e=>{const t=s[e.toString()],l=t?y(t.attendance_status):null;return a.jsxs("div",{className:`min-h-20 rounded-lg border-2 p-2 transition-all ${t?null==l?void 0:l.color:"border-gray-200 bg-gray-50"} ${t?"hover:shadow-md":""}`,children:[a.jsx("div",{className:"mb-1 text-sm font-semibold text-gray-700",children:e}),t&&l&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:l.iconColor,children:l.icon}),a.jsx("span",{className:"text-xs font-medium",children:l.label})]}),1===t.attendance_status&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-xs text-gray-600",children:["In: ",w(t.emp_in_time)]}),a.jsxs("div",{className:"text-xs text-gray-600",children:["Out: ",w(t.emp_out_time)]}),a.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[t.working_hours,"h"]})]})]})]},e)})]})})]},e)})}),"list"===g&&a.jsx(a.Fragment,{children:Object.entries(D).map(([e,s])=>a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[a.jsx(te,{className:"h-5 w-5 text-gray-600"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e})]}),a.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(e=>{const s=y(e.attendance_status);return a.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[a.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:(t=e.date,new Date(t).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))})}),a.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:a.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${s.color}`,children:[a.jsx("span",{className:s.iconColor,children:s.icon}),s.label]})}),a.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[a.jsx(Be,{className:"h-4 w-4 text-gray-400"}),w(e.emp_in_time)]})}),a.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[a.jsx(Be,{className:"h-4 w-4 text-gray-400"}),w(e.emp_out_time)]})}),a.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.working_hours||"0","h"]})})]},e.id);var t})})]})})})]},e))}),0===_.length&&a.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[a.jsx(te,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),a.jsx("p",{className:"text-lg text-gray-500",children:j?"No attendance records found for the search term":"No attendance records found"}),j&&a.jsx("button",{onClick:()=>f(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const Xe=()=>{var s,t,r,d,n;const[c,o]=e.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:m}=i();e.useEffect(()=>{localStorage.setItem("employeeActiveTab",c)},[c]);const u="45,000",h="18,000",p="13,500",g="76,500",b="5,400",j="7,650",f="63,450",v=[{id:"basic",label:"Basic Details",icon:x},{id:"document",label:"Attached Documents",icon:Se},{id:"family",label:"Family Details",icon:le},{id:"salary",label:"Salary Details",icon:Me},{id:"attendance",label:"Attendance",icon:te},{id:"moduleAccess",label:"Module Access",icon:Ce}],N=W({api:`${null==(s=l)?void 0:s.getEmployeeById}`,key:"getEmployeeById",options:{enabled:!0}});return a.jsx(k,{title:"Employee Management",children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100",children:a.jsx("div",{className:" py-4",children:a.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-xl",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white",children:a.jsx(x,{size:32,className:"text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:null==(r=null==(t=null==N?void 0:N.data)?void 0:t.data)?void 0:r.emp_name}),a.jsxs("p",{className:"text-blue-100",children:["ID: ",null==(n=null==(d=null==N?void 0:N.data)?void 0:d.data)?void 0:n.emp_code]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:a.jsx("div",{className:"flex overflow-x-auto",children:v.map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center gap-2 whitespace-nowrap px-6 py-4 font-semibold transition-all "+(c===e.id?"border-b-4 border-blue-700 bg-white text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"),children:[a.jsx(s,{size:20}),e.label]},e.id)})})}),a.jsxs("div",{className:"p-8",children:["basic"===c&&a.jsx($e,{id:m,getDataById:N}),"document"===c&&a.jsx(Oe,{id:m,getDataById:N}),"family"===c&&a.jsx(ze,{id:m,getDataById:N}),"salary"===c&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[a.jsx(Me,{className:"text-blue-600",size:28}),a.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Breakdown"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border-2 border-green-200 bg-green-50 p-6",children:[a.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-green-800",children:[a.jsx(Ce,{size:24}),"Earnings"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Basic Salary"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:u})]}),a.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"House Rent Allowance (HRA)"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:h})]}),a.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Dearness Allowance (DA)"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:p})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-green-100 px-3 py-3",children:[a.jsx("span",{className:"font-bold text-green-900",children:"Gross Salary"}),a.jsx("span",{className:"text-xl font-bold text-green-900",children:g})]})]})]}),a.jsxs("div",{className:"rounded-lg border-2 border-red-200 bg-red-50 p-6",children:[a.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-red-800",children:[a.jsx(Se,{size:24}),"Deductions"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Provident Fund (PF)"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b})]}),a.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Income Tax (TDS)"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:j})]}),a.jsx("div",{className:"py-3"}),a.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-blue-100 px-3 py-3",children:[a.jsx("span",{className:"font-bold text-blue-900",children:"Net Salary"}),a.jsx("span",{className:"text-xl font-bold text-blue-900",children:f})]})]})]})]}),a.jsx("div",{className:"mt-6 rounded-lg border border-yellow-300 bg-yellow-50 p-4",children:a.jsxs("p",{className:"text-sm text-yellow-900",children:[a.jsx("strong",{children:"Note:"})," Salary details shown are for the current month. For historical records, please contact the Accounts Department."]})})]}),"attendance"===c&&a.jsx(Qe,{id:m,getDataById:N}),"moduleAccess"===c&&a.jsx(Je,{getDataById:N})]})]})})})})};export{Xe as default};
