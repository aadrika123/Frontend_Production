import{j as e,v as be,r as y,o as ze,e as X,h as L,z as D,s as re,B as K,q as Ye,L as Ge}from"./index-Df4ChAN-.js";import{b as Je,g as Ke,d as Xe,U as W,c as Qe,h as Ze,i as Be,j as Ie,k as es,P as ss}from"./index-DjNjGvXo.js";import{u as as,C as ts,a as xe,o as he,c as pe,e as je,f as te,b as j,g as ls,d as fe}from"./yup-pPl0eVQc.js";import{F as ue,B as ge}from"./datetime-picker-EqBIIAIP.js";import{R as S}from"./RHFTextField-C5PfVKXx.js";import{S as rs,a as ns,b as is,c as ds,f as cs}from"./select-DZKz6XPY.js";import{u as z,c as os,b as B,a as ms}from"./useCustomQuery-BBKf_waA.js";import{B as Ne}from"./briefcase-S-Dqqc17.js";import{H as ae,P as oe,M as Ee,R as xs,S as de}from"./RHFUploadFiled-B0f6GP0o.js";import{B as ke}from"./building-2-C13TmP2w.js";import{C as U}from"./calendar-CMNTAmai.js";import{U as Q}from"./users-axBRK0bb.js";import{H as ye,M as H,C as G,u as hs,D as Pe,a as Fe,b as Me,c as De,d as $e,e as Ve,f as qe,g as Te,F as ps,h as us,E as gs,W as bs,U as js,i as ve,j as we}from"./usePdfValidator-DMt4rQmp.js";import{C as fs}from"./circle-alert-VIy_vjY6.js";import{H as _e,C as Z}from"./house-2W-UTQE3.js";import{C as I,c as le,h as me,a as Ns,d as ys}from"./card-CW8LZ2r1.js";import{S as Re,a as Le}from"./Spinner-CyN74T25.js";import{C as Oe}from"./index-Pa9dQpGY.js";import{R as He}from"./RHFSelectField-Cy0QtYHL.js";import{P as Ue}from"./plus-BVJr4s_q.js";import{F as ee}from"./file-text-DUxWW8Vx.js";import{E as vs}from"./eye-DyUxIdcn.js";import{T as We}from"./trash-2-DOuI6ik9.js";import{R as Se}from"./RHFCheckbox-DRpCJmEz.js";import{C as se,S as ws}from"./search-V3vfnyKc.js";import{C as ce}from"./clock-BxgzxCOp.js";import{D as Ce}from"./dollar-sign-CH5hBXbp.js";import"./check-BzewUJFq.js";const J=({children:u,name:n,label:m,selectedText:C,className:o,data:c,initialValue:h,initialValueText:g,isRequired:d,isHookForm:i=!0,...f})=>{const{control:s,setValue:a}=as();return e.jsx(e.Fragment,{children:i?e.jsx(ts,{name:n??"",control:s,render:({field:{ref:M,...t},fieldState:{error:A}})=>e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-gray-700 dark:text-gray-200 ",children:[m," ",d&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{...t,onChange:E=>{var r;t.onChange(E),C&&a(C,(r=c==null?void 0:c.find(x=>x.value==E.target.value))==null?void 0:r.label)},ref:M,className:be("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",A?"border-red-400":null,o),...f,children:[e.jsx("option",{value:"",children:"Select"}),c==null?void 0:c.map((E,r)=>e.jsx("option",{value:E.value,children:E.label},r+1))]}),A&&e.jsx("span",{className:"text-xs text-red-400",children:A==null?void 0:A.message})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-gray-700 dark:text-gray-200 ",children:[m," ",d&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{className:be("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",o),...f,children:[e.jsx("option",{value:"",children:"Select"}),c==null?void 0:c.map((M,t)=>e.jsx("option",{value:M.value,children:M.label},t+1))]})]})})},Ae=()=>{(document.documentElement||document.body).scrollTo({top:0,behavior:"smooth"})},_s=pe().shape({emp_type_id:te().integer().required().label("Employee Type"),emp_code:j().max(50).required().label("Employee Code"),emp_name:j().max(100).required().label("Employee Name"),gender:j().oneOf(["male","female","other"]).required().label("Gender"),dob:je().required().label("Date of Birth"),marital_status:j().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:j().max(50).required().label("Religion"),emp_blood_group:j().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:j().max(50).required().label("Health Status").required(),contact_no:j().max(10).required().label("Contact Number"),emergency_contact_no:j().max(10).optional().label("Emergency Contact"),email:j().email().max(100).required().label("Email"),emp_present_address:j().required().label("Present Address"),present_post_office:j().max(100).required().label("Present Post Office"),present_pin_code:j().max(6).required().label("Present PIN Code"),present_police_station:j().max(100).optional().label("Present Police Station"),present_state:j().max(100).required().label("Present State"),present_district:j().max(100).required().label("Present District"),emp_permanent_address:j().required().label("Permanent Address"),permanent_post_office:j().max(100).required().label("Permanent Post Office"),permanent_pin_code:j().max(6).required().label("Permanent PIN Code"),permanent_police_station:j().max(100).optional().label("Permanent Police Station"),permanent_state:j().max(100).required().label("Permanent State"),permanent_district:j().max(100).required().label("Permanent District"),aadhaar_no:j().max(12).optional().label("Aadhaar Number"),pan_no:j().max(10).optional().label("PAN Number"),uan_no:j().max(12).optional().label("UAN Number"),esi_no:j().max(17).optional().label("ESI Number"),passport_no:j().max(20).optional().label("Passport Number"),driving_license_no:j().max(20).optional().label("Driving License"),department_id:te().integer().required().label("Department"),department_name:j().label("Department Name").optional(),designation_id:te().integer().required().label("Designation"),date_of_joining:je().required().label("Date of Joining")});function Ss({id:u,getDataById:n}){var E,r,x,P,F,N;const[m,C]=y.useState(!1),o=z({});ze();const c=Je(),h=Ke(),g=Xe(),d=y.useMemo(()=>{var $;if(!(($=n.data)!=null&&$.data))return{};const{ulb_id:k,status:V,created_at:v,updated_at:_,id:w,emp_image:l,...p}=n.data.data,b={};return Object.entries(p).forEach(([q,R])=>{b[q]=R===null?void 0:R}),b},[n.data]),i=xe({defaultValues:d,resolver:he(_s)}),f=async k=>{var V,v,_,w,l,p;try{const b=await o.mutateAsync({api:`${(V=L)==null?void 0:V.updateEmployeeById}`,data:{id:X(((_=(v=n==null?void 0:n.data)==null?void 0:v.data)==null?void 0:_.id.toString())||""),...k}});(w=b.data)!=null&&w.success?(D.success((l=b==null?void 0:b.data)==null?void 0:l.message),n.refetch(),Ae()):D.error(((p=b.data)==null?void 0:p.message)||"Employee not created successfully"),Ae()}catch(b){console.log(b),D.error("An error occurred while creating employee")}},s=k=>{if(C(k),k){const V=i.getValues("emp_present_address"),v=i.getValues("present_post_office"),_=i.getValues("present_pin_code"),w=i.getValues("present_police_station"),l=i.getValues("present_state"),p=i.getValues("present_district");i.setValue("emp_permanent_address",V),i.setValue("permanent_post_office",v),i.setValue("permanent_pin_code",_),i.setValue("permanent_police_station",w),i.setValue("permanent_state",l),i.setValue("permanent_district",p)}else i.setValue("emp_permanent_address",""),i.setValue("permanent_post_office",""),i.setValue("permanent_pin_code",""),i.setValue("permanent_police_station",""),i.setValue("permanent_state",""),i.setValue("permanent_district","")};y.useEffect(()=>{n.data&&i.reset(d)},[n.data,i]);const a=[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}],M=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],t=[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}],A=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}];return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:e.jsx(W,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),e.jsxs(ue,{methods:i,onSubmit:i.handleSubmit(f),children:[e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Ne,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(J,{name:"emp_type_id",data:((r=(E=c==null?void 0:c.data)==null?void 0:E.data)==null?void 0:r.map(k=>({label:String(k.emp_type),value:String(k.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ke,{className:"h-4 w-4 text-gray-400"}),"Department"]}),e.jsx(J,{name:"department_id",selectedText:"department_name",data:((P=(x=h==null?void 0:h.data)==null?void 0:x.data)==null?void 0:P.map(k=>({label:String(k.department_name),value:String(k.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),e.jsx(J,{name:"designation_id",data:((N=(F=g==null?void 0:g.data)==null?void 0:F.data)==null?void 0:N.map(k=>({label:String(k.designation_name),value:String(k.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(U,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),e.jsx(S,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(W,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(W,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),e.jsx(S,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),e.jsx(J,{name:"gender",data:M})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(U,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),e.jsx(S,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),e.jsx(J,{name:"marital_status",data:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),e.jsx(S,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),e.jsx(J,{name:"emp_blood_group",data:A})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),e.jsx(J,{name:"emp_health_status",data:a})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(oe,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),e.jsx(S,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(fs,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),e.jsx(S,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ee,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),e.jsx(S,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),e.jsx(S,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(S,{name:"present_post_office",placeholder:"Enter Post Office"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(S,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(S,{name:"present_police_station",placeholder:"Enter Police Station"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(S,{name:"present_district",placeholder:"Enter District"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(S,{name:"present_state",placeholder:"Enter State"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:m,onChange:k=>s(k.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(_e,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),e.jsx(S,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(S,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(S,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(S,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(S,{name:"permanent_district",placeholder:"Enter District",disabled:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(S,{name:"permanent_state",placeholder:"Enter State",disabled:m})]})]})})]})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(G,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),e.jsx(S,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),e.jsx(S,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),e.jsx(S,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),e.jsx(S,{name:"esi_no",placeholder:"Enter ESI Number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),e.jsx(S,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),e.jsx(S,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(ge,{isLoading:i.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4"}),"Update Employee"]})})})]})})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const Cs=pe().shape({doc_name:j().required("Document Name is required"),doc_type_id:j().required("Document Type is required"),doc_path:ls().required("Document is required").test("fileRequired","Document is required",u=>u instanceof File||typeof u=="string"&&u!==""),description:j().required("Description is required")});function As({title:u,id:n,edit:m,refetch:C,getDataById:o}){var r,x,P,F,N,k,V;const{validateFile:c,reset:h}=hs({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),g=z({}),d=os({}),i=y.useRef(null),f=Qe(),{data:s}=B({api:`${(r=L)==null?void 0:r.updateEmployeeById}/${n}`,key:"getDocumentById",options:{enabled:m}}),a=xe({defaultValues:{doc_type_id:((x=s==null?void 0:s.data)==null?void 0:x.doc_type_id)||"",doc_name:((P=s==null?void 0:s.data)==null?void 0:P.doc_name)||"",doc_path:((F=s==null?void 0:s.data)==null?void 0:F.doc_path)||"",description:((N=s==null?void 0:s.data)==null?void 0:N.description)||""},resolver:he(Cs)}),{id:M}=re(),t=async v=>{var w;const _=(w=v.target.files)==null?void 0:w[0];if(_&&(_==null?void 0:_.type)==="application/pdf"){const l=await c(_);l.isValid?(D.success(l.message),h(),a.setValue("doc_path",_)):(D.error(l.message),v.target.value="",a.resetField("doc_path"))}else _&&a.setValue("doc_path",_)},A=async v=>{var _,w,l,p,b,$;try{const q=new FormData;if(q.append("emp_id",X(String((w=(_=o==null?void 0:o.data)==null?void 0:_.data)==null?void 0:w.id))),q.append("doc_type_id",v.doc_type_id),q.append("doc_name",v.doc_name),q.append("description",v.description),q.append("file",v==null?void 0:v.doc_path),m&&v)console.log("Editing document with data:",v);else{const R=await g.mutateAsync({api:L.uploadEmployeeDocument,data:q});(l=R.data)!=null&&l.success?(D.success((p=R==null?void 0:R.data)==null?void 0:p.message),(b=i.current)==null||b.click()):D.error((($=R.data)==null?void 0:$.message)||"Document not attached successfully"),a.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}C()}catch(q){console.log("Submit Error:",q),D.error("An error occurred while processing your request")}};y.useEffect(()=>{var v,_,w,l;m&&s?a.reset({doc_type_id:(v=s==null?void 0:s.data)==null?void 0:v.doc_type_id,doc_name:(_=s==null?void 0:s.data)==null?void 0:_.doc_name,doc_path:(w=s==null?void 0:s.data)==null?void 0:w.doc_path,description:((l=s==null?void 0:s.data)==null?void 0:l.description)??""}):a.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[m,s]),y.useEffect(()=>{var v,_,w,l;(a==null?void 0:a.watch("doc_name"))==="Aadhaar Card"?a.setValue("description",((_=(v=o==null?void 0:o.data)==null?void 0:v.data)==null?void 0:_.aadhaar_no)||""):(a==null?void 0:a.watch("doc_name"))==="Pan Card"?a.setValue("description",((l=(w=o==null?void 0:o.data)==null?void 0:w.data)==null?void 0:l.pan_no)||""):a.setValue("description","")},[a==null?void 0:a.watch("doc_name")]);const E=a.formState.isSubmitting||d.isPending;return e.jsxs(Pe,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(K,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(Me,{className:"sm:max-w-[425px]",children:e.jsxs(ue,{methods:a,onSubmit:a.handleSubmit(A),children:[e.jsxs(De,{children:[e.jsx($e,{children:u}),e.jsx(Ve,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(He,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:((V=(k=f==null?void 0:f.data)==null?void 0:k.data)==null?void 0:V.map(v=>({label:String(v.doc_name),value:String(v.id)})))||[]})}),e.jsx("div",{children:e.jsx(xs,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:t,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(S,{label:`${(a==null?void 0:a.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(a==null?void 0:a.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx(Re,{})]}),e.jsxs(qe,{className:"mt-5 flex justify-between",children:[e.jsx(Te,{asChild:!0,children:e.jsx(K,{variant:"outline",ref:i,children:"Cancel"})}),e.jsx(ge,{type:"submit",isLoading:E,children:"Save changes"})]})]})})]})}function Es({id:u,getDataById:n}){var M,t,A,E;const[m,C]=y.useState(""),[o,c]=y.useState(!1),{id:h}=re(),g=B({api:`${L.getEmployeeDocuments}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),d=z({}),i=async r=>{Oe("Are you sure?","Please confirm",async()=>{var x,P,F;try{const N=await d.mutateAsync({api:`${L.deleteEmployeeDocument}`,data:{id:X(r.toString())}});(x=N==null?void 0:N.data)!=null&&x.success?(D.success(((P=N==null?void 0:N.data)==null?void 0:P.message)||"Deleted successfully"),g.refetch()):D.error(((F=N==null?void 0:N.data)==null?void 0:F.message)||"Failed to delete")}catch(N){D.error("Error deleting item"),console.error("Delete Error:",N)}})},f=r=>{var x;return((x=r.split(".").pop())==null?void 0:x.toLowerCase())||""},s=r=>{const x=f(r);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(x)},a=r=>f(r)==="pdf";return e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),e.jsx(As,{title:o?"Edit Document":"Attach Document",id:u,edit:o,setEdit:c,refetch:g.refetch,getDataById:n})]}),g.isLoading?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(Le,{})}):e.jsx(e.Fragment,{children:((t=(M=g==null?void 0:g.data)==null?void 0:M.data)==null?void 0:t.length)===0?e.jsx(I,{className:"border-2 border-dashed border-gray-300 bg-white",children:e.jsxs(le,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:e.jsx(ee,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mt-2 text-center text-gray-600",children:m?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):e.jsx("div",{className:"space-y-4",children:(E=(A=g==null?void 0:g.data)==null?void 0:A.data)==null?void 0:E.map(r=>e.jsx(I,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[s(r==null?void 0:r.doc_path)?e.jsx("img",{src:r.doc_path,alt:(r==null?void 0:r.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:x=>{var P,F;x.currentTarget.style.display="none",(F=(P=x.currentTarget.parentElement)==null?void 0:P.querySelector(".fallback-icon"))==null||F.classList.remove("hidden")}}):a(r==null?void 0:r.doc_path)?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:e.jsx(ps,{className:"h-12 w-12 text-red-600"})})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:e.jsx(ee,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:e.jsx(ee,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("div",{className:"absolute bottom-1 left-1",children:e.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:f(r==null?void 0:r.doc_path)||"file"})}),e.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[e.jsx("a",{href:r.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:e.jsx(vs,{className:"h-3 w-3"})}),e.jsx("a",{href:r.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:e.jsx(us,{className:"h-3 w-3"})})]})})]}),e.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(r==null?void 0:r.doc_name)||"Document"}),e.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(r==null?void 0:r.description)||"No description available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"whitespace-nowrap",children:me(r==null?void 0:r.created_at).format("DD MMM YYYY")})]}),e.jsxs("a",{href:r.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[e.jsx(gs,{className:"h-4 w-4"}),"Open"]}),e.jsx(K,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>i(r==null?void 0:r.id),children:e.jsx(We,{className:"h-4 w-4"})})]})]})})})]})},r==null?void 0:r.id))})})]})})}const ks=pe().shape({family_member_name:j().required("Family member name is required"),relationship:j().required("Relationship is required"),dob:j().required("Date of birth is required"),address:j().required("Address is required"),is_dependent:fe().default(!1),isNominee:fe().default(!1),nominee_percentage:te().nullable().when("isNominee",{is:!0,then:u=>u.required("Nominee percentage is required when marked as nominee").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),otherwise:u=>u.notRequired()})}),Ps=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function Fs({title:u="Add Family Member",id:n,edit:m,refetch:C,getDataById:o}){var M;const c=z({}),h=y.useRef(null),{id:g}=re(),{data:d}=B({api:`${(M=L)==null?void 0:M.getFamilyMemberById}`,key:"getFamilyMemberById",options:{enabled:!0}}),i=xe({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null},resolver:he(ks)}),f=i.watch("isNominee"),s=async t=>{var A,E,r,x,P,F,N,k,V,v;try{const _={emp_id:X(String((E=(A=o==null?void 0:o.data)==null?void 0:A.data)==null?void 0:E.id)),family_member_name:t.family_member_name,relationship:t.relationship,dob:t.dob,address:t.address,is_dependent:t.is_dependent||!1,isNominee:t.isNominee||!1,nominee_percentage:t.isNominee?t.nominee_percentage:null};if(m&&n){const w=await c.mutateAsync({api:`${L.updateFamilyMemberById}/${n}`,data:_});(r=w.data)!=null&&r.success?(D.success(((x=w==null?void 0:w.data)==null?void 0:x.message)||"Family member updated successfully"),(P=h.current)==null||P.click()):D.error(((F=w.data)==null?void 0:F.message)||"Failed to update family member")}else{const w=await c.mutateAsync({api:L.createFamily,data:_});(N=w.data)!=null&&N.success?(D.success(((k=w==null?void 0:w.data)==null?void 0:k.message)||"Family member added successfully"),(V=h.current)==null||V.click()):D.error(((v=w.data)==null?void 0:v.message)||"Failed to add family member")}i.reset(),C==null||C()}catch(_){console.error("Submit Error:",_),D.error("An error occurred while processing your request")}};y.useEffect(()=>{var t,A,E,r,x,P,F;m&&d?i.reset({family_member_name:((t=d==null?void 0:d.data)==null?void 0:t.family_member_name)||"",relationship:((A=d==null?void 0:d.data)==null?void 0:A.relationship)||"",dob:((E=d==null?void 0:d.data)==null?void 0:E.dob)||"",address:((r=d==null?void 0:d.data)==null?void 0:r.address)||"",is_dependent:((x=d==null?void 0:d.data)==null?void 0:x.is_dependent)||!1,isNominee:((P=d==null?void 0:d.data)==null?void 0:P.isNominee)||!1,nominee_percentage:((F=d==null?void 0:d.data)==null?void 0:F.nominee_percentage)||null}):i.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null})},[m,d]);const a=i.formState.isSubmitting||c.isPending;return e.jsxs(Pe,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(K,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),e.jsx(Me,{className:"sm:max-w-[500px]",children:e.jsxs(ue,{methods:i,onSubmit:i.handleSubmit(s),children:[e.jsxs(De,{children:[e.jsx($e,{children:u}),e.jsx(Ve,{children:m?"Update family member information":"Add a new family member"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(S,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx("div",{children:e.jsx(He,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Ps})}),e.jsx("div",{children:e.jsx(S,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),e.jsx("div",{children:e.jsx(S,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(Re,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{name:"is_dependent",label:"Mark as Dependent"}),e.jsx(Se,{name:"isNominee",label:"Mark as Nominee"}),f&&e.jsx("div",{className:"ml-6",children:e.jsx(S,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),e.jsxs(qe,{className:"mt-5 flex justify-between",children:[e.jsx(Te,{asChild:!0,children:e.jsx(K,{variant:"outline",ref:h,children:"Cancel"})}),e.jsx(ge,{type:"submit",isLoading:a,children:m?"Update":"Save"})]})]})})]})}function Ms({id:u,getDataById:n}){var f,s,a,M;const[m,C]=y.useState(""),[o,c]=y.useState(!1),h=B({api:`${L.getAllFamilyDetail}`,key:"getEmployeeFamilyDetails",value:[u],options:{enabled:!0}}),g=z({}),d=async t=>{Oe("Are you sure?","Please confirm",async()=>{var A,E,r;try{const x=await g.mutateAsync({api:`${L.deleteFamilyMember}`,data:{id:X(t.toString())}});(A=x==null?void 0:x.data)!=null&&A.success?(D.success(((E=x==null?void 0:x.data)==null?void 0:E.message)||"Deleted successfully"),h.refetch()):D.error(((r=x==null?void 0:x.data)==null?void 0:r.message)||"Failed to delete")}catch(x){D.error("Error deleting family member"),console.error("Delete Error:",x)}})},i=t=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[t]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-screen bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),e.jsx(Fs,{title:o?"Edit Family Member":"Add Family Member",id:u,edit:o,setEdit:c,refetch:h.refetch,getDataById:n})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:h.isLoading?e.jsx(I,{children:e.jsx(le,{className:"flex h-32 items-center justify-center",children:e.jsx(Le,{})})}):e.jsxs(e.Fragment,{children:[(s=(f=h==null?void 0:h.data)==null?void 0:f.data)==null?void 0:s.map(t=>e.jsxs(I,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(Ns,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(ys,{className:"text-lg font-semibold text-gray-900",children:t==null?void 0:t.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${i(t==null?void 0:t.relationship)}`,children:t==null?void 0:t.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>d(t==null?void 0:t.id),children:e.jsx(We,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(le,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:me(t==null?void 0:t.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t==null?void 0:t.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[t!=null&&t.is_dependent?e.jsx(Z,{className:"h-4 w-4 text-green-500"}):e.jsx(se,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:t!=null&&t.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",t==null?void 0:t.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",me(t==null?void 0:t.created_at).format("DD-MM-YYYY")]})]})})]})]},t==null?void 0:t.id)),((M=(a=h==null?void 0:h.data)==null?void 0:a.data)==null?void 0:M.length)===0&&e.jsx(I,{className:"py-12 text-center",children:e.jsxs(le,{children:[e.jsx(Q,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(K,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}function Ds({userId:u}){const n=Ze(u);z({});const[m,C]=y.useState([]),[o,c]=y.useState({}),[h,g]=y.useState("");console.log("permittedRoleAuthData",n),y.useEffect(()=>{var a;n!=null&&n.data&&C(((a=n.data)==null?void 0:a.data)||[])},[n]);const d=m.filter(a=>a.role_name.toLowerCase().includes(h.toLowerCase())),i=m.filter(a=>a.permission_status).length,f=m.length,s=m.some(a=>a.permission_status);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[i," of ",f," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:h,onChange:a=>g(a.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(a=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${a.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",a.id]}),a.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:a.role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:a.permission_status,disabled:!0,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${o[a.id]||!a.permission_status&&s?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${a.permission_status?"translate-x-5":"translate-x-0"} ${o[a.id]?"animate-pulse":""}`,children:o[a.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},a.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',h,'"']})})]})})}function $s({userId:u}){const n=Be(u);z({});const[m,C]=y.useState([]),[o,c]=y.useState({}),[h,g]=y.useState("");y.useEffect(()=>{var s;n!=null&&n.data&&C(((s=n.data)==null?void 0:s.data)||[])},[n]);const d=m.filter(s=>s.menu_role_name.toLowerCase().includes(h.toLowerCase())),i=m.filter(s=>s.permission_status).length,f=m.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[i," of ",f," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:h,onChange:s=>g(s.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(s=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:s.menu_role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:s.permission_status,disabled:!0,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${o[s.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${o[s.id]?"animate-pulse":""}`,children:o[s.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',h,'"']})})]})})}function Vs({userId:u}){const n=Ie(u);z({});const[m,C]=y.useState([]),[o,c]=y.useState({}),[h,g]=y.useState("");y.useEffect(()=>{var s;n!=null&&n.data&&C(((s=n.data)==null?void 0:s.data)||[])},[n]);const d=m.filter(s=>s.ward_name.toString().includes(h)),i=m.filter(s=>s.permission_status).length,f=m.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[i," of ",f," wards enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search wards...",value:h,onChange:s=>g(s.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(s=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",s.ward_name]})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:s.permission_status,disabled:!0,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${o[s.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${o[s.id]?"animate-pulse":""}`,children:o[s.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',h,'"']})})]})})}function qs({getDataById:u}){var M,t,A,E,r,x,P,F;const[n,m]=y.useState(""),[C,o]=y.useState(!1),[c,h]=y.useState(""),[g,d]=y.useState("workflow"),i=es(X(String((t=(M=u==null?void 0:u.data)==null?void 0:M.data)==null?void 0:t.id))),f=ms({api:(A=Ye)==null?void 0:A.getUsrByIdAuth,config:{id:c},value:[c],options:{enabled:!!c}}),s=(x=(r=(E=f==null?void 0:f.data)==null?void 0:E.data)==null?void 0:r.data)==null?void 0:x[0],a=[{id:"workflow",label:"Workflow Permission",icon:bs},{id:"permittedRoles",label:" Permitted Roles",icon:js},{id:"ward",label:"Ward Role",icon:ke}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx("div",{children:e.jsxs(rs,{onValueChange:N=>h(N),value:c,children:[e.jsx(ns,{className:"h-9 w-full border-2 border-slate-300 bg-slate-50 hover:border-blue-400 focus:ring-2 focus:ring-blue-500 md:w-52",children:e.jsx(is,{placeholder:"Select Module Access"})}),e.jsx(ds,{children:(F=(P=i==null?void 0:i.data)==null?void 0:P.data)==null?void 0:F.map(N=>e.jsx(cs,{value:N.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:N.module_user_type},N.module_access_id))})]})})})]}),s?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(W,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:s.id})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:e.jsx(W,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:s.user_name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(W,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:s.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(Ee,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:e.jsx(oe,{className:"h-5 w-5 text-cyan-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:s.mobile})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(de,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),e.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:s.user_type})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(de,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium ${s.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:s.suspended?"Suspended":"Active"})]})]}),s.photo&&s.photo!=="/"&&e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:e.jsx(W,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),e.jsx("img",{src:s.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})})}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:a.map(N=>{const k=N.icon;return e.jsxs("button",{onClick:()=>d(N.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all ${g===N.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:[e.jsx(k,{className:"h-4 w-4"}),N.label]},N.id)})})}),e.jsxs("div",{className:"p-6",children:[g==="workflow"&&e.jsx(Ds,{userId:c}),g==="permittedRoles"&&e.jsx($s,{userId:c}),g==="ward"&&e.jsx(Vs,{userId:c})]})]})]}):e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:e.jsx(de,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Ts({id:u,getDataById:n}){var x,P,F,N,k,V,v,_,w;const[m,C]=y.useState("calendar"),[o,c]=y.useState(""),h=B({api:`${L.getAllAttendanceByEmpId}?emp_id=${X(((P=(x=n==null?void 0:n.data)==null?void 0:x.data)==null?void 0:P.id.toString())||"")}`,key:"getAllAttendanceByEmpId",value:[(N=(F=n==null?void 0:n.data)==null?void 0:F.data)==null?void 0:N.id],options:{enabled:!!((V=(k=n==null?void 0:n.data)==null?void 0:k.data)!=null&&V.id)}}),g=((v=h==null?void 0:h.data)==null?void 0:v.data)||[],d=l=>{switch(l){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:e.jsx(Z,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:e.jsx(ve,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:e.jsx(U,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:e.jsx(we,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:e.jsx(se,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},i=l=>new Date(l).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),f=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"--:--",s=y.useMemo(()=>{if(!o.trim())return g;const l=o.toLowerCase();return g.filter(p=>`${p.month} ${p.year}`.toLowerCase().includes(l))},[g,o]),a=s.reduce((l,p)=>(p.attendance_status===1?l.present++:p.attendance_status===2?l.leave++:l.absent++,l.totalHours+=parseInt(p.working_hours||"0"),l.totalDays++,l),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),M=s.reduce((l,p)=>{const b=`${p.month} ${p.year}`;return l[b]||(l[b]=[]),l[b].push(p),l},{}),t={};s.forEach(l=>{const p=`${l.month} ${l.year}`;t[p]||(t[p]={});const b=new Date(l.date).getDate().toString();t[p][b]=l});const A=(l,p)=>{const b=new Date(`${l} 1, ${p}`).getMonth();return new Date(parseInt(p),b+1,0).getDate()},E=(l,p)=>{const b=new Date(`${l} 1, ${p}`).getMonth();return new Date(parseInt(p),b,1).getDay()},r=y.useMemo(()=>{const l=new Set;return g.forEach(p=>{l.add(`${p.month} ${p.year}`)}),Array.from(l).sort((p,b)=>{const[$,q]=p.split(" "),[R,ne]=b.split(" "),ie=new Date(`${$} 1, ${q}`);return new Date(`${R} 1, ${ne}`).getTime()-ie.getTime()})},[g]);return e.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[e.jsx("div",{children:e.jsxs("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:["Attendance Records ",JSON.stringify((w=(_=n==null?void 0:n.data)==null?void 0:_.data)==null?void 0:w.id)]})}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(ws,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:o,onChange:l=>c(l.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),o&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"h-4 w-4"})})]})]}),o&&r.filter(l=>l.toLowerCase().includes(o.toLowerCase())).length>0&&e.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:r.filter(l=>l.toLowerCase().includes(o.toLowerCase())).slice(0,5).map(l=>e.jsx("button",{onClick:()=>c(l),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:l},l))})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[e.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:a.present})]}),e.jsx(Z,{className:"h-10 w-10 text-green-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:a.absent})]}),e.jsx(se,{className:"h-10 w-10 text-red-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:a.leave})]}),e.jsx(ve,{className:"h-10 w-10 text-blue-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:a.totalHours})]}),e.jsx(ce,{className:"h-10 w-10 text-purple-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:a.totalDays})]}),e.jsx(U,{className:"h-10 w-10 text-indigo-500"})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>C("calendar"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${m==="calendar"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(we,{className:"h-4 w-4"}),"Calendar View"]}),e.jsxs("button",{onClick:()=>C("list"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${m==="list"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Ge,{className:"h-4 w-4"}),"List View"]})]})}),m==="calendar"&&e.jsx(e.Fragment,{children:Object.entries(t).map(([l,p])=>{const[b,$]=l.split(" "),q=A(b,$),R=E(b,$),ne=Array.from({length:q},(O,T)=>T+1),ie=Array.from({length:R},(O,T)=>T);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l})]}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(O=>e.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-600",children:O},O)),ie.map(O=>e.jsx("div",{className:"p-2"},`empty-${O}`)),ne.map(O=>{const T=p[O.toString()],Y=T?d(T.attendance_status):null;return e.jsxs("div",{className:`min-h-20 rounded-lg border-2 p-2 transition-all ${T?Y==null?void 0:Y.color:"border-gray-200 bg-gray-50"} ${T?"hover:shadow-md":""}`,children:[e.jsx("div",{className:"mb-1 text-sm font-semibold text-gray-700",children:O}),T&&Y&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:Y.iconColor,children:Y.icon}),e.jsx("span",{className:"text-xs font-medium",children:Y.label})]}),T.attendance_status===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["In: ",f(T.emp_in_time)]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Out: ",f(T.emp_out_time)]}),e.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[T.working_hours,"h"]})]})]})]},O)})]})})]},l)})}),m==="list"&&e.jsx(e.Fragment,{children:Object.entries(M).map(([l,p])=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l})]}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(b=>{const $=d(b.attendance_status);return e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i(b.date)})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${$.color}`,children:[e.jsx("span",{className:$.iconColor,children:$.icon}),$.label]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(ce,{className:"h-4 w-4 text-gray-400"}),f(b.emp_in_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(ce,{className:"h-4 w-4 text-gray-400"}),f(b.emp_out_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[b.working_hours||"0","h"]})})]},b.id)})})]})})})]},l))}),s.length===0&&e.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[e.jsx(U,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg text-gray-500",children:o?"No attendance records found for the search term":"No attendance records found"}),o&&e.jsx("button",{onClick:()=>c(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const xa=()=>{var h,g,d,i,f;const[u,n]=y.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:m}=re();y.useEffect(()=>{localStorage.setItem("employeeActiveTab",u)},[u]);const C={basicSalary:"45,000",hra:"18,000",da:"13,500",grossSalary:"76,500",pf:"5,400",tax:"7,650",netSalary:"63,450"},o=[{id:"basic",label:"Basic Details",icon:W},{id:"document",label:"Attached Documents",icon:ee},{id:"family",label:"Family Details",icon:Q},{id:"salary",label:"Salary Details",icon:Ce},{id:"attendance",label:"Attendance",icon:U},{id:"moduleAccess",label:"Module Access",icon:Z}],c=B({api:`${(h=L)==null?void 0:h.getEmployeeById}`,key:"getEmployeeById",options:{enabled:!0}});return e.jsx(ss,{title:"Employee Management",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100",children:e.jsx("div",{className:" py-4",children:e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white",children:e.jsx(W,{size:32,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:(d=(g=c==null?void 0:c.data)==null?void 0:g.data)==null?void 0:d.emp_name}),e.jsxs("p",{className:"text-blue-100",children:["ID: ",(f=(i=c==null?void 0:c.data)==null?void 0:i.data)==null?void 0:f.emp_code]})]})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:o.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>n(s.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 font-semibold transition-all ${u===s.id?"border-b-4 border-blue-700 bg-white text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"}`,children:[e.jsx(a,{size:20}),s.label]},s.id)})})}),e.jsxs("div",{className:"p-8",children:[u==="basic"&&e.jsx(Ss,{id:m,getDataById:c}),u==="document"&&e.jsx(Es,{id:m,getDataById:c}),u==="family"&&e.jsx(Ms,{id:m,getDataById:c}),u==="salary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx(Ce,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Breakdown"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border-2 border-green-200 bg-green-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-green-800",children:[e.jsx(Z,{size:24}),"Earnings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Basic Salary"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C.basicSalary})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"House Rent Allowance (HRA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C.hra})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Dearness Allowance (DA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C.da})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-green-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-green-900",children:"Gross Salary"}),e.jsx("span",{className:"text-xl font-bold text-green-900",children:C.grossSalary})]})]})]}),e.jsxs("div",{className:"rounded-lg border-2 border-red-200 bg-red-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-red-800",children:[e.jsx(ee,{size:24}),"Deductions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Provident Fund (PF)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C.pf})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Income Tax (TDS)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:C.tax})]}),e.jsx("div",{className:"py-3"}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-blue-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"Net Salary"}),e.jsx("span",{className:"text-xl font-bold text-blue-900",children:C.netSalary})]})]})]})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-yellow-300 bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Note:"})," Salary details shown are for the current month. For historical records, please contact the Accounts Department."]})})]}),u==="attendance"&&e.jsx(Ts,{id:m,getDataById:c}),u==="moduleAccess"&&e.jsx(qs,{getDataById:c})]})]})})})})};export{xa as default};
