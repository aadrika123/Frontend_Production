import{g as je,a as M,a1 as J,y as Te,r as E,j as c,a2 as Pe,a0 as de}from"./index-DyRIQ9Lk.js";import{B as Ae,a as Ne,b as Ie}from"./index-Dz2F68m4.js";import{P as p}from"./index-COiimZCW.js";import{i as ke}from"./index-WaY9VHcO.js";import{u as Ze}from"./useCustomQuery-SZGhgeeH.js";function Ue(t,n,r,o){function e(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function h(f){try{l(o.next(f))}catch(d){i(d)}}function u(f){try{l(o.throw(f))}catch(d){i(d)}}function l(f){f.done?s(f.value):e(f.value).then(h,u)}l((o=o.apply(t,[])).next())})}function Re(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var te,fe;function He(){return fe||(fe=1,te=function t(n,r){if(n===r)return!0;if(n&&r&&typeof n=="object"&&typeof r=="object"){if(n.constructor!==r.constructor)return!1;var o,e,s;if(Array.isArray(n)){if(o=n.length,o!=r.length)return!1;for(e=o;e--!==0;)if(!t(n[e],r[e]))return!1;return!0}if(n.constructor===RegExp)return n.source===r.source&&n.flags===r.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===r.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===r.toString();if(s=Object.keys(n),o=s.length,o!==Object.keys(r).length)return!1;for(e=o;e--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[e]))return!1;for(e=o;e--!==0;){var i=s[e];if(!t(n[i],r[i]))return!1}return!0}return n!==n&&r!==r}),te}var Be=He(),Fe=Re(Be);const ge="__googleMapsScriptId";var U;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(U||(U={}));class k{constructor({apiKey:n,authReferrerPolicy:r,channel:o,client:e,id:s=ge,language:i,libraries:h=[],mapIds:u,nonce:l,region:f,retries:d=3,url:v="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=r,this.channel=o,this.client=e,this.id=s||ge,this.language=i,this.libraries=h,this.mapIds=u,this.nonce=l,this.region=f,this.retries=d,this.url=v,this.version=m,k.instance){if(!Fe(this.options,k.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(k.instance.options)}`);return k.instance}k.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?U.FAILURE:this.done?U.SUCCESS:this.loading?U.LOADING:U.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let n=this.url;return n+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(n+=`&key=${this.apiKey}`),this.channel&&(n+=`&channel=${this.channel}`),this.client&&(n+=`&client=${this.client}`),this.libraries.length>0&&(n+=`&libraries=${this.libraries.join(",")}`),this.language&&(n+=`&language=${this.language}`),this.region&&(n+=`&region=${this.region}`),this.version&&(n+=`&v=${this.version}`),this.mapIds&&(n+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(n+=`&auth_referrer_policy=${this.authReferrerPolicy}`),n}deleteScript(){const n=document.getElementById(this.id);n&&n.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((n,r)=>{this.loadCallback(o=>{o?r(o.error):n(window.google)})})}importLibrary(n){return this.execute(),google.maps.importLibrary(n)}loadCallback(n){this.callbacks.push(n),this.execute()}setScript(){var n,r;if(document.getElementById(this.id)){this.callback();return}const o={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(o).forEach(s=>!o[s]&&delete o[s]),!((r=(n=window==null?void 0:window.google)===null||n===void 0?void 0:n.maps)===null||r===void 0)&&r.importLibrary||(s=>{let i,h,u,l="The Google Maps JavaScript API",f="google",d="importLibrary",v="__ib__",m=document,_=window;_=_[f]||(_[f]={});const L=_.maps||(_.maps={}),O=new Set,w=new URLSearchParams,A=()=>i||(i=new Promise((g,D)=>Ue(this,void 0,void 0,function*(){var j;yield h=m.createElement("script"),h.id=this.id,w.set("libraries",[...O]+"");for(u in s)w.set(u.replace(/[A-Z]/g,a=>"_"+a[0].toLowerCase()),s[u]);w.set("callback",f+".maps."+v),h.src=this.url+"?"+w,L[v]=g,h.onerror=()=>i=D(Error(l+" could not load.")),h.nonce=this.nonce||((j=m.querySelector("script[nonce]"))===null||j===void 0?void 0:j.nonce)||"",m.head.append(h)})));L[d]||(L[d]=(g,...D)=>O.add(g)&&A().then(()=>L[d](g,...D)))})(o);const e=this.libraries.map(s=>this.importLibrary(s));e.length||e.push(this.importLibrary("core")),Promise.all(e).then(()=>this.callback(),s=>{const i=new ErrorEvent("error",{error:s});this.loadErrorCallback(i)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(n){if(this.errors.push(n),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=n,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(n=>{n(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){this.callback();return}this.loading=!0,this.setScript()}}}var We=R;function R(t,n){this.x=t,this.y=n}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,r=t.y-this.y;return n*n+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),r=Math.sin(t),o=n*this.x-r*this.y,e=r*this.x+n*this.y;return this.x=o,this.y=e,this},_rotateAround:function(t,n){var r=Math.cos(t),o=Math.sin(t),e=n.x+r*(this.x-n.x)-o*(this.y-n.y),s=n.y+o*(this.x-n.x)+r*(this.y-n.y);return this.x=e,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};R.convert=function(t){return t instanceof R?t:Array.isArray(t)?new R(t[0],t[1]):t};const Z=je(We);function ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){return(C=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(null,arguments)}function ee(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,function(r,o){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(r,o)}(t,n)}function Ke(t){var n=function(r,o){if(typeof r!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var s=e.call(r,"string");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t);return typeof n=="symbol"?n:n+""}var Ge={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},$e=function(t){function n(){return t.apply(this,arguments)||this}ee(n,t);var r=n.prototype;return r.shouldComponentUpdate=function(){return!1},r.render=function(){return M.createElement("div",{ref:this.props.registerChild,style:Ge})},n}(E.Component),me=function(t){function n(o){var e;return(e=t.call(this)||this).gmapInstance=o,e}ee(n,t);var r=n.prototype;return r.getChildren=function(){return this.gmapInstance.props.children},r.getMousePosition=function(){return this.gmapInstance.mouse_},r.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},r.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},n}(ke),G=function(t,n){for(var r=C({},(function(s){if(s==null)throw new TypeError("Cannot destructure "+s)}(t),t)),o=0;o<n.length;o++){var e=n[o];e in r&&delete r[e]}return r},qe=Object.prototype.hasOwnProperty;function _e(t,n){return t===n?t!==0||n!==0||1/t==1/n:t!=t&&n!=n}function x(t,n){if(_e(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(var e=0;e<r.length;e++)if(!qe.call(n,r[e])||!_e(t[r[e]],n[r[e]]))return!1;return!0}var Ve={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},Xe={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},Q=function(t){function n(o){var e;return(e=t.call(this,o)||this)._getState=function(){return{children:e.props.dispatcher.getChildren(),updateCounter:e.props.dispatcher.getUpdateCounter()}},e._onChangeHandler=function(){if(e.dimensionsCache_){var s=(e.state.children||[]).length,i=e._getState();e.setState(i,function(){return(i.children||[]).length!==s&&e._onMouseChangeHandler()})}},e._onChildClick=function(){e.props.onChildClick&&e.hoverChildProps_&&e.props.onChildClick(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseDown=function(){e.props.onChildMouseDown&&e.hoverChildProps_&&e.props.onChildMouseDown(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseEnter=function(s,i){e.dimensionsCache_&&(e.props.onChildMouseEnter&&e.props.onChildMouseEnter(s,i),e.hoverChildProps_=i,e.hoverKey_=s,e.setState({hoverKey:s}))},e._onChildMouseLeave=function(){if(e.dimensionsCache_){var s=e.hoverKey_;s!=null&&(e.props.onChildMouseLeave&&e.props.onChildMouseLeave(s,e.hoverChildProps_),e.hoverKey_=null,e.hoverChildProps_=null,e.setState({hoverKey:null}))}},e._onMouseAllow=function(s){s||e._onChildMouseLeave(),e.allowMouse_=s},e._onMouseChangeHandler=function(){e.allowMouse_&&e._onMouseChangeHandlerRaf()},e._onMouseChangeHandlerRaf=function(){if(e.dimensionsCache_){var s=e.props.dispatcher.getMousePosition();if(s){var i=[],h=e.props.getHoverDistance();if(M.Children.forEach(e.state.children,function(f,d){if(f&&(f.props.latLng!==void 0||f.props.lat!==void 0||f.props.lng!==void 0)){var v=f.key!=null?f.key:d,m=e.props.distanceToMouse(e.dimensionsCache_[v],s,f.props);m<h&&i.push({key:v,dist:m,props:f.props})}}),i.length){i.sort(function(f,d){return f.dist-d.dist});var u=i[0].key,l=i[0].props;e.hoverKey_!==u&&(e._onChildMouseLeave(),e._onChildMouseEnter(u,l))}else e._onChildMouseLeave()}else e._onChildMouseLeave()}},e._getDimensions=function(s){return e.dimensionsCache_[s]},e.dimensionsCache_={},e.hoverKey_=null,e.hoverChildProps_=null,e.allowMouse_=!0,e.state=C({},e._getState(),{hoverKey:null}),e}ee(n,t);var r=n.prototype;return r.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},r.shouldComponentUpdate=function(o,e){return this.props.experimental===!0?!x(this.props,o)||!x(G(this.state,["hoverKey"]),G(e,["hoverKey"])):!x(this.props,o)||!x(this.state,e)},r.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_={}},r.render=function(){var o=this,e=this.props.style||Ve;this.dimensionsCache_={};var s=M.Children.map(this.state.children,function(i,h){if(i){if(i.props.latLng===void 0&&i.props.lat===void 0&&i.props.lng===void 0)return M.cloneElement(i,{$geoService:o.props.geoService,$onMouseAllow:o._onMouseAllow,$prerender:o.props.prerender});var u=i.props.latLng!==void 0?i.props.latLng:{lat:i.props.lat,lng:i.props.lng},l=o.props.insideMapPanes?o.props.geoService.fromLatLngToDivPixel(u):o.props.geoService.fromLatLngToCenterPixel(u),f={left:l.x,top:l.y};if(i.props.seLatLng!==void 0||i.props.seLat!==void 0&&i.props.seLng!==void 0){var d=i.props.seLatLng!==void 0?i.props.seLatLng:{lat:i.props.seLat,lng:i.props.seLng},v=o.props.insideMapPanes?o.props.geoService.fromLatLngToDivPixel(d):o.props.geoService.fromLatLngToCenterPixel(d);f.width=v.x-l.x,f.height=v.y-l.y}var m=o.props.geoService.fromLatLngToContainerPixel(u),_=i.key!=null?i.key:h;return o.dimensionsCache_[_]=C({x:m.x,y:m.y},u),M.createElement("div",{key:_,style:C({},Xe,f),className:i.props.$markerHolderClassName},M.cloneElement(i,{$hover:_===o.state.hoverKey,$getDimensions:o._getDimensions,$dimensionKey:_,$geoService:o.props.geoService,$onMouseAllow:o._onMouseAllow,$prerender:o.props.prerender}))}});return M.createElement("div",{style:e},s)},n}(E.Component);Q.propTypes={geoService:p.any,style:p.any,distanceToMouse:p.func,dispatcher:p.any,onChildClick:p.func,onChildMouseDown:p.func,onChildMouseLeave:p.func,onChildMouseEnter:p.func,getHoverDistance:p.func,insideMapPanes:p.bool,prerender:p.bool},Q.defaultProps={insideMapPanes:!1,prerender:!1};var Ye={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function Je(t){return M.createElement("div",{style:Ye},M.createElement(Q,C({},t,{prerender:!0})))}var oe,B,ae,Qe=["key"],et=new Promise(function(t){ae=t}),ve=function(t,n){if(!t)return et;if(B)return B;t.libraries||(t.libraries=[]);var r=[].concat(t.libraries);if(n&&(r.length!==0&&r.includes("visualization")||r.push("visualization")),typeof window>"u")throw new Error("google map cannot be loaded outside browser env");var o=t.key,e=function(s,i){if(s==null)return{};var h={};for(var u in s)if({}.hasOwnProperty.call(s,u)){if(i.indexOf(u)!==-1)continue;h[u]=s[u]}return h}(t,Qe);return oe||(oe=new k(C({apiKey:o||""},e,{libraries:r}))),B=oe.load().then(function(){return ae(window.google.maps),window.google.maps}),ae(B),B};function ze(t,n,r){var o=r-n;return t===r?t:((t-n)%o+o)%o+n}var P=function(){function t(n,r){if(isNaN(n)||isNaN(r))throw new Error("Invalid LatLng object: ("+n+", "+r+")");this.lat=+n,this.lng=+r}return t.prototype.wrap=function(){return new t(this.lat,ze(this.lng,-180,180))},t}();P.convert=function(t){return t instanceof P?t:Array.isArray(t)?new P(t[0],t[1]):"lng"in t&&"lat"in t?new P(t.lat,t.lng):t};var tt=function(){function t(e,s,i){this.tileSize=e||512,this._minZoom=s||0,this._maxZoom=i||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new P(0,0),this.angle=0}var n,r,o=t.prototype;return o.zoomScale=function(e){return Math.pow(2,e)},o.scaleZoom=function(e){return Math.log(e)/Math.LN2},o.project=function(e,s){return new Z(this.lngX(e.lng,s),this.latY(e.lat,s))},o.unproject=function(e,s){return new P(this.yLat(e.y,s),this.xLng(e.x,s))},o.lngX=function(e,s){return(180+e)*(s||this.worldSize)/360},o.latY=function(e,s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*(s||this.worldSize)/360},o.xLng=function(e,s){return 360*e/(s||this.worldSize)-180},o.yLat=function(e,s){return 360/Math.PI*Math.atan(Math.exp((180-360*e/(s||this.worldSize))*Math.PI/180))-90},o.locationPoint=function(e){var s=this.project(e);return this.centerPoint._sub(this.point._sub(s)._rotate(this.angle))},o.pointLocation=function(e){var s=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(s))},n=t,(r=[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new Z(0,0)}},{key:"size",get:function(){return new Z(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-ze(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var s=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new Z(this.x,this.y)}}])&&function(e,s){for(var i=0;i<s.length;i++){var h=s[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,Ke(h.key),h)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),nt=function(){function t(r){this.hasSize_=!1,this.hasView_=!1,this.transform_=new tt(r||512)}var n=t.prototype;return n.setView=function(r,o,e){this.transform_.center=P.convert(r),this.transform_.zoom=+o,this.transform_.bearing=+e,this.hasView_=!0},n.setViewSize=function(r,o){this.transform_.width=r,this.transform_.height=o,this.hasSize_=!0},n.setMapCanvasProjection=function(r,o){this.maps_=r,this.mapCanvasProjection_=o},n.canProject=function(){return this.hasSize_&&this.hasView_},n.hasSize=function(){return this.hasSize_},n.fromLatLngToCenterPixel=function(r){return this.transform_.locationPoint(P.convert(r))},n.fromLatLngToDivPixel=function(r){if(this.mapCanvasProjection_){var o=new this.maps_.LatLng(r.lat,r.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(o)}return this.fromLatLngToCenterPixel(r)},n.fromLatLngToContainerPixel=function(r){if(this.mapCanvasProjection_){var o=new this.maps_.LatLng(r.lat,r.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(o)}var e=this.fromLatLngToCenterPixel(r);return e.x-=this.transform_.worldSize*Math.round(e.x/this.transform_.worldSize),e.x+=this.transform_.width/2,e.y+=this.transform_.height/2,e},n.fromContainerPixelToLatLng=function(r){if(this.mapCanvasProjection_){var o=this.mapCanvasProjection_.fromContainerPixelToLatLng(r);return{lat:o.lat(),lng:o.lng()}}var e=C({},r);e.x-=this.transform_.width/2,e.y-=this.transform_.height/2;var s=this.transform_.pointLocation(Z.convert(e));return s.lng-=360*Math.round(s.lng/360),s},n.getWidth=function(){return this.transform_.width},n.getHeight=function(){return this.transform_.height},n.getZoom=function(){return this.transform_.zoom},n.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},n.getBounds=function(r,o){var e=r&&r[0]||0,s=r&&r[1]||0,i=r&&r[2]||0,h=r&&r[3]||0;if(this.getWidth()-s-h>0&&this.getHeight()-e-i>0){var u=this.transform_.pointLocation(Z.convert({x:h-this.getWidth()/2,y:e-this.getHeight()/2})),l=this.transform_.pointLocation(Z.convert({x:this.getWidth()/2-s,y:this.getHeight()/2-i})),f=[u.lat,u.lng,l.lat,l.lng,l.lat,u.lng,u.lat,l.lng];return o&&(f=f.map(function(d){return Math.round(d*o)/o})),f}return[0,0,0,0]},t}();function ye(t){if(window.requestAnimationFrame)return window.requestAnimationFrame(t);var n=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return n?n(t):window.setTimeout(t,1e3/60)}var ot=Math.log2?Math.log2:function(t){return Math.log(t)/Math.LN2};function Ce(t,n){return Object.keys(t).reduce(function(r,o){return n(t[o])&&(r[o]=t[o]),r},{})}var I=function(t){if(t!==null&&typeof t=="object"){if(Object.keys(t).length===0)return!0}else if(t==null||t==="")return!0;return!1},it=Object.prototype.toString;function $(t){return typeof t=="number"||function(n){return!!n&&typeof n=="object"}(t)&&it.call(t)==="[object Number]"}var q=null;function be(){if(q)return q;if(typeof navigator<"u"){var t=navigator.userAgent.indexOf("MSIE")>-1,n=navigator.userAgent.indexOf("Firefox")>-1,r=navigator.userAgent.toLowerCase().indexOf("op")>-1,o=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Safari")>-1;return o&&e&&(e=!1),o&&r&&(o=!1),q={isExplorer:t,isFirefox:n,isOpera:r,isChrome:o,isSafari:e}}return q={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var we=function(t){return Function.prototype.toString.call(t)};function K(t){if(!t||typeof t!="object")return!1;var n=typeof t.constructor=="function"?Object.getPrototypeOf(t):Object.prototype;if(n===null)return!0;var r=n.constructor;return typeof r=="function"&&r instanceof r&&we(r)===we(Object)}function F(t,n,r,o){t.addEventListener(n,r,function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{e=!1}return e}()?{capture:o,passive:!0}:o)}var z,le=!(typeof window>"u"||!window.document||!window.document.createElement);z=le?window:typeof self<"u"?self:void 0;var Me,ue=typeof document<"u"&&document.attachEvent,xe=!1;if(le&&!ue){var rt=function(){var t=z.requestAnimationFrame||z.mozRequestAnimationFrame||z.webkitRequestAnimationFrame||function(n){return z.setTimeout(n,20)};return function(n){return t(n)}}(),st=(Me=z.cancelAnimationFrame||z.mozCancelAnimationFrame||z.webkitCancelAnimationFrame||z.clearTimeout,function(t){return Me(t)}),he=function(t){var n=t.__resizeTriggers__,r=n.firstElementChild,o=n.lastElementChild,e=r.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,e.style.width=r.offsetWidth+1+"px",e.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},Le=function(t){var n=this;he(this),this.__resizeRAF__&&st(this.__resizeRAF__),this.__resizeRAF__=rt(function(){(function(r){return r.offsetWidth!=r.__resizeLast__.width||r.offsetHeight!=r.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(r){r.call(n,t)}))})},ie=!1,re="",ce="animationstart",se="Webkit Moz O ms".split(" "),at="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(le){var Se=document.createElement("fakeelement");if(Se.style.animationName!==void 0&&(ie=!0),ie===!1){for(var W=0;W<se.length;W++)if(Se.style[se[W]+"AnimationName"]!==void 0){re="-"+se[W].toLowerCase()+"-",ce=at[W],ie=!0;break}}}var pe="resizeanim",lt="@"+re+"keyframes "+pe+" { from { opacity: 0; } to { opacity: 0; } } ",ut=re+"animation: 1ms "+pe+"; "}var X=J.createPortal!==void 0,Ee=X?J.createPortal:J.unstable_renderSubtreeIntoContainer,V=function(t){return K(t)?t:{lat:t[0],lng:t[1]}},Oe=function(t,n){return n<t?t:n},Y=function(t){function n(o){var e;if((e=t.call(this,o)||this)._getMinZoom=function(){if(e.geoService_.getWidth()>0||e.geoService_.getHeight()>0){var i=Math.ceil(e.geoService_.getWidth()/256)+2,h=Math.ceil(e.geoService_.getHeight()/256)+2,u=Math.max(i,h);return Math.ceil(ot(u))}return 3},e._computeMinZoom=function(i){return I(i)?e._getMinZoom():i},e._mapDomResizeCallback=function(){if(e.resetSizeOnIdle_=!0,e.maps_){var i=e.props.center||e.props.defaultCenter,h=e.map_.getCenter();e.maps_.event.trigger(e.map_,"resize"),e.map_.setCenter(e.props.resetBoundsOnResize?i:h)}},e._setLayers=function(i){i.forEach(function(h){e.layers_[h]=new e.maps_[h],e.layers_[h].setMap(e.map_)})},e._renderPortal=function(){return M.createElement(Q,{experimental:e.props.experimental,onChildClick:e._onChildClick,onChildMouseDown:e._onChildMouseDown,onChildMouseEnter:e._onChildMouseEnter,onChildMouseLeave:e._onChildMouseLeave,geoService:e.geoService_,insideMapPanes:!0,distanceToMouse:e.props.distanceToMouse,getHoverDistance:e._getHoverDistance,dispatcher:e.markersDispatcher_})},e._initMap=function(){if(!e.initialized_){e.initialized_=!0;var i=V(e.props.center||e.props.defaultCenter);e.geoService_.setView(i,e.props.zoom||e.props.defaultZoom,0),e._onBoundsChanged();var h=C({},e.props.apiKey&&{key:e.props.apiKey},e.props.bootstrapURLKeys);e.props.googleMapLoader(h,e.props.heatmapLibrary).then(function(u){if(e.mounted_){var l,f,d=e.geoService_.getCenter(),v={zoom:e.props.zoom||e.props.defaultZoom,center:new u.LatLng(d.lat,d.lng)};e.props.heatmap.positions&&(Object.assign(ne(e),{heatmap:(l=u,f=e.props.heatmap,new l.visualization.HeatmapLayer({data:f.positions.reduce(function(y,N){var b=N.weight,T=b===void 0?1:b;return y.push({location:new l.LatLng(N.lat,N.lng),weight:T}),y},[])}))}),function(y,N){var b=N.options,T=b===void 0?{}:b;Object.keys(T).map(function(H){return y.set(H,T[H])})}(e.heatmap,e.props.heatmap));var m=Ce(u,K),_=typeof e.props.options=="function"?e.props.options(m):e.props.options,L=!I(e.props.draggable)&&{draggable:e.props.draggable},O=e._computeMinZoom(_.minZoom);e.minZoom_=O;var w=C({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:O},_,v);e.defaultDraggableOption_=I(w.draggable)?e.defaultDraggableOption_:w.draggable;var A=C({},w,L);A.minZoom=Oe(A.minZoom,O);var g=new u.Map(e.googleMapDom_,A);e.map_=g,e.maps_=u,e._setLayers(e.props.layerTypes);var D=u.version.match(/^3\.(\d+)\./),j=D&&Number(D[1]),a=ne(e),S=Object.assign(new u.OverlayView,{onAdd:function(){var y=typeof screen<"u"?screen.width+"px":"2000px",N=typeof screen<"u"?screen.height+"px":"2000px",b=document.createElement("div");if(b.style.backgroundColor="transparent",b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.width=y,b.style.height=N,a.props.overlayViewDivStyle){var T=a.props.overlayViewDivStyle;typeof T=="object"&&Object.keys(T).forEach(function(H){b.style[H]=T[H]})}this.getPanes().overlayMouseTarget.appendChild(b),a.geoService_.setMapCanvasProjection(u,S.getProjection()),X?a.setState({overlay:b}):Ee(a,a._renderPortal(),b,function(){return a.setState({overlay:b})})},onRemove:function(){var y=a.state.overlay;y&&!X&&J.unmountComponentAtNode(y),a.setState({overlay:null})},draw:function(){if(a.updateCounter_++,a._onBoundsChanged(g,u,!a.props.debounced),a.googleApiLoadedCalled_||(a._onGoogleApiLoaded({map:g,maps:u,ref:a.googleMapDom_}),a.googleApiLoadedCalled_=!0),a.mouse_){var y=a.geoService_.fromContainerPixelToLatLng(a.mouse_);a.mouse_.lat=y.lat,a.mouse_.lng=y.lng}a._onChildMouseMove(),a.markersDispatcher_&&(Te.flushSync(function(){a.markersDispatcher_.emit("kON_CHANGE")}),a.fireMouseEventOnIdle_&&a.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});e.overlay_=S,S.setMap(g),e.props.heatmap.positions&&e.heatmap.setMap(g),e.props.onTilesLoaded&&u.event.addListener(g,"tilesloaded",function(){a._onTilesLoaded()}),u.event.addListener(g,"zoom_changed",function(){a.geoService_.getZoom()!==g.getZoom()&&(a.zoomAnimationInProgress_||(a.zoomAnimationInProgress_=!0,a._onZoomAnimationStart(g.zoom)),j<32)&&(new Date().getTime()-e.zoomControlClickTime_<300?ye(function(){return ye(function(){a.updateCounter_++,a._onBoundsChanged(g,u)})}):(a.updateCounter_++,a._onBoundsChanged(g,u)))}),u.event.addListener(g,"idle",function(){if(e.resetSizeOnIdle_){e._setViewSize();var y=e._computeMinZoom(_.minZoom);y!==e.minZoom_&&(e.minZoom_=y,g.setOptions({minZoom:y})),e.resetSizeOnIdle_=!1}a.zoomAnimationInProgress_&&(a.zoomAnimationInProgress_=!1,a._onZoomAnimationEnd(g.zoom)),a.updateCounter_++,a._onBoundsChanged(g,u),a.dragTime_=0,a.markersDispatcher_&&a.markersDispatcher_.emit("kON_CHANGE")}),u.event.addListener(g,"mouseover",function(){a.mouseInMap_=!0}),u.event.addListener(g,"click",function(){a.mouseInMap_=!0}),u.event.addListener(g,"mouseout",function(){a.mouseInMap_=!1,a.mouse_=null,a.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),u.event.addListener(g,"drag",function(){a.dragTime_=new Date().getTime(),a._onDrag(g)}),u.event.addListener(g,"dragend",function(){var y=u.event.addListener(g,"idle",function(){u.event.removeListener(y),a._onDragEnd(g)})}),u.event.addListener(g,"maptypeid_changed",function(){a._onMapTypeIdChange(g.getMapTypeId())})}}).catch(function(u){throw e._onGoogleApiLoaded({map:null,maps:null,ref:e.googleMapDom_}),u})}},e._onGoogleApiLoaded=function(){var i;e.props.onGoogleApiLoaded&&(i=e.props).onGoogleApiLoaded.apply(i,arguments)},e._getHoverDistance=function(){return e.props.hoverDistance},e._onDrag=function(){var i;return e.props.onDrag&&(i=e.props).onDrag.apply(i,arguments)},e._onDragEnd=function(){var i;return e.props.onDragEnd&&(i=e.props).onDragEnd.apply(i,arguments)},e._onMapTypeIdChange=function(){var i;return e.props.onMapTypeIdChange&&(i=e.props).onMapTypeIdChange.apply(i,arguments)},e._onZoomAnimationStart=function(){var i;return e.props.onZoomAnimationStart&&(i=e.props).onZoomAnimationStart.apply(i,arguments)},e._onZoomAnimationEnd=function(){var i;return e.props.onZoomAnimationEnd&&(i=e.props).onZoomAnimationEnd.apply(i,arguments)},e._onTilesLoaded=function(){return e.props.onTilesLoaded&&e.props.onTilesLoaded()},e._onChildClick=function(){var i;if(e.props.onChildClick)return(i=e.props).onChildClick.apply(i,arguments)},e._onChildMouseDown=function(i,h){e.childMouseDownArgs_=[i,h],e.props.onChildMouseDown&&e.props.onChildMouseDown(i,h,C({},e.mouse_))},e._onChildMouseUp=function(){var i;e.childMouseDownArgs_&&(e.props.onChildMouseUp&&(i=e.props).onChildMouseUp.apply(i,e.childMouseDownArgs_.concat([C({},e.mouse_)])),e.childMouseDownArgs_=null,e.childMouseUpTime_=new Date().getTime())},e._onChildMouseMove=function(){var i;e.childMouseDownArgs_&&e.props.onChildMouseMove&&(i=e.props).onChildMouseMove.apply(i,e.childMouseDownArgs_.concat([C({},e.mouse_)]))},e._onChildMouseEnter=function(){var i;if(e.props.onChildMouseEnter)return(i=e.props).onChildMouseEnter.apply(i,arguments)},e._onChildMouseLeave=function(){var i;if(e.props.onChildMouseLeave)return(i=e.props).onChildMouseLeave.apply(i,arguments)},e._setViewSize=function(){if(e.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)e.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var i=e.googleMapDom_;e.geoService_.setViewSize(i.clientWidth,i.clientHeight)}e._onBoundsChanged()}},e._onWindowResize=function(){e.resetSizeOnIdle_=!0},e._onMapMouseMove=function(i){if(e.mouseInMap_){var h=new Date().getTime();h-e.mouseMoveTime_>50&&(e.boundingRect_=i.currentTarget.getBoundingClientRect()),e.mouseMoveTime_=h;var u=i.clientX-e.boundingRect_.left,l=i.clientY-e.boundingRect_.top;e.mouse_||(e.mouse_={x:0,y:0,lat:0,lng:0}),e.mouse_.x=u,e.mouse_.y=l;var f=e.geoService_.fromContainerPixelToLatLng(e.mouse_);e.mouse_.lat=f.lat,e.mouse_.lng=f.lng,e._onChildMouseMove(),h-e.dragTime_<100?e.fireMouseEventOnIdle_=!0:(e.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),e.fireMouseEventOnIdle_=!1)}},e._onClick=function(){var i;return e.props.onClick&&!e.childMouseDownArgs_&&new Date().getTime()-e.childMouseUpTime_>300&&e.dragTime_===0&&(i=e.props).onClick.apply(i,arguments)},e._onMapClick=function(i){e.markersDispatcher_&&(e._onMapMouseMove(i),new Date().getTime()-e.dragTime_>100&&(e.mouse_&&e._onClick(C({},e.mouse_,{event:i})),e.markersDispatcher_.emit("kON_CLICK",i)))},e._onMapMouseDownNative=function(i){e.mouseInMap_&&e._onMapMouseDown(i)},e._onMapMouseDown=function(i){e.markersDispatcher_&&new Date().getTime()-e.dragTime_>100&&(e._onMapMouseMove(i),e.markersDispatcher_.emit("kON_MDOWN",i))},e._onMapMouseDownCapture=function(){be().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._onKeyDownCapture=function(){be().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._isCenterDefined=function(i){return i&&(K(i)&&$(i.lat)&&$(i.lng)||i.length===2&&$(i[0])&&$(i[1]))},e._onBoundsChanged=function(i,h,u){if(i){var l=i.getCenter();e.geoService_.setView([l.lat(),l.lng()],i.getZoom(),0)}if((e.props.onChange||e.props.onBoundsChange)&&e.geoService_.canProject()){var f=e.geoService_.getZoom(),d=e.geoService_.getBounds(),v=e.geoService_.getCenter();if(!function(_,L,O){if(_&&L){for(var w=0;w!==_.length;++w)if(Math.abs(_[w]-L[w])>1e-5)return!1;return!0}return!1}(d,e.prevBounds_)&&u!==!1){var m=e.geoService_.getBounds(e.props.margin);e.props.onBoundsChange&&e.props.onBoundsChange(e.centerIsObject_?C({},v):[v.lat,v.lng],f,d,m),e.props.onChange&&e.props.onChange({center:C({},v),zoom:f,bounds:{nw:{lat:d[0],lng:d[1]},se:{lat:d[2],lng:d[3]},sw:{lat:d[4],lng:d[5]},ne:{lat:d[6],lng:d[7]}},marginBounds:{nw:{lat:m[0],lng:m[1]},se:{lat:m[2],lng:m[3]},sw:{lat:m[4],lng:m[5]},ne:{lat:m[6],lng:m[7]}},size:e.geoService_.hasSize()?{width:e.geoService_.getWidth(),height:e.geoService_.getHeight()}:{width:0,height:0}}),e.prevBounds_=d}}},e._registerChild=function(i){e.googleMapDom_=i},e.mounted_=!1,e.initialized_=!1,e.googleApiLoadedCalled_=!1,e.map_=null,e.maps_=null,e.prevBounds_=null,e.heatmap=null,e.layers_={},e.mouse_=null,e.mouseMoveTime_=0,e.boundingRect_=null,e.mouseInMap_=!0,e.dragTime_=0,e.fireMouseEventOnIdle_=!1,e.updateCounter_=0,e.markersDispatcher_=new me(ne(e)),e.geoService_=new nt(256),e.centerIsObject_=K(e.props.center),e.minZoom_=3,e.defaultDraggableOption_=!0,e.zoomControlClickTime_=0,e.childMouseDownArgs_=null,e.childMouseUpTime_=0,e.googleMapDom_=null,e._isCenterDefined(e.props.center||e.props.defaultCenter)){var s=V(e.props.center||e.props.defaultCenter);e.geoService_.setView(s,e.props.zoom||e.props.defaultZoom,0)}return e.zoomAnimationInProgress_=!1,e.state={overlay:null},e}ee(n,t);var r=n.prototype;return r.componentDidMount=function(){var o=this;this.mounted_=!0,this.markersDispatcher_=new me(this),F(window,"resize",this._onWindowResize,!1),F(window,"keydown",this._onKeyDownCapture,!0);var e=this.googleMapDom_;e&&F(e,"mousedown",this._onMapMouseDownNative,!0),F(window,"mouseup",this._onChildMouseUp,!1);var s=C({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(s,this.props.heatmapLibrary),setTimeout(function(){o._setViewSize(),o._isCenterDefined(o.props.center||o.props.defaultCenter)&&o._initMap()},0,this),this.props.resetBoundsOnResize&&function(i,h){if(i.parentNode===void 0){var u=document.createElement("div");i.parentNode=u}i=i.parentNode,ue?i.attachEvent("onresize",h):(i.__resizeTriggers__||(getComputedStyle(i).position=="static"&&(i.style.position="relative"),function(){if(!xe){var l=(lt||"")+".resize-triggers { "+(ut||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',f=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=l:d.appendChild(document.createTextNode(l)),f.appendChild(d),xe=!0}}(),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),he(i),F(i,"scroll",Le,!0),ce&&i.__resizeTriggers__.addEventListener(ce,function(l){l.animationName==pe&&he(i)})),i.__resizeListeners__.push(h))}(e,this._mapDomResizeCallback)},r.shouldComponentUpdate=function(o,e){return!x(G(this.props,["draggable"]),G(o,["draggable"]))||!x(this.state,e)},r.componentDidUpdate=function(o){var e=this;if(!this._isCenterDefined(o.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return e._initMap()},0),this.map_){var s=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var i=V(this.props.center),h=this._isCenterDefined(o.center)?V(o.center):null;(!h||Math.abs(i.lat-h.lat)+Math.abs(i.lng-h.lng)>1e-5)&&Math.abs(i.lat-s.lat)+Math.abs(i.lng-s.lng)>1e-5&&this.map_.panTo({lat:i.lat,lng:i.lng})}if(I(this.props.zoom)||Math.abs(this.props.zoom-o.zoom)>0&&this.map_.setZoom(this.props.zoom),!I(o.draggable)&&I(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):x(o.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!I(this.props.options)&&!x(o.options,this.props.options)){var u=Ce(this.maps_,K),l=typeof this.props.options=="function"?this.props.options(u):this.props.options;if("minZoom"in(l=G(l,["zoom","center","draggable"]))){var f=this._computeMinZoom(l.minZoom);l.minZoom=Oe(l.minZoom,f)}this.map_.setOptions(l)}x(this.props.layerTypes,o.layerTypes)||(Object.keys(this.layers_).forEach(function(d){e.layers_[d].setMap(null),delete e.layers_[d]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!x(this.props.heatmap.positions,o.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(d){return{location:new e.maps_.LatLng(d.lat,d.lng),weight:d.weight}})),this.heatmap&&!x(this.props.heatmap.options,o.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(d){e.heatmap.set(d,e.props.heatmap.options[d])})}this.markersDispatcher_.emit("kON_CHANGE"),x(this.props.hoverDistance,o.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},r.componentWillUnmount=function(){this.mounted_=!1;var o,e,s=this.googleMapDom_;s&&s.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(e=this._mapDomResizeCallback,o=(o=s).parentNode,ue?o.detachEvent("onresize",e):(o.__resizeListeners__.splice(o.__resizeListeners__.indexOf(e),1),o.__resizeListeners__.length||(o.removeEventListener("scroll",Le),o.__resizeTriggers__=!o.removeChild(o.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},r.render=function(){var o=this.state.overlay,e=o?null:M.createElement(Je,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return M.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},M.createElement($e,{registerChild:this._registerChild}),X&&o&&Ee(this._renderPortal(),o),e)},n}(E.Component);Y.propTypes={apiKey:p.string,bootstrapURLKeys:p.any,defaultCenter:p.oneOfType([p.array,p.shape({lat:p.number,lng:p.number})]),center:p.oneOfType([p.array,p.shape({lat:p.number,lng:p.number})]),defaultZoom:p.number,zoom:p.number,onBoundsChange:p.func,onChange:p.func,onClick:p.func,onChildClick:p.func,onChildMouseDown:p.func,onChildMouseUp:p.func,onChildMouseMove:p.func,onChildMouseEnter:p.func,onChildMouseLeave:p.func,onZoomAnimationStart:p.func,onZoomAnimationEnd:p.func,onDrag:p.func,onDragEnd:p.func,onMapTypeIdChange:p.func,onTilesLoaded:p.func,options:p.any,distanceToMouse:p.func,hoverDistance:p.number,debounced:p.bool,margin:p.array,googleMapLoader:p.any,onGoogleApiLoaded:p.func,yesIWantToUseGoogleMapApiInternals:p.bool,draggable:p.bool,style:p.any,resetBoundsOnResize:p.bool,layerTypes:p.arrayOf(p.string),shouldUnregisterMapOnUnmount:p.bool},Y.defaultProps={distanceToMouse:function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:ve,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},Y.googleMapLoader=ve;const ht=({handleSingleView:t,langData:n})=>{const r=({id:o,lat:e,lng:s,address:i,holding:h,realImg:u,propId:l,handleSingleView:f})=>c.jsxs("div",{onClick:()=>{f({holding:h,lat:e,lng:s,address:i,full_doc:u,propId:l})},className:"cursor-pointer transition ease-in-out delay-150 hover:z-50 hover:-translate-y-1 hover:scale-125 duration-300",children:[c.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ“"}),c.jsx("div",{className:"mt-1",children:c.jsx("button",{className:"border border-gray-600 rounded-md shadow-md text-sm p-1 text-center bg-white hover:bg-gray-100",children:h||"No Data"})})]});return c.jsx("div",{style:{height:"calc(100vh - 120px)",width:"100%"},children:c.jsx(Y,{bootstrapURLKeys:{key:"AIzaSyC0AArVHmqXGAxgWcljuOD_fvY5eDXfwS0"},defaultCenter:{lat:23.3937225277778,lng:85.3721084444444},defaultZoom:12,options:{fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0},children:Array.isArray(n)&&(n==null?void 0:n.map((o,e)=>(o==null?void 0:o.latitude)&&(o==null?void 0:o.longitude)&&(o==null?void 0:o.latitude)!=="NaN"&&(o==null?void 0:o.longitude)!=="NaN"&&c.jsx(r,{realImg:o==null?void 0:o.full_doc,id:(o==null?void 0:o.holding_no)||"",holding:(o==null?void 0:o.holding_no)||"",lat:parseFloat((o==null?void 0:o.latitude)||"0"),lng:parseFloat((o==null?void 0:o.longitude)||"0"),address:(o==null?void 0:o.prop_address)||"",propId:(o==null?void 0:o.property_id)||"",handleSingleView:t},e)))})})},De="/assets/property.png",mt=t=>{var D,j;const[n,r]=E.useState(1),[o,e]=E.useState(""),[s,i]=E.useState(null),[h,u]=E.useState(!1),[l,f]=E.useState(null),[d,v]=E.useState(null),{theme:m}=Pe(),_=Ze({}),L=`https://www.google.com/maps/search/?api=1&query=${l==null?void 0:l.lat},${l==null?void 0:l.lng}`,O=async a=>{if(!(!a||!t.ulbId)){t==null||t.setIsLoadingGeoMap(!0),r(Number(a));try{const S=await _.mutateAsync({api:de.getHeatMapDataByWard,data:{wardId:a,ulbId:t.ulbId}});i(S.data.data)}catch{i([])}finally{t==null||t.setIsLoadingGeoMap(!1)}}},w=async()=>{try{const a=await _.mutateAsync({api:de.wardByUlb,data:{}});v(a.data.data)}catch{}};E.useEffect(()=>{w()},[]);const A=a=>{u(!0),f(a)},g=a=>{window.location.replace(`/property/holdingPropertyDetails/${a}`)};return c.jsxs(c.Fragment,{children:[!t.isPreview&&c.jsx("div",{className:"float-right relative h-fit",children:c.jsx("div",{className:"z-30 p-1 md:p-3 absolute top-0 right-0 bg-card border border-border rounded-b-lg ease-in duration-300",children:c.jsxs("div",{className:"flex gap-6 min-w-3xl",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-xs md:text-base text-foreground",children:"Select Ulb"}),c.jsxs("select",{onChange:a=>{t.setUlbId(a.target.value),e("")},value:t.ulbId||"",className:"cursor-pointer border border-border bg-background text-foreground shadow rounded h-9",name:"ulbList",children:[c.jsx("option",{value:"",children:"-- Select ULB --"}),Array.isArray(t==null?void 0:t.ulbListData)&&((D=t==null?void 0:t.ulbListData)==null?void 0:D.map((a,S)=>c.jsx("option",{value:a==null?void 0:a.id,children:a==null?void 0:a.ulb_name},`wardlistForMap${S}`)))]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-xs md:text-base text-foreground",children:"Select Ward"}),c.jsxs("select",{onChange:a=>{e(a.target.value),O(a.target.value)},value:o,className:"cursor-pointer border border-border bg-background text-foreground w-44 shadow rounded h-9",name:"wardList",children:[c.jsx("option",{value:"",children:"-- Select Ward --"}),Array.isArray(t==null?void 0:t.wardListData)&&((j=t==null?void 0:t.wardListData)==null?void 0:j.map((a,S)=>c.jsx("option",{value:a==null?void 0:a.id,children:a==null?void 0:a.ward_name},`wardlistForMap${S}`)))]})]})]})})}),c.jsxs("div",{className:"grid grid-cols-12 relative h-fit",children:[h?c.jsx("div",{className:"z-50 md:w-1/4 absolute top-0 left-0 bg-card border border-border rounded-b-lg ease-in duration-300",children:c.jsxs("div",{className:"m-1",children:[c.jsxs("div",{className:"max-w-sm rounded overflow-hidden shadow-lg bg-card",children:[c.jsx("img",{className:"w-full text-center h-40 object-cover",src:De,alt:"Property",onError:a=>{a.target.src=De}}),c.jsxs("div",{className:"px-6 py-4 text-sm text-foreground",children:[c.jsx("div",{className:"font-bold text-xl mb-2",children:"Property Details"}),c.jsxs("button",{className:`mt-5 px-5 py-2 border transition-colors ${m==="dark"?"bg-indigo-600 hover:bg-indigo-700 text-white border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white border-indigo-400"}`,onClick:()=>g((l==null?void 0:l.propId)||""),children:["View ",c.jsx(Ae,{className:"inline"})]}),c.jsx("p",{className:"border-b my-3 border-border"}),c.jsxs("p",{children:["Holding:"," ",c.jsx("span",{className:"font-semibold text-foreground",children:(l==null?void 0:l.holding)||"Holding Not Available"})]}),c.jsxs("p",{children:["Address:"," ",c.jsx("span",{className:"font-semibold text-foreground text-xs",children:(l==null?void 0:l.address)||"Address Not Available"})]}),c.jsxs("p",{children:["Latitude:"," ",c.jsx("span",{className:"font-semibold text-foreground",children:(l==null?void 0:l.lat)||"Latitude Not Available"})]}),c.jsxs("p",{children:["Longitude:"," ",c.jsx("span",{className:"font-semibold text-foreground",children:(l==null?void 0:l.lng)||"Longitude Not Available"})]}),c.jsx("p",{className:"mt-5",children:c.jsx("a",{href:l!=null&&l.lat&&(l!=null&&l.lng)?L:void 0,target:"_blank",rel:"noopener noreferrer",className:`
                      inline-block
                      px-5
                      py-2
                      border
                      text-white
                      transition-colors
                      ${m==="dark"?"border-indigo-500 bg-indigo-600":"border-indigo-400 bg-indigo-600"}
                      ${!(l!=null&&l.lat)||!(l!=null&&l.lng)?"opacity-50 cursor-not-allowed pointer-events-none":"hover:bg-indigo-700"}
                    `,children:"Open in Google Maps"})})]}),c.jsxs("div",{className:"px-6 pt-4 pb-2",children:[c.jsxs("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:["Ward ",n]}),c.jsx("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:"Ranchi"}),c.jsx("span",{className:"inline-block bg-secondary rounded-full px-3 py-1 text-sm font-semibold text-foreground mr-2 mb-2",children:"Property"})]})]}),c.jsx("p",{onClick:()=>u(!1),className:"cursor-pointer absolute right-0 mr-3 mb-3 bottom-0",children:c.jsx(Ne,{size:30,color:"indigo"})})]})}):c.jsx("div",{onClick:()=>u(!0),className:"z-50 h-9 w-40 md:w-1/4 opacity-50 hover:opacity-100 absolute top-0 left-0 bg-card border border-border rounded-b-lg shadow-lg cursor-pointer ease-in duration-300",children:c.jsx("div",{className:"cursor-pointer absolute right-0 mr-3 mb-1 bottom-0",children:c.jsxs("p",{className:"ml-2 flex",children:[c.jsx("p",{className:"mr-5 font-semibold text-blue-700 dark:text-blue-400 text-center text-xs md:text-base",children:"View Property Details"}),c.jsx(Ie,{size:27,color:"indigo"})]})})}),c.jsx("div",{className:"col-span-12",children:c.jsx(ht,{handleSingleView:A,langData:s})})]})]})};export{mt as G};
