import{r as h,j as e,N as w}from"./index-NyJPnqJQ.js";import{c as b}from"./useCustomQuery-DsBml94Z.js";import{P as v}from"./index-B7wREXdb.js";const C=()=>{const m=()=>{const r=new Date,t=r.getFullYear();return r.getMonth()+1>=4?`${t}-${t+1}`:`${t-1}-${t}`},[c,p]=h.useState(m()),[g,f]=h.useState(""),{data:i}=b({api:w.getUlbList,key:"ulbList",value:[],config:{},options:{enabled:!0}}),u=(i==null?void 0:i.data)||[],o=(r=>{const t=parseInt(r.split("-")[0]);return u.map((a,d)=>{const s=t+d,n=t>2022?1.2:t>2021?1.1:1;return{ulb_id:a.ulb_id||`${d+1}`,ulb_name:a.ulb_name||`ULB ${d+1}`,grievances:{total_grievances:Math.floor((s*37+100)*n),pending:Math.floor((s*13+50)*n),resolved:Math.floor((s*29+200)*n),rejected:Math.floor((s*7+10)*n)}}})})(c).filter(r=>r.ulb_name.toLowerCase().includes(g.toLowerCase())),l=2020,x=m(),y=Number(x.split("-")[0]),j=Array.from({length:y-l+1},(r,t)=>`${l+t}-${l+t+1}`);return e.jsx(v,{title:"ULB Grievance Count",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900 dark:text-white",children:"ULB Grievance Count"}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Grievance status across all ULBs for financial year"," ",c]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search ULB...",value:g,onChange:r=>f(r.target.value),className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"}),e.jsxs("select",{value:c,onChange:r=>p(r.target.value),className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white",children:[e.jsxs("option",{value:x,children:["Current Year (",x,")"]}),j.map(r=>e.jsx("option",{value:r,children:r},r))]})]})]})]}),e.jsx("div",{className:"overflow-hidden rounded-xl bg-white shadow-lg dark:bg-gray-800",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold uppercase tracking-wider",children:"ULB Name"}),e.jsx("th",{className:"border-l border-red-400 px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider",children:"Total Grievances"}),e.jsx("th",{className:"border-l border-red-400 px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider",children:"Pending"}),e.jsx("th",{className:"border-l border-red-400 px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider",children:"Resolved"}),e.jsx("th",{className:"border-l border-red-400 px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider",children:"Rejected"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o==null?void 0:o.map((r,t)=>{var a,d,s,n;return e.jsxs("tr",{className:`transition-colors duration-200 hover:bg-red-50 dark:hover:bg-gray-700 ${t%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-900"}`,children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 h-2 w-2 rounded-full bg-red-500"}),(r==null?void 0:r.ulb_name)||"Unknown ULB"]})}),e.jsx("td",{className:"whitespace-nowrap px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex h-10 w-16 items-center justify-center rounded-full bg-blue-100 text-sm font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:((a=r==null?void 0:r.grievances)==null?void 0:a.total_grievances)||0})}),e.jsx("td",{className:"whitespace-nowrap px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex h-10 w-16 items-center justify-center rounded-full bg-yellow-100 text-sm font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:((d=r==null?void 0:r.grievances)==null?void 0:d.pending)||0})}),e.jsx("td",{className:"whitespace-nowrap px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex h-10 w-16 items-center justify-center rounded-full bg-green-100 text-sm font-medium text-green-800 dark:bg-green-900 dark:text-green-200",children:((s=r==null?void 0:r.grievances)==null?void 0:s.resolved)||0})}),e.jsx("td",{className:"whitespace-nowrap px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex h-10 w-16 items-center justify-center rounded-full bg-red-100 text-sm font-medium text-red-800 dark:bg-red-900 dark:text-red-200",children:((n=r==null?void 0:r.grievances)==null?void 0:n.rejected)||0})})]},(r==null?void 0:r.ulb_id)||t)})})]})})})]})})})};export{C as default};
