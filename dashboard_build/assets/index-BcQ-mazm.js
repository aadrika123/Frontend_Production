import{r as p,j as e,p as F,h as q,q as B,B as S,z as w}from"./index-BGR8HrPG.js";import{b as R}from"./index.esm-CXbfmp2Q.js";import{C as T,b as I,c as L,a as V,e as E}from"./bugData-DaIceMQ5.js";import{S as h,a as x,b as m,c as u,d as r,I as H}from"./select-CfFdZsYr.js";import{T as k,D as A,a as O,b as U,c as W}from"./dialog-xsrtcxto.js";import{c as $,a as z}from"./index-XngXJuu5.js";const G=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var J=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],K=J.reduce((l,i)=>{const t=F(`Primitive.${i}`),n=p.forwardRef((o,j)=>{const{asChild:y,...d}=o,g=y?t:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...d,ref:j})});return n.displayName=`Primitive.${i}`,{...l,[i]:n}},{}),Q="Label",C=p.forwardRef((l,i)=>e.jsx(K.label,{...l,ref:i,onMouseDown:t=>{var o;t.target.closest("button, input, select, textarea")||((o=l.onMouseDown)==null||o.call(l,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));C.displayName=Q;var P=C;const X=B("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),a=p.forwardRef(({className:l,...i},t)=>e.jsx(P,{ref:t,className:q(X(),l),...i}));a.displayName=P.displayName;function te({userRole:l="Bug Reporter"}){const[i,t]=p.useState([]),[n,o]=p.useState(null),{register:j,handleSubmit:y,setValue:d,watch:g,reset:v,formState:{errors:c}}=R();g("type"),g("module");const M=s=>{const b=Array.from(s.target.files||[]),N=b.filter(f=>f.type.startsWith("image/"));if(N.length!==b.length){w.error("Only image files are allowed");return}t(f=>[...f,...N])},D=s=>{w.success("Bug reported successfully!"),v(),t([])};return e.jsxs(z,{children:[e.jsxs(T,{children:[e.jsxs(I,{className:"space-y-1 border-b bg-muted/40",children:[e.jsx(L,{className:"text-2xl font-semibold",children:"Report New Bug"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fill out the form below to report a bug or request an enhancement"})]}),e.jsx(V,{className:"pt-6",children:e.jsxs("form",{onSubmit:y(D),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"type",children:"Type *"}),e.jsxs(h,{onValueChange:s=>d("type",s),children:[e.jsx(x,{children:e.jsx(m,{placeholder:"Select type"})}),e.jsxs(u,{children:[e.jsx(r,{value:"Bug",children:"Bug"}),e.jsx(r,{value:"Enhancement",children:"Enhancement"})]})]}),c.type&&e.jsx("p",{className:"text-sm text-red-500",children:"Type is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"module",children:"Module *"}),e.jsxs(h,{onValueChange:s=>d("module",s),children:[e.jsx(x,{children:e.jsx(m,{placeholder:"Select module"})}),e.jsx(u,{children:E.map(s=>e.jsx(r,{value:s,children:s},s))})]}),c.module&&e.jsx("p",{className:"text-sm text-red-500",children:"Module is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"priority",children:"Priority *"}),e.jsxs(h,{onValueChange:s=>d("priority",s),children:[e.jsx(x,{children:e.jsx(m,{placeholder:"Select priority"})}),e.jsxs(u,{children:[e.jsx(r,{value:"Low",children:"Low"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"High",children:"High"}),e.jsx(r,{value:"Critical",children:"Critical"})]})]}),c.priority&&e.jsx("p",{className:"text-sm text-red-500",children:"Priority is required"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"source",children:"Source *"}),e.jsxs(h,{onValueChange:s=>d("source",s),children:[e.jsx(x,{children:e.jsx(m,{placeholder:"Select source"})}),e.jsxs(u,{children:[e.jsx(r,{value:"Web",children:"Web"}),e.jsx(r,{value:"Mobile App",children:"Mobile App"}),e.jsx(r,{value:"API",children:"API"}),e.jsx(r,{value:"Other",children:"Other"})]})]}),c.source&&e.jsx("p",{className:"text-sm text-red-500",children:"Source is required"})]}),l==="Developer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"complexity",children:"Complexity"}),e.jsxs(h,{onValueChange:s=>d("complexity",s),children:[e.jsx(x,{children:e.jsx(m,{placeholder:"Select complexity"})}),e.jsxs(u,{children:[e.jsx(r,{value:"Low",children:"Low"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"High",children:"High"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"title",children:"Title *"}),e.jsx(H,{id:"title",placeholder:"Enter a descriptive title for the bug",...j("title",{required:"Title is required"})}),c.title&&e.jsx("p",{className:"text-sm text-red-500",children:c.title.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",children:"Description *"}),e.jsx(k,{id:"description",rows:4,placeholder:"Provide detailed description of the bug or enhancement request",...j("description",{required:"Description is required"})}),c.description&&e.jsx("p",{className:"text-sm text-red-500",children:c.description.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Screenshots"}),e.jsxs("div",{className:"rounded-lg border-2 border-dashed p-6 text-center",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsxs("label",{htmlFor:"screenshots",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium",children:"Upload screenshots"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"PNG, JPG up to 10MB"})]}),e.jsx("input",{id:"screenshots",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:M})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>{v(),t([])},children:"Reset"}),e.jsx(S,{type:"submit",children:"Submit Bug Report"})]})]})})]}),e.jsx(A,{open:!!n,onOpenChange:()=>o(null),children:e.jsxs(O,{className:"max-w-3xl",children:[e.jsx(U,{children:e.jsx(W,{children:"Screenshot Preview"})}),n&&e.jsx("img",{src:n,alt:"Screenshot preview",className:"h-auto max-h-96 w-full object-contain"})]})})]})}export{te as default};
