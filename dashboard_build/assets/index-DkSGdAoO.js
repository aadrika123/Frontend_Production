import{j as t,r as e,N as u}from"./index-B_2X9o8a.js";import{A as L,$ as M}from"./AnimationDashboard-Q1evI3YY.js";import{G as S}from"./GeoMapIndex-DLGdIKXT.js";import{P as E}from"./index-BwxxsbhI.js";import{u as D,b as I}from"./useCustomQuery-BjLlueRp.js";import"./index-Bg1PLa6P.js";const P=({activateBottomErrorCard:i,errorTitle:l})=>t.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:l}),t.jsx("button",{onClick:()=>i(!1,""),className:"ml-4 text-white hover:text-gray-200",children:"Ã—"})]})});function U(){const[i,l]=e.useState(null),[f,h]=e.useState(null),[r,m]=e.useState(null),[x,d]=e.useState(!1),[c,p]=e.useState(!1),[b,j]=e.useState(!1),[g,o]=e.useState(null),v=D({}),w=I(),y=async()=>{d(!0);try{const s=await w.mutateAsync({api:u.getUlbList});s.data.status?l(s.data.data):o(s.data.message)}catch{n(!0,"Server error occurred. Please try again later.")}finally{d(!1)}},N=async s=>{try{const a=await v.mutateAsync({api:u.getWardListByULB,data:{ulbId:s}});a.data.status?h(a.data.data):o(a.data.message)}catch{n(!0,"Server error occurred. Please try again later.")}},n=(s,a)=>{o(a),j(s)};return e.useEffect(()=>{y()},[]),e.useEffect(()=>{r&&N(r)},[r]),x?t.jsx("div",{className:"mx-auto flex h-screen w-screen items-start justify-start bg-white",children:t.jsx("div",{className:"mx-auto w-[40%]",children:t.jsx(L,{})})}):t.jsx(E,{title:"Heat Maps Dashboard",children:t.jsxs("div",{className:"h-full",children:[t.jsx("div",{className:"z-10 w-[200px] bg-blue-600",children:b&&t.jsx(P,{activateBottomErrorCard:n,errorTitle:g})}),t.jsx("div",{className:"h-full",children:t.jsx("div",{className:"h-full",children:t.jsxs("div",{className:"relative h-full w-full rounded-lg bg-white shadow-xl",children:[t.jsx("div",{className:"h-full p-4",children:t.jsx(S,{wardListData:f,ulbListData:i,ulbId:r,setUlbId:m,isLoadingGeoMap:c,setIsLoadingGeoMap:p})}),c&&t.jsx("div",{className:"absolute left-0 top-0 flex h-full w-full items-center justify-center",children:t.jsx("div",{className:"rounded-full",children:t.jsx(M,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0})})})]})})})]})})}function k(){return t.jsx(U,{})}export{k as default};
