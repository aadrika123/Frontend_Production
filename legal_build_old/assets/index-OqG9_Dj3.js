import{e as z,j as e,r as m,l as C,u as O,n as Y,B as T,_ as N,o as I,t as we}from"./index-orVNqCCu.js";import{h as E}from"./moment-C5S46NFB.js";import{S as Z,C as P,c as R,a as Je,b as Ze,d as Ke}from"./separator-DEc8l5e7.js";import{u as B,c as Qe,a as V}from"./useCustomQuery-0EAvpulS.js";import{S as K}from"./Spinner-v6YhbdYC.js";import{c as Xe}from"./index-CjWnWL5n.js";import{D as Q,a as X,b as ee,c as se,d as te,g as ae,f as re,e as ne,T as le,h as Ce,i as es,O as ss,W as ts,C as as,j as rs,k as ns,l as Ae,P as ls,R as os}from"./dialog-xPl9VJ8a.js";import{u as cs,C as is,c as oe,b as M,g as ds,a as ce,o as ie,F as de,f as ms,R as J,B as me}from"./switch-D0zwZKkr.js";import{R as xe}from"./RHFTextArea-BGIIGSZj.js";import{I as xs}from"./select-CpbUXXes.js";import{F as q}from"./file-text-BbXHhqUa.js";import{C as U}from"./calendar-xB4DWfil.js";import{U as us}from"./user-D3QTPEDu.js";import{C as hs}from"./clock-eS8q9-AX.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=z("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function gs({name:s,label:t,isDynamic:n,isRequired:c,...a}){const{control:i,setValue:x}=cs();return e.jsx(is,{name:s,control:i,render:({field:{ref:u},fieldState:{error:p}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:t,children:[t," ",c&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(xs,{type:"file",onChange:r=>{x(s,r.target.files?r.target.files[0]:null)},ref:u,className:`mt-1 ${p?"border-red-400":null}`,...a}),p&&e.jsx("span",{className:"text-red-400 text-xs",children:p.message})]})})}const fs=(s,t,n)=>{Xe({customUI:({onClose:c})=>e.jsxs("div",{className:"rounded-md bg-white p-4 shadow-lg",children:[e.jsx("h1",{className:"text-lg font-bold",children:s}),e.jsx("p",{className:"text-sm",children:t}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{className:"rounded-md bg-red-500 px-4 py-1 text-white",onClick:()=>{n(),c()},children:"Yes"}),e.jsx("button",{className:"ml-2 rounded-md bg-gray-500 px-4 py-1 text-white",onClick:c,children:"No"})]})]})})},G=[{value:"orderSheet",label:"Order Sheet"},{value:"judgementCopy",label:"Judgement Copy"},{value:"HearingDocument",label:"Hearing Document"},{value:"Other",label:"Other"}],js=oe().shape({documentName:M().required("Document Name is required"),docType:M(),docPath:ds().required("Document is required"),description:M().required("Description is required"),currentHearingDate:M().when("documentName",{is:"Hearing Document",then:()=>M().required("Hearing Date is required")})});function Ns({title:s,id:t,edit:n,refetch:c}){var v,A,o;const a=B({}),i=Qe({}),[x,u]=m.useState(""),p=m.useRef(null),{data:r,isFetching:y}=V({api:`${C.getCaseTypeById}/${t}`,key:"getCaseTypeById",options:{enabled:n}}),{user:g}=O(),j=ce({defaultValues:{documentName:((v=r==null?void 0:r.data)==null?void 0:v.document_name)||"",docType:((A=r==null?void 0:r.data)==null?void 0:A.doc_type)||"",docPath:void 0,description:((o=r==null?void 0:r.data)==null?void 0:o.description)||""},resolver:ie(js)}),{id:f}=Y(),b=async d=>{var h,F;const _=new FormData;_.append("img",d);try{const w=await i.mutateAsync({api:C.uploadDocumentDms,data:_});if((h=w.data)!=null&&h.status)return w.data.data;throw new Error(((F=w.data)==null?void 0:F.message)||"DMS upload failed")}catch(w){throw console.error("DMS Upload Error:",w),w}},D=async d=>{var _,h,F,w,L,be,ve,De;try{let $=x;if((!n||d.docPath instanceof File)&&(N.loading("Uploading document..."),$=await b(d.docPath),u($),N.dismiss()),n&&d){const W={id:t,documentName:d.documentName,description:d.description,docPath:$,docType:d.docType,currentHearingDate:d.currentHearingDate},S=await a.mutateAsync({api:C.updateCaseType,data:W});(_=S.data)!=null&&_.success?(N.success((h=S==null?void 0:S.data)==null?void 0:h.message),(F=p.current)==null||F.click()):N.error(((w=S.data)==null?void 0:w.message)||"Document updated successfully")}else{const W={caseId:f||"",documentName:d.documentName,description:d.description,docPath:$,actionByUserId:g==null?void 0:g._id,actionByRoleId:g==null?void 0:g.roleId,actionByRoleName:g==null?void 0:g.roleName,actionByUserName:g==null?void 0:g.fullName,currentHearingDate:d.currentHearingDate},S=await a.mutateAsync({api:C.attachDocument,data:W});(L=S.data)!=null&&L.success?(N.success((be=S==null?void 0:S.data)==null?void 0:be.message),(ve=p.current)==null||ve.click()):N.error(((De=S.data)==null?void 0:De.message)||"Document not attached successfully"),j.reset({documentName:"",description:"",docPath:""})}c(),u("")}catch($){console.log("Submit Error:",$),N.error("An error occurred while processing your request")}};m.useEffect(()=>{var d,_,h,F,w,L;n&&r?(j.reset({documentName:((d=r.data)==null?void 0:d.document_name)||"",description:((_=r.data)==null?void 0:_.description)||"",docPath:(h=r.data)==null?void 0:h.document_path,docType:(F=r.data)==null?void 0:F.doc_type,currentHearingDate:((w=r.data)==null?void 0:w.current_hearing_date)||""}),u(((L=r.data)==null?void 0:L.document_path)||"")):(j.reset({documentName:"",description:"",docPath:"",docType:"",currentHearingDate:""}),u(""))},[n,r]);const l=j.formState.isSubmitting||i.isPending;return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(T,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:j,onSubmit:j.handleSubmit(D),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ms,{label:"Select Document",name:"documentName",data:(G==null?void 0:G.map(d=>({label:String(d.label),value:String(d.label)})))||[]})}),j.watch("documentName")=="Hearing Document"&&e.jsx("div",{children:e.jsx(J,{label:"Current hearing date",name:"currentHearingDate",type:"date"})}),e.jsx("div",{children:e.jsx(gs,{label:"Upload Document",name:"docPath",placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(xe,{label:"Description",name:"description",placeholder:"Enter your description"})}),e.jsx(Z,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(T,{variant:"outline",ref:p,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:l,children:"Save changes"})]})]})})]})}function nt({caseStatus:s}){var j,f,b,D;const{user:t}=O(),[n,c]=m.useState(""),[a,i]=m.useState(""),[x,u]=m.useState(!1),{id:p}=Y(),r=V({api:`${C.getAllDocuments}/${p}`,key:"getAllDocumentsList",value:[],options:{enabled:!0}}),y=B({}),g=async l=>{fs("Are you sure?","Please confirm",async()=>{var v,A,o;try{const d=await y.mutateAsync({api:`${C.deleteAttachedDocument}`,data:{id:l}});(v=d==null?void 0:d.data)!=null&&v.success?(N.success(((A=d==null?void 0:d.data)==null?void 0:A.message)||"Deleted successfully"),r.refetch()):N.error(((o=d==null?void 0:d.data)==null?void 0:o.message)||"Failed to delete")}catch(d){N.error("Error deleting item"),console.error("Delete Error:",d)}})};return e.jsx("main",{className:"min-h-screen bg-gray-50/50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Case Related Documents"})}),s!="2"&&e.jsx(Ns,{title:x?"Edit Document":"Attach Document",id:a,edit:x,setEdit:u,refetch:r.refetch})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.isLoading?e.jsx(P,{children:e.jsx(R,{className:"flex h-32 items-center justify-center",children:e.jsx(K,{})})}):e.jsxs(e.Fragment,{children:[(f=(j=r==null?void 0:r.data)==null?void 0:j.data)==null?void 0:f.map((l,v)=>e.jsxs(P,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(Je,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ze,{className:"text-lg font-semibold text-gray-900",children:(l==null?void 0:l.document_name)||"Document"}),e.jsxs(Ke,{className:"mt-1 text-sm text-gray-600",children:["Case ID: #",l==null?void 0:l.case_id," â€¢ Document #",v+1]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs("div",{className:"",children:[e.jsxs("h1",{children:["Created:"," ",E(l==null?void 0:l.created_at).format("DD-MM-YYYY")]}),(l==null?void 0:l.document_name)==="Hearing Document"&&e.jsxs("h1",{children:["Current Hearing Date:"," ",E(l==null?void 0:l.current_hearing_date).format("DD-MM-YYYY")]})]}),s!="2"&&(t==null?void 0:t.roleId)==77&&e.jsx("div",{className:"ml-auto flex justify-end",children:e.jsx(T,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>g(l==null?void 0:l.id),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})]})}),e.jsxs(R,{className:"pt-0",children:[(l==null?void 0:l.description)&&e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-gray-700",children:l.description}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-4 text-sm sm:grid-cols-2 lg:grid-cols-3",children:[(l==null?void 0:l.doc_type)&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsxs("span",{children:["Type: ",l.doc_type]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(us,{className:"h-4 w-4"}),e.jsxs("span",{children:["Action By:","",e.jsx("span",{className:"font-medium",children:l==null?void 0:l.action_by_role_name}),l!=null&&l.action_by_user_name?` (${l==null?void 0:l.action_by_user_name})`:""]})]})]}),(l==null?void 0:l.document_path)&&e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Document Path:"})]}),e.jsx("a",{href:l.document_path,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"View Document"})]}),e.jsx("p",{className:"mt-1 break-all text-xs text-gray-500",children:l.document_path})]})]})]},l==null?void 0:l.id)),((D=(b=r==null?void 0:r.data)==null?void 0:b.data)==null?void 0:D.length)===0&&e.jsx(P,{className:"py-12 text-center",children:e.jsxs(R,{children:[e.jsx(q,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:n?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})})}function ys(s,t=[]){let n=[];function c(i,x){const u=m.createContext(x),p=n.length;n=[...n,x];const r=g=>{var v;const{scope:j,children:f,...b}=g,D=((v=j==null?void 0:j[s])==null?void 0:v[p])||u,l=m.useMemo(()=>b,Object.values(b));return e.jsx(D.Provider,{value:l,children:f})};r.displayName=i+"Provider";function y(g,j){var D;const f=((D=j==null?void 0:j[s])==null?void 0:D[p])||u,b=m.useContext(f);if(b)return b;if(x!==void 0)return x;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[r,y]}const a=()=>{const i=n.map(x=>m.createContext(x));return function(u){const p=(u==null?void 0:u[s])||i;return m.useMemo(()=>({[`__scope${s}`]:{...u,[s]:p}}),[u,p])}};return a.scopeName=s,[c,bs(a,...t)]}function bs(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const c=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const x=c.reduce((u,{useScope:p,scopeName:r})=>{const g=p(i)[`__scope${r}`];return{...u,...g}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:x}),[x])}};return n.scopeName=t.scopeName,n}function _e(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function vs(...s){return t=>{let n=!1;const c=s.map(a=>{const i=_e(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<c.length;a++){const i=c[a];typeof i=="function"?i():_e(s[a],null)}}}}function Se(...s){return m.useCallback(vs(...s),s)}function Ds(s,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(s==null||s(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}var _s=Symbol("radix.slottable");function ws(s){const t=({children:n})=>e.jsx(e.Fragment,{children:n});return t.displayName=`${s}.Slottable`,t.__radixId=_s,t}var Me="AlertDialog",[Cs,lt]=ys(Me,[Ce]),k=Ce(),Pe=s=>{const{__scopeAlertDialog:t,...n}=s,c=k(t);return e.jsx(os,{...c,...n,modal:!0})};Pe.displayName=Me;var As="AlertDialogTrigger",Ss=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,a=k(n);return e.jsx(es,{...a,...c,ref:t})});Ss.displayName=As;var Ms="AlertDialogPortal",Re=s=>{const{__scopeAlertDialog:t,...n}=s,c=k(t);return e.jsx(ls,{...c,...n})};Re.displayName=Ms;var Ps="AlertDialogOverlay",Te=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,a=k(n);return e.jsx(ss,{...a,...c,ref:t})});Te.displayName=Ps;var H="AlertDialogContent",[Rs,Ts]=Cs(H),ks=ws("AlertDialogContent"),ke=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,children:c,...a}=s,i=k(n),x=m.useRef(null),u=Se(t,x),p=m.useRef(null);return e.jsx(ts,{contentName:H,titleName:Fe,docsSlug:"alert-dialog",children:e.jsx(Rs,{scope:n,cancelRef:p,children:e.jsxs(as,{role:"alertdialog",...i,...a,ref:u,onOpenAutoFocus:Ds(a.onOpenAutoFocus,r=>{var y;r.preventDefault(),(y=p.current)==null||y.focus({preventScroll:!0})}),onPointerDownOutside:r=>r.preventDefault(),onInteractOutside:r=>r.preventDefault(),children:[e.jsx(ks,{children:c}),e.jsx(Is,{contentRef:x})]})})})});ke.displayName=H;var Fe="AlertDialogTitle",Ie=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,a=k(n);return e.jsx(rs,{...a,...c,ref:t})});Ie.displayName=Fe;var $e="AlertDialogDescription",Ee=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,a=k(n);return e.jsx(ns,{...a,...c,ref:t})});Ee.displayName=$e;var Fs="AlertDialogAction",He=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,a=k(n);return e.jsx(Ae,{...a,...c,ref:t})});He.displayName=Fs;var Oe="AlertDialogCancel",Ye=m.forwardRef((s,t)=>{const{__scopeAlertDialog:n,...c}=s,{cancelRef:a}=Ts(Oe,n),i=k(n),x=Se(t,a);return e.jsx(Ae,{...i,...c,ref:x})});Ye.displayName=Oe;var Is=({contentRef:s})=>{const t=`\`${H}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${H}\` by passing a \`${$e}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${H}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var c;document.getElementById((c=s.current)==null?void 0:c.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},$s=Pe,Es=Re,Be=Te,Le=ke,qe=He,Ue=Ye,ze=Ie,Ve=Ee;const We=$s,Hs=Es,Ge=m.forwardRef(({className:s,...t},n)=>e.jsx(Be,{className:I("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:n}));Ge.displayName=Be.displayName;const he=m.forwardRef(({className:s,...t},n)=>e.jsxs(Hs,{children:[e.jsx(Ge,{}),e.jsx(Le,{ref:n,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));he.displayName=Le.displayName;const pe=({className:s,...t})=>e.jsx("div",{className:I("flex flex-col space-y-2 text-center sm:text-left",s),...t});pe.displayName="AlertDialogHeader";const ge=({className:s,...t})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});ge.displayName="AlertDialogFooter";const fe=m.forwardRef(({className:s,...t},n)=>e.jsx(ze,{ref:n,className:I("text-lg font-semibold",s),...t}));fe.displayName=ze.displayName;const je=m.forwardRef(({className:s,...t},n)=>e.jsx(Ve,{ref:n,className:I("text-sm text-muted-foreground",s),...t}));je.displayName=Ve.displayName;const Ne=m.forwardRef(({className:s,...t},n)=>e.jsx(qe,{ref:n,className:I(we(),s),...t}));Ne.displayName=qe.displayName;const ye=m.forwardRef(({className:s,...t},n)=>e.jsx(Ue,{ref:n,className:I(we({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));ye.displayName=Ue.displayName;const Os=oe().shape({content:M().required().label("Content")});function Ys({title:s,refetch:t}){const n=B({}),{id:c}=Y(),{user:a}=O(),i=m.useRef(null),x=ce({defaultValues:{content:""},resolver:ie(Os)}),u=async p=>{var r,y,g,j;try{const f=await n.mutateAsync({api:C.createContentCaseLog,data:{case_id:Number(c),content:p.content,action_by_user_name:a==null?void 0:a.fullName,action_by_user_id:a==null?void 0:a._id,action_by_role_name:a==null?void 0:a.roleName,action_by_role_id:a==null?void 0:a.roleId}});(r=f.data)!=null&&r.success?(N.success((y=f==null?void 0:f.data)==null?void 0:y.message),x.reset({content:""}),t==null||t(),(g=i.current)==null||g.click()):N.error(((j=f.data)==null?void 0:j.message)||"created successfully")}catch(f){console.log(f)}};return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(T,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Case Log"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(xe,{name:"content",placeholder:"Enter your content"})}),e.jsx(Z,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(T,{ref:i,variant:"outline",children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:n.isPending,children:"Save changes"})]})]})})]})}function ot({caseStatus:s}){var f,b,D,l,v,A;const[t,n]=m.useState(""),[c,a]=m.useState(!1),[i,x]=m.useState(null),{user:u}=O(),{id:p}=Y(),r=V({api:`${C.getContentLogByCaseId}/${p}`,key:"asdasdasd23123123edasdasdas",value:[],options:{enabled:!0}}),y=o=>{x(o),a(!0)},g=B({}),j=async()=>{var o,d,_;try{const h=await g.mutateAsync({api:`${C.deleteCaseContentLog}`,data:{id:i==null?void 0:i.id}});(o=h==null?void 0:h.data)!=null&&o.success?(N.success(((d=h==null?void 0:h.data)==null?void 0:d.message)||"Deleted successfully"),r.refetch()):N.error(((_=h==null?void 0:h.data)==null?void 0:_.message)||"Failed to delete")}catch(h){N.error("Error deleting item"),console.error("Delete Error:",h)}finally{a(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(We,{open:c,onOpenChange:a,children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(fe,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(je,{className:"text-sm text-slate-600",children:['This action cannot be undone. The document "',(i==null?void 0:i.action_by_role_name)||"",'" will be permanently deleted.']})]}),e.jsxs(ge,{className:"gap-2",children:[e.jsx(ye,{className:"text-sm",children:"Cancel"}),e.jsx(Ne,{onClick:j,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Content"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((b=(f=r==null?void 0:r.data)==null?void 0:f.data)==null?void 0:b.length)||0," Total Case Content"]})]}),s!="2"&&e.jsx(Ys,{title:"Add Case Log",refetch:r.refetch})]})}),e.jsx("div",{className:"space-y-3",children:r.isLoading?e.jsx(P,{className:"bg-white",children:e.jsx(R,{className:"flex h-24 items-center justify-center",children:e.jsx(K,{})})}):e.jsxs(e.Fragment,{children:[(l=(D=r==null?void 0:r.data)==null?void 0:D.data)==null?void 0:l.map(o=>e.jsx(P,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(q,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"mb-1 truncate text-sm font-semibold text-slate-900",children:(o==null?void 0:o.action_by_role_name)||"Document"}),e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:o==null?void 0:o.content}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsx("span",{children:E(o==null?void 0:o.created_at).format("MMM DD, YYYY")})]})})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&s!="2"&&e.jsx(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>y(o),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})},o==null?void 0:o.id)),((A=(v=r==null?void 0:r.data)==null?void 0:v.data)==null?void 0:A.length)===0&&e.jsx(P,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(R,{className:"py-8 text-center",children:[e.jsx(q,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No content found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:t?"Try adjusting your search criteria":"Upload your first document to get started"})]})})]})})]})]})}const Bs=oe().shape({hearing_date:M().required().label("Hearing Date"),hearing_time:M().required().label("Hearing Time"),description:M().optional().label("Description")});function Ls({title:s,refetch:t}){const n=B({}),{id:c}=Y(),{user:a}=O(),i=m.useRef(null),x=ce({defaultValues:{hearing_date:"",hearing_time:"",description:""},resolver:ie(Bs)}),u=async p=>{var r,y,g,j;try{const f=await n.mutateAsync({api:C.createCaseHearingSchedule,data:{case_id:Number(c),hearing_date:p.hearing_date,hearing_time:p.hearing_time,description:p.description,action_by_user_name:a==null?void 0:a.fullName,action_by_user_id:a==null?void 0:a._id,action_by_role_name:a==null?void 0:a.roleName,action_by_role_id:a==null?void 0:a.roleId}});(r=f.data)!=null&&r.success?(N.success((y=f==null?void 0:f.data)==null?void 0:y.message),(g=i.current)==null||g.click()):N.error(((j=f.data)==null?void 0:j.message)||"Something went wrong"),x.reset({hearing_date:"",hearing_time:"",description:""}),t()}catch(f){console.log(f)}};return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(T,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Add Case Hearing"]})}),e.jsx(ee,{className:"sm:max-w-[425px]",children:e.jsxs(de,{methods:x,onSubmit:x.handleSubmit(u),children:[e.jsxs(se,{children:[e.jsx(te,{children:s}),e.jsx(ae,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(J,{name:"hearing_date",type:"date",placeholder:"Select date",label:"Hearing Date"})}),e.jsx("div",{children:e.jsx(J,{name:"hearing_time",type:"time",placeholder:"Select time",label:"Hearing Time"})}),e.jsx("div",{children:e.jsx(xe,{name:"description",placeholder:"Enter hearing description (optional)",label:"Description"})}),e.jsx(Z,{})]}),e.jsxs(re,{className:"mt-5 flex justify-between",children:[e.jsx(ne,{asChild:!0,children:e.jsx(T,{ref:i,variant:"outline",children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:n.isPending,children:"Save changes"})]})]})})]})}function ct({caseStatus:s}){var f,b,D,l,v,A;const[t,n]=m.useState(""),[c,a]=m.useState(!1),[i,x]=m.useState(null),{user:u}=O(),{id:p}=Y(),r=V({api:`${C.getCaseHearingScheduleByCaseId}/${p}`,key:"case-hearings-list",value:[],options:{enabled:!0}}),y=o=>{x(o),a(!0)},g=B({}),j=async()=>{var o,d,_;try{const h=await g.mutateAsync({api:`${C.deleteCaseHearingSchedule}`,data:{id:i==null?void 0:i.id}});(o=h==null?void 0:h.data)!=null&&o.success?(N.success(((d=h==null?void 0:h.data)==null?void 0:d.message)||"Deleted successfully"),r.refetch()):N.error(((_=h==null?void 0:h.data)==null?void 0:_.message)||"Failed to delete")}catch(h){N.error("Error deleting item"),console.error("Delete Error:",h)}finally{a(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4",children:[e.jsx(We,{open:c,onOpenChange:a,children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(fe,{className:"text-lg font-semibold text-slate-900",children:"Are you sure you want to delete?"}),e.jsxs(je,{className:"text-sm text-slate-600",children:['This action cannot be undone. The hearing on "',E(i==null?void 0:i.hearing_date).format("MMM DD, YYYY"),'" will be permanently deleted.']})]}),e.jsxs(ge,{className:"gap-2",children:[e.jsx(ye,{className:"text-sm",children:"Cancel"}),e.jsx(Ne,{onClick:j,className:"bg-red-600 text-sm hover:bg-red-700",children:"Delete"})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Case Hearings"}),e.jsxs("p",{className:"text-sm text-slate-600",children:[((b=(f=r==null?void 0:r.data)==null?void 0:f.data)==null?void 0:b.length)||0," Total Case Hearings"]})]}),s!="2"&&e.jsx(Ls,{title:"Add Case Log",refetch:r.refetch})]})}),e.jsx("div",{className:"space-y-3",children:r.isLoading?e.jsx(P,{className:"bg-white",children:e.jsx(R,{className:"flex h-24 items-center justify-center",children:e.jsx(K,{})})}):e.jsxs(e.Fragment,{children:[(l=(D=r==null?void 0:r.data)==null?void 0:D.data)==null?void 0:l.map((o,d)=>e.jsx(P,{className:"border border-slate-200 bg-white transition-all duration-200 hover:border-slate-300 hover:shadow-md",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:e.jsx(U,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex  gap-2",children:[e.jsxs("h3",{className:"mb-1 text-sm font-semibold text-slate-900",children:["Hearing -"," ",E(o==null?void 0:o.hearing_date).format("MMM DD, YYYY")," ","-"]}),e.jsx("div",{children:d==0?e.jsx("h1",{className:"text-sm font-semibold text-green-600",children:"Next hearing"}):e.jsx("h1",{className:"text-sm font-semibold text-red-600",children:"Past"})})]}),(o==null?void 0:o.description)&&e.jsx("p",{className:"mb-2 line-clamp-2 text-xs text-slate-600",children:o.description}),e.jsxs("p",{className:"mb-2 text-xs text-slate-600",children:["Scheduled by:"," ",(o==null?void 0:o.action_by_user_name)||(o==null?void 0:o.action_by_role_name)]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsx("span",{children:E(o==null?void 0:o.hearing_date).format("MMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hs,{className:"h-3 w-3"}),e.jsx("span",{children:o==null?void 0:o.hearing_time})]})]})]})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-1",children:(u==null?void 0:u.roleId)==77&&s!="2"&&e.jsx(T,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>y(o),children:e.jsx(le,{className:"h-3.5 w-3.5"})})})]})})},o==null?void 0:o.id)),((A=(v=r==null?void 0:r.data)==null?void 0:v.data)==null?void 0:A.length)===0&&e.jsx(P,{className:"border-2 border-dashed border-slate-200 bg-white",children:e.jsxs(R,{className:"py-8 text-center",children:[e.jsx(U,{className:"mx-auto mb-3 h-8 w-8 text-slate-400"}),e.jsx("h3",{className:"mb-1 text-sm font-medium text-slate-900",children:"No hearings found"}),e.jsx("p",{className:"mb-4 text-xs text-slate-600",children:t?"Try adjusting your search criteria":"Schedule your first hearing to get started"})]})})]})})]})]})}export{at as B,ot as C,rt as F,nt as H,ct as a};
