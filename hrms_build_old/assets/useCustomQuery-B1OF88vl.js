var pt=i=>{throw TypeError(i)};var Z=(i,t,e)=>t.has(i)||pt("Cannot "+e);var s=(i,t,e)=>(Z(i,t,"read from private field"),e?e.call(i):t.get(i)),p=(i,t,e)=>t.has(i)?pt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),l=(i,t,e,r)=>(Z(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e),d=(i,t,e)=>(Z(i,t,"access private method"),e);import{ad as St,ae as w,af as z,ag as q,ah as Ut,ai as bt,aj as yt,ak as Dt,al as Pt,am as Tt,an as mt,ao as H,ap as vt,aq as Lt,r as m,ar as Et,j as At,k as jt,as as G}from"./index-DlldVtFq.js";var v,n,B,y,D,L,E,W,A,j,P,T,I,k,u,_,tt,et,st,it,rt,nt,at,wt,Ot,kt=(Ot=class extends St{constructor(t,e){super();p(this,u);p(this,v);p(this,n);p(this,B);p(this,y);p(this,D);p(this,L);p(this,E);p(this,W);p(this,A);p(this,j);p(this,P);p(this,T);p(this,I);p(this,k,new Set);this.options=e,l(this,v,t),l(this,E,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,n).addObserver(this),gt(s(this,n),this.options)?d(this,u,_).call(this):this.updateResult(),d(this,u,it).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ot(s(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ot(s(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,u,rt).call(this),d(this,u,nt).call(this),s(this,n).removeObserver(this)}setOptions(t,e){const r=this.options,o=s(this,n);if(this.options=s(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,s(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,u,at).call(this),s(this,n).setOptions(this.options),r._defaulted&&!z(this.options,r)&&s(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,n),observer:this});const c=this.hasListeners();c&&Rt(s(this,n),o,this.options,r)&&d(this,u,_).call(this),this.updateResult(e),c&&(s(this,n)!==o||w(this.options.enabled,s(this,n))!==w(r.enabled,s(this,n))||q(this.options.staleTime,s(this,n))!==q(r.staleTime,s(this,n)))&&d(this,u,tt).call(this);const a=d(this,u,et).call(this);c&&(s(this,n)!==o||w(this.options.enabled,s(this,n))!==w(r.enabled,s(this,n))||a!==s(this,I))&&d(this,u,st).call(this,a)}getOptimisticResult(t){const e=s(this,v).getQueryCache().build(s(this,v),t),r=this.createResult(e,t);return _t(this,r)&&(l(this,y,r),l(this,L,this.options),l(this,D,s(this,n).state)),r}getCurrentResult(){return s(this,y)}trackResult(t,e){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),e==null||e(o),t[o])})}),r}trackProp(t){s(this,k).add(t)}getCurrentQuery(){return s(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,v).defaultQueryOptions(t),r=s(this,v).getQueryCache().build(s(this,v),e);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,e))}fetch(t){return d(this,u,_).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,y)))}createResult(t,e){var ft;const r=s(this,n),o=this.options,c=s(this,y),a=s(this,D),f=s(this,L),C=t!==r?t.state:s(this,B),{state:b}=t;let h={...b},K=!1,O;if(e._optimisticResults){const S=this.hasListeners(),Y=!S&&gt(t,e),Mt=S&&Rt(t,r,e,o);(Y||Mt)&&(h={...h,...Tt(b.data,t.options)}),e._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:N,errorUpdatedAt:ct,status:U}=h;if(e.select&&h.data!==void 0)if(c&&h.data===(a==null?void 0:a.data)&&e.select===s(this,W))O=s(this,A);else try{l(this,W,e.select),O=e.select(h.data),O=mt(c==null?void 0:c.data,O,e),l(this,A,O),l(this,E,null)}catch(S){l(this,E,S)}else O=h.data;if(e.placeholderData!==void 0&&O===void 0&&U==="pending"){let S;if(c!=null&&c.isPlaceholderData&&e.placeholderData===(f==null?void 0:f.placeholderData))S=c.data;else if(S=typeof e.placeholderData=="function"?e.placeholderData((ft=s(this,j))==null?void 0:ft.state.data,s(this,j)):e.placeholderData,e.select&&S!==void 0)try{S=e.select(S),l(this,E,null)}catch(Y){l(this,E,Y)}S!==void 0&&(U="success",O=mt(c==null?void 0:c.data,S,e),K=!0)}s(this,E)&&(N=s(this,E),O=s(this,A),ct=Date.now(),U="error");const $=h.fetchStatus==="fetching",J=U==="pending",X=U==="error",lt=J&&$,dt=O!==void 0;return{status:U,fetchStatus:h.fetchStatus,isPending:J,isSuccess:U==="success",isError:X,isInitialLoading:lt,isLoading:lt,data:O,dataUpdatedAt:h.dataUpdatedAt,error:N,errorUpdatedAt:ct,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>C.dataUpdateCount||h.errorUpdateCount>C.errorUpdateCount,isFetching:$,isRefetching:$&&!J,isLoadingError:X&&!dt,isPaused:h.fetchStatus==="paused",isPlaceholderData:K,isRefetchError:X&&dt,isStale:ut(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,y),r=this.createResult(s(this,n),this.options);if(l(this,D,s(this,n).state),l(this,L,this.options),s(this,D).data!==void 0&&l(this,j,s(this,n)),z(r,e))return;l(this,y,r);const o={},c=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,f=typeof a=="function"?a():a;if(f==="all"||!f&&!s(this,k).size)return!0;const R=new Set(f??s(this,k));return this.options.throwOnError&&R.add("error"),Object.keys(s(this,y)).some(C=>{const b=C;return s(this,y)[b]!==e[b]&&R.has(b)})};(t==null?void 0:t.listeners)!==!1&&c()&&(o.listeners=!0),d(this,u,wt).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,u,it).call(this)}},v=new WeakMap,n=new WeakMap,B=new WeakMap,y=new WeakMap,D=new WeakMap,L=new WeakMap,E=new WeakMap,W=new WeakMap,A=new WeakMap,j=new WeakMap,P=new WeakMap,T=new WeakMap,I=new WeakMap,k=new WeakMap,u=new WeakSet,_=function(t){d(this,u,at).call(this);let e=s(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Ut)),e},tt=function(){d(this,u,rt).call(this);const t=q(this.options.staleTime,s(this,n));if(bt||s(this,y).isStale||!yt(t))return;const r=Dt(s(this,y).dataUpdatedAt,t)+1;l(this,P,setTimeout(()=>{s(this,y).isStale||this.updateResult()},r))},et=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,n)):this.options.refetchInterval)??!1},st=function(t){d(this,u,nt).call(this),l(this,I,t),!(bt||w(this.options.enabled,s(this,n))===!1||!yt(s(this,I))||s(this,I)===0)&&l(this,T,setInterval(()=>{(this.options.refetchIntervalInBackground||Pt.isFocused())&&d(this,u,_).call(this)},s(this,I)))},it=function(){d(this,u,tt).call(this),d(this,u,st).call(this,d(this,u,et).call(this))},rt=function(){s(this,P)&&(clearTimeout(s(this,P)),l(this,P,void 0))},nt=function(){s(this,T)&&(clearInterval(s(this,T)),l(this,T,void 0))},at=function(){const t=s(this,v).getQueryCache().build(s(this,v),this.options);if(t===s(this,n))return;const e=s(this,n);l(this,n,t),l(this,B,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},wt=function(t){H.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,y))}),s(this,v).getQueryCache().notify({query:s(this,n),type:"observerResultsUpdated"})})},Ot);function Kt(i,t){return w(t.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&t.retryOnMount===!1)}function gt(i,t){return Kt(i,t)||i.state.data!==void 0&&ot(i,t,t.refetchOnMount)}function ot(i,t,e){if(w(t.enabled,i)!==!1){const r=typeof e=="function"?e(i):e;return r==="always"||r!==!1&&ut(i,t)}return!1}function Rt(i,t,e,r){return(i!==t||w(r.enabled,i)===!1)&&(!e.suspense||i.state.status!=="error")&&ut(i,e)}function ut(i,t){return w(t.enabled,i)!==!1&&i.isStaleByTime(q(t.staleTime,i))}function _t(i,t){return!z(i.getCurrentResult(),t)}var Q,M,g,x,F,V,ht,Ct,Bt=(Ct=class extends St{constructor(t,e){super();p(this,F);p(this,Q);p(this,M);p(this,g);p(this,x);l(this,Q,t),this.setOptions(e),this.bindMethods(),d(this,F,V).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=s(this,Q).defaultMutationOptions(t),z(this.options,e)||s(this,Q).getMutationCache().notify({type:"observerOptionsUpdated",mutation:s(this,g),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&vt(e.mutationKey)!==vt(this.options.mutationKey)?this.reset():((r=s(this,g))==null?void 0:r.state.status)==="pending"&&s(this,g).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=s(this,g))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,F,V).call(this),d(this,F,ht).call(this,t)}getCurrentResult(){return s(this,M)}reset(){var t;(t=s(this,g))==null||t.removeObserver(this),l(this,g,void 0),d(this,F,V).call(this),d(this,F,ht).call(this)}mutate(t,e){var r;return l(this,x,e),(r=s(this,g))==null||r.removeObserver(this),l(this,g,s(this,Q).getMutationCache().build(s(this,Q),this.options)),s(this,g).addObserver(this),s(this,g).execute(t)}},Q=new WeakMap,M=new WeakMap,g=new WeakMap,x=new WeakMap,F=new WeakSet,V=function(){var e;const t=((e=s(this,g))==null?void 0:e.state)??Lt();l(this,M,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ht=function(t){H.batch(()=>{var e,r,o,c,a,f,R,C;if(s(this,x)&&this.hasListeners()){const b=s(this,M).variables,h=s(this,M).context;(t==null?void 0:t.type)==="success"?((r=(e=s(this,x)).onSuccess)==null||r.call(e,t.data,b,h),(c=(o=s(this,x)).onSettled)==null||c.call(o,t.data,null,b,h)):(t==null?void 0:t.type)==="error"&&((f=(a=s(this,x)).onError)==null||f.call(a,t.error,b,h),(C=(R=s(this,x)).onSettled)==null||C.call(R,void 0,t.error,b,h))}this.listeners.forEach(b=>{b(s(this,M))})})},Ct),xt=m.createContext(!1),Wt=()=>m.useContext(xt);xt.Provider;function Nt(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var qt=m.createContext(Nt()),Vt=()=>m.useContext(qt);function Ft(i,t){return typeof i=="function"?i(...t):!!i}function zt(){}var Ht=(i,t)=>{(i.suspense||i.throwOnError)&&(t.isReset()||(i.retryOnMount=!1))},Gt=i=>{m.useEffect(()=>{i.clearReset()},[i])},$t=({result:i,errorResetBoundary:t,throwOnError:e,query:r})=>i.isError&&!t.isReset()&&!i.isFetching&&r&&Ft(e,[i.error,r]),Jt=i=>{i.suspense&&typeof i.staleTime!="number"&&(i.staleTime=1e3)},Xt=(i,t)=>(i==null?void 0:i.suspense)&&t.isPending,Yt=(i,t,e)=>t.fetchOptimistic(i).catch(()=>{e.clearReset()});function Zt(i,t,e){var C,b,h,K;const r=Et(),o=Wt(),c=Vt(),a=r.defaultQueryOptions(i);(b=(C=r.getDefaultOptions().queries)==null?void 0:C._experimental_beforeQuery)==null||b.call(C,a),a._optimisticResults=o?"isRestoring":"optimistic",Jt(a),Ht(a,c),Gt(c);const[f]=m.useState(()=>new t(r,a)),R=f.getOptimisticResult(a);if(m.useSyncExternalStore(m.useCallback(O=>{const N=o?()=>{}:f.subscribe(H.batchCalls(O));return f.updateResult(),N},[f,o]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),m.useEffect(()=>{f.setOptions(a,{listeners:!1})},[a,f]),Xt(a,R))throw Yt(a,f,c);if($t({result:R,errorResetBoundary:c,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw R.error;return(K=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||K.call(h,a,R),a.notifyOnChangeProps?R:f.trackResult(R)}function It(i,t){return Zt(i,kt)}function Qt(i,t){const e=Et(),[r]=m.useState(()=>new Bt(e,i));m.useEffect(()=>{r.setOptions(i)},[r,i]);const o=m.useSyncExternalStore(m.useCallback(a=>r.subscribe(H.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=m.useCallback((a,f)=>{r.mutate(a,f).catch(zt)},[r]);if(o.error&&Ft(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:c,mutateAsync:o.mutate}}const te=m.forwardRef(({className:i,type:t,...e},r)=>At.jsx("input",{type:t,className:jt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",i),ref:r,...e}));te.displayName="Input";const ee=async(i,t)=>(await G.get(i,{...t})).data;function ae({key:i,api:t,options:e,value:r,config:o}){return It({queryKey:[i??t,...r??[]],queryFn:async()=>ee(t,o),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}function oe({key:i,api:t,options:e,value:r,config:o}){return It({queryKey:[i??t,...r??[]],queryFn:async()=>(await G.post(t,{...o})).data,refetchOnReconnect:"always",refetchOnWindowFocus:!1,...e})}const se=(i,t)=>G.post(i,t),he=({options:i})=>Qt({mutationFn:({api:t,data:e})=>se(t,e),...i}),ue=({options:i})=>Qt({mutationFn:({api:t,data:e})=>G.post(t,e,{headers:{"Content-Type":"multipart/form-data"}}),...i});export{te as I,oe as a,ae as b,ue as c,he as u};
