import{r as e,j as s,al as t}from"./vendor-RyuIgj66.js";import{P as a}from"./index-DFF4_m_G.js";import{B as i,t as n,g as l}from"./index-ey2GEmQz.js";import{C as r,c}from"./card-u7M7FP5y.js";import{T as d,a as m,b as o,c as x,d as p,e as j}from"./table-B_npepsp.js";import{A as h,a as u,b as v,c as f}from"./accordion-sVAat7fC.js";import{B as y}from"./badge-DbWnzWn2.js";import{u as N,b as g}from"./useCustomQuery-DTB6aAiD.js";import{S}from"./Spinner-BwGzvoRj.js";import{A as b,a as C,b as T,c as L,d as w,e as D,f as I,g as _}from"./alert-dialog-DDS3Mbsz.js";import{al as A,am as E,a9 as k,N as P}from"./icons-CxCh8mm_.js";import"./ui-B3c1eQmf.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const H={"80C":{name:"Section 80C",description:"PPF, LIC, ELSS, NSC, Tuition Fees, etc.",maxLimit:15e4},"80CCD":{name:"Section 80CCD(1B)",description:"Additional NPS Contribution",maxLimit:5e4},"80D":{name:"Section 80D",description:"Health Insurance Premium",maxLimit:1e5},"80E":{name:"Section 80E",description:"Education Loan Interest",maxLimit:null},"80G":{name:"Section 80G",description:"Donations to Charitable Organizations",maxLimit:null},SEC_24:{name:"Section 24(b)",description:"Home Loan Interest Deduction",maxLimit:2e5},HRA:{name:"HRA Exemption",description:"House Rent Allowance",maxLimit:null},"80TTA":{name:"Section 80TTA",description:"Savings Account Interest",maxLimit:1e4},"80U":{name:"Section 80U",description:"Disability Deduction",maxLimit:125e3},"80DD":{name:"Section 80DD",description:"Dependent Disability",maxLimit:125e3}},F=e=>null==e?"No Limit":`â‚¹${e.toLocaleString("en-IN")}`;function R(){var a;const R=N({}),[B,M]=e.useState(!1),[O,z]=e.useState(!1),G=g({api:n.getInvestmentTypes,key:"getInvestmentTypes",options:{enabled:!0}}),U=(null==(a=G.data)?void 0:a.data)||[],q=U.reduce((e,s)=>(e[s.section_code]||(e[s.section_code]=[]),e[s.section_code].push(s),e),{}),Q=Object.keys(q).sort();return s.jsxs("main",{className:"grid items-start",children:[s.jsx(b,{open:B,onOpenChange:M,children:s.jsxs(C,{children:[s.jsxs(T,{children:[s.jsx(L,{children:"Seed Investment Types"}),s.jsx(w,{children:"This will populate the investment type masters with default values for all tax sections (80C, 80D, 80E, etc.). Existing entries will be preserved."})]}),s.jsxs(D,{children:[s.jsx(I,{children:"Cancel"}),s.jsx(_,{onClick:async()=>{var e,s,a;z(!0);try{const i=await R.mutateAsync({api:n.seedInvestmentTypes,data:{}});(null==(e=null==i?void 0:i.data)?void 0:e.success)?(t.success((null==(s=null==i?void 0:i.data)?void 0:s.message)||"Investment types seeded successfully"),G.refetch(),M(!1)):t.error((null==(a=null==i?void 0:i.data)?void 0:a.message)||"Failed to seed investment types")}catch(i){t.error(l(i))}finally{z(!1)}},disabled:O,children:O?"Seeding...":"Seed Investment Types"})]})]})}),s.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[s.jsxs("div",{className:"flex w-full flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(y,{variant:"outline",className:"text-sm",children:["Total Types: ",U.length]}),s.jsxs(y,{variant:"outline",className:"text-sm",children:["Sections: ",Q.length]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(i,{variant:"outline",onClick:()=>G.refetch(),children:[s.jsx(A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),s.jsxs(i,{onClick:()=>M(!0),children:[s.jsx(E,{className:"mr-2 h-4 w-4"}),"Seed Default Types"]})]})]}),(null==G?void 0:G.isLoading)?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(S,{})}):0===U.length?s.jsx(r,{children:s.jsxs(c,{className:"py-12 text-center",children:[s.jsx(E,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold",children:"No Investment Types Found"}),s.jsx("p",{className:"text-muted-foreground",children:'Click "Seed Default Types" to populate the investment type masters.'}),s.jsxs(i,{className:"mt-4",onClick:()=>M(!0),children:[s.jsx(E,{className:"mr-2 h-4 w-4"}),"Seed Default Types"]})]})}):s.jsx(h,{type:"multiple",defaultValue:Q,className:"space-y-4",children:Q.map(e=>{const t=q[e],a=H[e]||{name:e,description:"",maxLimit:null};return s.jsxs(u,{value:e,className:"rounded-lg border bg-card",children:[s.jsx(v,{className:"px-4 hover:no-underline",children:s.jsxs("div",{className:"flex w-full items-center justify-between pr-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(y,{variant:"secondary",children:e}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:a.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(k,{className:"h-4 w-4"}),F(a.maxLimit)]}),s.jsxs(y,{variant:"outline",children:[t.length," types"]})]})]})}),s.jsx(f,{className:"px-4 pb-4",children:s.jsxs(d,{children:[s.jsx(m,{children:s.jsxs(o,{children:[s.jsx(x,{children:"#"}),s.jsx(x,{children:"Code"}),s.jsx(x,{children:"Investment Name"}),s.jsx(x,{children:"Max Limit"}),s.jsx(x,{children:"Proof Types"}),s.jsx(x,{children:"Status"})]})}),s.jsx(p,{children:t.sort((e,s)=>e.display_order-s.display_order).map((e,t)=>s.jsxs(o,{children:[s.jsx(j,{children:t+1}),s.jsx(j,{children:s.jsx(y,{variant:"outline",children:e.investment_code})}),s.jsx(j,{className:"font-medium",children:e.investment_name}),s.jsx(j,{children:F(e.max_limit)}),s.jsx(j,{children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(e.proof_types_accepted||[]).map(e=>s.jsxs(y,{variant:"secondary",className:"text-xs",children:[s.jsx(P,{className:"mr-1 h-3 w-3"}),e.replace("_"," ")]},e))})}),s.jsx(j,{children:s.jsx(y,{variant:1===e.status?"default":"secondary",children:1===e.status?"Active":"Inactive"})})]},e.id))})]})})]},e)})})]})]})}function B(){return s.jsx(a,{title:"Investment Type Masters",subTitle:"Manage investment types for tax declarations",children:s.jsx("div",{className:"py-12",children:s.jsx(R,{})})})}export{B as default};
