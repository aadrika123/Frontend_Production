import{h as e,f as s,r as i,j as a,z as t,B as l,e as n}from"./index-C0dR7KKl.js";import{P as r}from"./index-DLwgcCrU.js";import{h as d}from"./moment-CBOc1lqT.js";import{C as o,a as c,b as m,c as u}from"./card-dfHK731x.js";import{T as p,a as j,b as h,c as x,d as v,e as f}from"./table-DGsqq0wP.js";import{u as g,b as y}from"./useCustomQuery-DfubPPhS.js";import{P as S}from"./index-CtQoh3RB.js";import{S as N}from"./separator-DK9wbIss.js";import{S as b}from"./index-DxKRME66.js";import{S as E}from"./Spinner-Bh5S-NfG.js";import{a as T,o as w,c as D,b as k}from"./yup-D-4eAt9F.js";import{F as _}from"./datetime-picker-Chw5tpGr.js";import{R as A}from"./RHFTextField-Bf4PLUtQ.js";import{R as L}from"./RHFTextArea-CV_jXdwm.js";import{B as $}from"./ButtonLoading-CtnN6-Kp.js";import"./select-PSqof_An.js";import"./input-5m-sj67D.js";import"./switch-DfyNgsks.js";import"./checkbox-5PN_yyUS.js";import"./label-BBEmak6c.js";import{D as C}from"./index-Bak7Z6rK.js";import{L as F}from"./loader-circle-l2PdwOoK.js";import{t as P}from"./switch-DoCOgH6I.js";import"./calendar-D3nBqMDA.js";import"./chevron-right-ZD98JKF5.js";import"./clock-zyZI13Cr.js";import"./check-DJnOI1b1.js";const q=D().shape({doc_name:k().required("Document Name is required"),description:k().required("Description is required")});function B({open:l,setOpen:n,title:r,id:d,edit:o,setEdit:c,refetch:m}){var u;const p=g({}),{data:j,isFetching:h}=y({api:`${null==(u=e)?void 0:u.getEmpTypeById}/${s(String(d))}`,key:"getEmpTypeById",options:{enabled:o}}),x=T({defaultValues:{doc_name:"",description:""},resolver:w(q)});return i.useEffect(()=>{var e,s;o&&j?x.reset({doc_name:(null==(e=null==j?void 0:j.data)?void 0:e.doc_name)||"",description:(null==(s=null==j?void 0:j.data)?void 0:s.description)||""}):x.reset({doc_name:"",description:""})},[o,j]),a.jsx(C,{open:l,setOpen:n,title:r,setEdit:c,edit:o,isLoading:h,children:a.jsx(_,{methods:x,onSubmit:x.handleSubmit(async i=>{var a,l,r,u,j,h,v,f;try{if(o&&i){const n=await p.mutateAsync({api:`${null==(a=e)?void 0:a.updateEmpType}`,data:{id:s(String(d)),...i}});(null==(l=n.data)?void 0:l.success)?t.success(null==(r=null==n?void 0:n.data)?void 0:r.message):t.error((null==(u=n.data)?void 0:u.message)||"Document Type not updated successfully")}else{const s=await p.mutateAsync({api:null==(j=e)?void 0:j.createDocumentType,data:i});(null==(h=s.data)?void 0:h.success)?t.success(null==(v=null==s?void 0:s.data)?void 0:v.message):t.error((null==(f=s.data)?void 0:f.message)||"Document Type not created successfully"),x.reset({doc_name:"",description:""})}n(!1),c(!1),m()}catch(g){}}),children:a.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(A,{name:"doc_name",placeholder:"Enter Document Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),a.jsx("div",{children:a.jsx(L,{name:"description",placeholder:"Enter your description",inputValidation:["removeSpecialCharacterExceptSpace"]})}),a.jsx(N,{}),a.jsx("div",{children:a.jsx($,{isLoading:x.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function R(){var r,T,w,D,k,_;const A=g({}),[L,$]=i.useState(1),[C,q]=i.useState(10),[R,Y]=i.useState(""),[M,O]=i.useState(!1),[V,H]=i.useState(""),[I,Q]=i.useState(!1),[z,U]=i.useState(null),W=y({api:`${e.getAllDocumentTypes}?page=${L}&limit=${C}&q=${R}`,key:"getAllDocumentTypes",value:[L,C],options:{enabled:!0}});return a.jsxs("main",{className:"grid items-start",children:[a.jsx(B,{open:M,setOpen:O,title:I?"Edit Employee Type":"Add Employee Type",id:V,edit:I,setEdit:Q,refetch:W.refetch}),a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(b,{search:R,setSearch:Y,refetch:W.refetch,isFetching:null==W?void 0:W.isLoading})}),a.jsx("div",{children:a.jsx(l,{className:"flex items-center gap-2",onClick:()=>O(!0),children:"Add New"})})]}),a.jsxs(o,{children:[a.jsx(c,{className:"px-7",children:a.jsxs(m,{children:["Employee Type List (",null==(T=null==(r=null==W?void 0:W.data)?void 0:r.pagination)?void 0:T.total,")"]})}),a.jsx(u,{children:W.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(E,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(p,{children:[a.jsx(j,{children:a.jsxs(h,{children:[a.jsx(x,{className:"",children:"#"}),a.jsx(x,{className:"",children:"Employee Type"}),a.jsx(x,{className:"",children:"Description"}),a.jsx(x,{className:"",children:"Created at"}),a.jsx(x,{className:"",children:"Status"}),a.jsx(x,{children:"Action"})]})}),a.jsx(v,{children:null==(D=null==(w=null==W?void 0:W.data)?void 0:w.data)?void 0:D.map((i,r)=>a.jsxs(h,{children:[a.jsx(f,{children:r+1}),a.jsx(f,{children:null==i?void 0:i.doc_name}),a.jsx(f,{children:null==i?void 0:i.description}),a.jsx(f,{children:d(null==i?void 0:i.created_at).format("DD-MM-YYYY")}),a.jsx(f,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(P,{checked:1==(null==i?void 0:i.status),onChange:()=>(async i=>{var a,l,r,d;U(i);try{const n=await A.mutateAsync({api:`${null==(a=e)?void 0:a.updateEmpTypeStatus}`,data:{id:s(String(i))}});(null==(l=null==n?void 0:n.data)?void 0:l.success)?(W.refetch(),t.success(null==(r=null==n?void 0:n.data)?void 0:r.message)):t.error(null==(d=n.data)?void 0:d.message)}catch(o){t.error(n(o))}finally{U(null)}})(String(null==i?void 0:i.id)),disabled:z===String(null==i?void 0:i.id),className:((null==i?void 0:i.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[a.jsx("span",{className:"sr-only",children:"Enable notifications"}),a.jsx("span",{className:((null==i?void 0:i.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),z===String(null==i?void 0:i.id)&&a.jsx(F,{className:"h-4 w-4 animate-spin text-primary"})]})}),a.jsx(f,{children:a.jsx(l,{className:"bg-primary",onClick:()=>{return e=String(null==i?void 0:i.id),Q(!0),O(!0),void H(e);var e},children:"Edit"})})]},null==i?void 0:i.id))})]}),a.jsx(N,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(S,{page:L,limit:C,totalPages:null==(_=null==(k=null==W?void 0:W.data)?void 0:k.pagination)?void 0:_.totalPages,setPage:$,setLimit:q})})]})})]})]})]})}function Y(){return a.jsx(r,{title:"Document Type List",subTitle:"Manage all the Document types here",children:a.jsx("div",{className:"py-12",children:a.jsx(R,{})})})}export{Y as default};
