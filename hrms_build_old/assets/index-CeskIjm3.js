import{h as e,f as i,r as t,j as a,z as r,B as n,e as s}from"./index-BJ2Di0BB.js";import{P as l}from"./index-L2kacWh6.js";import{h as o}from"./moment-CBOc1lqT.js";import{C as d,a as c,b as u,c as m}from"./card-CrOEotWM.js";import{S as p,T as b,a as h,b as x,c as j,d as v,e as f}from"./index-BxKGIMG5.js";import{u as g,b as _}from"./useCustomQuery-DkqDqiry.js";import{P as y}from"./index-DZvdNKxy.js";import{S}from"./separator-BtSn9EpY.js";import{S as C}from"./Spinner-DjUjMlqR.js";import{a as P,o as F,c as E,b as N,f as R}from"./yup-BTlf5Wf5.js";import{F as w}from"./datetime-picker-cKnQNXMD.js";import{R as A}from"./RHFTextField-BK1QXo_s.js";import{B as q}from"./ButtonLoading-B5GmY3N3.js";import"./select-4D5dQM-6.js";import{R as k}from"./DateAndTimePicker-Bmu_5TYR.js";import{D as B}from"./index-ClKtlEeL.js";import"./calendar-B99NsLtP.js";import"./clock-PqgEqIzL.js";import"./check-DiqtQ1XW.js";const D=E().shape({employee_contribution_rate:R().required("Employee Contribution Rate is required").min(0).max(100),employer_contribution_rate:R().required("Employer Contribution Rate is required").min(0).max(100),eps_contribution_rate:R().required("EPS Contribution Rate is required").min(0).max(100),admin_charges_rate:R().required("Admin Charges Rate is required").min(0).max(100),wage_ceiling:R().required("Wage Ceiling is required").min(0),effective_from:N().required("Effective From date is required")});function L({open:n,setOpen:s,title:l,id:o,edit:d,setEdit:c,refetch:u}){var m;const p=g({}),{data:b,isFetching:h}=_({api:`${null==(m=e)?void 0:m.getPFSlabById}?id=${i(String(o))}`,key:"getPFSlabById",options:{enabled:d&&!!o}}),x=P({defaultValues:{employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""},resolver:F(D)});return t.useEffect(()=>{var e,i,t,a,r,n;d&&b?x.reset({employee_contribution_rate:Number(null==(e=null==b?void 0:b.data)?void 0:e.employee_contribution_rate)||0,employer_contribution_rate:Number(null==(i=null==b?void 0:b.data)?void 0:i.employer_contribution_rate)||0,eps_contribution_rate:Number(null==(t=null==b?void 0:b.data)?void 0:t.eps_contribution_rate)||0,admin_charges_rate:Number(null==(a=null==b?void 0:b.data)?void 0:a.admin_charges_rate)||0,wage_ceiling:Number(null==(r=null==b?void 0:b.data)?void 0:r.wage_ceiling)||0,effective_from:(null==(n=null==b?void 0:b.data)?void 0:n.effective_from)||""}):x.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""})},[d,b,x]),a.jsx(B,{open:n,setOpen:s,title:l,setEdit:c,edit:d,isLoading:h,children:a.jsx(w,{methods:x,onSubmit:x.handleSubmit(async i=>{var t,a,n,l,m,b,h,j;try{if(d&&o){const s=await p.mutateAsync({api:null==(t=e)?void 0:t.updatePFSlab,data:{id:Number(o),...i}});(null==(a=s.data)?void 0:a.success)?r.success((null==(n=null==s?void 0:s.data)?void 0:n.message)||"PF Contribution Slab updated successfully"):r.error((null==(l=s.data)?void 0:l.message)||"PF Contribution Slab not updated successfully")}else{const t=await p.mutateAsync({api:null==(m=e)?void 0:m.createPFSlab,data:i});(null==(b=t.data)?void 0:b.success)?r.success((null==(h=null==t?void 0:t.data)?void 0:h.message)||"PF Contribution Slab created successfully"):r.error((null==(j=t.data)?void 0:j.message)||"PF Contribution Slab not created successfully")}x.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""}),s(!1),null==c||c(!1),null==u||u()}catch(v){}}),children:a.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(A,{label:"Employee Contribution Rate",name:"employee_contribution_rate",placeholder:"Enter Employee Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Employer Contribution Rate",name:"employer_contribution_rate",placeholder:"Enter Employer Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"EPS Contribution Rate",name:"eps_contribution_rate",placeholder:"Enter EPS Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Admin Charges Rate",name:"admin_charges_rate",placeholder:"Enter Admin Charges Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Wage Ceiling",name:"wage_ceiling",placeholder:"Enter Wage Ceiling",type:"number"})}),a.jsx("div",{children:a.jsx(k,{name:"effective_from",label:"Effective From",placeholder:"Select effective from date"})}),a.jsx(S,{}),a.jsx("div",{children:a.jsx(q,{isLoading:x.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function $(){var i,l,P,F,E,N;const R=g({}),[w,A]=t.useState(1),[q]=t.useState(10),[k,B]=t.useState(""),[D,$]=t.useState(!1),[z,I]=t.useState(""),[M,T]=t.useState(!1),W=_({api:`${e.getAllPFSlabs}?page=${w}&limit=${q}&q=${k}`,key:"getAllPFSlabs",value:[w,q,k],options:{enabled:!0}});return a.jsxs("main",{className:"grid items-start",children:[a.jsx(L,{open:D,setOpen:$,title:M?"Edit PF Contribution Slab":"Add PF Contribution Slab",id:z,edit:M,setEdit:T,refetch:W.refetch}),a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(p,{search:k,setSearch:B,refetch:W.refetch,isFetching:null==W?void 0:W.isLoading})}),a.jsx("div",{children:a.jsx(n,{className:"flex items-center gap-2",onClick:()=>$(!0),children:"Add New"})})]}),a.jsx(S,{}),a.jsxs(d,{children:[a.jsx(c,{children:a.jsx(u,{children:"PF Contribution Slabs"})}),a.jsx(m,{children:(null==W?void 0:W.isLoading)?a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(C,{})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(b,{children:[a.jsx(h,{children:a.jsxs(x,{children:[a.jsx(j,{children:"Employee Rate (%)"}),a.jsx(j,{children:"Employer Rate (%)"}),a.jsx(j,{children:"EPS Rate (%)"}),a.jsx(j,{children:"Admin Charges (%)"}),a.jsx(j,{children:"Wage Ceiling"}),a.jsx(j,{children:"Effective From"}),a.jsx(j,{children:"Status"}),a.jsx(j,{children:"Actions"})]})}),a.jsx(v,{children:(null==(i=null==W?void 0:W.data)?void 0:i.data)&&(null==(l=null==W?void 0:W.data)?void 0:l.data.length)>0?null==(P=null==W?void 0:W.data)?void 0:P.data.map(i=>a.jsxs(x,{children:[a.jsxs(f,{children:[i.employee_contribution_rate,"%"]}),a.jsxs(f,{children:[i.employer_contribution_rate,"%"]}),a.jsxs(f,{children:[i.eps_contribution_rate,"%"]}),a.jsxs(f,{children:[i.admin_charges_rate,"%"]}),a.jsxs(f,{children:["â‚¹",i.wage_ceiling]}),a.jsx(f,{children:o(i.effective_from).format("DD/MM/YYYY")}),a.jsx(f,{children:a.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold "+(1===i.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:1===i.status?"Active":"Inactive"})}),a.jsxs(f,{className:"flex gap-2",children:[a.jsx(n,{variant:"outline",size:"sm",onClick:()=>{return e=String(i.id),T(!0),$(!0),void I(e);var e},children:"Edit"}),a.jsx(n,{variant:"destructive",size:"sm",onClick:()=>(async i=>{var t,a,n,l;try{const s=await R.mutateAsync({api:null==(t=e)?void 0:t.deletePFSlab,data:{id:Number(i)}});(null==(a=null==s?void 0:s.data)?void 0:a.success)?(W.refetch(),r.success((null==(n=null==s?void 0:s.data)?void 0:n.message)||"PF Contribution Slab deleted successfully")):r.error((null==(l=s.data)?void 0:l.message)||"Failed to delete PF Contribution Slab")}catch(o){r.error(s(o))}})(String(i.id)),children:"Delete"})]})]},i.id)):a.jsx(x,{children:a.jsx(f,{colSpan:8,className:"text-center",children:"No PF Contribution Slabs found"})})})]})})})]}),(null==(F=null==W?void 0:W.data)?void 0:F.pagination)&&a.jsx(y,{page:w,setPage:A,limit:q,totalPages:(null==(N=null==(E=null==W?void 0:W.data)?void 0:E.pagination)?void 0:N.totalPages)||1})]})]})}function z(){return a.jsx(l,{title:"PF Contribution Slab",subTitle:"Manage PF Contribution Slabs",children:a.jsx("div",{className:"py-12",children:a.jsx($,{})})})}export{z as default};
