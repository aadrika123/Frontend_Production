import{k as e,r as s,q as a,j as t,h as l,z as i,s as n,t as r,v as d,B as o,f as c,w as m,L as x,n as u,x as h,T as p,y as b,A as g,C as j,D as v}from"./index-BJ2Di0BB.js";import{g as f,a as N,d as y,U as _,C as w,b as S,D as k,c as C,e as P,f as D,h as A,i as I,j as E,k as F,E as q,l as M,m as R,n as B,o as T,p as $,q as V,r as L,t as O,u as Y,P as H}from"./index-L2kacWh6.js";import{a as U,o as G,h as z,c as W,e as J,f as Q,b as K,i as X,d as Z,g as ee}from"./yup-BTlf5Wf5.js";import{F as se,C as ae,L as te}from"./datetime-picker-cKnQNXMD.js";import{R as le}from"./RHFTextField-BK1QXo_s.js";import{R as ie}from"./RHFTextArea-CtK9XJcE.js";import{B as ne}from"./ButtonLoading-B5GmY3N3.js";import{R as re}from"./RHFSelectField-CxYg0t7R.js";import"./select-4D5dQM-6.js";import{u as de,c as oe,b as ce,a as me}from"./useCustomQuery-DkqDqiry.js";import{B as xe}from"./briefcase-BuikIy34.js";import{H as ue,S as he,P as pe,M as be,R as ge}from"./RHFUploadFiled-TWwc2Tpq.js";import{B as je}from"./building-2-UU31lvnR.js";import{C as ve}from"./calendar-B99NsLtP.js";import{U as fe}from"./users-Cg4LenXf.js";import{C as Ne}from"./circle-alert-BAbvq769.js";import{H as ye,M as _e,C as we,F as Se,u as ke,W as Ce,U as Pe,a as De}from"./usePdfValidator-DIEvGxqK.js";import{F as Ae}from"./file-text-DAcXk-69.js";import{T as Ie}from"./trash-2-DvAODSCO.js";import{P as Ee}from"./plus-UbJrlwP1.js";import{H as Fe,C as qe}from"./house-C9uOtqHF.js";import{C as Me}from"./check-DiqtQ1XW.js";import{h as Re}from"./moment-CBOc1lqT.js";import{C as Be,c as Te,a as $e,d as Ve,b as Le}from"./card-CrOEotWM.js";import{S as Oe}from"./Spinner-DjUjMlqR.js";import{C as Ye}from"./index-DEtLcoiv.js";import{S as He}from"./separator-BtSn9EpY.js";import{E as Ue}from"./eye-BEN4pZFN.js";import{D as Ge}from"./download-B9AtpfuH.js";import{R as ze}from"./RHFCheckbox-gxPdkAtn.js";import{C as We,S as Je}from"./search-D0HVAt6A.js";import{C as Qe}from"./clock-PqgEqIzL.js";import{C as Ke}from"./calendar-days-DWOqLpZP.js";import{A as Xe}from"./award-Bme9fHms.js";import{A as Ze,a as es,b as ss,T as as,c as ts,d as ls,e as is,f as ns}from"./alert-BMnZh-St.js";import{B as rs}from"./badge-DufY8Gpx.js";import{C as ds,I as os,W as cs,P as ms,B as xs,a as us,S as hs,T as ps}from"./wallet-CBMGLEcE.js";import{L as bs}from"./loader-circle--1riX2Rm.js";import{C as gs}from"./circle-check-DwPXeHSD.js";import{T as js}from"./trending-up-BYweVeOB.js";import{S as vs}from"./square-pen-HR786vv8.js";import{A as fs,t as Ns,a as ys,o as _s,s as ws,S as Ss}from"./use-toast-Cg3rxy4C.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cs=e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Ps=e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Ds=e("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),As=e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Is=W().shape({emp_type_id:Q().integer().required().label("Employee Type"),emp_code:K().max(50).required().label("Employee Code"),emp_name:K().max(100).required().label("Employee Name"),gender:K().oneOf(["male","female","other"]).required().label("Gender"),dob:J().required().label("Date of Birth"),marital_status:K().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:K().max(50).required().label("Religion"),emp_blood_group:K().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:K().max(50).required().label("Health Status").required(),physical_disability_status:K().optional().label("Physical Disability"),height:Q().optional().label("Height"),weight:Q().optional().label("Weight"),cps_no:K().max(50).optional().label("CPS"),gpf_no:K().max(50).optional().label("GPF"),identification_mark:K().max(200).optional().label("Identification Mark"),caste:K().max(100).optional().label("Caste"),languages_known:X().of(W().shape({language:K().required("Language is required"),read:Z().required(),write:Z().required(),speak:Z().required()})),contact_no:K().max(10).required().label("Contact Number").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),emergency_contact_no:K().max(10).required().label("Emergency Contact").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),email:K().email().max(100).required().label("Email"),emp_present_address:K().required().label("Present Address"),present_post_office:K().max(100).required().label("Present Post Office"),present_pin_code:K().max(6).required().label("Present PIN Code"),present_police_station:K().max(100).optional().label("Present Police Station"),present_state:K().max(100).required().label("Present State"),present_district:K().max(100).required().label("Present District"),present_nearest_railway_station:K().max(100).optional().label("Nearest Railway Station"),emp_permanent_address:K().required().label("Permanent Address"),permanent_post_office:K().max(100).required().label("Permanent Post Office"),permanent_pin_code:K().max(6).required().label("Permanent PIN Code"),permanent_police_station:K().max(100).optional().label("Permanent Police Station"),permanent_state:K().max(100).required().label("Permanent State"),permanent_district:K().max(100).required().label("Permanent District"),permanent_nearest_railway_station:K().max(100).optional().label("Permanent Nearest Railway Station"),aadhaar_no:K().max(12).optional().label("Aadhaar Number"),pan_no:K().max(10).optional().label("PAN Number"),uan_no:K().max(12).optional().label("UAN Number"),esi_no:K().max(17).optional().label("ESI Number"),passport_no:K().max(20).optional().label("Passport Number"),driving_license_no:K().max(20).optional().label("Driving License"),voter_id:K().max(20).optional().label("Voter ID"),department_id:K().required().label("Department"),department_name:K().label("Department Name").optional(),designation_id:Q().integer().required().label("Designation"),date_of_joining:J().required().label("Date of Joining")});
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Es({id:e,getDataById:d}){var o,c,m,x,u,h,p,b;const g=f(),[j,v]=s.useState(!1),S=de({}),k=a(),C=N(),P=y(),D=s.useMemo(()=>{var e;if(!(null==(e=d.data)?void 0:e.data))return{};const{ulb_id:s,status:a,created_at:t,updated_at:l,id:i,emp_image:n,...r}=d.data.data,o={};return Object.entries(r).forEach(([e,s])=>{null==s?o[e]=void 0:Array.isArray(s)||"object"==typeof s?o[e]=s:o[e]=String(s)}),(!o.languages_known||Array.isArray(o.languages_known)&&0===o.languages_known.length)&&(o.languages_known=[{language:"Hindi",read:!0,write:!0,speak:!0}]),o},[d.data]),A=U({defaultValues:D,resolver:G(Is)}),I=z({control:A.control,name:"languages_known"});s.useEffect(()=>{d.data&&A.reset(D)},[d.data,A,D]);const E=async e=>{const s=await fetch(e),a=await s.blob(),t=new Blob([a],{type:a.type});return Object.defineProperty(t,"name",{value:"employee_image.jpg",writable:!1}),Object.defineProperty(t,"lastModified",{value:Date.now(),writable:!1}),t},F=e=>{var s;const a=new FormData,t=null==(s=d.data)?void 0:s.data;return a.append("name",A.getValues("emp_name")),a.append("mobile",A.getValues("contact_no")),a.append("altMobile",A.getValues("emergency_contact_no")),a.append("email",A.getValues("email")),a.append("address",A.getValues("emp_present_address")),a.append("userType","Employee"),a.append("ulbId",(null==t?void 0:t.ulb_id)||""),a.append("photo",e),a},q=async e=>{var s,a;const t=await S.mutateAsync({api:null==(s=r)?void 0:s.createMenuRoleAuth,data:{userId:e,permissionStatus:!0,menuRoleId:129}});if(!(null==(a=t.data)?void 0:a.status))throw new Error("Failed to create menu role permission");return t},M=async e=>{var s;return S.mutateAsync({api:null==(s=r)?void 0:s.createWorkFlowRoleAuth,data:{userId:e,permissionStatus:!0,wfRoleId:79}})},R=async e=>{var s,a,t,i;const n=await S.mutateAsync({api:null==(s=l)?void 0:s.approveEmployee,data:{id:String(null==(t=null==(a=d.data)?void 0:a.data)?void 0:t.id),authorization_id:String(e),approval_status:1}});if(!(null==(i=n.data)?void 0:i.success))throw new Error("Failed to update employee approval status");return n},B=async(e,s)=>{var a;try{return await S.mutateAsync({api:null==(a=n)?void 0:a.updateUserName,data:{id:Number(e),emp_id:String(s)||""}})}catch(t){const e=t instanceof Error?t.message:"An error occurred while updating User Name";throw i.error(e),t}};return t.jsxs("div",{className:"",children:[t.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:t.jsx(_,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),t.jsxs(se,{methods:A,onSubmit:A.handleSubmit(async s=>{var a,t,n,r,o,c,m,x;try{const u=await S.mutateAsync({api:`${null==(a=l)?void 0:a.updateEmployeeById}`,data:{id:e,...s}});(null==(t=u.data)?void 0:t.success)?(await B(String(null==(r=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:r.authorization_id),String(null==(c=null==(o=null==d?void 0:d.data)?void 0:o.data)?void 0:c.id)),i.success(null==(m=null==u?void 0:u.data)?void 0:m.message),k("/hrms/dashboard/employee-list")):i.error((null==(x=u.data)?void 0:x.message)||"Employee not created successfully")}catch(u){i.error("An error occurred while creating employee")}}),children:[t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(xe,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(re,{name:"emp_type_id",data:(null==(c=null==(o=null==C?void 0:C.data)?void 0:o.data)?void 0:c.map(e=>({label:String(e.emp_type),value:String(e.id)})))||[]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(le,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Department"]}),t.jsx(re,{name:"department_id",selectedText:"department_name",isSearch:!0,data:(null==(x=null==(m=null==g?void 0:g.data)?void 0:m.data)?void 0:x.length)?g.data.data.map(e=>({label:String(e.department_name),value:String(e.id)})):[]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(xe,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),t.jsx(re,{name:"designation_id",isSearch:!0,data:(null==(h=null==(u=null==P?void 0:P.data)?void 0:u.data)?void 0:h.map(e=>({label:String(e.designation_name),value:String(e.id)})))||[]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),t.jsx(le,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(_,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),t.jsx(le,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(fe,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),t.jsx(re,{name:"gender",data:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),t.jsx(le,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(fe,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),t.jsx(re,{name:"marital_status",data:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(fe,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),t.jsx(le,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),"Caste"]}),t.jsx(le,{name:"caste",placeholder:"Enter Caste",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),t.jsx(re,{name:"emp_blood_group",data:[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),t.jsx(re,{name:"emp_health_status",data:[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Identification Mark"]}),t.jsx(le,{name:"identification_mark",placeholder:"Enter Identification Mark",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Physical Disability Status"]}),t.jsx(re,{name:"physical_disability_status",data:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),"Height (cm)"]}),t.jsx(le,{name:"height",placeholder:"Enter Height in cm",inputValidation:["number"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Cs,{className:"h-4 w-4 text-gray-400"}),"Weight (kg)"]}),t.jsx(le,{name:"weight",placeholder:"Enter Weight in kg",inputValidation:["number"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ae,{className:"h-4 w-4 text-gray-400"}),"CPS"]}),t.jsx(le,{name:"cps_no",placeholder:"Enter CPS",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ae,{className:"h-4 w-4 text-gray-400"}),"GPF"]}),t.jsx(le,{name:"gpf_no",placeholder:"Enter GPF",inputValidation:["removeSpecialCharacterExceptSpace"]})]})]}),t.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"space-y-2",children:I.fields.map((e,s)=>t.jsxs("div",{className:"group flex flex-col gap-3 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md sm:flex-row sm:items-center",children:[t.jsxs("div",{className:"flex items-center justify-between sm:contents",children:[t.jsx("span",{className:"inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-emerald-100 text-xs font-semibold text-emerald-700",children:s+1}),I.fields.length>1&&t.jsx("button",{type:"button",onClick:()=>I.remove(s),className:"flex-shrink-0 transition-opacity sm:order-last sm:opacity-0 sm:group-hover:opacity-100",title:"Remove language",children:t.jsx(Ie,{className:"h-4 w-4 text-red-500 hover:text-red-600"})})]}),t.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:t.jsx(le,{name:`languages_known.${s}.language`,placeholder:"Enter Language",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-blue-300 hover:bg-blue-50 has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50",children:[t.jsx("input",{type:"checkbox",...A.register(`languages_known.${s}.read`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ“– Read"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-purple-300 hover:bg-purple-50 has-[:checked]:border-purple-400 has-[:checked]:bg-purple-50",children:[t.jsx("input",{type:"checkbox",...A.register(`languages_known.${s}.write`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-purple-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"âœï¸ Write"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-green-300 hover:bg-green-50 has-[:checked]:border-green-400 has-[:checked]:bg-green-50",children:[t.jsx("input",{type:"checkbox",...A.register(`languages_known.${s}.speak`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-green-600"}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ—£ï¸ Speak"})]})]})]},e.id))}),t.jsxs("button",{type:"button",onClick:()=>I.append({language:"",read:!1,write:!1,speak:!1}),className:"mt-3 flex w-full items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-600 transition-all hover:border-emerald-400 hover:bg-emerald-50 hover:text-emerald-700",children:[t.jsx(Ee,{className:"h-4 w-4"}),"Add Language"]})]})})]})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(pe,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(pe,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),t.jsx(le,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Ne,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),t.jsx(le,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(be,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),t.jsx(le,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(Fe,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"col-span-full space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),t.jsx(ie,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),t.jsx(le,{name:"present_post_office",placeholder:"Enter Post Office"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),t.jsx(le,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),t.jsx(le,{name:"present_police_station",placeholder:"Enter Police Station"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),t.jsx(le,{name:"present_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"District"]}),t.jsx(le,{name:"present_district",placeholder:"Enter District"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"State"]}),t.jsx(le,{name:"present_state",placeholder:"Enter State"})]})]})}),t.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[t.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:j,onChange:e=>(e=>{if(v(e),e){const e=A.getValues("emp_present_address"),s=A.getValues("present_post_office"),a=A.getValues("present_pin_code"),t=A.getValues("present_police_station"),l=A.getValues("present_state"),i=A.getValues("present_district"),n=A.getValues("present_nearest_railway_station");A.setValue("emp_permanent_address",e),A.setValue("permanent_post_office",s),A.setValue("permanent_pin_code",a),A.setValue("permanent_police_station",t),A.setValue("permanent_state",l),A.setValue("permanent_district",i),A.setValue("permanent_nearest_railway_station",n)}else A.setValue("emp_permanent_address",""),A.setValue("permanent_post_office",""),A.setValue("permanent_pin_code",""),A.setValue("permanent_police_station",""),A.setValue("permanent_state",""),A.setValue("permanent_district",""),A.setValue("permanent_nearest_railway_station","")})(e.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),t.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Fe,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),t.jsx("div",{children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"col-span-full space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),t.jsx(ie,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:j})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),t.jsx(le,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:j})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(ue,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),t.jsx(le,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:j})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),t.jsx(le,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:j})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),t.jsx(le,{name:"permanent_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"District"]}),t.jsx(le,{name:"permanent_district",placeholder:"Enter District",disabled:j})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4 text-gray-400"}),"State"]}),t.jsx(le,{name:"permanent_state",placeholder:"Enter State",disabled:j})]})]})})]})]}),t.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[t.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[t.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[t.jsx(we,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(Se,{className:"h-4 w-4 text-gray-400"}),"Voter ID"]}),t.jsx(le,{name:"voter_id",placeholder:"Enter Voter ID",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),t.jsx(le,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),t.jsx(le,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),t.jsx(le,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),t.jsx(le,{name:"esi_no",placeholder:"Enter ESI Number"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),t.jsx(le,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx(we,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),t.jsx(le,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),t.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(ne,{isLoading:A.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:t.jsxs(t.Fragment,{children:[t.jsx(_,{className:"h-4 w-4"}),"Update Employee"]})}),0==(null==(b=null==(p=d.data)?void 0:p.data)?void 0:b.approval_status)&&t.jsx(ne,{onClick:async()=>{w("Are you sure you want to approve this employee?","Please confirm",async()=>{var e,s,a,t,l,n,o;try{const c=(null==(s=null==(e=d.data)?void 0:e.data)?void 0:s.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",m=await E(c),x=F(m),u=await S.mutateAsync({api:null==(a=r)?void 0:a.createUserAuth,data:x});if(!(null==(t=u.data)?void 0:t.status))throw new Error((null==(l=u.data)?void 0:l.message)||"Employee approval failed");const h=u.data.data.id;await Promise.all([q(h),M(h),B(String(h),String(null==(o=null==(n=null==d?void 0:d.data)?void 0:n.data)?void 0:o.id))]),await R(h),i.success("Employee approved successfully"),k("/hrms/dashboard/employee-list")}catch(c){const e=c instanceof Error?c.message:"An error occurred while approving employee";i.error(e)}})},type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:t.jsxs(t.Fragment,{children:[t.jsx(Me,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),t.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const Fs=W().shape({doc_name:K().required("Document Name is required"),doc_type_id:K().required("Document Type is required"),doc_path:ee().required("Document is required").test("fileRequired","Document is required",e=>e instanceof File||"string"==typeof e&&""!==e),description:K().required("Description is required")});function qs({title:e,id:a,edit:n,refetch:r,getDataById:c}){var m,x,u,h,p,b,g;const{validateFile:j,reset:v}=ke({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),f=de({}),N=oe({}),y=s.useRef(null),_=S(),{data:w}=ce({api:`${null==(m=l)?void 0:m.updateEmployeeById}/${a}`,key:"getDocumentById",options:{enabled:n}}),q=U({defaultValues:{doc_type_id:(null==(x=null==w?void 0:w.data)?void 0:x.doc_type_id)||"",doc_name:(null==(u=null==w?void 0:w.data)?void 0:u.doc_name)||"",doc_path:(null==(h=null==w?void 0:w.data)?void 0:h.doc_path)||"",description:(null==(p=null==w?void 0:w.data)?void 0:p.description)||""},resolver:G(Fs)}),{id:M}=d();s.useEffect(()=>{var e,s,a,t;n&&w?q.reset({doc_type_id:null==(e=null==w?void 0:w.data)?void 0:e.doc_type_id,doc_name:null==(s=null==w?void 0:w.data)?void 0:s.doc_name,doc_path:null==(a=null==w?void 0:w.data)?void 0:a.doc_path,description:(null==(t=null==w?void 0:w.data)?void 0:t.description)??""}):q.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[n,w]),s.useEffect(()=>{var e,s,a,t;"Aadhaar Card"===(null==q?void 0:q.watch("doc_name"))?q.setValue("description",(null==(s=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:s.aadhaar_no)||""):"Pan Card"===(null==q?void 0:q.watch("doc_name"))?q.setValue("description",(null==(t=null==(a=null==c?void 0:c.data)?void 0:a.data)?void 0:t.pan_no)||""):q.setValue("description","")},[null==q?void 0:q.watch("doc_name")]);const R=q.formState.isSubmitting||N.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),t.jsx(P,{className:"sm:max-w-[425px]",children:t.jsxs(se,{methods:q,onSubmit:q.handleSubmit(async e=>{var s,a,t,d;try{const o=new FormData;if(o.append("emp_id",String(M)),o.append("doc_type_id",e.doc_type_id),o.append("doc_name",e.doc_name),o.append("description",e.description),o.append("file",null==e?void 0:e.doc_path),n&&e);else{const e=await f.mutateAsync({api:l.uploadEmployeeDocument,data:o});(null==(s=e.data)?void 0:s.success)?(i.success(null==(a=null==e?void 0:e.data)?void 0:a.message),null==(t=y.current)||t.click()):i.error((null==(d=e.data)?void 0:d.message)||"Document not attached successfully"),q.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}r()}catch(o){i.error("An error occurred while processing your request")}}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(I,{})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(re,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:(null==(g=null==(b=null==_?void 0:_.data)?void 0:b.data)?void 0:g.map(e=>({label:String(e.doc_name),value:String(e.id)})))||[]})}),t.jsx("div",{children:t.jsx(ge,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:async e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a&&"application/pdf"===(null==a?void 0:a.type)){const s=await j(a);s.isValid?(i.success(s.message),v(),q.setValue("doc_path",a)):(i.error(s.message),e.target.value="",q.resetField("doc_path"))}else a&&q.setValue("doc_path",a)},placeholder:"Upload your document"})}),t.jsx("div",{children:t.jsx(le,{label:`${(null==q?void 0:q.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(null==q?void 0:q.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsx(He,{})]}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:y,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:R,children:"Save changes"})]})]})})]})}function Ms({id:e,getDataById:a}){var n,r,m,x;const[u,h]=s.useState(""),[p,b]=s.useState(!1),{id:g}=d(),j=ce({api:`${l.getEmployeeDocuments}?emp_id=${g}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),v=de({}),f=e=>{var s;return(null==(s=e.split(".").pop())?void 0:s.toLowerCase())||""},N=e=>{const s=f(e);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(s)};return t.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),t.jsx(qs,{title:p?"Edit Document":"Attach Document",id:e,edit:p,setEdit:b,refetch:j.refetch,getDataById:a})]}),j.isLoading?t.jsx("div",{className:"flex h-64 items-center justify-center",children:t.jsx(Oe,{})}):t.jsx(t.Fragment,{children:0===(null==(r=null==(n=null==j?void 0:j.data)?void 0:n.data)?void 0:r.length)?t.jsx(Be,{className:"border-2 border-dashed border-gray-300 bg-white",children:t.jsxs(Te,{className:"flex flex-col items-center justify-center py-16",children:[t.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:t.jsx(Ae,{className:"h-16 w-16 text-gray-400"})}),t.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),t.jsx("p",{className:"mt-2 text-center text-gray-600",children:u?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):t.jsx("div",{className:"space-y-4",children:null==(x=null==(m=null==j?void 0:j.data)?void 0:m.data)?void 0:x.map(e=>{return t.jsx(Be,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[N(null==e?void 0:e.doc_path)?t.jsx("img",{src:e.doc_path,alt:(null==e?void 0:e.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:e=>{var s,a;e.currentTarget.style.display="none",null==(a=null==(s=e.currentTarget.parentElement)?void 0:s.querySelector(".fallback-icon"))||a.classList.remove("hidden")}}):(s=null==e?void 0:e.doc_path,"pdf"===f(s)?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:t.jsx(Se,{className:"h-12 w-12 text-red-600"})})}):t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:t.jsx(Ae,{className:"h-12 w-12 text-blue-600"})})})),t.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:t.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:t.jsx(Ae,{className:"h-12 w-12 text-gray-400"})})}),t.jsx("div",{className:"absolute bottom-1 left-1",children:t.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:f(null==e?void 0:e.doc_path)||"file"})}),t.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:t.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[t.jsx("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:t.jsx(Ue,{className:"h-3 w-3"})}),t.jsx("a",{href:e.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:t.jsx(Ge,{className:"h-3 w-3"})})]})})]}),t.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(null==e?void 0:e.doc_name)||"Document"}),t.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(null==e?void 0:e.description)||"No description available"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(ve,{className:"h-4 w-4"}),t.jsx("span",{className:"whitespace-nowrap",children:Re(null==e?void 0:e.created_at).format("DD MMM YYYY")})]}),t.jsxs("a",{href:e.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[t.jsx(q,{className:"h-4 w-4"}),"Open"]}),t.jsx(o,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ye("Are you sure?","Please confirm",async()=>{var s,a,t;try{const n=await v.mutateAsync({api:`${l.deleteEmployeeDocument}`,data:{id:c(e.toString())}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Deleted successfully"),j.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting item")}})})(null==e?void 0:e.id),children:t.jsx(Ie,{className:"h-4 w-4"})})]})]})})})]})},null==e?void 0:e.id);var s})})})]})})}const Rs=W().shape({family_member_name:K().required("Family member name is required"),relationship:K().required("Relationship is required"),dob:K().required("Date of birth is required"),address:K().required("Address is required"),is_dependent:Z().default(!1),isNominee:Z().default(!1),nominee_percentage:Q().nullable().when("isNominee",{is:!0,then:e=>e.required("Nominee percentage is required when marked as nominee").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),otherwise:e=>e.notRequired()})}),Bs=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function Ts({title:e="Add Family Member",id:a,edit:n,refetch:r,getDataById:c}){var m;const x=de({}),u=s.useRef(null),{id:h}=d(),{data:p}=ce({api:`${null==(m=l)?void 0:m.getFamilyMemberById}/${a}`,key:"getFamilyMemberById",options:{enabled:n&&!!a}}),b=U({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null},resolver:G(Rs)}),g=b.watch("isNominee");s.useEffect(()=>{var e,s,a,t,l,i,r;n&&p?b.reset({family_member_name:(null==(e=null==p?void 0:p.data)?void 0:e.family_member_name)||"",relationship:(null==(s=null==p?void 0:p.data)?void 0:s.relationship)||"",dob:(null==(a=null==p?void 0:p.data)?void 0:a.dob)||"",address:(null==(t=null==p?void 0:p.data)?void 0:t.address)||"",is_dependent:(null==(l=null==p?void 0:p.data)?void 0:l.is_dependent)||!1,isNominee:(null==(i=null==p?void 0:p.data)?void 0:i.isNominee)||!1,nominee_percentage:(null==(r=null==p?void 0:p.data)?void 0:r.nominee_percentage)||null}):b.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null})},[n,p]);const j=b.formState.isSubmitting||x.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),t.jsx(P,{className:"sm:max-w-[500px]",children:t.jsxs(se,{methods:b,onSubmit:b.handleSubmit(async e=>{var s,t,d,o,c,m,p,g;try{const j={emp_id:h,family_member_name:e.family_member_name,relationship:e.relationship,dob:e.dob,address:e.address,is_dependent:e.is_dependent||!1,isNominee:e.isNominee||!1,nominee_percentage:e.isNominee?e.nominee_percentage:null};if(n&&a){const e=await x.mutateAsync({api:`${l.updateFamilyMemberById}/${a}`,data:j});(null==(s=e.data)?void 0:s.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Family member updated successfully"),null==(d=u.current)||d.click()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update family member")}else{const e=await x.mutateAsync({api:l.createFamily,data:j});(null==(c=e.data)?void 0:c.success)?(i.success((null==(m=null==e?void 0:e.data)?void 0:m.message)||"Family member added successfully"),null==(p=u.current)||p.click()):i.error((null==(g=e.data)?void 0:g.message)||"Failed to add family member")}b.reset(),null==r||r()}catch(j){i.error("An error occurred while processing your request")}}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(I,{children:n?"Update family member information":"Add a new family member"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(le,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(re,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Bs})}),t.jsx("div",{children:t.jsx(le,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),t.jsx("div",{children:t.jsx(le,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(ze,{name:"is_dependent",label:"Mark as Dependent"}),t.jsx(ze,{name:"isNominee",label:"Mark as Nominee"}),g&&t.jsx("div",{className:"ml-6",children:t.jsx(le,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:u,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:j,children:n?"Update":"Save"})]})]})})]})}function $s({id:e,getDataById:a}){var n,r,d,m;const[x,u]=s.useState(""),[h,p]=s.useState(!1),b=ce({api:`${l.getAllFamilyDetail}?emp_id=${e}`,key:"getEmployeeFamilyDetailsId",value:[e],options:{enabled:!0}}),g=de({});return t.jsx("main",{className:"min-h-screen bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),t.jsx(Ts,{title:h?"Edit Family Member":"Add Family Member",id:e,edit:h,setEdit:p,refetch:b.refetch,getDataById:a})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:b.isLoading?t.jsx(Be,{children:t.jsx(Te,{className:"flex h-32 items-center justify-center",children:t.jsx(Oe,{})})}):t.jsxs(t.Fragment,{children:[null==(r=null==(n=null==b?void 0:b.data)?void 0:n.data)?void 0:r.map(e=>{return t.jsxs(Be,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx($e,{className:"pb-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fe,{className:"h-6 w-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx(Ve,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[s]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ye("Are you sure?","Please confirm",async()=>{var s,a,t;try{const n=await g.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:c(e.toString())}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Deleted successfully"),b.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:t.jsx(Ie,{className:"h-3.5 w-3.5"})})})]})}),t.jsxs(Te,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Re(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Address:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?t.jsx(qe,{className:"h-4 w-4 text-green-500"}):t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),t.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"h-4 w-4 text-green-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(ve,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Re(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var s}),0===(null==(m=null==(d=null==b?void 0:b.data)?void 0:d.data)?void 0:m.length)&&t.jsx(Be,{className:"py-12 text-center",children:t.jsxs(Te,{children:[t.jsx(fe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),t.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const Vs=W().shape({name:K().required("Name is required"),mobile:K().required("Mobile is required"),altMobile:K().required("Alternate Mobile is required"),email:K().email("Invalid email").required("Email is required"),address:K().required("Address is required"),userType:K().required("User Type is required"),module_name:K().optional()});function Ls({title:e="Add New User",edit:a,moduleAccessRefetch:d,getDataById:c,userData:x}){var u,h,p,b,g,j,v,f,N;const y=M(),_=de({}),w=s.useRef(null),S=R(),{user:q}=m(),B=(null==(p=null==(h=null==(u=null==c?void 0:c.data)?void 0:u.data)?void 0:h.email)?void 0:p.split("@")[0])||"",T=(null==(b=localStorage.getItem("ulbName"))?void 0:b.split(" ")[0])||"",$=s.useMemo(()=>{var e,s,t,l,i,n,r,d,o,m,u,h;return a?{name:(null==x?void 0:x.name)||"",mobile:(null==x?void 0:x.mobile)||"",altMobile:(null==x?void 0:x.alternateMobile)||"",email:(null==x?void 0:x.email)||"",address:(null==x?void 0:x.address)||"",userType:(null==x?void 0:x.user_type)||""}:{name:(null==(s=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:s.emp_name)||"",mobile:(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.contact_no)||"",altMobile:(null==(n=null==(i=null==c?void 0:c.data)?void 0:i.data)?void 0:n.emergency_contact_no)||(null==(d=null==(r=null==c?void 0:c.data)?void 0:r.data)?void 0:d.contact_no)||"",email:"",address:(null==(m=null==(o=null==c?void 0:c.data)?void 0:o.data)?void 0:m.emp_present_address)||(null==(h=null==(u=null==c?void 0:c.data)?void 0:u.data)?void 0:h.emp_permanent_address)||"",userType:""}},[c]),V=U({defaultValues:$,resolver:G(Vs)}),L=(null==(g=V.watch("userType"))?void 0:g.replace(/\s+/g,""))||"";s.useEffect(()=>{V.reset($)},[$,V]),s.useEffect(()=>{(null==V?void 0:V.watch("userType"))&&!a&&V.setValue("email",`${B}@${L.toLocaleLowerCase()}.${T.toLocaleLowerCase()}`)},[V,B,L,T]);const O="Public Transport Management System",Y="PTMS All Ulb",H=async(e,s)=>{var a,t,l,i;const r=s===O?null==(a=n)?void 0:a.onBoardingConductor:null==(t=n)?void 0:t.onBoardingConductorNew,d=await ee(r);if(!(null==(l=null==d?void 0:d.data)?void 0:l.status))return;const o=await W(e);(null==(i=null==o?void 0:o.data)?void 0:i.status)&&(await ae(String(o.data.data.id),d.data.data.cunique_id||""),te())},z=async e=>{var s,t;const l=await W(e);if(await ae(String(l.data.data.id??(null==x?void 0:x.id))),!(null==(s=null==l?void 0:l.data)?void 0:s.status))return;const n=a?"User updated successfully":"User created successfully";i.success(n),null==d||d(),null==(t=w.current)||t.click()},W=async e=>{try{const s=await J(),t=Q(e,s);return a?await K(t):await X(t)}catch(s){throw s}},J=async()=>{var e,s;const a=(null==(s=null==(e=c.data)?void 0:e.data)?void 0:s.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",t=await fetch(a),l=await t.blob();return new File([l],"employee_image.jpg",{type:l.type})},Q=(e,s)=>{var a,t;const l=new FormData;return l.append("name",e.name),l.append("mobile",e.mobile),l.append("altMobile",e.altMobile),l.append("email",e.email),l.append("address",e.address),l.append("userType",e.userType),l.append("ulbId",(null==(t=null==(a=c.data)?void 0:a.data)?void 0:t.ulb_id)||""),l.append("photo",s),l.append("id",parseInt(null==x?void 0:x.id)||""),l},K=async e=>await _.mutateAsync({api:r.updateUser,data:e}),X=async e=>{const s=await _.mutateAsync({api:r.createUserAuth,data:e});return await Z(s),s},Z=async e=>{var s,a,t,i,n;await _.mutateAsync({api:null==(s=l)?void 0:s.createModuleAccess,data:{emp_id:String(null==(t=null==(a=null==c?void 0:c.data)?void 0:a.data)?void 0:t.id),module_access_id:String(null==(n=null==(i=null==e?void 0:e.data)?void 0:i.data)?void 0:n.id),module_user_type:V.getValues("userType")}})},ee=async e=>{var s,a,t,l,n,r;try{return await _.mutateAsync({api:e,data:{firstName:(null==(a=null==(s=null==c?void 0:c.data)?void 0:s.data)?void 0:a.emp_name)||"",bloodGrp:(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.emp_blood_group)||"",mobileNo:V.getValues("mobile"),emailId:V.getValues("email"),adhar_no:null==(r=null==(n=null==c?void 0:c.data)?void 0:n.data)?void 0:r.aadhaar_no}})}catch(d){const e=d instanceof Error?d.message:"An error occurred while creating PTMS User";throw i.error(e),d}},ae=async(e,s)=>{var a,t,l;try{return await _.mutateAsync({api:null==(a=n)?void 0:a.updateUserName,data:{id:Number(e),...s&&{user_name:s},emp_id:String(null==(l=null==(t=null==c?void 0:c.data)?void 0:t.data)?void 0:l.id)||""}})}catch(r){const e=r instanceof Error?r.message:"An error occurred while updating User Name";throw i.error(e),r}},te=()=>{var e;null==d||d(),i.success("User created successfully"),null==(e=w.current)||e.click()},ie=V.formState.isSubmitting||_.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),e]})}),t.jsx(P,{className:"sm:max-w-[500px]",children:t.jsxs(se,{methods:V,onSubmit:V.handleSubmit(async e=>{const s=V.watch("module_name");s===O||s===Y?await H(e,s):await z(e)}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(I,{children:a?"Update user information":"Add a new user to the system"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(re,{name:"module_name",isSearch:!0,data:(null==(v=null==(j=null==y?void 0:y.data)?void 0:j.data)?void 0:v.map(e=>({label:String(e.module_name),value:String(e.module_name)})))||[]})}),t.jsx("div",{children:t.jsx(re,{label:"User Type",name:"userType",isSearch:!0,selectedText:"Select user type",data:(null==(N=null==(f=null==S?void 0:S.data)?void 0:f.data)?void 0:N.map(e=>({label:String(e),value:String(e)})))||[]})}),t.jsx("div",{children:t.jsx(le,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(le,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),t.jsx(le,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),t.jsx("div",{children:t.jsx(le,{label:"Email",disabled:a,name:"email",type:"email",placeholder:"Enter email address"})}),t.jsx("div",{children:t.jsx(le,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),t.jsx(He,{})]}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:w,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:ie,children:a?"Update":"Save"})]})]})})]})}function Os({userId:e}){const a=B(e),l=de({}),[n,d]=s.useState([]),[o,c]=s.useState({}),[m,x]=s.useState("");s.useEffect(()=>{var e;(null==a?void 0:a.data)&&d((null==(e=a.data)?void 0:e.data)||[])},[a]);const u=n.filter(e=>e.role_name.toLowerCase().includes(m.toLowerCase())),h=n.filter(e=>e.permission_status).length,p=n.length,b=n.some(e=>e.permission_status);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[h," of ",p," roles enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(s=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:s.role_name})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:s.permission_status,onChange:()=>(async(s,t)=>{var n,o;c(e=>({...e,[s]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createWorkFlowRoleAuth}`,data:{userId:parseInt(e),wfRoleId:s,permissionStatus:!t}});c&&(null==(o=c.data)?void 0:o.status)&&(a.refetch(),d(e=>e.map(e=>e.id===s?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[s]:!1}))}})(s.id,s.permission_status),disabled:o[s.id]||!s.permission_status&&b,className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[s.id]||!s.permission_status&&b?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${o[s.id]?"animate-pulse":""}`,children:o[s.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function Ys({userId:e}){const a=T(e),l=de({}),[n,d]=s.useState([]),[o,c]=s.useState({}),[m,x]=s.useState("");s.useEffect(()=>{var e;(null==a?void 0:a.data)&&d((null==(e=a.data)?void 0:e.data)||[])},[a]);const u=n.filter(e=>e.menu_role_name.toLowerCase().includes(m.toLowerCase())),h=n.filter(e=>e.permission_status).length,p=n.length;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[h," of ",p," roles enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(s=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:s.menu_role_name})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:s.permission_status,onChange:()=>(async(s,t)=>{var n,o;c(e=>({...e,[s]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createMenuRoleAuth}`,data:{userId:parseInt(e),menuRoleId:s,permissionStatus:!t}});c&&(null==(o=c.data)?void 0:o.status)&&(a.refetch(),d(e=>e.map(e=>e.id===s?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[s]:!1}))}})(s.id,s.permission_status),disabled:o[s.id],className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[s.id]?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${o[s.id]?"animate-pulse":""}`,children:o[s.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function Hs({userId:e}){const a=$(e),l=de({}),[n,d]=s.useState([]),[o,c]=s.useState({}),[m,x]=s.useState("");s.useEffect(()=>{var e;(null==a?void 0:a.data)&&d((null==(e=a.data)?void 0:e.data)||[])},[a]);const u=n.filter(e=>e.ward_name.toString().includes(m)),h=n.filter(e=>e.permission_status).length,p=n.length;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),t.jsxs("p",{className:"text-sm text-slate-500",children:[h," of ",p," wards enabled"]})]})}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search wards...",value:m,onChange:e=>x(e.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:u.map(s=>t.jsx("div",{className:"rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md "+(s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&t.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),t.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",s.ward_name]})]}),t.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[t.jsx("input",{type:"checkbox",checked:s.permission_status,onChange:()=>(async(s,t)=>{var n,o;c(e=>({...e,[s]:!0}));try{const c=await l.mutateAsync({api:`${null==(n=r)?void 0:n.createWardAuth}`,data:{userId:parseInt(e),wardList:[{permissionStatus:!t,wardId:s}]}});c&&(null==(o=c.data)?void 0:o.status)&&(a.refetch(),d(e=>e.map(e=>e.id===s?{...e,permission_status:!t}:e))),i.success("Permission updated successfully")}catch(m){}finally{c(e=>({...e,[s]:!1}))}})(s.id,s.permission_status),disabled:o[s.id],className:"peer sr-only"}),t.jsx("div",{className:"peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 "+(o[s.id]?"cursor-not-allowed opacity-50":""),children:t.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${o[s.id]?"animate-pulse":""}`,children:o[s.id]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),0===u.length&&t.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:t.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',m,'"']})})]})})}function Us({getDataById:e}){var a,l,i,n,d,o,m,x;const[u,h]=s.useState(""),[p,b]=s.useState("workflow"),g=V(c(String(null==(l=null==(a=null==e?void 0:e.data)?void 0:a.data)?void 0:l.id))),j=me({api:null==(i=r)?void 0:i.getUsrByIdAuth,config:{id:u},value:[u],options:{enabled:!!u}}),v=null==(o=null==(d=null==(n=null==j?void 0:j.data)?void 0:n.data)?void 0:d.data)?void 0:o[0],f=[{id:"workflow",label:"Workflow Permission",icon:Ce},{id:"permittedRoles",label:" Permitted Roles",icon:Pe},{id:"ward",label:"Ward Role",icon:je}];return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[t.jsx("div",{children:t.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("div",{children:t.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"h-9 w-full cursor-pointer rounded-md border-2 border-slate-300 bg-slate-50 px-3 transition-colors\r\n                     duration-200 hover:border-blue-400 focus:border-blue-400 focus:outline-none focus:ring-2\r\n                     focus:ring-blue-500 md:w-52",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Module Access"}),null==(x=null==(m=null==g?void 0:g.data)?void 0:m.data)?void 0:x.map(e=>t.jsx("option",{value:e.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:e.module_user_type},e.module_access_id))]})}),t.jsx(Ls,{title:"Add User",edit:!1,moduleAccessRefetch:g.refetch,getDataById:e,userData:v})]})]}),v?t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4 flex justify-end",children:t.jsx(Ls,{title:"Edit User",edit:!0,moduleAccessRefetch:g.refetch,getDataById:e,userData:v})}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:t.jsx(_,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:v.id})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:t.jsx(_,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:v.user_name})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:t.jsx(_,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:v.name})]})]}),t.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:t.jsx(be,{className:"h-5 w-5 text-orange-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:v.email})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:t.jsx(pe,{className:"h-5 w-5 text-cyan-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),t.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:v.mobile})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:t.jsx(he,{className:"h-5 w-5 text-indigo-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),t.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:v.user_type})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:t.jsx(he,{className:"h-5 w-5 text-emerald-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),t.jsx("span",{className:"inline-block rounded-full px-3 py-1 text-xs font-medium "+(v.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:v.suspended?"Suspended":"Active"})]})]}),v.photo&&"/"!==v.photo&&t.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:t.jsx(_,{className:"h-5 w-5 text-pink-600"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),t.jsx("img",{src:v.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),t.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[t.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:t.jsx("div",{className:"flex overflow-x-auto",children:f.map(e=>{const s=e.icon;return t.jsxs("button",{onClick:()=>b(e.id),className:"flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all "+(p===e.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[t.jsx(s,{className:"h-4 w-4"}),e.label]},e.id)})})}),t.jsxs("div",{className:"p-6",children:["workflow"===p&&t.jsx(Os,{userId:u}),"permittedRoles"===p&&t.jsx(Ys,{userId:u}),"ward"===p&&t.jsx(Hs,{userId:u})]})]})]}):t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:t.jsx(he,{className:"h-10 w-10 text-slate-400"})}),t.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),t.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Gs({id:e,getDataById:a}){var i;const[n,r]=s.useState("calendar"),[d,o]=s.useState(""),[c,m]=s.useState((new Date).getFullYear()),[u,h]=s.useState("all"),p=ce({api:`${l.getAllAttendanceByEmpId}?emp_id=${e}`,key:"getAllAttendanceByEmpId",options:{enabled:!0}}),b=(null==(i=null==p?void 0:p.data)?void 0:i.data)||[],g=e=>{switch(e){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:t.jsx(qe,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:t.jsx(De,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:t.jsx(ve,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:t.jsx(Ke,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:t.jsx(We,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},j=e=>{if(!e)return"--:--";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},v=s.useMemo(()=>{if(!d.trim())return b;const e=d.toLowerCase();return b.filter(s=>`${s.month} ${s.year}`.toLowerCase().includes(e))},[b,d]),f=s.useMemo(()=>"calendar"!==n?v:b.filter(e=>{const s=parseInt(e.year)===c,a="all"===u||e.month===u;return s&&a}),[b,c,u,n,v]),N=("calendar"===n?f:v).reduce((e,s)=>(1===s.attendance_status?e.present++:2===s.attendance_status?e.leave++:e.absent++,e.totalHours+=parseInt(s.working_hours||"0"),e.totalDays++,e),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),y=v.reduce((e,s)=>{const a=`${s.month} ${s.year}`;return e[a]||(e[a]=[]),e[a].push(s),e},{}),_=s.useMemo(()=>{const e=(new Date).getFullYear();return[e-1,e,e+1]},[b]),w=s.useMemo(()=>{const e={};return b.forEach(s=>{const a=parseInt(s.year),t=s.month;e[a]||(e[a]={}),e[a][t]||(e[a][t]={});const l=new Date(s.date).getDate().toString();e[a][t][l]=s}),e},[b]),S=s.useMemo(()=>{const e=new Set;return b.forEach(s=>{e.add(`${s.month} ${s.year}`)}),Array.from(e).sort((e,s)=>{const[a,t]=e.split(" "),[l,i]=s.split(" "),n=new Date(`${a} 1, ${t}`);return new Date(`${l} 1, ${i}`).getTime()-n.getTime()})},[b]),k=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[t.jsx("div",{children:t.jsx("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Attendance Records"})}),t.jsxs("div",{className:"relative w-64",children:[t.jsx(Je,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:d,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),d&&t.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx(We,{className:"h-4 w-4"})})]})]}),d&&S.filter(e=>e.toLowerCase().includes(d.toLowerCase())).length>0&&t.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:S.filter(e=>e.toLowerCase().includes(d.toLowerCase())).slice(0,5).map(e=>t.jsx("button",{onClick:()=>o(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:e},e))})]}),t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[t.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N.present})]}),t.jsx(qe,{className:"h-10 w-10 text-green-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N.absent})]}),t.jsx(We,{className:"h-10 w-10 text-red-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N.leave})]}),t.jsx(De,{className:"h-10 w-10 text-blue-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N.totalHours})]}),t.jsx(Qe,{className:"h-10 w-10 text-purple-500"})]})}),t.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),t.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N.totalDays})]}),t.jsx(ve,{className:"h-10 w-10 text-indigo-500"})]})})]}),t.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>r("calendar"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("calendar"===n?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[t.jsx(Ke,{className:"h-4 w-4"}),"Calendar View"]}),t.jsxs("button",{onClick:()=>r("list"),className:"flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors "+("list"===n?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[t.jsx(x,{className:"h-4 w-4"}),"List View"]})]})}),"calendar"===n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:_.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),t.jsx("select",{value:c,onChange:e=>m(parseInt(e.target.value)),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:_.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Month:"}),t.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:"All Months"}),k.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),"all"!==u&&t.jsxs("button",{onClick:()=>h("all"),className:"flex items-center gap-1 rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200",children:[t.jsx(We,{className:"h-4 w-4"}),"Clear Filter"]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2",children:k.filter(e=>"all"===u||u===e).map(e=>{var s;const a=((e,s)=>{const a=new Date(`${e} 1, ${s}`).getMonth();return new Date(s,a+1,0).getDate()})(e,c),l=((e,s)=>{const a=new Date(`${e} 1, ${s}`).getMonth();return new Date(s,a,1).getDay()})(e,c),i=Array.from({length:a},(e,s)=>s+1),n=Array.from({length:l},(e,s)=>s),r=(null==(s=w[c])?void 0:s[e])||{};return t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("h3",{className:"mb-3 text-center text-lg font-semibold text-gray-800",children:e}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((s,a)=>t.jsx("div",{className:"p-1 text-center text-xs font-semibold text-gray-600",children:s},`${e}-${s}-${a}`)),n.map(s=>t.jsx("div",{className:"p-1"},`empty-${e}-${s}`)),i.map(s=>{const a=r[s.toString()],l=a?g(a.attendance_status):null;return t.jsxs("div",{className:`min-h-24 rounded border p-1.5 text-xs transition-all ${a?null==l?void 0:l.color:"border-gray-200 bg-gray-50"} ${a?"cursor-pointer hover:shadow-md":""}`,children:[t.jsx("div",{className:"mb-1 font-semibold text-gray-700",children:s}),a&&l&&t.jsxs("div",{className:"space-y-0.5",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:l.iconColor,children:l.icon}),t.jsx("span",{className:"text-[10px] font-medium",children:l.label})]}),1===a.attendance_status&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-[9px] text-gray-600",children:["In: ",j(a.emp_in_time)]}),t.jsxs("div",{className:"text-[9px] text-gray-600",children:["Out: ",j(a.emp_out_time)]}),t.jsxs("div",{className:"text-[10px] font-medium text-gray-700",children:[a.working_hours,"h"]})]})]})]},`${e}-${s}`)})]})]},e)})})]}),"list"===n&&t.jsx(t.Fragment,{children:Object.entries(y).map(([e,s])=>t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[t.jsx(ve,{className:"h-5 w-5 text-gray-600"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e})]}),t.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(e=>{const s=g(e.attendance_status);return t.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:(a=e.date,new Date(a).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${s.color}`,children:[t.jsx("span",{className:null==s?void 0:s.iconColor,children:null==s?void 0:s.icon}),null==s?void 0:s.label]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[t.jsx(Qe,{className:"h-4 w-4 text-gray-400"}),j(e.emp_in_time)]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[t.jsx(Qe,{className:"h-4 w-4 text-gray-400"}),j(e.emp_out_time)]})}),t.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.working_hours||"0","h"]})})]},e.id);var a})})]})})})]},e))}),0===v.length&&t.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[t.jsx(ve,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),t.jsx("p",{className:"text-lg text-gray-500",children:d?"No attendance records found for the search term":"No attendance records found"}),d&&t.jsx("button",{onClick:()=>o(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const zs=W().shape({education:X().of(W().shape({qualification:K().notRequired(),specialization:K().required(),board_university:K().notRequired(),passing_year:K().notRequired(),percentage:K().notRequired(),grade:K().notRequired(),place:K().notRequired()})),trainingInfo:X().of(W().shape({training_name:K().notRequired(),training_type:K().notRequired(),institute:K().notRequired(),start_date:K().notRequired(),end_date:K().notRequired(),duration:K().notRequired(),certificate:ee().notRequired()}))});function Ws({id:e,getDataById:a}){var n,r;const d=de({}),o=de({}),c=ce({api:`${l.getEducationDetails}?emp_id=${e}`,key:"get-employee-qualificationsdddddddd",value:[e],options:{enabled:!!e}}),m=ce({api:`${l.getEmployeeTrainings}?emp_id=${e}`,key:"get-employee-training",value:[e],options:{enabled:!!e}}),x=s.useMemo(()=>{var e,s,a,t;return(null==(s=null==(e=null==c?void 0:c.data)?void 0:e.data)?void 0:s.length)>0?null==(t=null==(a=null==c?void 0:c.data)?void 0:a.data)?void 0:t.map(e=>{var s;return{qualification:e.qualification,specialization:e.specialization,board_university:e.board_university,passing_year:null==(s=e.passing_year)?void 0:s.toString(),percentage:e.percentage,grade:e.grade,place:e.place}}):[{qualification:"Matriculation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Intermediate",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Post Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""}]},[null==(n=null==c?void 0:c.data)?void 0:n.data]),h=s.useMemo(()=>{var e,s,a,t;return(null==(s=null==(e=null==m?void 0:m.data)?void 0:e.data)?void 0:s.length)>0?null==(t=null==(a=null==m?void 0:m.data)?void 0:a.data)?void 0:t.map(e=>({training_name:e.training_name,training_type:String(e.training_type),institute:e.institute,start_date:e.start_date,end_date:e.end_date,duration:e.duration,certificate:null})):[{training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null}]},[null==(r=null==m?void 0:m.data)?void 0:r.data]),p=U({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{education:x,trainingInfo:h},resolver:G(zs)}),b=z({control:p.control,name:"education"}),g=z({control:p.control,name:"trainingInfo"});s.useEffect(()=>{p.reset({trainingInfo:h,education:x})},[h,x]);return t.jsx("div",{children:t.jsx(se,{methods:p,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded bg-blue-100 p-1",children:t.jsx(As,{className:"h-4 w-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Education Records"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Academic qualifications"})]})]})}),t.jsxs("div",{className:"space-y-2.5",children:[null==b?void 0:b.fields.map((e,s)=>t.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-blue-300 hover:shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white",children:s+1}),t.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",s+1]})]}),s>=4&&t.jsx("button",{type:"button",onClick:()=>(e=>{b.remove(e)})(s),className:"rounded p-1 text-red-600 hover:bg-red-50",children:t.jsx(Ie,{size:14})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-7",children:[t.jsx(le,{name:`education[${s}].qualification`,label:"Qualification",disabled:s<4,placeholder:"Qualification"}),t.jsx(le,{name:`education[${s}].specialization`,label:"Specialization",placeholder:"Specialization"}),t.jsx(le,{name:`education[${s}].board_university`,label:"Board/University",placeholder:"Board/University"}),t.jsx(le,{name:`education[${s}].passing_year`,label:"Passing Year",placeholder:"Year",inputValidation:["number","zip"]}),t.jsx(le,{name:`education[${s}].percentage`,label:"Marks %",placeholder:"Marks",inputValidation:["number","zip"]}),t.jsx(le,{name:`education[${s}].grade`,label:"Grade",placeholder:"Grade"}),t.jsx(le,{name:`education[${s}].place`,label:"Place",placeholder:"Location"})]})]},e.id)),t.jsxs("div",{className:"flex justify-center pt-0.5",children:[t.jsxs("button",{type:"button",onClick:()=>{b.append({qualification:"",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-blue-300 bg-blue-50 px-3 py-1.5 text-xs font-medium text-blue-700 transition-all hover:border-blue-400 hover:bg-blue-100",children:[t.jsx(Ds,{size:13}),"Add Record"]}),t.jsxs(ne,{type:"button",isLoading:d.isPending,onClick:async()=>{var s,a,t,n;p.clearErrors("education");if(!(await p.trigger("education"))){const e=p.formState.errors.education;if(e&&Array.isArray(e))for(let s=0;s<e.length;s++)if(e[s]){const a=Object.keys(e[s]||{});if(a.length>0){const e=`education.${s}.${a[0]}`;p.setFocus(e);break}}return}const r=p.watch("education");try{const o=await d.mutateAsync({api:null==(s=l)?void 0:s.addEducationDetails,data:{emp_id:String(u(e)),qualifications:r}});(null==(a=null==o?void 0:o.data)?void 0:a.success)?i.success((null==(t=null==o?void 0:o.data)?void 0:t.message)||"Education details submitted successfully"):i.error((null==(n=null==o?void 0:o.data)?void 0:n.message)||"Failed to submit Education details")}catch(o){i.error("Failed to submit Education details")}},className:"\r\nml-3 inline-flex items-center gap-1 rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1\r\n                  ",children:[t.jsx(Ds,{size:13}),"Submit Education Details"]})]})]})]}),t.jsx("div",{className:"border-t border-gray-200"}),t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded bg-indigo-100 p-1",children:t.jsx(Xe,{className:"h-4 w-4 text-indigo-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Training Records"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Professional training"})]})]})}),t.jsxs("div",{className:"space-y-2.5",children:[null==g?void 0:g.fields.map((e,s)=>t.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-indigo-300 hover:shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-indigo-600 text-xs font-semibold text-white",children:s+1}),t.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",s+1]})]}),s>=1&&t.jsx("button",{type:"button",onClick:()=>(e=>{g.remove(e)})(s),className:"rounded p-1 text-red-600 transition-all hover:bg-red-50",children:t.jsx(Ie,{size:14})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-6",children:[t.jsx(le,{name:`trainingInfo[${s}].training_name`,label:"Training Name",placeholder:"Training Name"}),t.jsx("div",{children:t.jsx(re,{name:`trainingInfo[${s}].training_type`,label:"Type",data:[{label:"Online",value:"Online"},{label:"Offline",value:"Offline"},{label:"Hybrid",value:"Hybrid"},{label:"Workshop",value:"Workshop"},{label:"Certification",value:"Certification"}]})}),t.jsx(le,{name:`trainingInfo[${s}].institute`,label:"Institute",placeholder:"Institute"}),t.jsx(le,{type:"date",name:`trainingInfo[${s}].start_date`,label:"Start Date",placeholder:"Start Date"}),t.jsx(le,{type:"date",name:`trainingInfo[${s}].end_date`,label:"End Date",placeholder:"End Date"}),t.jsx(le,{name:`trainingInfo[${s}].duration`,label:"Duration",placeholder:"Duration"})]})]},e.id)),t.jsxs("div",{className:"flex justify-center pt-0.5",children:[t.jsxs("button",{type:"button",onClick:()=>{g.append({training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null})},className:"inline-flex items-center gap-1 rounded-md border border-dashed border-indigo-300 bg-indigo-50 px-3 py-1.5 text-xs font-medium text-indigo-700 transition-all hover:border-indigo-400 hover:bg-indigo-100",children:[t.jsx(Ds,{size:13}),"Add Record"]}),t.jsxs(ne,{isLoading:o.isPending,type:"button",onClick:async()=>{var s,a,t;p.clearErrors("trainingInfo");if(!(await p.trigger("trainingInfo"))){const e=p.formState.errors.trainingInfo;if(e&&Array.isArray(e))for(let s=0;s<e.length;s++)if(e[s]){const a=Object.keys(e[s]||{});if(a.length>0){const e=`trainingInfo.${s}.${a[0]}`;p.setFocus(e);break}}return}const n=p.getValues("trainingInfo");try{const r=await o.mutateAsync({api:`${l.createEmployeeTraining}`,data:{emp_id:String(u(e)),trainings:n}});(null==(s=null==r?void 0:r.data)?void 0:s.success)?i.success((null==(a=null==r?void 0:r.data)?void 0:a.message)||"Training details submitted successfully"):i.error((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Failed to submit Training details")}catch(r){i.error("Failed to submit Training details")}},className:"ml-3 inline-flex items-center gap-1 rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1\r\n                    ",children:[t.jsx(Ds,{size:13}),"Submit Training Details"]})]})]})]})]})})})}function Js({id:e,getDataById:s}){return t.jsx(Ws,{id:e,getDataById:s})}const Qs=W().shape({scale:K().required("Scale is required"),increment_date:K().required("Increment date is required"),increment_amount:Q().required("Increment amount is required").min(0,"Increment amount must be at least 0"),basic_pay_after_increment:Q().required("Basic pay after increment is required").min(0,"Basic pay must be at least 0"),vide_order_no:K().required("Vide order no. is required"),vide_order_date:K().required("Vide order date is required")});function Ks({title:e="Add Increment Details",id:a,edit:n,refetch:r,getDataById:c}){var m;const x=de({}),u=s.useRef(null),{id:h}=d(),{data:p}=ce({api:`${null==(m=l)?void 0:m.getFamilyMemberById}/${a}`,key:"getFamilyMemberById",options:{enabled:n&&!!a}}),b=U({defaultValues:{scale:"",increment_date:"",increment_amount:0,basic_pay_after_increment:0,vide_order_no:"",vide_order_date:""},resolver:G(Qs)});s.useEffect(()=>{var e,s,a,t,l,i;n&&p?b.reset({scale:(null==(e=null==p?void 0:p.data)?void 0:e.scale)||"",increment_date:(null==(s=null==p?void 0:p.data)?void 0:s.increment_date)||"",increment_amount:(null==(a=null==p?void 0:p.data)?void 0:a.increment_amount)||0,basic_pay_after_increment:(null==(t=null==p?void 0:p.data)?void 0:t.basic_pay_after_increment)||0,vide_order_no:(null==(l=null==p?void 0:p.data)?void 0:l.vide_order_no)||"",vide_order_date:(null==(i=null==p?void 0:p.data)?void 0:i.vide_order_date)||""}):b.reset({scale:"",increment_date:"",increment_amount:0,basic_pay_after_increment:0,vide_order_no:"",vide_order_date:""})},[n,p]);const g=b.formState.isSubmitting||x.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Add Increment Details"]})}),t.jsx(P,{className:"sm:max-w-[500px]",children:t.jsxs(se,{methods:b,onSubmit:b.handleSubmit(async e=>{var s,t,d,o,c,m,p,g;try{const j={emp_id:h,scale:e.scale,increment_date:e.increment_date,increment_amount:e.increment_amount,basic_pay_after_increment:e.basic_pay_after_increment,vide_order_no:e.vide_order_no,vide_order_date:e.vide_order_date};if(n&&a){const e=await x.mutateAsync({api:`${l.updateFamilyMemberById}/${a}`,data:j});(null==(s=e.data)?void 0:s.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Increment details updated successfully"),null==(d=u.current)||d.click()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update increment details")}else{const e=await x.mutateAsync({api:l.createFamily,data:j});(null==(c=e.data)?void 0:c.success)?(i.success((null==(m=null==e?void 0:e.data)?void 0:m.message)||"Increment details added successfully"),null==(p=u.current)||p.click()):i.error((null==(g=e.data)?void 0:g.message)||"Failed to add increment details")}b.reset(),null==r||r()}catch(j){i.error("An error occurred while processing your request")}}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(I,{children:n?"Update increment information":"Add new increment details"})]}),t.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(le,{label:"Scale",name:"scale",placeholder:"Enter scale",inputValidation:["removeDoubleSpace"]})}),t.jsx("div",{children:t.jsx(le,{label:"Increment Date",name:"increment_date",type:"date",placeholder:"Select increment date"})}),t.jsx("div",{children:t.jsx(le,{label:"Increment Amount",name:"increment_amount",placeholder:"Enter increment amount",inputValidation:["number"]})}),t.jsx("div",{children:t.jsx(le,{label:"Basic Pay After Increment",name:"basic_pay_after_increment",placeholder:"Enter basic pay after increment",inputValidation:["number"]})}),t.jsx(He,{}),t.jsx("div",{children:t.jsx(le,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number",inputValidation:["removeDoubleSpace"]})}),t.jsx("div",{children:t.jsx(le,{label:"Vide Order Date",name:"vide_order_date",type:"date",placeholder:"Select vide order date"})})]}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:u,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:g,children:n?"Update":"Save"})]})]})})]})}function Xs({id:e,getDataById:a}){var n,r,d,m;const[x,u]=s.useState(""),[h,p]=s.useState(!1),b=ce({api:`${l.getAllFamilyDetail}?emp_id=${e}`,key:"getEmployeeFamilyDetailsId",value:[e],options:{enabled:!0}}),g=de({});return t.jsx("main",{className:" bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage the increment details of the employee"})}),t.jsx(Ks,{title:h?"Edit Increment Detail":"Add Increment Detail",id:e,edit:h,setEdit:p,refetch:b.refetch,getDataById:a})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:b.isLoading?t.jsx(Be,{children:t.jsx(Te,{className:"flex h-32 items-center justify-center",children:t.jsx(Oe,{})})}):t.jsxs(t.Fragment,{children:[null==(r=null==(n=null==b?void 0:b.data)?void 0:n.data)?void 0:r.map(e=>{return t.jsxs(Be,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx($e,{className:"pb-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fe,{className:"h-6 w-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx(Ve,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[s]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ye("Are you sure?","Please confirm",async()=>{var s,a,t;try{const n=await g.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:c(e.toString())}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Deleted successfully"),b.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:t.jsx(Ie,{className:"h-3.5 w-3.5"})})})]})}),t.jsxs(Te,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Re(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Address:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?t.jsx(qe,{className:"h-4 w-4 text-green-500"}):t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),t.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"h-4 w-4 text-green-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(ve,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Re(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var s}),0===(null==(m=null==(d=null==b?void 0:b.data)?void 0:d.data)?void 0:m.length)&&t.jsx(Be,{className:"py-12 text-center",children:t.jsxs(Te,{children:[t.jsx(fe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),t.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const Zs=W().shape({designation_from:K().required("Designation from is required"),designation_to:K().required("Designation to is required"),scale_from:K().required("Scale from is required"),scale_to:K().required("Scale to is required"),vide_order_no:K().required("Vide order no. is required"),vide_order_date:K().required("Vide order date is required"),is_transfer:Z().default(!1)});function ea({title:e="Add Designation & Scale Details",id:a,edit:n,refetch:r,getDataById:d,empId:c}){var m;const x=de({}),u=s.useRef(null),{data:h}=ce({api:`${null==(m=l)?void 0:m.getFamilyMemberById}/${a}`,key:"getDesignationScaleById",options:{enabled:n&&!!a}}),p=U({defaultValues:{designation_from:"",designation_to:"",scale_from:"",scale_to:"",vide_order_no:"",vide_order_date:"",is_transfer:!1},resolver:G(Zs)});s.useEffect(()=>{var e,s,a,t,l,i,r;n&&h?p.reset({designation_from:(null==(e=null==h?void 0:h.data)?void 0:e.designation_from)||"",designation_to:(null==(s=null==h?void 0:h.data)?void 0:s.designation_to)||"",scale_from:(null==(a=null==h?void 0:h.data)?void 0:a.scale_from)||"",scale_to:(null==(t=null==h?void 0:h.data)?void 0:t.scale_to)||"",vide_order_no:(null==(l=null==h?void 0:h.data)?void 0:l.vide_order_no)||"",vide_order_date:(null==(i=null==h?void 0:h.data)?void 0:i.vide_order_date)||"",is_transfer:(null==(r=null==h?void 0:h.data)?void 0:r.is_transfer)||!1}):p.reset({designation_from:"",designation_to:"",scale_from:"",scale_to:"",vide_order_no:"",vide_order_date:"",is_transfer:!1})},[n,h]);const b=p.formState.isSubmitting||x.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Add Promotion Details"]})}),t.jsx(P,{className:"sm:max-w-[900px]",children:t.jsxs(se,{methods:p,onSubmit:p.handleSubmit(async e=>{var s,t,d,o,m,h,b,g;try{const j={emp_id:c,designation_from:e.designation_from,designation_to:e.designation_to,scale_from:e.scale_from,scale_to:e.scale_to,vide_order_no:e.vide_order_no,vide_order_date:e.vide_order_date,is_transfer:e.is_transfer||!1};if(n&&a){const e=await x.mutateAsync({api:`${l.addEducationDetails}/${a}`,data:j});(null==(s=e.data)?void 0:s.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Details updated successfully"),null==(d=u.current)||d.click()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update details")}else{const e=await x.mutateAsync({api:l.createAttendance,data:j});(null==(m=e.data)?void 0:m.success)?(i.success((null==(h=null==e?void 0:e.data)?void 0:h.message)||"Details added successfully"),null==(b=u.current)||b.click()):i.error((null==(g=e.data)?void 0:g.message)||"Failed to add details")}p.reset(),null==r||r()}catch(j){i.error("An error occurred while processing your request")}}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(I,{children:n?"Update designation and scale information":"Add new designation and scale details"})]}),t.jsxs("div",{className:"mt-5 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-4 md:grid-cols-4",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),t.jsx(le,{name:"designation_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),t.jsx(le,{name:"designation_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Scale"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),t.jsx(le,{name:"scale_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),t.jsx(le,{name:"scale_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order No."}),t.jsx("div",{className:"pt-6",children:t.jsx(le,{name:"vide_order_no",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order Date"}),t.jsx("div",{className:"pt-6",children:t.jsx(le,{name:"vide_order_date",type:"date",placeholder:"dd-mm-yyyy"})})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Transfer"}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx(ze,{name:"is_transfer",label:"Yes"})})]})]}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:u,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:b,children:n?"Update":"Save"})]})]})})]})}function sa({id:e,getDataById:a}){var n,r,d,m;const[x,u]=s.useState(""),[h,p]=s.useState(!1),b=ce({api:`${l.getAllFamilyDetail}?emp_id=${e}`,key:"getEmployeeFamilyDetailsId",value:[e],options:{enabled:!0}}),g=de({});return t.jsx("main",{className:"min-h-7 bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Promotion Details"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage promotion details of the employee"})]}),t.jsx(ea,{title:h?"Edit Promotion Detail":"Add Promotion Detail",id:e,edit:h,setEdit:p,refetch:b.refetch,getDataById:a})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:b.isLoading?t.jsx(Be,{children:t.jsx(Te,{className:"flex h-32 items-center justify-center",children:t.jsx(Oe,{})})}):t.jsxs(t.Fragment,{children:[null==(r=null==(n=null==b?void 0:b.data)?void 0:n.data)?void 0:r.map(e=>{return t.jsxs(Be,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx($e,{className:"pb-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fe,{className:"h-6 w-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx(Ve,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[s]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ye("Are you sure?","Please confirm",async()=>{var s,a,t;try{const n=await g.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:c(e.toString())}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Deleted successfully"),b.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:t.jsx(Ie,{className:"h-3.5 w-3.5"})})})]})}),t.jsxs(Te,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Re(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Address:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?t.jsx(qe,{className:"h-4 w-4 text-green-500"}):t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),t.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"h-4 w-4 text-green-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(ve,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Re(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var s}),0===(null==(m=null==(d=null==b?void 0:b.data)?void 0:d.data)?void 0:m.length)&&t.jsx(Be,{className:"py-12 text-center",children:t.jsxs(Te,{children:[t.jsx(fe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),t.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const aa=W().shape({designation_from:K().required("Designation from is required"),designation_to:K().required("Designation to is required"),office_from:K().required("Office from is required"),office_to:K().required("Office to is required"),joining_date:K().required("Joining date is required"),vide_order_no:K().required("Vide order no. is required"),vide_order_date:K().required("Vide order date is required"),is_transfer_promotion:Z().default(!1)});function ta({title:e="Add Designation & Office Details",id:a,edit:n,refetch:r,getDataById:d,empId:c}){const m=de({}),x=s.useRef(null),{data:u}=ce({api:`${l.addEducationDetails}/${a}`,key:"getDesignationOfficeById",options:{enabled:n&&!!a}}),h=U({defaultValues:{designation_from:"",designation_to:"",office_from:"",office_to:"",joining_date:"",vide_order_no:"",vide_order_date:"",is_transfer_promotion:!1},resolver:G(aa)});s.useEffect(()=>{var e,s,a,t,l,i,r,d;n&&u?h.reset({designation_from:(null==(e=null==u?void 0:u.data)?void 0:e.designation_from)||"",designation_to:(null==(s=null==u?void 0:u.data)?void 0:s.designation_to)||"",office_from:(null==(a=null==u?void 0:u.data)?void 0:a.office_from)||"",office_to:(null==(t=null==u?void 0:u.data)?void 0:t.office_to)||"",joining_date:(null==(l=null==u?void 0:u.data)?void 0:l.joining_date)||"",vide_order_no:(null==(i=null==u?void 0:u.data)?void 0:i.vide_order_no)||"",vide_order_date:(null==(r=null==u?void 0:u.data)?void 0:r.vide_order_date)||"",is_transfer_promotion:(null==(d=null==u?void 0:u.data)?void 0:d.is_transfer_promotion)||!1}):h.reset({designation_from:"",designation_to:"",office_from:"",office_to:"",joining_date:"",vide_order_no:"",vide_order_date:"",is_transfer_promotion:!1})},[n,u]);const p=h.formState.isSubmitting||m.isPending;return t.jsxs(k,{children:[t.jsx(C,{asChild:!0,children:t.jsxs(o,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[t.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Add Transfer"]})}),t.jsx(P,{className:"sm:max-w-[1100px]",children:t.jsxs(se,{methods:h,onSubmit:h.handleSubmit(async e=>{var s,t,d,o,u,p,b,g;try{const j={emp_id:c,designation_from:e.designation_from,designation_to:e.designation_to,office_from:e.office_from,office_to:e.office_to,joining_date:e.joining_date,vide_order_no:e.vide_order_no,vide_order_date:e.vide_order_date,is_transfer_promotion:e.is_transfer_promotion||!1};if(n&&a){const e=await m.mutateAsync({api:`${l.uploadEmployeeDocument}/${a}`,data:j});(null==(s=e.data)?void 0:s.success)?(i.success((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Details updated successfully"),null==(d=x.current)||d.click()):i.error((null==(o=e.data)?void 0:o.message)||"Failed to update details")}else{const e=await m.mutateAsync({api:l.createAttendance,data:j});(null==(u=e.data)?void 0:u.success)?(i.success((null==(p=null==e?void 0:e.data)?void 0:p.message)||"Details added successfully"),null==(b=x.current)||b.click()):i.error((null==(g=e.data)?void 0:g.message)||"Failed to add details")}h.reset(),null==r||r()}catch(j){i.error("An error occurred while processing your request")}}),children:[t.jsxs(D,{children:[t.jsx(A,{children:e}),t.jsx(He,{className:"my-4"})]}),t.jsx("div",{className:"mt-5 space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-4 md:grid-cols-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),t.jsx(le,{name:"designation_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),t.jsx(le,{name:"designation_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Office"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),t.jsx(le,{name:"office_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),t.jsx(le,{name:"office_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Joining Date"}),t.jsx("div",{className:"pt-6",children:t.jsx(le,{name:"joining_date",type:"date",placeholder:"dd-mm-yyyy"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order No."}),t.jsx("div",{className:"pt-6",children:t.jsx(le,{name:"vide_order_no",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order Date"}),t.jsx("div",{className:"pt-6",children:t.jsx(le,{name:"vide_order_date",type:"date",placeholder:"dd-mm-yyyy"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Transfer and Promotion"}),t.jsxs("div",{className:"flex flex-col space-y-2 pt-6",children:[t.jsx(ze,{name:"is_transfer_promotion",label:"Yes"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 rounded border-gray-300"}),t.jsx("label",{className:"ml-2 text-sm text-gray-600",children:"No"})]})]})]})]})}),t.jsxs(E,{className:"mt-5 flex justify-between",children:[t.jsx(F,{asChild:!0,children:t.jsx(o,{variant:"outline",ref:x,children:"Cancel"})}),t.jsx(ne,{type:"submit",isLoading:p,children:n?"Update":"Save"})]})]})})]})}function la({id:e,getDataById:a}){var n,r,d,m;const[x,u]=s.useState(""),[h,p]=s.useState(!1),b=ce({api:`${l.getAllFamilyDetail}?emp_id=${e}`,key:"getEmployeeFamilyDetailsId",value:[e],options:{enabled:!0}}),g=de({});return t.jsx("main",{className:"min-h-7 bg-gray-50/50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage promotion details of the employee"})}),t.jsx(ta,{title:h?"Edit Transfer Detail":"Add Transfer Detail",id:e,edit:h,setEdit:p,refetch:b.refetch,getDataById:a})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:b.isLoading?t.jsx(Be,{children:t.jsx(Te,{className:"flex h-32 items-center justify-center",children:t.jsx(Oe,{})})}):t.jsxs(t.Fragment,{children:[null==(r=null==(n=null==b?void 0:b.data)?void 0:n.data)?void 0:r.map(e=>{return t.jsxs(Be,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[t.jsx($e,{className:"pb-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fe,{className:"h-6 w-6 text-blue-500"}),t.jsxs("div",{children:[t.jsx(Ve,{className:"text-lg font-semibold text-gray-900",children:null==e?void 0:e.family_member_name}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s=null==e?void 0:e.relationship,{Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"}[s]||"bg-gray-100 text-gray-700"}`,children:null==e?void 0:e.relationship})})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(o,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>(async e=>{Ye("Are you sure?","Please confirm",async()=>{var s,a,t;try{const n=await g.mutateAsync({api:`${l.deleteFamilyMember}`,data:{id:c(e.toString())}});(null==(s=null==n?void 0:n.data)?void 0:s.success)?(i.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Deleted successfully"),b.refetch()):i.error((null==(t=null==n?void 0:n.data)?void 0:t.message)||"Failed to delete")}catch(n){i.error("Error deleting family member")}})})(null==e?void 0:e.id),children:t.jsx(Ie,{className:"h-3.5 w-3.5"})})})]})}),t.jsxs(Te,{className:"space-y-4 pt-0",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(ve,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Re(null==e?void 0:e.dob).format("DD-MM-YYYY")})]}),t.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Address:"})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:null==e?void 0:e.address})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[(null==e?void 0:e.is_dependent)?t.jsx(qe,{className:"h-4 w-4 text-green-500"}):t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),t.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:(null==e?void 0:e.is_nominee)?t.jsxs(t.Fragment,{children:[t.jsx(qe,{className:"h-4 w-4 text-green-500"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",null==e?void 0:e.nominee_percentage,"%)"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),t.jsx("div",{className:"border-t pt-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx(ve,{className:"h-3 w-3"}),t.jsxs("span",{children:["Added on"," ",Re(null==e?void 0:e.created_at).format("DD-MM-YYYY")]})]})})]})]},null==e?void 0:e.id);var s}),0===(null==(m=null==(d=null==b?void 0:b.data)?void 0:d.data)?void 0:m.length)&&t.jsx(Be,{className:"py-12 text-center",children:t.jsxs(Te,{children:[t.jsx(fe,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),t.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),t.jsx(o,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}function ia({id:e,getDataById:s}){return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Increment History"}),t.jsx(Xs,{id:e,getDataById:s})]}),t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Promotion History"}),t.jsx(sa,{id:e,getDataById:s})]}),t.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Transfer History"}),t.jsx(la,{id:e,getDataById:s})]})]})}function na(){return t.jsx("div",{children:"JoiningInformation"})}const ra=W({emp_id:K().optional(),pay_commission_id:K().required("Pay Commission is required"),pay_commission_name:K().optional(),is_matrix_based:Z().optional(),pay_level_id:K().required("Pay Level is required"),cell_index:K().when("is_matrix_based",{is:!0,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:K().when("is_matrix_based",{is:!1,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),city_classification:K().required("City Classification is required"),hra_percentage:K().nullable().optional(),transport_allowance:K().default("0"),medical_allowance:K().default("0"),special_allowance:K().default("0"),pension_scheme:K().required("Pension Scheme is required"),nps_contribution_rate:K().nullable().optional(),gpf_contribution_rate:K().nullable().optional(),pf_employee_contribution_rate:K().nullable().optional(),bank_name:K().required("Bank Name is required"),bank_account_no:K().required("Bank Account Number is required"),bank_ifsc:K().required("IFSC Code is required"),tax_regime:K().oneOf(["old","new"],"Tax Regime must be either old or new").required("Tax Regime is required"),effective_from:K().required("Effective Date is required")});function da({empId:e,onEstimateComplete:a}){var i,n,r,d,m,x,v,f,N,y,_,w,S,C,F,q,M,R,B,T,$,V,H,z,W,J,Q,K,X,Z,ee,ae,te,ie,ne,de,oe,ce,me,xe,ue,he,pe,be,ge,ve,fe,ye,_e,we,Se,ke,Ce,Pe,De,Ie,Ee,Fe,qe,Me,Re,Oe,Ye,Ge,ze,We,Je,Qe,as,ts,ls,is,ns,rs,hs,ps,vs,fs,Ns,ys,_s,ws,Ss,ks,Cs,Ps,Ds,As,Is,Es,Fs,qs,Ms,Rs,Bs,Ts,$s,Vs,Ls,Os,Ys,Hs,Us,Gs,zs,Ws,Js,Qs,Ks,Xs,Zs,ea,sa,aa,ta,la,ia,na,da,oa,ca,ma,xa,ua,ha,pa,ba,ga,ja,va;const[fa,Na]=s.useState(!1),[ya,_a]=s.useState(null),[wa,Sa]=s.useState(null),[ka,Ca]=s.useState(null),[Pa,Da]=s.useState(!1),[Aa,Ia]=s.useState(1),Ea=U({resolver:G(ra),defaultValues:{emp_id:u(String(e)),grade_pay:"0",transport_allowance:"3600",medical_allowance:"500",special_allowance:"0",tax_regime:"new",pension_scheme:"NPS",nps_contribution_rate:"10"}}),{watch:Fa}=Ea,{data:qa}=L(),{data:Ma}=O(c(Fa("pay_commission_id"))),{data:Ra}=Y(c(Fa("pay_level_id"))),Ba=Fa("pension_scheme"),Ta=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);s.useEffect(()=>{var e;if(Fa("pay_commission_id")){const s=null==(e=null==qa?void 0:qa.data)?void 0:e.find(e=>e.id===Number(Fa("pay_commission_id")));s&&Ea.setValue("is_matrix_based",s.is_matrix_based)}},[Fa("pay_commission_id")]),s.useEffect(()=>{var e;if(Fa("pay_level_id")){const s=null==(e=null==Ma?void 0:Ma.data)?void 0:e.find(e=>e.id===Number(Fa("pay_level_id")));s&&Ea.setValue("grade_pay",String(s.grade_pay))}},[Fa("pay_level_id")]);const $a=({content:e})=>t.jsx(p,{children:t.jsxs(b,{children:[t.jsx(g,{asChild:!0,children:t.jsx(os,{className:"ml-1 inline h-3.5 w-3.5 cursor-help text-slate-400 hover:text-slate-600"})}),t.jsx(j,{className:"max-w-xs",children:t.jsx("p",{className:"text-sm",children:e})})]})});return t.jsxs("div",{className:"mx-auto max-w-7xl space-y-6 p-6",children:[t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-600",children:t.jsx(ds,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Salary Configuration"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Configure employee salary structure and calculate compensation"})]})]})}),t.jsxs(Ze,{className:"border-l-4 border-l-blue-600 bg-slate-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-blue-600"}),t.jsx(es,{className:"text-sm font-semibold text-slate-900",children:"Getting Started"}),t.jsxs(ss,{className:"text-sm text-slate-600",children:["Fill in the form below to configure salary. Hover over"," ",t.jsx(os,{className:"inline h-3.5 w-3.5"})," icons for help."]})]}),t.jsx(Be,{className:"border-slate-200 shadow-sm",children:t.jsx(Te,{className:"p-6",children:t.jsxs(se,{methods:Ea,onSubmit:Ea.handleSubmit(async e=>{var s,t;Na(!0);try{const s=await h.post(l.estimateSalary,{emp_id:Number(e.emp_id),pay_commission_id:Number(e.pay_commission_id),pay_level_id:Number(e.pay_level_id),...e.is_matrix_based&&{cell_index:Number(e.cell_index)},...!e.is_matrix_based&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,hra_percentage:Number(e.hra_percentage)||null,transport_allowance:Number(e.transport_allowance),medical_allowance:Number(e.medical_allowance),special_allowance:Number(e.special_allowance),pension_scheme:e.pension_scheme,..."NPS"===e.pension_scheme&&{nps_contribution_rate:Number(e.nps_contribution_rate),pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},..."OPS"===e.pension_scheme&&{gpf_contribution_rate:Number(e.gpf_contribution_rate)},..."EPF_ONLY"===e.pension_scheme&&{pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime,effective_from:e.effective_from});s.data.success&&(_a(s.data),null==a||a(s.data,e))}catch(i){alert((null==(t=null==(s=null==i?void 0:i.response)?void 0:s.data)?void 0:t.message)||"Failed to estimate salary")}finally{Na(!1)}}),children:[t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[t.jsx(Xe,{className:"h-5 w-5 text-blue-600"}),t.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Pay Structure"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pay Commission ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"The pay commission determines the salary structure and rules applicable to the employee"})]}),t.jsx(re,{selectedText:"pay_commission_name",name:"pay_commission_id",label:"",data:(null==(i=null==qa?void 0:qa.data)?void 0:i.map(e=>({label:String(e.commission_name),value:String(e.id)})))||[]})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pay Level ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Pay level defines the grade and salary range. Select pay commission first."})]}),t.jsx(re,{name:"pay_level_id",label:"",data:(null==(n=null==Ma?void 0:Ma.data)?void 0:n.map(e=>({label:`${e.level_name} (â‚¹${e.min_basic_pay} - â‚¹${e.max_basic_pay})`,value:String(e.id)})))||[],disabled:!Ea.watch("pay_commission_id")})]}),Ea.watch("is_matrix_based")&&t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Cell Index ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Cell index determines the exact basic pay within the pay level. Select pay level first."})]}),t.jsx(re,{name:"cell_index",label:"",data:(null==(r=null==Ra?void 0:Ra.data)?void 0:r.map(e=>({label:`Index ${e.cell_index} - â‚¹${e.basic_pay}`,value:String(e.cell_index)})))||[],disabled:!Ea.watch("pay_level_id")})]}),!Ea.watch("is_matrix_based")&&t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Grade Pay",t.jsx($a,{content:"Additional grade pay amount, if applicable (usually for 6th Pay Commission)"})]}),t.jsx(le,{name:"grade_pay",label:"",type:"number",placeholder:"0"})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[t.jsx(cs,{className:"h-5 w-5 text-emerald-600"}),t.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Allowances"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["City Classification"," ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"HRA is calculated based on city classification: Metro (24%), Other Cities (16%), Rural (8%)"})]}),t.jsx(re,{name:"city_classification",label:"",data:[{label:"X - Metro (24% HRA)",value:"X"},{label:"Y - Other Cities (16% HRA)",value:"Y"},{label:"Z - Rural (8% HRA)",value:"Z"}]})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Custom HRA %",t.jsx($a,{content:"Override the default HRA percentage if you have a special case (optional)"})]}),t.jsx(le,{name:"hra_percentage",label:"",type:"number",placeholder:"Auto-calculated"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Transport Allowance",t.jsx($a,{content:"Monthly transport allowance amount. Standard is â‚¹3,600"})]}),t.jsx(le,{name:"transport_allowance",label:"",type:"number",placeholder:"3600"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Medical Allowance",t.jsx($a,{content:"Monthly medical allowance amount. Standard is â‚¹500"})]}),t.jsx(le,{name:"medical_allowance",label:"",type:"number",placeholder:"500"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Special Allowance",t.jsx($a,{content:"Any additional special allowance if applicable"})]}),t.jsx(le,{name:"special_allowance",label:"",type:"number",placeholder:"0"})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[t.jsx(ms,{className:"h-5 w-5 text-amber-600"}),t.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Retirement & Tax"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Pension Scheme ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Choose the retirement savings scheme: NPS (National Pension System), GPF (General Provident Fund), or PF (Provident Fund)"})]}),t.jsx(re,{name:"pension_scheme",label:"",data:[{label:"NPS - National Pension System",value:"NPS"},{label:"GPF - General Provident Fund",value:"OPS"},{label:"EPF Only",value:"EPF_ONLY"}]})]}),"NPS"===Ba&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["NPS Contribution Rate (%)",t.jsx($a,{content:"Percentage of basic pay + DA contributed to NPS. Standard is 10%"})]}),t.jsx(le,{name:"nps_contribution_rate",label:"",type:"number",placeholder:"10"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["PF Employee Contribution Rate (%)",t.jsx($a,{content:"Percentage of basic pay + DA contributed to PF (typically 12%)"})]}),t.jsx(le,{name:"pf_employee_contribution_rate",label:"",type:"number",placeholder:"12"})]})]}),"EPF_ONLY"===Ba&&t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["PF Employee Contribution Rate (%)",t.jsx($a,{content:"Percentage of basic pay + DA contributed to PF (typically 12%)"})]}),t.jsx(le,{name:"pf_employee_contribution_rate",label:"",type:"number",placeholder:"12"})]}),"OPS"===Ba&&t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["GPF Contribution Rate (%)",t.jsx($a,{content:"Percentage of basic pay contributed to GPF (typically between 6-100%)"})]}),t.jsx(le,{name:"gpf_contribution_rate",label:"",type:"number",placeholder:"Enter rate"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Tax Regime ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Choose between New Tax Regime (lower rates, fewer deductions) or Old Tax Regime (higher rates, more deductions)"})]}),t.jsx(re,{name:"tax_regime",label:"",data:[{label:"New Tax Regime",value:"new"},{label:"Old Tax Regime",value:"old"}]})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[t.jsx(je,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Bank Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Bank Name ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Name of the bank where the employee holds their salary account"})]}),t.jsx(le,{name:"bank_name",label:"",placeholder:"e.g., State Bank of India"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Account Number ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"Employee bank account number for salary credit"})]}),t.jsx(le,{name:"bank_account_no",label:"",placeholder:"Account number"})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["IFSC Code ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"11-character IFSC code of the bank branch (e.g., SBIN0001234)"})]}),t.jsx(le,{name:"bank_ifsc",label:"",placeholder:"e.g., SBIN0001234"})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[t.jsx(Ke,{className:"h-5 w-5 text-indigo-600"}),t.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Effective Date"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700",children:["Effective From ",t.jsx("span",{className:"text-red-500",children:"*"}),t.jsx($a,{content:"The date from which this salary configuration will be applicable"})]}),t.jsx(le,{name:"effective_from",label:"",type:"date"})]})})]})]}),t.jsx(He,{className:"my-8"}),t.jsx("div",{className:"flex justify-end",children:t.jsx(o,{type:"submit",disabled:fa,size:"lg",className:"min-w-[200px] bg-blue-600 hover:bg-blue-700",children:fa?t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ds,{className:"mr-2 h-4 w-4"}),"Calculate Salary"]})})})]})})}),ya&&t.jsxs(Be,{className:"border-slate-200 shadow-sm",children:[t.jsx($e,{className:"border-b border-slate-100 bg-slate-50 pb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100",children:t.jsx(gs,{className:"h-5 w-5 text-emerald-700"})}),t.jsxs("div",{children:[t.jsx(Ve,{className:"text-lg font-semibold text-slate-900",children:"Salary Calculated"}),t.jsx(Le,{className:"text-sm",children:"Review the breakdown and confirm"})]})]}),t.jsxs(o,{onClick:()=>Da(!0),variant:"outline",size:"sm",className:"text-sm",children:[t.jsx(Ue,{className:"mr-2 h-4 w-4"}),"View Details"]})]})}),t.jsxs(Te,{className:"p-6",children:[t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Monthly Net"}),t.jsx("p",{className:"mt-1 text-xl font-bold text-emerald-700",children:Ta((null==(m=null==(d=ya.data)?void 0:d.monthly)?void 0:m.net_salary)||0)})]}),t.jsx(xs,{className:"h-8 w-8 text-emerald-200"})]})}),t.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Annual Net"}),t.jsx("p",{className:"mt-1 text-xl font-bold text-blue-700",children:Ta((null==(v=null==(x=ya.data)?void 0:x.annual)?void 0:v.net_salary)||0)})]}),t.jsx(js,{className:"h-8 w-8 text-blue-200"})]})}),t.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Monthly CTC"}),t.jsx("p",{className:"mt-1 text-xl font-bold text-purple-700",children:Ta((null==(N=null==(f=ya.data)?void 0:f.monthly)?void 0:N.ctc)||0)})]}),t.jsx(Ae,{className:"h-8 w-8 text-purple-200"})]})}),t.jsx("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Annual CTC"}),t.jsx("p",{className:"mt-1 text-xl font-bold text-amber-700",children:Ta((null==(_=null==(y=ya.data)?void 0:y.annual)?void 0:_.ctc)||0)})]}),t.jsx(Xe,{className:"h-8 w-8 text-amber-200"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Monthly Breakdown"}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(C=null==(S=null==(w=ya.data)?void 0:w.monthly)?void 0:S.earnings)?void 0:C.basic_pay)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(M=null==(q=null==(F=ya.data)?void 0:F.monthly)?void 0:q.earnings)?void 0:M.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"HRA"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(T=null==(B=null==(R=ya.data)?void 0:R.monthly)?void 0:B.earnings)?void 0:T.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Transport"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(H=null==(V=null==($=ya.data)?void 0:$.monthly)?void 0:V.earnings)?void 0:H.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Medical"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(J=null==(W=null==(z=ya.data)?void 0:z.monthly)?void 0:W.earnings)?void 0:J.medical_allowance)||0)})]}),(null==(X=null==(K=null==(Q=ya.data)?void 0:Q.monthly)?void 0:K.earnings)?void 0:X.special_allowance)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Special"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(ae=null==(ee=null==(Z=ya.data)?void 0:Z.monthly)?void 0:ee.earnings)?void 0:ae.special_allowance)})]}),t.jsx(He,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),t.jsx("span",{className:"font-bold text-emerald-700",children:Ta((null==(ne=null==(ie=null==(te=ya.data)?void 0:te.monthly)?void 0:ie.earnings)?void 0:ne.gross_salary)||0)})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(ce=null==(oe=null==(de=ya.data)?void 0:de.monthly)?void 0:oe.deductions)?void 0:ce.pf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"PF"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(ue=null==(xe=null==(me=ya.data)?void 0:me.monthly)?void 0:xe.deductions)?void 0:ue.pf_contribution)})]}),(null==(be=null==(pe=null==(he=ya.data)?void 0:he.monthly)?void 0:pe.deductions)?void 0:be.nps_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(fe=null==(ve=null==(ge=ya.data)?void 0:ge.monthly)?void 0:ve.deductions)?void 0:fe.nps_contribution)})]}),(null==(we=null==(_e=null==(ye=ya.data)?void 0:ye.monthly)?void 0:_e.deductions)?void 0:we.gpf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"GPF"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(Ce=null==(ke=null==(Se=ya.data)?void 0:Se.monthly)?void 0:ke.deductions)?void 0:Ce.gpf_contribution)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(Ie=null==(De=null==(Pe=ya.data)?void 0:Pe.monthly)?void 0:De.deductions)?void 0:Ie.professional_tax)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Income Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(qe=null==(Fe=null==(Ee=ya.data)?void 0:Ee.monthly)?void 0:Fe.deductions)?void 0:qe.income_tax)||0)})]}),t.jsx(He,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),t.jsx("span",{className:"font-bold text-red-700",children:Ta((null==(Oe=null==(Re=null==(Me=ya.data)?void 0:Me.monthly)?void 0:Re.deductions)?void 0:Oe.total_deductions)||0)})]})]})]}),t.jsx("div",{className:"rounded-lg bg-emerald-600 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Net Monthly Salary"}),t.jsx("span",{className:"text-xl font-bold",children:Ta((null==(Ge=null==(Ye=ya.data)?void 0:Ye.monthly)?void 0:Ge.net_salary)||0)})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Annual Breakdown"}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Earnings"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Basic Pay"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(Je=null==(We=null==(ze=ya.data)?void 0:ze.annual)?void 0:We.earnings)?void 0:Je.basic_pay)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"DA"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(ts=null==(as=null==(Qe=ya.data)?void 0:Qe.annual)?void 0:as.earnings)?void 0:ts.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"HRA"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(ns=null==(is=null==(ls=ya.data)?void 0:ls.annual)?void 0:is.earnings)?void 0:ns.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Transport"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(ps=null==(hs=null==(rs=ya.data)?void 0:rs.annual)?void 0:hs.earnings)?void 0:ps.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Medical"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(Ns=null==(fs=null==(vs=ya.data)?void 0:vs.annual)?void 0:fs.earnings)?void 0:Ns.medical_allowance)||0)})]}),(null==(ws=null==(_s=null==(ys=ya.data)?void 0:ys.annual)?void 0:_s.earnings)?void 0:ws.special_allowance)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Special"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(Cs=null==(ks=null==(Ss=ya.data)?void 0:Ss.annual)?void 0:ks.earnings)?void 0:Cs.special_allowance)})]}),t.jsx(He,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Gross Salary"}),t.jsx("span",{className:"font-bold text-emerald-700",children:Ta((null==(As=null==(Ds=null==(Ps=ya.data)?void 0:Ps.annual)?void 0:Ds.earnings)?void 0:As.gross_salary)||0)})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h4",{className:"mb-3 text-xs font-semibold uppercase tracking-wide text-red-700",children:"Deductions"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[(null==(Fs=null==(Es=null==(Is=ya.data)?void 0:Is.annual)?void 0:Es.deductions)?void 0:Fs.pf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"PF"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(Rs=null==(Ms=null==(qs=ya.data)?void 0:qs.annual)?void 0:Ms.deductions)?void 0:Rs.pf_contribution)})]}),(null==($s=null==(Ts=null==(Bs=ya.data)?void 0:Bs.annual)?void 0:Ts.deductions)?void 0:$s.nps_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"NPS"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(Os=null==(Ls=null==(Vs=ya.data)?void 0:Vs.annual)?void 0:Ls.deductions)?void 0:Os.nps_contribution)})]}),(null==(Us=null==(Hs=null==(Ys=ya.data)?void 0:Ys.annual)?void 0:Hs.deductions)?void 0:Us.gpf_contribution)>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"GPF"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta(null==(Ws=null==(zs=null==(Gs=ya.data)?void 0:Gs.annual)?void 0:zs.deductions)?void 0:Ws.gpf_contribution)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Professional Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(Ks=null==(Qs=null==(Js=ya.data)?void 0:Js.annual)?void 0:Qs.deductions)?void 0:Ks.professional_tax)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-600",children:"Income Tax"}),t.jsx("span",{className:"font-medium text-slate-900",children:Ta((null==(ea=null==(Zs=null==(Xs=ya.data)?void 0:Xs.annual)?void 0:Zs.deductions)?void 0:ea.income_tax)||0)})]}),t.jsx(He,{className:"my-2"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold text-slate-900",children:"Total Deductions"}),t.jsx("span",{className:"font-bold text-red-700",children:Ta((null==(ta=null==(aa=null==(sa=ya.data)?void 0:sa.annual)?void 0:aa.deductions)?void 0:ta.total_deductions)||0)})]})]})]}),t.jsx("div",{className:"rounded-lg bg-blue-600 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-semibold",children:"Net Annual Salary"}),t.jsx("span",{className:"text-xl font-bold",children:Ta((null==(ia=null==(la=ya.data)?void 0:la.annual)?void 0:ia.net_salary)||0)})]})})]})]}),(null==(na=ya.data)?void 0:na.tax_info)&&t.jsxs("div",{className:"mt-6 rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx("h3",{className:"mb-3 text-sm font-semibold text-slate-900",children:"Tax Information"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-600",children:"Tax Regime"}),t.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:"new"===ya.data.tax_info.regime?"New":"Old"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-600",children:"Taxable Income"}),t.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:Ta(ya.data.tax_info.annual_taxable_income)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-600",children:"Standard Deduction"}),t.jsx("p",{className:"mt-1 font-semibold text-slate-900",children:Ta(ya.data.tax_info.standard_deduction)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-600",children:"Annual Tax"}),t.jsx("p",{className:"mt-1 font-semibold text-red-700",children:Ta(ya.data.tax_info.annual_tax)})]})]})]})]})]}),t.jsx(k,{open:Pa,onOpenChange:Da,children:t.jsxs(P,{className:"max-h-[90vh] max-w-4xl overflow-y-auto",children:[t.jsxs(D,{children:[t.jsxs(A,{className:"flex items-center gap-2 text-xl",children:[t.jsx(Ae,{className:"h-5 w-5 text-blue-600"}),"Complete Configuration Details"]}),t.jsx(I,{children:"Review all configuration parameters and calculated values"})]}),t.jsxs("div",{className:"space-y-6 py-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(Xe,{className:"h-4 w-4 text-blue-600"}),"Pay Structure"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pay Commission"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==(oa=null==(da=null==qa?void 0:qa.data)?void 0:da.find(e=>String(e.id)===Ea.watch("pay_commission_id")))?void 0:oa.commission_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pay Level"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:(null==(ma=null==(ca=null==Ma?void 0:Ma.data)?void 0:ca.find(e=>String(e.id)===Ea.watch("pay_level_id")))?void 0:ma.level_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Cell Index"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ea.watch("cell_index")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Grade Pay"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["â‚¹",Ea.watch("grade_pay")]})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(cs,{className:"h-4 w-4 text-emerald-600"}),"Allowances"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"City Classification"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[Ea.watch("city_classification")," -","X"===Ea.watch("city_classification")&&" Metro (24% HRA)","Y"===Ea.watch("city_classification")&&" Other Cities (16% HRA)","Z"===Ea.watch("city_classification")&&" Rural (8% HRA)"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"HRA Percentage"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ea.watch("hra_percentage")||"Auto-calculated"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Transport Allowance"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["â‚¹",Ea.watch("transport_allowance")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Medical Allowance"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["â‚¹",Ea.watch("medical_allowance")]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Special Allowance"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["â‚¹",Ea.watch("special_allowance")||"0"]})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(ms,{className:"h-4 w-4 text-amber-600"}),"Retirement & Tax"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Pension Scheme"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[Ea.watch("pension_scheme")," -","NPS"===Ea.watch("pension_scheme")&&" National Pension System","GPF"===Ea.watch("pension_scheme")&&" General Provident Fund"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Contribution Rate"}),t.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[Ea.watch("nps_contribution_rate")||Ea.watch("gpf_contribution_rate")||"N/A","%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Tax Regime"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:"new"===Ea.watch("tax_regime")?"New Tax Regime":"Old Tax Regime"})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(je,{className:"h-4 w-4 text-purple-600"}),"Bank Details"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 rounded-lg border border-slate-200 bg-slate-50 p-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Bank Name"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ea.watch("bank_name")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Account Number"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ea.watch("bank_account_no")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"IFSC Code"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:Ea.watch("bank_ifsc")})]})]})]}),t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(Ke,{className:"h-4 w-4 text-indigo-600"}),"Effective Date"]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Effective From"}),t.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:new Date(Ea.watch("effective_from")).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]})]}),ya&&t.jsxs(t.Fragment,{children:[t.jsx(He,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(us,{className:"h-4 w-4 text-emerald-600"}),"Salary Summary"]}),t.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[t.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Monthly Net Salary"}),t.jsx("p",{className:"text-sm font-bold text-emerald-700",children:Ta((null==(ua=null==(xa=ya.data)?void 0:xa.monthly)?void 0:ua.net_salary)||0)})]}),t.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[t.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Annual Net Salary"}),t.jsx("p",{className:"text-sm font-bold text-emerald-700",children:Ta((null==(pa=null==(ha=ya.data)?void 0:ha.annual)?void 0:pa.net_salary)||0)})]}),t.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[t.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Monthly CTC"}),t.jsx("p",{className:"text-sm font-bold text-blue-700",children:Ta((null==(ga=null==(ba=ya.data)?void 0:ba.monthly)?void 0:ga.ctc)||0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Annual CTC"}),t.jsx("p",{className:"text-sm font-bold text-blue-700",children:Ta((null==(va=null==(ja=ya.data)?void 0:ja.annual)?void 0:va.ctc)||0)})]})]})]})]})]}),t.jsx(E,{children:t.jsx(o,{variant:"outline",onClick:()=>Da(!1),children:"Close"})})]})})]})}function oa({estimatedData:e,formData:a,onSetComplete:i}){var n,r,d,c,m,x,u,p,b,g,j,v,f,N,y,_;const[w,S]=s.useState(!1),[k,C]=s.useState(!1),P=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return e?t.jsxs(Be,{className:"border-t-4 border-t-green-500 shadow-lg",children:[t.jsxs($e,{className:"bg-gradient-to-r from-green-50 to-white",children:[t.jsx(Ve,{className:"flex items-center gap-2 text-xl",children:k?t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"h-6 w-6 text-green-600"}),"Salary Configuration Set Successfully"]}):t.jsxs(t.Fragment,{children:[t.jsx(hs,{className:"h-6 w-6 text-blue-600"}),"Confirm Salary Configuration"]})}),t.jsx(Le,{className:"mt-2 text-base",children:k?"The salary configuration has been successfully saved to the system.":"Please review the estimated salary carefully before confirming the configuration."})]}),t.jsx(Te,{className:"space-y-6 pt-6",children:k?t.jsxs(Ze,{className:"border-green-200 bg-green-50",children:[t.jsx(gs,{className:"h-4 w-4 text-green-600"}),t.jsxs(ss,{className:"text-green-800",children:[t.jsx("strong",{children:"Success!"})," The salary configuration has been set successfully. You can now view the complete salary details or make updates if needed."]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ze,{className:"border-yellow-300 bg-yellow-50 p-4",children:t.jsxs(ss,{className:"text-yellow-900",children:[t.jsx("strong",{className:"text-lg",children:"âš ï¸ Important Notice:"}),t.jsx("p",{className:"mt-2",children:"Once you confirm and set the salary, it will be saved to the system and will be used for payroll processing. Please review all details carefully before confirming."})]})}),t.jsxs("div",{className:"space-y-4 rounded-lg border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:[t.jsxs("h3",{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[t.jsx(us,{className:"h-5 w-5"}),"Salary Summary"]}),t.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Monthly Net Salary"}),t.jsx("span",{className:"text-2xl font-bold text-green-600",children:P((null==(r=null==(n=e.data)?void 0:n.monthly)?void 0:r.net_salary)||0)})]}),t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Annual Net Salary"}),t.jsx("span",{className:"text-2xl font-bold text-green-600",children:P((null==(c=null==(d=e.data)?void 0:d.annual)?void 0:c.net_salary)||0)})]}),t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Monthly CTC"}),t.jsx("span",{className:"text-2xl font-bold text-blue-600",children:P((null==(x=null==(m=e.data)?void 0:m.monthly)?void 0:x.ctc)||0)})]}),t.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[t.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Annual CTC"}),t.jsx("span",{className:"text-2xl font-bold text-blue-600",children:P((null==(p=null==(u=e.data)?void 0:u.annual)?void 0:p.ctc)||0)})]})]})]}),t.jsxs("div",{className:"space-y-3 rounded-lg border-2 border-gray-200 bg-white p-6 shadow-sm",children:[t.jsx("h3",{className:"border-b pb-2 text-lg font-bold text-gray-800",children:"Configuration Details"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Pay Commission:"}),t.jsx("p",{className:"font-medium",children:(null==(j=null==(g=null==(b=e.data)?void 0:b.pay_config)?void 0:g.pay_commission)?void 0:j.commission_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Pay Level:"}),t.jsx("p",{className:"font-medium",children:(null==(N=null==(f=null==(v=e.data)?void 0:v.pay_config)?void 0:f.pay_level)?void 0:N.level_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Basic Pay:"}),t.jsx("p",{className:"font-medium",children:P((null==(_=null==(y=e.data)?void 0:y.pay_config)?void 0:_.current_basic_pay)||0)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"City Classification:"}),t.jsx("p",{className:"font-medium",children:t.jsx(rs,{variant:"outline",children:a.city_classification})})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Pension Scheme:"}),t.jsx("p",{className:"font-medium",children:t.jsx(rs,{children:a.pension_scheme})})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Tax Regime:"}),t.jsx("p",{className:"font-medium",children:t.jsx(rs,{variant:"secondary",children:"new"===a.tax_regime?"New Regime":"Old Regime"})})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Bank Name:"}),t.jsx("p",{className:"font-medium",children:a.bank_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Account Number:"}),t.jsx("p",{className:"font-medium",children:a.bank_account_no})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"IFSC Code:"}),t.jsx("p",{className:"font-medium",children:a.bank_ifsc})]})]})]}),t.jsx("div",{className:"flex justify-end gap-3",children:t.jsx(o,{onClick:async()=>{var e,s;S(!0);try{const e=await h.post(l.setEmployeeSalary,{emp_id:Number(a.emp_id),pay_commission_id:Number(a.pay_commission_id),pay_level_id:Number(a.pay_level_id),...a.is_matrix_based&&{cell_index:Number(a.cell_index)},...!a.is_matrix_based&&{grade_pay:Number(a.grade_pay)},city_classification:a.city_classification,hra_percentage:Number(a.hra_percentage)||null,transport_allowance:Number(a.transport_allowance),medical_allowance:Number(a.medical_allowance),special_allowance:Number(a.special_allowance),pension_scheme:a.pension_scheme,..."NPS"===a.pension_scheme&&{nps_contribution_rate:Number(a.nps_contribution_rate),pf_employee_contribution_rate:Number(a.pf_employee_contribution_rate)},..."OPS"===a.pension_scheme&&{gpf_contribution_rate:Number(a.gpf_contribution_rate)},..."EPF_ONLY"===a.pension_scheme&&{pf_employee_contribution_rate:Number(a.pf_employee_contribution_rate)},bank_name:a.bank_name,bank_account_no:a.bank_account_no,bank_ifsc:a.bank_ifsc,tax_regime:a.tax_regime,effective_from:a.effective_from});e.data.success&&(C(!0),null==i||i(e.data))}catch(t){alert((null==(s=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:s.message)||"Failed to set employee salary")}finally{S(!1)}},disabled:w,size:"lg",className:"min-w-[200px]",children:w?t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting Salary..."]}):t.jsxs(t.Fragment,{children:[t.jsx(hs,{className:"mr-2 h-4 w-4"}),"Confirm & Set Salary"]})})})]})})]}):t.jsx(Be,{children:t.jsx(Te,{className:"pt-6",children:t.jsx(Ze,{children:t.jsx(ss,{children:"Please estimate the salary first before setting it."})})})})}const ca=W({id:K().required(),is_matrix_based:Z().optional(),cell_index:K().when("is_matrix_based",{is:!0,then:e=>e.required("Cell Index is required"),otherwise:e=>e.optional()}),grade_pay:K().when("is_matrix_based",{is:!1,then:e=>e.required("Grade Pay is required"),otherwise:e=>e.default("0")}),city_classification:K().optional(),hra_percentage:K().nullable().optional(),transport_allowance:K().optional(),medical_allowance:K().optional(),special_allowance:K().optional(),pension_scheme:K().optional(),nps_contribution_rate:K().nullable().optional(),gpf_contribution_rate:K().nullable().optional(),pf_employee_contribution_rate:K().nullable().optional(),bank_name:K().optional(),bank_account_no:K().optional(),bank_ifsc:K().optional(),tax_regime:K().oneOf(["old","new"]).optional()});function ma({empId:e}){var a,i,n,r,d,m,x,u,p,b,g,j,v,f,N,y,_,w,S,k,C,P,D,A,I,E,F,q,M,R,B,T,$,V,L,O,H,z,W,J,Q,K,X,Z,ee,ae,te,ie,ne,de,oe,me,xe,ue,he,pe,be,ge,je,ve,fe,Ne,ye,_e,we,Se,ke,Ce,Pe,De,Ae,Ie,Ee,Fe,qe,Me,Re,Oe,Ye,Ge,ze,We,Je,Qe,Ke,Xe,es,ns,ds,os,cs,ms,xs,hs,gs,fs,Ns,ys,_s,ws,Ss,ks,Cs,Ps,Ds,As,Is,Es,Fs,qs,Ms,Rs,Bs,Ts,$s,Vs,Ls,Os,Ys,Hs,Us,Gs,zs,Ws,Js,Qs,Ks,Xs,Zs,ea,sa,aa,ta,la,ia,na,ra,da,oa,ma,xa,ua,ha,pa,ba,ga,ja,va,fa,Na,ya,_a,wa,Sa,ka,Ca,Pa,Da,Aa,Ia,Ea,Fa,qa,Ma,Ra,Ba,Ta,$a,Va;const[La,Oa]=s.useState(!1),[Ya,Ha]=s.useState(!1),{data:Ua,isLoading:Ga}=ce({api:`${l.getEmployeeSalary}?emp_id=${e}`,key:`getEmployeeSalary-${e}`,value:[e],options:{enabled:!!e}}),za=c(String((null==(i=null==(a=null==Ua?void 0:Ua.data)?void 0:a.pay_config)?void 0:i.pay_level.id)||"")),{data:Wa}=Y(za),Ja=U({resolver:G(ca)}),{reset:Qa,watch:Ka}=Ja,Xa=Ka("pension_scheme");s.useEffect(()=>{var e;(null==(e=null==Ua?void 0:Ua.data)?void 0:e.pay_config)&&Qa({id:Ua.data.pay_config.id.toString(),cell_index:String(Ua.data.pay_config.cell_index),is_matrix_based:Ua.data.pay_config.pay_commission.is_matrix_based,grade_pay:String(Ua.data.pay_config.grade_pay),city_classification:Ua.data.pay_config.city_classification,hra_percentage:String(Ua.data.pay_config.hra_percentage),transport_allowance:String(Ua.data.pay_config.transport_allowance),medical_allowance:String(Ua.data.pay_config.medical_allowance),special_allowance:String(Ua.data.pay_config.special_allowance||0),pension_scheme:Ua.data.pay_config.pension_scheme,...Ua.data.pay_config.nps_contribution_rate&&{nps_contribution_rate:String(Ua.data.pay_config.nps_contribution_rate)},...Ua.data.pay_config.pf_employee_contribution_rate&&{pf_employee_contribution_rate:String(Ua.data.pay_config.pf_employee_contribution_rate)},...Ua.data.pay_config.gpf_contribution_rate&&{gpf_contribution_rate:String(Ua.data.pay_config.gpf_contribution_rate)},bank_name:Ua.data.pay_config.bank_name,bank_account_no:Ua.data.pay_config.bank_account_no,bank_ifsc:Ua.data.pay_config.bank_ifsc,tax_regime:Ua.data.pay_config.tax_regime})},[Ua,Qa]);const Za=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return Ga?t.jsx("div",{className:"flex min-h-[500px] items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(bs,{className:"h-12 w-12 animate-spin text-blue-600"}),t.jsx("div",{className:"absolute inset-0 h-12 w-12 animate-ping rounded-full bg-blue-400 opacity-20"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-base font-medium text-slate-700",children:"Loading salary data..."}),t.jsx("p",{className:"text-sm text-slate-500",children:"Please wait a moment"})]})]})}):Ua?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:t.jsx("div",{className:"space-y-6",children:t.jsxs(as,{defaultValue:"overview",className:"w-full",children:[t.jsxs(ts,{className:"inline-flex h-auto w-full items-center justify-start gap-2 rounded-xl border border-white/20 bg-white/80 p-2 shadow-lg backdrop-blur-xl",children:[t.jsx(ls,{value:"overview",className:"flex-1 rounded-lg border border-transparent px-6 py-3.5 font-semibold text-slate-600 transition-all duration-200 data-[state=active]:border-blue-200 data-[state=active]:bg-gradient-to-br data-[state=active]:from-blue-600 data-[state=active]:to-indigo-600 data-[state=active]:text-white data-[state=active]:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ue,{className:"h-4 w-4"}),t.jsx("span",{children:"Overview"})]})}),t.jsx(ls,{value:"monthly",className:"flex-1 rounded-lg border border-transparent px-6 py-3.5 font-semibold text-slate-600 transition-all duration-200 data-[state=active]:border-blue-200 data-[state=active]:bg-gradient-to-br data-[state=active]:from-blue-600 data-[state=active]:to-indigo-600 data-[state=active]:text-white data-[state=active]:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(js,{className:"h-4 w-4"}),t.jsx("span",{children:"Monthly"})]})}),t.jsx(ls,{value:"annual",className:"flex-1 rounded-lg border border-transparent px-6 py-3.5 font-semibold text-slate-600 transition-all duration-200 data-[state=active]:border-blue-200 data-[state=active]:bg-gradient-to-br data-[state=active]:from-blue-600 data-[state=active]:to-indigo-600 data-[state=active]:text-white data-[state=active]:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(us,{className:"h-4 w-4"}),t.jsx("span",{children:"Annual"})]})}),t.jsx(ls,{value:"config",className:"flex-1 rounded-lg border border-transparent px-6 py-3.5 font-semibold text-slate-600 transition-all duration-200 data-[state=active]:border-blue-200 data-[state=active]:bg-gradient-to-br data-[state=active]:from-blue-600 data-[state=active]:to-indigo-600 data-[state=active]:text-white data-[state=active]:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vs,{className:"h-4 w-4"}),t.jsx("span",{children:"Settings"})]})})]}),t.jsxs(is,{value:"overview",className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(Be,{className:"group overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-3 backdrop-blur-sm",children:t.jsx(us,{className:"h-6 w-6 text-white"})}),t.jsx("div",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white backdrop-blur-sm",children:"Monthly"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-emerald-100",children:"Net Salary"}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-white",children:Za((null==(r=null==(n=Ua.data)?void 0:n.monthly)?void 0:r.net_salary)||0)})]})]})})}),t.jsx(Be,{className:"group overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-blue-500 to-cyan-600 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-3 backdrop-blur-sm",children:t.jsx(js,{className:"h-6 w-6 text-white"})}),t.jsx("div",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white backdrop-blur-sm",children:"Monthly"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-blue-100",children:"CTC"}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-white",children:Za((null==(m=null==(d=Ua.data)?void 0:d.monthly)?void 0:m.ctc)||0)})]})]})})}),t.jsx(Be,{className:"group overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-violet-500 to-purple-600 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-3 backdrop-blur-sm",children:t.jsx(us,{className:"h-6 w-6 text-white"})}),t.jsx("div",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white backdrop-blur-sm",children:"Annual"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-violet-100",children:"Net Salary"}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-white",children:Za((null==(u=null==(x=Ua.data)?void 0:x.annual)?void 0:u.net_salary)||0)})]})]})})}),t.jsx(Be,{className:"group overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-orange-500 to-red-600 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-3 backdrop-blur-sm",children:t.jsx(js,{className:"h-6 w-6 text-white"})}),t.jsx("div",{className:"rounded-full bg-white/20 px-3 py-1 text-xs font-semibold text-white backdrop-blur-sm",children:"Annual"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-orange-100",children:"CTC"}),t.jsx("p",{className:"mt-2 text-3xl font-bold text-white",children:Za((null==(b=null==(p=Ua.data)?void 0:p.annual)?void 0:b.ctc)||0)})]})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-blue-100 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-blue-600 p-2",children:t.jsx(us,{className:"h-4 w-4 text-white"})}),"Pay Structure"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pay Commission"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(v=null==(j=null==(g=Ua.data)?void 0:g.pay_config)?void 0:j.pay_commission)?void 0:v.commission_name})]}),t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pay Level"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(y=null==(N=null==(f=Ua.data)?void 0:f.pay_config)?void 0:N.pay_level)?void 0:y.level_name})]}),t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Current Basic Pay"}),t.jsx("span",{className:"text-sm font-bold text-blue-600",children:Za(null==(w=null==(_=Ua.data)?void 0:_.pay_config)?void 0:w.current_basic_pay)})]}),t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Cell Index"}),t.jsx(rs,{className:"border-0 bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-1 text-xs font-semibold text-white shadow-md",children:null==(k=null==(S=Ua.data)?void 0:S.pay_config)?void 0:k.cell_index})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-purple-100 bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-purple-600 p-2",children:t.jsx(ps,{className:"h-4 w-4 text-white"})}),"Deductions & Tax"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pension Scheme"}),t.jsx(rs,{className:"border-0 bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-1 text-xs font-semibold text-white shadow-md",children:null==(P=null==(C=Ua.data)?void 0:C.pay_config)?void 0:P.pension_scheme})]}),(null==(A=null==(D=Ua.data)?void 0:D.pay_config)?void 0:A.nps_contribution_rate)&&t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"NPS Contribution Rate"}),t.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[null==(E=null==(I=Ua.data)?void 0:I.pay_config)?void 0:E.nps_contribution_rate,"%"]})]}),t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Tax Regime"}),t.jsx(rs,{className:"border border-purple-200 bg-purple-100 px-4 py-1 text-xs font-semibold text-purple-700 shadow-sm",children:"new"===(null==(q=null==(F=Ua.data)?void 0:F.pay_config)?void 0:q.tax_regime)?"New Regime":"Old Regime"})]}),t.jsxs("div",{className:"group flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"City Classification"}),t.jsxs(rs,{className:"border border-slate-300 bg-white px-4 py-1 text-xs font-semibold text-slate-700 shadow-sm",children:["Class ",null==(R=null==(M=Ua.data)?void 0:M.pay_config)?void 0:R.city_classification]})]})]})})]})]})]}),t.jsxs(is,{value:"monthly",className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b-0 bg-gradient-to-br from-emerald-600 to-teal-600 px-6 py-6",children:t.jsxs(Ve,{className:"flex items-center gap-3 text-lg font-bold text-white",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-2.5 backdrop-blur-sm",children:t.jsx(js,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("div",{children:"Monthly Earnings"}),t.jsx("div",{className:"mt-1 text-sm font-normal text-emerald-100",children:"Breakdown of monthly income"})]})]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Basic Pay"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==($=null==(T=null==(B=Ua.data)?void 0:B.monthly)?void 0:T.earnings)?void 0:$.basic_pay)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Dearness Allowance (DA)"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(O=null==(L=null==(V=Ua.data)?void 0:V.monthly)?void 0:L.earnings)?void 0:O.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"House Rent Allowance (HRA)"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(W=null==(z=null==(H=Ua.data)?void 0:H.monthly)?void 0:z.earnings)?void 0:W.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transport Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(K=null==(Q=null==(J=Ua.data)?void 0:J.monthly)?void 0:Q.earnings)?void 0:K.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Medical Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(ee=null==(Z=null==(X=Ua.data)?void 0:X.monthly)?void 0:Z.earnings)?void 0:ee.medical_allowance)||0)})]}),(null==(ie=null==(te=null==(ae=Ua.data)?void 0:ae.monthly)?void 0:te.earnings)?void 0:ie.special_allowance)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Special Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(oe=null==(de=null==(ne=Ua.data)?void 0:ne.monthly)?void 0:de.earnings)?void 0:oe.special_allowance)})]}),t.jsx(He,{className:"my-4"}),t.jsxs("div",{className:"flex items-center justify-between rounded-xl border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50 px-5 py-4 shadow-sm",children:[t.jsx("span",{className:"text-base font-bold text-slate-800",children:"Gross Salary"}),t.jsx("span",{className:"text-xl font-bold text-emerald-600",children:Za((null==(ue=null==(xe=null==(me=Ua.data)?void 0:me.monthly)?void 0:xe.earnings)?void 0:ue.gross_salary)||0)})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b-0 bg-gradient-to-br from-rose-600 to-pink-600 px-6 py-6",children:t.jsxs(Ve,{className:"flex items-center gap-3 text-lg font-bold text-white",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-2.5 backdrop-blur-sm",children:t.jsx(ps,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("div",{children:"Monthly Deductions"}),t.jsx("div",{className:"mt-1 text-sm font-normal text-rose-100",children:"Breakdown of monthly deductions"})]})]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-3",children:[(null==(be=null==(pe=null==(he=Ua.data)?void 0:he.monthly)?void 0:pe.deductions)?void 0:be.pf_contribution)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"PF Contribution"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(ve=null==(je=null==(ge=Ua.data)?void 0:ge.monthly)?void 0:je.deductions)?void 0:ve.pf_contribution)})]}),(null==(ye=null==(Ne=null==(fe=Ua.data)?void 0:fe.monthly)?void 0:Ne.deductions)?void 0:ye.nps_contribution)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"NPS Contribution"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(Se=null==(we=null==(_e=Ua.data)?void 0:_e.monthly)?void 0:we.deductions)?void 0:Se.nps_contribution)})]}),(null==(Pe=null==(Ce=null==(ke=Ua.data)?void 0:ke.monthly)?void 0:Ce.deductions)?void 0:Pe.gpf_contribution)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"GPF Contribution"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(Ie=null==(Ae=null==(De=Ua.data)?void 0:De.monthly)?void 0:Ae.deductions)?void 0:Ie.gpf_contribution)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Professional Tax"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(qe=null==(Fe=null==(Ee=Ua.data)?void 0:Ee.monthly)?void 0:Fe.deductions)?void 0:qe.professional_tax)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Income Tax"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(Oe=null==(Re=null==(Me=Ua.data)?void 0:Me.monthly)?void 0:Re.deductions)?void 0:Oe.income_tax)||0)})]}),t.jsx(He,{className:"my-4"}),t.jsxs("div",{className:"flex items-center justify-between rounded-xl border-2 border-rose-200 bg-gradient-to-br from-rose-50 to-pink-50 px-5 py-4 shadow-sm",children:[t.jsx("span",{className:"text-base font-bold text-slate-800",children:"Total Deductions"}),t.jsx("span",{className:"text-xl font-bold text-rose-600",children:Za((null==(ze=null==(Ge=null==(Ye=Ua.data)?void 0:Ye.monthly)?void 0:Ge.deductions)?void 0:ze.total_deductions)||0)})]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[t.jsx(Be,{className:"overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-blue-600 to-indigo-600 shadow-xl transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-lg bg-white/20 p-2 backdrop-blur-sm",children:t.jsx(us,{className:"h-5 w-5 text-white"})}),t.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-blue-100",children:"Net Monthly Salary"})]}),t.jsx("p",{className:"text-xs text-blue-200",children:"Amount credited to account"})]}),t.jsx("span",{className:"text-3xl font-bold text-white",children:Za((null==(Je=null==(We=Ua.data)?void 0:We.monthly)?void 0:Je.net_salary)||0)})]})})}),t.jsx(Be,{className:"overflow-hidden rounded-2xl border-0 bg-gradient-to-br from-violet-600 to-purple-600 shadow-xl transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"rounded-lg bg-white/20 p-2 backdrop-blur-sm",children:t.jsx(js,{className:"h-5 w-5 text-white"})}),t.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-violet-100",children:"Employer Contribution"})]}),t.jsx("p",{className:"text-xs text-violet-200",children:"Additional benefits"})]}),t.jsx("span",{className:"text-3xl font-bold text-white",children:Za((null==(Xe=null==(Ke=null==(Qe=Ua.data)?void 0:Qe.monthly)?void 0:Ke.employer_contributions)?void 0:Xe.total)||0)})]})})})]})]}),t.jsxs(is,{value:"annual",className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b-0 bg-gradient-to-br from-emerald-600 to-teal-600 px-6 py-6",children:t.jsxs(Ve,{className:"flex items-center gap-3 text-lg font-bold text-white",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-2.5 backdrop-blur-sm",children:t.jsx(js,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("div",{children:"Annual Earnings"}),t.jsx("div",{className:"mt-1 text-sm font-normal text-emerald-100",children:"Yearly income breakdown (12 months)"})]})]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Basic Pay"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(ds=null==(ns=null==(es=Ua.data)?void 0:es.annual)?void 0:ns.earnings)?void 0:ds.basic_pay)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Dearness Allowance (DA)"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(ms=null==(cs=null==(os=Ua.data)?void 0:os.annual)?void 0:cs.earnings)?void 0:ms.dearness_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"House Rent Allowance (HRA)"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(gs=null==(hs=null==(xs=Ua.data)?void 0:xs.annual)?void 0:hs.earnings)?void 0:gs.house_rent_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transport Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(ys=null==(Ns=null==(fs=Ua.data)?void 0:fs.annual)?void 0:Ns.earnings)?void 0:ys.transport_allowance)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-emerald-200 hover:from-emerald-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Medical Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(Ss=null==(ws=null==(_s=Ua.data)?void 0:_s.annual)?void 0:ws.earnings)?void 0:Ss.medical_allowance)||0)})]}),t.jsx(He,{className:"my-4"}),t.jsxs("div",{className:"flex items-center justify-between rounded-xl border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50 px-5 py-4 shadow-sm",children:[t.jsx("span",{className:"text-base font-bold text-slate-800",children:"Gross Salary"}),t.jsx("span",{className:"text-xl font-bold text-emerald-600",children:Za((null==(Ps=null==(Cs=null==(ks=Ua.data)?void 0:ks.annual)?void 0:Cs.earnings)?void 0:Ps.gross_salary)||0)})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b-0 bg-gradient-to-br from-rose-600 to-pink-600 px-6 py-6",children:t.jsxs(Ve,{className:"flex items-center gap-3 text-lg font-bold text-white",children:[t.jsx("div",{className:"rounded-xl bg-white/20 p-2.5 backdrop-blur-sm",children:t.jsx(ps,{className:"h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("div",{children:"Annual Deductions"}),t.jsx("div",{className:"mt-1 text-sm font-normal text-rose-100",children:"Yearly deduction breakdown (12 months)"})]})]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-3",children:[(null==(Is=null==(As=null==(Ds=Ua.data)?void 0:Ds.annual)?void 0:As.deductions)?void 0:Is.pf_contribution)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"PF Contribution"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(qs=null==(Fs=null==(Es=Ua.data)?void 0:Es.annual)?void 0:Fs.deductions)?void 0:qs.pf_contribution)})]}),(null==(Bs=null==(Rs=null==(Ms=Ua.data)?void 0:Ms.annual)?void 0:Rs.deductions)?void 0:Bs.nps_contribution)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"NPS Contribution"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(Vs=null==($s=null==(Ts=Ua.data)?void 0:Ts.annual)?void 0:$s.deductions)?void 0:Vs.nps_contribution)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Professional Tax"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(Ys=null==(Os=null==(Ls=Ua.data)?void 0:Ls.annual)?void 0:Os.deductions)?void 0:Ys.professional_tax)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-gradient-to-r from-slate-50 to-transparent p-3.5 transition-all hover:border-rose-200 hover:from-rose-50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Income Tax"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(Gs=null==(Us=null==(Hs=Ua.data)?void 0:Hs.annual)?void 0:Us.deductions)?void 0:Gs.income_tax)||0)})]}),t.jsx(He,{className:"my-4"}),t.jsxs("div",{className:"flex items-center justify-between rounded-xl border-2 border-rose-200 bg-gradient-to-br from-rose-50 to-pink-50 px-5 py-4 shadow-sm",children:[t.jsx("span",{className:"text-base font-bold text-slate-800",children:"Total Deductions"}),t.jsx("span",{className:"text-xl font-bold text-rose-600",children:Za((null==(Js=null==(Ws=null==(zs=Ua.data)?void 0:zs.annual)?void 0:Ws.deductions)?void 0:Js.total_deductions)||0)})]})]})})]})]}),(null==(Qs=Ua.data)?void 0:Qs.tax_info)&&t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl",children:[t.jsx($e,{className:"border-b border-amber-100 bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-5",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-amber-600 p-2",children:t.jsx(us,{className:"h-4 w-4 text-white"})}),"Tax Information"]}),t.jsx(Le,{className:"mt-1 text-sm text-slate-600",children:"Tax calculation and deductions summary"})]})})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border-2 border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50 p-5 shadow-sm transition-all hover:shadow-md",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-amber-700",children:"Tax Regime"}),t.jsx(rs,{className:"w-fit border-0 bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-1.5 font-semibold text-white shadow-md",children:"new"===Ua.data.tax_info.regime?"New Regime":"Old Regime"})]}),t.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-cyan-50 p-5 shadow-sm transition-all hover:shadow-md",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-blue-700",children:"Taxable Income"}),t.jsx("span",{className:"text-xl font-bold text-slate-900",children:Za(Ua.data.tax_info.annual_taxable_income)})]}),t.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border-2 border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50 p-5 shadow-sm transition-all hover:shadow-md",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-emerald-700",children:"Standard Deduction"}),t.jsx("span",{className:"text-xl font-bold text-slate-900",children:Za(Ua.data.tax_info.standard_deduction)})]}),t.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border-2 border-rose-200 bg-gradient-to-br from-rose-50 to-pink-50 p-5 shadow-sm transition-all hover:shadow-md",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-rose-700",children:"Annual Tax"}),t.jsx("span",{className:"text-xl font-bold text-slate-900",children:Za(Ua.data.tax_info.annual_tax)})]}),t.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border-2 border-violet-200 bg-gradient-to-br from-violet-50 to-purple-50 p-5 shadow-sm transition-all hover:shadow-md",children:[t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-violet-700",children:"Monthly Tax"}),t.jsx("span",{className:"text-xl font-bold text-slate-900",children:Za(Ua.data.tax_info.monthly_tax)})]})]})})]})]}),t.jsx(is,{value:"config",className:"mt-6 space-y-6",children:Ya?t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl",children:[t.jsxs($e,{className:"border-b-0 bg-gradient-to-br from-blue-600 to-indigo-600 px-6 py-6",children:[t.jsx(Ve,{className:"text-lg font-bold text-white",children:"Update Salary Configuration"}),t.jsx(Le,{className:"text-blue-100",children:"Modify salary configuration details"})]}),t.jsx(Te,{className:"p-8",children:t.jsxs(se,{methods:Ja,onSubmit:Ja.handleSubmit(async e=>{var s,a;Oa(!0);try{(await h.post(l.updateEmployeeSalary,{id:Number(e.id),...e.is_matrix_based&&{cell_index:Number(e.cell_index)},...!e.is_matrix_based&&{grade_pay:Number(e.grade_pay)},city_classification:e.city_classification,hra_percentage:Number(e.hra_percentage)||null,transport_allowance:Number(e.transport_allowance),medical_allowance:Number(e.medical_allowance),special_allowance:Number(e.special_allowance),pension_scheme:e.pension_scheme,..."NPS"===e.pension_scheme&&{nps_contribution_rate:Number(e.nps_contribution_rate),pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},..."OPS"===e.pension_scheme&&{gpf_contribution_rate:Number(e.gpf_contribution_rate)},..."EPF_ONLY"===e.pension_scheme&&{pf_employee_contribution_rate:Number(e.pf_employee_contribution_rate)},bank_name:e.bank_name,bank_account_no:e.bank_account_no,bank_ifsc:e.bank_ifsc,tax_regime:e.tax_regime})).data.success&&(alert("Salary configuration updated successfully!"),Ha(!1))}catch(t){alert((null==(a=null==(s=null==t?void 0:t.response)?void 0:s.data)?void 0:a.message)||"Failed to update salary configuration")}finally{Oa(!1)}}),children:[t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx("div",{children:(null==Ja?void 0:Ja.watch("is_matrix_based"))?t.jsx(re,{name:"cell_index",label:"Cell Index",data:(null==(Ks=null==Wa?void 0:Wa.data)?void 0:Ks.map(e=>({label:`Index ${e.cell_index} - â‚¹${e.basic_pay}`,value:String(e.cell_index)})))||[]}):t.jsx(le,{name:"grade_pay",label:"Grade Pay"})}),t.jsx("div",{children:t.jsx(re,{name:"city_classification",label:"City Classification",data:[{label:"X - Metro Cities (24%)",value:"X"},{label:"Y - Other Cities (16%)",value:"Y"},{label:"Z - Rural Areas (8%)",value:"Z"}]})}),t.jsx("div",{children:t.jsx(le,{name:"hra_percentage",label:"HRA Percentage"})}),t.jsx("div",{children:t.jsx(le,{name:"transport_allowance",label:"Transport Allowance"})}),t.jsx("div",{children:t.jsx(le,{name:"medical_allowance",label:"Medical Allowance"})}),t.jsx("div",{children:t.jsx(le,{name:"special_allowance",label:"Special Allowance"})}),t.jsx("div",{children:t.jsx(re,{name:"pension_scheme",label:"Pension Scheme",data:[{label:"NPS - National Pension System",value:"NPS"},{label:"GPF - General Provident Fund",value:"OPS"},{label:"EPF Only",value:"EPF_ONLY"}]})}),"NPS"===Xa&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-1.5",children:t.jsx(le,{name:"nps_contribution_rate",label:"NPS Contribution Rate (%)",type:"number",placeholder:"10"})}),t.jsx("div",{className:"space-y-1.5",children:t.jsx(le,{name:"pf_employee_contribution_rate",label:"PF Employee Contribution Rate (%)",type:"number",placeholder:"12"})})]}),"EPF_ONLY"===Xa&&t.jsx("div",{className:"space-y-1.5",children:t.jsx(le,{name:"pf_employee_contribution_rate",label:"PF Employee Contribution Rate (%)",type:"number",placeholder:"12"})}),"OPS"===Xa&&t.jsx("div",{className:"space-y-1.5",children:t.jsx(le,{name:"gpf_contribution_rate",label:"GPF Contribution Rate (%)",type:"number",placeholder:"Enter rate"})}),t.jsx("div",{children:t.jsx(le,{name:"bank_name",label:"Bank Name"})}),t.jsx("div",{children:t.jsx(le,{name:"bank_account_no",label:"Account Number"})}),t.jsx("div",{children:t.jsx(le,{name:"bank_ifsc",label:"IFSC Code"})}),t.jsx("div",{children:t.jsx(re,{name:"tax_regime",label:"Tax Regime",data:[{label:"New Regime",value:"new"},{label:"Old Regime",value:"old"}]})})]}),t.jsxs("div",{className:"-mx-8 -mb-8 mt-8 flex justify-end gap-4 border-t border-slate-200 bg-gradient-to-r from-slate-50 to-blue-50 px-8 py-5",children:[t.jsx(o,{type:"button",variant:"outline",onClick:()=>Ha(!1),className:"min-w-[140px] border-2 border-slate-300 font-semibold shadow-sm transition-all hover:scale-105 hover:border-slate-400 hover:bg-slate-100",children:"Cancel"}),t.jsx(o,{type:"submit",disabled:La,className:"min-w-[140px] border-0 bg-gradient-to-r from-blue-600 to-indigo-600 font-semibold shadow-lg transition-all hover:scale-105 hover:from-blue-700 hover:to-indigo-700",children:La?t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(vs,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center justify-end",children:t.jsxs(o,{onClick:()=>Ha(!0),className:"gap-2 border-0 bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-3 font-semibold shadow-lg transition-all hover:scale-105 hover:from-blue-700 hover:to-indigo-700",children:[t.jsx(vs,{className:"h-5 w-5"}),"Edit Configuration"]})}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-blue-100 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-blue-600 p-2",children:t.jsx(us,{className:"h-4 w-4 text-white"})}),"Pay Configuration"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pay Commission"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(ea=null==(Zs=null==(Xs=Ua.data)?void 0:Xs.pay_config)?void 0:Zs.pay_commission)?void 0:ea.commission_name})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pay Level"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(ta=null==(aa=null==(sa=Ua.data)?void 0:sa.pay_config)?void 0:aa.pay_level)?void 0:ta.level_name})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Cell Index"}),t.jsx(rs,{className:"border-0 bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-1 text-xs font-semibold text-white shadow-md",children:null==(ia=null==(la=Ua.data)?void 0:la.pay_config)?void 0:ia.cell_index})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Current Basic Pay"}),t.jsx("span",{className:"text-sm font-bold text-blue-600",children:Za(null==(ra=null==(na=Ua.data)?void 0:na.pay_config)?void 0:ra.current_basic_pay)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Grade Pay"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za((null==(oa=null==(da=Ua.data)?void 0:da.pay_config)?void 0:oa.grade_pay)||0)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-blue-200 hover:bg-blue-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Effective From"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:new Date(null==(xa=null==(ma=Ua.data)?void 0:ma.pay_config)?void 0:xa.effective_from).toLocaleDateString()})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-emerald-100 bg-gradient-to-r from-emerald-50 to-teal-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-emerald-600 p-2",children:t.jsx(js,{className:"h-4 w-4 text-white"})}),"Allowances"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-emerald-200 hover:bg-emerald-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"City Classification"}),t.jsxs(rs,{className:"border border-emerald-300 bg-emerald-100 px-4 py-1 text-xs font-semibold text-emerald-700 shadow-sm",children:["Class"," ",null==(ha=null==(ua=Ua.data)?void 0:ua.pay_config)?void 0:ha.city_classification]})]}),(null==(ba=null==(pa=Ua.data)?void 0:pa.pay_config)?void 0:ba.hra_percentage)&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-emerald-200 hover:bg-emerald-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"HRA Percentage"}),t.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[null==(ja=null==(ga=Ua.data)?void 0:ga.pay_config)?void 0:ja.hra_percentage,"%"]})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-emerald-200 hover:bg-emerald-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Transport Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(fa=null==(va=Ua.data)?void 0:va.pay_config)?void 0:fa.transport_allowance)})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-emerald-200 hover:bg-emerald-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Medical Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(ya=null==(Na=Ua.data)?void 0:Na.pay_config)?void 0:ya.medical_allowance)})]}),(null==(wa=null==(_a=Ua.data)?void 0:_a.pay_config)?void 0:wa.special_allowance)>0&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-emerald-200 hover:bg-emerald-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Special Allowance"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:Za(null==(ka=null==(Sa=Ua.data)?void 0:Sa.pay_config)?void 0:ka.special_allowance)})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-purple-100 bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-purple-600 p-2",children:t.jsx(ps,{className:"h-4 w-4 text-white"})}),"Retirement & Tax"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Pension Scheme"}),t.jsx(rs,{className:"border-0 bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-1 text-xs font-semibold text-white shadow-md",children:null==(Pa=null==(Ca=Ua.data)?void 0:Ca.pay_config)?void 0:Pa.pension_scheme})]}),(null==(Aa=null==(Da=Ua.data)?void 0:Da.pay_config)?void 0:Aa.nps_contribution_rate)&&t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"NPS Contribution Rate"}),t.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[null==(Ea=null==(Ia=Ua.data)?void 0:Ia.pay_config)?void 0:Ea.nps_contribution_rate,"%"]})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-purple-200 hover:bg-purple-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Tax Regime"}),t.jsx(rs,{className:"border border-purple-200 bg-purple-100 px-4 py-1 text-xs font-semibold text-purple-700 shadow-sm",children:"new"===(null==(qa=null==(Fa=Ua.data)?void 0:Fa.pay_config)?void 0:qa.tax_regime)?"New Regime":"Old Regime"})]})]})})]}),t.jsxs(Be,{className:"overflow-hidden rounded-2xl border-0 bg-white shadow-xl transition-all duration-300 hover:shadow-2xl",children:[t.jsx($e,{className:"border-b border-amber-100 bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-5",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-base font-bold text-slate-800",children:[t.jsx("div",{className:"rounded-lg bg-amber-600 p-2",children:t.jsx(us,{className:"h-4 w-4 text-white"})}),"Bank Details"]})}),t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-amber-200 hover:bg-amber-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Bank Name"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(Ra=null==(Ma=Ua.data)?void 0:Ma.pay_config)?void 0:Ra.bank_name})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-amber-200 hover:bg-amber-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Account Number"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(Ta=null==(Ba=Ua.data)?void 0:Ba.pay_config)?void 0:Ta.bank_account_no})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50/50 p-3 transition-all hover:border-amber-200 hover:bg-amber-50/50",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"IFSC Code"}),t.jsx("span",{className:"text-sm font-bold text-slate-900",children:null==(Va=null==($a=Ua.data)?void 0:$a.pay_config)?void 0:Va.bank_ifsc})]})]})})]})]})]})})]})})}):t.jsx("div",{className:"mx-auto max-w-2xl p-6",children:t.jsx(Ze,{className:"border-l-4 border-l-amber-500 bg-amber-50",children:t.jsx(ss,{className:"text-center text-slate-700",children:"No salary configuration found for this employee. Please estimate and set the salary first."})})})}function xa({incrementData:e,promotionData:s}){var a,l,i,n;if(e.isLoading)return t.jsx(Be,{className:"border-slate-200 bg-white",children:t.jsxs(Te,{className:"flex items-center justify-center py-12",children:[t.jsx(bs,{className:"h-8 w-8 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-3 text-slate-600",children:"Loading increment preview..."})]})});if(e.error||!(null==(a=e.data)?void 0:a.success))return t.jsxs(Ze,{className:"border-red-200 bg-red-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-red-600"}),t.jsx(ss,{className:"text-red-700",children:"Failed to load increment preview. Please try again."})]});const r=null==(l=null==e?void 0:e.data)?void 0:l.data,d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),o=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"Not set";return t.jsx("div",{className:"space-y-6",children:t.jsxs(Be,{className:"border-slate-200 bg-white",children:[t.jsxs($e,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white pb-4",children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-lg",children:[t.jsx(js,{className:"h-5 w-5 text-blue-600"}),"Increment Preview"]}),t.jsx(Le,{children:"Current pay details and upcoming increment calculation"})]}),t.jsxs(Te,{className:"pt-6",children:[t.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4 rounded-lg bg-slate-50 p-4 md:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Employee"}),t.jsx("p",{className:"font-semibold text-slate-900",children:r.emp_name}),t.jsx("p",{className:"text-sm text-slate-600",children:r.emp_code})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Pay Commission"}),t.jsx("p",{className:"font-semibold text-slate-900",children:null==(n=null==(i=null==s?void 0:s.data)?void 0:i.data)?void 0:n.pay_commission})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Current Level"}),t.jsx("p",{className:"font-semibold text-slate-900",children:r.current_level}),r.current_cell&&t.jsxs("p",{className:"text-sm text-slate-600",children:["Cell ",r.current_cell]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Current Basic Pay"}),t.jsx("p",{className:"text-lg font-bold text-emerald-600",children:d(r.current_basic_pay)})]})]}),t.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx(ve,{className:"h-5 w-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Last Increment"}),t.jsx("p",{className:"font-semibold text-slate-900",children:o(r.last_increment_date)})]})]}),t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-slate-200 bg-white p-4",children:[t.jsx(ve,{className:"h-5 w-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Next Increment Due"}),t.jsx("p",{className:"font-semibold text-slate-900",children:o(r.next_increment_date)})]}),r.is_increment_due&&t.jsx(rs,{className:"ml-auto bg-emerald-100 text-emerald-700",children:"Due"}),!1===r.is_increment_due&&t.jsx(rs,{className:"ml-auto bg-amber-100 text-amber-700",children:"Not Due"})]})]}),r.can_increment?t.jsxs(t.Fragment,{children:[t.jsxs(Ze,{className:"mb-6 border-emerald-200 bg-emerald-50",children:[t.jsx(gs,{className:"h-4 w-4 text-emerald-600"}),t.jsxs(ss,{className:"text-emerald-700",children:[t.jsx("span",{className:"font-semibold",children:"Increment Available"})," - Employee is eligible for annual increment"]})]}),r.preview&&t.jsxs(Be,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:[t.jsx($e,{className:"pb-3",children:t.jsxs(Ve,{className:"text-base text-blue-900",children:["Increment Calculation"," ",t.jsx(rs,{variant:"outline",className:"ml-2",children:"7th_cpc_matrix"===r.increment_type?"7th CPC Matrix":"6th CPC Grade Pay"})]})}),t.jsx(Te,{children:"7th_cpc_matrix"===r.increment_type?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 text-center",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Current Cell"}),t.jsx("p",{className:"text-2xl font-bold text-slate-700",children:r.current_cell}),t.jsx("p",{className:"text-sm text-slate-600",children:d(r.current_basic_pay)})]}),t.jsx(fs,{className:"h-6 w-6 text-blue-600"}),t.jsxs("div",{className:"rounded-lg border-2 border-emerald-300 bg-emerald-50 p-4 text-center",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Cell"}),t.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:r.preview.new_cell}),t.jsx("p",{className:"text-sm text-emerald-600",children:d(r.preview.new_basic_pay)})]})]}),t.jsx("div",{className:"rounded-lg bg-emerald-100 p-3 text-center",children:t.jsxs("p",{className:"text-sm text-emerald-700",children:["Increment:"," ",t.jsx("span",{className:"font-bold",children:d(r.preview.increment_amount)})," ","(",r.preview.increment_percentage,"%)"]})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Increment Rate"}),t.jsx("p",{className:"text-lg font-bold text-slate-700",children:r.preview.increment_rate})]}),t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Increment Base"}),t.jsx("p",{className:"text-lg font-bold text-slate-700",children:d(r.preview.increment_base||0)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Current Pay Band Pay"}),t.jsx("p",{className:"font-semibold text-slate-700",children:d(r.preview.current_pay_band_pay||0)})]}),t.jsxs("div",{className:"rounded-lg border-2 border-emerald-300 bg-emerald-50 p-3",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Pay Band Pay"}),t.jsx("p",{className:"font-semibold text-emerald-700",children:d(r.preview.new_pay_band_pay||0)})]})]}),t.jsx("div",{className:"rounded-lg bg-slate-100 p-3",children:t.jsxs("p",{className:"text-sm text-slate-600",children:["Grade Pay:"," ",t.jsx("span",{className:"font-semibold",children:d(r.preview.grade_pay||0)})," ","(unchanged)"]})}),t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 text-center",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Current Basic"}),t.jsx("p",{className:"text-xl font-bold text-slate-700",children:d(r.current_basic_pay)})]}),t.jsx(fs,{className:"h-6 w-6 text-blue-600"}),t.jsxs("div",{className:"rounded-lg border-2 border-emerald-300 bg-emerald-50 p-4 text-center",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Basic"}),t.jsx("p",{className:"text-xl font-bold text-emerald-700",children:d(r.preview.new_basic_pay)})]})]}),t.jsx("div",{className:"rounded-lg bg-emerald-100 p-3 text-center",children:t.jsxs("p",{className:"text-sm text-emerald-700",children:["Increment:"," ",t.jsx("span",{className:"font-bold",children:d(r.preview.increment_amount)})," ","(",r.preview.increment_percentage,"%)"]})})]})})]})]}):t.jsxs(Ze,{className:"border-amber-200 bg-amber-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-amber-600"}),t.jsx(ss,{className:"text-amber-700",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"font-semibold",children:"Increment Not Available"}),t.jsx("p",{children:r.reason}),r.recommendation&&t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Recommendation:"})," ",r.recommendation]})]})})]})]})]})})}const ua=_s({effective_date:ws().min(1,"Effective date is required"),vide_order_no:ws().optional(),vide_order_date:ws().optional()});function ha({empId:e,canIncrement:a,isIncrementDue:i,onSuccess:n}){const[r,d]=s.useState(!1),[c,m]=s.useState(null),x=v(),h=de({}),p=U({resolver:Ns(ua),defaultValues:{effective_date:(new Date).toISOString().split("T")[0],vide_order_no:"",vide_order_date:""}}),{handleSubmit:b,reset:g}=p,j=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return c?t.jsxs(Be,{className:"border-emerald-200 bg-gradient-to-br from-emerald-50 to-white",children:[t.jsx($e,{className:"pb-3",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-emerald-700",children:[t.jsx(gs,{className:"h-5 w-5"}),"Increment Processed Successfully"]})}),t.jsx(Te,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[t.jsxs("div",{className:"rounded-lg bg-white p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Increment Type"}),t.jsx("p",{className:"font-semibold text-slate-900",children:"7th_cpc_matrix"===c.increment_type?"7th CPC Matrix":"6th CPC Grade Pay"})]}),t.jsxs("div",{className:"rounded-lg bg-white p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Previous Basic"}),t.jsx("p",{className:"font-semibold text-slate-900",children:j(c.previous_basic)})]}),t.jsxs("div",{className:"rounded-lg bg-emerald-100 p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Basic"}),t.jsx("p",{className:"font-bold text-emerald-700",children:j(c.new_basic)})]}),t.jsxs("div",{className:"rounded-lg bg-blue-100 p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-blue-600",children:"Increment Amount"}),t.jsxs("p",{className:"font-bold text-blue-700",children:["+",j(c.increment_amount)," (",c.increment_percentage,"%)"]})]})]}),"7th_cpc_matrix"===c.increment_type&&t.jsx("div",{className:"rounded-lg bg-slate-100 p-3",children:t.jsxs("p",{className:"text-sm text-slate-600",children:["Cell moved from"," ",t.jsx(rs,{variant:"outline",children:c.previous_cell})," to"," ",t.jsx(rs,{className:"bg-emerald-100 text-emerald-700",children:c.new_cell})]})}),t.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-blue-50 p-3",children:[t.jsx(ve,{className:"h-4 w-4 text-blue-600"}),t.jsxs("p",{className:"text-sm text-blue-700",children:["Effective: ",t.jsx("strong",{children:c.effective_date})," | Next Increment: ",t.jsx("strong",{children:c.next_increment_date})]})]}),t.jsx(o,{onClick:()=>{m(null),g(),d(!1)},variant:"outline",className:"w-full",children:"Process Another Increment"})]})})]}):t.jsxs(Be,{className:"border-slate-200 bg-white",children:[t.jsxs($e,{className:"border-b border-slate-100 pb-4",children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-lg",children:[t.jsx(js,{className:"h-5 w-5 text-blue-600"}),"Process Annual Increment"]}),t.jsx(Le,{children:"Apply annual increment to employee's pay configuration"})]}),t.jsxs(Te,{className:"pt-6",children:[!a&&t.jsxs(Ze,{className:"mb-6 border-red-200 bg-red-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-red-600"}),t.jsx(ss,{className:"text-red-700",children:"Employee is not eligible for increment. They may have reached maximum cell/pay band. Consider processing a promotion instead."})]}),a&&!i&&t.jsxs(Ze,{className:"mb-6 border-amber-200 bg-amber-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-amber-600"}),t.jsxs(ss,{className:"text-amber-700",children:[t.jsx("p",{className:"font-semibold",children:"Increment Not Yet Due"}),t.jsx("p",{className:"text-sm",children:'The next increment date has not arrived. Enable "Force Processing" below to process anyway.'})]})]}),t.jsx(se,{methods:p,onSubmit:b(async s=>{var t,i;if(a)try{const a=u(String(e)),t={emp_id:Number(a),effective_date:s.effective_date,vide_order_no:s.vide_order_no||null,vide_order_date:s.vide_order_date||null,force:r},i=await h.mutateAsync({api:l.processIncrement,data:t});i.data.success&&(m(i.data.data),ys({title:"Increment Processed Successfully",description:`Annual increment applied. New basic pay: â‚¹${i.data.data.new_basic}`}),x.invalidateQueries({queryKey:[`incrementPreview-${e}`]}),x.invalidateQueries({queryKey:[`getEmployeeSalary-${e}`]}),n&&n(i.data))}catch(d){ys({title:"Failed to Process Increment",description:(null==(i=null==(t=null==d?void 0:d.response)?void 0:t.data)?void 0:i.message)||"An error occurred. Please try again.",variant:"destructive"})}else ys({title:"Cannot Process Increment",description:"Employee is not eligible for increment at this time. Consider promotion.",variant:"destructive"})}),children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(le,{name:"effective_date",label:"Effective Date *",type:"date"}),t.jsx(le,{name:"vide_order_date",label:"Order Date",type:"date"})]}),t.jsx(le,{name:"vide_order_no",label:"Order Number",placeholder:"e.g., INC/2025/001"}),a&&!i&&t.jsxs("div",{className:"flex items-center space-x-2 rounded-lg border border-amber-200 bg-amber-50 p-4",children:[t.jsx(ae,{id:"force",checked:r,onCheckedChange:e=>d(e)}),t.jsx(te,{htmlFor:"force",className:"cursor-pointer text-sm text-amber-700",children:"Force Processing - Process increment before due date"})]}),t.jsx(o,{type:"submit",disabled:(null==h?void 0:h.isPending)||!a,className:"w-full bg-blue-600 hover:bg-blue-700",children:(null==h?void 0:h.isPending)?t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Increment..."]}):t.jsxs(t.Fragment,{children:[t.jsx(js,{className:"mr-2 h-4 w-4"}),"Process Increment"]})})]})})]})]})}function pa({onSelectLevel:e,promotionData:a}){var l,i,n,r;const[d,o]=s.useState(null);if(a.isLoading)return t.jsx(Be,{className:"border-slate-200 bg-white",children:t.jsxs(Te,{className:"flex items-center justify-center py-12",children:[t.jsx(bs,{className:"h-8 w-8 animate-spin text-purple-600"}),t.jsx("span",{className:"ml-3 text-slate-600",children:"Loading promotion preview..."})]})});if(a.error||!(null==(l=a.data)?void 0:l.success))return t.jsxs(Ze,{className:"border-red-200 bg-red-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-red-600"}),t.jsx(ss,{className:"text-red-700",children:"Failed to load promotion preview. Please try again."})]});const c=a.data.data,m=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),x=(s,a)=>{o(s),e&&e(s,a)};return t.jsx("div",{className:"space-y-6",children:t.jsxs(Be,{className:"border-slate-200 bg-white",children:[t.jsxs($e,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white pb-4",children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-lg",children:[t.jsx(ns,{className:"h-5 w-5 text-purple-600"}),"Promotion Preview"]}),t.jsx(Le,{children:"View eligible promotion levels with pay fitment analysis"})]}),t.jsxs(Te,{className:"pt-6",children:[t.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4 rounded-lg bg-slate-50 p-4 md:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Employee"}),t.jsx("p",{className:"font-semibold text-slate-900",children:c.emp_name}),t.jsx("p",{className:"text-sm text-slate-600",children:c.emp_code})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Pay Commission"}),t.jsx("p",{className:"font-semibold text-slate-900",children:c.pay_commission}),t.jsx(rs,{variant:"outline",className:"mt-1",children:c.is_matrix_based?"7th CPC Matrix":"6th CPC GP"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Current Level"}),t.jsx("p",{className:"font-semibold text-slate-900",children:c.current_level_name}),c.is_matrix_based&&c.current_cell&&t.jsxs("p",{className:"text-sm text-slate-600",children:["Cell ",c.current_cell]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Current Basic Pay"}),t.jsx("p",{className:"text-lg font-bold text-emerald-600",children:m(c.current_basic_pay)})]})]}),c.can_promote?t.jsxs(t.Fragment,{children:[(null==c?void 0:c.recommended_promotion)&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-purple-700",children:[t.jsx(Ss,{className:"h-4 w-4"}),"Recommended Promotion"]}),t.jsx(Be,{className:"cursor-pointer border-2 transition-all "+(d===c.recommended_promotion.pay_level_id?"border-purple-500 bg-purple-50":"border-purple-200 bg-gradient-to-r from-purple-50 to-white hover:border-purple-400"),onClick:()=>x(c.recommended_promotion.pay_level_id,c.recommended_promotion),children:t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-purple-900",children:c.recommended_promotion.level_name}),c.is_matrix_based&&c.recommended_promotion.recommended_cell&&t.jsxs("p",{className:"text-sm text-purple-600",children:["Recommended Cell:"," ",c.recommended_promotion.recommended_cell]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-emerald-600",children:m(c.recommended_promotion.new_basic_pay)}),t.jsxs(rs,{className:"bg-emerald-100 text-emerald-700",children:["+",m(c.recommended_promotion.increment_amount)]})]})]})})})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"mb-3 text-sm font-semibold text-slate-700",children:["All Eligible Promotion Levels (",c.eligible_levels.length,")"]}),t.jsx("div",{className:"grid-rows-auto grid grid-cols-1 gap-4 md:grid-cols-2",children:(null==c?void 0:c.is_matrix_based)?null==(n=null==c?void 0:c.eligible_levels)?void 0:n.map(e=>t.jsx(Be,{className:"cursor-pointer border transition-all "+(d===e.pay_level_id?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),onClick:()=>x(e.pay_level_id,e),children:t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-semibold text-slate-900",children:e.level_name}),t.jsxs(rs,{variant:"outline",children:["Level ",e.level]}),e.fitment_required&&t.jsx(rs,{className:"bg-amber-100 text-amber-700",children:"Fitment Required"})]}),t.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Range: ",m(e.min_basic_pay)," -"," ",m(e.max_basic_pay)]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-xs text-slate-500",children:["Entry Cell (",e.entry_cell.cell_index,")"]}),t.jsx("p",{className:"font-semibold "+(e.entry_cell.would_result_in_pay_cut?"text-red-600":"text-slate-700"),children:m(e.entry_cell.basic_pay)}),e.entry_cell.would_result_in_pay_cut&&t.jsx("p",{className:"text-xs text-red-500",children:"Pay cut!"})]}),e.recommended_cell&&t.jsxs(t.Fragment,{children:[t.jsx(fs,{className:"h-4 w-4 text-slate-400"}),t.jsxs("div",{className:"rounded-lg bg-emerald-50 p-2 text-center",children:[t.jsxs("p",{className:"text-xs text-emerald-600",children:["Fitted Cell (",e.recommended_cell.cell_index,")"]}),t.jsx("p",{className:"font-bold text-emerald-700",children:m(e.recommended_cell.basic_pay)}),t.jsxs("p",{className:"text-xs text-emerald-600",children:["+",m(e.recommended_cell.increment_amount)," ","(",e.recommended_cell.increment_percentage,"%)"]})]})]})]}),d===e.pay_level_id&&t.jsx(gs,{className:"h-5 w-5 text-purple-600"})]})})},e.pay_level_id)):null==(r=null==c?void 0:c.eligible_levels)?void 0:r.map(e=>t.jsx(Be,{className:"cursor-pointer border transition-all "+(d===e.pay_level_id?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300 hover:bg-slate-50"),onClick:()=>x(e.pay_level_id,e),children:t.jsx(Te,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"font-semibold text-slate-900",children:e.level_name}),t.jsxs(rs,{variant:"outline",children:["GP â‚¹",e.new_grade_pay]}),e.pay_band_changed&&t.jsx(rs,{className:"bg-blue-100 text-blue-700",children:"Pay Band Change"}),e.fitment_applied&&t.jsx(rs,{className:"bg-amber-100 text-amber-700",children:"Fitment Applied"})]}),t.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:[e.pay_band_name," (",m(e.pay_band_min)," -"," ",m(e.pay_band_max),")"]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"New Pay Band Pay"}),t.jsx("p",{className:"font-semibold text-slate-700",children:m(e.new_pay_band_pay)})]}),t.jsxs("div",{className:"rounded-lg bg-emerald-50 p-2 text-center",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Basic"}),t.jsx("p",{className:"font-bold text-emerald-700",children:m(e.new_basic_pay)}),t.jsxs("p",{className:"text-xs text-emerald-600",children:["+",m(e.increment_amount)," (",e.increment_percentage,"%)"]})]}),d===e.pay_level_id&&t.jsx(gs,{className:"h-5 w-5 text-purple-600"})]})]})})},e.pay_level_id))})]})]}):t.jsxs(Ze,{className:"border-amber-200 bg-amber-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-amber-600"}),t.jsxs(ss,{className:"text-amber-700",children:[t.jsx("p",{className:"font-semibold",children:"No Promotion Levels Available"}),t.jsx("p",{children:null==(i=null==a?void 0:a.data)?void 0:i.message})]})]})]})]})})}const ba=W({new_pay_level_id:K().min(1,"Pay level is required"),new_designation_id:K().optional(),is_matrix_based:Z().optional(),cell_index:K().optional(),new_pay_band_pay:K().optional(),effective_date:K().min(1,"Effective date is required"),vide_order_no:K().optional(),vide_order_date:K().optional(),promotion_reason:K().optional()});function ga({empId:e,selectedLevel:a,canPromote:i,onSuccess:n,onReset:r,isMatrixBased:d}){var c,m,x,p,b;const[g,j]=s.useState(!1),[f,N]=s.useState(null),_=v(),{data:w}=y(),S=U({resolver:G(ba),defaultValues:{new_pay_level_id:"",new_designation_id:"",cell_index:"1",is_matrix_based:!1,new_pay_band_pay:"",effective_date:(new Date).toISOString().split("T")[0],vide_order_no:"",vide_order_date:"",promotion_reason:""}}),{handleSubmit:k,reset:C,setValue:P,watch:D}=S;s.useEffect(()=>{var e;a&&(P("new_pay_level_id",String(a.pay_level_id)),d?P("cell_index",String(null==(e=a.recommended_cell)?void 0:e.cell_index)):P("new_pay_band_pay",String(null==a?void 0:a.new_pay_band_pay)))},[a,P]);const A=D("new_pay_level_id"),I=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),E=(null==(c=null==w?void 0:w.data)?void 0:c.map(e=>({label:e.designation_name,value:String(e.id)})))||[];return f?t.jsxs(Be,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-white",children:[t.jsx($e,{className:"pb-3",children:t.jsxs(Ve,{className:"flex items-center gap-2 text-purple-700",children:[t.jsx(gs,{className:"h-5 w-5"}),"Promotion Processed Successfully"]})}),t.jsx(Te,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"rounded-lg bg-white p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Previous Level"}),t.jsx("p",{className:"font-semibold text-slate-900",children:f.previous_level_name}),f.previous_cell&&t.jsxs("p",{className:"text-sm text-slate-600",children:["Cell ",f.previous_cell]})]}),t.jsxs("div",{className:"rounded-lg bg-purple-100 p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-purple-600",children:"New Level"}),t.jsx("p",{className:"font-bold text-purple-700",children:f.new_level_name}),f.new_cell&&t.jsxs("p",{className:"text-sm text-purple-600",children:["Cell ",f.new_cell]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:[t.jsxs("div",{className:"rounded-lg bg-white p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500",children:"Previous Basic"}),t.jsx("p",{className:"font-semibold text-slate-900",children:I(f.previous_basic)})]}),t.jsxs("div",{className:"rounded-lg bg-emerald-100 p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-emerald-600",children:"New Basic"}),t.jsx("p",{className:"font-bold text-emerald-700",children:I(f.new_basic)})]}),t.jsxs("div",{className:"rounded-lg bg-blue-100 p-3 shadow-sm",children:[t.jsx("p",{className:"text-xs text-blue-600",children:"Increment"}),t.jsxs("p",{className:"font-bold text-blue-700",children:["+",I(f.increment_amount)]})]})]}),f.fitment_applied&&t.jsxs(Ze,{className:"border-amber-200 bg-amber-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-amber-600"}),t.jsxs(ss,{className:"text-amber-700",children:[t.jsx("strong",{children:"Fitment Applied:"})," Cell adjusted from"," ",f.requested_cell," to ",f.new_cell," to maintain pay protection."]})]}),t.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-blue-50 p-3",children:[t.jsx(ve,{className:"h-4 w-4 text-blue-600"}),t.jsxs("p",{className:"text-sm text-blue-700",children:["Effective: ",t.jsx("strong",{children:f.effective_date})," | Next Increment: ",t.jsx("strong",{children:f.next_increment_date})]})]}),t.jsx(o,{onClick:()=>{N(null),C(),null==r||r()},variant:"outline",className:"w-full",children:"Process Another Promotion"})]})})]}):t.jsxs(Be,{className:"border-slate-200 bg-white",children:[t.jsxs($e,{className:"border-b border-slate-100 pb-4",children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-lg",children:[t.jsx(ns,{className:"h-5 w-5 text-purple-600"}),"Process Promotion"]}),t.jsx(Le,{children:"Promote employee to a higher pay level"})]}),t.jsxs(Te,{className:"pt-6",children:[!i&&t.jsxs(Ze,{className:"mb-6 border-red-200 bg-red-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-red-600"}),t.jsx(ss,{className:"text-red-700",children:"Employee is not eligible for promotion. They may already be at the highest level."})]}),!a&&i&&t.jsxs(Ze,{className:"mb-6 border-blue-200 bg-blue-50",children:[t.jsx(Ne,{className:"h-4 w-4 text-blue-600"}),t.jsx(ss,{className:"text-blue-700",children:"Please select a promotion level from the preview above to proceed."})]}),a&&t.jsxs("div",{className:"mb-6 rounded-lg border-2 border-purple-200 bg-purple-50 p-4",children:[t.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Selected Level"}),t.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-purple-900",children:a.level_name}),a.level&&t.jsxs(rs,{variant:"outline",children:["Level ",a.level]})]}),(null==(m=null==a?void 0:a.recommended_cell)?void 0:m.basic_pay)&&t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-emerald-600",children:I(null==(x=null==a?void 0:a.recommended_cell)?void 0:x.basic_pay)}),(null==(p=a.recommended_cell)?void 0:p.increment_amount)&&t.jsxs("p",{className:"text-sm text-emerald-600",children:["+",I((null==(b=a.recommended_cell)?void 0:b.increment_amount)||0)," "]})]})]})]}),t.jsx(se,{methods:S,onSubmit:k(async s=>{var a,t;if(i)if(s.new_pay_level_id){j(!0);try{const a=u(String(e)),t=parseInt(s.cell_index||"1",10),i=isNaN(t)||t<1?1:t,r={emp_id:Number(a),new_pay_level_id:Number(s.new_pay_level_id),new_designation_id:s.new_designation_id?Number(s.new_designation_id):null,...d&&{cell_index:i},...!d&&{new_pay_band_pay:Number(s.new_pay_band_pay)},effective_date:s.effective_date,vide_order_no:s.vide_order_no||null,vide_order_date:s.vide_order_date||null,promotion_reason:s.promotion_reason||null},o=await h.post(l.processPromotion,r);o.data.success&&(N(o.data.data),ys({title:"Promotion Processed Successfully",description:`Promoted to ${o.data.data.new_level_name}. New basic pay: â‚¹${o.data.data.new_basic}`}),_.invalidateQueries({queryKey:[`promotionPreview-${e}`]}),_.invalidateQueries({queryKey:[`incrementPreview-${e}`]}),_.invalidateQueries({queryKey:[`getEmployeeSalary-${e}`]}),n&&n(o.data))}catch(r){ys({title:"Failed to Process Promotion",description:(null==(t=null==(a=null==r?void 0:r.response)?void 0:a.data)?void 0:t.message)||"An error occurred. Please try again.",variant:"destructive"})}finally{j(!1)}}else ys({title:"Select a Level",description:"Please select a promotion level from the preview above.",variant:"destructive"});else ys({title:"Cannot Process Promotion",description:"Employee is not eligible for promotion at this time.",variant:"destructive"})}),children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("input",{type:"hidden",...S.register("new_pay_level_id")}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(le,{name:"effective_date",label:"Effective Date *",type:"date"}),d?t.jsx(le,{disabled:!0,name:"cell_index",label:"Cell Index",inputValidation:["number"]}):t.jsx(le,{disabled:!0,name:"new_pay_band_pay",label:"New Pay Band Pay",inputValidation:["number"]})]}),t.jsx(re,{name:"new_designation_id",label:"New Designation (Optional)",data:E,isSearch:!0}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(le,{name:"vide_order_no",label:"Order Number",placeholder:"e.g., PROM/2025/001"}),t.jsx(le,{name:"vide_order_date",label:"Order Date",type:"date"})]}),t.jsx(le,{name:"promotion_reason",label:"Promotion Reason (Optional)",placeholder:"e.g., Promotion based on annual performance review"}),t.jsx(o,{type:"submit",disabled:g||!i||!A,className:"w-full bg-purple-600 hover:bg-purple-700",children:g?t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Promotion..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ns,{className:"mr-2 h-4 w-4"}),"Process Promotion"]})})]})})]})]})}function ja({empId:e,onBack:a}){var i,n,r,d,c,m,x,u,h,p,b;const[g,j]=s.useState("increment"),[v,f]=s.useState(null),N=ce({api:`${l.getIncrementPreview}?emp_id=${e}`,key:`incrementPreview-${e}`,value:[e],options:{enabled:!!e}}),y=ce({api:`${l.getPromotionPreview}?emp_id=${e}`,key:`promotionPreview-${e}`,value:[e],options:{enabled:!!e}}),_=(null==(n=null==(i=null==N?void 0:N.data)?void 0:i.data)?void 0:n.can_increment)??!1,w=(null==(d=null==(r=null==N?void 0:N.data)?void 0:r.data)?void 0:d.is_increment_due)??!0,S=(null==(m=null==(c=null==y?void 0:y.data)?void 0:c.data)?void 0:m.can_promote)??!1;return N.isLoading||y.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(bs,{className:"h-8 w-8 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-3 text-slate-600",children:"Loading pay details..."})]}):t.jsxs("div",{className:"min-h-screen space-y-6 bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Increment & Promotion"}),t.jsx("p",{className:"text-slate-600",children:"Process annual increment or promotion for employee"})]}),a&&t.jsxs(o,{variant:"outline",onClick:a,children:[t.jsx(ks,{className:"mr-2 h-4 w-4"}),"Back to Salary Details"]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(Be,{className:"cursor-pointer border-2 transition-all "+("increment"===g?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"),onClick:()=>j("increment"),children:t.jsxs(Te,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"rounded-full p-3 "+(_?"bg-emerald-100":"bg-amber-100"),children:t.jsx(js,{className:"h-6 w-6 "+(_?"text-emerald-600":"text-amber-600")})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-slate-900",children:"Annual Increment"}),t.jsx("p",{className:"text-sm text-slate-600",children:_?t.jsxs("span",{className:"flex items-center gap-1 text-emerald-600",children:[t.jsx(gs,{className:"h-3 w-3"})," Eligible",w?" - Due now":" - Not yet due"]}):t.jsx("span",{className:"text-amber-600",children:"Not eligible - Promotion required"})})]})]})}),t.jsx(Be,{className:"cursor-pointer border-2 transition-all "+("promotion"===g?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"),onClick:()=>j("promotion"),children:t.jsxs(Te,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"rounded-full p-3 "+(S?"bg-emerald-100":"bg-amber-100"),children:t.jsx(ns,{className:"h-6 w-6 "+(S?"text-emerald-600":"text-amber-600")})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-slate-900",children:"Promotion"}),t.jsx("p",{className:"text-sm text-slate-600",children:S?t.jsxs("span",{className:"flex items-center gap-1 text-emerald-600",children:[t.jsx(gs,{className:"h-3 w-3"})," ",(null==(h=null==(u=null==(x=null==y?void 0:y.data)?void 0:x.data)?void 0:u.eligible_levels)?void 0:h.length)||0," ","levels available"]}):t.jsx("span",{className:"text-amber-600",children:"Already at highest level"})})]})]})})]}),t.jsx(Be,{className:"border-slate-200 bg-white shadow-lg",children:t.jsx(Te,{className:"p-0",children:t.jsxs(as,{value:g,onValueChange:j,className:"w-full",children:[t.jsxs(ts,{className:"grid h-auto w-full grid-cols-2 gap-0 rounded-none rounded-t-lg border-b bg-slate-100 p-0",children:[t.jsxs(ls,{value:"increment",className:"flex items-center gap-2 rounded-none rounded-tl-lg py-4 data-[state=active]:bg-white data-[state=active]:shadow-none",children:[t.jsx(js,{className:"h-4 w-4"}),t.jsx("span",{children:"Annual Increment"})]}),t.jsxs(ls,{value:"promotion",className:"flex items-center gap-2 rounded-none rounded-tr-lg py-4 data-[state=active]:bg-white data-[state=active]:shadow-none",children:[t.jsx(ns,{className:"h-4 w-4"}),t.jsx("span",{children:"Promotion"})]})]}),t.jsx(is,{value:"increment",className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[t.jsx(xa,{incrementData:N,promotionData:y}),t.jsx(ha,{empId:e,canIncrement:_,isIncrementDue:w})]})}),t.jsx(is,{value:"promotion",className:"p-6",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(pa,{onSelectLevel:(e,s)=>{f(s)},promotionData:y}),t.jsx(ga,{empId:e,selectedLevel:v,canPromote:S,onReset:()=>f(null),isMatrixBased:(null==(b=null==(p=null==y?void 0:y.data)?void 0:p.data)?void 0:b.is_matrix_based)||!1})]})})]})})})]})}function va(){var e,a,i,n,r,c,m,x;const{id:u}=d(),h=u||"",[p,b]=s.useState("estimate"),[g,j]=s.useState(null),[v,f]=s.useState(null),[N,y]=s.useState(!1),[_,w]=s.useState(null),[S,k]=s.useState(!0),[C,P]=s.useState(!1),D=ce({api:`${l.getEmployeeSalary}?emp_id=${u}`,key:`checkExistingSalary-${u}`,value:[u],options:{enabled:!!u}});s.useEffect(()=>{var e,s;(null==(e=D.data)?void 0:e.success)&&(null==(s=D.data)?void 0:s.data)&&(w(D.data.data),y(!0),b("view")),k(D.isLoading)},[D]);const A=e=>"estimate"===e||("set"===e?!!g&&!N:"view"===e&&N);return C?t.jsx(ja,{empId:h,onBack:()=>P(!1)}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 ",children:t.jsxs("div",{className:"space-y-6",children:[S?t.jsxs(Ze,{className:"border-blue-200 bg-white shadow-sm",children:[t.jsx(bs,{className:"h-4 w-4 animate-spin text-blue-600"}),t.jsx(ss,{className:"ml-2 text-slate-700",children:"Checking existing salary configuration..."})]}):N||_?t.jsxs(Ze,{className:"border-emerald-200 bg-white shadow-sm",children:[t.jsx(gs,{className:"h-4 w-4 text-emerald-600"}),t.jsxs(ss,{className:"ml-2 text-slate-700",children:[t.jsx("span",{className:"font-semibold text-emerald-700",children:"Salary Configured"})," ","- Use Increment & Promotion button to process salary revisions"]})]}):t.jsx(Ze,{className:"border-blue-200 bg-white shadow-sm",children:t.jsx(ss,{className:"text-slate-700",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"font-semibold text-slate-900",children:"Setup Process:"}),t.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[t.jsx(rs,{variant:"outline",className:"mt-0.5",children:"1"}),t.jsx("span",{children:"Calculate salary by entering employee details"})]}),t.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[t.jsx(rs,{variant:"outline",className:"mt-0.5",children:"2"}),t.jsx("span",{children:"Review and confirm the salary configuration"})]}),t.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[t.jsx(rs,{variant:"outline",className:"mt-0.5",children:"3"}),t.jsx("span",{children:"View complete details and update when needed"})]})]})})}),N||_?t.jsxs(Be,{className:"border-slate-200 bg-white shadow-lg",children:[t.jsx($e,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(Ve,{className:"flex items-center gap-2 text-xl",children:[t.jsx(cs,{className:"h-5 w-5 text-blue-600"}),"Salary Details"]}),t.jsx(Le,{children:"Complete salary breakdown and management"})]}),t.jsxs(o,{onClick:()=>P(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700",children:[t.jsx(ns,{className:"mr-2 h-4 w-4"}),"Increment & Promotion"]})]})}),t.jsx(Te,{className:"p-6",children:t.jsx(ma,{empId:h})})]}):t.jsxs(Be,{className:"border-slate-200 bg-white shadow-lg",children:[t.jsxs($e,{className:"border-b border-slate-100",children:[t.jsx(Ve,{className:"text-xl",children:"Salary Configuration Workflow"}),t.jsx(Le,{children:"Follow the step-by-step process to configure employee salary"})]}),t.jsx(Te,{className:"p-6",children:t.jsxs(as,{value:p,onValueChange:b,className:"w-full",children:[t.jsxs(ts,{className:"grid h-auto w-full grid-cols-3 gap-2 bg-slate-100 p-1.5",children:[t.jsxs(ls,{value:"estimate",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[t.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-xs font-bold text-white",children:"1"}),t.jsx("span",{className:"hidden sm:inline",children:"Calculate"}),g&&t.jsx(gs,{className:"h-4 w-4 text-emerald-600"})]}),t.jsxs(ls,{value:"set",disabled:!A("set"),className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[t.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-600 text-xs font-bold text-white",children:"2"}),t.jsx("span",{className:"hidden sm:inline",children:"Confirm"}),N&&t.jsx(gs,{className:"h-4 w-4 text-emerald-600"})]}),t.jsxs(ls,{value:"view",disabled:!A("view"),className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[t.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-purple-600 text-xs font-bold text-white",children:"3"}),t.jsx("span",{className:"hidden sm:inline",children:"Review"})]})]}),t.jsx(is,{value:"estimate",className:"mt-6",children:t.jsx(da,{empId:h,onEstimateComplete:(e,s)=>{j(e),f(s),N||_?setTimeout(()=>b("view"),500):setTimeout(()=>b("set"),500)}})}),t.jsx(is,{value:"set",className:"mt-6",children:t.jsx(oa,{estimatedData:g,formData:v,onSetComplete:e=>{y(!0),w(e.data),setTimeout(()=>b("view"),500)}})}),t.jsx(is,{value:"view",className:"mt-6",children:t.jsx(ma,{empId:h})})]})})]}),g&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Quick Summary"}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx(Be,{className:"border-emerald-200 bg-gradient-to-br from-emerald-50 to-white shadow-sm",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Monthly Net"}),t.jsxs("p",{className:"mt-1 text-2xl font-bold text-emerald-700",children:["â‚¹",((null==(a=null==(e=g.data)?void 0:e.monthly)?void 0:a.net_salary)||0).toLocaleString("en-IN")]})]}),t.jsx(js,{className:"h-8 w-8 text-emerald-600 opacity-20"})]})})}),t.jsx(Be,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-white shadow-sm",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Monthly CTC"}),t.jsxs("p",{className:"mt-1 text-2xl font-bold text-blue-700",children:["â‚¹",((null==(n=null==(i=g.data)?void 0:i.monthly)?void 0:n.ctc)||0).toLocaleString("en-IN")]})]}),t.jsx(cs,{className:"h-8 w-8 text-blue-600 opacity-20"})]})})}),t.jsx(Be,{className:"border-purple-200 bg-gradient-to-br from-purple-50 to-white shadow-sm",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Annual Net"}),t.jsxs("p",{className:"mt-1 text-2xl font-bold text-purple-700",children:["â‚¹",((null==(c=null==(r=g.data)?void 0:r.annual)?void 0:c.net_salary)||0).toLocaleString("en-IN")]})]}),t.jsx(js,{className:"h-8 w-8 text-purple-600 opacity-20"})]})})}),t.jsx(Be,{className:"border-orange-200 bg-gradient-to-br from-orange-50 to-white shadow-sm",children:t.jsx(Te,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Annual CTC"}),t.jsxs("p",{className:"mt-1 text-2xl font-bold text-orange-700",children:["â‚¹",((null==(x=null==(m=g.data)?void 0:m.annual)?void 0:x.ctc)||0).toLocaleString("en-IN")]})]}),t.jsx(cs,{className:"h-8 w-8 text-orange-600 opacity-20"})]})})})]})]})]})})}const fa=()=>{var e,a,i,n,r;const[o,c]=s.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:m}=d();s.useEffect(()=>{localStorage.setItem("employeeActiveTab",o)},[o]);const x=[{id:"basic",label:"Basic Details",icon:_,shortLabel:"Basic"},{id:"family",label:"Family Details",icon:fe,shortLabel:"Family"},{id:"educationAndTraining",label:"Education & Training",icon:Ps,shortLabel:"Education"},{id:"document",label:"Documents",icon:Ae,shortLabel:"Documents"},{id:"joiningInformation",label:"Joining Information",icon:ve,shortLabel:"Joining"},{id:"salary",label:"Salary Details",icon:us,shortLabel:"Salary"},{id:"attendance",label:"Attendance",icon:ve,shortLabel:"Attendance"},{id:"serviceHistory",label:"Service History",icon:qe,shortLabel:"Service History"},{id:"moduleAccess",label:"Module Access",icon:qe,shortLabel:"Modules Access"}],u=ce({api:`${null==(e=l)?void 0:e.getEmployeeById}?id=${m}`,key:"getEmployeeByIddsadasdasdasd",value:[m],options:{enabled:Boolean(m)}});return t.jsx(H,{title:"Employee Management",subTitle:"\r\n      View and manage employee details\r\n    ",children:t.jsx("div",{className:"min-h-screen",children:t.jsxs("div",{className:"overflow-hidden rounded-2xl bg-white shadow-2xl",children:[t.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 px-4 py-5 text-white sm:px-6 sm:py-6",children:[t.jsx("div",{className:"absolute right-0 top-0 h-48 w-48 -translate-y-1/3 translate-x-1/3 rounded-full bg-white/10 sm:h-64 sm:w-64"}),t.jsxs("div",{className:"relative z-10 flex items-center gap-3 sm:gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-white/95 shadow-lg sm:h-16 sm:w-16",children:t.jsx(_,{className:"h-6 w-6 text-indigo-500 sm:h-8 sm:w-8"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h2",{className:"truncate text-xl font-bold tracking-tight sm:text-2xl md:text-3xl",children:(null==(i=null==(a=null==u?void 0:u.data)?void 0:a.data)?void 0:i.emp_name)||"Employee Name"}),t.jsxs("p",{className:"mt-1 text-xs font-medium text-white/90 sm:text-sm",children:["ID: ",(null==(r=null==(n=null==u?void 0:u.data)?void 0:n.data)?void 0:r.emp_code)||"EMP0001"]})]})]})]}),t.jsx("div",{className:"border-b border-gray-200 bg-gradient-to-b from-gray-50 to-white px-3 py-3 sm:px-5 sm:py-4",children:t.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2",children:x.map(e=>{const s=e.icon,a=o===e.id;return t.jsxs("button",{onClick:()=>c(e.id),className:"flex min-w-[70px] items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-xs font-semibold transition-all duration-300 sm:min-w-fit sm:gap-2 sm:px-3 sm:py-2 sm:text-sm "+(a?"-translate-y-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/40":"border border-gray-200 bg-white text-gray-600 hover:-translate-y-0.5 hover:border-indigo-400 hover:bg-gray-50 hover:text-indigo-600"),children:[t.jsx(s,{className:"h-3.5 w-3.5 flex-shrink-0 sm:h-4 sm:w-4"}),t.jsx("span",{className:"whitespace-nowrap",children:e.shortLabel})]},e.id)})})}),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:["basic"===o&&t.jsx("div",{children:t.jsx(Es,{id:m,getDataById:u})}),"family"===o&&t.jsx("div",{children:t.jsx($s,{id:m,getDataById:u})}),"educationAndTraining"===o&&t.jsx("div",{children:t.jsx(Js,{getDataById:u,id:m})}),"document"===o&&t.jsx("div",{children:t.jsx(Ms,{id:m,getDataById:u})}),"joiningInformation"===o&&t.jsx("div",{children:t.jsx(na,{})}),"salary"===o&&t.jsx("div",{children:t.jsx(va,{})}),"attendance"===o&&t.jsx("div",{children:t.jsx(Gs,{id:m,getDataById:u})}),"serviceHistory"===o&&t.jsx("div",{children:t.jsx(ia,{id:m,getDataById:u})}),"moduleAccess"===o&&t.jsx("div",{children:t.jsx(Us,{getDataById:u})})]})]})})})};export{fa as default};
