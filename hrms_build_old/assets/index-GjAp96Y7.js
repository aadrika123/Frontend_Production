import{aA as e,r as i,j as t,aB as a,al as r}from"./vendor-RyuIgj66.js";import{P as s}from"./index-DFF4_m_G.js";import{h as n}from"./moment-CBOc1lqT.js";import{h as l,e as o,B as d,g as c}from"./index-ey2GEmQz.js";import{C as u,a as m,b as p,c as b}from"./card-u7M7FP5y.js";import{T as j,a as x,b as h,c as v,d as f,e as g}from"./table-B_npepsp.js";import{u as _,b as y}from"./useCustomQuery-DTB6aAiD.js";import{P as S}from"./index-BHR1l08i.js";import{S as C}from"./separator-BQijJEjG.js";import{S as P}from"./index-CUStUwt1.js";import{S as F}from"./Spinner-BwGzvoRj.js";import{c as E,a as N,e as w}from"./yup-CH6wvET8.js";import{F as R}from"./datetime-picker-dN6E5dqy.js";import{R as q}from"./RHFTextField-BSZ_cEI3.js";import{B as A}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{R as k}from"./DateAndTimePicker-CtTdRVKm.js";import{D as $}from"./index-B2ia16z0.js";import"./ui-B3c1eQmf.js";import"./icons-CxCh8mm_.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const B=E().shape({employee_contribution_rate:w().required("Employee Contribution Rate is required").min(0).max(100),employer_contribution_rate:w().required("Employer Contribution Rate is required").min(0).max(100),eps_contribution_rate:w().required("EPS Contribution Rate is required").min(0).max(100),admin_charges_rate:w().required("Admin Charges Rate is required").min(0).max(100),wage_ceiling:w().required("Wage Ceiling is required").min(0),effective_from:N().required("Effective From date is required")});function D({open:s,setOpen:n,title:d,id:c,edit:u,setEdit:m,refetch:p}){var b;const j=_({}),{data:x,isFetching:h}=y({api:`${null==(b=l)?void 0:b.getPFSlabById}?id=${o(String(c))}`,key:"getPFSlabById",options:{enabled:u&&!!c}}),v=e({defaultValues:{employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""},resolver:a(B)});return i.useEffect(()=>{var e,i,t,a,r,s;u&&x?v.reset({employee_contribution_rate:Number(null==(e=null==x?void 0:x.data)?void 0:e.employee_contribution_rate)||0,employer_contribution_rate:Number(null==(i=null==x?void 0:x.data)?void 0:i.employer_contribution_rate)||0,eps_contribution_rate:Number(null==(t=null==x?void 0:x.data)?void 0:t.eps_contribution_rate)||0,admin_charges_rate:Number(null==(a=null==x?void 0:x.data)?void 0:a.admin_charges_rate)||0,wage_ceiling:Number(null==(r=null==x?void 0:x.data)?void 0:r.wage_ceiling)||0,effective_from:(null==(s=null==x?void 0:x.data)?void 0:s.effective_from)||""}):v.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""})},[u,x,v]),t.jsx($,{open:s,setOpen:n,title:d,setEdit:m,edit:u,isLoading:h,children:t.jsx(R,{methods:v,onSubmit:v.handleSubmit(async e=>{var i,t,a,s,o,d,b,x;try{if(u&&c){const n=await j.mutateAsync({api:null==(i=l)?void 0:i.updatePFSlab,data:{id:Number(c),...e}});(null==(t=n.data)?void 0:t.success)?r.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"PF Contribution Slab updated successfully"):r.error((null==(s=n.data)?void 0:s.message)||"PF Contribution Slab not updated successfully")}else{const i=await j.mutateAsync({api:null==(o=l)?void 0:o.createPFSlab,data:e});(null==(d=i.data)?void 0:d.success)?r.success((null==(b=null==i?void 0:i.data)?void 0:b.message)||"PF Contribution Slab created successfully"):r.error((null==(x=i.data)?void 0:x.message)||"PF Contribution Slab not created successfully")}v.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""}),n(!1),null==m||m(!1),null==p||p()}catch(h){}}),children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(q,{label:"Employee Contribution Rate",name:"employee_contribution_rate",placeholder:"Enter Employee Contribution Rate (%)",type:"number",step:"0.01"})}),t.jsx("div",{children:t.jsx(q,{label:"Employer Contribution Rate",name:"employer_contribution_rate",placeholder:"Enter Employer Contribution Rate (%)",type:"number",step:"0.01"})}),t.jsx("div",{children:t.jsx(q,{label:"EPS Contribution Rate",name:"eps_contribution_rate",placeholder:"Enter EPS Contribution Rate (%)",type:"number",step:"0.01"})}),t.jsx("div",{children:t.jsx(q,{label:"Admin Charges Rate",name:"admin_charges_rate",placeholder:"Enter Admin Charges Rate (%)",type:"number",step:"0.01"})}),t.jsx("div",{children:t.jsx(q,{label:"Wage Ceiling",name:"wage_ceiling",placeholder:"Enter Wage Ceiling",type:"number"})}),t.jsx("div",{children:t.jsx(k,{name:"effective_from",label:"Effective From",placeholder:"Select effective from date"})}),t.jsx(C,{}),t.jsx("div",{children:t.jsx(A,{isLoading:v.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function L(){var e,a,s,o,E,N;const w=_({}),[R,q]=i.useState(1),[A]=i.useState(10),[k,$]=i.useState(""),[B,L]=i.useState(!1),[T,W]=i.useState(""),[Y,z]=i.useState(!1),I=y({api:`${l.getAllPFSlabs}?page=${R}&limit=${A}&q=${k}`,key:"getAllPFSlabs",value:[R,A,k],options:{enabled:!0}});return t.jsxs("main",{className:"grid items-start",children:[t.jsx(D,{open:B,setOpen:L,title:Y?"Edit PF Contribution Slab":"Add PF Contribution Slab",id:T,edit:Y,setEdit:z,refetch:I.refetch}),t.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[t.jsxs("div",{className:"flex w-full justify-between gap-2",children:[t.jsx("div",{children:t.jsx(P,{search:k,setSearch:$,refetch:I.refetch,isFetching:null==I?void 0:I.isLoading})}),t.jsx("div",{children:t.jsx(d,{className:"flex items-center gap-2",onClick:()=>L(!0),children:"Add New"})})]}),t.jsx(C,{}),t.jsxs(u,{children:[t.jsx(m,{children:t.jsx(p,{children:"PF Contribution Slabs"})}),t.jsx(b,{children:(null==I?void 0:I.isLoading)?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(F,{})}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(j,{children:[t.jsx(x,{children:t.jsxs(h,{children:[t.jsx(v,{children:"Employee Rate (%)"}),t.jsx(v,{children:"Employer Rate (%)"}),t.jsx(v,{children:"EPS Rate (%)"}),t.jsx(v,{children:"Admin Charges (%)"}),t.jsx(v,{children:"Wage Ceiling"}),t.jsx(v,{children:"Effective From"}),t.jsx(v,{children:"Status"}),t.jsx(v,{children:"Actions"})]})}),t.jsx(f,{children:(null==(e=null==I?void 0:I.data)?void 0:e.data)&&(null==(a=null==I?void 0:I.data)?void 0:a.data.length)>0?null==(s=null==I?void 0:I.data)?void 0:s.data.map(e=>t.jsxs(h,{children:[t.jsxs(g,{children:[e.employee_contribution_rate,"%"]}),t.jsxs(g,{children:[e.employer_contribution_rate,"%"]}),t.jsxs(g,{children:[e.eps_contribution_rate,"%"]}),t.jsxs(g,{children:[e.admin_charges_rate,"%"]}),t.jsxs(g,{children:["â‚¹",e.wage_ceiling]}),t.jsx(g,{children:n(e.effective_from).format("DD/MM/YYYY")}),t.jsx(g,{children:t.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold "+(1===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:1===e.status?"Active":"Inactive"})}),t.jsxs(g,{className:"flex gap-2",children:[t.jsx(d,{variant:"outline",size:"sm",onClick:()=>{return i=String(e.id),z(!0),L(!0),void W(i);var i},children:"Edit"}),t.jsx(d,{variant:"destructive",size:"sm",onClick:()=>(async e=>{var i,t,a,s;try{const n=await w.mutateAsync({api:null==(i=l)?void 0:i.deletePFSlab,data:{id:Number(e)}});(null==(t=null==n?void 0:n.data)?void 0:t.success)?(I.refetch(),r.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"PF Contribution Slab deleted successfully")):r.error((null==(s=n.data)?void 0:s.message)||"Failed to delete PF Contribution Slab")}catch(n){r.error(c(n))}})(String(e.id)),children:"Delete"})]})]},e.id)):t.jsx(h,{children:t.jsx(g,{colSpan:8,className:"text-center",children:"No PF Contribution Slabs found"})})})]})})})]}),(null==(o=null==I?void 0:I.data)?void 0:o.pagination)&&t.jsx(S,{page:R,setPage:q,limit:A,totalPages:(null==(N=null==(E=null==I?void 0:I.data)?void 0:E.pagination)?void 0:N.totalPages)||1})]})]})}function T(){return t.jsx(s,{title:"PF Contribution Slab",subTitle:"Manage PF Contribution Slabs",children:t.jsx("div",{className:"py-12",children:t.jsx(L,{})})})}export{T as default};
