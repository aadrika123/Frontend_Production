var t,e,s,i,a,n,r,o,h,u,l,c,d,p,f,y,v,b,m,g,w,R,O,C,k,M,S,W,E,x,U,F,q,Q,T=t=>{throw TypeError(t)},I=(t,e,s)=>e.has(t)||T("Cannot "+s),P=(t,e,s)=>(I(t,e,"read from private field"),s?s.call(t):e.get(t)),_=(t,e,s)=>e.has(t)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),D=(t,e,s,i)=>(I(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),L=(t,e,s)=>(I(t,e,"access private method"),s);import{ae as K,af as A,ag as j,ah as H,ai as B,aj as z,ak as G,al as J,am as N,an as V,ao as X,ap as Y,aq as Z,ar as $,as as tt,at as et,r as st,au as it,av as at,x as nt}from"./index-CaGgFSeq.js";var rt=(M=class extends K{constructor(v,b){super(),_(this,y),_(this,t),_(this,e),_(this,s),_(this,i),_(this,a),_(this,n),_(this,r),_(this,o),_(this,h),_(this,u),_(this,l),_(this,c),_(this,d),_(this,p),_(this,f,new Set),this.options=b,D(this,t,v),D(this,o,null),D(this,r,A()),this.bindMethods(),this.setOptions(b)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(P(this,e).addObserver(this),ot(P(this,e),this.options)?L(this,y,v).call(this):this.updateResult(),L(this,y,w).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ht(P(this,e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ht(P(this,e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,L(this,y,R).call(this),L(this,y,O).call(this),P(this,e).removeObserver(this)}setOptions(s){const i=this.options,a=P(this,e);if(this.options=P(this,t).defaultQueryOptions(s),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof j(this.options.enabled,P(this,e)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");L(this,y,C).call(this),P(this,e).setOptions(this.options),i._defaulted&&!H(this.options,i)&&P(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:P(this,e),observer:this});const n=this.hasListeners();n&&ut(P(this,e),a,this.options,i)&&L(this,y,v).call(this),this.updateResult(),!n||P(this,e)===a&&j(this.options.enabled,P(this,e))===j(i.enabled,P(this,e))&&B(this.options.staleTime,P(this,e))===B(i.staleTime,P(this,e))||L(this,y,b).call(this);const r=L(this,y,m).call(this);!n||P(this,e)===a&&j(this.options.enabled,P(this,e))===j(i.enabled,P(this,e))&&r===P(this,p)||L(this,y,g).call(this,r)}getOptimisticResult(s){const r=P(this,t).getQueryCache().build(P(this,t),s),o=this.createResult(r,s);return function(t,e){if(!H(t.getCurrentResult(),e))return!0;return!1}(this,o)&&(D(this,i,o),D(this,n,this.options),D(this,a,P(this,e).state)),o}getCurrentResult(){return P(this,i)}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),null==e||e(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==P(this,r).status||P(this,r).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,s))})}trackProp(t){P(this,f).add(t)}getCurrentQuery(){return P(this,e)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(e){const s=P(this,t).defaultQueryOptions(e),i=P(this,t).getQueryCache().build(P(this,t),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return L(this,y,v).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),P(this,i)))}createResult(t,c){var d;const p=P(this,e),f=this.options,y=P(this,i),v=P(this,a),b=P(this,n),m=t!==p?t.state:P(this,s),{state:g}=t;let w,R={...g},O=!1;if(c._optimisticResults){const e=this.hasListeners(),s=!e&&ot(t,c),i=e&&ut(t,p,c,f);(s||i)&&(R={...R,...Y(g.data,t.options)}),"isRestoring"===c._optimisticResults&&(R.fetchStatus="idle")}let{error:C,errorUpdatedAt:k,status:M}=R;w=R.data;let S=!1;if(void 0!==c.placeholderData&&void 0===w&&"pending"===M){let t;(null==y?void 0:y.isPlaceholderData)&&c.placeholderData===(null==b?void 0:b.placeholderData)?(t=y.data,S=!0):t="function"==typeof c.placeholderData?c.placeholderData(null==(d=P(this,l))?void 0:d.state.data,P(this,l)):c.placeholderData,void 0!==t&&(M="success",w=Z(null==y?void 0:y.data,t,c),O=!0)}if(c.select&&void 0!==w&&!S)if(y&&w===(null==v?void 0:v.data)&&c.select===P(this,h))w=P(this,u);else try{D(this,h,c.select),w=c.select(w),w=Z(null==y?void 0:y.data,w,c),D(this,u,w),D(this,o,null)}catch(Q){D(this,o,Q)}P(this,o)&&(C=P(this,o),w=P(this,u),k=Date.now(),M="error");const W="fetching"===R.fetchStatus,E="pending"===M,x="error"===M,U=E&&W,F=void 0!==w,q={status:M,fetchStatus:R.fetchStatus,isPending:E,isSuccess:"success"===M,isError:x,isInitialLoading:U,isLoading:U,data:w,dataUpdatedAt:R.dataUpdatedAt,error:C,errorUpdatedAt:k,failureCount:R.fetchFailureCount,failureReason:R.fetchFailureReason,errorUpdateCount:R.errorUpdateCount,isFetched:R.dataUpdateCount>0||R.errorUpdateCount>0,isFetchedAfterMount:R.dataUpdateCount>m.dataUpdateCount||R.errorUpdateCount>m.errorUpdateCount,isFetching:W,isRefetching:W&&!E,isLoadingError:x&&!F,isPaused:"paused"===R.fetchStatus,isPlaceholderData:O,isRefetchError:x&&F,isStale:lt(t,c),refetch:this.refetch,promise:P(this,r),isEnabled:!1!==j(c.enabled,t)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===q.status?t.reject(q.error):void 0!==q.data&&t.resolve(q.data)},s=()=>{const t=D(this,r,q.promise=A());e(t)},i=P(this,r);switch(i.status){case"pending":t.queryHash===p.queryHash&&e(i);break;case"fulfilled":"error"!==q.status&&q.data===i.value||s();break;case"rejected":"error"===q.status&&q.error===i.reason||s()}}return q}updateResult(){const t=P(this,i),s=this.createResult(P(this,e),this.options);if(D(this,a,P(this,e).state),D(this,n,this.options),void 0!==P(this,a).data&&D(this,l,P(this,e)),H(s,t))return;D(this,i,s);L(this,y,k).call(this,{listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!P(this,f).size)return!0;const a=new Set(s??P(this,f));return this.options.throwOnError&&a.add("error"),Object.keys(P(this,i)).some(e=>{const s=e;return P(this,i)[s]!==t[s]&&a.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&L(this,y,w).call(this)}},t=new WeakMap,e=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,y=new WeakSet,v=function(t){L(this,y,C).call(this);let s=P(this,e).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(s=s.catch(z)),s},b=function(){L(this,y,R).call(this);const t=B(this.options.staleTime,P(this,e));if(G||P(this,i).isStale||!J(t))return;const s=N(P(this,i).dataUpdatedAt,t)+1;D(this,c,V.setTimeout(()=>{P(this,i).isStale||this.updateResult()},s))},m=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(P(this,e)):this.options.refetchInterval)??!1},g=function(t){L(this,y,O).call(this),D(this,p,t),!G&&!1!==j(this.options.enabled,P(this,e))&&J(P(this,p))&&0!==P(this,p)&&D(this,d,V.setInterval(()=>{(this.options.refetchIntervalInBackground||X.isFocused())&&L(this,y,v).call(this)},P(this,p)))},w=function(){L(this,y,b).call(this),L(this,y,g).call(this,L(this,y,m).call(this))},R=function(){P(this,c)&&(V.clearTimeout(P(this,c)),D(this,c,void 0))},O=function(){P(this,d)&&(V.clearInterval(P(this,d)),D(this,d,void 0))},C=function(){const i=P(this,t).getQueryCache().build(P(this,t),this.options);if(i===P(this,e))return;const a=P(this,e);D(this,e,i),D(this,s,i.state),this.hasListeners()&&(null==a||a.removeObserver(this),i.addObserver(this))},k=function(s){$.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(P(this,i))}),P(this,t).getQueryCache().notify({query:P(this,e),type:"observerResultsUpdated"})})},M);function ot(t,e){return function(t,e){return!1!==j(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&ht(t,e,e.refetchOnMount)}function ht(t,e,s){if(!1!==j(e.enabled,t)&&"static"!==B(e.staleTime,t)){const i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&lt(t,e)}return!1}function ut(t,e,s,i){return(t!==e||!1===j(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&lt(t,s)}function lt(t,e){return!1!==j(e.enabled,t)&&t.isStaleByTime(B(e.staleTime,t))}var ct=(Q=class extends K{constructor(t,e){super(),_(this,U),_(this,S),_(this,W),_(this,E),_(this,x),D(this,S,t),this.setOptions(e),this.bindMethods(),L(this,U,F).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=P(this,S).defaultMutationOptions(t),H(this.options,s)||P(this,S).getMutationCache().notify({type:"observerOptionsUpdated",mutation:P(this,E),observer:this}),(null==s?void 0:s.mutationKey)&&this.options.mutationKey&&tt(s.mutationKey)!==tt(this.options.mutationKey)?this.reset():"pending"===(null==(e=P(this,E))?void 0:e.state.status)&&P(this,E).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||null==(t=P(this,E))||t.removeObserver(this)}onMutationUpdate(t){L(this,U,F).call(this),L(this,U,q).call(this,t)}getCurrentResult(){return P(this,W)}reset(){var t;null==(t=P(this,E))||t.removeObserver(this),D(this,E,void 0),L(this,U,F).call(this),L(this,U,q).call(this)}mutate(t,e){var s;return D(this,x,e),null==(s=P(this,E))||s.removeObserver(this),D(this,E,P(this,S).getMutationCache().build(P(this,S),this.options)),P(this,E).addObserver(this),P(this,E).execute(t)}},S=new WeakMap,W=new WeakMap,E=new WeakMap,x=new WeakMap,U=new WeakSet,F=function(){var t;const e=(null==(t=P(this,E))?void 0:t.state)??et();D(this,W,{...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},q=function(t){$.batch(()=>{var e,s,i,a,n,r,o,h;if(P(this,x)&&this.hasListeners()){const u=P(this,W).variables,l=P(this,W).context,c={client:P(this,S),meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===(null==t?void 0:t.type)?(null==(s=(e=P(this,x)).onSuccess)||s.call(e,t.data,u,l,c),null==(a=(i=P(this,x)).onSettled)||a.call(i,t.data,null,u,l,c)):"error"===(null==t?void 0:t.type)&&(null==(r=(n=P(this,x)).onError)||r.call(n,t.error,u,l,c),null==(h=(o=P(this,x)).onSettled)||h.call(o,void 0,t.error,u,l,c))}this.listeners.forEach(t=>{t(P(this,W))})})},Q),dt=st.createContext(!1);dt.Provider;var pt=st.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),ft=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function yt(t,e,s){var i,a,n,r,o;const h=st.useContext(dt),u=st.useContext(pt),l=at(),c=l.defaultQueryOptions(t);null==(a=null==(i=l.getDefaultOptions().queries)?void 0:i._experimental_beforeQuery)||a.call(i,c),c._optimisticResults=h?"isRestoring":"optimistic",(t=>{if(t.suspense){const e=1e3,s=t=>"static"===t?t:Math.max(t??e,e),i=t.staleTime;t.staleTime="function"==typeof i?(...t)=>s(i(...t)):s(i),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,e))}})(c),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(c,u),(t=>{st.useEffect(()=>{t.clearReset()},[t])})(u);const d=!l.getQueryCache().get(c.queryHash),[p]=st.useState(()=>new e(l,c)),f=p.getOptimisticResult(c),y=!h&&!1!==t.subscribed;if(st.useSyncExternalStore(st.useCallback(t=>{const e=y?p.subscribe($.batchCalls(t)):z;return p.updateResult(),e},[p,y]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),st.useEffect(()=>{p.setOptions(c)},[c,p]),((t,e)=>(null==t?void 0:t.suspense)&&e.isPending)(c,f))throw ft(c,p,u);if((({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(a&&void 0===t.data||it(s,[t.error,i])))({result:f,errorResetBoundary:u,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if(null==(r=null==(n=l.getDefaultOptions().queries)?void 0:n._experimental_afterQuery)||r.call(n,c,f),c.experimental_prefetchInRender&&!G&&((t,e)=>t.isLoading&&t.isFetching&&!e)(f,h)){const t=d?ft(c,p,u):null==(o=l.getQueryCache().get(c.queryHash))?void 0:o.promise;null==t||t.catch(z).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?f:p.trackResult(f)}function vt(t,e){return yt(t,rt)}function bt(t,e){const s=at(),[i]=st.useState(()=>new ct(s,t));st.useEffect(()=>{i.setOptions(t)},[i,t]);const a=st.useSyncExternalStore(st.useCallback(t=>i.subscribe($.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=st.useCallback((t,e)=>{i.mutate(t,e).catch(z)},[i]);if(a.error&&it(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:n,mutateAsync:a.mutate}}function mt({key:t,api:e,options:s,value:i,config:a}){const n=vt({queryKey:[t??e,...i??[]],queryFn:async()=>(async(t,e)=>(await nt.get(t,{...e})).data)(e,a),refetchOnReconnect:"always",refetchOnWindowFocus:!1,...s});return n}function gt({key:t,api:e,options:s,value:i,config:a}){return vt({queryKey:[t??e,...i??[]],queryFn:async()=>(await nt.post(e,{...a})).data,refetchOnReconnect:"always",refetchOnWindowFocus:!1,...s})}const wt=({options:t})=>bt({mutationFn:({api:t,data:e})=>((t,e)=>nt.post(t,e))(t,e),...t}),Rt=({options:t})=>bt({mutationFn:({api:t,data:e})=>nt.post(t,e,{headers:{"Content-Type":"multipart/form-data"}}),...t});export{gt as a,mt as b,Rt as c,wt as u};
