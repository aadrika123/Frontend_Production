import{k as e,w as s,r as a,A as n,j as t,e as l,B as i,z as r,x as d}from"./index-pqP14EhS.js";import{u as c,b as o}from"./useCustomQuery-CzEWxvyG.js";import{C as m,a as x,d as u,b as p,c as h}from"./card-Bs59ZPbY.js";import{I as j}from"./input-BT6hWnw8.js";import{L as f}from"./label-xKekv9dA.js";import{B as v}from"./badge-DeVTySeZ.js";import{A as g,b as N,a as y}from"./alert-5yvvhmHd.js";import{S as b,a as _,b as S,c as w,d as P}from"./select-B4keucJT.js";import{T as C,a as D,b as I,c as E,d as T,e as A}from"./table-CRgXbpGI.js";import{A as R,a as F,b as k,c as L,d as U,e as $,f as H,g as O}from"./alert-dialog-CLwWwn7V.js";import{A as V,a as q,b as Y,c as z}from"./accordion-B3JsWZQn.js";import{T as M,a as G,b as B,c as J}from"./tabs-BXBC0wvu.js";import{T as W}from"./textarea-Yhd8dF4-.js";import{S as Z}from"./Spinner-CJE7r9W9.js";import{C as K}from"./circle-alert-B7J-58O5.js";import{C as Q}from"./clock-Dx15zlBS.js";import{C as X}from"./circle-x-6Y3mmM73.js";import{R as ee}from"./refresh-cw-BHVB2cpM.js";import{F as se}from"./file-text-BmD6UWpP.js";import{C as ae}from"./circle-check-big-BiAG3xNy.js";import{T as ne}from"./triangle-alert-kqwlgW1C.js";import{C as te}from"./calendar-By15l6FD.js";import{T as le}from"./trending-up-B0iqmj9H.js";import{F as ie}from"./file-check-B4TFGHLB.js";import{I as re}from"./indian-rupee-pvC2ddh-.js";import{E as de,P as ce}from"./index-DZYVnpiZ.js";import{T as oe}from"./trash-2-DbSJu2aJ.js";import"./check-BQY2iuAn.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),xe=e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ue=e=>e?`₹${e.toLocaleString("en-IN")}`:"₹0",pe=e=>{const s={pending:{variant:"secondary",icon:t.jsx(Q,{className:"mr-1 h-3 w-3"}),label:"Pending Review"},approved:{variant:"default",icon:t.jsx(ae,{className:"mr-1 h-3 w-3"}),label:"Approved"},rejected:{variant:"destructive",icon:t.jsx(X,{className:"mr-1 h-3 w-3"}),label:"Rejected"},needs_clarification:{variant:"outline",icon:t.jsx(me,{className:"mr-1 h-3 w-3"}),label:"Needs Clarification"}},{variant:a,icon:n,label:l}=s[e]||s.pending;return t.jsxs(v,{variant:a,className:"flex items-center",children:[n," ",l]})},he=e=>{const{variant:s,label:a}={VERIFIED:{variant:"default",label:"Verified"},UPLOADED:{variant:"secondary",label:"Uploaded"},INCOMPLETE:{variant:"destructive",label:"Incomplete"}}[e]||{variant:"outline",label:e};return t.jsx(v,{variant:s,children:a})},je=[{code:"80C",name:"Section 80C",description:"PPF, LIC, ELSS, etc.",limit:15e4},{code:"80CCD",name:"Section 80CCD(1B)",description:"NPS Additional",limit:5e4},{code:"80D",name:"Section 80D",description:"Health Insurance",limit:1e5},{code:"80E",name:"Section 80E",description:"Education Loan Interest",limit:null},{code:"80G",name:"Section 80G",description:"Donations",limit:null},{code:"SEC_24",name:"Section 24",description:"Home Loan Interest",limit:2e5},{code:"HRA",name:"HRA Exemption",description:"Rent Receipts",limit:null},{code:"80TTA",name:"Section 80TTA",description:"Savings Interest",limit:1e4}],fe={"80C":[{code:"PPF",name:"Public Provident Fund (PPF)"},{code:"EPF",name:"Employee Provident Fund (EPF)"},{code:"ELSS",name:"ELSS Mutual Funds"},{code:"LIC",name:"Life Insurance Premium (LIC)"},{code:"NSC",name:"National Savings Certificate (NSC)"},{code:"TUITION",name:"Children Tuition Fees"},{code:"HOME_LOAN_PRINCIPAL",name:"Home Loan Principal"},{code:"SSY",name:"Sukanya Samriddhi Yojana"},{code:"TAX_SAVER_FD",name:"5 Year Tax Saver FD"},{code:"ULIP",name:"ULIP"},{code:"OTHER",name:"Other 80C Investments"}],"80CCD":[{code:"NPS_SELF",name:"NPS Self Contribution"}],"80D":[{code:"HEALTH_SELF",name:"Health Insurance - Self & Family"},{code:"HEALTH_PARENTS",name:"Health Insurance - Parents"},{code:"PREVENTIVE",name:"Preventive Health Check-up"}],"80E":[{code:"EDU_LOAN",name:"Education Loan Interest"}],"80G":[{code:"DONATION_100",name:"Donation (100% Deduction)"},{code:"DONATION_50",name:"Donation (50% Deduction)"}],SEC_24:[{code:"HOME_LOAN_INTEREST",name:"Home Loan Interest"}],HRA:[{code:"RENT_RECEIPT",name:"Rent Receipt"}],"80TTA":[{code:"SAVINGS_INTEREST",name:"Savings Account Interest"}]};
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function ve(){var e,ce,ve,ge,Ne,ye,be,_e,Se,we,Pe,Ce,De,Ie,Ee;const{user:Te}=s(),Ae=c({}),Re=a.useRef(null),Fe=a.useRef(null),[ke]=a.useState((()=>{const e=new Date,s=e.getFullYear();return e.getMonth()+1>=4?`${s}-${(s+1).toString().slice(-2)}`:`${s-1}-${s.toString().slice(-2)}`})()),[Le,Ue]=a.useState(!1),[$e,He]=a.useState(!1),[Oe,Ve]=a.useState(null),[qe,Ye]=a.useState("dashboard"),[ze,Me]=a.useState(""),[Ge,Be]=a.useState(""),[Je,We]=a.useState(""),[Ze,Ke]=a.useState(""),[Qe,Xe]=a.useState(null),[es,ss]=a.useState(!1),[as,ns]=a.useState(""),[ts,ls]=a.useState(null),[is,rs]=a.useState(!1),[ds,cs]=a.useState(null),[os,ms]=a.useState(!1),xs=o({api:`${n.getTaxDeclaration}/me?financial_year=${ke}`,key:"getMyTaxDeclaration",value:[ke],options:{enabled:!!Te}}),us=null==(e=xs.data)?void 0:e.data,ps=o({api:`${n.getProofCompletionStatus}?financial_year=${ke}`,key:"getProofCompletionStatus",value:[ke],options:{enabled:!!Te&&!!(null==us?void 0:us.id)}}),hs=null==(ce=ps.data)?void 0:ce.data,js=o({api:(null==us?void 0:us.id)?`${n.getRequiredProofs}/${us.id}`:"",key:"getRequiredProofs",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),fs=null==(ve=js.data)?void 0:ve.data,vs=o({api:(null==us?void 0:us.id)?`${n.getProofSectionSummary}/${us.id}`:"",key:"getProofSectionSummary",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),gs=null==(ge=vs.data)?void 0:ge.data,Ns=o({api:(null==us?void 0:us.id)?`${n.getInvestmentProofs}/${us.id}`:"",key:"getMyProofs",value:[null==us?void 0:us.id],options:{enabled:!!(null==us?void 0:us.id)}}),ys=(null==(ye=null==(Ne=Ns.data)?void 0:Ne.data)?void 0:ye.proofs)||[],bs=us&&["approved","partially_verified","verified"].includes(us.verification_status)&&!us.declaration_locked,_s=()=>{Me(""),Be(""),We(""),Ke(""),Xe(null),Re.current&&(Re.current.value="")},Ss=()=>{He(!1),ns(""),ls(null),Ve(null),Fe.current&&(Fe.current.value="")},ws=()=>{Ns.refetch(),ps.refetch(),js.refetch(),vs.refetch()};return xs.isLoading?t.jsx("div",{className:"flex h-64 items-center justify-center",children:t.jsx(Z,{})}):xs.isError?t.jsxs(g,{variant:"destructive",children:[t.jsx(K,{className:"h-4 w-4"}),t.jsx(N,{children:"Error Loading Declaration"}),t.jsxs(y,{children:["Failed to load your tax declaration. Please try again later.",t.jsx("br",{}),t.jsx("span",{className:"text-xs opacity-70",children:l(xs.error)})]})]}):us?"pending"===us.verification_status?t.jsxs(g,{children:[t.jsx(Q,{className:"h-4 w-4"}),t.jsx(N,{children:"Declaration Pending Approval"}),t.jsx(y,{children:"Your tax declaration is pending HR approval. You can upload investment proofs once it's approved."})]}):"rejected"===us.verification_status?t.jsxs(g,{variant:"destructive",children:[t.jsx(X,{className:"h-4 w-4"}),t.jsx(N,{children:"Declaration Rejected"}),t.jsx(y,{children:"Your tax declaration was rejected. Please update and resubmit your declaration."})]}):t.jsxs("main",{className:"space-y-6",children:[t.jsx(R,{open:Le,onOpenChange:Ue,children:t.jsxs(F,{className:"max-w-lg",children:[t.jsxs(k,{children:[t.jsx(L,{children:"Upload Investment Proof"}),t.jsx(U,{children:"Upload proof document for your investment declaration."})]}),t.jsxs("div",{className:"max-h-[60vh] space-y-4 overflow-y-auto",children:[t.jsxs("div",{children:[t.jsx(f,{children:"Investment Section *"}),t.jsxs(b,{value:ze,onValueChange:e=>{Me(e),Be("")},children:[t.jsx(_,{children:t.jsx(S,{placeholder:"Select section"})}),t.jsx(w,{children:je.map(e=>t.jsxs(P,{value:e.code,children:[e.name," - ",e.description]},e.code))})]})]}),ze&&t.jsxs("div",{children:[t.jsx(f,{children:"Investment Type *"}),t.jsxs(b,{value:Ge,onValueChange:Be,children:[t.jsx(_,{children:t.jsx(S,{placeholder:"Select type"})}),t.jsx(w,{children:(fe[ze]||[]).map(e=>t.jsx(P,{value:e.code,children:e.name},e.code))})]})]}),t.jsxs("div",{children:[t.jsx(f,{children:"Declared Amount (₹) *"}),t.jsx(j,{type:"number",value:Je,onChange:e=>We(e.target.value),placeholder:"Enter amount",min:1})]}),t.jsxs("div",{children:[t.jsx(f,{children:"Description (Optional)"}),t.jsx(W,{value:Ze,onChange:e=>Ke(e.target.value),placeholder:"e.g., Policy number, FD number, etc."})]}),t.jsxs("div",{children:[t.jsx(f,{children:"Upload Document (PDF/Image) *"}),t.jsx(j,{ref:Re,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type))return void r.error("Invalid file type. Allowed: PDF, JPEG, PNG");if(a.size>5242880)return void r.error("File size should be less than 5MB");Xe(a)}},className:"mt-1"}),Qe&&t.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["Selected: ",Qe.name]})]})]}),t.jsxs($,{children:[t.jsx(H,{onClick:_s,children:"Cancel"}),t.jsx(O,{onClick:async()=>{var e,s;if(ze&&Ge&&Je&&Qe&&us){ss(!0);try{const a=new FormData;a.append("document",Qe),a.append("declaration_id",String(us.id)),a.append("financial_year",ke),a.append("section_code",ze),a.append("investment_type",Ge),a.append("investment_description",Ze),a.append("declared_amount",Je),a.append("ulb_id",String((null==Te?void 0:Te.ulbId)||""));const t=await d.post(n.uploadInvestmentProof,a,{headers:{"Content-Type":"multipart/form-data"}});(null==(e=t.data)?void 0:e.success)?(r.success("Investment proof uploaded successfully"),ws(),Ue(!1),_s()):r.error((null==(s=t.data)?void 0:s.message)||"Failed to upload proof")}catch(a){r.error(l(a))}finally{ss(!1)}}else r.error("Please fill all required fields")},disabled:es,children:es?"Uploading...":"Upload Proof"})]})]})}),t.jsx(R,{open:$e,onOpenChange:e=>!e&&Ss(),children:t.jsxs(F,{children:[t.jsxs(k,{children:[t.jsx(L,{children:"Respond to Clarification Request"}),t.jsxs(U,{children:[t.jsx("strong",{children:"HR's Request:"})," ",null==Oe?void 0:Oe.clarification_request]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(f,{children:"Your Response *"}),t.jsx(W,{value:as,onChange:e=>ns(e.target.value),placeholder:"Enter your response to the clarification request...",rows:4})]}),t.jsxs("div",{children:[t.jsx(f,{children:"Upload New Document (Optional)"}),t.jsx(j,{ref:Fe,type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type))return void r.error("Invalid file type. Allowed: PDF, JPEG, PNG");if(a.size>5242880)return void r.error("File size should be less than 5MB");ls(a)}},className:"mt-1"}),ts&&t.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["New document: ",ts.name]}),t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"You can optionally upload a replacement document along with your response."})]})]}),t.jsxs($,{children:[t.jsx(H,{children:"Cancel"}),t.jsx(O,{onClick:async()=>{var e,s,a,t;if(Oe&&as.trim())try{if(ts){const a=new FormData;a.append("document",ts),a.append("employee_response",as);const t=await d.put(`${n.respondWithFile}/${Oe.id}/respond-with-file`,a,{headers:{"Content-Type":"multipart/form-data"}});(null==(e=t.data)?void 0:e.success)?(r.success("Response with document submitted successfully"),ws(),Ss()):r.error((null==(s=t.data)?void 0:s.message)||"Failed to submit response")}else{const e=await Ae.mutateAsync({api:`${n.respondToClarification}/${Oe.id}/respond`,data:{employee_response:as}});(null==(a=null==e?void 0:e.data)?void 0:a.success)?(r.success("Response submitted successfully"),ws(),Ss()):r.error((null==(t=null==e?void 0:e.data)?void 0:t.message)||"Failed to submit response")}}catch(i){r.error(l(i))}else r.error("Please enter a response")},disabled:!as.trim(),children:"Submit Response"})]})]})}),t.jsx(R,{open:is,onOpenChange:rs,children:t.jsxs(F,{children:[t.jsxs(k,{children:[t.jsx(L,{children:"Delete Investment Proof"}),t.jsx(U,{children:"Are you sure you want to delete this proof? This action cannot be undone."})]}),t.jsxs($,{children:[t.jsx(H,{disabled:os,onClick:()=>{rs(!1),cs(null)},children:"Cancel"}),t.jsx(O,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:os,onClick:()=>ds&&(async e=>{var s,a;ms(!0);try{const t=await d.delete(`${n.deleteInvestmentProof}/${e}`);(null==(s=t.data)?void 0:s.success)?(r.success("Proof deleted successfully"),rs(!1),cs(null),await ws()):r.error((null==(a=t.data)?void 0:a.message)||"Failed to delete proof")}catch(t){r.error(l(t))}finally{ms(!1)}})(ds),children:os?"Deleting...":"Delete"})]})]})}),t.jsxs(m,{children:[t.jsx(x,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(u,{children:["Investment Proofs - FY ",ke]}),t.jsx(p,{children:"Upload and track proofs for your declared investments"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(v,{variant:"verified"===us.verification_status?"default":"outline",children:["approved"===us.verification_status&&"Declaration Approved","partially_verified"===us.verification_status&&"Partially Verified","verified"===us.verification_status&&"Fully Verified"]}),t.jsx(i,{variant:"outline",size:"icon",onClick:ws,children:t.jsx(ee,{className:"h-4 w-4"})})]})]})}),t.jsxs(h,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Declared Deductions:"," ",t.jsx("strong",{children:ue(us.grand_total_deductions)})]}),bs&&t.jsxs(i,{onClick:()=>Ue(!0),children:[t.jsx(xe,{className:"mr-2 h-4 w-4"}),"Upload Proof"]})]}),us.declaration_locked&&t.jsxs(g,{className:"mt-4",children:[t.jsx(K,{className:"h-4 w-4"}),t.jsx(y,{children:"Declaration is locked. You cannot upload new proofs."})]})]})]}),t.jsxs(M,{value:qe,onValueChange:Ye,children:[t.jsxs(G,{className:"grid w-full grid-cols-4",children:[t.jsx(B,{value:"dashboard",children:"Dashboard"}),t.jsx(B,{value:"required",children:"Required Proofs"}),t.jsx(B,{value:"sections",children:"Section Summary"}),t.jsxs(B,{value:"uploaded",children:["Uploaded (",ys.length,")"]})]}),t.jsx(J,{value:"dashboard",className:"space-y-4",children:ps.isLoading?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(Z,{})}):hs?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs(m,{children:[t.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Total Proofs"}),t.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(h,{children:t.jsx("div",{className:"text-2xl font-bold",children:(null==(be=hs.proof_stats)?void 0:be.total_proofs)||0})})]}),t.jsxs(m,{children:[t.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Approved"}),t.jsx(ae,{className:"h-4 w-4 text-green-500"})]}),t.jsx(h,{children:t.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==(_e=hs.proof_stats)?void 0:_e.approved)||0})})]}),t.jsxs(m,{children:[t.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Pending"}),t.jsx(Q,{className:"h-4 w-4 text-yellow-500"})]}),t.jsx(h,{children:t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(null==(Se=hs.proof_stats)?void 0:Se.pending)||0})})]}),t.jsxs(m,{children:[t.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(u,{className:"text-sm font-medium",children:"Action Required"}),t.jsx(ne,{className:"h-4 w-4 text-red-500"})]}),t.jsx(h,{children:t.jsx("div",{className:"text-2xl font-bold text-red-600",children:((null==(we=hs.proof_stats)?void 0:we.rejected)||0)+((null==(Pe=hs.proof_stats)?void 0:Pe.needs_clarification)||0)})})]})]}),t.jsxs(m,{children:[t.jsx(x,{children:t.jsx(u,{className:"text-lg",children:"Approval Progress"})}),t.jsxs(h,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{children:"Amount Approved"}),t.jsxs("span",{children:[ue(null==(Ce=hs.amounts)?void 0:Ce.total_approved)," ","/"," ",ue(null==(De=hs.amounts)?void 0:De.total_declared)]})]}),t.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:t.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(null==(Ie=hs.amounts)?void 0:Ie.approval_percentage)||0}%`}})}),t.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[(null==(Ee=hs.amounts)?void 0:Ee.approval_percentage)||0,"% approved"]})]})]}),hs.deadline&&t.jsxs(g,{variant:hs.deadline.passed?"destructive":(hs.deadline.days_remaining,"default"),children:[t.jsx(te,{className:"h-4 w-4"}),t.jsx(N,{children:"Submission Deadline"}),t.jsx(y,{children:hs.deadline.passed?"Deadline has passed. Contact HR for assistance.":`${hs.deadline.days_remaining} days remaining until ${hs.deadline.date}`})]}),hs.action_items&&hs.action_items.length>0&&t.jsxs(m,{children:[t.jsx(x,{children:t.jsx(u,{className:"text-lg",children:"Action Items"})}),t.jsx(h,{children:t.jsx("div",{className:"space-y-2",children:hs.action_items.map((e,s)=>t.jsxs(g,{variant:"high"===e.priority?"destructive":"default",children:[t.jsx(ne,{className:"h-4 w-4"}),t.jsx(y,{children:e.message})]},s))})})]})]}):t.jsx(m,{children:t.jsx(h,{className:"py-8 text-center text-muted-foreground",children:"No completion status available"})})}),t.jsx(J,{value:"required",className:"space-y-4",children:js.isLoading?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(Z,{})}):fs?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:t.jsx(le,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Completion"}),t.jsxs("p",{className:"text-2xl font-bold",children:[fs.summary.completion_percentage,"%"]})]})]})}),t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx("div",{className:"rounded-full bg-green-100 p-3",children:t.jsx(ie,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploaded"}),t.jsxs("p",{className:"text-2xl font-bold",children:[fs.summary.uploaded," /"," ",fs.summary.total_required]})]})]})}),t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx("div",{className:"rounded-full bg-yellow-100 p-3",children:t.jsx(Q,{className:"h-6 w-6 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Upload"}),t.jsx("p",{className:"text-2xl font-bold",children:fs.summary.pending})]})]})})]}),t.jsxs(m,{children:[t.jsxs(x,{children:[t.jsx(u,{children:"Required Proofs Based on Declaration"}),t.jsx(p,{children:"Upload proofs for all investments you declared"})]}),t.jsx(h,{children:t.jsxs(C,{children:[t.jsx(D,{children:t.jsxs(I,{children:[t.jsx(E,{children:"Section"}),t.jsx(E,{children:"Investment"}),t.jsx(E,{children:"Declared"}),t.jsx(E,{children:"Uploaded"}),t.jsx(E,{children:"Gap"}),t.jsx(E,{children:"Status"}),t.jsx(E,{children:"Action"})]})}),t.jsx(T,{children:fs.required_proofs.map((e,s)=>t.jsxs(I,{children:[t.jsx(A,{children:t.jsx(v,{variant:"outline",children:e.section_code})}),t.jsx(A,{className:"font-medium",children:e.investment_name}),t.jsx(A,{children:ue(e.declared_amount)}),t.jsx(A,{children:ue(e.uploaded_amount)}),t.jsx(A,{children:e.pending_amount>0?t.jsx("span",{className:"text-red-600",children:ue(e.pending_amount)}):t.jsx("span",{className:"text-green-600",children:"-"})}),t.jsx(A,{children:t.jsx(v,{variant:"UPLOADED"===e.status?"default":"secondary",children:e.status})}),t.jsx(A,{children:"PENDING"===e.status&&bs&&t.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{Me(e.section_code),Be(e.investment_type),Ue(!0)},children:[t.jsx(xe,{className:"mr-1 h-3 w-3"}),"Upload"]})})]},s))})]})})]})]}):t.jsx(m,{children:t.jsx(h,{className:"py-8 text-center text-muted-foreground",children:"No required proofs data available"})})}),t.jsx(J,{value:"sections",className:"space-y-4",children:vs.isLoading?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(Z,{})}):gs?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx(re,{className:"h-8 w-8 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Declared"}),t.jsx("p",{className:"text-xl font-bold",children:ue(gs.totals.declared)})]})]})}),t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx(xe,{className:"h-8 w-8 text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Uploaded"}),t.jsx("p",{className:"text-xl font-bold",children:ue(gs.totals.uploaded)})]})]})}),t.jsx(m,{children:t.jsxs(h,{className:"flex items-center gap-4 pt-6",children:[t.jsx(ae,{className:"h-8 w-8 text-green-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Approved"}),t.jsx("p",{className:"text-xl font-bold",children:ue(gs.totals.approved)})]})]})})]}),t.jsx(V,{type:"multiple",defaultValue:gs.sections.map(e=>e.code),children:gs.sections.map(e=>t.jsxs(q,{value:e.code,className:"mb-2 rounded-lg border bg-card",children:[t.jsx(Y,{className:"px-4 hover:no-underline",children:t.jsxs("div",{className:"flex w-full items-center justify-between pr-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(v,{variant:"outline",children:e.code}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-semibold",children:e.name}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[he(e.status),t.jsxs("div",{className:"text-right text-sm",children:[t.jsx("div",{children:ue(e.amounts.approved)}),t.jsxs("div",{className:"text-muted-foreground",children:["of ",ue(e.declared)]})]})]})]})}),t.jsxs(z,{className:"px-4 pb-4",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[t.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Declared"}),t.jsx("p",{className:"text-lg font-semibold",children:ue(e.declared)})]}),t.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploaded"}),t.jsx("p",{className:"text-lg font-semibold",children:ue(e.amounts.uploaded)})]}),t.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:ue(e.amounts.approved)})]}),t.jsxs("div",{className:"rounded-lg bg-muted p-3",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Gap"}),t.jsx("p",{className:"text-lg font-semibold "+(e.amounts.gap>0?"text-red-600":"text-green-600"),children:ue(e.amounts.gap)})]})]}),t.jsx("div",{className:"mt-4 flex gap-4 text-sm text-muted-foreground",children:t.jsxs("span",{children:["Proofs: ",e.proofs.count," | Pending:"," ",e.proofs.pending," | Approved:"," ",e.proofs.approved," | Rejected:"," ",e.proofs.rejected]})})]})]},e.code))})]}):t.jsx(m,{children:t.jsx(h,{className:"py-8 text-center text-muted-foreground",children:"No section summary available"})})}),t.jsx(J,{value:"uploaded",children:t.jsxs(m,{children:[t.jsx(x,{children:t.jsxs(u,{children:["Uploaded Proofs (",ys.length,")"]})}),t.jsx(h,{children:Ns.isLoading?t.jsx("div",{className:"flex justify-center p-4",children:t.jsx(Z,{})}):0===ys.length?t.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[t.jsx(se,{className:"mx-auto mb-2 h-12 w-12 opacity-50"}),t.jsx("p",{children:"No investment proofs uploaded yet."}),bs&&t.jsx(i,{variant:"outline",className:"mt-4",onClick:()=>Ue(!0),children:"Upload Your First Proof"})]}):t.jsxs(C,{children:[t.jsx(D,{children:t.jsxs(I,{children:[t.jsx(E,{children:"#"}),t.jsx(E,{children:"Section"}),t.jsx(E,{children:"Investment Type"}),t.jsx(E,{children:"Declared"}),t.jsx(E,{children:"Verified"}),t.jsx(E,{children:"Document"}),t.jsx(E,{children:"Status"}),t.jsx(E,{children:"Actions"})]})}),t.jsx(T,{children:ys.map((e,s)=>t.jsxs(I,{children:[t.jsx(A,{children:s+1}),t.jsx(A,{className:"font-medium",children:e.section_code}),t.jsx(A,{children:e.investment_type}),t.jsx(A,{children:ue(e.declared_amount)}),t.jsx(A,{children:null!==e.verified_amount?ue(e.verified_amount):"-"}),t.jsx(A,{children:e.document_url?t.jsx(i,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx("a",{href:e.document_url,target:"_blank",rel:"noreferrer",title:"View Document",children:t.jsx(de,{className:"h-4 w-4"})})}):"-"}),t.jsx(A,{children:t.jsxs("div",{className:"space-y-1",children:[pe(e.verification_status),e.rejection_reason&&t.jsxs("p",{className:"text-xs text-destructive",children:["Reason: ",e.rejection_reason]})]})}),t.jsx(A,{children:t.jsxs("div",{className:"flex gap-1",children:["needs_clarification"===e.verification_status&&t.jsx(i,{variant:"outline",size:"icon",title:"Respond to Clarification",onClick:()=>{Ve(e),He(!0)},children:t.jsx(me,{className:"h-4 w-4 text-orange-500"})}),"pending"===e.verification_status&&!us.declaration_locked&&t.jsx(i,{variant:"outline",size:"icon",title:"Delete Proof",onClick:()=>{return s=e.id,cs(s),void rs(!0);var s},children:t.jsx(oe,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})})]})})]})]}):t.jsxs(g,{variant:"destructive",children:[t.jsx(K,{className:"h-4 w-4"}),t.jsx(N,{children:"No Tax Declaration Found"}),t.jsx(y,{children:"Please submit your tax declaration first before uploading investment proofs."})]})}function ge(){return t.jsx(ce,{title:"Investment Proofs",subTitle:"Upload proofs for your declared investments",children:t.jsx("div",{className:"py-6",children:t.jsx(ve,{})})})}export{ge as default};
