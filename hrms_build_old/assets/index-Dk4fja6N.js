import{r as A,p as ss,j as e,h as O,_ as S,q as Y,s as xe,B as D,e as Ne}from"./index-BdkJQCNA.js";import{g as as,d as ts,b as ls,e as rs,c as ns,f as is,h as ds,i as cs,j as os,P as ms}from"./index-Bvk2Vi_h.js";import{c as pe,f as ce,b as g,g as We,a as he,o as ue,F as ge,R as y,B as ne,h as xs,e as ye,i as Le,S as ps,j as hs,k as us,l as gs,m as bs}from"./label-AYT56UjD.js";import"./input-BPgDixJD.js";import{R as I,H as He,M as L,C as B,a as js,u as fs,D as ve,b as we,P as _e,c as Se,d as Ae,e as Ee,f as Pe,g as Ce,h as Fe,F as Ns,i as ys,E as vs,T as Xe,j as Qe,k as ze,l as Ye,W as ws,U as _s}from"./usePdfValidator-DKSIuA6o.js";import{u as G,c as Ss,b as ie,a as As}from"./useCustomQuery-DvrlGAEW.js";import{U as H,B as De,H as de,a as Ze,P as je,M as Ie,R as Es,S as be}from"./RHFUploadFiled-Bf3hPn8r.js";import{C as ee}from"./calendar-CY1IPg8R.js";import{U as ae}from"./users-wOMFJIu5.js";import{C as Ps,H as Ge,F as le,a as me}from"./house-BtGggfJF.js";import{S as ke,d as Be,C as re,c as oe,h as fe,a as Cs,e as Fs}from"./Spinner-DWAshiSr.js";import{E as ks}from"./eye-BkPQF_DF.js";import{D as Je}from"./dollar-sign-CZ4iwatj.js";const Ms=pe().shape({emp_type_id:ce().integer().required().label("Employee Type"),emp_code:g().max(50).required().label("Employee Code"),emp_name:g().max(100).required().label("Employee Name"),gender:g().oneOf(["male","female","other"]).optional().label("Gender"),dob:We().optional().label("Date of Birth"),marital_status:g().oneOf(["single","married","divorced","widowed"]).optional().label("Marital Status"),religion:g().max(50).optional().label("Religion"),emp_blood_group:g().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).optional().label("Blood Group"),emp_health_status:g().max(50).optional().label("Health Status").required(),contact_no:g().max(10).optional().label("Contact Number"),emergency_contact_no:g().max(10).optional().label("Emergency Contact"),email:g().email().max(100).optional().label("Email"),emp_present_address:g().optional().label("Present Address"),present_post_office:g().max(100).optional().label("Present Post Office"),present_pin_code:g().max(6).optional().label("Present PIN Code"),present_police_station:g().max(100).optional().label("Present Police Station"),present_state:g().max(100).optional().label("Present State"),present_district:g().max(100).optional().label("Present District"),emp_permanent_address:g().optional().label("Permanent Address"),permanent_post_office:g().max(100).optional().label("Permanent Post Office"),permanent_pin_code:g().max(6).optional().label("Permanent PIN Code"),permanent_police_station:g().max(100).optional().label("Permanent Police Station"),permanent_state:g().max(100).optional().label("Permanent State"),permanent_district:g().max(100).optional().label("Permanent District"),aadhaar_no:g().max(12).optional().label("Aadhaar Number"),pan_no:g().max(10).optional().label("PAN Number"),uan_no:g().max(12).optional().label("UAN Number"),esi_no:g().max(17).optional().label("ESI Number"),passport_no:g().max(20).optional().label("Passport Number"),driving_license_no:g().max(20).optional().label("Driving License"),department_id:ce().integer().optional().label("Department"),designation_id:ce().integer().optional().label("Designation"),date_of_joining:We().optional().label("Date of Joining")});function Vs({id:p,getDataById:d}){var u,w,E,P,$,q,N,F;const[h,b]=A.useState(!1),n=G({}),i=ss(),x=as(),c=ts(),o=ls(),v=A.useMemo(()=>{var K;if(!((K=d.data)!=null&&K.data))return{};const{ulb_id:_,status:C,created_at:U,updated_at:k,id:M,emp_image:V,...z}=d.data.data,J={};return Object.entries(z).forEach(([Z,X])=>{J[Z]=X===null?void 0:X}),J},[d.data]),r=he({defaultValues:v,resolver:ue(Ms)}),m=async _=>{var C,U,k,M;try{const V=await n.mutateAsync({api:`${(C=O)==null?void 0:C.updateEmployeeById}`,data:{id:p,..._}});(U=V.data)!=null&&U.success?(S.success((k=V==null?void 0:V.data)==null?void 0:k.message),i("/hrms/dashboard/employee-list")):S.error(((M=V.data)==null?void 0:M.message)||"Employee not created successfully")}catch(V){console.log(V),S.error("An error occurred while creating employee")}},s=_=>{if(b(_),_){const C=r.getValues("emp_present_address"),U=r.getValues("present_post_office"),k=r.getValues("present_pin_code"),M=r.getValues("present_police_station"),V=r.getValues("present_state"),z=r.getValues("present_district");r.setValue("emp_permanent_address",C),r.setValue("permanent_post_office",U),r.setValue("permanent_pin_code",k),r.setValue("permanent_police_station",M),r.setValue("permanent_state",V),r.setValue("permanent_district",z)}else r.setValue("emp_permanent_address",""),r.setValue("permanent_post_office",""),r.setValue("permanent_pin_code",""),r.setValue("permanent_police_station",""),r.setValue("permanent_state",""),r.setValue("permanent_district","")};A.useEffect(()=>{d.data&&r.reset(v)},[d.data,r]);const t=[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}],l=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],j=[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}],f=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}],a=async()=>{var k,M,V,z,J,K,Z,X,te,R,T,Q,Me,Ve,Re,$e,Te,qe,Ue,Oe;const C=await(await fetch(((M=(k=d.data)==null?void 0:k.data)==null?void 0:M.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s")).blob(),U=new File([C],"employee_image.jpg",{type:C.type});try{const W=new FormData;W.append("name",r.getValues("emp_name")),W.append("mobile",r.getValues("contact_no")),W.append("altMobile",r.getValues("emergency_contact_no")),W.append("email",r.getValues("email")),W.append("address",r.getValues("emp_present_address")),W.append("userType","Employee"),W.append("ulbId",((z=(V=d.data)==null?void 0:V.data)==null?void 0:z.ulb_id)||""),W.append("photo",U);const se=await n.mutateAsync({api:(J=Y)==null?void 0:J.createUserAuth,data:W});if(console.log(se.data),(K=se.data)!=null&&K.status){const es=await n.mutateAsync({api:`${(Z=Y)==null?void 0:Z.createMenuRoleAuth}`,data:{userId:(te=(X=se.data)==null?void 0:X.data)==null?void 0:te.id,permissionStatus:!0,menuRoleId:129}});await n.mutateAsync({api:`${(R=Y)==null?void 0:R.createWorkFlowRoleAuth}`,data:{userId:(Q=(T=se.data)==null?void 0:T.data)==null?void 0:Q.id,permissionStatus:!0,wfRoleId:79}}),(Me=es.data)!=null&&Me.status&&(Ue=(await n.mutateAsync({api:`${(Ve=O)==null?void 0:Ve.approveEmployee}`,data:{id:String(($e=(Re=d.data)==null?void 0:Re.data)==null?void 0:$e.id),authorization_id:String((qe=(Te=se.data)==null?void 0:Te.data)==null?void 0:qe.id),approval_status:1}})).data)!=null&&Ue.success&&(S.success("Employee approved successfully"),i("/hrms/dashboard/employee-list"))}else S.error(((Oe=se.data)==null?void 0:Oe.message)||"Employee approval failed")}catch(W){console.log(W),S.error("An error occurred while approving employee")}};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:e.jsx(H,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),e.jsxs(ge,{methods:r,onSubmit:r.handleSubmit(m),children:[e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(De,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(I,{name:"emp_type_id",data:((w=(u=x==null?void 0:x.data)==null?void 0:u.data)==null?void 0:w.map(_=>({label:String(_.emp_type),value:String(_.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ze,{className:"h-4 w-4 text-gray-400"}),"Department"]}),e.jsx(I,{name:"department_id",data:((P=(E=c==null?void 0:c.data)==null?void 0:E.data)==null?void 0:P.map(_=>({label:String(_.department_name),value:String(_.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(De,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),e.jsx(I,{name:"designation_id",data:((q=($=o==null?void 0:o.data)==null?void 0:$.data)==null?void 0:q.map(_=>({label:String(_.designation_name),value:String(_.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),e.jsx(y,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(H,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),e.jsx(y,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),e.jsx(I,{name:"gender",data:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),e.jsx(y,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),e.jsx(I,{name:"marital_status",data:j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),e.jsx(y,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(He,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),e.jsx(I,{name:"emp_blood_group",data:f})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(He,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),e.jsx(I,{name:"emp_health_status",data:t})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(je,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(je,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),e.jsx(y,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),e.jsx(y,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),e.jsx(y,{name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),e.jsx(y,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(y,{name:"present_post_office",placeholder:"Enter Post Office"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(y,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(y,{name:"present_police_station",placeholder:"Enter Police Station"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(y,{name:"present_district",placeholder:"Enter District"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(y,{name:"present_state",placeholder:"Enter State"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:h,onChange:_=>s(_.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ge,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),e.jsx(y,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:h})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(y,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:h})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(y,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:h})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(y,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:h})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(y,{name:"permanent_district",placeholder:"Enter District",disabled:h})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(L,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(y,{name:"permanent_state",placeholder:"Enter State",disabled:h})]})]})})]})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),e.jsx(y,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),e.jsx(y,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),e.jsx(y,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),e.jsx(y,{name:"esi_no",placeholder:"Enter ESI Number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),e.jsx(y,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),e.jsx(y,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ne,{isLoading:r.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-4 w-4"}),"Update Employee"]})}),((F=(N=d.data)==null?void 0:N.data)==null?void 0:F.approval_status)==0&&e.jsx(ne,{onClick:a,type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const Rs=pe().shape({doc_name:g().required("Document Name is required"),doc_type_id:g().required("Document Type is required"),doc_path:xs().required("Document is required").test("fileRequired","Document is required",p=>p instanceof File||typeof p=="string"&&p!==""),description:g().required("Description is required")});function $s({title:p,id:d,edit:h,refetch:b,getDataById:n}){var a,u,w,E,P,$,q;const{validateFile:i,reset:x}=fs({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),c=G({}),o=Ss({}),v=A.useRef(null),r=rs(),{data:m}=ie({api:`${(a=O)==null?void 0:a.updateEmployeeById}/${d}`,key:"getDocumentById",options:{enabled:h}}),s=he({defaultValues:{doc_type_id:((u=m==null?void 0:m.data)==null?void 0:u.doc_type_id)||"",doc_name:((w=m==null?void 0:m.data)==null?void 0:w.doc_name)||"",doc_path:((E=m==null?void 0:m.data)==null?void 0:E.doc_path)||"",description:((P=m==null?void 0:m.data)==null?void 0:P.description)||""},resolver:ue(Rs)}),{id:t}=xe(),l=async N=>{var _;const F=(_=N.target.files)==null?void 0:_[0];if(F&&(F==null?void 0:F.type)==="application/pdf"){const C=await i(F);C.isValid?(S.success(C.message),x(),s.setValue("doc_path",F)):(S.error(C.message),N.target.value="",s.resetField("doc_path"))}else F&&s.setValue("doc_path",F)},j=async N=>{var F,_,C,U;try{const k=new FormData;if(k.append("emp_id",String(t)),k.append("doc_type_id",N.doc_type_id),k.append("doc_name",N.doc_name),k.append("description",N.description),k.append("file",N==null?void 0:N.doc_path),h&&N)console.log("Editing document with data:",N);else{const M=await c.mutateAsync({api:O.uploadEmployeeDocument,data:k});(F=M.data)!=null&&F.success?(S.success((_=M==null?void 0:M.data)==null?void 0:_.message),(C=v.current)==null||C.click()):S.error(((U=M.data)==null?void 0:U.message)||"Document not attached successfully"),s.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}b()}catch(k){console.log("Submit Error:",k),S.error("An error occurred while processing your request")}};A.useEffect(()=>{var N,F,_,C;h&&m?s.reset({doc_type_id:(N=m==null?void 0:m.data)==null?void 0:N.doc_type_id,doc_name:(F=m==null?void 0:m.data)==null?void 0:F.doc_name,doc_path:(_=m==null?void 0:m.data)==null?void 0:_.doc_path,description:((C=m==null?void 0:m.data)==null?void 0:C.description)??""}):s.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[h,m]),A.useEffect(()=>{var N,F,_,C;(s==null?void 0:s.watch("doc_name"))==="Aadhaar Card"?s.setValue("description",((F=(N=n==null?void 0:n.data)==null?void 0:N.data)==null?void 0:F.aadhaar_no)||""):(s==null?void 0:s.watch("doc_name"))==="Pan Card"?s.setValue("description",((C=(_=n==null?void 0:n.data)==null?void 0:_.data)==null?void 0:C.pan_no)||""):s.setValue("description","")},[s==null?void 0:s.watch("doc_name")]);const f=s.formState.isSubmitting||o.isPending;return e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(D,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(Se,{className:"sm:max-w-[425px]",children:e.jsxs(ge,{methods:s,onSubmit:s.handleSubmit(j),children:[e.jsxs(Ae,{children:[e.jsx(Ee,{children:p}),e.jsx(Pe,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ye,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:((q=($=r==null?void 0:r.data)==null?void 0:$.data)==null?void 0:q.map(N=>({label:String(N.doc_name),value:String(N.id)})))||[]})}),e.jsx("div",{children:e.jsx(Es,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:l,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(y,{label:`${(s==null?void 0:s.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(s==null?void 0:s.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx(ke,{})]}),e.jsxs(Ce,{className:"mt-5 flex justify-between",children:[e.jsx(Fe,{asChild:!0,children:e.jsx(D,{variant:"outline",ref:v,children:"Cancel"})}),e.jsx(ne,{type:"submit",isLoading:f,children:"Save changes"})]})]})})]})}function Ts({id:p,getDataById:d}){var t,l,j,f;const[h,b]=A.useState(""),[n,i]=A.useState(!1),{id:x}=xe(),c=ie({api:`${O.getEmployeeDocuments}?emp_id=${x}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),o=G({}),v=async a=>{Qe("Are you sure?","Please confirm",async()=>{var u,w,E;try{const P=await o.mutateAsync({api:`${O.deleteEmployeeDocument}`,data:{id:Ne(a.toString())}});(u=P==null?void 0:P.data)!=null&&u.success?(S.success(((w=P==null?void 0:P.data)==null?void 0:w.message)||"Deleted successfully"),c.refetch()):S.error(((E=P==null?void 0:P.data)==null?void 0:E.message)||"Failed to delete")}catch(P){S.error("Error deleting item"),console.error("Delete Error:",P)}})},r=a=>{var u;return((u=a.split(".").pop())==null?void 0:u.toLowerCase())||""},m=a=>{const u=r(a);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(u)},s=a=>r(a)==="pdf";return e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),e.jsx($s,{title:n?"Edit Document":"Attach Document",id:p,edit:n,setEdit:i,refetch:c.refetch,getDataById:d})]}),c.isLoading?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(Be,{})}):e.jsx(e.Fragment,{children:((l=(t=c==null?void 0:c.data)==null?void 0:t.data)==null?void 0:l.length)===0?e.jsx(re,{className:"border-2 border-dashed border-gray-300 bg-white",children:e.jsxs(oe,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:e.jsx(le,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mt-2 text-center text-gray-600",children:h?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):e.jsx("div",{className:"space-y-4",children:(f=(j=c==null?void 0:c.data)==null?void 0:j.data)==null?void 0:f.map(a=>e.jsx(re,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[m(a==null?void 0:a.doc_path)?e.jsx("img",{src:a.doc_path,alt:(a==null?void 0:a.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:u=>{var w,E;u.currentTarget.style.display="none",(E=(w=u.currentTarget.parentElement)==null?void 0:w.querySelector(".fallback-icon"))==null||E.classList.remove("hidden")}}):s(a==null?void 0:a.doc_path)?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:e.jsx(Ns,{className:"h-12 w-12 text-red-600"})})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:e.jsx(le,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:e.jsx(le,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("div",{className:"absolute bottom-1 left-1",children:e.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:r(a==null?void 0:a.doc_path)||"file"})}),e.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[e.jsx("a",{href:a.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:e.jsx(ks,{className:"h-3 w-3"})}),e.jsx("a",{href:a.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:e.jsx(ys,{className:"h-3 w-3"})})]})})]}),e.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(a==null?void 0:a.doc_name)||"Document"}),e.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(a==null?void 0:a.description)||"No description available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"whitespace-nowrap",children:fe(a==null?void 0:a.created_at).format("DD MMM YYYY")})]}),e.jsxs("a",{href:a.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[e.jsx(vs,{className:"h-4 w-4"}),"Open"]}),e.jsx(D,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>v(a==null?void 0:a.id),children:e.jsx(Xe,{className:"h-4 w-4"})})]})]})})})]})},a==null?void 0:a.id))})})]})})}const qs=pe().shape({family_member_name:g().required("Family member name is required"),relationship:g().required("Relationship is required"),dob:g().required("Date of birth is required"),address:g().required("Address is required"),is_dependent:Le().default(!1),isNominee:Le().default(!1),nominee_percentage:ce().nullable().when("isNominee",{is:!0,then:p=>p.required("Nominee percentage is required when marked as nominee").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),otherwise:p=>p.notRequired()})}),Us=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function Os({title:p="Add Family Member",id:d,edit:h,refetch:b,getDataById:n}){var t;const i=G({}),x=A.useRef(null),{id:c}=xe(),{data:o}=ie({api:`${(t=O)==null?void 0:t.getFamilyMemberById}/${d}`,key:"getFamilyMemberById",options:{enabled:h&&!!d}}),v=he({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null},resolver:ue(qs)}),r=v.watch("isNominee"),m=async l=>{var j,f,a,u,w,E,P,$;try{const q={emp_id:c,family_member_name:l.family_member_name,relationship:l.relationship,dob:l.dob,address:l.address,is_dependent:l.is_dependent||!1,isNominee:l.isNominee||!1,nominee_percentage:l.isNominee?l.nominee_percentage:null};if(h&&d){const N=await i.mutateAsync({api:`${O.updateFamilyMemberById}/${d}`,data:q});(j=N.data)!=null&&j.success?(S.success(((f=N==null?void 0:N.data)==null?void 0:f.message)||"Family member updated successfully"),(a=x.current)==null||a.click()):S.error(((u=N.data)==null?void 0:u.message)||"Failed to update family member")}else{const N=await i.mutateAsync({api:O.createFamily,data:q});(w=N.data)!=null&&w.success?(S.success(((E=N==null?void 0:N.data)==null?void 0:E.message)||"Family member added successfully"),(P=x.current)==null||P.click()):S.error((($=N.data)==null?void 0:$.message)||"Failed to add family member")}v.reset(),b==null||b()}catch(q){console.error("Submit Error:",q),S.error("An error occurred while processing your request")}};A.useEffect(()=>{var l,j,f,a,u,w,E;h&&o?v.reset({family_member_name:((l=o==null?void 0:o.data)==null?void 0:l.family_member_name)||"",relationship:((j=o==null?void 0:o.data)==null?void 0:j.relationship)||"",dob:((f=o==null?void 0:o.data)==null?void 0:f.dob)||"",address:((a=o==null?void 0:o.data)==null?void 0:a.address)||"",is_dependent:((u=o==null?void 0:o.data)==null?void 0:u.is_dependent)||!1,isNominee:((w=o==null?void 0:o.data)==null?void 0:w.isNominee)||!1,nominee_percentage:((E=o==null?void 0:o.data)==null?void 0:E.nominee_percentage)||null}):v.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null})},[h,o]);const s=v.formState.isSubmitting||i.isPending;return e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(D,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),e.jsx(Se,{className:"sm:max-w-[500px]",children:e.jsxs(ge,{methods:v,onSubmit:v.handleSubmit(m),children:[e.jsxs(Ae,{children:[e.jsx(Ee,{children:p}),e.jsx(Pe,{children:h?"Update family member information":"Add a new family member"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(y,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx("div",{children:e.jsx(ye,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Us})}),e.jsx("div",{children:e.jsx(y,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),e.jsx("div",{children:e.jsx(y,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(ke,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ze,{name:"is_dependent",label:"Mark as Dependent"}),e.jsx(ze,{name:"isNominee",label:"Mark as Nominee"}),r&&e.jsx("div",{className:"ml-6",children:e.jsx(y,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),e.jsxs(Ce,{className:"mt-5 flex justify-between",children:[e.jsx(Fe,{asChild:!0,children:e.jsx(D,{variant:"outline",ref:x,children:"Cancel"})}),e.jsx(ne,{type:"submit",isLoading:s,children:h?"Update":"Save"})]})]})})]})}function Ws({id:p,getDataById:d}){var o,v,r,m;A.useState("");const[h,b]=A.useState(!1),n=ie({api:`${O.getAllFamilyDetail}?emp_id=${p}`,key:"getEmployeeFamilyDetailsId",value:[p],options:{enabled:!0}}),i=G({}),x=async s=>{Qe("Are you sure?","Please confirm",async()=>{var t,l,j;try{const f=await i.mutateAsync({api:`${O.deleteFamilyMember}`,data:{id:Ne(s.toString())}});(t=f==null?void 0:f.data)!=null&&t.success?(S.success(((l=f==null?void 0:f.data)==null?void 0:l.message)||"Deleted successfully"),n.refetch()):S.error(((j=f==null?void 0:f.data)==null?void 0:j.message)||"Failed to delete")}catch(f){S.error("Error deleting family member"),console.error("Delete Error:",f)}})},c=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-screen bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),e.jsx(Os,{title:h?"Edit Family Member":"Add Family Member",id:p,edit:h,setEdit:b,refetch:n.refetch,getDataById:d})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.isLoading?e.jsx(re,{children:e.jsx(oe,{className:"flex h-32 items-center justify-center",children:e.jsx(Be,{})})}):e.jsxs(e.Fragment,{children:[(v=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:v.map(s=>e.jsxs(re,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(Cs,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Fs,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${c(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(D,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>x(s==null?void 0:s.id),children:e.jsx(Xe,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(oe,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:fe(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(me,{className:"h-4 w-4 text-green-500"}):e.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",fe(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((m=(r=n==null?void 0:n.data)==null?void 0:r.data)==null?void 0:m.length)===0&&e.jsx(re,{className:"py-12 text-center",children:e.jsxs(oe,{children:[e.jsx(ae,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(D,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const Ls=pe().shape({name:g().required("Name is required"),mobile:g().required("Mobile is required"),altMobile:g().required("Alternate Mobile is required"),email:g().email("Invalid email").required("Email is required"),address:g().required("Address is required"),userType:g().required("User Type is required")});function Ke({title:p="Add New User",id:d,edit:h,refetch:b,getDataById:n,userData:i}){var t,l;const x=G({}),c=A.useRef(null),o=ns(),v=A.useMemo(()=>{var j,f,a,u,w,E,P,$;return h?{name:(i==null?void 0:i.name)||"",mobile:(i==null?void 0:i.mobile)||"",altMobile:(i==null?void 0:i.alternateMobile)||"",email:(i==null?void 0:i.email)||"",address:(i==null?void 0:i.address)||"",userType:(i==null?void 0:i.user_type)||""}:{name:((f=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:f.emp_name)||"",mobile:((u=(a=n==null?void 0:n.data)==null?void 0:a.data)==null?void 0:u.contact_no)||"",altMobile:((E=(w=n==null?void 0:n.data)==null?void 0:w.data)==null?void 0:E.emergency_contact_no)||"",email:"",address:(($=(P=n==null?void 0:n.data)==null?void 0:P.data)==null?void 0:$.emp_present_address)||"",userType:""}},[n]),r=he({defaultValues:v,resolver:ue(Ls)});A.useEffect(()=>{r.reset(v)},[v,r]);const m=async j=>{var w,E,P,$,q,N,F,_,C,U,k,M,V,z,J,K,Z,X,te;const a=await(await fetch(((E=(w=n.data)==null?void 0:w.data)==null?void 0:E.emp_image)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s")).blob(),u=new File([a],"employee_image.jpg",{type:a.type});try{const R=new FormData;if(R.append("name",j.name),R.append("mobile",j.mobile),R.append("altMobile",j.altMobile),R.append("email",j.email),R.append("address",j.address),R.append("userType",j.userType),R.append("ulbId",(($=(P=n.data)==null?void 0:P.data)==null?void 0:$.ulb_id)||""),R.append("photo",u),R.append("id",parseInt(i==null?void 0:i.id)||""),h){const T=await x.mutateAsync({api:`${Y.updateUser}`,data:R});(q=T.data)!=null&&q.status?(S.success(((N=T==null?void 0:T.data)==null?void 0:N.message)||"User updated successfully"),(F=c.current)==null||F.click()):S.error(((_=T.data)==null?void 0:_.message)||"Failed to update user")}else{const T=await x.mutateAsync({api:Y.createUserAuth,data:R});if((C=T.data)!=null&&C.status){const Q=await x.mutateAsync({api:(U=O)==null?void 0:U.createModuleAccess,data:{emp_id:String((M=(k=n==null?void 0:n.data)==null?void 0:k.data)==null?void 0:M.id),module_access_id:String((z=(V=T==null?void 0:T.data)==null?void 0:V.data)==null?void 0:z.id),module_user_type:r.getValues("userType")}});(J=Q.data)!=null&&J.success?(S.success(((K=Q==null?void 0:Q.data)==null?void 0:K.message)||"User added successfully"),(Z=c.current)==null||Z.click()):S.error(((X=Q.data)==null?void 0:X.message)||"Failed to add user details")}else S.error(((te=T.data)==null?void 0:te.message)||"Failed to add user")}r.reset(),b==null||b()}catch(R){console.error("Submit Error:",R)}},s=r.formState.isSubmitting||x.isPending;return e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(D,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),p]})}),e.jsx(Se,{className:"sm:max-w-[500px]",children:e.jsxs(ge,{methods:r,onSubmit:r.handleSubmit(m),children:[e.jsxs(Ae,{children:[e.jsx(Ee,{children:p}),e.jsx(Pe,{children:h?"Update user information":"Add a new user to the system"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(ye,{label:"User Type",name:"userType",selectedText:"Select user type",data:((l=(t=o==null?void 0:o.data)==null?void 0:t.data)==null?void 0:l.map(j=>({label:String(j),value:String(j)})))||[]})}),e.jsx("div",{children:e.jsx(y,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(y,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),e.jsx(y,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),e.jsx("div",{children:e.jsx(y,{label:"Email",name:"email",type:"email",placeholder:"Enter email address"})}),e.jsx("div",{children:e.jsx(y,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(ke,{})]}),e.jsxs(Ce,{className:"mt-5 flex justify-between",children:[e.jsx(Fe,{asChild:!0,children:e.jsx(D,{variant:"outline",ref:c,children:"Cancel"})}),e.jsx(ne,{type:"submit",isLoading:s,children:h?"Update":"Save"})]})]})})]})}function Hs({userId:p}){const d=is(p),h=G({}),[b,n]=A.useState([]),[i,x]=A.useState({}),[c,o]=A.useState("");console.log("permittedRoleAuthData",d),A.useEffect(()=>{var l;d!=null&&d.data&&n(((l=d.data)==null?void 0:l.data)||[])},[d]);const v=async(l,j)=>{var f,a;x(u=>({...u,[l]:!0}));try{const u=await h.mutateAsync({api:`${(f=Y)==null?void 0:f.createWorkFlowRoleAuth}`,data:{userId:parseInt(p),wfRoleId:l,permissionStatus:!j}});u&&((a=u.data)!=null&&a.status)&&(d.refetch(),n(w=>w.map(E=>E.id===l?{...E,permission_status:!j}:E))),S.success("Permission updated successfully")}catch(u){console.error("Error updating permission:",u)}finally{x(u=>({...u,[l]:!1}))}},r=b.filter(l=>l.role_name.toLowerCase().includes(c.toLowerCase())),m=b.filter(l=>l.permission_status).length,s=b.length,t=b.some(l=>l.permission_status);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",s," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:c,onChange:l=>o(l.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-6",children:r.map(l=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${l.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",l.id]}),l.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:l.role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:l.permission_status,onChange:()=>v(l.id,l.permission_status),disabled:i[l.id]||!l.permission_status&&t,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${i[l.id]||!l.permission_status&&t?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${l.permission_status?"translate-x-5":"translate-x-0"} ${i[l.id]?"animate-pulse":""}`,children:i[l.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},l.id))}),r.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',c,'"']})})]})})}function zs({userId:p}){const d=ds(p),h=G({}),[b,n]=A.useState([]),[i,x]=A.useState({}),[c,o]=A.useState("");A.useEffect(()=>{var t;d!=null&&d.data&&n(((t=d.data)==null?void 0:t.data)||[])},[d]);const v=async(t,l)=>{var j,f;x(a=>({...a,[t]:!0}));try{const a=await h.mutateAsync({api:`${(j=Y)==null?void 0:j.createMenuRoleAuth}`,data:{userId:parseInt(p),menuRoleId:t,permissionStatus:!l}});a&&((f=a.data)!=null&&f.status)&&(d.refetch(),n(u=>u.map(w=>w.id===t?{...w,permission_status:!l}:w))),S.success("Permission updated successfully")}catch(a){console.error("Error updating permission:",a)}finally{x(a=>({...a,[t]:!1}))}},r=b.filter(t=>t.menu_role_name.toLowerCase().includes(c.toLowerCase())),m=b.filter(t=>t.permission_status).length,s=b.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",s," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:c,onChange:t=>o(t.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-6",children:r.map(t=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${t.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",t.id]}),t.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:t.menu_role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:t.permission_status,onChange:()=>v(t.id,t.permission_status),disabled:i[t.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${i[t.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${t.permission_status?"translate-x-5":"translate-x-0"} ${i[t.id]?"animate-pulse":""}`,children:i[t.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},t.id))}),r.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',c,'"']})})]})})}function Ys({userId:p}){const d=cs(p),h=G({}),[b,n]=A.useState([]),[i,x]=A.useState({}),[c,o]=A.useState("");A.useEffect(()=>{var t;d!=null&&d.data&&n(((t=d.data)==null?void 0:t.data)||[])},[d]);const v=async(t,l)=>{var j,f;x(a=>({...a,[t]:!0}));try{const a=await h.mutateAsync({api:`${(j=Y)==null?void 0:j.createWardAuth}`,data:{userId:parseInt(p),wardList:[{permissionStatus:!l,wardId:t}]}});a&&((f=a.data)!=null&&f.status)&&(d.refetch(),n(u=>u.map(w=>w.id===t?{...w,permission_status:!l}:w))),S.success("Permission updated successfully")}catch(a){console.error("Error updating permission:",a)}finally{x(a=>({...a,[t]:!1}))}},r=b.filter(t=>t.ward_name.toString().includes(c)),m=b.filter(t=>t.permission_status).length,s=b.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[m," of ",s," wards enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search wards...",value:c,onChange:t=>o(t.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-6",children:r.map(t=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${t.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",t.id]}),t.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",t.ward_name]})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:t.permission_status,onChange:()=>v(t.id,t.permission_status),disabled:i[t.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${i[t.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${t.permission_status?"translate-x-5":"translate-x-0"} ${i[t.id]?"animate-pulse":""}`,children:i[t.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},t.id))}),r.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',c,'"']})})]})})}function Ds({getDataById:p}){var v,r,m,s,t,l,j,f;const[d,h]=A.useState(""),[b,n]=A.useState("workflow"),i=os(Ne(String((r=(v=p==null?void 0:p.data)==null?void 0:v.data)==null?void 0:r.id))),x=As({api:(m=Y)==null?void 0:m.getUsrByIdAuth,config:{id:d},value:[d],options:{enabled:!!d}}),c=(l=(t=(s=x==null?void 0:x.data)==null?void 0:s.data)==null?void 0:t.data)==null?void 0:l[0],o=[{id:"workflow",label:"Workflow Permission",icon:ws},{id:"permittedRoles",label:" Permitted Roles",icon:_s},{id:"ward",label:"Ward Role",icon:Ze}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("div",{children:e.jsxs(ps,{onValueChange:a=>h(a),value:d,children:[e.jsx(hs,{className:"h-9 w-full border-2 border-slate-300 bg-slate-50 hover:border-blue-400 focus:ring-2 focus:ring-blue-500 md:w-52",children:e.jsx(us,{placeholder:"Select Module Access"})}),e.jsx(gs,{children:(f=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:f.map(a=>e.jsx(bs,{value:a.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:a.module_user_type},a.module_access_id))})]})}),e.jsx(Ke,{title:"Add User",id:"1",edit:!1,refetch:x==null?void 0:x.refetch,getDataById:p,userData:c})]})]}),c?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx(Ke,{title:"Edit User",id:"1",edit:!0,refetch:x==null?void 0:x.refetch,getDataById:p,userData:c})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(H,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:c.id})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:e.jsx(H,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:c.user_name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(H,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:c.name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(Ie,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:c.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:e.jsx(je,{className:"h-5 w-5 text-cyan-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:c.mobile})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(be,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),e.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:c.user_type})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(be,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium ${c.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:c.suspended?"Suspended":"Active"})]})]}),c.photo&&c.photo!=="/"&&e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:e.jsx(H,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),e.jsx("img",{src:c.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:o.map(a=>{const u=a.icon;return e.jsxs("button",{onClick:()=>n(a.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all ${b===a.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:[e.jsx(u,{className:"h-4 w-4"}),a.label]},a.id)})})}),e.jsxs("div",{className:"p-6",children:[b==="workflow"&&e.jsx(Hs,{userId:d}),b==="permittedRoles"&&e.jsx(zs,{userId:d}),b==="ward"&&e.jsx(Ys,{userId:d})]})]})]}):e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:e.jsx(be,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}const na=()=>{var c,o,v,r,m;const[p,d]=A.useState("basic"),{id:h}=xe(),b={basicSalary:"45,000",hra:"18,000",da:"13,500",grossSalary:"76,500",pf:"5,400",tax:"7,650",netSalary:"63,450"},n=[{month:"November 2024",present:20,absent:0,leave:2,total:22},{month:"October 2024",present:23,absent:1,leave:1,total:25},{month:"September 2024",present:22,absent:0,leave:0,total:22},{month:"August 2024",present:24,absent:0,leave:1,total:25}],i=[{id:"basic",label:"Basic Details",icon:H},{id:"document",label:"Attached Documents",icon:le},{id:"family",label:"Family Details",icon:ae},{id:"salary",label:"Salary Details",icon:Je},{id:"attendance",label:"Attendance",icon:ee},{id:"moduleAccess",label:"Module Access",icon:me}],x=ie({api:`${(c=O)==null?void 0:c.getEmployeeById}?id=${h}`,key:"getEmployeeByIddsadasdasdasd",value:[h],options:{enabled:!!h}});return e.jsx(ms,{title:"Employee Management",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100",children:e.jsx("div",{className:" py-4",children:e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white",children:e.jsx(H,{size:32,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:(v=(o=x==null?void 0:x.data)==null?void 0:o.data)==null?void 0:v.emp_name}),e.jsxs("p",{className:"text-blue-100",children:["ID: ",(m=(r=x==null?void 0:x.data)==null?void 0:r.data)==null?void 0:m.emp_code]})]})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:i.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>d(s.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 font-semibold transition-all ${p===s.id?"border-b-4 border-blue-700 bg-white text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"}`,children:[e.jsx(t,{size:20}),s.label]},s.id)})})}),e.jsxs("div",{className:"p-8",children:[p==="basic"&&e.jsx(Vs,{id:h,getDataById:x}),p==="document"&&e.jsx(Ts,{id:h,getDataById:x}),p==="family"&&e.jsx(Ws,{id:h,getDataById:x}),p==="salary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx(Je,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Breakdown"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border-2 border-green-200 bg-green-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-green-800",children:[e.jsx(me,{size:24}),"Earnings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Basic Salary"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.basicSalary})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"House Rent Allowance (HRA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.hra})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Dearness Allowance (DA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.da})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-green-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-green-900",children:"Gross Salary"}),e.jsx("span",{className:"text-xl font-bold text-green-900",children:b.grossSalary})]})]})]}),e.jsxs("div",{className:"rounded-lg border-2 border-red-200 bg-red-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-red-800",children:[e.jsx(le,{size:24}),"Deductions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Provident Fund (PF)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.pf})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Income Tax (TDS)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:b.tax})]}),e.jsx("div",{className:"py-3"}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-blue-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"Net Salary"}),e.jsx("span",{className:"text-xl font-bold text-blue-900",children:b.netSalary})]})]})]})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-yellow-300 bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Note:"})," Salary details shown are for the current month. For historical records, please contact the Accounts Department."]})})]}),p==="attendance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx(ee,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Attendance Records"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 text-white",children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Month"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Present"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Absent"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Leave"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Total Days"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Attendance %"})]})}),e.jsx("tbody",{children:n.map((s,t)=>{const l=(s.present/s.total*100).toFixed(1);return e.jsxs("tr",{className:t%2===0?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 font-medium",children:s.month}),e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 text-center",children:e.jsx("span",{className:"rounded-full bg-green-100 px-3 py-1 font-semibold text-green-800",children:s.present})}),e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 text-center",children:e.jsx("span",{className:"rounded-full bg-red-100 px-3 py-1 font-semibold text-red-800",children:s.absent})}),e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 text-center",children:e.jsx("span",{className:"rounded-full bg-yellow-100 px-3 py-1 font-semibold text-yellow-800",children:s.leave})}),e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 text-center font-semibold",children:s.total}),e.jsx("td",{className:"border-b border-gray-200 px-6 py-4 text-center",children:e.jsxs("span",{className:`rounded-full px-3 py-1 font-semibold ${parseFloat(l)>=90?"bg-green-100 text-green-800":parseFloat(l)>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[l,"%"]})})]},t)})})]})}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4 text-center",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-green-600",children:"Average Attendance"}),e.jsx("p",{className:"text-3xl font-bold text-green-700",children:"94.6%"})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 text-center",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-blue-600",children:"Total Present Days"}),e.jsx("p",{className:"text-3xl font-bold text-blue-700",children:"89"})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 text-center",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-yellow-600",children:"Total Leave Taken"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-700",children:"4"})]})]})]}),p==="moduleAccess"&&e.jsx(Ds,{getDataById:x})]})]})})})})};export{na as default};
