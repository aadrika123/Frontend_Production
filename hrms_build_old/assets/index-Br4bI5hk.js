import{h as e,f as i,r as t,j as a,z as r,B as s,e as n}from"./index-C0dR7KKl.js";import{P as l}from"./index-DLwgcCrU.js";import{h as o}from"./moment-CBOc1lqT.js";import{C as d,a as c,b as u,c as m}from"./card-dfHK731x.js";import{T as p,a as b,b as h,c as j,d as x,e as v}from"./table-DGsqq0wP.js";import{u as f,b as g}from"./useCustomQuery-DfubPPhS.js";import{P as _}from"./index-CtQoh3RB.js";import{S as y}from"./separator-DK9wbIss.js";import{S}from"./index-DxKRME66.js";import{S as C}from"./Spinner-Bh5S-NfG.js";import{a as P,o as F,c as E,b as N,f as R}from"./yup-D-4eAt9F.js";import{F as w}from"./datetime-picker-Chw5tpGr.js";import{R as A}from"./RHFTextField-Bf4PLUtQ.js";import{B as q}from"./ButtonLoading-CtnN6-Kp.js";import"./select-PSqof_An.js";import"./input-5m-sj67D.js";import"./switch-DfyNgsks.js";import"./checkbox-5PN_yyUS.js";import"./label-BBEmak6c.js";import{R as k}from"./DateAndTimePicker-CIIj3P6-.js";import{D as $}from"./index-Bak7Z6rK.js";import"./calendar-D3nBqMDA.js";import"./chevron-right-ZD98JKF5.js";import"./clock-zyZI13Cr.js";import"./check-DJnOI1b1.js";const B=E().shape({employee_contribution_rate:R().required("Employee Contribution Rate is required").min(0).max(100),employer_contribution_rate:R().required("Employer Contribution Rate is required").min(0).max(100),eps_contribution_rate:R().required("EPS Contribution Rate is required").min(0).max(100),admin_charges_rate:R().required("Admin Charges Rate is required").min(0).max(100),wage_ceiling:R().required("Wage Ceiling is required").min(0),effective_from:N().required("Effective From date is required")});function D({open:s,setOpen:n,title:l,id:o,edit:d,setEdit:c,refetch:u}){var m;const p=f({}),{data:b,isFetching:h}=g({api:`${null==(m=e)?void 0:m.getPFSlabById}?id=${i(String(o))}`,key:"getPFSlabById",options:{enabled:d&&!!o}}),j=P({defaultValues:{employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""},resolver:F(B)});return t.useEffect(()=>{var e,i,t,a,r,s;d&&b?j.reset({employee_contribution_rate:Number(null==(e=null==b?void 0:b.data)?void 0:e.employee_contribution_rate)||0,employer_contribution_rate:Number(null==(i=null==b?void 0:b.data)?void 0:i.employer_contribution_rate)||0,eps_contribution_rate:Number(null==(t=null==b?void 0:b.data)?void 0:t.eps_contribution_rate)||0,admin_charges_rate:Number(null==(a=null==b?void 0:b.data)?void 0:a.admin_charges_rate)||0,wage_ceiling:Number(null==(r=null==b?void 0:b.data)?void 0:r.wage_ceiling)||0,effective_from:(null==(s=null==b?void 0:b.data)?void 0:s.effective_from)||""}):j.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""})},[d,b,j]),a.jsx($,{open:s,setOpen:n,title:l,setEdit:c,edit:d,isLoading:h,children:a.jsx(w,{methods:j,onSubmit:j.handleSubmit(async i=>{var t,a,s,l,m,b,h,x;try{if(d&&o){const n=await p.mutateAsync({api:null==(t=e)?void 0:t.updatePFSlab,data:{id:Number(o),...i}});(null==(a=n.data)?void 0:a.success)?r.success((null==(s=null==n?void 0:n.data)?void 0:s.message)||"PF Contribution Slab updated successfully"):r.error((null==(l=n.data)?void 0:l.message)||"PF Contribution Slab not updated successfully")}else{const t=await p.mutateAsync({api:null==(m=e)?void 0:m.createPFSlab,data:i});(null==(b=t.data)?void 0:b.success)?r.success((null==(h=null==t?void 0:t.data)?void 0:h.message)||"PF Contribution Slab created successfully"):r.error((null==(x=t.data)?void 0:x.message)||"PF Contribution Slab not created successfully")}j.reset({employee_contribution_rate:0,employer_contribution_rate:0,eps_contribution_rate:0,admin_charges_rate:0,wage_ceiling:0,effective_from:""}),n(!1),null==c||c(!1),null==u||u()}catch(v){}}),children:a.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(A,{label:"Employee Contribution Rate",name:"employee_contribution_rate",placeholder:"Enter Employee Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Employer Contribution Rate",name:"employer_contribution_rate",placeholder:"Enter Employer Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"EPS Contribution Rate",name:"eps_contribution_rate",placeholder:"Enter EPS Contribution Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Admin Charges Rate",name:"admin_charges_rate",placeholder:"Enter Admin Charges Rate (%)",type:"number",step:"0.01"})}),a.jsx("div",{children:a.jsx(A,{label:"Wage Ceiling",name:"wage_ceiling",placeholder:"Enter Wage Ceiling",type:"number"})}),a.jsx("div",{children:a.jsx(k,{name:"effective_from",label:"Effective From",placeholder:"Select effective from date"})}),a.jsx(y,{}),a.jsx("div",{children:a.jsx(q,{isLoading:j.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function L(){var i,l,P,F,E,N;const R=f({}),[w,A]=t.useState(1),[q]=t.useState(10),[k,$]=t.useState(""),[B,L]=t.useState(!1),[T,W]=t.useState(""),[Y,M]=t.useState(!1),O=g({api:`${e.getAllPFSlabs}?page=${w}&limit=${q}&q=${k}`,key:"getAllPFSlabs",value:[w,q,k],options:{enabled:!0}});return a.jsxs("main",{className:"grid items-start",children:[a.jsx(D,{open:B,setOpen:L,title:Y?"Edit PF Contribution Slab":"Add PF Contribution Slab",id:T,edit:Y,setEdit:M,refetch:O.refetch}),a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(S,{search:k,setSearch:$,refetch:O.refetch,isFetching:null==O?void 0:O.isLoading})}),a.jsx("div",{children:a.jsx(s,{className:"flex items-center gap-2",onClick:()=>L(!0),children:"Add New"})})]}),a.jsx(y,{}),a.jsxs(d,{children:[a.jsx(c,{children:a.jsx(u,{children:"PF Contribution Slabs"})}),a.jsx(m,{children:(null==O?void 0:O.isLoading)?a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(C,{})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(p,{children:[a.jsx(b,{children:a.jsxs(h,{children:[a.jsx(j,{children:"Employee Rate (%)"}),a.jsx(j,{children:"Employer Rate (%)"}),a.jsx(j,{children:"EPS Rate (%)"}),a.jsx(j,{children:"Admin Charges (%)"}),a.jsx(j,{children:"Wage Ceiling"}),a.jsx(j,{children:"Effective From"}),a.jsx(j,{children:"Status"}),a.jsx(j,{children:"Actions"})]})}),a.jsx(x,{children:(null==(i=null==O?void 0:O.data)?void 0:i.data)&&(null==(l=null==O?void 0:O.data)?void 0:l.data.length)>0?null==(P=null==O?void 0:O.data)?void 0:P.data.map(i=>a.jsxs(h,{children:[a.jsxs(v,{children:[i.employee_contribution_rate,"%"]}),a.jsxs(v,{children:[i.employer_contribution_rate,"%"]}),a.jsxs(v,{children:[i.eps_contribution_rate,"%"]}),a.jsxs(v,{children:[i.admin_charges_rate,"%"]}),a.jsxs(v,{children:["â‚¹",i.wage_ceiling]}),a.jsx(v,{children:o(i.effective_from).format("DD/MM/YYYY")}),a.jsx(v,{children:a.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold "+(1===i.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:1===i.status?"Active":"Inactive"})}),a.jsxs(v,{className:"flex gap-2",children:[a.jsx(s,{variant:"outline",size:"sm",onClick:()=>{return e=String(i.id),M(!0),L(!0),void W(e);var e},children:"Edit"}),a.jsx(s,{variant:"destructive",size:"sm",onClick:()=>(async i=>{var t,a,s,l;try{const n=await R.mutateAsync({api:null==(t=e)?void 0:t.deletePFSlab,data:{id:Number(i)}});(null==(a=null==n?void 0:n.data)?void 0:a.success)?(O.refetch(),r.success((null==(s=null==n?void 0:n.data)?void 0:s.message)||"PF Contribution Slab deleted successfully")):r.error((null==(l=n.data)?void 0:l.message)||"Failed to delete PF Contribution Slab")}catch(o){r.error(n(o))}})(String(i.id)),children:"Delete"})]})]},i.id)):a.jsx(h,{children:a.jsx(v,{colSpan:8,className:"text-center",children:"No PF Contribution Slabs found"})})})]})})})]}),(null==(F=null==O?void 0:O.data)?void 0:F.pagination)&&a.jsx(_,{page:w,setPage:A,limit:q,totalPages:(null==(N=null==(E=null==O?void 0:O.data)?void 0:E.pagination)?void 0:N.totalPages)||1})]})]})}function T(){return a.jsx(l,{title:"PF Contribution Slab",subTitle:"Manage PF Contribution Slabs",children:a.jsx("div",{className:"py-12",children:a.jsx(L,{})})})}export{T as default};
