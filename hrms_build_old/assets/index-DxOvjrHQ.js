import{k as e,h as s,f as i,r as a,j as t,z as o,B as d,L as n,l as r}from"./index-pqP14EhS.js";import{P as l}from"./index-DZYVnpiZ.js";import{h as m}from"./moment-CBOc1lqT.js";import{C as c,a as v,b as u,c as x}from"./card-Bs59ZPbY.js";import{T as p,a as h,b as j,c as f,d as _,e as g}from"./table-CRgXbpGI.js";import{u as y,b}from"./useCustomQuery-CzEWxvyG.js";import{S as N}from"./index-BtoPgo6H.js";import{S as C}from"./Spinner-CJE7r9W9.js";import{a as S,o as w,c as k,d as E,b as P,e as q}from"./yup-C8lOt6vX.js";import{F}from"./datetime-picker-z1_UvJZu.js";import{R as M}from"./RHFTextField-CcEXXXFB.js";import{R as Y}from"./RHFTextArea-D_mSKdb8.js";import{B as $}from"./ButtonLoading-CHCIi82E.js";import{R as D}from"./RHFSelectField-Ohwh174t.js";import"./input-BT6hWnw8.js";import"./switch-CvZERcdR.js";import{R as L}from"./RHFCheckbox-C9wUO5H0.js";import{S as O}from"./separator-DjchR5HV.js";import{D as T}from"./index-j-XDzI77.js";import"./select-B4keucJT.js";import"./check-BQY2iuAn.js";import"./calendar-By15l6FD.js";import"./format-BkNqQ0tt.js";import"./chevron-right-tcBAQR95.js";import"./clock-Dx15zlBS.js";import"./checkbox-xsP6xrIs.js";import"./label-xKekv9dA.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),R=[{label:"7th CPC",value:"7th_cpc"},{label:"6th CPC",value:"6th_cpc"},{label:"5th CPC",value:"5th_cpc"},{label:"Custom",value:"custom"}],A=k().shape({commission_name:P().required("Commission Name is required"),commission_type:P().required("Commission Type is required"),effective_from:q().required("Effective From date is required"),effective_to:q().nullable(),government_order_no:P().required("Government Order No is required"),government_order_date:q().required("Government Order Date is required"),description:P().required("Description is required"),is_matrix_based:E().default(!1)});function B({open:e,setOpen:d,title:n,id:r,edit:l,setEdit:m,refetch:c}){var v;const u=y({}),{data:x,isFetching:p}=b({api:`${null==(v=s)?void 0:v.getPayCommissionById}?id=${i(String(r))}`,key:"getPayCommissionById",options:{enabled:!!l}}),h=S({defaultValues:{commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1},resolver:w(A)});return a.useEffect(()=>{var e,s,i,a,t,o,d,n;l&&(null==x?void 0:x.data)?h.reset({commission_name:(null==(e=null==x?void 0:x.data)?void 0:e.commission_name)||"",commission_type:(null==(s=null==x?void 0:x.data)?void 0:s.commission_type)||"",effective_from:(null==(i=null==x?void 0:x.data)?void 0:i.effective_from)||void 0,effective_to:(null==(a=null==x?void 0:x.data)?void 0:a.effective_to)||void 0,government_order_no:(null==(t=null==x?void 0:x.data)?void 0:t.government_order_no)||"",government_order_date:(null==(o=null==x?void 0:x.data)?void 0:o.government_order_date)||void 0,description:(null==(d=null==x?void 0:x.data)?void 0:d.description)||"",is_matrix_based:(null==(n=null==x?void 0:x.data)?void 0:n.is_matrix_based)||!1}):h.reset({commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1})},[l,x,h]),a.useEffect(()=>{"7th_cpc"==h.watch("commission_type")&&h.setValue("is_matrix_based",!0),"6th_cpc"==h.watch("commission_type")&&h.setValue("is_matrix_based",!1)},[h.watch("commission_type")]),t.jsx(T,{open:e,setOpen:d,title:n,setEdit:m,edit:l,isLoading:p,children:t.jsx(F,{methods:h,onSubmit:h.handleSubmit(async e=>{var i,a,t,n,v,x,p,j;try{if(l&&e){const d=await u.mutateAsync({api:`${null==(i=s)?void 0:i.updatePayCommissionById}`,data:{id:r,...e}});(null==(a=d.data)?void 0:a.success)?o.success(null==(t=null==d?void 0:d.data)?void 0:t.message):o.error((null==(n=d.data)?void 0:n.message)||"Pay Commission not updated successfully")}else{const i=await u.mutateAsync({api:null==(v=s)?void 0:v.createPayCommission,data:e});(null==(x=i.data)?void 0:x.success)?o.success(null==(p=null==i?void 0:i.data)?void 0:p.message):o.error((null==(j=i.data)?void 0:j.message)||"Pay Commission not created successfully"),h.reset({commission_name:"",commission_type:"",effective_from:void 0,effective_to:void 0,government_order_no:"",government_order_date:void 0,description:"",is_matrix_based:!1})}d(!1),m(!1),c()}catch(f){}}),children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[t.jsx("div",{children:t.jsx(M,{label:"Commission Name",name:"commission_name",placeholder:"Enter Commission Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(D,{label:"Commission Type",name:"commission_type",data:R})}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-2",children:[t.jsx(M,{type:"date",name:"effective_from",placeholder:"Effective From"}),t.jsx(M,{type:"date",label:"Effective To",name:"effective_to",placeholder:"Effective To (Optional)"})]}),t.jsx("div",{children:t.jsx(M,{name:"government_order_no",label:"Government Order No",placeholder:"Enter Government Order No"})}),t.jsx("div",{children:t.jsx(M,{type:"date",name:"government_order_date",label:"Government Order Date",placeholder:"Government Order Date"})}),t.jsx("div",{children:t.jsx(Y,{name:"description",placeholder:"Enter description",label:"Description",rows:4,inputValidation:["removeSpecialCharacterExceptSpace"]})}),t.jsx("div",{children:t.jsx(L,{disabled:"custom"!==h.watch("commission_type"),name:"is_matrix_based",label:"Is Matrix Based Pay Structure"})}),t.jsx(O,{}),t.jsx("div",{children:t.jsx($,{isLoading:h.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function G(){var e,o,l,y,S,w;const[k,E]=a.useState(""),[P,q]=a.useState(!1),[F,M]=a.useState(""),[Y,$]=a.useState(!1),[D,L]=a.useState("list"),O=b({api:`${s.getAllPayCommissions}`,key:"getAllPayCommissions",options:{enabled:!0}}),T=e=>{$(!0),q(!0),M(e)};return t.jsxs("main",{className:"grid items-start",children:[t.jsx(B,{open:P,setOpen:q,title:Y?"Edit Pay Commission":"Add Pay Commission",id:F,edit:Y,setEdit:$,refetch:O.refetch}),t.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[t.jsxs("div",{className:"flex w-full justify-between gap-2",children:[t.jsx("div",{children:t.jsx(N,{search:k,setSearch:E,refetch:O.refetch,isFetching:null==O?void 0:O.isLoading})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex rounded-lg border",children:[t.jsxs(d,{variant:"list"===D?"default":"ghost",size:"sm",onClick:()=>L("list"),className:"rounded-r-none",children:[t.jsx(n,{className:"mr-2 h-4 w-4"}),"List"]}),t.jsxs(d,{variant:"chart"===D?"default":"ghost",size:"sm",onClick:()=>L("chart"),className:"rounded-l-none",children:[t.jsx(V,{className:"mr-2 h-4 w-4"}),"Chart"]})]}),t.jsx(d,{className:"flex items-center gap-2",onClick:()=>q(!0),children:"Add New"})]})]}),t.jsxs(c,{children:[t.jsx(v,{className:"px-7",children:t.jsxs(u,{children:["Employee Type List (",null==(o=null==(e=null==O?void 0:O.data)?void 0:e.pagination)?void 0:o.total,")"]})}),t.jsx(x,{children:O.isLoading?t.jsx("div",{className:"flex h-32 items-center justify-center",children:t.jsx(C,{})}):t.jsx(t.Fragment,{children:"list"===D?t.jsxs(p,{children:[t.jsx(h,{children:t.jsxs(j,{children:[t.jsx(f,{className:"",children:"#"}),t.jsx(f,{className:"",children:"Pay Commission"}),t.jsx(f,{className:"",children:"Is Matrix"}),t.jsx(f,{className:"",children:"Created at"}),t.jsx(f,{children:"Action"})]})}),t.jsx(_,{children:null==(y=null==(l=null==O?void 0:O.data)?void 0:l.data)?void 0:y.map((e,s)=>t.jsxs(j,{children:[t.jsx(g,{children:s+1}),t.jsx(g,{children:null==e?void 0:e.commission_name}),t.jsx(g,{children:(null==e?void 0:e.is_matrix_based)?"Yes":"No"}),t.jsx(g,{children:m(null==e?void 0:e.created_at).format("DD-MM-YYYY")}),t.jsx(g,{children:t.jsx(d,{className:"bg-primary",onClick:()=>T(String(null==e?void 0:e.id)),children:"Edit"})}),t.jsx(g,{children:t.jsx(r,{className:"rounded-lg bg-green-600 px-4 py-2 text-white",to:`pay-level?commission_id=${i(String(null==e?void 0:e.id))}&is_matrix_based=${null==e?void 0:e.is_matrix_based}&commission_name=${null==e?void 0:e.commission_name}`,children:"View Levels"})})]},null==e?void 0:e.id))})]}):t.jsx("div",{className:"space-y-6",children:null==(w=null==(S=null==O?void 0:O.data)?void 0:S.data)?void 0:w.map((e,s)=>t.jsxs(c,{className:"border-2",children:[t.jsx(v,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-semibold",children:null==e?void 0:e.commission_name})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(d,{size:"sm",className:"bg-primary",onClick:()=>T(String(null==e?void 0:e.id)),children:"Edit"}),t.jsx(r,{className:"flex items-center rounded-lg bg-green-600 px-4 py-2 text-sm text-white",to:`pay-level?commission_id=${i(String(null==e?void 0:e.id))}&is_matrix_based=${null==e?void 0:e.is_matrix_based}&commission_name=${null==e?void 0:e.commission_name}`,children:"View Levels"})]})]})}),t.jsx(x,{children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Index:"}),t.jsx("span",{className:"ml-2 font-medium",children:s+1})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Matrix Based:"}),t.jsx("span",{className:"ml-2 font-medium",children:(null==e?void 0:e.is_matrix_based)?"Yes":"No"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Created:"}),t.jsx("span",{className:"ml-2 font-medium",children:m(null==e?void 0:e.created_at).format("DD-MM-YYYY")})]})]})})]},null==e?void 0:e.id))})})})]})]})]})}function I(){return t.jsx(l,{title:"Pay Commission",subTitle:"Manage all the Pay Commissions here",children:t.jsx("div",{className:"py-12",children:t.jsx(G,{})})})}export{I as default};
