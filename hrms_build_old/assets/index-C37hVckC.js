import{ax as e,j as s,ay as a,r as n,aA as r,aB as t,al as i}from"./vendor-RyuIgj66.js";import{P as d}from"./index-DFF4_m_G.js";import{c as l,a as o,b as m,e as p}from"./yup-CH6wvET8.js";import{F as c}from"./datetime-picker-dN6E5dqy.js";import{R as u}from"./RHFTextField-BSZ_cEI3.js";import{R as x}from"./RHFTextArea-DpBxMoiQ.js";import{B as j}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import"./input-DlX9dTT0.js";import{S as h}from"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{R as f}from"./DateAndTimePicker-CtTdRVKm.js";import{S as _}from"./separator-BQijJEjG.js";import{C as b,a as N,d as g,b as y,c as v}from"./card-u7M7FP5y.js";import{u as S}from"./useCustomQuery-DTB6aAiD.js";import{h as E}from"./index-ey2GEmQz.js";import{aD as k,_ as w}from"./icons-CxCh8mm_.js";import"./ui-B3c1eQmf.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";function D({name:n,label:r,...t}){const{control:i}=e();return s.jsx(a,{name:n,control:i,render:({field:{ref:e,...a},fieldState:{error:n}})=>s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:r,children:[r," ",n&&s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("div",{className:"relative mt-1",children:s.jsx(h,{onCheckedChange:a.onChange,checked:a.value,ref:e,className:`mt-1 ${n?"border-red-400":null}`,...t})}),n&&s.jsx("span",{className:"text-red-400 text-xs",children:null==n?void 0:n.message})]})})}const F=l().shape({emp_id:p().required("Employee ID is required").positive(),is_suspended:m().required(),suspension_start_date:o().when("is_suspended",{is:!0,then:e=>e.required("Suspension start date is required"),otherwise:e=>e.nullable()}),suspension_end_date:o().nullable(),suspension_order_no:o().nullable(),suspension_remarks:o().nullable()});function q(){const e=S({}),[a,d]=n.useState(null),l=r({defaultValues:{emp_id:void 0,is_suspended:!0,suspension_start_date:"",suspension_end_date:"",suspension_order_no:"",suspension_remarks:""},resolver:t(F)}),o=l.watch("is_suspended");return s.jsxs("main",{className:"grid items-start gap-4 lg:grid-cols-2",children:[s.jsxs(b,{children:[s.jsxs(N,{children:[s.jsx(g,{children:"Set Employee Suspension"}),s.jsx(y,{children:"Suspend an employee or lift their suspension"})]}),s.jsx(v,{children:s.jsx(c,{methods:l,onSubmit:l.handleSubmit(async s=>{var a,n,r,t,l;try{const o=await e.mutateAsync({api:null==(a=E)?void 0:a.setEmployeeSuspension,data:s});(null==(n=o.data)?void 0:n.success)?(i.success((null==(r=null==o?void 0:o.data)?void 0:r.message)||"Suspension status updated successfully"),d(null==(t=o.data)?void 0:t.data)):i.error((null==(l=o.data)?void 0:l.message)||"Failed to update suspension status")}catch(o){i.error("Failed to update suspension status")}}),children:s.jsxs("div",{className:"grid grid-cols-1 gap-x-4 gap-y-4",children:[s.jsx("div",{children:s.jsx(u,{label:"Employee ID",name:"emp_id",placeholder:"Enter Employee ID",type:"number"})}),s.jsxs("div",{className:"flex items-center gap-4 rounded-lg border p-4",children:[s.jsx(D,{name:"is_suspended",label:"Suspend Employee"}),s.jsx("span",{className:"text-sm font-medium "+(o?"text-red-600":"text-green-600"),children:o?"Employee will be suspended":"Suspension will be lifted"})]}),o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(f,{name:"suspension_start_date",label:"Suspension Start Date",placeholder:"Select start date"})}),s.jsx("div",{children:s.jsx(f,{name:"suspension_end_date",label:"Suspension End Date (Optional)",placeholder:"Select end date"})}),s.jsx("div",{children:s.jsx(u,{label:"Suspension Order Number (Optional)",name:"suspension_order_no",placeholder:"Enter order number"})}),s.jsx("div",{children:s.jsx(x,{label:"Remarks (Optional)",name:"suspension_remarks",placeholder:"Enter remarks for suspension"})})]}),s.jsxs("div",{children:[s.jsx(_,{className:"my-2"}),s.jsx(j,{isLoading:l.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:o?"Suspend Employee":"Lift Suspension"})]})]})})})]}),a&&s.jsxs(b,{className:a.is_suspended?"border-red-200 bg-red-50":"border-green-200 bg-green-50",children:[s.jsx(N,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[a.is_suspended?s.jsx(k,{className:"h-5 w-5 text-red-500"}):s.jsx(w,{className:"h-5 w-5 text-green-500"}),s.jsx(g,{className:a.is_suspended?"text-red-700":"text-green-700",children:a.is_suspended?"Employee Suspended":"Suspension Lifted"})]})}),s.jsx(v,{children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Employee ID:"}),s.jsx("span",{className:"font-medium",children:a.emp_id})]}),a.is_suspended&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Start Date:"}),s.jsx("span",{className:"font-medium",children:a.suspension_start_date||"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"End Date:"}),s.jsx("span",{className:"font-medium",children:a.suspension_end_date||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Order No:"}),s.jsx("span",{className:"font-medium",children:a.suspension_order_no||"-"})]}),a.suspension_remarks&&s.jsxs("div",{className:"mt-2 border-t pt-2",children:[s.jsx("span",{className:"text-slate-600",children:"Remarks:"}),s.jsx("p",{className:"mt-1 font-medium",children:a.suspension_remarks})]})]})]})})]})]})}function R(){return s.jsx(d,{title:"Suspension Management",subTitle:"Manage Employee Suspension Status",children:s.jsx("div",{className:"py-12",children:s.jsx(q,{})})})}export{R as default};
