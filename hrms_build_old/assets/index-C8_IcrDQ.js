import{h as e,f as s,r as i,j as a,z as t,B as n,e as l}from"./index-pqP14EhS.js";import{P as r}from"./index-DZYVnpiZ.js";import{h as d}from"./moment-CBOc1lqT.js";import{C as o,a as c,b as m,c as u}from"./card-Bs59ZPbY.js";import{T as p,a as j,b as g,c as h,d as x,e as v}from"./table-CRgXbpGI.js";import{u as f,b as y}from"./useCustomQuery-CzEWxvyG.js";import{P as S}from"./index-CVRxBGwU.js";import{S as b}from"./separator-DjchR5HV.js";import{S as N}from"./index-BtoPgo6H.js";import{S as D}from"./Spinner-CJE7r9W9.js";import{a as w,o as E,c as k,b as M}from"./yup-C8lOt6vX.js";import{F as _}from"./datetime-picker-z1_UvJZu.js";import{R as L}from"./RHFTextField-CcEXXXFB.js";import{B as $}from"./ButtonLoading-CHCIi82E.js";import"./select-B4keucJT.js";import"./input-BT6hWnw8.js";import"./switch-CvZERcdR.js";import"./checkbox-xsP6xrIs.js";import"./label-xKekv9dA.js";import{D as A}from"./index-j-XDzI77.js";import{L as C}from"./loader-circle-B92or-ec.js";import{t as T}from"./switch-w9caUT_i.js";import"./calendar-By15l6FD.js";import"./format-BkNqQ0tt.js";import"./chevron-right-tcBAQR95.js";import"./clock-Dx15zlBS.js";import"./check-BQY2iuAn.js";const B=k().shape({designation_name:M().required("Designation is required")});function F({open:n,setOpen:l,title:r,id:d,edit:o,setEdit:c,refetch:m}){var u;const p=f({}),{data:j,isFetching:g}=y({api:`${null==(u=e)?void 0:u.getDesignationMstrById}/${s(String(d))}`,key:"getDesignationMstrById",options:{enabled:o}}),h=w({defaultValues:{designation_name:""},resolver:E(B)});return i.useEffect(()=>{var e;o&&j?h.reset({designation_name:null==(e=null==j?void 0:j.data)?void 0:e.designation_name}):h.reset({designation_name:""})},[o,j]),a.jsx(A,{open:n,setOpen:l,title:r,setEdit:c,edit:o,isLoading:g,children:a.jsx(_,{methods:h,onSubmit:h.handleSubmit(async i=>{var a,n,r,u,j,g,x,v;try{if(o&&i){const l=await p.mutateAsync({api:`${null==(a=e)?void 0:a.updateDesignationMstrById}`,data:{id:s(String(d)),...i}});(null==(n=l.data)?void 0:n.success)?t.success(null==(r=null==l?void 0:l.data)?void 0:r.message):t.error((null==(u=l.data)?void 0:u.message)||"Designation not updated successfully")}else{const s=await p.mutateAsync({api:null==(j=e)?void 0:j.createDesignationMstr,data:i});(null==(g=s.data)?void 0:g.success)?t.success(null==(x=null==s?void 0:s.data)?void 0:x.message):t.error((null==(v=s.data)?void 0:v.message)||"Designation not created successfully"),h.reset({designation_name:""})}l(!1),c(!1),m()}catch(f){}}),children:a.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[a.jsx("div",{children:a.jsx(L,{name:"designation_name",placeholder:"Enter Designation",inputValidation:["removeSpecialCharacterExceptSpace"]})}),a.jsx(b,{}),a.jsx("div",{children:a.jsx($,{isLoading:h.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function P(){var r,w,E,k,M,_;const L=f({}),[$,A]=i.useState(1),[B,P]=i.useState(10),[Y,q]=i.useState(""),[I,O]=i.useState(!1),[R,V]=i.useState(""),[Q,z]=i.useState(!1),[H,U]=i.useState(null),W=y({api:`${e.getAllDesignationMstr}?page=${$}&limit=${B}&q=${Y}`,key:"getAllDesignationMstr",value:[$,B],options:{enabled:!0}});return a.jsxs("main",{className:"grid items-start",children:[a.jsx(F,{open:I,setOpen:O,title:Q?"Edit Employee Type":"Add Employee Type",id:R,edit:Q,setEdit:z,refetch:null==W?void 0:W.refetch}),a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(N,{search:Y,setSearch:q,refetch:null==W?void 0:W.refetch,isFetching:null==W?void 0:W.isLoading})}),a.jsx("div",{children:a.jsx(n,{className:"flex items-center gap-2",onClick:()=>O(!0),children:"Add New"})})]}),a.jsxs(o,{children:[a.jsx(c,{className:"px-7",children:a.jsxs(m,{children:["Department List (",null==(w=null==(r=null==W?void 0:W.data)?void 0:r.pagination)?void 0:w.total,")"]})}),a.jsx(u,{children:(null==W?void 0:W.isLoading)?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(D,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(p,{children:[a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(h,{className:"",children:"#"}),a.jsx(h,{className:"",children:"Designation"}),a.jsx(h,{className:"",children:"Created at"}),a.jsx(h,{className:"",children:"Status"}),a.jsx(h,{children:"Action"})]})}),a.jsx(x,{children:null==(k=null==(E=null==W?void 0:W.data)?void 0:E.data)?void 0:k.map((i,r)=>a.jsxs(g,{children:[a.jsx(v,{children:r+1}),a.jsx(v,{children:null==i?void 0:i.designation_name}),a.jsx(v,{children:d(null==i?void 0:i.created_at).format("DD-MM-YYYY")}),a.jsx(v,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(T,{checked:1==(null==i?void 0:i.status),onChange:()=>(async i=>{var a,n,r,d;U(i);try{const l=await L.mutateAsync({api:`${null==(a=e)?void 0:a.toggleDesignationMstr}`,data:{id:s(String(i))}});(null==(n=null==l?void 0:l.data)?void 0:n.success)?(null==W||W.refetch(),t.success(null==(r=null==l?void 0:l.data)?void 0:r.message)):t.error(null==(d=l.data)?void 0:d.message)}catch(o){t.error(l(o))}finally{U(null)}})(String(null==i?void 0:i.id)),disabled:H===String(null==i?void 0:i.id),className:((null==i?void 0:i.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[a.jsx("span",{className:"sr-only",children:"Enable notifications"}),a.jsx("span",{className:((null==i?void 0:i.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),H===String(null==i?void 0:i.id)&&a.jsx(C,{className:"h-4 w-4 animate-spin text-primary"})]})}),a.jsx(v,{children:a.jsx(n,{className:"bg-primary",onClick:()=>{return e=String(null==i?void 0:i.id),z(!0),O(!0),void V(e);var e},children:"Edit"})})]},null==i?void 0:i.id))})]}),a.jsx(b,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(S,{page:$,limit:B,totalPages:null==(_=null==(M=null==W?void 0:W.data)?void 0:M.pagination)?void 0:_.totalPages,setPage:A,setLimit:P})})]})})]})]})]})}function Y(){return a.jsx(r,{title:"Designation Type List",subTitle:"Manage all the Designation here",children:a.jsx("div",{className:"py-12",children:a.jsx(P,{})})})}export{Y as default};
