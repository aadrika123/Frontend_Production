import{aA as e,r as s,j as i,aB as a,al as t}from"./vendor-RyuIgj66.js";import{P as l}from"./index-DFF4_m_G.js";import{h as n}from"./moment-CBOc1lqT.js";import{h as r,e as d,B as o,g as c}from"./index-ey2GEmQz.js";import{C as m,a as u,b as p,c as j}from"./card-u7M7FP5y.js";import{T as x,a as h,b as v,c as g,d as f,e as y}from"./table-B_npepsp.js";import{u as S,b}from"./useCustomQuery-DTB6aAiD.js";import{P as N}from"./index-BHR1l08i.js";import{S as D}from"./separator-BQijJEjG.js";import{S as T}from"./index-CUStUwt1.js";import{S as E}from"./Spinner-BwGzvoRj.js";import{c as w,a as A}from"./yup-CH6wvET8.js";import{F as _}from"./datetime-picker-dN6E5dqy.js";import{R as $}from"./RHFTextField-BSZ_cEI3.js";import{R as k}from"./RHFTextArea-DpBxMoiQ.js";import{B as C}from"./ButtonLoading-DDalXO-W.js";import"./select-8PAfYjod.js";import"./input-DlX9dTT0.js";import"./switch-Cssv6fnZ.js";import"./checkbox-DFFItNXW.js";import"./label-BcY3kv5U.js";import{D as L}from"./index-B2ia16z0.js";import{q}from"./icons-CxCh8mm_.js";import{t as F}from"./ui-B3c1eQmf.js";import"./query-BH9sOW2X.js";import"./axios-Dos3PyFQ.js";import"./zustand-C1rkr5lV.js";const B=w().shape({doc_name:A().required("Document Name is required"),description:A().required("Description is required")});function P({open:l,setOpen:n,title:o,id:c,edit:m,setEdit:u,refetch:p}){var j;const x=S({}),{data:h,isFetching:v}=b({api:`${null==(j=r)?void 0:j.getDocumentTypeById}/${d(String(c))}`,key:"getDocumentTypeById",options:{enabled:m}}),g=e({defaultValues:{doc_name:"",description:""},resolver:a(B)});return s.useEffect(()=>{var e,s;m&&h?g.reset({doc_name:(null==(e=null==h?void 0:h.data)?void 0:e.doc_name)||"",description:(null==(s=null==h?void 0:h.data)?void 0:s.description)||""}):g.reset({doc_name:"",description:""})},[m,h]),i.jsx(L,{open:l,setOpen:n,title:o,setEdit:u,edit:m,isLoading:v,children:i.jsx(_,{methods:g,onSubmit:g.handleSubmit(async e=>{var s,i,a,l,o,j,h,v;try{if(m&&e){const n=await x.mutateAsync({api:`${null==(s=r)?void 0:s.updateDocumentType}`,data:{id:d(String(c)),...e}});(null==(i=n.data)?void 0:i.success)?t.success(null==(a=null==n?void 0:n.data)?void 0:a.message):t.error((null==(l=n.data)?void 0:l.message)||"Document Type not updated successfully")}else{const s=await x.mutateAsync({api:null==(o=r)?void 0:o.createDocumentType,data:e});(null==(j=s.data)?void 0:j.success)?t.success(null==(h=null==s?void 0:s.data)?void 0:h.message):t.error((null==(v=s.data)?void 0:v.message)||"Document Type not created successfully"),g.reset({doc_name:"",description:""})}n(!1),u(!1),p()}catch(f){}}),children:i.jsxs("div",{className:"grid grid-cols-1 gap-x-2 gap-y-4",children:[i.jsx("div",{children:i.jsx($,{name:"doc_name",placeholder:"Enter Document Name",inputValidation:["removeSpecialCharacterExceptSpace"]})}),i.jsx("div",{children:i.jsx(k,{name:"description",placeholder:"Enter your description",inputValidation:["removeSpecialCharacterExceptSpace"]})}),i.jsx(D,{}),i.jsx("div",{children:i.jsx(C,{isLoading:g.formState.isSubmitting,type:"submit",className:"h-11 w-full rounded-xl",children:"Submit"})})]})})})}function R(){var e,a,l,w,A,_;const $=S({}),[k,C]=s.useState(1),[L,B]=s.useState(10),[R,Y]=s.useState(""),[M,O]=s.useState(!1),[V,H]=s.useState(""),[I,z]=s.useState(!1),[Q,Z]=s.useState(null),G=b({api:`${r.getAllDocumentTypes}?page=${k}&limit=${L}&q=${R}`,key:"getAllDocumentTypes",value:[k,L],options:{enabled:!0}});return i.jsxs("main",{className:"grid items-start",children:[i.jsx(P,{open:M,setOpen:O,title:I?"Edit Employee Type":"Add Employee Type",id:V,edit:I,setEdit:z,refetch:G.refetch}),i.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[i.jsxs("div",{className:"flex w-full justify-between gap-2",children:[i.jsx("div",{children:i.jsx(T,{search:R,setSearch:Y,refetch:G.refetch,isFetching:null==G?void 0:G.isLoading})}),i.jsx("div",{children:i.jsx(o,{className:"flex items-center gap-2",onClick:()=>O(!0),children:"Add New"})})]}),i.jsxs(m,{children:[i.jsx(u,{className:"px-7",children:i.jsxs(p,{children:["Employee Type List (",null==(a=null==(e=null==G?void 0:G.data)?void 0:e.pagination)?void 0:a.total,")"]})}),i.jsx(j,{children:G.isLoading?i.jsx("div",{className:"flex h-32 items-center justify-center",children:i.jsx(E,{})}):i.jsxs(i.Fragment,{children:[i.jsxs(x,{children:[i.jsx(h,{children:i.jsxs(v,{children:[i.jsx(g,{className:"",children:"#"}),i.jsx(g,{className:"",children:"Employee Type"}),i.jsx(g,{className:"",children:"Description"}),i.jsx(g,{className:"",children:"Created at"}),i.jsx(g,{className:"",children:"Status"}),i.jsx(g,{children:"Action"})]})}),i.jsx(f,{children:null==(w=null==(l=null==G?void 0:G.data)?void 0:l.data)?void 0:w.map((e,s)=>i.jsxs(v,{children:[i.jsx(y,{children:s+1}),i.jsx(y,{children:null==e?void 0:e.doc_name}),i.jsx(y,{children:null==e?void 0:e.description}),i.jsx(y,{children:n(null==e?void 0:e.created_at).format("DD-MM-YYYY")}),i.jsx(y,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(F,{checked:1==(null==e?void 0:e.status),onChange:()=>(async e=>{var s,i,a,l;Z(e);try{const n=await $.mutateAsync({api:`${null==(s=r)?void 0:s.toggleDocumentTypeStatus}`,data:{id:d(String(e))}});(null==(i=null==n?void 0:n.data)?void 0:i.success)?(G.refetch(),t.success(null==(a=null==n?void 0:n.data)?void 0:a.message)):t.error(null==(l=n.data)?void 0:l.message)}catch(n){t.error(c(n))}finally{Z(null)}})(String(null==e?void 0:e.id)),disabled:Q===String(null==e?void 0:e.id),className:((null==e?void 0:e.status)?"bg-primary":"bg-gray-200")+" relative inline-flex h-6 w-11 items-center rounded-full disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:"Enable notifications"}),i.jsx("span",{className:((null==e?void 0:e.status)?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white"})]}),Q===String(null==e?void 0:e.id)&&i.jsx(q,{className:"h-4 w-4 animate-spin text-primary"})]})}),i.jsx(y,{children:i.jsx(o,{className:"bg-primary",onClick:()=>{return s=String(null==e?void 0:e.id),z(!0),O(!0),void H(s);var s},children:"Edit"})})]},null==e?void 0:e.id))})]}),i.jsx(D,{className:"mb-2 mt-4"}),i.jsx("div",{className:"flex w-full justify-end",children:i.jsx(N,{page:k,limit:L,totalPages:null==(_=null==(A=null==G?void 0:G.data)?void 0:A.pagination)?void 0:_.totalPages,setPage:C,setLimit:B})})]})})]})]})]})}function Y(){return i.jsx(l,{title:"Document Type List",subTitle:"Manage all the Document types here",children:i.jsx("div",{className:"py-12",children:i.jsx(R,{})})})}export{Y as default};
