import{i as Te,r as F,l as hs,j as e,h as Y,z as M,p as He,m as pe,n as Re,B as G,e as Se,o as us,q as gs,s as Be}from"./index-SDtq6APg.js";import{g as fs,b as js,d as bs,U as oe,C as ys,c as Ns,e as vs,f as ws,h as _s,i as Ss,j as Es,k as As,P as ks}from"./index-CrjMXZHz.js";import{a as ge,o as fe,g as Je,c as de,e as es,f as Ne,b as p,h as Ke,i as ve,d as os}from"./yup-V-kjDK18.js";import{F as je,B as me}from"./datetime-picker-iopySnZ3.js";import{R as b}from"./RHFTextField-D_VEXMjP.js";import{R as ss}from"./RHFTextArea-CUQe0s4g.js";import{R as te}from"./RHFSelectField-DGuw7Cq7.js";import"./select-C_Ik7Cfg.js";import{u as Q,c as Ms,b as se,a as Cs}from"./useCustomQuery-DuxI2f1A.js";import{B as as}from"./briefcase-BBt0KU2d.js";import{H as Oe,S as Ve,P as Xe,M as ms,R as Fs}from"./RHFUploadFiled-7JtHg86I.js";import{B as xs}from"./building-2-Dqu9Vq-t.js";import{C as Z}from"./calendar-C_1_1UGM.js";import{U as ne}from"./users-BFnbM8vY.js";import{C as ts}from"./circle-alert-KlGrh2eq.js";import{H as rs,M as B,C as ye,F as ps,u as Ps,D as Ee,a as Ae,b as ke,c as Me,d as Ce,e as Ue,f as Fe,g as Pe,h as qs,E as $s,R as We,W as Vs,U as Ts,i as ls,j as is}from"./usePdfValidator-DOYIp4a3.js";import{F as we}from"./file-text-BXe7-XfI.js";import{T as ue}from"./trash-2-BJjgVrZW.js";import{P as _e}from"./plus-DS1GEcj0.js";import{H as ns,C as re}from"./house-BA2uGd-9.js";import{C as Rs}from"./check-CsPaHRb5.js";import{C as ee,c as le,h as he,a as ze,d as Ge}from"./card-BkXv33Jr.js";import{S as qe,a as Le}from"./Spinner-thyyrLKV.js";import{C as De}from"./index-qZBYPp8w.js";import{E as Us}from"./eye-BfV50Xls.js";import{C as ie,S as Ls}from"./search-BMFf4966.js";import{C as Ie}from"./clock-Cy8xExlC.js";import{A as Ds}from"./award-CbzqyniB.js";import{D as Os}from"./dollar-sign-C2WWGP-_.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Te("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Te("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Te("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),zs=de().shape({emp_type_id:Ne().integer().required().label("Employee Type"),emp_code:p().max(50).required().label("Employee Code"),emp_name:p().max(100).required().label("Employee Name"),gender:p().oneOf(["male","female","other"]).required().label("Gender"),dob:es().required().label("Date of Birth"),marital_status:p().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:p().max(50).required().label("Religion"),emp_blood_group:p().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:p().max(50).required().label("Health Status").required(),physical_disability_status:p().optional().label("Physical Disability"),height:Ne().optional().label("Height"),weight:Ne().optional().label("Weight"),cps_no:p().max(50).optional().label("CPS"),gpf_no:p().max(50).optional().label("GPF"),identification_mark:p().max(200).optional().label("Identification Mark"),caste:p().max(100).optional().label("Caste"),languages_known:Ke().of(de().shape({language:p().required("Language is required"),read:ve().required(),write:ve().required(),speak:ve().required()})),contact_no:p().max(10).required().label("Contact Number").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),emergency_contact_no:p().max(10).required().label("Emergency Contact").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),email:p().email().max(100).required().label("Email"),emp_present_address:p().required().label("Present Address"),present_post_office:p().max(100).required().label("Present Post Office"),present_pin_code:p().max(6).required().label("Present PIN Code"),present_police_station:p().max(100).optional().label("Present Police Station"),present_state:p().max(100).required().label("Present State"),present_district:p().max(100).required().label("Present District"),present_nearest_railway_station:p().max(100).optional().label("Nearest Railway Station"),emp_permanent_address:p().required().label("Permanent Address"),permanent_post_office:p().max(100).required().label("Permanent Post Office"),permanent_pin_code:p().max(6).required().label("Permanent PIN Code"),permanent_police_station:p().max(100).optional().label("Permanent Police Station"),permanent_state:p().max(100).required().label("Permanent State"),permanent_district:p().max(100).required().label("Permanent District"),permanent_nearest_railway_station:p().max(100).optional().label("Permanent Nearest Railway Station"),aadhaar_no:p().max(12).optional().label("Aadhaar Number"),pan_no:p().max(10).optional().label("PAN Number"),uan_no:p().max(12).optional().label("UAN Number"),esi_no:p().max(17).optional().label("ESI Number"),passport_no:p().max(20).optional().label("Passport Number"),driving_license_no:p().max(20).optional().label("Driving License"),voter_id:p().max(20).optional().label("Voter ID"),department_id:p().required().label("Department"),department_name:p().label("Department Name").optional(),designation_id:Ne().integer().required().label("Designation"),date_of_joining:es().required().label("Date of Joining")});function Gs({id:x,getDataById:n}){var H,X,xe,ce,J,z,ae,$e;const g=fs(),[d,o]=F.useState(!1),f=Q({}),c=hs(),u=js(),a=bs(),v=F.useMemo(()=>{var I;if(!((I=n.data)!=null&&I.data))return{};const{ulb_id:L,status:T,created_at:w,updated_at:A,id:$,emp_image:U,...O}=n.data.data,D={};return Object.entries(O).forEach(([W,K])=>{K==null?D[W]=void 0:Array.isArray(K)||typeof K=="object"?D[W]=K:D[W]=String(K)}),(!D.languages_known||Array.isArray(D.languages_known)&&D.languages_known.length===0)&&(D.languages_known=[{language:"Hindi",read:!0,write:!0,speak:!0}]),D},[n.data]),m=ge({defaultValues:v,resolver:fe(zs)}),j=Je({control:m.control,name:"languages_known"}),h=async L=>{var T,w,A,$,U,O,D,I;try{const W=await f.mutateAsync({api:`${(T=Y)==null?void 0:T.updateEmployeeById}`,data:{id:x,...L}});(w=W.data)!=null&&w.success?(await R(String(($=(A=n==null?void 0:n.data)==null?void 0:A.data)==null?void 0:$.authorization_id),String((O=(U=n==null?void 0:n.data)==null?void 0:U.data)==null?void 0:O.id)),M.success((D=W==null?void 0:W.data)==null?void 0:D.message),c("/hrms/dashboard/employee-list")):M.error(((I=W.data)==null?void 0:I.message)||"Employee not created successfully")}catch(W){console.log(W),M.error("An error occurred while creating employee")}},t=L=>{if(o(L),L){const T=m.getValues("emp_present_address"),w=m.getValues("present_post_office"),A=m.getValues("present_pin_code"),$=m.getValues("present_police_station"),U=m.getValues("present_state"),O=m.getValues("present_district"),D=m.getValues("present_nearest_railway_station");m.setValue("emp_permanent_address",T),m.setValue("permanent_post_office",w),m.setValue("permanent_pin_code",A),m.setValue("permanent_police_station",$),m.setValue("permanent_state",U),m.setValue("permanent_district",O),m.setValue("permanent_nearest_railway_station",D)}else m.setValue("emp_permanent_address",""),m.setValue("permanent_post_office",""),m.setValue("permanent_pin_code",""),m.setValue("permanent_police_station",""),m.setValue("permanent_state",""),m.setValue("permanent_district",""),m.setValue("permanent_nearest_railway_station","")};F.useEffect(()=>{n.data&&m.reset(v)},[n.data,m,v]);const s=[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}],y=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],E=[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}],r=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}],l="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",S=129,N=79,q=1,V=async()=>{ys("Are you sure you want to approve this employee?","Please confirm",async()=>{var L,T,w,A,$,U,O;try{const D=((T=(L=n.data)==null?void 0:L.data)==null?void 0:T.emp_image)||l,I=await k(D),W=_(I),K=await f.mutateAsync({api:(w=pe)==null?void 0:w.createUserAuth,data:W});if(!((A=K.data)!=null&&A.status))throw new Error((($=K.data)==null?void 0:$.message)||"Employee approval failed");const be=K.data.data.id;await Promise.all([P(be),i(be),R(String(be),String((O=(U=n==null?void 0:n.data)==null?void 0:U.data)==null?void 0:O.id))]),await C(be),M.success("Employee approved successfully"),c("/hrms/dashboard/employee-list")}catch(D){console.error("Employee approval error:",D);const I=D instanceof Error?D.message:"An error occurred while approving employee";M.error(I)}})},k=async L=>{const w=await(await fetch(L)).blob(),A=new Blob([w],{type:w.type});return Object.defineProperty(A,"name",{value:"employee_image.jpg",writable:!1}),Object.defineProperty(A,"lastModified",{value:Date.now(),writable:!1}),A},_=L=>{var A;const T=new FormData,w=(A=n.data)==null?void 0:A.data;return T.append("name",m.getValues("emp_name")),T.append("mobile",m.getValues("contact_no")),T.append("altMobile",m.getValues("emergency_contact_no")),T.append("email",m.getValues("email")),T.append("address",m.getValues("emp_present_address")),T.append("userType","Employee"),T.append("ulbId",(w==null?void 0:w.ulb_id)||""),T.append("photo",L),T},P=async L=>{var w,A;const T=await f.mutateAsync({api:(w=pe)==null?void 0:w.createMenuRoleAuth,data:{userId:L,permissionStatus:!0,menuRoleId:S}});if(!((A=T.data)!=null&&A.status))throw new Error("Failed to create menu role permission");return T},i=async L=>{var T;return f.mutateAsync({api:(T=pe)==null?void 0:T.createWorkFlowRoleAuth,data:{userId:L,permissionStatus:!0,wfRoleId:N}})},C=async L=>{var w,A,$,U;const T=await f.mutateAsync({api:(w=Y)==null?void 0:w.approveEmployee,data:{id:String(($=(A=n.data)==null?void 0:A.data)==null?void 0:$.id),authorization_id:String(L),approval_status:q}});if(!((U=T.data)!=null&&U.success))throw new Error("Failed to update employee approval status");return T},R=async(L,T)=>{var w;try{return await f.mutateAsync({api:(w=He)==null?void 0:w.updateUserName,data:{id:Number(L),emp_id:String(T)||""}})}catch(A){console.error("Update User Name error:",A);const $=A instanceof Error?A.message:"An error occurred while updating User Name";throw M.error($),A}};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:e.jsx(oe,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),e.jsxs(je,{methods:m,onSubmit:m.handleSubmit(h),children:[e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(as,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(te,{name:"emp_type_id",data:((X=(H=u==null?void 0:u.data)==null?void 0:H.data)==null?void 0:X.map(L=>({label:String(L.emp_type),value:String(L.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(b,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(xs,{className:"h-4 w-4 text-gray-400"}),"Department"]}),e.jsx(te,{name:"department_id",selectedText:"department_name",isSearch:!0,data:(ce=(xe=g==null?void 0:g.data)==null?void 0:xe.data)!=null&&ce.length?g.data.data.map(L=>({label:String(L.department_name),value:String(L.id)})):[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(as,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),e.jsx(te,{name:"designation_id",isSearch:!0,data:((z=(J=a==null?void 0:a.data)==null?void 0:J.data)==null?void 0:z.map(L=>({label:String(L.designation_name),value:String(L.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),e.jsx(b,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(oe,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),e.jsx(b,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),e.jsx(te,{name:"gender",data:y})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),e.jsx(b,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),e.jsx(te,{name:"marital_status",data:E})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),e.jsx(b,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-400"}),"Caste"]}),e.jsx(b,{name:"caste",placeholder:"Enter Caste",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),e.jsx(te,{name:"emp_blood_group",data:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),e.jsx(te,{name:"emp_health_status",data:s})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ve,{className:"h-4 w-4 text-gray-400"}),"Identification Mark"]}),e.jsx(b,{name:"identification_mark",placeholder:"Enter Identification Mark",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ve,{className:"h-4 w-4 text-gray-400"}),"Physical Disability Status"]}),e.jsx(te,{name:"physical_disability_status",data:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-400"}),"Height (cm)"]}),e.jsx(b,{name:"height",placeholder:"Enter Height in cm",inputValidation:["number"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-400"}),"Weight (kg)"]}),e.jsx(b,{name:"weight",placeholder:"Enter Weight in kg",inputValidation:["number"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(we,{className:"h-4 w-4 text-gray-400"}),"CPS"]}),e.jsx(b,{name:"cps_no",placeholder:"Enter CPS",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(we,{className:"h-4 w-4 text-gray-400"}),"GPF"]}),e.jsx(b,{name:"gpf_no",placeholder:"Enter GPF",inputValidation:["removeSpecialCharacterExceptSpace"]})]})]}),e.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-2",children:j.fields.map((L,T)=>e.jsxs("div",{className:"group flex flex-col gap-3 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center justify-between sm:contents",children:[e.jsx("span",{className:"inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-emerald-100 text-xs font-semibold text-emerald-700",children:T+1}),j.fields.length>1&&e.jsx("button",{type:"button",onClick:()=>j.remove(T),className:"flex-shrink-0 transition-opacity sm:order-last sm:opacity-0 sm:group-hover:opacity-100",title:"Remove language",children:e.jsx(ue,{className:"h-4 w-4 text-red-500 hover:text-red-600"})})]}),e.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:e.jsx(b,{name:`languages_known.${T}.language`,placeholder:"Enter Language",inputValidation:["removeSpecialCharacterExceptSpace"]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-blue-300 hover:bg-blue-50 has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50",children:[e.jsx("input",{type:"checkbox",...m.register(`languages_known.${T}.read`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ“– Read"})]}),e.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-purple-300 hover:bg-purple-50 has-[:checked]:border-purple-400 has-[:checked]:bg-purple-50",children:[e.jsx("input",{type:"checkbox",...m.register(`languages_known.${T}.write`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"âœï¸ Write"})]}),e.jsxs("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-md border border-gray-200 px-2.5 py-1.5 transition-colors hover:border-green-300 hover:bg-green-50 has-[:checked]:border-green-400 has-[:checked]:bg-green-50",children:[e.jsx("input",{type:"checkbox",...m.register(`languages_known.${T}.speak`),className:"h-3.5 w-3.5 cursor-pointer rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ðŸ—£ï¸ Speak"})]})]})]},L.id))}),e.jsxs("button",{type:"button",onClick:()=>j.append({language:"",read:!1,write:!1,speak:!1}),className:"mt-3 flex w-full items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-600 transition-all hover:border-emerald-400 hover:bg-emerald-50 hover:text-emerald-700",children:[e.jsx(_e,{className:"h-4 w-4"}),"Add Language"]})]})})]})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Xe,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Xe,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),e.jsx(b,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),e.jsx(b,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ms,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),e.jsx(b,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(ns,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),e.jsx(ss,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(b,{name:"present_post_office",placeholder:"Enter Post Office"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(b,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(b,{name:"present_police_station",placeholder:"Enter Police Station"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),e.jsx(b,{name:"present_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(b,{name:"present_district",placeholder:"Enter District"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(b,{name:"present_state",placeholder:"Enter State"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:d,onChange:L=>t(L.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ns,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),e.jsx(ss,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(b,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(b,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(b,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"Nearest Railway Station"]}),e.jsx(b,{name:"permanent_nearest_railway_station",placeholder:"Enter Nearest Railway Station",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(b,{name:"permanent_district",placeholder:"Enter District",disabled:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(b,{name:"permanent_state",placeholder:"Enter State",disabled:d})]})]})})]})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ps,{className:"h-4 w-4 text-gray-400"}),"Voter ID"]}),e.jsx(b,{name:"voter_id",placeholder:"Enter Voter ID",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),e.jsx(b,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),e.jsx(b,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),e.jsx(b,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),e.jsx(b,{name:"esi_no",placeholder:"Enter ESI Number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),e.jsx(b,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),e.jsx(b,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(me,{isLoading:m.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4"}),"Update Employee"]})}),(($e=(ae=n.data)==null?void 0:ae.data)==null?void 0:$e.approval_status)==0&&e.jsx(me,{onClick:V,type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const Is=de().shape({doc_name:p().required("Document Name is required"),doc_type_id:p().required("Document Type is required"),doc_path:os().required("Document is required").test("fileRequired","Document is required",x=>x instanceof File||typeof x=="string"&&x!==""),description:p().required("Description is required")});function Js({title:x,id:n,edit:g,refetch:d,getDataById:o}){var r,l,S,N,q,V,k;const{validateFile:f,reset:c}=Ps({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),u=Q({}),a=Ms({}),v=F.useRef(null),m=Ns(),{data:j}=se({api:`${(r=Y)==null?void 0:r.updateEmployeeById}/${n}`,key:"getDocumentById",options:{enabled:g}}),h=ge({defaultValues:{doc_type_id:((l=j==null?void 0:j.data)==null?void 0:l.doc_type_id)||"",doc_name:((S=j==null?void 0:j.data)==null?void 0:S.doc_name)||"",doc_path:((N=j==null?void 0:j.data)==null?void 0:N.doc_path)||"",description:((q=j==null?void 0:j.data)==null?void 0:q.description)||""},resolver:fe(Is)}),{id:t}=Re(),s=async _=>{var i;const P=(i=_.target.files)==null?void 0:i[0];if(P&&(P==null?void 0:P.type)==="application/pdf"){const C=await f(P);C.isValid?(M.success(C.message),c(),h.setValue("doc_path",P)):(M.error(C.message),_.target.value="",h.resetField("doc_path"))}else P&&h.setValue("doc_path",P)},y=async _=>{var P,i,C,R;try{const H=new FormData;if(H.append("emp_id",String(t)),H.append("doc_type_id",_.doc_type_id),H.append("doc_name",_.doc_name),H.append("description",_.description),H.append("file",_==null?void 0:_.doc_path),g&&_)console.log("Editing document with data:",_);else{const X=await u.mutateAsync({api:Y.uploadEmployeeDocument,data:H});(P=X.data)!=null&&P.success?(M.success((i=X==null?void 0:X.data)==null?void 0:i.message),(C=v.current)==null||C.click()):M.error(((R=X.data)==null?void 0:R.message)||"Document not attached successfully"),h.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}d()}catch(H){console.log("Submit Error:",H),M.error("An error occurred while processing your request")}};F.useEffect(()=>{var _,P,i,C;g&&j?h.reset({doc_type_id:(_=j==null?void 0:j.data)==null?void 0:_.doc_type_id,doc_name:(P=j==null?void 0:j.data)==null?void 0:P.doc_name,doc_path:(i=j==null?void 0:j.data)==null?void 0:i.doc_path,description:((C=j==null?void 0:j.data)==null?void 0:C.description)??""}):h.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[g,j]),F.useEffect(()=>{var _,P,i,C;(h==null?void 0:h.watch("doc_name"))==="Aadhaar Card"?h.setValue("description",((P=(_=o==null?void 0:o.data)==null?void 0:_.data)==null?void 0:P.aadhaar_no)||""):(h==null?void 0:h.watch("doc_name"))==="Pan Card"?h.setValue("description",((C=(i=o==null?void 0:o.data)==null?void 0:i.data)==null?void 0:C.pan_no)||""):h.setValue("description","")},[h==null?void 0:h.watch("doc_name")]);const E=h.formState.isSubmitting||a.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(ke,{className:"sm:max-w-[425px]",children:e.jsxs(je,{methods:h,onSubmit:h.handleSubmit(y),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(Ue,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(te,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:((k=(V=m==null?void 0:m.data)==null?void 0:V.data)==null?void 0:k.map(_=>({label:String(_.doc_name),value:String(_.id)})))||[]})}),e.jsx("div",{children:e.jsx(Fs,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:s,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(b,{label:`${(h==null?void 0:h.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(h==null?void 0:h.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx(qe,{})]}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:v,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:E,children:"Save changes"})]})]})})]})}function Ks({id:x,getDataById:n}){var t,s,y,E;const[g,d]=F.useState(""),[o,f]=F.useState(!1),{id:c}=Re(),u=se({api:`${Y.getEmployeeDocuments}?emp_id=${c}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),a=Q({}),v=async r=>{De("Are you sure?","Please confirm",async()=>{var l,S,N;try{const q=await a.mutateAsync({api:`${Y.deleteEmployeeDocument}`,data:{id:Se(r.toString())}});(l=q==null?void 0:q.data)!=null&&l.success?(M.success(((S=q==null?void 0:q.data)==null?void 0:S.message)||"Deleted successfully"),u.refetch()):M.error(((N=q==null?void 0:q.data)==null?void 0:N.message)||"Failed to delete")}catch(q){M.error("Error deleting item"),console.error("Delete Error:",q)}})},m=r=>{var l;return((l=r.split(".").pop())==null?void 0:l.toLowerCase())||""},j=r=>{const l=m(r);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(l)},h=r=>m(r)==="pdf";return e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),e.jsx(Js,{title:o?"Edit Document":"Attach Document",id:x,edit:o,setEdit:f,refetch:u.refetch,getDataById:n})]}),u.isLoading?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(Le,{})}):e.jsx(e.Fragment,{children:((s=(t=u==null?void 0:u.data)==null?void 0:t.data)==null?void 0:s.length)===0?e.jsx(ee,{className:"border-2 border-dashed border-gray-300 bg-white",children:e.jsxs(le,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:e.jsx(we,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mt-2 text-center text-gray-600",children:g?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):e.jsx("div",{className:"space-y-4",children:(E=(y=u==null?void 0:u.data)==null?void 0:y.data)==null?void 0:E.map(r=>e.jsx(ee,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[j(r==null?void 0:r.doc_path)?e.jsx("img",{src:r.doc_path,alt:(r==null?void 0:r.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:l=>{var S,N;l.currentTarget.style.display="none",(N=(S=l.currentTarget.parentElement)==null?void 0:S.querySelector(".fallback-icon"))==null||N.classList.remove("hidden")}}):h(r==null?void 0:r.doc_path)?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:e.jsx(ps,{className:"h-12 w-12 text-red-600"})})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:e.jsx(we,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:e.jsx(we,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("div",{className:"absolute bottom-1 left-1",children:e.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:m(r==null?void 0:r.doc_path)||"file"})}),e.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[e.jsx("a",{href:r.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:e.jsx(Us,{className:"h-3 w-3"})}),e.jsx("a",{href:r.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:e.jsx(qs,{className:"h-3 w-3"})})]})})]}),e.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(r==null?void 0:r.doc_name)||"Document"}),e.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(r==null?void 0:r.description)||"No description available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"whitespace-nowrap",children:he(r==null?void 0:r.created_at).format("DD MMM YYYY")})]}),e.jsxs("a",{href:r.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[e.jsx($s,{className:"h-4 w-4"}),"Open"]}),e.jsx(G,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>v(r==null?void 0:r.id),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})})})]})},r==null?void 0:r.id))})})]})})}const Xs=de().shape({family_member_name:p().required("Family member name is required"),relationship:p().required("Relationship is required"),dob:p().required("Date of birth is required"),address:p().required("Address is required"),is_dependent:ve().default(!1),isNominee:ve().default(!1),nominee_percentage:Ne().nullable().when("isNominee",{is:!0,then:x=>x.required("Nominee percentage is required when marked as nominee").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),otherwise:x=>x.notRequired()})}),Zs=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function Qs({title:x="Add Family Member",id:n,edit:g,refetch:d,getDataById:o}){var t;const f=Q({}),c=F.useRef(null),{id:u}=Re(),{data:a}=se({api:`${(t=Y)==null?void 0:t.getFamilyMemberById}/${n}`,key:"getFamilyMemberById",options:{enabled:g&&!!n}}),v=ge({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null},resolver:fe(Xs)}),m=v.watch("isNominee"),j=async s=>{var y,E,r,l,S,N,q,V;try{const k={emp_id:u,family_member_name:s.family_member_name,relationship:s.relationship,dob:s.dob,address:s.address,is_dependent:s.is_dependent||!1,isNominee:s.isNominee||!1,nominee_percentage:s.isNominee?s.nominee_percentage:null};if(g&&n){const _=await f.mutateAsync({api:`${Y.updateFamilyMemberById}/${n}`,data:k});(y=_.data)!=null&&y.success?(M.success(((E=_==null?void 0:_.data)==null?void 0:E.message)||"Family member updated successfully"),(r=c.current)==null||r.click()):M.error(((l=_.data)==null?void 0:l.message)||"Failed to update family member")}else{const _=await f.mutateAsync({api:Y.createFamily,data:k});(S=_.data)!=null&&S.success?(M.success(((N=_==null?void 0:_.data)==null?void 0:N.message)||"Family member added successfully"),(q=c.current)==null||q.click()):M.error(((V=_.data)==null?void 0:V.message)||"Failed to add family member")}v.reset(),d==null||d()}catch(k){console.error("Submit Error:",k),M.error("An error occurred while processing your request")}};F.useEffect(()=>{var s,y,E,r,l,S,N;g&&a?v.reset({family_member_name:((s=a==null?void 0:a.data)==null?void 0:s.family_member_name)||"",relationship:((y=a==null?void 0:a.data)==null?void 0:y.relationship)||"",dob:((E=a==null?void 0:a.data)==null?void 0:E.dob)||"",address:((r=a==null?void 0:a.data)==null?void 0:r.address)||"",is_dependent:((l=a==null?void 0:a.data)==null?void 0:l.is_dependent)||!1,isNominee:((S=a==null?void 0:a.data)==null?void 0:S.isNominee)||!1,nominee_percentage:((N=a==null?void 0:a.data)==null?void 0:N.nominee_percentage)||null}):v.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null})},[g,a]);const h=v.formState.isSubmitting||f.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),e.jsx(ke,{className:"sm:max-w-[500px]",children:e.jsxs(je,{methods:v,onSubmit:v.handleSubmit(j),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(Ue,{children:g?"Update family member information":"Add a new family member"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(b,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx("div",{children:e.jsx(te,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Zs})}),e.jsx("div",{children:e.jsx(b,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),e.jsx("div",{children:e.jsx(b,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(We,{name:"is_dependent",label:"Mark as Dependent"}),e.jsx(We,{name:"isNominee",label:"Mark as Nominee"}),m&&e.jsx("div",{className:"ml-6",children:e.jsx(b,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:c,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:h,children:g?"Update":"Save"})]})]})})]})}function Bs({id:x,getDataById:n}){var m,j,h,t;const[g,d]=F.useState(""),[o,f]=F.useState(!1),c=se({api:`${Y.getAllFamilyDetail}?emp_id=${x}`,key:"getEmployeeFamilyDetailsId",value:[x],options:{enabled:!0}}),u=Q({}),a=async s=>{De("Are you sure?","Please confirm",async()=>{var y,E,r;try{const l=await u.mutateAsync({api:`${Y.deleteFamilyMember}`,data:{id:Se(s.toString())}});(y=l==null?void 0:l.data)!=null&&y.success?(M.success(((E=l==null?void 0:l.data)==null?void 0:E.message)||"Deleted successfully"),c.refetch()):M.error(((r=l==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete")}catch(l){M.error("Error deleting family member"),console.error("Delete Error:",l)}})},v=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-screen bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),e.jsx(Qs,{title:o?"Edit Family Member":"Add Family Member",id:x,edit:o,setEdit:f,refetch:c.refetch,getDataById:n})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.isLoading?e.jsx(ee,{children:e.jsx(le,{className:"flex h-32 items-center justify-center",children:e.jsx(Le,{})})}):e.jsxs(e.Fragment,{children:[(j=(m=c==null?void 0:c.data)==null?void 0:m.data)==null?void 0:j.map(s=>e.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(ze,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ge,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${v(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>a(s==null?void 0:s.id),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(le,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:he(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(re,{className:"h-4 w-4 text-green-500"}):e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",he(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((t=(h=c==null?void 0:c.data)==null?void 0:h.data)==null?void 0:t.length)===0&&e.jsx(ee,{className:"py-12 text-center",children:e.jsxs(le,{children:[e.jsx(ne,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(G,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const ea=de().shape({name:p().required("Name is required"),mobile:p().required("Mobile is required"),altMobile:p().required("Alternate Mobile is required"),email:p().email("Invalid email").required("Email is required"),address:p().required("Address is required"),userType:p().required("User Type is required"),module_name:p().optional()});function cs({title:x="Add New User",edit:n,moduleAccessRefetch:g,getDataById:d,userData:o}){var X,xe,ce,J,z,ae,$e,L,T;const f=vs(),c=Q({}),u=F.useRef(null),a=ws(),{user:v}=us(),m=((ce=(xe=(X=d==null?void 0:d.data)==null?void 0:X.data)==null?void 0:xe.email)==null?void 0:ce.split("@")[0])||"",j=((J=localStorage.getItem("ulbName"))==null?void 0:J.split(" ")[0])||"",h=F.useMemo(()=>{var w,A,$,U,O,D,I,W,K,be,Ze,Qe;return n?{name:(o==null?void 0:o.name)||"",mobile:(o==null?void 0:o.mobile)||"",altMobile:(o==null?void 0:o.alternateMobile)||"",email:(o==null?void 0:o.email)||"",address:(o==null?void 0:o.address)||"",userType:(o==null?void 0:o.user_type)||""}:{name:((A=(w=d==null?void 0:d.data)==null?void 0:w.data)==null?void 0:A.emp_name)||"",mobile:((U=($=d==null?void 0:d.data)==null?void 0:$.data)==null?void 0:U.contact_no)||"",altMobile:((D=(O=d==null?void 0:d.data)==null?void 0:O.data)==null?void 0:D.emergency_contact_no)||((W=(I=d==null?void 0:d.data)==null?void 0:I.data)==null?void 0:W.contact_no)||"",email:"",address:((be=(K=d==null?void 0:d.data)==null?void 0:K.data)==null?void 0:be.emp_present_address)||((Qe=(Ze=d==null?void 0:d.data)==null?void 0:Ze.data)==null?void 0:Qe.emp_permanent_address)||"",userType:""}},[d]),t=ge({defaultValues:h,resolver:fe(ea)}),s=((z=t.watch("userType"))==null?void 0:z.replace(/\s+/g,""))||"";F.useEffect(()=>{t.reset(h)},[h,t]),F.useEffect(()=>{t!=null&&t.watch("userType")&&!n&&t.setValue("email",`${m}@${s.toLocaleLowerCase()}.${j.toLocaleLowerCase()}`)},[t,m,s,j]);const y={PTMS:"Public Transport Management System",PTMS_ALL_ULB:"PTMS All Ulb"},E="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",r=async w=>{const A=t.watch("module_name");A===y.PTMS||A===y.PTMS_ALL_ULB?await l(w,A):await S(w)},l=async(w,A)=>{var D,I,W,K;const $=A===y.PTMS?(D=He)==null?void 0:D.onBoardingConductor:(I=He)==null?void 0:I.onBoardingConductorNew,U=await i($);if(!((W=U==null?void 0:U.data)!=null&&W.status))return;const O=await N(w);(K=O==null?void 0:O.data)!=null&&K.status&&(await C(String(O.data.data.id),U.data.data.cunique_id||""),R())},S=async w=>{var U,O;const A=await N(w);if(await C(String(A.data.data.id??(o==null?void 0:o.id))),!((U=A==null?void 0:A.data)!=null&&U.status))return;const $=n?"User updated successfully":"User created successfully";M.success($),g==null||g(),(O=u.current)==null||O.click()},N=async w=>{try{const A=await q(),$=V(w,A);return n?await k($):await _($)}catch(A){throw console.error("Submit Error:",A),A}},q=async()=>{var U,O;const w=((O=(U=d.data)==null?void 0:U.data)==null?void 0:O.emp_image)||E,$=await(await fetch(w)).blob();return new File([$],"employee_image.jpg",{type:$.type})},V=(w,A)=>{var U,O;const $=new FormData;return $.append("name",w.name),$.append("mobile",w.mobile),$.append("altMobile",w.altMobile),$.append("email",w.email),$.append("address",w.address),$.append("userType",w.userType),$.append("ulbId",((O=(U=d.data)==null?void 0:U.data)==null?void 0:O.ulb_id)||""),$.append("photo",A),$.append("id",parseInt(o==null?void 0:o.id)||""),$},k=async w=>await c.mutateAsync({api:pe.updateUser,data:w}),_=async w=>{const A=await c.mutateAsync({api:pe.createUserAuth,data:w});return await P(A),A},P=async w=>{var A,$,U,O,D;await c.mutateAsync({api:(A=Y)==null?void 0:A.createModuleAccess,data:{emp_id:String((U=($=d==null?void 0:d.data)==null?void 0:$.data)==null?void 0:U.id),module_access_id:String((D=(O=w==null?void 0:w.data)==null?void 0:O.data)==null?void 0:D.id),module_user_type:t.getValues("userType")}})},i=async w=>{var A,$,U,O,D,I;try{return await c.mutateAsync({api:w,data:{firstName:(($=(A=d==null?void 0:d.data)==null?void 0:A.data)==null?void 0:$.emp_name)||"",bloodGrp:((O=(U=d==null?void 0:d.data)==null?void 0:U.data)==null?void 0:O.emp_blood_group)||"",mobileNo:t.getValues("mobile"),emailId:t.getValues("email"),adhar_no:(I=(D=d==null?void 0:d.data)==null?void 0:D.data)==null?void 0:I.aadhaar_no}})}catch(W){console.error("PTMS user creation error:",W);const K=W instanceof Error?W.message:"An error occurred while creating PTMS User";throw M.error(K),W}},C=async(w,A)=>{var $,U,O;try{return await c.mutateAsync({api:($=He)==null?void 0:$.updateUserName,data:{id:Number(w),...A&&{user_name:A},emp_id:String((O=(U=d==null?void 0:d.data)==null?void 0:U.data)==null?void 0:O.id)||""}})}catch(D){console.error("Update User Name error:",D);const I=D instanceof Error?D.message:"An error occurred while updating User Name";throw M.error(I),D}},R=()=>{var w;g==null||g(),M.success("User created successfully"),(w=u.current)==null||w.click()},H=t.formState.isSubmitting||c.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),x]})}),e.jsx(ke,{className:"sm:max-w-[500px]",children:e.jsxs(je,{methods:t,onSubmit:t.handleSubmit(r),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(Ue,{children:n?"Update user information":"Add a new user to the system"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(te,{name:"module_name",isSearch:!0,data:(($e=(ae=f==null?void 0:f.data)==null?void 0:ae.data)==null?void 0:$e.map(w=>({label:String(w.module_name),value:String(w.module_name)})))||[]})}),e.jsx("div",{children:e.jsx(te,{label:"User Type",name:"userType",isSearch:!0,selectedText:"Select user type",data:((T=(L=a==null?void 0:a.data)==null?void 0:L.data)==null?void 0:T.map(w=>({label:String(w),value:String(w)})))||[]})}),e.jsx("div",{children:e.jsx(b,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(b,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),e.jsx(b,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),e.jsx("div",{children:e.jsx(b,{label:"Email",disabled:n,name:"email",type:"email",placeholder:"Enter email address"})}),e.jsx("div",{children:e.jsx(b,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(qe,{})]}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:u,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:H,children:n?"Update":"Save"})]})]})})]})}function sa({userId:x}){const n=_s(x),g=Q({}),[d,o]=F.useState([]),[f,c]=F.useState({}),[u,a]=F.useState("");console.log("permittedRoleAuthData",n),F.useEffect(()=>{var s;n!=null&&n.data&&o(((s=n.data)==null?void 0:s.data)||[])},[n]);const v=async(s,y)=>{var E,r;c(l=>({...l,[s]:!0}));try{const l=await g.mutateAsync({api:`${(E=pe)==null?void 0:E.createWorkFlowRoleAuth}`,data:{userId:parseInt(x),wfRoleId:s,permissionStatus:!y}});l&&((r=l.data)!=null&&r.status)&&(n.refetch(),o(S=>S.map(N=>N.id===s?{...N,permission_status:!y}:N))),M.success("Permission updated successfully")}catch(l){console.error("Error updating permission:",l)}finally{c(l=>({...l,[s]:!1}))}},m=d.filter(s=>s.role_name.toLowerCase().includes(u.toLowerCase())),j=d.filter(s=>s.permission_status).length,h=d.length,t=d.some(s=>s.permission_status);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[j," of ",h," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:u,onChange:s=>a(s.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:m.map(s=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${s.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",s.id]}),s.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:s.role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:s.permission_status,onChange:()=>v(s.id,s.permission_status),disabled:f[s.id]||!s.permission_status&&t,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${f[s.id]||!s.permission_status&&t?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${s.permission_status?"translate-x-5":"translate-x-0"} ${f[s.id]?"animate-pulse":""}`,children:f[s.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},s.id))}),m.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',u,'"']})})]})})}function aa({userId:x}){const n=Ss(x),g=Q({}),[d,o]=F.useState([]),[f,c]=F.useState({}),[u,a]=F.useState("");F.useEffect(()=>{var t;n!=null&&n.data&&o(((t=n.data)==null?void 0:t.data)||[])},[n]);const v=async(t,s)=>{var y,E;c(r=>({...r,[t]:!0}));try{const r=await g.mutateAsync({api:`${(y=pe)==null?void 0:y.createMenuRoleAuth}`,data:{userId:parseInt(x),menuRoleId:t,permissionStatus:!s}});r&&((E=r.data)!=null&&E.status)&&(n.refetch(),o(l=>l.map(S=>S.id===t?{...S,permission_status:!s}:S))),M.success("Permission updated successfully")}catch(r){console.error("Error updating permission:",r)}finally{c(r=>({...r,[t]:!1}))}},m=d.filter(t=>t.menu_role_name.toLowerCase().includes(u.toLowerCase())),j=d.filter(t=>t.permission_status).length,h=d.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[j," of ",h," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:u,onChange:t=>a(t.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:m.map(t=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${t.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",t.id]}),t.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:t.menu_role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:t.permission_status,onChange:()=>v(t.id,t.permission_status),disabled:f[t.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${f[t.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${t.permission_status?"translate-x-5":"translate-x-0"} ${f[t.id]?"animate-pulse":""}`,children:f[t.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},t.id))}),m.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',u,'"']})})]})})}function ta({userId:x}){const n=Es(x),g=Q({}),[d,o]=F.useState([]),[f,c]=F.useState({}),[u,a]=F.useState("");F.useEffect(()=>{var t;n!=null&&n.data&&o(((t=n.data)==null?void 0:t.data)||[])},[n]);const v=async(t,s)=>{var y,E;c(r=>({...r,[t]:!0}));try{const r=await g.mutateAsync({api:`${(y=pe)==null?void 0:y.createWardAuth}`,data:{userId:parseInt(x),wardList:[{permissionStatus:!s,wardId:t}]}});r&&((E=r.data)!=null&&E.status)&&(n.refetch(),o(l=>l.map(S=>S.id===t?{...S,permission_status:!s}:S))),M.success("Permission updated successfully")}catch(r){console.error("Error updating permission:",r)}finally{c(r=>({...r,[t]:!1}))}},m=d.filter(t=>t.ward_name.toString().includes(u)),j=d.filter(t=>t.permission_status).length,h=d.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[j," of ",h," wards enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search wards...",value:u,onChange:t=>a(t.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:m.map(t=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${t.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",t.id]}),t.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",t.ward_name]})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:t.permission_status,onChange:()=>v(t.id,t.permission_status),disabled:f[t.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${f[t.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${t.permission_status?"translate-x-5":"translate-x-0"} ${f[t.id]?"animate-pulse":""}`,children:f[t.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},t.id))}),m.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',u,'"']})})]})})}function ra({getDataById:x}){var v,m,j,h,t,s,y,E;const[n,g]=F.useState(""),[d,o]=F.useState("workflow"),f=As(Se(String((m=(v=x==null?void 0:x.data)==null?void 0:v.data)==null?void 0:m.id))),c=Cs({api:(j=pe)==null?void 0:j.getUsrByIdAuth,config:{id:n},value:[n],options:{enabled:!!n}}),u=(s=(t=(h=c==null?void 0:c.data)==null?void 0:h.data)==null?void 0:t.data)==null?void 0:s[0],a=[{id:"workflow",label:"Workflow Permission",icon:Vs},{id:"permittedRoles",label:" Permitted Roles",icon:Ts},{id:"ward",label:"Ward Role",icon:xs}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("div",{children:e.jsxs("select",{value:n,onChange:r=>g(r.target.value),className:`h-9 w-full cursor-pointer rounded-md border-2 border-slate-300 bg-slate-50 px-3 transition-colors\r
                     duration-200 hover:border-blue-400 focus:border-blue-400 focus:outline-none focus:ring-2\r
                     focus:ring-blue-500 md:w-52`,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Module Access"}),(E=(y=f==null?void 0:f.data)==null?void 0:y.data)==null?void 0:E.map(r=>e.jsx("option",{value:r.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:r.module_user_type},r.module_access_id))]})}),e.jsx(cs,{title:"Add User",edit:!1,moduleAccessRefetch:f.refetch,getDataById:x,userData:u})]})]}),u?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx(cs,{title:"Edit User",edit:!0,moduleAccessRefetch:f.refetch,getDataById:x,userData:u})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(oe,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:u.id})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:e.jsx(oe,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:u.user_name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(oe,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:u.name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(ms,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:u.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:e.jsx(Xe,{className:"h-5 w-5 text-cyan-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:u.mobile})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(Ve,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),e.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:u.user_type})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(Ve,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium ${u.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:u.suspended?"Suspended":"Active"})]})]}),u.photo&&u.photo!=="/"&&e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:e.jsx(oe,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),e.jsx("img",{src:u.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:a.map(r=>{const l=r.icon;return e.jsxs("button",{onClick:()=>o(r.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all ${d===r.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:[e.jsx(l,{className:"h-4 w-4"}),r.label]},r.id)})})}),e.jsxs("div",{className:"p-6",children:[d==="workflow"&&e.jsx(sa,{userId:n}),d==="permittedRoles"&&e.jsx(aa,{userId:n}),d==="ward"&&e.jsx(ta,{userId:n})]})]})]}):e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:e.jsx(Ve,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function la({id:x,getDataById:n}){var P;const[g,d]=F.useState("calendar"),[o,f]=F.useState(""),[c,u]=F.useState(new Date().getFullYear()),[a,v]=F.useState("all"),m=se({api:`${Y.getAllAttendanceByEmpId}?emp_id=${x}`,key:"getAllAttendanceByEmpId",options:{enabled:!0}}),j=((P=m==null?void 0:m.data)==null?void 0:P.data)||[],h=i=>{switch(i){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:e.jsx(re,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:e.jsx(ls,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:e.jsx(Z,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:e.jsx(is,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:e.jsx(ie,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},t=i=>new Date(i).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),s=i=>i?new Date(i).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"--:--",y=F.useMemo(()=>{if(!o.trim())return j;const i=o.toLowerCase();return j.filter(C=>`${C.month} ${C.year}`.toLowerCase().includes(i))},[j,o]),E=F.useMemo(()=>g!=="calendar"?y:j.filter(i=>{const C=parseInt(i.year)===c,R=a==="all"||i.month===a;return C&&R}),[j,c,a,g,y]),r=(g==="calendar"?E:y).reduce((i,C)=>(C.attendance_status===1?i.present++:C.attendance_status===2?i.leave++:i.absent++,i.totalHours+=parseInt(C.working_hours||"0"),i.totalDays++,i),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),l=y.reduce((i,C)=>{const R=`${C.month} ${C.year}`;return i[R]||(i[R]=[]),i[R].push(C),i},{}),S=F.useMemo(()=>{const i=new Date().getFullYear();return[i-1,i,i+1]},[j]),N=F.useMemo(()=>{const i={};return j.forEach(C=>{const R=parseInt(C.year),H=C.month;i[R]||(i[R]={}),i[R][H]||(i[R][H]={});const X=new Date(C.date).getDate().toString();i[R][H][X]=C}),i},[j]),q=(i,C)=>{const R=new Date(`${i} 1, ${C}`).getMonth();return new Date(C,R+1,0).getDate()},V=(i,C)=>{const R=new Date(`${i} 1, ${C}`).getMonth();return new Date(C,R,1).getDay()},k=F.useMemo(()=>{const i=new Set;return j.forEach(C=>{i.add(`${C.month} ${C.year}`)}),Array.from(i).sort((C,R)=>{const[H,X]=C.split(" "),[xe,ce]=R.split(" "),J=new Date(`${H} 1, ${X}`);return new Date(`${xe} 1, ${ce}`).getTime()-J.getTime()})},[j]),_=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[e.jsx("div",{children:e.jsx("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Attendance Records"})}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Ls,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:o,onChange:i=>f(i.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),o&&e.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ie,{className:"h-4 w-4"})})]})]}),o&&k.filter(i=>i.toLowerCase().includes(o.toLowerCase())).length>0&&e.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:k.filter(i=>i.toLowerCase().includes(o.toLowerCase())).slice(0,5).map(i=>e.jsx("button",{onClick:()=>f(i),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:i},i))})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[e.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.present})]}),e.jsx(re,{className:"h-10 w-10 text-green-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.absent})]}),e.jsx(ie,{className:"h-10 w-10 text-red-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.leave})]}),e.jsx(ls,{className:"h-10 w-10 text-blue-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.totalHours})]}),e.jsx(Ie,{className:"h-10 w-10 text-purple-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.totalDays})]}),e.jsx(Z,{className:"h-10 w-10 text-indigo-500"})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>d("calendar"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${g==="calendar"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(is,{className:"h-4 w-4"}),"Calendar View"]}),e.jsxs("button",{onClick:()=>d("list"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${g==="list"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(gs,{className:"h-4 w-4"}),"List View"]})]})}),g==="calendar"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:S.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),e.jsx("select",{value:c,onChange:i=>u(parseInt(i.target.value)),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:S.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Month:"}),e.jsxs("select",{value:a,onChange:i=>v(i.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Months"}),_.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),a!=="all"&&e.jsxs("button",{onClick:()=>v("all"),className:"flex items-center gap-1 rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 hover:bg-gray-200",children:[e.jsx(ie,{className:"h-4 w-4"}),"Clear Filter"]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2",children:_.filter(i=>a==="all"||a===i).map(i=>{var ce;const C=q(i,c),R=V(i,c),H=Array.from({length:C},(J,z)=>z+1),X=Array.from({length:R},(J,z)=>z),xe=((ce=N[c])==null?void 0:ce[i])||{};return e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"mb-3 text-center text-lg font-semibold text-gray-800",children:i}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((J,z)=>e.jsx("div",{className:"p-1 text-center text-xs font-semibold text-gray-600",children:J},`${i}-${J}-${z}`)),X.map(J=>e.jsx("div",{className:"p-1"},`empty-${i}-${J}`)),H.map(J=>{const z=xe[J.toString()],ae=z?h(z.attendance_status):null;return e.jsxs("div",{className:`min-h-24 rounded border p-1.5 text-xs transition-all ${z?ae==null?void 0:ae.color:"border-gray-200 bg-gray-50"} ${z?"cursor-pointer hover:shadow-md":""}`,children:[e.jsx("div",{className:"mb-1 font-semibold text-gray-700",children:J}),z&&ae&&e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:ae.iconColor,children:ae.icon}),e.jsx("span",{className:"text-[10px] font-medium",children:ae.label})]}),z.attendance_status===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-[9px] text-gray-600",children:["In: ",s(z.emp_in_time)]}),e.jsxs("div",{className:"text-[9px] text-gray-600",children:["Out: ",s(z.emp_out_time)]}),e.jsxs("div",{className:"text-[10px] font-medium text-gray-700",children:[z.working_hours,"h"]})]})]})]},`${i}-${J}`)})]})]},i)})})]}),g==="list"&&e.jsx(e.Fragment,{children:Object.entries(l).map(([i,C])=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:i})]}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:C.map(R=>{const H=h(R.attendance_status);return e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t(R.date)})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${H.color}`,children:[e.jsx("span",{className:H==null?void 0:H.iconColor,children:H==null?void 0:H.icon}),H==null?void 0:H.label]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),s(R.emp_in_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(Ie,{className:"h-4 w-4 text-gray-400"}),s(R.emp_out_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[R.working_hours||"0","h"]})})]},R.id)})})]})})})]},i))}),y.length===0&&e.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[e.jsx(Z,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg text-gray-500",children:o?"No attendance records found for the search term":"No attendance records found"}),o&&e.jsx("button",{onClick:()=>f(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const ia=de().shape({education:Ke().of(de().shape({qualification:p().notRequired(),specialization:p().required(),board_university:p().notRequired(),passing_year:p().notRequired(),percentage:p().notRequired(),grade:p().notRequired(),place:p().notRequired()})),trainingInfo:Ke().of(de().shape({training_name:p().notRequired(),training_type:p().notRequired(),institute:p().notRequired(),start_date:p().notRequired(),end_date:p().notRequired(),duration:p().notRequired(),certificate:os().notRequired()}))});function na({id:x,getDataById:n}){var r,l;const g=Q({}),d=Q({}),o=se({api:`${Y.getEducationDetails}?emp_id=${x}`,key:"get-employee-qualificationsdddddddd",value:[x],options:{enabled:!!x}}),f=se({api:`${Y.getEmployeeTrainings}?emp_id=${x}`,key:"get-employee-training",value:[x],options:{enabled:!!x}}),c=F.useMemo(()=>{var S,N,q,V;return((N=(S=o==null?void 0:o.data)==null?void 0:S.data)==null?void 0:N.length)>0?(V=(q=o==null?void 0:o.data)==null?void 0:q.data)==null?void 0:V.map(k=>{var _;return{qualification:k.qualification,specialization:k.specialization,board_university:k.board_university,passing_year:(_=k.passing_year)==null?void 0:_.toString(),percentage:k.percentage,grade:k.grade,place:k.place}}):[{qualification:"Matriculation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Intermediate",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""},{qualification:"Post Graduation",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""}]},[(r=o==null?void 0:o.data)==null?void 0:r.data]),u=F.useMemo(()=>{var S,N,q,V;return((N=(S=f==null?void 0:f.data)==null?void 0:S.data)==null?void 0:N.length)>0?(V=(q=f==null?void 0:f.data)==null?void 0:q.data)==null?void 0:V.map(k=>({training_name:k.training_name,training_type:String(k.training_type),institute:k.institute,start_date:k.start_date,end_date:k.end_date,duration:k.duration,certificate:null})):[{training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null}]},[(l=f==null?void 0:f.data)==null?void 0:l.data]),a=ge({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{education:c,trainingInfo:u},resolver:fe(ia)}),v=Je({control:a.control,name:"education"}),m=Je({control:a.control,name:"trainingInfo"});F.useEffect(()=>{a.reset({trainingInfo:u,education:c})},[u,c]);const j=()=>{v.append({qualification:"",specialization:"",board_university:"",passing_year:"",percentage:"",grade:"",place:""})},h=S=>{v.remove(S)},t=()=>{m.append({training_name:"",training_type:"",institute:"",start_date:"",end_date:"",duration:"",certificate:null})},s=S=>{m.remove(S)},y=async()=>{var q,V,k,_;if(a.clearErrors("education"),!await a.trigger("education")){const P=a.formState.errors.education;if(P&&Array.isArray(P)){for(let i=0;i<P.length;i++)if(P[i]){const C=Object.keys(P[i]||{});if(C.length>0){const R=`education.${i}.${C[0]}`;a.setFocus(R);break}}}return}const N=a.watch("education");try{const P=await g.mutateAsync({api:(q=Y)==null?void 0:q.addEducationDetails,data:{emp_id:String(Be(x)),qualifications:N}});(V=P==null?void 0:P.data)!=null&&V.success?M.success(((k=P==null?void 0:P.data)==null?void 0:k.message)||"Education details submitted successfully"):M.error(((_=P==null?void 0:P.data)==null?void 0:_.message)||"Failed to submit Education details")}catch(P){console.error("Error submitting Education details:",P),M.error("Failed to submit Education details")}},E=async()=>{var q,V,k;if(a.clearErrors("trainingInfo"),!await a.trigger("trainingInfo")){const _=a.formState.errors.trainingInfo;if(_&&Array.isArray(_)){for(let P=0;P<_.length;P++)if(_[P]){const i=Object.keys(_[P]||{});if(i.length>0){const C=`trainingInfo.${P}.${i[0]}`;a.setFocus(C);break}}}return}const N=a.getValues("trainingInfo");try{const _=await d.mutateAsync({api:`${Y.createEmployeeTraining}`,data:{emp_id:String(Be(x)),trainings:N}});(q=_==null?void 0:_.data)!=null&&q.success?M.success(((V=_==null?void 0:_.data)==null?void 0:V.message)||"Training details submitted successfully"):M.error(((k=_==null?void 0:_.data)==null?void 0:k.message)||"Failed to submit Training details")}catch(_){console.error("Error submitting Training details:",_),M.error("Failed to submit Training details")}};return e.jsx("div",{children:e.jsx(je,{methods:a,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded bg-blue-100 p-1",children:e.jsx(Hs,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Education Records"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Academic qualifications"})]})]})}),e.jsxs("div",{className:"space-y-2.5",children:[v==null?void 0:v.fields.map((S,N)=>e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-blue-300 hover:shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-xs font-semibold text-white",children:N+1}),e.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",N+1]})]}),N>=4&&e.jsx("button",{type:"button",onClick:()=>h(N),className:"rounded p-1 text-red-600 hover:bg-red-50",children:e.jsx(ue,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-7",children:[e.jsx(b,{name:`education[${N}].qualification`,label:"Qualification",disabled:N<4,placeholder:"Qualification"}),e.jsx(b,{name:`education[${N}].specialization`,label:"Specialization",placeholder:"Specialization"}),e.jsx(b,{name:`education[${N}].board_university`,label:"Board/University",placeholder:"Board/University"}),e.jsx(b,{name:`education[${N}].passing_year`,label:"Passing Year",placeholder:"Year",inputValidation:["number","zip"]}),e.jsx(b,{name:`education[${N}].percentage`,label:"Marks %",placeholder:"Marks",inputValidation:["number","zip"]}),e.jsx(b,{name:`education[${N}].grade`,label:"Grade",placeholder:"Grade"}),e.jsx(b,{name:`education[${N}].place`,label:"Place",placeholder:"Location"})]})]},S.id)),e.jsxs("div",{className:"flex justify-center pt-0.5",children:[e.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-1 rounded-md border border-dashed border-blue-300 bg-blue-50 px-3 py-1.5 text-xs font-medium text-blue-700 transition-all hover:border-blue-400 hover:bg-blue-100",children:[e.jsx(Ye,{size:13}),"Add Record"]}),e.jsxs(me,{type:"button",isLoading:g.isPending,onClick:y,className:`\r
ml-3 inline-flex items-center gap-1 rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1\r
                  `,children:[e.jsx(Ye,{size:13}),"Submit Education Details"]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"mb-3 flex items-center justify-between border-b border-gray-200 pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded bg-indigo-100 p-1",children:e.jsx(Ds,{className:"h-4 w-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Training Records"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Professional training"})]})]})}),e.jsxs("div",{className:"space-y-2.5",children:[m==null?void 0:m.fields.map((S,N)=>e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3 transition-all hover:border-indigo-300 hover:shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-indigo-600 text-xs font-semibold text-white",children:N+1}),e.jsxs("span",{className:"text-xs font-semibold text-gray-800",children:["Record #",N+1]})]}),N>=1&&e.jsx("button",{type:"button",onClick:()=>s(N),className:"rounded p-1 text-red-600 transition-all hover:bg-red-50",children:e.jsx(ue,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5 sm:grid-cols-6",children:[e.jsx(b,{name:`trainingInfo[${N}].training_name`,label:"Training Name",placeholder:"Training Name"}),e.jsx("div",{children:e.jsx(te,{name:`trainingInfo[${N}].training_type`,label:"Type",data:[{label:"Online",value:"Online"},{label:"Offline",value:"Offline"},{label:"Hybrid",value:"Hybrid"},{label:"Workshop",value:"Workshop"},{label:"Certification",value:"Certification"}]})}),e.jsx(b,{name:`trainingInfo[${N}].institute`,label:"Institute",placeholder:"Institute"}),e.jsx(b,{type:"date",name:`trainingInfo[${N}].start_date`,label:"Start Date",placeholder:"Start Date"}),e.jsx(b,{type:"date",name:`trainingInfo[${N}].end_date`,label:"End Date",placeholder:"End Date"}),e.jsx(b,{name:`trainingInfo[${N}].duration`,label:"Duration",placeholder:"Duration"})]})]},S.id)),e.jsxs("div",{className:"flex justify-center pt-0.5",children:[e.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center gap-1 rounded-md border border-dashed border-indigo-300 bg-indigo-50 px-3 py-1.5 text-xs font-medium text-indigo-700 transition-all hover:border-indigo-400 hover:bg-indigo-100",children:[e.jsx(Ye,{size:13}),"Add Record"]}),e.jsxs(me,{isLoading:d.isPending,type:"button",onClick:E,className:`ml-3 inline-flex items-center gap-1 rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white shadow-sm transition-all hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1\r
                    `,children:[e.jsx(Ye,{size:13}),"Submit Training Details"]})]})]})]})]})})})}function da({id:x,getDataById:n}){return e.jsx(na,{id:x,getDataById:n})}const ca=de().shape({scale:p().required("Scale is required"),increment_date:p().required("Increment date is required"),increment_amount:Ne().required("Increment amount is required").min(0,"Increment amount must be at least 0"),basic_pay_after_increment:Ne().required("Basic pay after increment is required").min(0,"Basic pay must be at least 0"),vide_order_no:p().required("Vide order no. is required"),vide_order_date:p().required("Vide order date is required")});function oa({title:x="Add Increment Details",id:n,edit:g,refetch:d,getDataById:o}){var h;const f=Q({}),c=F.useRef(null),{id:u}=Re(),{data:a}=se({api:`${(h=Y)==null?void 0:h.getFamilyMemberById}/${n}`,key:"getFamilyMemberById",options:{enabled:g&&!!n}}),v=ge({defaultValues:{scale:"",increment_date:"",increment_amount:0,basic_pay_after_increment:0,vide_order_no:"",vide_order_date:""},resolver:fe(ca)}),m=async t=>{var s,y,E,r,l,S,N,q;try{const V={emp_id:u,scale:t.scale,increment_date:t.increment_date,increment_amount:t.increment_amount,basic_pay_after_increment:t.basic_pay_after_increment,vide_order_no:t.vide_order_no,vide_order_date:t.vide_order_date};if(g&&n){const k=await f.mutateAsync({api:`${Y.updateFamilyMemberById}/${n}`,data:V});(s=k.data)!=null&&s.success?(M.success(((y=k==null?void 0:k.data)==null?void 0:y.message)||"Increment details updated successfully"),(E=c.current)==null||E.click()):M.error(((r=k.data)==null?void 0:r.message)||"Failed to update increment details")}else{const k=await f.mutateAsync({api:Y.createFamily,data:V});(l=k.data)!=null&&l.success?(M.success(((S=k==null?void 0:k.data)==null?void 0:S.message)||"Increment details added successfully"),(N=c.current)==null||N.click()):M.error(((q=k.data)==null?void 0:q.message)||"Failed to add increment details")}v.reset(),d==null||d()}catch(V){console.error("Submit Error:",V),M.error("An error occurred while processing your request")}};F.useEffect(()=>{var t,s,y,E,r,l;g&&a?v.reset({scale:((t=a==null?void 0:a.data)==null?void 0:t.scale)||"",increment_date:((s=a==null?void 0:a.data)==null?void 0:s.increment_date)||"",increment_amount:((y=a==null?void 0:a.data)==null?void 0:y.increment_amount)||0,basic_pay_after_increment:((E=a==null?void 0:a.data)==null?void 0:E.basic_pay_after_increment)||0,vide_order_no:((r=a==null?void 0:a.data)==null?void 0:r.vide_order_no)||"",vide_order_date:((l=a==null?void 0:a.data)==null?void 0:l.vide_order_date)||""}):v.reset({scale:"",increment_date:"",increment_amount:0,basic_pay_after_increment:0,vide_order_no:"",vide_order_date:""})},[g,a]);const j=v.formState.isSubmitting||f.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Increment Details"]})}),e.jsx(ke,{className:"sm:max-w-[500px]",children:e.jsxs(je,{methods:v,onSubmit:v.handleSubmit(m),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(Ue,{children:g?"Update increment information":"Add new increment details"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(b,{label:"Scale",name:"scale",placeholder:"Enter scale",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(b,{label:"Increment Date",name:"increment_date",type:"date",placeholder:"Select increment date"})}),e.jsx("div",{children:e.jsx(b,{label:"Increment Amount",name:"increment_amount",placeholder:"Enter increment amount",inputValidation:["number"]})}),e.jsx("div",{children:e.jsx(b,{label:"Basic Pay After Increment",name:"basic_pay_after_increment",placeholder:"Enter basic pay after increment",inputValidation:["number"]})}),e.jsx(qe,{}),e.jsx("div",{children:e.jsx(b,{label:"Vide Order No.",name:"vide_order_no",placeholder:"Enter vide order number",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(b,{label:"Vide Order Date",name:"vide_order_date",type:"date",placeholder:"Select vide order date"})})]}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:c,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:j,children:g?"Update":"Save"})]})]})})]})}function ma({id:x,getDataById:n}){var m,j,h,t;const[g,d]=F.useState(""),[o,f]=F.useState(!1),c=se({api:`${Y.getAllFamilyDetail}?emp_id=${x}`,key:"getEmployeeFamilyDetailsId",value:[x],options:{enabled:!0}}),u=Q({}),a=async s=>{De("Are you sure?","Please confirm",async()=>{var y,E,r;try{const l=await u.mutateAsync({api:`${Y.deleteFamilyMember}`,data:{id:Se(s.toString())}});(y=l==null?void 0:l.data)!=null&&y.success?(M.success(((E=l==null?void 0:l.data)==null?void 0:E.message)||"Deleted successfully"),c.refetch()):M.error(((r=l==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete")}catch(l){M.error("Error deleting family member"),console.error("Delete Error:",l)}})},v=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:" bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage the increment details of the employee"})}),e.jsx(oa,{title:o?"Edit Increment Detail":"Add Increment Detail",id:x,edit:o,setEdit:f,refetch:c.refetch,getDataById:n})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.isLoading?e.jsx(ee,{children:e.jsx(le,{className:"flex h-32 items-center justify-center",children:e.jsx(Le,{})})}):e.jsxs(e.Fragment,{children:[(j=(m=c==null?void 0:c.data)==null?void 0:m.data)==null?void 0:j.map(s=>e.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(ze,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ge,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${v(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>a(s==null?void 0:s.id),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(le,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:he(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(re,{className:"h-4 w-4 text-green-500"}):e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",he(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((t=(h=c==null?void 0:c.data)==null?void 0:h.data)==null?void 0:t.length)===0&&e.jsx(ee,{className:"py-12 text-center",children:e.jsxs(le,{children:[e.jsx(ne,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(G,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const xa=de().shape({designation_from:p().required("Designation from is required"),designation_to:p().required("Designation to is required"),scale_from:p().required("Scale from is required"),scale_to:p().required("Scale to is required"),vide_order_no:p().required("Vide order no. is required"),vide_order_date:p().required("Vide order date is required"),is_transfer:ve().default(!1)});function pa({title:x="Add Designation & Scale Details",id:n,edit:g,refetch:d,getDataById:o,empId:f}){var h;const c=Q({}),u=F.useRef(null),{data:a}=se({api:`${(h=Y)==null?void 0:h.getFamilyMemberById}/${n}`,key:"getDesignationScaleById",options:{enabled:g&&!!n}}),v=ge({defaultValues:{designation_from:"",designation_to:"",scale_from:"",scale_to:"",vide_order_no:"",vide_order_date:"",is_transfer:!1},resolver:fe(xa)}),m=async t=>{var s,y,E,r,l,S,N,q;try{const V={emp_id:f,designation_from:t.designation_from,designation_to:t.designation_to,scale_from:t.scale_from,scale_to:t.scale_to,vide_order_no:t.vide_order_no,vide_order_date:t.vide_order_date,is_transfer:t.is_transfer||!1};if(g&&n){const k=await c.mutateAsync({api:`${Y.addEducationDetails}/${n}`,data:V});(s=k.data)!=null&&s.success?(M.success(((y=k==null?void 0:k.data)==null?void 0:y.message)||"Details updated successfully"),(E=u.current)==null||E.click()):M.error(((r=k.data)==null?void 0:r.message)||"Failed to update details")}else{const k=await c.mutateAsync({api:Y.createAttendance,data:V});(l=k.data)!=null&&l.success?(M.success(((S=k==null?void 0:k.data)==null?void 0:S.message)||"Details added successfully"),(N=u.current)==null||N.click()):M.error(((q=k.data)==null?void 0:q.message)||"Failed to add details")}v.reset(),d==null||d()}catch(V){console.error("Submit Error:",V),M.error("An error occurred while processing your request")}};F.useEffect(()=>{var t,s,y,E,r,l,S;g&&a?v.reset({designation_from:((t=a==null?void 0:a.data)==null?void 0:t.designation_from)||"",designation_to:((s=a==null?void 0:a.data)==null?void 0:s.designation_to)||"",scale_from:((y=a==null?void 0:a.data)==null?void 0:y.scale_from)||"",scale_to:((E=a==null?void 0:a.data)==null?void 0:E.scale_to)||"",vide_order_no:((r=a==null?void 0:a.data)==null?void 0:r.vide_order_no)||"",vide_order_date:((l=a==null?void 0:a.data)==null?void 0:l.vide_order_date)||"",is_transfer:((S=a==null?void 0:a.data)==null?void 0:S.is_transfer)||!1}):v.reset({designation_from:"",designation_to:"",scale_from:"",scale_to:"",vide_order_no:"",vide_order_date:"",is_transfer:!1})},[g,a]);const j=v.formState.isSubmitting||c.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Promotion Details"]})}),e.jsx(ke,{className:"sm:max-w-[900px]",children:e.jsxs(je,{methods:v,onSubmit:v.handleSubmit(m),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(Ue,{children:g?"Update designation and scale information":"Add new designation and scale details"})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx(b,{name:"designation_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx(b,{name:"designation_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Scale"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx(b,{name:"scale_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx(b,{name:"scale_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order No."}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{name:"vide_order_no",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order Date"}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{name:"vide_order_date",type:"date",placeholder:"dd-mm-yyyy"})})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Transfer"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(We,{name:"is_transfer",label:"Yes"})})]})]}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:u,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:j,children:g?"Update":"Save"})]})]})})]})}function ha({id:x,getDataById:n}){var m,j,h,t;const[g,d]=F.useState(""),[o,f]=F.useState(!1),c=se({api:`${Y.getAllFamilyDetail}?emp_id=${x}`,key:"getEmployeeFamilyDetailsId",value:[x],options:{enabled:!0}}),u=Q({}),a=async s=>{De("Are you sure?","Please confirm",async()=>{var y,E,r;try{const l=await u.mutateAsync({api:`${Y.deleteFamilyMember}`,data:{id:Se(s.toString())}});(y=l==null?void 0:l.data)!=null&&y.success?(M.success(((E=l==null?void 0:l.data)==null?void 0:E.message)||"Deleted successfully"),c.refetch()):M.error(((r=l==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete")}catch(l){M.error("Error deleting family member"),console.error("Delete Error:",l)}})},v=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-7 bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Promotion Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage promotion details of the employee"})]}),e.jsx(pa,{title:o?"Edit Promotion Detail":"Add Promotion Detail",id:x,edit:o,setEdit:f,refetch:c.refetch,getDataById:n})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.isLoading?e.jsx(ee,{children:e.jsx(le,{className:"flex h-32 items-center justify-center",children:e.jsx(Le,{})})}):e.jsxs(e.Fragment,{children:[(j=(m=c==null?void 0:c.data)==null?void 0:m.data)==null?void 0:j.map(s=>e.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(ze,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ge,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${v(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>a(s==null?void 0:s.id),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(le,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:he(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(re,{className:"h-4 w-4 text-green-500"}):e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",he(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((t=(h=c==null?void 0:c.data)==null?void 0:h.data)==null?void 0:t.length)===0&&e.jsx(ee,{className:"py-12 text-center",children:e.jsxs(le,{children:[e.jsx(ne,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(G,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const ua=de().shape({designation_from:p().required("Designation from is required"),designation_to:p().required("Designation to is required"),office_from:p().required("Office from is required"),office_to:p().required("Office to is required"),joining_date:p().required("Joining date is required"),vide_order_no:p().required("Vide order no. is required"),vide_order_date:p().required("Vide order date is required"),is_transfer_promotion:ve().default(!1)});function ga({title:x="Add Designation & Office Details",id:n,edit:g,refetch:d,getDataById:o,empId:f}){const c=Q({}),u=F.useRef(null),{data:a}=se({api:`${Y.addEducationDetails}/${n}`,key:"getDesignationOfficeById",options:{enabled:g&&!!n}}),v=ge({defaultValues:{designation_from:"",designation_to:"",office_from:"",office_to:"",joining_date:"",vide_order_no:"",vide_order_date:"",is_transfer_promotion:!1},resolver:fe(ua)}),m=async h=>{var t,s,y,E,r,l,S,N;try{const q={emp_id:f,designation_from:h.designation_from,designation_to:h.designation_to,office_from:h.office_from,office_to:h.office_to,joining_date:h.joining_date,vide_order_no:h.vide_order_no,vide_order_date:h.vide_order_date,is_transfer_promotion:h.is_transfer_promotion||!1};if(g&&n){const V=await c.mutateAsync({api:`${Y.uploadEmployeeDocument}/${n}`,data:q});(t=V.data)!=null&&t.success?(M.success(((s=V==null?void 0:V.data)==null?void 0:s.message)||"Details updated successfully"),(y=u.current)==null||y.click()):M.error(((E=V.data)==null?void 0:E.message)||"Failed to update details")}else{const V=await c.mutateAsync({api:Y.createAttendance,data:q});(r=V.data)!=null&&r.success?(M.success(((l=V==null?void 0:V.data)==null?void 0:l.message)||"Details added successfully"),(S=u.current)==null||S.click()):M.error(((N=V.data)==null?void 0:N.message)||"Failed to add details")}v.reset(),d==null||d()}catch(q){console.error("Submit Error:",q),M.error("An error occurred while processing your request")}};F.useEffect(()=>{var h,t,s,y,E,r,l,S;g&&a?v.reset({designation_from:((h=a==null?void 0:a.data)==null?void 0:h.designation_from)||"",designation_to:((t=a==null?void 0:a.data)==null?void 0:t.designation_to)||"",office_from:((s=a==null?void 0:a.data)==null?void 0:s.office_from)||"",office_to:((y=a==null?void 0:a.data)==null?void 0:y.office_to)||"",joining_date:((E=a==null?void 0:a.data)==null?void 0:E.joining_date)||"",vide_order_no:((r=a==null?void 0:a.data)==null?void 0:r.vide_order_no)||"",vide_order_date:((l=a==null?void 0:a.data)==null?void 0:l.vide_order_date)||"",is_transfer_promotion:((S=a==null?void 0:a.data)==null?void 0:S.is_transfer_promotion)||!1}):v.reset({designation_from:"",designation_to:"",office_from:"",office_to:"",joining_date:"",vide_order_no:"",vide_order_date:"",is_transfer_promotion:!1})},[g,a]);const j=v.formState.isSubmitting||c.isPending;return e.jsxs(Ee,{children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(G,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Transfer"]})}),e.jsx(ke,{className:"sm:max-w-[1100px]",children:e.jsxs(je,{methods:v,onSubmit:v.handleSubmit(m),children:[e.jsxs(Me,{children:[e.jsx(Ce,{children:x}),e.jsx(qe,{className:"my-4"})]}),e.jsx("div",{className:"mt-5 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-4 md:grid-cols-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Designation"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx(b,{name:"designation_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx(b,{name:"designation_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Office"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From:"}),e.jsx(b,{name:"office_from",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To:"}),e.jsx(b,{name:"office_to",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Joining Date"}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{name:"joining_date",type:"date",placeholder:"dd-mm-yyyy"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order No."}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{name:"vide_order_no",placeholder:"Enter",inputValidation:["removeDoubleSpace"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Vide Order Date"}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{name:"vide_order_date",type:"date",placeholder:"dd-mm-yyyy"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Transfer and Promotion"}),e.jsxs("div",{className:"flex flex-col space-y-2 pt-6",children:[e.jsx(We,{name:"is_transfer_promotion",label:"Yes"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 rounded border-gray-300"}),e.jsx("label",{className:"ml-2 text-sm text-gray-600",children:"No"})]})]})]})]})}),e.jsxs(Fe,{className:"mt-5 flex justify-between",children:[e.jsx(Pe,{asChild:!0,children:e.jsx(G,{variant:"outline",ref:u,children:"Cancel"})}),e.jsx(me,{type:"submit",isLoading:j,children:g?"Update":"Save"})]})]})})]})}function fa({id:x,getDataById:n}){var m,j,h,t;const[g,d]=F.useState(""),[o,f]=F.useState(!1),c=se({api:`${Y.getAllFamilyDetail}?emp_id=${x}`,key:"getEmployeeFamilyDetailsId",value:[x],options:{enabled:!0}}),u=Q({}),a=async s=>{De("Are you sure?","Please confirm",async()=>{var y,E,r;try{const l=await u.mutateAsync({api:`${Y.deleteFamilyMember}`,data:{id:Se(s.toString())}});(y=l==null?void 0:l.data)!=null&&y.success?(M.success(((E=l==null?void 0:l.data)==null?void 0:E.message)||"Deleted successfully"),c.refetch()):M.error(((r=l==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete")}catch(l){M.error("Error deleting family member"),console.error("Delete Error:",l)}})},v=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-7 bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage promotion details of the employee"})}),e.jsx(ga,{title:o?"Edit Transfer Detail":"Add Transfer Detail",id:x,edit:o,setEdit:f,refetch:c.refetch,getDataById:n})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.isLoading?e.jsx(ee,{children:e.jsx(le,{className:"flex h-32 items-center justify-center",children:e.jsx(Le,{})})}):e.jsxs(e.Fragment,{children:[(j=(m=c==null?void 0:c.data)==null?void 0:m.data)==null?void 0:j.map(s=>e.jsxs(ee,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(ze,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ge,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${v(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>a(s==null?void 0:s.id),children:e.jsx(ue,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(le,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:he(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(re,{className:"h-4 w-4 text-green-500"}):e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",he(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((t=(h=c==null?void 0:c.data)==null?void 0:h.data)==null?void 0:t.length)===0&&e.jsx(ee,{className:"py-12 text-center",children:e.jsxs(le,{children:[e.jsx(ne,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(G,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}function ja({id:x,getDataById:n}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Increment History"}),e.jsx(ma,{id:x,getDataById:n})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Promotion History"}),e.jsx(ha,{id:x,getDataById:n})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-4 border-b pb-2 text-xl font-semibold text-gray-800",children:"Transfer History"}),e.jsx(fa,{id:x,getDataById:n})]})]})}function ba(){return e.jsx("div",{children:"JoiningInformation"})}const Ka=()=>{var c;const[x,n]=F.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:g}=Re();F.useEffect(()=>{localStorage.setItem("employeeActiveTab",x)},[x]);const d=[{id:"basic",label:"Basic Details",icon:oe,shortLabel:"Basic"},{id:"family",label:"Family Details",icon:ne,shortLabel:"Family"},{id:"educationAndTraining",label:"Education & Training",icon:Ys,shortLabel:"Education"},{id:"document",label:"Documents",icon:we,shortLabel:"Documents"},{id:"joiningInformation",label:"Joining Information",icon:Z,shortLabel:"Joining"},{id:"salary",label:"Salary Details",icon:Ws,shortLabel:"Salary"},{id:"attendance",label:"Attendance",icon:Z,shortLabel:"Attendance"},{id:"serviceHistory",label:"Service History",icon:re,shortLabel:"Service History"},{id:"moduleAccess",label:"Module Access",icon:re,shortLabel:"Modules Access"}],o={basicSalary:"â‚¹45,000",hra:"â‚¹18,000",da:"â‚¹13,500",grossSalary:"â‚¹76,500",pf:"â‚¹5,400",tax:"â‚¹7,650",netSalary:"â‚¹63,450"},f=se({api:`${(c=Y)==null?void 0:c.getEmployeeById}?id=${g}`,key:"getEmployeeByIddsadasdasdasd",value:[g],options:{enabled:!!g}});return e.jsx(ks,{title:"Employee Management",subTitle:`\r
      View and manage employee details\r
    `,children:e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 px-4 py-5 text-white sm:px-6 sm:py-6",children:[e.jsx("div",{className:"absolute right-0 top-0 h-48 w-48 -translate-y-1/3 translate-x-1/3 rounded-full bg-white/10 sm:h-64 sm:w-64"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-white/95 shadow-lg sm:h-16 sm:w-16",children:e.jsx(oe,{className:"h-6 w-6 text-indigo-500 sm:h-8 sm:w-8"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"truncate text-xl font-bold tracking-tight sm:text-2xl md:text-3xl",children:"John Doe"}),e.jsx("p",{className:"mt-1 text-xs font-medium text-white/90 sm:text-sm",children:"ID: EMP001"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 bg-gradient-to-b from-gray-50 to-white px-3 py-3 sm:px-5 sm:py-4",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2",children:d.map(u=>{const a=u.icon,v=x===u.id;return e.jsxs("button",{onClick:()=>n(u.id),className:`flex min-w-[70px] items-center justify-center gap-1.5 rounded-lg px-2.5 py-1.5 text-xs font-semibold transition-all duration-300 sm:min-w-fit sm:gap-2 sm:px-3 sm:py-2 sm:text-sm ${v?"-translate-y-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/40":"border border-gray-200 bg-white text-gray-600 hover:-translate-y-0.5 hover:border-indigo-400 hover:bg-gray-50 hover:text-indigo-600"}`,children:[e.jsx(a,{className:"h-3.5 w-3.5 flex-shrink-0 sm:h-4 sm:w-4"}),e.jsx("span",{className:"whitespace-nowrap",children:u.shortLabel})]},u.id)})})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[x==="basic"&&e.jsx("div",{children:e.jsx(Gs,{id:g,getDataById:f})}),x==="family"&&e.jsx("div",{children:e.jsx(Bs,{id:g,getDataById:f})}),x==="educationAndTraining"&&e.jsx("div",{children:e.jsx(da,{getDataById:f,id:g})}),x==="document"&&e.jsx("div",{children:e.jsx(Ks,{id:g,getDataById:f})}),x==="joiningInformation"&&e.jsx("div",{children:e.jsx(ba,{})}),x==="salary"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3 sm:mb-6",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 sm:h-10 sm:w-10",children:e.jsx(Os,{className:"h-5 w-5 text-white sm:h-5 sm:w-5"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 sm:text-xl md:text-2xl",children:"Salary Breakdown"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-5 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border-2 border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 p-5 shadow-sm sm:p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-base font-bold text-green-800 sm:text-lg",children:[e.jsx(re,{className:"h-5 w-5"}),"Earnings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 sm:text-sm",children:"Basic Salary"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 sm:text-base",children:o.basicSalary})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 sm:text-sm",children:"HRA"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 sm:text-base",children:o.hra})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 sm:text-sm",children:"DA"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 sm:text-base",children:o.da})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg bg-green-400 px-3 py-3 shadow-md",children:[e.jsx("span",{className:"text-sm font-bold text-green-900 sm:text-base",children:"Gross Salary"}),e.jsx("span",{className:"text-lg font-extrabold text-green-900 sm:text-xl",children:o.grossSalary})]})]})]}),e.jsxs("div",{className:"rounded-xl border-2 border-red-200 bg-gradient-to-br from-red-50 to-rose-50 p-5 shadow-sm sm:p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-base font-bold text-red-800 sm:text-lg",children:[e.jsx(we,{className:"h-5 w-5"}),"Deductions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 sm:text-sm",children:"PF"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 sm:text-base",children:o.pf})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 pb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 sm:text-sm",children:"Tax (TDS)"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 sm:text-base",children:o.tax})]}),e.jsx("div",{className:"py-3"}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 px-3 py-3 shadow-lg shadow-indigo-500/40",children:[e.jsx("span",{className:"text-sm font-bold text-white sm:text-base",children:"Net Salary"}),e.jsx("span",{className:"text-lg font-extrabold text-white sm:text-xl",children:o.netSalary})]})]})]})]}),e.jsx("div",{className:"mt-5 rounded-xl border border-yellow-300 bg-gradient-to-br from-yellow-50 to-amber-50 p-4",children:e.jsxs("p",{className:"text-xs leading-relaxed text-yellow-900 sm:text-sm",children:[e.jsx("strong",{children:"Note:"})," Salary details shown are for the current month. For historical records, please contact the Accounts Department."]})})]}),x==="attendance"&&e.jsx("div",{children:e.jsx(la,{id:g,getDataById:f})}),x==="serviceHistory"&&e.jsx("div",{children:e.jsx(ja,{id:g,getDataById:f})}),x==="moduleAccess"&&e.jsx("div",{children:e.jsx(ra,{getDataById:f})})]})]})})})};export{Ka as default};
