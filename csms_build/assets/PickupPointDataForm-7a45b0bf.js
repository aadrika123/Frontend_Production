import{r as u,u as D,a as M,j as t}from"./index-2d137de0.js";import{u as V}from"./formik.esm-d65f4248.js";import{c as $,a as h}from"./index.esm-aa041152.js";import{d as g}from"./PowerupFunctions-42ae8b7a.js";import{A as p,a as x,b as T}from"./AxiosInterceptors-ca7a5259.js";import{B as H}from"./BarLoader-702b4bef.js";import{B as I}from"./BottomErrorCard-bf717467.js";import{T as R}from"./Tabs-2733856a.js";import"./hoist-non-react-statics.cjs-b8781c68.js";function Z(){const[N,f]=u.useState(!1),[P,v]=u.useState(null),[j,r]=u.useState(!1),[J,y]=u.useState([]),{api_getPickupPointData:A,api_postPickupPointData:E,api_editPickupPointData:B,api_getPickupPointDataById:F}=T(),m=D(),{id:c}=M(),S=$({pickupPointName:h().required("Pickkup point name is required feild"),pickupPointAddress:h().required("Pickkup point address is required feild")}),a=V({initialValues:{pickupPointName:"",pickupPointAddress:""},onSubmit:(i,e)=>{console.log("at submit ",i),_(i)},validationSchema:S}),_=i=>{r(!0);let e,o,l={pickupPointName:i.pickupPointName,pickupPointAddress:i.pickupPointAddress};c!==void 0?(e=B,o=l,o.id=c):(e=E,o=l),p.post(e,o,x()).then(function(s){var n,b,k;console.log("bank master..",(n=s==null?void 0:s.data)==null?void 0:n.data),((b=s==null?void 0:s.data)==null?void 0:b.status)===!0?m("/pickup-point"):d(!0,`${(k=s==null?void 0:s.data)==null?void 0:k.message}`),r(!1)}).catch(function(s){console.log("==2 error list...",s),d(!0,"Error occured in submitting form."),r(!1)})},w=()=>{r(!0);let i={id:c};p.post(F,i,x()).then(function(e){var o,l,s,n;console.log("fetch edit data response..",(o=e==null?void 0:e.data)==null?void 0:o.data),(l=e==null?void 0:e.data)!=null&&l.status?L((s=e==null?void 0:e.data)==null?void 0:s.data):d(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.message}`),r(!1)}).catch(function(e){console.log("= edit data error...",e),f(!0),r(!1)})},L=i=>{console.log("existing property details in prop address...",i),a.setFieldValue("pickupPointName",i==null?void 0:i.pickup_point_name),a.setFieldValue("pickupPointAddress",i==null?void 0:i.pickup_point_address)},q=()=>{p.post(A,{},x()).then(function(i){var e,o,l;(e=i==null?void 0:i.data)!=null&&e.status?y((o=i==null?void 0:i.data)==null?void 0:o.data):d(!0,`${(l=i==null?void 0:i.data)==null?void 0:l.message}`),r(!1)}).catch(function(i){console.log("==2 error list...",i),d(!0,"Error occured while fetching data.")})};u.useEffect(()=>{q(),c!==void 0&&w()},[]);const C=i=>{let e=i.target.name,o=i.target.value;e=="pickupPointName"&&a.setFieldValue("pickupPointName",g(o,a.values.pickupPointName,50)),e=="bankName"&&a.setFieldValue("feeHead",g(o,a.values.feeHead,50))},d=(i,e)=>{v(e),f(i)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[j&&t.jsx(H,{}),N&&t.jsx(I,{activateBottomErrorCard:d,errorTitle:P}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Pickup Point Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),c===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>m("/pickup-point-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),c!==void 0?"":t.jsx(R,{listRoute:"/pickup-point",formRoute:"/pickup-point-form"}),t.jsx("div",{className:"mt-6 border-b",children:t.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Pickup Point"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:a.handleSubmit,onChange:C,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Pickup Point Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("pickupPointName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter pickup point name"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.pickupPointName&&a.errors.pickupPointName?a.errors.pickupPointName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Pickup Point Address",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("pickupPointAddress"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter pickup point address"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.pickupPointAddress&&a.errors.pickupPointAddress?a.errors.pickupPointAddress:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:" ",children:t.jsx("button",{onClick:()=>m("/pickup-point"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:c!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Z as default};
