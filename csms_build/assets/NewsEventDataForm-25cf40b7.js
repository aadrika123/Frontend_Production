import{r as u,u as J,m as H,A as b,a as v,j as t,D as x,b as Y}from"./index-3941a546.js";import{u as G}from"./formik.esm-f1168841.js";import{c as K,a as c}from"./index.esm-6cf26a62.js";import{c as k}from"./PowerupFunctions-d2a7455a.js";import{B as Q}from"./BarLoader-5e24b4d4.js";import{B as W}from"./BottomErrorCard-b06e7e18.js";import{T as X}from"./Tabs-6a332c64.js";import"./hoist-non-react-statics.cjs-39f77784.js";function ae(){var g,h,N,y,j,D,w,F,E,$;const[_,p]=u.useState(!1),[z,q]=u.useState(null),[S,i]=u.useState(!1),[Z,O]=u.useState([]),{api_getEventData:I,api_postEventData:B,api_editEventData:C,api_getEventDataByID:L}=Y(),f=J(),{id:r}=H(),P=K({eventName:c().required("News name is required feild"),eventDocs:c().required("Upload is requitred feild"),date:c().required("Date is requitred feild"),time:c().required("Time is requitred feild"),eventVenue:c().required("Eveny Venue is requitred feild"),organizer:c().required("Organizer is requitred feild")}),s=G({initialValues:{eventName:"",date:"",time:"",description:"",eventVenue:"",organizer:"",eventDocs:""},enableReinitialize:!0,onSubmit:async(e,l)=>{console.log("at submit ",e);const o=new FormData;o.append("eventName",e.eventName),o.append("date",e.date),o.append("time",e.time),o.append("description",e.description),o.append("eventVenue",e.eventVenue),o.append("organizer",e.organizer),o.append("eventDocs",e.eventDocs);for(const n of o.values())console.log(n);T(o)},validationSchema:P}),T=e=>{i(!0);let l,o;r!==void 0?(l=C,o=e,o.id=e.append("id",r)):(l=B,o=e),console.log(o),b.post(l,o,v()).then(function(n){var d,m,V;console.log("news event master..",(d=n==null?void 0:n.data)==null?void 0:d.data),((m=n==null?void 0:n.data)==null?void 0:m.status)===!0?f("/news-event"):a(!0,`${(V=n==null?void 0:n.data)==null?void 0:V.message}`),i(!1)}).catch(function(n){console.log("==2 error list...",n),a(!0,"Error occured in submitting form."),i(!1)})},A=()=>{i(!0);let e={id:r};b.post(L,e,v()).then(function(l){var o,n,d,m;console.log("fetch edit data response..",(o=l==null?void 0:l.data)==null?void 0:o.data),(n=l==null?void 0:l.data)!=null&&n.status?M((d=l==null?void 0:l.data)==null?void 0:d.data):a(!0,`${(m=l==null?void 0:l.data)==null?void 0:m.message}`),i(!1)}).catch(function(l){console.log("= edit data error...",l),p(!0),i(!1)})},M=e=>{console.log("existing property details in prop address...",e,`${x}/${e==null?void 0:e.upload_event_docs}`),console.log(new File([`${x}/${e==null?void 0:e.upload_event_docs}`],`${x}/${e==null?void 0:e.upload_event_docs}`,{type:"application/pdf"})),s.setFieldValue("id",e==null?void 0:e.id),s.setFieldValue("eventName",e==null?void 0:e.event_name),s.setFieldValue("date",e==null?void 0:e.event_date),s.setFieldValue("time",e==null?void 0:e.event_time),s.setFieldValue("description",e==null?void 0:e.description),s.setFieldValue("eventVenue",e==null?void 0:e.event_venue),s.setFieldValue("organizer",e==null?void 0:e.organizer),s.setFieldValue("eventDocs",new File([`${x}/${e==null?void 0:e.upload_event_docs}`],`${x}/${e==null?void 0:e.upload_event_docs}`,{type:"application/pdf"}))};console.log(s.values.eventDocs);const R=()=>{b.post(I,{},v()).then(function(e){var l,o,n;(l=e==null?void 0:e.data)!=null&&l.status?O((o=e==null?void 0:e.data)==null?void 0:o.data):a(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.message}`),i(!1)}).catch(function(e){console.log("==2 error list...",e),a(!0,"Error occured while fetching data.")})};u.useEffect(()=>{R(),r!==void 0&&A()},[]);const U=e=>{let l=e.target.name,o=e.target.value;l=="eventName"&&s.setFieldValue("eventName",k(o,s.values.eventName,40)),l=="organizer"&&s.setFieldValue("organizer",k(o,s.values.organizer,30))},a=(e,l)=>{q(l),p(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[S&&t.jsx(Q,{}),_&&t.jsx(W,{activateBottomErrorCard:a,errorTitle:z}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"News/Event Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsx("button",{onClick:()=>f("/news-event-form"),type:"submit",className:" add-button-master",children:"Add"})})}):null]}),r===void 0?t.jsx(X,{listRoute:"/news-event",formRoute:"/news-event-form"}):"",t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of News/Event"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:s.handleSubmit,onChange:U,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["News/Event name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("eventName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter news/event name"}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.eventName&&s.errors.eventName?s.errors.eventName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Date",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("date"),type:"date",min:new Date().toISOString().split("T")[0],className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.date&&s.errors.date?s.errors.date:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Time",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("time"),type:"time",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.time&&s.errors.time?s.errors.time:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Description"]}),t.jsx("input",{...s.getFieldProps("description"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter description "}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.description&&s.errors.description?s.errors.description:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Event Venue",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("eventVenue"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter event venue."}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.eventVenue&&s.errors.eventVenue?s.errors.eventVenue:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Organizer",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("organizer"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter name of organizer."}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.organizer&&s.errors.organizer?s.errors.organizer:null})]})]}),t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold ",children:["Document",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("div",{className:"block justify-start",children:[t.jsx("label",{htmlFor:"eventDocs",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),t.jsx("input",{className:"sr-only ",name:"eventDocs",id:"eventDocs",type:"file",accept:".pdf,.jpeg,.jpg,.png",onChange:e=>{s.setFieldValue("eventDocs",e.target.files[0])}}),s.values.eventDocs&&r!==void 0?`${(g=s.values.eventDocs)==null?void 0:g.name}`.slice(`${(h=s.values.eventDocs)==null?void 0:h.name}`.lastIndexOf("-")+1||`${(N=s.values.eventDocs)==null?void 0:N.name}`.lastIndexOf("/")+1||`${(y=s.values.eventDocs)==null?void 0:y.name}`.lastIndexOf("\\")+1||`${(j=s.values.eventDocs)==null?void 0:j.name}`.lastIndexOf(".")+1||`${(D=s.values.eventDocs)==null?void 0:D.name}`.lastIndexOf(" ")+1||`${(w=s.values.eventDocs)==null?void 0:w.name}`.lastIndexOf(",")+1||`${(F=s.values.eventDocs)==null?void 0:F.name}`.lastIndexOf("?")+1,`${(E=s.values.eventDocs)==null?void 0:E.name}`.length):s.values.eventDocs&&r===void 0?($=s.values.eventDocs)==null?void 0:$.name:"No file selected",t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.eventDocs&&s.errors.eventDocs?s.errors.eventDocs:null})]})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"",children:t.jsx("button",{onClick:()=>f("/news-event"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{ae as default};
