import{r as d,u as A,a as M,j as t}from"./index-2d137de0.js";import{u as _}from"./formik.esm-d65f4248.js";import{c as q,a as b,f as h}from"./index.esm-aa041152.js";import{b as L,d as V}from"./PowerupFunctions-42ae8b7a.js";import{A as g,a as j,b as $}from"./AxiosInterceptors-ca7a5259.js";import{B as I}from"./BarLoader-702b4bef.js";import{B as P}from"./BottomErrorCard-bf717467.js";import{T as R}from"./Tabs-8c951884.js";import"./hoist-non-react-statics.cjs-b8781c68.js";function W(){const[v,x]=d.useState(!1),[N,y]=d.useState(null),[G,c]=d.useState(!1);d.useState(!1),d.useState(!1);const{api_editDiscount:E,api_postDiscount:F,api_getDiscountById:D}=$(),m=A(),{id:r}=M(),S=q({discountGroup:b().required("Enter discout group."),description:b().required("Enter description."),isClassFeeDiscount:h(),isBusFeeDiscount:h()}),i=_({initialValues:{discountGroup:"",description:""},onSubmit:(e,s)=>{console.log("at submit ",e),B(e)},validationSchema:S}),B=e=>{c(!0);let s,a,l={discountGroup:e==null?void 0:e.discountGroup,description:e==null?void 0:e.description};r!==void 0?(s=E,a=l,a.id=r):(s=F,a=l),console.log("before post or edit...",a),g.post(s,a,j()).then(function(o){var n,f,p;console.log("view fee master..",(n=o==null?void 0:o.data)==null?void 0:n.data),(f=o==null?void 0:o.data)!=null&&f.status?m("/discount-master"):u(!0,`${(p=o==null?void 0:o.data)==null?void 0:p.message}`),c(!1)}).catch(function(o){console.log("==2 error list...",o),u(!0,"Error occured in submitting form."),c(!1)})},k=()=>{c(!0);let e={id:r};g.post(D,e,j()).then(function(s){var a,l,o,n;console.log("fetch edit data response..",(a=s==null?void 0:s.data)==null?void 0:a.data),(l=s==null?void 0:s.data)!=null&&l.status?w((o=s==null?void 0:s.data)==null?void 0:o.data):u(!0,`${(n=s==null?void 0:s.data)==null?void 0:n.message}`),c(!1)}).catch(function(s){console.log("= edit data error...",s),x(!0),c(!1)})},w=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("discountGroup",e==null?void 0:e.discount_group),i.setFieldValue("description",e==null?void 0:e.description)};d.useEffect(()=>{r!==void 0&&k()},[]);const C=e=>{let s=e.target.name,a=e.target.value;s=="discountGroup"&&i.setFieldValue("discountGroup",L(a,i.values.discountGroup,50)),s=="description"&&i.setFieldValue("description",V(a,i.values.description,200))},u=(e,s)=>{y(s),x(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[G&&t.jsx(I,{}),v&&t.jsx(P,{activateBottomErrorCard:u,errorTitle:N}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Discount Group Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsx("button",{onClick:()=>m("/discount-master-form"),type:"submit",className:" add-button-master",children:"Add "})})}):null]}),r!==void 0?"":t.jsx(R,{listRoute:"/discount-master",formRoute:"/discount-master-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Discount Master"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:i.handleSubmit,onChange:C,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Discount Group",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("discountGroup"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter discount group"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.discountGroup&&i.errors.discountGroup?i.errors.discountGroup:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Description"}),t.jsx("input",{...i.getFieldProps("description"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter description"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.desc&&i.errors.desc?i.errors.desc:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>m("/discount-master"),type:"button",className:" cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{W as default};
