import{r as m,u as P,a as T,j as e}from"./index-2d137de0.js";import{u as H}from"./formik.esm-d65f4248.js";import{c as R,a as N}from"./index.esm-aa041152.js";import{b as J}from"./PowerupFunctions-42ae8b7a.js";import{A as u,a as x,b as O}from"./AxiosInterceptors-ca7a5259.js";import{B as U}from"./BarLoader-702b4bef.js";import{B as Y}from"./BottomErrorCard-bf717467.js";import{T as z}from"./Tabs-2733856a.js";import"./hoist-non-react-statics.cjs-b8781c68.js";function at(){const[v,j]=m.useState(!1),[g,I]=m.useState(null),[p,r]=m.useState(!1),[f,S]=m.useState([]),[h,C]=m.useState([]),{api_editDistrictData:F,api_postDistrictData:E,api_getDistrictDataByID:_,api_getStateData:D,api_getCountryData:B}=O(),y=P(),{id:n}=T(),k=R({countryId:N().required("Select Country."),stateId:N().required("Select State."),cityName:N().required("Enter City Name")}),a=H({initialValues:{countryId:"",stateId:"",cityName:""},onSubmit:(t,i)=>{V(t)},validationSchema:k}),V=t=>{r(!0);let i,s,c={countryId:t.countryId,stateId:t==null?void 0:t.stateId,cityName:t.cityName};n!==void 0?(i=F,s=c,s.id=n):(i=E,s=c),u.post(i,s,x()).then(function(l){var b,d;(b=l==null?void 0:l.data)!=null&&b.status?y("/city"):o(!0,`${(d=l==null?void 0:l.data)==null?void 0:d.message}`),r(!1)}).catch(function(l){o(!0,"Error occured in submitting form."),r(!1)})},w=()=>{r(!0);let t={id:n};u.post(_,t,x()).then(function(i){var s,c,l;(s=i==null?void 0:i.data)!=null&&s.status?A((c=i==null?void 0:i.data)==null?void 0:c.data):o(!0,`${(l=i==null?void 0:i.data)==null?void 0:l.message}`),r(!1)}).catch(function(i){j(!0),r(!1)})},A=t=>{a.setFieldValue("id",t==null?void 0:t.id),a.setFieldValue("countryId",t==null?void 0:t.country_id),a.setFieldValue("stateId",t==null?void 0:t.state_id),a.setFieldValue("countryName",t==null?void 0:t.country_name),a.setFieldValue("stateName",t==null?void 0:t.state_name),a.setFieldValue("cityName",t==null?void 0:t.city_name)},L=()=>{u.post(B,{},x()).then(function(t){var i,s,c;(i=t==null?void 0:t.data)!=null&&i.status?S((s=t==null?void 0:t.data)==null?void 0:s.data):o(!0,`${(c=t==null?void 0:t.data)==null?void 0:c.message}`),r(!1)}).catch(function(t){o(!0,"Error occured while fetching data.")})},q=t=>{u.post(D,{},x()).then(function(i){var s,c,l;if((s=i==null?void 0:i.data)!=null&&s.status){const d=((c=i==null?void 0:i.data)==null?void 0:c.data).filter(M=>M.country_id===parseInt(t));C(d)}else o(!0,`${(l=i==null?void 0:i.data)==null?void 0:l.message}`);r(!1)}).catch(function(i){o(!0,"Error occured while fetching data.")})};m.useEffect(()=>{q(a.values.countryId)},[a.values.countryId]),m.useEffect(()=>{L(),n!==void 0&&w()},[]);const $=t=>{let i=t.target.name,s=t.target.value;i=="cityName"&&a.setFieldValue("cityName",J(s,a.values.cityName,50))},o=(t,i)=>{I(i),j(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[p&&e.jsx(U,{}),v&&e.jsx(Y,{activateBottomErrorCard:o,errorTitle:g}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div'",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"City Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),n===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsxs("button",{onClick:()=>y("/city-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),n!==void 0?"":e.jsx(z,{listRoute:"/city",formRoute:"/city-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"detailes",children:"Details of City"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:a.handleSubmit,onChange:$,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...a.getFieldProps("countryId"),type:"text",className:"form-control h-10 main-select",placeholder:"Select country",children:[e.jsx("option",{value:"",children:"Select"}),f==null?void 0:f.map((t,i)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.country_name}))]}),e.jsx("span",{className:"text-red-600 text-xs",children:a.touched.countryId&&a.errors.countryId?a.errors.countryId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["State",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...a.getFieldProps("stateId"),type:"text",className:"form-control h-10 main-select",placeholder:"Select state",children:[e.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map((t,i)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.state_name}))]}),e.jsx("span",{className:"text-red-600 text-xs",children:a.touched.stateId&&a.errors.stateId?a.errors.stateId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["City",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...a.getFieldProps("cityName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter city"}),e.jsx("span",{className:"text-red-600 text-xs",children:a.touched.cityName&&a.errors.cityName?a.errors.cityName:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>y("/city"),type:"button",className:" cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:n!==void 0?"Update":"Save"})})]})]})})})]})})})}export{at as default};
