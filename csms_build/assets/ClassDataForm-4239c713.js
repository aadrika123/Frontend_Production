import{r as m,u as _,a as w,C as q,j as a}from"./index-0cd5b1c8.js";import{u as M}from"./formik.esm-59936898.js";import{c as R,a as T}from"./index.esm-2daf9377.js";import{b as $}from"./PowerupFunctions-8adc749f.js";import{A as u,a as x,b as P}from"./AxiosInterceptors-d192cef8.js";import{B as V}from"./BarLoader-475527d2.js";import{B as I}from"./BottomErrorCard-5e21225b.js";import{T as O}from"./Tabs-58ad7c2a.js";import"./hoist-non-react-statics.cjs-ef0c9066.js";function W(){const[v,f]=m.useState(!1),[N,j]=m.useState(null),[g,r]=m.useState(!1),[U,C]=m.useState([]),{api_getClassData:y,api_editClassData:E,api_postClassData:p,api_getClassDataByID:B}=P(),n=_(),{id:d}=w(),S=R({className:T().matches(q,"Please Enter value between A-Z to a-z").required("Class is required feild")}),i=M({initialValues:{className:""},onSubmit:(t,s)=>{F(t)},validationSchema:S}),F=t=>{r(!0);let s,e,c={className:t.className};d!==void 0?(s=E,e=c,e.id=d):(s=p,e=c),u.post(s,e,x()).then(function(l){var h,b;((h=l==null?void 0:l.data)==null?void 0:h.status)===!0?n("/class"):o(!0,`${(b=l==null?void 0:l.data)==null?void 0:b.message}`),r(!1)}).catch(function(l){o(!0,"Error occured in submitting form."),r(!1)})},k=()=>{r(!0);let t={id:d};u.post(B,t,x()).then(function(s){var e,c,l;(e=s==null?void 0:s.data)!=null&&e.status?A((c=s==null?void 0:s.data)==null?void 0:c.data):o(!0,`${(l=s==null?void 0:s.data)==null?void 0:l.message}`),r(!1)}).catch(function(s){f(!0),r(!1)})},A=t=>{i.setFieldValue("id",t==null?void 0:t.id),i.setFieldValue("className",t==null?void 0:t.class_name)},D=()=>{u.post(y,{},x()).then(function(t){var s,e,c;(s=t==null?void 0:t.data)!=null&&s.status?C((e=t==null?void 0:t.data)==null?void 0:e.data):o(!0,`${(c=t==null?void 0:t.data)==null?void 0:c.message}`),r(!1)}).catch(function(t){o(!0,"Error occured while fetching data.")})};m.useEffect(()=>{D(),d!==void 0&&k()},[]);const L=t=>{let s=t.target.name,e=t.target.value;s=="className"&&i.setFieldValue("className",$(e.toUpperCase().trim(),i.values.className,50))},o=(t,s)=>{j(s),f(t)};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"main-div",children:a.jsxs("div",{className:"main-inner-div",children:[g&&a.jsx(V,{}),v&&a.jsx(I,{activateBottomErrorCard:o,errorTitle:N}),a.jsxs("div",{className:"main-sub-div",children:[a.jsx("div",{className:"main-sub-inner-div",children:a.jsxs("div",{className:"text-div",children:[a.jsx("div",{className:"big-text",children:"Class Master Form"}),a.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?a.jsx("div",{className:"tab-div",children:a.jsx("div",{className:"add-button-master-div",children:a.jsxs("button",{onClick:()=>n("/class-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),d!==void 0?"":a.jsx(O,{listRoute:"/class",formRoute:"/class-form"}),a.jsx("div",{className:"details-div",children:a.jsx("span",{className:"detailes",children:"Details of Class "})}),a.jsx("div",{className:"form-div",children:a.jsx("form",{onSubmit:i.handleSubmit,onChange:L,children:a.jsxs("div",{className:"form",children:[a.jsx("div",{className:"col-span-4 grid grid-cols-12",children:a.jsxs("div",{className:" mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Class Name",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...i.getFieldProps("className"),type:"text",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter class"}),a.jsx("span",{className:"text-red-600 text-xs",children:i.touched.className&&i.errors.className?i.errors.className:null})]})}),a.jsxs("div",{className:"cancel-button-div",children:[a.jsx("div",{className:"    ",children:a.jsx("button",{onClick:()=>n("/class"),type:"button",className:" cancel-button",children:"Back to List"})}),a.jsx("div",{className:"submit-button-div",children:a.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})}export{W as default};
