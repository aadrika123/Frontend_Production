import{r as o,u as Z,a as ee,j as t}from"./index-ab416760.js";import{u as te}from"./formik.esm-3439c16f.js";import{c as le,a as p}from"./index.esm-bb5cd0d1.js";import{a as S}from"./PowerupFunctions-83be0856.js";import{A as d,a as u,b as se}from"./AxiosInterceptors-f843a74a.js";import{B as ie}from"./BarLoader-c0a4518a.js";import{B as re}from"./BottomErrorCard-b5de6692.js";import{T as ce}from"./Tabs-32e44a7b.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function ge(){const[M,y]=o.useState(!1),[v,F]=o.useState(null),[w,i]=o.useState(!1),[b,E]=o.useState([]),[f,I]=o.useState([]),[h,_]=o.useState([]),[g,C]=o.useState([]),[ae,P]=o.useState([]),{api_getactiveSubjectData:V,api_getactiveClassData:D,api_finance_year:O,api_getactiveSectionData:B,api_getMarksEntryByID:L,api_postMarksEntryData:A,api_editMarksEntryData:q,api_getMarksEntryData:$}=se(),j=Z(),{id:m}=ee(),G=le({classId:p().required("Select Class"),sectionId:p().required("Select Section"),subjectId:p().required("Select Subject")}),l=te({initialValues:{classId:"",sectionId:"",subjectId:"",isMainSubject:!0,isOptionalSubject:!1,fullMarks:"",passMarks:""},onSubmit:(e,s)=>{console.log("at submit ",e),R(e)},validationSchema:G}),R=e=>{i(!0);let s,a,n={classId:e.classId,sectionId:e==null?void 0:e.sectionId,subjectId:e==null?void 0:e.subjectId,isMainSubject:e==null?void 0:e.isMainSubject,isOptionalSubject:e==null?void 0:e.isOptionalSubject,fullMarks:e==null?void 0:e.fullMarks,passMarks:e==null?void 0:e.passMarks};m!==void 0?(s=q,a=n,a.id=m):(s=A,a=n),d.post(s,a,u()).then(function(c){var x,k,N;console.log("view discount group master..",(x=c==null?void 0:c.data)==null?void 0:x.data),(k=c==null?void 0:c.data)!=null&&k.status?j("/marks-entry"):r(!0,`${(N=c==null?void 0:c.data)==null?void 0:N.message}`),i(!1)}).catch(function(c){console.log("==2 error list...",c),r(!0,"Error occured in submitting form."),i(!1)})},T=()=>{i(!0);let e={id:m};d.post(L,e,u()).then(function(s){var a,n,c,x;console.log("fetch edit data response..",(a=s==null?void 0:s.data)==null?void 0:a.data),(n=s==null?void 0:s.data)!=null&&n.status?J((c=s==null?void 0:s.data)==null?void 0:c.data):r(!0,`${(x=s==null?void 0:s.data)==null?void 0:x.message}`),i(!1)}).catch(function(s){console.log("= edit data error...",s),y(!0),i(!1)})},J=e=>{console.log("existing property details in prop address...",e),l.setFieldValue("id",e==null?void 0:e.id),l.setFieldValue("classId",e==null?void 0:e.class_id),l.setFieldValue("sectionId",e==null?void 0:e.section_id),l.setFieldValue("subjectId",e==null?void 0:e.subject_id),l.setFieldValue("isMainSubject",e==null?void 0:e.is_main_subject),l.setFieldValue("isOptionalSubject",e==null?void 0:e.is_optional_subject),l.setFieldValue("fullMarks",e==null?void 0:e.full_marks),l.setFieldValue("passMarks",e==null?void 0:e.pass_marks)},K=()=>{i(!0),d.post(O,{},u()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),E(e==null?void 0:e.data)):r(!0,"Error occured while fetching data."),i(!1)}).catch(function(e){console.log("==2 error list...",e),r(!0,"Error occured while fetching data."),i(!1)})},U=()=>{i(!0),d.post(D,{},u()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),I(e==null?void 0:e.data.data)):r(!0,"Error occured while fetching data."),i(!1)}).catch(function(e){console.log("==2 error list...",e),r(!0,"Error occured while fetching data."),i(!1)})},Y=()=>{i(!0),d.post(B,{},u()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),_(e==null?void 0:e.data.data)):r(!0,"Error occured while fetching data."),i(!1)}).catch(function(e){console.log("==2 error list...",e),r(!0,"Error occured while fetching data."),i(!1)})},H=()=>{i(!0),d.post(V,{},u()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),C(e==null?void 0:e.data.data)):r(!0,"Error occured while fetching data."),i(!1)}).catch(function(e){console.log("==2 error list...",e),r(!0,"Error occured while fetching data."),i(!1)})},z=()=>{d.post($,{},u()).then(function(e){var s,a,n;(s=e==null?void 0:e.data)!=null&&s.status?P((a=e==null?void 0:e.data)==null?void 0:a.data):r(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.message}`),i(!1)}).catch(function(e){console.log("==2 error list...",e),r(!0,"Error occured while fetching data.")})};o.useEffect(()=>{K(),U(),Y(),H(),z(),m!==void 0&&T()},[]);const Q=e=>{let s=e.target.name,a=e.target.value;s=="fullMarks"&&l.setFieldValue("fullMarks",S(a.trim(),l.values.fullMarks,3)),s=="passMarks"&&l.setFieldValue("passMarks",S(a.trim(),l.values.passMarks,3))},W=e=>{e.target.checked?(l.setFieldValue("isMainSubject",!0),l.setFieldValue("isOptionalSubject",!1)):l.setFieldValue("isMainSubject",!0)},X=e=>{e.target.checked?(l.setFieldValue("isOptionalSubject",!0),l.setFieldValue("isMainSubject",!1)):l.setFieldValue("isOptionalSubject",!0)},r=(e,s)=>{F(s),y(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[w&&t.jsx(ie,{}),M&&t.jsx(re,{activateBottomErrorCard:r,errorTitle:v}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Marks Entry Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),m===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>j("/marks-entry-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),t.jsx(ce,{listRoute:"/marks-entry",formRoute:"/marks-entry-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Marks Entry Form"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:l.handleSubmit,onChange:Q,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4 relative",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Financial Year",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("select",{...l.getFieldProps("fy"),disabled:!0,type:"number",className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 h-10 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select class",children:b==null?void 0:b.map((e,s)=>t.jsx("option",{value:e==null?void 0:e.fy,children:e==null?void 0:e.fy}))}),t.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.fy&&l.errors.fy?l.errors.fy:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Class",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...l.getFieldProps("classId"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select Class",children:[t.jsx("option",{value:"",children:"Select"}),f==null?void 0:f.map((e,s)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.class_name}))]}),t.jsx("span",{className:"text-red-600  text-xs",children:l.touched.classId&&l.errors.classId?l.errors.classId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Section",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...l.getFieldProps("sectionId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select Discount Group",children:[t.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map((e,s)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.section_name}))]}),t.jsx("span",{className:"text-red-600  text-xs",children:l.touched.sectionId&&l.errors.sectionId?l.errors.sectionId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Subject",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...l.getFieldProps("subjectId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select Discount Group",children:[t.jsx("option",{value:"",children:"Select"}),g==null?void 0:g.map((e,s)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.subject_name}))]}),t.jsx("span",{className:"text-red-600  text-xs",children:l.touched.subjectId&&l.errors.subjectId?l.errors.subjectId:null})]}),t.jsxs("div",{className:"form-group col-span-12 md:col-span-2 form-check mb-2 md:px-4 flex items-center",children:[t.jsx("input",{...l.getFieldProps("isMainSubject"),type:"checkbox",checked:l.values.isMainSubject||l.values.isOptionalSubject===!1,onChange:W,className:"cypress_addressCheckbox w-6 h-10 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"}),t.jsxs("label",{className:"form-check-label text-gray-800 ml-2",children:[" ",t.jsx("span",{className:"inline text-gray-700 text-sm font-semibold",children:"Main Subject"})]})]}),t.jsxs("div",{className:"form-group col-span-12 md:col-span-2 form-check mb-2 md:px-4 flex items-center",children:[t.jsx("input",{...l.getFieldProps("isOptionalSubject")||l.values.isMainSubject===!1,type:"checkbox",checked:l.values.isOptionalSubject,onChange:X,className:"cypress_addressCheckbox w-6 h-10 text-blue-600 bg-gray-100 border-gray-300 rounded cursor-pointer"}),t.jsxs("label",{className:"form-check-label text-gray-800 ml-2",children:[" ",t.jsx("span",{className:"inline text-gray-700 text-sm font-semibold",children:"Optional Subject"})]})]})]}),t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Full Marks",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...l.getFieldProps("fullMarks"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter full marks",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault()}),t.jsx("span",{className:"text-red-600 text-xs",children:l.touched.pickupPointName&&l.errors.pickupPointName?l.errors.pickupPointName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Passing Marks",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...l.getFieldProps("passMarks"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter passing marks",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault()}),t.jsx("span",{className:"text-red-600 text-xs",children:l.touched.pickupPointAddress&&l.errors.pickupPointAddress?l.errors.pickupPointAddress:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>j("/marks-entry"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:" cypress_next2_button submit-button",children:m!==void 0?"Update":"Save"})})]})]})})})]})})})}export{ge as default};
