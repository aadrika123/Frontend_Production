import{r as m,u as V,a as _,j as e}from"./index-ab416760.js";import{u as q}from"./formik.esm-3439c16f.js";import{c as A,a as y}from"./index.esm-bb5cd0d1.js";import{b as P,d as $}from"./PowerupFunctions-83be0856.js";import{A as x,a as h,b as I}from"./AxiosInterceptors-f843a74a.js";import{B as M}from"./BarLoader-c0a4518a.js";import{B as T}from"./BottomErrorCard-b5de6692.js";import{T as R}from"./Tabs-32e44a7b.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";const Z=()=>{const[g,f]=m.useState(!1),[p,v]=m.useState(null),[j,s]=m.useState(!1),[J,N]=m.useState([]),{api_getHolidayData:F,api_postHolidayData:w,api_editHolidayData:D,api_getHolidayByID:E}=I(),u=V(),{id:d}=_(),k=A({holiday:y().required("Holiday is required feild"),date:y().required("Date is required feild")}),i=q({initialValues:{holiday:"",date:"",description:""},onSubmit:async(t,a)=>{console.log("at submit ",t);const l=new FormData;l.append("holiday",t.holiday),l.append("date",t.date),l.append("description",t.description),H(l)},validationSchema:k}),H=t=>{s(!0);let a,l;d!==void 0?(a=D,l=t,l.id=t.append("id",d)):(a=w,l=t),console.log(l),x.post(a,l,h()).then(function(o){var c,n,b;console.log("holiday master..",(c=o==null?void 0:o.data)==null?void 0:c.data),((n=o==null?void 0:o.data)==null?void 0:n.status)===!0?u("/holiday"):r(!0,`${(b=o==null?void 0:o.data)==null?void 0:b.message}`),s(!1)}).catch(function(o){console.log("==2 error list...",o),r(!0,"Error occured in submitting form."),s(!1)})},S=()=>{s(!0);let t={id:d};x.post(E,t,h()).then(function(a){var l,o,c,n;console.log("fetch edit data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(o=a==null?void 0:a.data)!=null&&o.status?B((c=a==null?void 0:a.data)==null?void 0:c.data):r(!0,`${(n=a==null?void 0:a.data)==null?void 0:n.message}`),s(!1)}).catch(function(a){console.log("= edit data error...",a),f(!0),s(!1)})},B=t=>{console.log("existing property details in prop address...",t),i.setFieldValue("id",t==null?void 0:t.id),i.setFieldValue("holiday",t==null?void 0:t.holiday),i.setFieldValue("date",t==null?void 0:t.holiday_date),i.setFieldValue("description",t==null?void 0:t.description)},C=()=>{x.post(F,{},h()).then(function(t){var a,l,o;(a=t==null?void 0:t.data)!=null&&a.status?N((l=t==null?void 0:t.data)==null?void 0:l.data):r(!0,`${(o=t==null?void 0:t.data)==null?void 0:o.message}`),s(!1)}).catch(function(t){console.log("==2 error list...",t),r(!0,"Error occured while fetching data.")})};m.useEffect(()=>{C(),d!==void 0&&S()},[]);const L=t=>{let a=t.target.name,l=t.target.value;a=="holiday"&&i.setFieldValue("holiday",P(l,i.values.holiday,40)),a=="description"&&i.setFieldValue("description",$(l,i.values.description,100))},r=(t,a)=>{v(a),f(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[j&&e.jsx(M,{}),g&&e.jsx(T,{activateBottomErrorCard:r,errorTitle:p}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"Holiday Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsx("button",{onClick:()=>u("/holiday-form"),type:"submit",className:" add-button-master",children:"Add"})})}):null]}),d===void 0?e.jsx(R,{listRoute:"/holiday",formRoute:"/holiday-form"}):null,e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Holiday"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:i.handleSubmit,onChange:L,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Holiday",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...i.getFieldProps("holiday"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Holiday"}),e.jsx("span",{className:"text-red-600 text-xs",children:i.touched.holiday&&i.errors.holiday?i.errors.holiday:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Holiday Date",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...i.getFieldProps("date"),type:"date",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600  text-xs",children:i.touched.date&&i.errors.date?i.errors.date:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Description",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...i.getFieldProps("description"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter description "}),e.jsx("span",{className:"text-red-600 text-xs",children:i.touched.description&&i.errors.description?i.errors.description:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"",children:e.jsx("button",{onClick:()=>u("/holiday"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})};export{Z as default};
