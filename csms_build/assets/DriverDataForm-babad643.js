import{r as x,u as $e,a as we,C as Fe,l as Ee,E as ke,m as Ie,n as Oe,j as a}from"./index-2d137de0.js";import{u as Ve}from"./formik.esm-d65f4248.js";import{c as _e,a as d}from"./index.esm-aa041152.js";import{b as te,e as re}from"./PowerupFunctions-42ae8b7a.js";import{A as b,a as h,B as i,b as Ae}from"./AxiosInterceptors-ca7a5259.js";import{B as Ce}from"./BarLoader-702b4bef.js";import{B as Pe}from"./BottomErrorCard-bf717467.js";import{T as qe}from"./Tabs-2733856a.js";import"./hoist-non-react-statics.cjs-b8781c68.js";function Ye(){var g,v,N,y,D,j,$,w,F,E,k,I,O,V,_,A,C,P,q,S,L,B,R,M,U,T,G,X,J,Y,z,H,Z,K,Q,W,ee,le,ae,oe;const[ne,p]=x.useState(!1),[ie,de]=x.useState(null),[ce,n]=x.useState(!1),[Se,me]=x.useState([]),{api_getDriverData:ue,api_postDriverData:xe,api_editDriverData:pe,api_getDriverDataById:fe}=Ae(),f=$e(),{id:r}=we(),be=_e({driverName:d().matches(Fe,"Please Enter value between A-Z to a-z").required("Driver name is required feild"),mobile:d().matches(Ee,"Please Enter valid mobile no").required("mobile no is required feild"),email:d().matches(ke,"Please Enter Valid Email").required("Email is required feild"),address:d().matches(Ie,"Please Enter Valid Address").required("Address is required feild"),licenseNo:d().required("License no is required feild"),aadharNo:d().matches(Oe,"Please Enter Valid Aadhar no").required("Aadhar is required feild"),panNo:d().required("Pan no is required feild")}),e=Ve({initialValues:{driverName:"",mobile:"",email:"",address:"",licenseNo:"",aadharNo:"",panNo:"",aadharDoc:"",panDoc:"",photoDoc:"",licenseDoc:""},onSubmit:async(l,o)=>{console.log("at submit ",l);const s=new FormData;s.append("aadharDoc",l.aadharDoc),s.append("panDoc",l.panDoc),s.append("photoDoc",l.photoDoc),s.append("licenseDoc",l.licenseDoc),s.append("driverName",l.driverName),s.append("mobile",l.mobile),s.append("email",l.email),s.append("address",l.address),s.append("licenseNo",l.licenseNo),s.append("aadharNo",l.aadharNo),s.append("panNo",l.panNo);for(const t of s.values())console.log(t);he(s)},validationSchema:be}),he=l=>{n(!0);let o,s;r!==void 0?(o=pe,s=l,s.id=l.append("id",r)):(o=xe,s=l),console.log(s),b.post(o,s,h()).then(function(t){var m,u,se;console.log("driver master..",(m=t==null?void 0:t.data)==null?void 0:m.data),((u=t==null?void 0:t.data)==null?void 0:u.status)===!0?f("/driver"):c(!0,`${(se=t==null?void 0:t.data)==null?void 0:se.message}`),n(!1)}).catch(function(t){console.log("==2 error list...",t),c(!0,"Error occured in submitting form."),p(!0),n(!1)})},ge=()=>{n(!0);let l={id:r};b.post(fe,l,h()).then(function(o){var s,t,m,u;console.log("fetch edit data response..",(s=o==null?void 0:o.data)==null?void 0:s.data),(t=o==null?void 0:o.data)!=null&&t.status?ve((m=o==null?void 0:o.data)==null?void 0:m.data):c(!0,`${(u=o==null?void 0:o.data)==null?void 0:u.message}`),n(!1)}).catch(function(o){console.log("= edit data error...",o),p(!0),n(!1)})},ve=l=>{console.log("existing property details in prop address...",l),e.setFieldValue("id",l==null?void 0:l.id),e.setFieldValue("driverName",l==null?void 0:l.driver_name),e.setFieldValue("mobile",l==null?void 0:l.mobile),e.setFieldValue("email",l==null?void 0:l.email),e.setFieldValue("address",l==null?void 0:l.address),e.setFieldValue("licenseNo",l==null?void 0:l.license_no),e.setFieldValue("aadharNo",l==null?void 0:l.aadhar_no),e.setFieldValue("panNo",l==null?void 0:l.pan_no),e.setFieldValue("aadharDoc",new File([`${i}/${l==null?void 0:l.aadhar_doc}`],`${i}/${l==null?void 0:l.aadhar_doc}`,{type:"application/pdf"})),e.setFieldValue("panDoc",new File([`${i}/${l==null?void 0:l.pan_doc}`],`${i}/${l==null?void 0:l.pan_doc}`,{type:"application/pdf"})),e.setFieldValue("licenseDoc",new File([`${i}/${l==null?void 0:l.license_doc}`],`${i}/${l==null?void 0:l.license_doc}`,{type:"application/pdf"})),e.setFieldValue("photoDoc",new File([`${i}/${l==null?void 0:l.photo_doc}`],`${i}/${l==null?void 0:l.photo_doc}`,{type:"image/jpeg,image/jpg,image/png"}))},Ne=()=>{b.post(ue,{},h()).then(function(l){var o,s,t;(o=l==null?void 0:l.data)!=null&&o.status?me((s=l==null?void 0:l.data)==null?void 0:s.data):c(!0,`${(t=l==null?void 0:l.data)==null?void 0:t.message}`),n(!1)}).catch(function(l){console.log("==2 error list...",l),c(!0,"Error occured while fetching data."),p(!0),n(!1)})};x.useEffect(()=>{Ne(),r!==void 0&&ge()},[]);const ye=l=>{let o=l.target.name,s=l.target.value;if(o=="driverName"&&e.setFieldValue("driverName",te(s,e.values.driverName,40)),o=="address"&&e.setFieldValue("address",te(s,e.values.address,200)),o=="licenseNo"&&e.setFieldValue("licenseNo",re(s,e.values.licenseNo,50)),o=="panNo"&&e.setFieldValue("panNo",re(s,e.values.panNo,50)),o=="mobile"){let t=l.target.value;je(t)}if(o=="aadharNo"){let t=l.target.value;De(t)}},De=l=>{l>12&&e.setFieldValue("aadharNo",l.slice(0,12))},je=l=>{l.length>10&&e.setFieldValue("mobile",l.slice(0,10))},c=(l,o)=>{de(o),p(l)};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"main-div",children:a.jsxs("div",{className:"main-inner-div",children:[ce&&a.jsx(Ce,{}),ne&&a.jsx(Pe,{activateBottomErrorCard:c,errorTitle:ie}),a.jsxs("div",{className:"main-sub-div",children:[a.jsx("div",{className:"main-sub-inner-div",children:a.jsxs("div",{className:"text-div",children:[a.jsx("div",{className:"big-text",children:"Driver Master Form"}),a.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?a.jsx("div",{className:"tab-div",children:a.jsx("div",{className:"add-button-master-div",children:a.jsx("button",{onClick:()=>f("/driver-form"),type:"submit",className:" add-button-master",children:"Add"})})}):null]}),r!==void 0?"":a.jsx(qe,{listRoute:"/driver",formRoute:"/driver-form"}),a.jsx("div",{className:"details-div",children:a.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Driver"})}),a.jsx("div",{className:"form-div",children:a.jsx("form",{onSubmit:e.handleSubmit,onChange:ye,children:a.jsxs("div",{className:"form",children:[a.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Driver Name",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("driverName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter driver name"}),a.jsx("span",{className:"text-red-600 text-xs",children:e.touched.driverName&&e.errors.driverName?e.errors.driverName:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Mobile No.",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("mobile"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter mobile no."}),a.jsx("span",{className:"text-red-600  text-xs",children:e.touched.mobile&&e.errors.mobile?e.errors.mobile:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Email",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("email"),type:"email",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter email "}),a.jsx("span",{className:"text-red-600  text-xs",children:e.touched.email&&e.errors.email?e.errors.email:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Address",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("address"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter address "}),a.jsx("span",{className:"text-red-600 text-xs",children:e.touched.address&&e.errors.address?e.errors.address:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","License No.",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("licenseNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter license no."}),a.jsx("span",{className:"text-red-600  text-xs",children:e.touched.licenseNo&&e.errors.licenseNo?e.errors.licenseNo:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Aadhar No.",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...e.getFieldProps("aadharNo"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter aadhar no."}),a.jsx("span",{className:"text-red-600 text-xs",children:e.touched.aadharNo&&e.errors.aadharNo?e.errors.aadharNo:null})]})]}),a.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","PAN No.",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline "})]}),a.jsx("input",{...e.getFieldProps("panNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter pan no."}),a.jsx("span",{className:"text-red-600  text-xs",children:e.touched.panNo&&e.errors.panNo?e.errors.panNo:null})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold ",children:["Upload Aadhar",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsxs("div",{className:"block justify-start",children:[a.jsx("label",{htmlFor:"aadharDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),a.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"aadharDoc",id:"aadharDoc",type:"file",accept:".pdf",onChange:l=>{e.setFieldValue("aadharDoc",l.target.files[0])}}),e.values.aadharDoc&&r!==void 0?`${(g=e.values.aadharDoc)==null?void 0:g.name}`.slice(`${(v=e.values.aadharDoc)==null?void 0:v.name}`.lastIndexOf("-")+1||`${(N=e.values.aadharDoc)==null?void 0:N.name}`.lastIndexOf("/")+1||`${(y=e.values.aadharDoc)==null?void 0:y.name}`.lastIndexOf("\\")+1||`${(D=e.values.aadharDoc)==null?void 0:D.name}`.lastIndexOf(".")+1||`${(j=e.values.aadharDoc)==null?void 0:j.name}`.lastIndexOf(" ")+1||`${($=e.values.aadharDoc)==null?void 0:$.name}`.lastIndexOf(",")+1||`${(w=e.values.aadharDoc)==null?void 0:w.name}`.lastIndexOf("?")+1,`${(F=e.values.aadharDoc)==null?void 0:F.name}`.length):e.values.aadharDoc&&r===void 0?(E=e.values.aadharDoc)==null?void 0:E.name:"No file selected"]})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Upload PAN",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsxs("div",{className:"block justify-start",children:[a.jsx("label",{htmlFor:"panDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),a.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"panDoc",id:"panDoc",type:"file",accept:".pdf",onChange:l=>{e.setFieldValue("panDoc",l.target.files[0])}}),e.values.panDoc&&r!==void 0?`${(k=e.values.panDoc)==null?void 0:k.name}`.slice(`${(I=e.values.panDoc)==null?void 0:I.name}`.lastIndexOf("-")+1||`${(O=e.values.panDoc)==null?void 0:O.name}`.lastIndexOf("/")+1||`${(V=e.values.panDoc)==null?void 0:V.name}`.lastIndexOf("\\")+1||`${(_=e.values.panDoc)==null?void 0:_.name}`.lastIndexOf(".")+1||`${(A=e.values.panDoc)==null?void 0:A.name}`.lastIndexOf(" ")+1||`${(C=e.values.panDoc)==null?void 0:C.name}`.lastIndexOf(",")+1||`${(P=e.values.panDoc)==null?void 0:P.name}`.lastIndexOf("?")+1,`${(q=e.values.panDoc)==null?void 0:q.name}`.length):e.values.panDoc&&r===void 0?(S=e.values.panDoc)==null?void 0:S.name:"No file selected"]})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold ",htmlFor:"photoDoc",children:["Upload Photo",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsxs("div",{className:"block justify-start",children:[a.jsx("label",{htmlFor:"photoDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),a.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"photoDoc",id:"photoDoc",type:"file",accept:".jpg,.jpeg,.png",onChange:l=>{e.setFieldValue("photoDoc",l.target.files[0])}}),e.values.photoDoc&&r!==void 0?`${(L=e.values.photoDoc)==null?void 0:L.name}`.slice(`${(B=e.values.photoDoc)==null?void 0:B.name}`.lastIndexOf("-")+1||`${(R=e.values.photoDoc)==null?void 0:R.name}`.lastIndexOf("/")+1||`${(M=e.values.photoDoc)==null?void 0:M.name}`.lastIndexOf("\\")+1||`${(U=e.values.photoDoc)==null?void 0:U.name}`.lastIndexOf(".")+1||`${(T=e.values.photoDoc)==null?void 0:T.name}`.lastIndexOf(" ")+1||`${(G=e.values.photoDoc)==null?void 0:G.name}`.lastIndexOf(",")+1||`${(X=e.values.photoDoc)==null?void 0:X.name}`.lastIndexOf("?")+1,`${(J=e.values.photoDoc)==null?void 0:J.name}`.length):e.values.photoDoc&&r===void 0?(Y=e.values.photoDoc)==null?void 0:Y.name:"No file selected"]})]}),a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold ",children:["Upload License",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsxs("div",{className:"block justify-start",children:[a.jsx("label",{htmlFor:"licenseDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),a.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"licenseDoc",id:"licenseDoc",type:"file",accept:".pdf",onChange:l=>{e.setFieldValue("licenseDoc",l.target.files[0])}}),e.values.licenseDoc&&r!==void 0?`${(z=e.values.licenseDoc)==null?void 0:z.name}`.slice(`${(H=e.values.licenseDoc)==null?void 0:H.name}`.lastIndexOf("-")+1||`${(Z=e.values.licenseDoc)==null?void 0:Z.name}`.lastIndexOf("/")+1||`${(K=e.values.licenseDoc)==null?void 0:K.name}`.lastIndexOf("\\")+1||`${(Q=e.values.licenseDoc)==null?void 0:Q.name}`.lastIndexOf(".")+1||`${(W=e.values.licenseDoc)==null?void 0:W.name}`.lastIndexOf(" ")+1||`${(ee=e.values.licenseDoc)==null?void 0:ee.name}`.lastIndexOf(",")+1||`${(le=e.values.licenseDoc)==null?void 0:le.name}`.lastIndexOf("?")+1,`${(ae=e.values.licenseDoc)==null?void 0:ae.name}`.length):e.values.licenseDoc&&r===void 0?(oe=e.values.licenseDoc)==null?void 0:oe.name:"No file selected"]})]})]}),a.jsxs("div",{className:"cancel-button-div",children:[a.jsx("div",{className:"",children:a.jsx("button",{onClick:()=>f("/driver"),type:"button",className:"cancel-button",children:"Back to List"})}),a.jsx("div",{className:"submit-button-div",children:a.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Ye as default};
