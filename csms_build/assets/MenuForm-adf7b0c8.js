import{r as n,u as q,a as $,j as t}from"./index-ab416760.js";import{u as P}from"./formik.esm-3439c16f.js";import{c as R,a as U}from"./index.esm-bb5cd0d1.js";import{b as J}from"./PowerupFunctions-83be0856.js";import{A as u,a as x,b as O}from"./AxiosInterceptors-f843a74a.js";import{B as H}from"./BarLoader-c0a4518a.js";import{B as Y}from"./BottomErrorCard-b5de6692.js";import{T as z}from"./Tabs-32e44a7b.js";import{I as G}from"./iconify-433b1ab7.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function se(){const[p,N]=n.useState(!1),[v,y]=n.useState(null),[k,c]=n.useState(!1),[b,F]=n.useState([]),[h,M]=n.useState([]),{api_geticonData:S,api_getusertypeactiveData:T,api_postMenuData:E,api_editMenuData:I,api_getMenuDataById:_}=O(),f=q(),{id:r}=$(),B=R({menuName:U().required("Menu name is required feild")}),i=P({initialValues:{userTypeId:"",menuName:"",iconName:""},onSubmit:(e,a)=>{console.log("at submit ",e),w(e)},validationSchema:B}),w=e=>{c(!0);let a,s,o={userTypeId:e==null?void 0:e.userTypeId,menuName:e==null?void 0:e.menuName,iconName:e==null?void 0:e.iconName};r!==void 0?(a=I,s=o,s.id=r):(a=E,s=o),u.post(a,s,x()).then(function(l){var d,g,j;console.log("menu master..",(d=l==null?void 0:l.data)==null?void 0:d.data),((g=l==null?void 0:l.data)==null?void 0:g.status)===!0?f("/menu"):m(!0,`${(j=l==null?void 0:l.data)==null?void 0:j.message}`),c(!1)}).catch(function(l){console.log("==2 error list...",l),m(!0,"Error occured in submitting form."),c(!1)})},L=()=>{c(!0);let e={id:r};u.post(_,e,x()).then(function(a){var s,o,l,d;console.log("fetch edit data response..",(s=a==null?void 0:a.data)==null?void 0:s.data),(o=a==null?void 0:a.data)!=null&&o.status?C((l=a==null?void 0:a.data)==null?void 0:l.data):m(!0,`${(d=a==null?void 0:a.data)==null?void 0:d.message}`),c(!1)}).catch(function(a){console.log("= edit data error...",a),N(!0),c(!1)})},C=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("userTypeId",e==null?void 0:e.user_type_id),i.setFieldValue("menuName",e==null?void 0:e.menu_name),i.setFieldValue("iconName",e==null?void 0:e.icon_name)},D=()=>{u.post(S,{},x()).then(function(e){e!=null&&e.data?F(e==null?void 0:e.data):m(!0,"error"),c(!1)}).catch(function(e){console.log("==2 error list...",e),m(!0,"Error occured while fetching data.")})},A=()=>{u.post(T,{},x()).then(function(e){var a,s;console.log((a=e.data)==null?void 0:a.status),e!=null&&e.data?M((s=e==null?void 0:e.data)==null?void 0:s.data):m(!0,`${e.data.message}`),c(!1)}).catch(function(e){console.log("==2 error list...",e),m(!0,"Error occured while fetching data.")})};n.useEffect(()=>{D(),A(),r!==void 0&&L()},[]);const V=e=>{let a=e.target.name,s=e.target.value;a=="menuName"&&i.setFieldValue("menuName",J(s,i.values.menuName,50))},m=(e,a)=>{y(a),N(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[k&&t.jsx(H,{}),p&&t.jsx(Y,{activateBottomErrorCard:m,errorTitle:v}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Menu Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>f("/menu-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),r!==void 0?"":t.jsx(z,{listRoute:"/menu",formRoute:"/menu-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Menu"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:i.handleSubmit,onChange:V,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["User Type",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...i.getFieldProps("userTypeId"),className:"form-control h-10 main-select",placeholder:"Select menu",children:[t.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map((e,a)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.user_type}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.userTypeId&&i.errors.userTypeId?i.errors.userTypeId:null})]}),t.jsxs("div",{className:" mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Menu Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("menuName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter menu"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.menuName&&i.errors.menuName?i.errors.menuName:null})]})]}),t.jsx("div",{className:"col-span-12 grid grid-cols-12",children:t.jsx("div",{className:"form-group col-span-12 md:col-span-2 form-check mb-2 md:px-4 flex items-center max-[780px]:block max-[780px]:mx-[30%]",children:b&&b.map(e=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mr-6 w-full max-[780px]:flex max-[780px]:justify-between",children:[t.jsxs("label",{className:"form-check-label text-gray-800 ml-6",children:[" ",t.jsxs("span",{className:"inline text-gray-700 text-sm font-semibold ",children:[" ",t.jsx(G,{icon:e==null?void 0:e.iconName,className:"w-8 h-8"})]})]}),t.jsx("input",{name:"iconName",value:e==null?void 0:e.iconName,checked:i.values.iconName===(e==null?void 0:e.iconName),onChange:a=>i.setFieldValue("iconName",a.target.value),type:"checkbox",className:"text-slat-500  ml-[10px]  text-[#6b7280] w-5 h-5 font-bold mt-2   "})]})}))})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>f("/menu"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:" cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{se as default};
