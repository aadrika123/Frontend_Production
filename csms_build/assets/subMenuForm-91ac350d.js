import{r as c,u as L,a as q,j as t}from"./index-ab416760.js";import{u as w}from"./formik.esm-3439c16f.js";import{c as T,a as V}from"./index.esm-bb5cd0d1.js";import{b as P}from"./PowerupFunctions-83be0856.js";import{A as x,a as f,b as $}from"./AxiosInterceptors-f843a74a.js";import{B as R}from"./BarLoader-c0a4518a.js";import{B as J}from"./BottomErrorCard-b5de6692.js";import{T as O}from"./Tabs-32e44a7b.js";import"./iconify-433b1ab7.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function ee(){const[j,h]=c.useState(!1),[v,M]=c.useState(null),[p,n]=c.useState(!1),[d,y]=c.useState([]),{api_getMenuActiveData:S,api_postSubmenuData:E,api_editSubmenuData:F,api_getSubmenuDataById:B}=$(),b=L(),{id:r}=q(),I=T({subMenuName:V().required(" Sub Menu name is required feild")}),s=w({initialValues:{menuId:"",subMenuName:""},onSubmit:(e,a)=>{console.log("at submit ",e),_(e)},validationSchema:I}),_=e=>{n(!0);let a,l,m={menuId:e==null?void 0:e.menuId,subMenuName:e==null?void 0:e.subMenuName};r!==void 0?(a=F,l=m,l.id=r):(a=E,l=m),x.post(a,l,f()).then(function(i){var u,N,g;console.log("menu master..",(u=i==null?void 0:i.data)==null?void 0:u.data),((N=i==null?void 0:i.data)==null?void 0:N.status)===!0?b("/sub-menu"):o(!0,`${(g=i==null?void 0:i.data)==null?void 0:g.message}`),n(!1)}).catch(function(i){console.log("==2 error list...",i),o(!0,"Error occured in submitting form."),n(!1)})},k=()=>{n(!0);let e={id:r};x.post(B,e,f()).then(function(a){var l,m,i,u;console.log("fetch edit data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(m=a==null?void 0:a.data)!=null&&m.status?A((i=a==null?void 0:a.data)==null?void 0:i.data):o(!0,`${(u=a==null?void 0:a.data)==null?void 0:u.message}`),n(!1)}).catch(function(a){console.log("= edit data error...",a),h(!0),n(!1)})},A=e=>{console.log("existing property details in prop address...",e),s.setFieldValue("userType",e==null?void 0:e.menu_id),s.setFieldValue("menuId",e==null?void 0:e.menu_id),s.setFieldValue("subMenuName",e==null?void 0:e.sub_menu_name)},C=()=>{x.post(S,{},f()).then(function(e){var a,l;(a=e==null?void 0:e.data)!=null&&a.status?y((l=e==null?void 0:e.data)==null?void 0:l.data):o(!0,"error"),n(!1)}).catch(function(e){console.log("==2 error list...",e),o(!0,"Error occured while fetching data.")})};c.useEffect(()=>{C(),r!==void 0&&k()},[]);const D=e=>{let a=e.target.name,l=e.target.value;a=="subMenuName"&&s.setFieldValue("subMenuName",P(l,s.values.subMenuName,50))},o=(e,a)=>{M(a),h(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[p&&t.jsx(R,{}),j&&t.jsx(J,{activateBottomErrorCard:o,errorTitle:v}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Sub Menu Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>b("/sub-menu-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),r!==void 0?"":t.jsx(O,{listRoute:"/sub-menu",formRoute:"/sub-menu-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Sub Menu"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:s.handleSubmit,onChange:D,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Menu",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...s.getFieldProps("menuId"),className:"form-control h-10 main-select",placeholder:"Select menu",children:[t.jsx("option",{value:"",children:"Select"}),d==null?void 0:d.map((e,a)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.menu_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.menuId&&s.errors.menuId?s.errors.menuId:null})]}),t.jsxs("div",{className:" mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Sub Menu Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("subMenuName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter menu"}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.subMenuName&&s.errors.subMenuName?s.errors.subMenuName:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>b("/sub-menu"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:" cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{ee as default};
