import{r as u,u as p,a as q,C as M,j as a}from"./index-ab416760.js";import{u as R}from"./formik.esm-3439c16f.js";import{c as T,a as $}from"./index.esm-bb5cd0d1.js";import{b as P}from"./PowerupFunctions-83be0856.js";import{A as x,a as f,b as V}from"./AxiosInterceptors-f843a74a.js";import{B as I}from"./BarLoader-c0a4518a.js";import{B as O}from"./BottomErrorCard-b5de6692.js";import{T as G}from"./Tabs-32e44a7b.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function tt(){const[v,y]=u.useState(!1),[g,N]=u.useState(null),[j,s]=u.useState(!1),[J,C]=u.useState([]),{api_getCountryData:E,api_postCountryData:B,api_editCountryData:S,api_getCountryDataById:F}=V(),m=p(),{id:c}=q(),k=T({countryName:$().matches(M,"Please Enter value between A-Z to a-z").required("Country is required feild")}),o=R({initialValues:{countryName:""},onSubmit:(t,e)=>{console.log("at submit ",t),A(t)},validationSchema:k}),A=t=>{s(!0);let e,r,l={countryName:t.countryName};c!==void 0?(e=S,r=l,r.id=c):(e=B,r=l),x.post(e,r,f()).then(function(i){var d,h,b;console.log("country master..",(d=i==null?void 0:i.data)==null?void 0:d.data),((h=i==null?void 0:i.data)==null?void 0:h.status)===!0?m("/country"):n(!0,`${(b=i==null?void 0:i.data)==null?void 0:b.message}`),s(!1)}).catch(function(i){console.log("==2 error list...",i),n(!0,"Error occured in submitting form."),s(!1)})},L=()=>{s(!0);let t={id:c};x.post(F,t,f()).then(function(e){var r,l,i,d;console.log("fetch edit data response..",(r=e==null?void 0:e.data)==null?void 0:r.data),(l=e==null?void 0:e.data)!=null&&l.status?_((i=e==null?void 0:e.data)==null?void 0:i.data):n(!0,`${(d=e==null?void 0:e.data)==null?void 0:d.message}`),s(!1)}).catch(function(e){console.log("= edit data error...",e),y(!0),s(!1)})},_=t=>{console.log("existing property details in prop address...",t),o.setFieldValue("id",t==null?void 0:t.id),o.setFieldValue("countryName",t==null?void 0:t.country_name)},D=()=>{x.post(E,{},f()).then(function(t){var e,r,l;(e=t==null?void 0:t.data)!=null&&e.status?C((r=t==null?void 0:t.data)==null?void 0:r.data):n(!0,`${(l=t==null?void 0:t.data)==null?void 0:l.message}`),s(!1)}).catch(function(t){console.log("==2 error list...",t),n(!0,"Error occured while fetching data.")})};u.useEffect(()=>{D(),c!==void 0&&L()},[]);const w=t=>{let e=t.target.name,r=t.target.value;e=="countryName"&&o.setFieldValue("countryName",P(r,o.values.countryName,50))},n=(t,e)=>{N(e),y(t)};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"main-div",children:a.jsxs("div",{className:"main-inner-div",children:[j&&a.jsx(I,{}),v&&a.jsx(O,{activateBottomErrorCard:n,errorTitle:g}),a.jsxs("div",{className:"main-sub-div",children:[a.jsx("div",{className:"main-sub-inner-div",children:a.jsxs("div",{className:"text-div",children:[a.jsx("div",{className:"big-text",children:"Country Master Form"}),a.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),c===void 0?a.jsx("div",{className:"tab-div",children:a.jsx("div",{className:"add-button-master-div",children:a.jsxs("button",{onClick:()=>m("/country-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),c!==void 0?"":a.jsx(G,{listRoute:"/country",formRoute:"/country-form"}),a.jsx("div",{className:"details-div",children:a.jsx("span",{className:"detailes",children:"Details of Country"})}),a.jsx("div",{className:"form-div",children:a.jsx("form",{onSubmit:o.handleSubmit,onChange:w,children:a.jsxs("div",{className:"form",children:[a.jsx("div",{className:"col-span-4 grid grid-cols-12",children:a.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country Name",a.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...o.getFieldProps("countryName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter country"}),a.jsx("span",{className:"text-red-600 text-xs",children:o.touched.countryName&&o.errors.countryName?o.errors.countryName:null})]})}),a.jsxs("div",{className:"cancel-button-div",children:[a.jsx("div",{className:"    ",children:a.jsx("button",{onClick:()=>m("/country"),type:"button",className:" cancel-button",children:"Back to List"})}),a.jsx("div",{className:"submit-button-div",children:a.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:c!==void 0?"Update":"Save"})})]})]})})})]})})})}export{tt as default};
