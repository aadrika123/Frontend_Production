import{r as d,u as V,a as q,j as e}from"./index-ab416760.js";import{u as M}from"./formik.esm-3439c16f.js";import{c as P,a as N}from"./index.esm-bb5cd0d1.js";import{b as T}from"./PowerupFunctions-83be0856.js";import{A as x,a as f,b as R}from"./AxiosInterceptors-f843a74a.js";import{B as $}from"./BarLoader-c0a4518a.js";import{B as H}from"./BottomErrorCard-b5de6692.js";import{T as J}from"./Tabs-32e44a7b.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function Z(){const[v,h]=d.useState(!1),[j,p]=d.useState(null),[S,o]=d.useState(!1),[m,E]=d.useState([]),{api_editStateData:F,api_postStateData:I,api_getStateDataById:B,api_getCountryData:k}=R(),u=V(),{id:l}=q(),w=P({countryId:N().required("Select Country."),stateName:N().required("Enter state name")}),s=M({initialValues:{countryId:"",stateName:""},onSubmit:(t,a)=>{console.log("at submit ",t),C(t)},validationSchema:w}),C=t=>{o(!0);let a,i,n={countryId:t.countryId,stateName:t==null?void 0:t.stateName};l!==void 0?(a=F,i=n,i.id=l):(a=I,i=n),x.post(a,i,f()).then(function(r){var b,g,y;console.log("view State master..",(b=r==null?void 0:r.data)==null?void 0:b.data),(g=r==null?void 0:r.data)!=null&&g.status?u("/state"):c(!0,`${(y=r==null?void 0:r.data)==null?void 0:y.message}`),o(!1)}).catch(function(r){console.log("==2 error list...",r),c(!0,"Error occured in submitting form."),o(!1)})},_=()=>{o(!0);let t={id:l};x.post(B,t,f()).then(function(a){var i,n,r;console.log("fetch edit data response..",(i=a==null?void 0:a.data)==null?void 0:i.data),(n=a==null?void 0:a.data)!=null&&n.status?D((r=a==null?void 0:a.data)==null?void 0:r.data):c(!0,"Error occured in submitting deactivation application. Please try again later."),o(!1)}).catch(function(a){console.log("= edit data error...",a),h(!0),o(!1)})},D=t=>{console.log("existing property details in prop address...",t),s.setFieldValue("id",t==null?void 0:t.id),s.setFieldValue("countryId",t==null?void 0:t.country_id),s.setFieldValue("countryName",t==null?void 0:t.country_name),s.setFieldValue("stateName",t==null?void 0:t.state_name)},A=()=>{x.post(k,{},f()).then(function(t){var a,i;(a=t==null?void 0:t.data)!=null&&a.status?E((i=t==null?void 0:t.data)==null?void 0:i.data):c(!0,"Error occured while fetching data."),o(!1)}).catch(function(t){console.log("==2 error list...",t),c(!0,"Error occured while fetching data.")})};d.useEffect(()=>{A(),l!==void 0&&_()},[]);const L=t=>{let a=t.target.name,i=t.target.value;a=="stateName"&&s.setFieldValue("stateName",T(i,s.values.stateName,50))},c=(t,a)=>{p(a),h(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[S&&e.jsx($,{}),v&&e.jsx(H,{activateBottomErrorCard:c,errorTitle:j}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"State Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),l===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsxs("button",{onClick:()=>u("/state-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),l!==void 0?"":e.jsx(J,{listRoute:"/state",formRoute:"/state-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"detailes",children:"Details of State"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:L,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...s.getFieldProps("countryId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select country",children:[e.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((t,a)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.country_name}))]}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.countryId&&s.errors.countryId?s.errors.countryId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["State",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...s.getFieldProps("stateName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter state"}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.stateName&&s.errors.stateName?s.errors.stateName:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>u("/state"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:l!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Z as default};
