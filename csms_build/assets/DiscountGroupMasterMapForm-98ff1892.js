import{r as u,u as V,m as A,A as p,a as b,j as e,b as C}from"./index-f916f929.js";import{u as q}from"./formik.esm-2de3563d.js";import{c as L,a as f}from"./index.esm-b3999377.js";import{a as $,b as T}from"./PowerupFunctions-6790304d.js";import{B as R}from"./BarLoader-858f75dd.js";import{B as J}from"./BottomErrorCard-20c0353c.js";import{T as O}from"./Tabs-87d50080.js";import"./hoist-non-react-statics.cjs-fb57390d.js";function Z(){const[j,h]=u.useState(!1),[v,y]=u.useState(null),[G,a]=u.useState(!1),[m,P]=u.useState([]),{api_editDiscountMap:F,api_postDiscountMap:I,api_getDiscountByIdMap:E,api_fetchDiscoutGroupList:S}=C(),x=V(),{id:c}=A(),D=L({admissionNo:f().required("Enter admissioon no."),discountGroupId:f().required("Select discount Group"),discountPercent:f().required("Enter discount percent")}),s=q({initialValues:{admissionNo:"",discountGroupId:"",discountPercent:""},onSubmit:(t,o)=>{console.log("at submit ",t),w(t)},validationSchema:D}),w=t=>{a(!0);let o,i,l={discountGroupId:t.discountGroupId,admissionNo:t==null?void 0:t.admissionNo,discountPercent:t==null?void 0:t.discountPercent};c!==void 0?(o=F,i=l,i.id=c,i.status="active"):(o=I,i=l),p.post(o,i,b()).then(function(r){var d,g,N;console.log("view discount group master..",(d=r==null?void 0:r.data)==null?void 0:d.data),(g=r==null?void 0:r.data)!=null&&g.status?x("/discount-group-map"):n(!0,`${(N=r==null?void 0:r.data)==null?void 0:N.message}`),a(!1)}).catch(function(r){console.log("==2 error list...",r),n(!0,"Error occured in submitting form."),a(!1)})},k=()=>{a(!0);let t={id:c};p.post(E,t,b()).then(function(o){var i,l,r,d;console.log("fetch edit data response..",(i=o==null?void 0:o.data)==null?void 0:i.data),(l=o==null?void 0:o.data)!=null&&l.status?_((r=o==null?void 0:o.data)==null?void 0:r.data):n(!0,`${(d=o==null?void 0:o.data)==null?void 0:d.message}`),a(!1)}).catch(function(o){console.log("= edit data error...",o),h(!0),a(!1)})},_=t=>{console.log("existing property details in prop address...",t),s.setFieldValue("id",t==null?void 0:t.id),s.setFieldValue("admissionNo",t==null?void 0:t.admission_no),s.setFieldValue("discountGroupId",t==null?void 0:t.discount_group_id),s.setFieldValue("discountGroup",t==null?void 0:t.discount_group),s.setFieldValue("discountPercent",t==null?void 0:t.discount_percent)},B=()=>{p.post(S,{},b()).then(function(t){var o,i,l;(o=t==null?void 0:t.data)!=null&&o.status?P((i=t==null?void 0:t.data)==null?void 0:i.data):n(!0,`${(l=t==null?void 0:t.data)==null?void 0:l.message}`),a(!1)}).catch(function(t){console.log("==2 error list...",t),n(!0,"Error occured while fetching data.")})};u.useEffect(()=>{B(),c!==void 0&&k()},[]);const M=t=>{let o=t.target.name,i=t.target.value;o=="discountPercent"&&s.setFieldValue("discountPercent",$(i,s.values.discountPercent,2)),o=="discountGroupId"&&s.setFieldValue("discountGroupId",T(i,s.values.discountGroupId,200))},n=(t,o)=>{y(o),h(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[G&&e.jsx(R,{}),j&&e.jsx(J,{activateBottomErrorCard:n,errorTitle:v}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"Discount Group Map Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),c===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsxs("button",{onClick:()=>x("/discount-group-map-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),c!==void 0?"":e.jsx(O,{listRoute:"/discount-group-map",formRoute:"/discount-group-map-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"detailes",children:"Details of Discount Group Map"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:M,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Discount Group Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...s.getFieldProps("discountGroupId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select Discount Group",children:[e.jsx("option",{value:"",children:"Select"}),m==null?void 0:m.map((t,o)=>e.jsx("option",{value:t==null?void 0:t.id,children:t==null?void 0:t.discount_group}))]}),e.jsx("span",{className:"text-red-600  text-xs",children:s.touched.discountGroupId&&s.errors.discountGroupId?s.errors.discountGroupId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Admission No",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...s.getFieldProps("admissionNo"),type:"text",disabled:c!==void 0,className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter admission no"}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.admissionNo&&s.errors.admissionNo?s.errors.admissionNo:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Discount %",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...s.getFieldProps("discountPercent"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter discount %"}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.discountPercent&&s.errors.discountPercent?s.errors.discountPercent:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>x("/discount-group-map"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:" cypress_next2_button submit-button",children:c!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Z as default};
