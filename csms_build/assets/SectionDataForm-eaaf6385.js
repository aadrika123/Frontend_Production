import{r as d,u as _,a as w,C as q,j as t}from"./index-2d137de0.js";import{u as M}from"./formik.esm-d65f4248.js";import{c as R,a as T}from"./index.esm-aa041152.js";import{b as $}from"./PowerupFunctions-42ae8b7a.js";import{A as u,a as x,b as P}from"./AxiosInterceptors-ca7a5259.js";import{B as V}from"./BarLoader-702b4bef.js";import{B as I}from"./BottomErrorCard-bf717467.js";import{T as O}from"./Tabs-2733856a.js";import"./hoist-non-react-statics.cjs-b8781c68.js";function W(){const[v,f]=d.useState(!1),[N,j]=d.useState(null),[g,l]=d.useState(!1),[U,S]=d.useState([]),{api_getSectionData:y,api_editSectionData:E,api_postSectionData:p,api_getSectionDataByID:B}=P(),m=_(),{id:r}=w(),C=R({sectionName:T().matches(q,"Please Enter value between A-Z to a-z").required("Section is required feild")}),c=M({initialValues:{sectionName:""},onSubmit:(e,a)=>{F(e)},validationSchema:C}),F=e=>{l(!0);let a,i,o={sectionName:e.sectionName};r!==void 0?(a=E,i=o,i.id=r):(a=p,i=o),u.post(a,i,x()).then(function(s){var h,b;((h=s==null?void 0:s.data)==null?void 0:h.status)===!0?m("/section"):n(!0,`${(b=s==null?void 0:s.data)==null?void 0:b.message}`),l(!1)}).catch(function(s){n(!0,"Error occured in submitting form."),l(!1)})},k=()=>{l(!0);let e={id:r};u.post(B,e,x()).then(function(a){var i,o,s;(i=a==null?void 0:a.data)!=null&&i.status?A((o=a==null?void 0:a.data)==null?void 0:o.data):n(!0,`${(s=a==null?void 0:a.data)==null?void 0:s.message}`),l(!1)}).catch(function(a){f(!0),l(!1)})},A=e=>{c.setFieldValue("id",e==null?void 0:e.id),c.setFieldValue("sectionName",e==null?void 0:e.section_name)},D=()=>{u.post(y,{},x()).then(function(e){var a,i,o;(a=e==null?void 0:e.data)!=null&&a.status?S((i=e==null?void 0:e.data)==null?void 0:i.data):n(!0,`${(o=e==null?void 0:e.data)==null?void 0:o.message}`),l(!1)}).catch(function(e){n(!0,"Error occured while fetching data.")})};d.useEffect(()=>{D(),r!==void 0&&k()},[]);const L=e=>{let a=e.target.name,i=e.target.value;a=="sectionName"&&c.setFieldValue("sectionName",$(i.toUpperCase().trim(),c.values.sectionName,1))},n=(e,a)=>{j(a),f(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[g&&t.jsx(V,{}),v&&t.jsx(I,{activateBottomErrorCard:n,errorTitle:N}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Section Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>m("/section-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),r!==void 0?"":t.jsx(O,{listRoute:"/section",formRoute:"/section-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Section "})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:c.handleSubmit,onChange:L,children:t.jsxs("div",{className:"form",children:[t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Section Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...c.getFieldProps("sectionName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter section"}),t.jsx("span",{className:"text-red-600 text-xs flex items-center ml-8",children:c.touched.sectionName&&c.errors.sectionName?c.errors.sectionName:null})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>m("/section"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{W as default};
