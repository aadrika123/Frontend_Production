import{r as m,u as R,a as T,b as V,j as e}from"./index-ab416760.js";import{u as D}from"./formik.esm-3439c16f.js";import{c as O,a as v}from"./index.esm-bb5cd0d1.js";import{c as U}from"./PowerupFunctions-83be0856.js";import{A as n,a as g,b as G}from"./AxiosInterceptors-f843a74a.js";import{B as J}from"./BarLoader-c0a4518a.js";import{B as Y}from"./BottomErrorCard-b5de6692.js";import{T as z}from"./Tabs-32e44a7b.js";import"./hoist-non-react-statics.cjs-2a623d8a.js";function st(){const[C,y]=m.useState(!1),[N,j]=m.useState(null),[b,S]=m.useState([]),[E,c]=m.useState(!1),[H,_]=m.useState([]),{api_activesubcategory:F,api_fetchSubCategoryList:I,api_postSubCategory:B,api_editSubCategory:w,api_getSubCategoryById:k}=G(),x=R(),{id:d}=T(),L=O({miscCategoryId:v().required("Select misc. sub category"),miscSubCategoryName:v().matches(V,"Please Enter value between A-Z,a-z,+,-").required("Sub Category id required Feild")}),M=()=>{c(!0),n.post(F,{},g()).then(function(t){var a,r,o,i;console.log("view fee master..",(a=t==null?void 0:t.data)==null?void 0:a.data),(r=t==null?void 0:t.data)!=null&&r.status?S((o=t==null?void 0:t.data)==null?void 0:o.data):l(!0,`${(i=t==null?void 0:t.data)==null?void 0:i.message}`),c(!1)}).catch(function(t){console.log("==2 error list...",t),l(!0,"Error occured while fetching data."),c(!1)})};m.useEffect(()=>{M()},[]);const s=D({initialValues:{miscCategoryId:"",miscSubCategoryName:""},onSubmit:(t,a)=>{console.log("at submit ",t),A(t)},validationSchema:L}),A=t=>{c(!0);let a,r,o={miscCategoryId:t.miscCategoryId,miscSubCategoryName:t.miscSubCategoryName};d!==void 0?(a=w,r=o,r.id=d):(a=B,r=o),n.post(a,r,g()).then(function(i){var u,f,h;console.log("sub category master..",(u=i==null?void 0:i.data)==null?void 0:u.data),((f=i==null?void 0:i.data)==null?void 0:f.status)===!0?x("/sub-category"):l(!0,`${(h=i==null?void 0:i.data)==null?void 0:h.message}`),c(!1)}).catch(function(i){console.log("==2 error list...",i),l(!0,"Error occured in submitting form."),c(!1)})},p=()=>{c(!0);let t={id:d};n.post(k,t,g()).then(function(a){var r,o,i,u;console.log("fetch edit data response..",(r=a==null?void 0:a.data)==null?void 0:r.data),(o=a==null?void 0:a.data)!=null&&o.status?q((i=a==null?void 0:a.data)==null?void 0:i.data):l(!0,`${(u=a==null?void 0:a.data)==null?void 0:u.message}`),c(!1)}).catch(function(a){console.log("= edit data error...",a),y(!0),c(!1)})},q=t=>{console.log("existing property details in prop address...",t),s.setFieldValue("id",t==null?void 0:t.id),s.setFieldValue("miscCategoryId",t==null?void 0:t.misc_category_id),s.setFieldValue("miscSubCategoryName",t==null?void 0:t.misc_sub_category_name)},$=()=>{n.post(I,{},g()).then(function(t){var a,r,o;((a=t==null?void 0:t.data)==null?void 0:a.status)===!0?_((r=t==null?void 0:t.data)==null?void 0:r.data):l(!0,`${(o=t==null?void 0:t.data)==null?void 0:o.message}`),c(!1)}).catch(function(t){console.log("==2 error list...",t),l(!0,"Error occured while fetching data.")})};m.useEffect(()=>{$(),d!==void 0&&p()},[]);const P=t=>{let a=t.target.name,r=t.target.value;a=="miscSubCategoryName"&&s.setFieldValue("miscSubCategoryName",U(r,s.values.miscSubCategoryName,50))},l=(t,a)=>{j(a),y(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[E&&e.jsx(J,{}),C&&e.jsx(Y,{activateBottomErrorCard:l,errorTitle:N}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"Misc. Sub Category Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),d===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsxs("button",{onClick:()=>x("/sub-category-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),d!==void 0?"":e.jsx(z,{listRoute:"/sub-category",formRoute:"/sub-category-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Misc. Sub Category"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:P,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label h-10 inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Misc. Category Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...s.getFieldProps("miscCategoryId"),type:"text",className:"form-control h-10 block w-full px-3 h-10 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select misc. category id",children:[e.jsx("option",{value:"",children:"Select"}),b==null?void 0:b.map((t,a)=>e.jsx("option",{selected:(t==null?void 0:t.misc_category_id)===s.values.miscCategoryId,value:t==null?void 0:t.id,children:t==null?void 0:t.misc_category_name}))]}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.miscCategoryId&&s.errors.miscCategoryId?s.errors.miscCategoryId:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label h-10 inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Sub Category Name",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...s.getFieldProps("miscSubCategoryName"),type:"text",className:"form-control h-10  block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md h-10",placeholder:"Enter misc. sub category"}),e.jsx("span",{className:"text-red-600 text-xs",children:s.touched.miscSubCategoryName&&s.errors.miscSubCategoryName?s.errors.miscSubCategoryName:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>x("/sub-category"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:d!==void 0?"Update":"Save"})})]})]})})})]})})})}export{st as default};
