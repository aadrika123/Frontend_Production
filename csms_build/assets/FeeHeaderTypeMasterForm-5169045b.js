import{r as m,u as w,m as A,A as p,a as b,j as e,b as C}from"./index-3941a546.js";import{u as _}from"./formik.esm-f1168841.js";import{c as M,a as Y,f as L}from"./index.esm-6cf26a62.js";import{c as $}from"./PowerupFunctions-d2a7455a.js";import{B as q}from"./BarLoader-5e24b4d4.js";import{B as P}from"./BottomErrorCard-b06e7e18.js";import{T as D}from"./Tabs-b684944d.js";import"./hoist-non-react-statics.cjs-39f77784.js";function K(){const[y,u]=m.useState(!1),[g,v]=m.useState(null),[j,d]=m.useState(!1),{api_getHeadTypeById:N,api_postHeadType:T,api_editHeadType:H}=C(),f=w(),{id:r}=A(),F=M({feeHeadType:Y().required("Enter fee head type."),isAnnual:L()}),l=_({initialValues:{feeHeadType:""},onSubmit:(t,a)=>{console.log("at submit ",t),E(t)},validationSchema:F}),E=t=>{d(!0);let a,i,o={feeHeadType:t.feeHeadType};r!==void 0?(a=H,i=o,i.id=r):(a=T,i=o),p.post(a,i,b()).then(function(s){var c,x,h;console.log("view fee master..",(c=s==null?void 0:s.data)==null?void 0:c.data),(x=s==null?void 0:s.data)!=null&&x.status?f("/feeheadtype-master"):n(!0,`${(h=s==null?void 0:s.data)==null?void 0:h.message}`),d(!1)}).catch(function(s){console.log("==2 error list...",s),n(!0,"Error occured in submitting form."),d(!1)})},B=()=>{d(!0),u(!1);let t={id:r};p.post(N,t,b()).then(function(a){var i,o,s,c;console.log("fetch edit data response..",(i=a==null?void 0:a.data)==null?void 0:i.data),(o=a==null?void 0:a.data)!=null&&o.status?S((s=a==null?void 0:a.data)==null?void 0:s.data):n(!0,`${(c=a==null?void 0:a.data)==null?void 0:c.message}`),d(!1)}).catch(function(a){console.log("= edit data error...",a),u(!0),d(!1)})},S=t=>{console.log("existing property details in prop address...",t),l.setFieldValue("feeHeadType",t==null?void 0:t.fee_head_type)};m.useEffect(()=>{r!==void 0&&B()},[]);const k=t=>{let a=t.target.name,i=t.target.value;a=="feeHeadType"&&l.setFieldValue("feeHeadType",$(i,l.values.feeHeadType,50))},n=(t,a)=>{v(a),u(t)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-div",children:e.jsxs("div",{className:"main-inner-div",children:[j&&e.jsx(q,{}),y&&e.jsx(P,{activateBottomErrorCard:n,errorTitle:g}),e.jsxs("div",{className:"main-sub-div",children:[e.jsx("div",{className:"main-sub-inner-div",children:e.jsxs("div",{className:"text-div",children:[e.jsx("div",{className:"big-text",children:"Fee Head Type Master Form"}),e.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?e.jsx("div",{className:"tab-div",children:e.jsx("div",{className:"add-button-master-div",children:e.jsx("button",{onClick:()=>f("/feeheadtype-master-form"),type:"submit",className:" add-button-master",children:"Add "})})}):null]}),r!==void 0?"":e.jsx(D,{listRoute:"/feeheadtype-master",formRoute:"/feeheadtype-master-form"}),e.jsx("div",{className:"details-div",children:e.jsx("span",{className:"detailes",children:"Details of Fee Head Type Master"})}),e.jsx("div",{className:"form-div",children:e.jsx("form",{onSubmit:l.handleSubmit,onChange:k,children:e.jsxs("div",{className:"form",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Academic Year",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsxs("select",{...l.getFieldProps("academicYr"),disabled:!0,type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select fee head type",children:[e.jsx("option",{value:"2022-2023",children:"2022-2023"}),e.jsx("option",{value:"2023-2024",children:"2023-2024"})]}),e.jsx("span",{className:"text-red-600 text-xs",children:l.touched.academicYr&&l.errors.academicYr?l.errors.academicYr:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Fee Head Type",e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),e.jsx("input",{...l.getFieldProps("feeHeadType"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter fee head type"}),e.jsx("span",{className:"text-red-600  text-xs",children:l.touched.feeHeadType&&l.errors.feeHeadType?l.errors.feeHeadType:null})]})]}),e.jsxs("div",{className:"cancel-button-div",children:[e.jsx("div",{className:"    ",children:e.jsx("button",{onClick:()=>f("/feeheadtype-master"),type:"button",className:"cancel-button",children:"Back to List"})}),e.jsx("div",{className:"submit-button-div",children:e.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{K as default};
