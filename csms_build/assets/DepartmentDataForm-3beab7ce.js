import{r as c,u as V,m as M,A as b,a as x,j as t,b as $}from"./index-3941a546.js";import{u as P}from"./formik.esm-f1168841.js";import{c as T,a as v}from"./index.esm-6cf26a62.js";import{c as p}from"./PowerupFunctions-d2a7455a.js";import{B as I}from"./BarLoader-5e24b4d4.js";import{B as R}from"./BottomErrorCard-b06e7e18.js";import{T as J}from"./Tabs-6a332c64.js";import"./hoist-non-react-statics.cjs-39f77784.js";function X(){const[g,f]=c.useState(!1),[j,y]=c.useState(null),[E,d]=c.useState(!1),[O,F]=c.useState([]),{api_getdepartmentData:S,api_postdepartmentData:D,api_editdepartmentData:B,api_getdepartmentDataById:k}=$(),u=V(),{id:m}=M(),w=T({departmentName:v().required("Department name is required feild"),abbreviationName:v().required("Short name is required feild")}),i=P({initialValues:{departmentName:"",abbreviationName:""},onSubmit:(e,a)=>{console.log("at submit ",e),L(e)},validationSchema:w}),L=e=>{d(!0);let a,l,s={departmentName:e.departmentName,abbreviationName:e.abbreviationName};m!==void 0?(a=B,l=s,l.id=m):(a=D,l=s),b.post(a,l,x()).then(function(r){var n,h,N;console.log("department master..",(n=r==null?void 0:r.data)==null?void 0:n.data),((h=r==null?void 0:r.data)==null?void 0:h.status)===!0?u("/department"):o(!0,`${(N=r==null?void 0:r.data)==null?void 0:N.message}`),d(!1)}).catch(function(r){console.log("==2 error list...",r),o(!0,"Error occured in submitting form."),d(!1)})},_=()=>{d(!0);let e={id:m};b.post(k,e,x()).then(function(a){var l,s,r,n;console.log("fetch edit data response..",(l=a==null?void 0:a.data)==null?void 0:l.data),(s=a==null?void 0:a.data)!=null&&s.status?q((r=a==null?void 0:a.data)==null?void 0:r.data):o(!0,`${(n=a==null?void 0:a.data)==null?void 0:n.message}`),d(!1)}).catch(function(a){console.log("= edit data error...",a),f(!0),d(!1)})},q=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("id",e==null?void 0:e.id),i.setFieldValue("departmentName",e==null?void 0:e.department_name),i.setFieldValue("abbreviationName",e==null?void 0:e.abbreviation_name)},C=()=>{b.post(S,{},x()).then(function(e){var a,l,s;(a=e==null?void 0:e.data)!=null&&a.status?F((l=e==null?void 0:e.data)==null?void 0:l.data):o(!0,`${(s=e==null?void 0:e.data)==null?void 0:s.message}`),d(!1)}).catch(function(e){console.log("==2 error list...",e),o(!0,"Error occured while fetching data.")})};c.useEffect(()=>{C(),m!==void 0&&_()},[]);const A=e=>{let a=e.target.name,l=e.target.value;a=="departmentName"&&i.setFieldValue("departmentName",p(l,i.values.departmentName,50)),a=="abbreviationName"&&i.setFieldValue("abbreviationName",p(l.trim(),i.values.abbreviationName,200))},o=(e,a)=>{y(a),f(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[E&&t.jsx(I,{}),g&&t.jsx(R,{activateBottomErrorCard:o,errorTitle:j}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Department Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),m===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>u("/department-form"),type:"submit",className:"  add-button-master",children:["Add"," "]})})}):null]}),m!==void 0?"":t.jsx(J,{listRoute:"/department",formRoute:"/department-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Department"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:i.handleSubmit,onChange:A,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Department Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("departmentName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter department"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.departmentName&&i.errors.departmentName?i.errors.departmentName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Short Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...i.getFieldProps("abbreviationName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter short name"}),t.jsx("span",{className:"text-red-600 text-xs",children:i.touched.abbreviationName&&i.errors.abbreviationName?i.errors.abbreviationName:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>u("/department"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:m!==void 0?"Update":"Save"})})]})]})})})]})})})}export{X as default};
