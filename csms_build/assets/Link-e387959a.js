var R=Object.defineProperty;var E=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>(E(e,typeof t!="symbol"?t+"":t,n),n);import{p as i,R as h,j as A}from"./index-ab416760.js";const j=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),g=e=>Array.isArray(e)&&e.every(t=>typeof t=="object"&&!(t instanceof Array)),O=e=>Array.isArray(e)&&e.every(t=>Array.isArray(t)),U=e=>Array.from(e.map(t=>Object.keys(t)).reduce((t,n)=>new Set([...t,...n]),[])),$=(e,t)=>{t=t||U(e);let n=t,s=t;g(t)&&(n=t.map(a=>a.label),s=t.map(a=>a.key));const r=e.map(a=>s.map(o=>L(o,a)));return[n,...r]},L=(e,t)=>{const n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,r,a,o){const c=s[r];if(c==null)o.splice(1);else return c},t);return n===void 0?e in t?t[e]:"":n},x=e=>typeof e>"u"||e===null?"":e,b=(e,t=",",n='"')=>e.filter(s=>s).map(s=>s.map(r=>x(r)).map(r=>`${n}${r}${n}`).join(t)).join(`
`),I=(e,t,n,s)=>b(t?[t,...e]:e,n,s),S=(e,t,n,s)=>b($(e,t),n,s),T=(e,t,n,s)=>t?`${t.join(n)}
${e}`:e.replace(/"/g,'""'),m=(e,t,n,s)=>{if(g(e))return S(e,t,n,s);if(O(e))return I(e,t,n,s);if(typeof e=="string")return T(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},C=(e,t,n,s,r)=>{const a=m(e,n,s,r),o=j()?"application/csv":"text/csv",c=new Blob([t?"\uFEFF":"",a],{type:o}),l=`data:${o};charset=utf-8,${t?"\uFEFF":""}${a}`,p=window.URL||window.webkitURL;return typeof p.createObjectURL>"u"?l:p.createObjectURL(c)},F={data:i.oneOfType([i.string,i.array,i.func]).isRequired,headers:i.array,target:i.string,separator:i.string,filename:i.string,uFEFF:i.bool,onClick:i.func,asyncOnClick:i.bool,enclosingCharacter:i.string},k={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},B={target:"_blank"};class d extends h.Component{constructor(t){super(t),this.state={}}buildURI(){return C(...arguments)}componentDidMount(){const{data:t,headers:n,separator:s,enclosingCharacter:r,uFEFF:a,target:o,specs:c,replace:l}=this.props;this.state.page=window.open(this.buildURI(t,a,n,s,r),o,c,l)}getWindow(){return this.state.page}render(){return null}}u(d,"defaultProps",Object.assign(k,B)),u(d,"propTypes",F);class y extends h.Component{constructor(t){super(t),this.buildURI=this.buildURI.bind(this)}buildURI(){return C(...arguments)}handleLegacy(t,n=!1){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();const{data:s,headers:r,separator:a,filename:o,enclosingCharacter:c,uFEFF:l}=this.props,p=n&&typeof s=="function"?s():s;let f=new Blob([l?"\uFEFF":"",m(p,r,a,c)]);return window.navigator.msSaveBlob(f,o),!1}}handleAsyncClick(t){const n=s=>{if(s===!1){t.preventDefault();return}this.handleLegacy(t,!0)};this.props.onClick(t,n)}handleSyncClick(t){if(this.props.onClick(t)===!1){t.preventDefault();return}this.handleLegacy(t)}handleClick(){return t=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(t):this.handleSyncClick(t);this.handleLegacy(t)}}render(){const{data:t,headers:n,separator:s,filename:r,uFEFF:a,children:o,onClick:c,asyncOnClick:l,enclosingCharacter:p,...f}=this.props,v=typeof window>"u"?"":this.buildURI(t,a,n,s,p);return A.jsx("a",{download:r,...f,ref:w=>this.link=w,target:"_self",href:v,onClick:this.handleClick(),children:o})}}u(y,"defaultProps",k),u(y,"propTypes",F);export{d as C,y as a};
