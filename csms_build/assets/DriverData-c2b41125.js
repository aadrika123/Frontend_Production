import{r as d,u as fa,A as N,a as b,Q as n,j as a,C as ga,H as va,D as v,I as w,b as ja}from"./index-db227e36.js";import{B as Na}from"./BarLoader-92cd05ea.js";import{n as c}from"./PowerupFunctions-c7a4e16f.js";import{u as ba}from"./useSetTitle-a0238787.js";import{D as wa,L as ya}from"./DeleteView-1203d5ab.js";import{T as _a}from"./Tabs-21137408.js";import{u as Sa}from"./formik.esm-243b4d91.js";import{P as Da}from"./Pagination-4f356562.js";import"./index-50cdb325.js";import"./index-fd275632.js";import"./Link-6fc20fc6.js";import"./hoist-non-react-statics.cjs-6b598447.js";function za(){const[y,_]=d.useState([]),[S,La]=d.useState(!0),[K,o]=d.useState(!1),[D,L]=d.useState(!1),[W,X]=d.useState(!1),[i,Z]=d.useState();d.useState(null);const[T,V]=d.useState(null),[aa,j]=d.useState(!1),[ta,ea]=d.useState(),[m,C]=d.useState(1),[h,la]=d.useState(10),[sa,A]=d.useState(),[P,F]=d.useState(),{api_getDriverData:ia,api_getDriverDataById:da,api_deleteDriverData:ra,api_searchDriverData:ca}=ja(),k=fa();ba("Driver Master");const x=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}],E=Sa({initialValues:{search:""},onSubmit:(t,s)=>{console.log("at submit ",t),u(t)}}),oa=[{Header:"Sl No.",Cell:({cell:t})=>a.jsx("span",{children:(m-1)*h+t.row.index+1})},{Header:"Driver Name",accessor:"driver_name"},{Header:"Mobile No",accessor:"mobile"},{Header:"Aadhar",Cell:({cell:t})=>{var s,l;return a.jsx("a",{href:`${v}/api/${(s=t.row.original)==null?void 0:s.aadhar_doc}`,target:"_blank",className:"text-xl text-red-700 ",children:(l=t.row.original)!=null&&l.aadhar_doc?a.jsx(w,{className:"text-red bg-red w-8 h-8"}):""})}},{Header:"PAN",Cell:({cell:t})=>{var s,l;return a.jsx("a",{href:`${v}/api/${(s=t.row.original)==null?void 0:s.pan_doc}`,target:"_blank",className:"text-xl text-red-700 ",children:(l=t.row.original)!=null&&l.pan_doc?a.jsx(w,{className:"text-red bg-red w-8 h-8"}):""})}},{Header:"License",Cell:({cell:t})=>{var s,l;return a.jsx("a",{href:`${v}/api/${(s=t.row.original)==null?void 0:s.license_doc}`,target:"_blank",className:"text-xl text-red-700 ",children:(l=t.row.original)!=null&&l.license_doc?a.jsx(w,{className:"text-red bg-red w-8 h-8"}):""})}},{Header:"Photo",Cell:({cell:t})=>{var s,l;return(s=t.row.original)!=null&&s.photo_doc?a.jsx("img",{src:`${v}/api/${(l=t.row.original)==null?void 0:l.photo_doc}`,className:"text-xl w-10 h-10 "}):""}},{Header:"Status",Cell:({cell:t})=>{var s,l;return a.jsx("span",{className:((s=t.row.original)==null?void 0:s.status)==="Active"?"text-[green]":"text-[red]",children:c((l=t.row.original)==null?void 0:l.status)})}},{Header:"Created Date & Time",Cell:({cell:t})=>{var s,l;return a.jsxs("span",{children:[c((s=t.row.original)==null?void 0:s.date)," | ",c((l=t.row.original)==null?void 0:l.time)]})}},{Header:"Action",Cell:({cell:t})=>{var s,l;return a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>{var e;return k(`/driver-form/${(e=t.row.original)==null?void 0:e.id}`)},className:"edit-button-master",children:"Edit"}),a.jsx("button",{onClick:()=>{var e,r;V((e=t.row.original)==null?void 0:e.id),ea(((r=t.row.original)==null?void 0:r.status)==="Active"?"deactive":"active"),j(!0)},className:`${((s=t.row.original)==null?void 0:s.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((l=t.row.original)==null?void 0:l.status)==="Active"?"Deactivate":"Activate"}),a.jsx("button",{onClick:()=>{var e;return na((e=t.row.original)==null?void 0:e.id)},className:"view-button-master",children:"View"})]})}}],na=t=>{o(!0);let s={id:t};N.post(da,s,b()).then(function(l){var e,r,f,g;console.log("fetch fee master view data response..",(e=l==null?void 0:l.data)==null?void 0:e.data),(r=l==null?void 0:l.data)!=null&&r.status?(Z((f=l==null?void 0:l.data)==null?void 0:f.data),L(!0)):n.error(`${(g=l==null?void 0:l.data)==null?void 0:g.message}`),o(!1)}).catch(function(l){console.log("= edit data error...",l),X(!0),o(!1)})};console.log(D);const xa=()=>{o(!0),j(!1);let t={id:T,status:ta};N.post(ra,t,b()).then(function(s){var l,e,r;console.log("delete response..",(l=s==null?void 0:s.data)==null?void 0:l.data),((e=s==null?void 0:s.data)==null?void 0:e.status)===!0?(u(),(t==null?void 0:t.status)=="active"?n.success("Activated Successfully"):n.error("Deactivated Successfully")):n.error(`${(r=s==null?void 0:s.data)==null?void 0:r.message}`),o(!1)}).catch(function(s){console.log("==delete error...",s),n.warning("Error occured in deletion."),o(!1)})},u=t=>{console.log(t);let s,l;t===void 0?(l={perPage:h,page:m},s=ia):(l={search:t.search,perPage:h,page:m},s=ca),o(!0),N.post(s,l,b()).then(function(e){var r,f,g,H,$,p,M,I,B,z,O,R,U,J,q,Q,Y,G;((r=e==null?void 0:e.data)==null?void 0:r.status)===!0?((g=(f=e==null?void 0:e.data)==null?void 0:f.data)==null?void 0:g.total)===0?(n.error("Data not Found"),_(($=(H=e==null?void 0:e.data)==null?void 0:H.data)==null?void 0:$.data),A((M=(p=e==null?void 0:e.data)==null?void 0:p.data)==null?void 0:M.last_page),F((B=(I=e==null?void 0:e.data)==null?void 0:I.data)==null?void 0:B.total)):(console.log("exam term data",(O=(z=e==null?void 0:e.data)==null?void 0:z.data)==null?void 0:O.data),_((U=(R=e==null?void 0:e.data)==null?void 0:R.data)==null?void 0:U.data),A((q=(J=e==null?void 0:e.data)==null?void 0:J.data)==null?void 0:q.last_page),F((Y=(Q=e==null?void 0:e.data)==null?void 0:Q.data)==null?void 0:Y.total)):n.error(`${(G=e==null?void 0:e.data)==null?void 0:G.message}`),o(!1)}).catch(function(e){n.warning("Error occured while fetching data."),o(!1)})};d.useEffect(()=>{u()},[]),console.log(P),console.log(y);const ma=t=>{la(parseInt(t))},ha=t=>{C(t-1)},ua=t=>{C(t+1)};return d.useEffect(()=>{u()},[m]),d.useEffect(()=>{u()},[h]),a.jsx(a.Fragment,{children:a.jsx("div",{className:"main-div",children:a.jsxs("div",{className:"main-inner-div",children:[K&&a.jsx(Na,{}),W&&a.jsxs("div",{className:"alert-msg",role:"alert",children:[a.jsx("strong",{className:"sorry-msg",children:"Sorry! "}),a.jsx("span",{className:"some-error-msg",children:"Some error occured while fetching list. Please try again later"}),a.jsx("span",{className:"absolute-span"})]}),aa&&a.jsx(wa,{setdeleteStatus:j,deleteItem:xa}),D&&a.jsx(ga,{children:a.jsxs("div",{className:"w-full bg-[#ddf8f6] shadow-xl mb-6 relative",children:[a.jsx("button",{onClick:()=>L(!1),type:"button",class:"absolute top-3 right-10 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:a.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:a.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),a.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-8",children:[a.jsx("div",{className:"font-semibold text-lg px-2 mb-5 text-[#1d807b]",children:"Driver Details"}),a.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Driver Name"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.driver_name)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Mobile No"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.mobile)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Email"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.email)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Address"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.address)})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"License No"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.license_no)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Aadhar No"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.aadhar_no)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-gray-500 text-xs",children:"Pan No"}),a.jsx("div",{className:"font-bold text-sm",children:c(i==null?void 0:i.pan_no)})]})]})]})]})}),a.jsxs("div",{className:"main-sub-div",children:[a.jsx("div",{className:"main-sub-inner-div",children:a.jsxs("div",{className:"text-div",children:[a.jsx("div",{className:"big-text",children:"Driver Master List"}),a.jsx("div",{className:"small-text text-teal-600",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),a.jsx("div",{className:"tab-div",children:a.jsxs("div",{className:"global-filter-div",children:[a.jsx("form",{onSubmit:E.handleSubmit,children:a.jsxs("div",{className:"global-filter flex",children:[a.jsx("input",{type:"search",placeholder:"Search...",...E.getFieldProps("search"),className:"bg-[#F2F4F4] h-10 pl-4 "}),a.jsx("button",{className:"bg-[#0F766E] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"submit",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:a.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})," "]})}),a.jsx("div",{className:"hiplus-div",children:a.jsx("button",{onClick:()=>k("/driver-form"),type:"button",className:"hiplus-button bg-[#0F766E]",children:a.jsx(va,{className:"hiplus"})})})]})})]}),a.jsx(_a,{listRoute:"/driver",formRoute:"/driver-form"}),a.jsx("div",{className:"mt-6",children:a.jsx("span",{className:"lists text-[#0F766E]",children:"Driver List"})}),S&&(x==null?void 0:x.length)!=0&&a.jsxs(a.Fragment,{children:[a.jsx(ya,{filter:!1,exportStatus:!1,assessmentType:!1,columns:oa,dataList:y,pageNumber:P}),a.jsx(Da,{ChangePage:ma,number:m,lastPage:sa,nextPage:ua,prevPage:ha,postperpage:h})]}),S&&(x==null?void 0:x.length)==0&&a.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})})}export{za as default};
