import{r as d,u as se,m as oe,n as ie,I as ce,E as de,J as ne,K as me,A as x,a as b,j as t,b as ue,D as q}from"./index-3941a546.js";import{u as he}from"./formik.esm-f1168841.js";import{c as xe,a as m}from"./index.esm-6cf26a62.js";import{c as be}from"./PowerupFunctions-d2a7455a.js";import{B as fe}from"./BarLoader-5e24b4d4.js";import{B as ge}from"./BottomErrorCard-b06e7e18.js";import{T as pe}from"./Tabs-6a332c64.js";import"./hoist-non-react-statics.cjs-39f77784.js";function Se(){var w,E,D,F,S,k,_,V,A,$;d.useState();const[P,v]=d.useState(!1),[C,L]=d.useState(null),[B,o]=d.useState(!1),[f,O]=d.useState([]),[g,R]=d.useState([]),[p,T]=d.useState([]),[ye,M]=d.useState([]),{api_getVehicle_inchargeData:G,api_editVehicle_inchargeData:H,api_postVehicle_inchargeData:U,api_getVehicle_inchargeDataById:J,api_getStateDataActiveall:X,api_getactiveCountryData:z,api_getDistrictDataActiveAll:K}=ue(),y=se(),{id:n}=oe(),Y=xe({countryId:m().required("Select Country."),stateId:m().required("Select State."),cityId:m().required("Select city."),inchargeName:m().matches(ie,"Please Enter value between A-Z to a-z").required("Vehical incharge name is required feild"),mobile:m().matches(ce,"Please Enter valid mobile no").required("mobile no is required feild"),email:m().matches(de,"Please Enter Valid Email").required("Email is required feild"),address:m().matches(ne,"Please Enter Valid Address").required("Address is required feild"),aadharNo:m().matches(me,"Please Enter Valid Aadhar no").required("Aadhar is required feild")}),a=he({initialValues:{countryId:"",stateId:"",cityId:"",inchargeName:"",mobile:"",email:"",address:"",aadharNo:"",aadharDoc:""},onSubmit:async(e,l)=>{console.log("at submit ",e);const r=new FormData;r.append("aadharDoc",e.aadharDoc),r.append("inchargeName",e.inchargeName),r.append("mobile",e.mobile),r.append("email",e.email),r.append("address",e.address),r.append("aadharNo",e.aadharNo),r.append("countryId",e.countryId),r.append("stateId",e.stateId),r.append("cityId",e.cityId);for(const s of r.values())console.log(s);Z(r)},validationSchema:Y}),Z=e=>{o(!0);let l,r;n!==void 0?(l=H,r=e,r.id=e.append("id",n)):(l=U,r=e),console.log(r),x.post(l,r,b()).then(function(s){var c,u,h;console.log("vehicle incharge master..",(c=s==null?void 0:s.data)==null?void 0:c.data),((u=s==null?void 0:s.data)==null?void 0:u.status)===!0?y("/vehicleincharge"):i(!0,`${(h=s==null?void 0:s.data)==null?void 0:h.message}`),o(!1)}).catch(function(s){console.log("==2 error list...",s),i(!0,"Error occured in submitting form."),o(!1)})},Q=()=>{o(!0);let e={id:n};x.post(J,e,b()).then(function(l){var r,s,c,u;console.log("fetch edit data response..",(r=l==null?void 0:l.data)==null?void 0:r.data),(s=l==null?void 0:l.data)!=null&&s.status?W((c=l==null?void 0:l.data)==null?void 0:c.data):i(!0,`${(u=l==null?void 0:l.data)==null?void 0:u.message}`),o(!1)}).catch(function(l){console.log("= edit data error...",l),v(!0),o(!1)})},W=e=>{console.log("existing property details in prop address...",e),a.setFieldValue("id",e==null?void 0:e.id),a.setFieldValue("countryId",e==null?void 0:e.country_id),a.setFieldValue("stateId",e==null?void 0:e.state_id),a.setFieldValue("cityId",e==null?void 0:e.city_id),a.setFieldValue("inchargeName",e==null?void 0:e.incharge_name),a.setFieldValue("mobile",e==null?void 0:e.mobile),a.setFieldValue("email",e==null?void 0:e.email),a.setFieldValue("address",e==null?void 0:e.address),a.setFieldValue("aadharNo",e==null?void 0:e.aadhar_no),a.setFieldValue("aadharDoc",new File([`${q}/${e==null?void 0:e.aadhar_doc}`],`${q}/${e==null?void 0:e.aadhar_doc}`,{type:"application/pdf"}))},ee=()=>{x.post(G,{},b()).then(function(e){var l,r,s;(l=e==null?void 0:e.data)!=null&&l.status?M((r=e==null?void 0:e.data)==null?void 0:r.data):i(!0,`${(s=e==null?void 0:e.data)==null?void 0:s.message}`),o(!1)}).catch(function(e){console.log("==2 error list...",e),i(!0,"Error occured while fetching data.")})};d.useEffect(()=>{ee(),te(),j(),I(),n!==void 0&&Q()},[]);const te=()=>{x.post(z,{},b()).then(function(e){var l,r,s;(l=e==null?void 0:e.data)!=null&&l.status?O((r=e==null?void 0:e.data)==null?void 0:r.data):i(!0,`${(s=e==null?void 0:e.data)==null?void 0:s.message}`),o(!1)}).catch(function(e){console.log("==2 error list...",e),i(!0,"Error occured while fetching data.")})},j=e=>{o(!0),x.post(X,{},b()).then(function(l){var r,s,c;if((r=l==null?void 0:l.data)!=null&&r.status){const h=((s=l==null?void 0:l.data)==null?void 0:s.data).filter(N=>N.country_id===parseInt(e));R(h)}else i(!0,`${(c=l==null?void 0:l.data)==null?void 0:c.message}`);o(!1)}).catch(function(l){console.log("==2 error list...",l),i(!0,"Error occured while fetching data.")})},I=e=>{o(!0),x.post(K,{},b()).then(function(l){var r,s,c;if(((r=l==null?void 0:l.data)==null?void 0:r.status)===!0){const h=((s=l==null?void 0:l.data)==null?void 0:s.data).filter(N=>N.state_id===parseInt(e));T(h)}else i(!0,`${(c=l==null?void 0:l.data)==null?void 0:c.message}`);o(!1)}).catch(function(l){console.log("==2 error list...",l),i(!0,"Error occured while fetching data.")})};d.useEffect(()=>{j(a.values.countryId)},[a.values.countryId]),d.useEffect(()=>{I(a.values.stateId)},[a.values.stateId]);const ae=e=>{let l=e.target.name,r=e.target.value;if(l=="inchargeName"&&a.setFieldValue("inchargeName",be(r,a.values.inchargeName,50)),l=="mobile"){let s=e.target.value;re(s)}if(l=="aadharNo"){let s=e.target.value;le(s)}},i=(e,l)=>{L(l),v(e)},le=e=>{e>12&&a.setFieldValue("aadharNo",e.slice(0,12))},re=e=>{e.length>10&&a.setFieldValue("mobile",e.slice(0,10))};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[B&&t.jsx(fe,{}),P&&t.jsx(ge,{activateBottomErrorCard:i,errorTitle:C}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Vehicle Incharge Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>y("/vehicleincharge-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})})]}),n!==void 0?"":t.jsx(pe,{listRoute:"/vehicleincharge",formRoute:"/vehicleincharge-form"}),t.jsx("div",{className:"mt-6 border-b",children:t.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Vehicle Incharge"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:a.handleSubmit,onChange:ae,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Incharge Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("inchargeName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter incharge name"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.inchargeName&&a.errors.inchargeName?a.errors.inchargeName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Email",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("email"),type:"email",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter  email"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.email&&a.errors.email?a.errors.email:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Mobile No.",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("mobile"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter mobile no"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.mobile&&a.errors.mobile?a.errors.mobile:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Address",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("address"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter address"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.address&&a.errors.address?a.errors.address:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Aadhar No.",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("aadharNo"),type:"number",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter aadhar no."}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.aadharNo&&a.errors.aadharNo?a.errors.aadharNo:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("countryId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select country",children:[t.jsx("option",{value:"",children:"Select"}),f==null?void 0:f.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.country_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.countryId&&a.errors.countryId?a.errors.countryId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["State",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("stateId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select state",children:[t.jsx("option",{value:"",children:"Select"}),g==null?void 0:g.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.state_name}))]}),t.jsx("span",{className:"text-red-600  text-xs",children:a.touched.stateId&&a.errors.stateId?a.errors.stateId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["City",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("cityId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select city",children:[t.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.city_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.cityId&&a.errors.cityId?a.errors.cityId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Upload Aadhar",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("div",{className:"block justify-start",children:[t.jsx("label",{htmlFor:"aadharDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),t.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",name:"aadharDoc",id:"aadharDoc",type:"file",accept:".pdf",size:2*1024*1024,onChange:e=>{a.setFieldValue("aadharDoc",e.target.files[0])}}),a.values.aadharDoc&&n!==void 0?`${(w=a.values.aadharDoc)==null?void 0:w.name}`.slice(`${(E=a.values.aadharDoc)==null?void 0:E.name}`.lastIndexOf("-")+1||`${(D=a.values.aadharDoc)==null?void 0:D.name}`.lastIndexOf("/")+1||`${(F=a.values.aadharDoc)==null?void 0:F.name}`.lastIndexOf("\\")+1||`${(S=a.values.aadharDoc)==null?void 0:S.name}`.lastIndexOf(".")+1||`${(k=a.values.aadharDoc)==null?void 0:k.name}`.lastIndexOf(" ")+1||`${(_=a.values.aadharDoc)==null?void 0:_.name}`.lastIndexOf(",")+1||`${(V=a.values.aadharDoc)==null?void 0:V.name}`.lastIndexOf("?")+1,`${(A=a.values.aadharDoc)==null?void 0:A.name}`.length):a.values.aadharDoc&&n===void 0?($=a.values.aadharDoc)==null?void 0:$.name:"No file selected"]})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"",children:t.jsx("button",{onClick:()=>y("/vehicleincharge"),type:"button",className:" px-6 py-2.5 bg-gray-200 hover:bg-gray-400 text-gray-700 font-medium text-xs leading-tight uppercase rounded shadow-md hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:n!==void 0?"Update":"Save"})})]})]})})})]})})})}export{Se as default};
