import{r as s,A as p,a as v,Q as n,j as t,S as Le,b as Ce}from"./index-f916f929.js";import{B as Ie}from"./BarLoader-858f75dd.js";import{n as H,c as R}from"./PowerupFunctions-6790304d.js";import{u as Pe}from"./useSetTitle-649e2a77.js";import{D as Be,L as Ve}from"./DeleteView-67799ae7.js";import{u as $e}from"./formik.esm-2de3563d.js";import"./Link-dfdf966c.js";import{a as qe}from"./index.esm-3ff8c7a6.js";import{c as Me,a as w}from"./index.esm-b3999377.js";import{E as ke}from"./jspdf.plugin.autotable-12d9d4cc.js";import{P as Oe}from"./Pagination-570e9fe7.js";import{T as Ue}from"./TabulationHeader-ea3e2d1c.js";import"./index-39e9bbf5.js";import"./index-3c33807a.js";import"./hoist-non-react-statics.cjs-fb57390d.js";import"./typeof-7fd5df1e.js";import"./TextField-22b2c8ae.js";import"./Select-d451ae47.js";import"./InputAdornment-be163edb.js";const ut=()=>{const[u,S]=s.useState([]),[G,W]=s.useState(null),[_,Ye]=s.useState(!0),[X,Z]=s.useState(!1),[ee,te]=s.useState([]),[ae,r]=s.useState(!1),[Je,F]=s.useState(!1),[ze,le]=s.useState(null),[f,T]=s.useState(null),[ie,N]=s.useState(!1),[E,de]=s.useState(),[h,D]=s.useState(1),[b,se]=s.useState([]),[j,ce]=s.useState(10),[re,A]=s.useState(),[L,C]=s.useState(),[oe,ne]=s.useState(),{api_fetcHeadTypeActiveList:me,api_fetcHeadList:ue,api_searchHeadList:fe,api_postHead:he,api_editHead:xe,api_getHeadById:ge,api_deleteHeadById:je}=Ce(),ye=()=>{p.post(me,{},v()).then(function(e){var i,l,a;(i=e==null?void 0:e.data)!=null&&i.status?se((l=e==null?void 0:e.data)==null?void 0:l.data):I(!0,`${(a=e==null?void 0:e.data)==null?void 0:a.message}`),r(!1)}).catch(function(e){console.log("==2 error list...",e),I(!0,"Error occured while fetching data.")})};s.useEffect(()=>{ye()},[]),Pe("Fee Head type Master");const x=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}],pe=Me({feeHead:w().required("Enter fee head."),feeHeadTypeId:w().required("Select fee head type"),description:w().required("Enter description.")}),c=$e({initialValues:{feeHead:"",feeHeadTypeId:"",description:""},onSubmit:(e,i)=>{console.log("at submit ",e),Fe(e),c.resetForm()},validationSchema:pe}),g=e=>{console.log(e);let i,l;e===void 0?(l={perPage:j,page:h},i=ue):(l={search:e,perPage:j,page:h},i=fe),r(!0),p.post(i,l,v()).then(function(a){var d,o,m,y,P,B,V,$,q,M,k,O,U,Y,J,z,K,Q;((d=a==null?void 0:a.data)==null?void 0:d.status)===!0?((m=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:m.total)===0?(n.error("Data not Found"),S((P=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:P.data),A((V=(B=a==null?void 0:a.data)==null?void 0:B.data)==null?void 0:V.last_page),C((q=($=a==null?void 0:a.data)==null?void 0:$.data)==null?void 0:q.total)):(console.log("Fee Head data",(k=(M=a==null?void 0:a.data)==null?void 0:M.data)==null?void 0:k.data),S((U=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:U.data),A((J=(Y=a==null?void 0:a.data)==null?void 0:Y.data)==null?void 0:J.last_page),C((K=(z=a==null?void 0:a.data)==null?void 0:z.data)==null?void 0:K.total)):n.error(`${(Q=a==null?void 0:a.data)==null?void 0:Q.message}`),r(!1)}).catch(function(a){n.warning("Error occured while fetching data."),r(!1)})};console.log(L);const ve=u;console.log(u);const Ne=e=>{ce(parseInt(e))},be=e=>{D(e-1)},He=e=>{D(e+1)};s.useEffect(()=>{g()},[h]),s.useEffect(()=>{g()},[j]);const we=[{Header:"Sl No.",Cell:({cell:e})=>t.jsxs("span",{children:[" ",(h-1)*j+e.row.index+1," "]})},{Header:"Fee Head",accessor:"fee_head"},{Header:"Fee Head Type",accessor:"fee_head_type"},{Header:"Description",accessor:"description"},{Header:"Created Date & Time",Cell:({cell:e})=>{var i,l;return t.jsxs("span",{children:[H((i=e.row.original)==null?void 0:i.date)," |"," ",H((l=e.row.original)==null?void 0:l.time)]})}},{Header:"Status",Cell:({cell:e})=>{var i,l;return t.jsx("span",{className:((i=e.row.original)==null?void 0:i.status)==="Active"?"text-[green]":"text-[red]",children:H((l=e.row.original)==null?void 0:l.status)})}},{Header:"Action",Cell:({cell:e})=>{var i,l;return t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>{Le.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(a=>{var d,o;a.value&&(T((d=e.row.original)==null?void 0:d.id),Se((o=e.row.original)==null?void 0:o.id))})},className:"edit-button-master",children:t.jsx("a",{title:"edit",children:t.jsx(qe,{size:23})})}),t.jsx("button",{onClick:()=>{var a,d;W((a=e.row.original)==null?void 0:a.id),de(((d=e.row.original)==null?void 0:d.status)==="Active"?"deactive":"active"),N(!0)},className:`${((i=e.row.original)==null?void 0:i.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((l=e.row.original)==null?void 0:l.status)==="Active"?"Deactivate":"Activate"})]})}}];console.log(h);const Se=e=>{r(!0);let i={id:e};p.post(ge,i,v()).then(function(l){var a,d,o,m;console.log("fetch edit data response..",(a=l==null?void 0:l.data)==null?void 0:a.data),(d=l==null?void 0:l.data)!=null&&d.status?_e((o=l==null?void 0:l.data)==null?void 0:o.data):n.error(`${(m=l==null?void 0:l.data)==null?void 0:m.message}`),r(!1)}).catch(function(l){console.log("= edit data error...",l),F(!0),r(!1)})},_e=e=>{console.log("existing property details in prop address...",e),c.setFieldValue("feeHead",e==null?void 0:e.fee_head),c.setFieldValue("feeHeadTypeId",e==null?void 0:e.fee_head_type_id),c.setFieldValue("description",e==null?void 0:e.description)};console.log(f);const Fe=e=>{console.log(e),r(!0);let i,l,a={feeHead:e.feeHead,feeHeadTypeId:e.feeHeadTypeId,description:e.description};f!==null?(i=xe,l=a,l.id=f):(e==null?void 0:e.feeHead)!==""&&(e==null?void 0:e.description)!==""&&f==null&&(i=he,l=a),p.post(i,l,v()).then(function(d){var o,m,y;console.log("fee head type..",(o=d==null?void 0:d.data)==null?void 0:o.data),((m=d==null?void 0:d.data)==null?void 0:m.status)===!0?(n.success(f!==null?"Data Updated Successfully!":"Data Added Successfully"),g(),T(null)):n.error(`${(y=d==null?void 0:d.data)==null?void 0:y.message}`),r(!1)}).catch(function(d){console.log("==2 error list...",d),n.warning("Error occured in submitting form."),r(!1)})},Te=()=>{r(!0),N(!1);let e={id:G,status:E};p.post(je,e,v()).then(function(i){var l,a;((l=i==null?void 0:i.data)==null?void 0:l.status)===!0?(g(),(e==null?void 0:e.status)=="active"?n.success("Activated Successfully"):n.error("Deactivated Successfully")):n.error(`${(a=i==null?void 0:i.data)==null?void 0:a.message}`),r(!1)}).catch(function(i){n.warning("Error occured in deletion."),r(!1)})};s.useEffect(()=>{g()},[]);const Ee=e=>{let i=e.target.name,l=e.target.value;i=="feeHead"&&c.setFieldValue("feeHead",R(l,c.values.feeHead,50)),i=="description"&&c.setFieldValue("description",R(l,c.values.description,50))},I=(e,i)=>{le(i),F(e)},De=[{title:"Fee Head ",feild:"fee_head"},{title:"Fee Head Type",feild:"fee_head_type"},{title:"Description",feild:"description"},{title:"Created Date  ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],Ae=()=>{const e=new ke;e.text("Fee Head Type Details",10,10),e.autoTable({theme:"grid",columns:De.map(i=>({...i,dataKey:i.feild})),body:u}),e.save("FeeHeadtype.pdf")};return s.useEffect(()=>{const e=u.map(i=>{const{id:l,...a}=i;return a});console.log(e),te(e)},[u]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full h-[76vh] lg:h-auto overflow-auto ",children:[t.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Fee Head Form"}),t.jsx("h1",{className:"common-header-smalltext",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),t.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:t.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:t.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[t.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:t.jsxs("div",{className:"mt-8 border border-teal-300 w-full  rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-whitext-[#0F766E]te flex font-semibold  -mt-4 text-[#0F766E] ml-9",children:"Add"})]}),t.jsxs("div",{className:"w-full mb-6 mt-[14vh] pb-10  ",children:[t.jsxs("form",{onSubmit:c.handleSubmit,onChange:Ee,children:[t.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[t.jsx("div",{className:" col-span-12 lg:col-span-3",children:t.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md md:w-[20vw] w-full font-bold",htmlFor:"",children:["Fee Head Type",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),t.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[t.jsxs("select",{...c.getFieldProps("feeHeadTypeId"),type:"text",className:"common-input-css",placeholder:"Select fee head type",children:[t.jsx("option",{value:"",children:"Select"}),b==null?void 0:b.map((e,i)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.fee_head_type}))]}),t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:c.touched.feeHeadTypeId&&c.errors.feeHeadTypeId?c.errors.feeHeadTypeId:null})]})]}),t.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[t.jsx("div",{className:" col-span-12 lg:col-span-3",children:t.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md md:w-[20vw] w-full font-bold",htmlFor:"",children:["Fee Head",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),t.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[t.jsx("input",{...c.getFieldProps("feeHead"),className:"common-input-css",type:"text",placeholder:"Enter fee head type"}),t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:c.touched.feeHead&&c.errors.feeHead?c.errors.feeHead:null})]})]}),t.jsxs("div",{className:"grid grid-cols-12 mt-6",children:[t.jsx("div",{className:" col-span-12 lg:col-span-3",children:t.jsxs("label",{className:" flex items-start justify-start ml-2 text-teal-900 text-md md:w-[20vw] w-full font-bold",htmlFor:"",children:["Description",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600  ",children:"*"})]})}),t.jsxs("div",{className:"col-span-12 lg:col-span-9",children:[t.jsx("input",{...c.getFieldProps("description"),className:"common-input-css",type:"text",placeholder:"Enter fee head type"}),t.jsx("br",{}),t.jsx("span",{className:"text-red-600  text-xs",children:c.touched.description&&c.errors.description?c.errors.description:null})]})]}),t.jsx("div",{className:"mt-7",children:t.jsx("button",{type:"submit",className:"save-button",children:f!==null?"Update":"Save"})})]}),t.jsx("div",{className:"mandatorytext",children:t.jsxs("h1",{children:["Note : (*) is a mandatory field"," "]})})]})]})}),t.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:t.jsxs("div",{className:"mt-8 border border-teal-300  rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-[#0F766E] ml-9",children:"View List"})]}),t.jsx("div",{className:"mt-5  ",children:t.jsx(Ue,{generatePdf:Ae,enable:X,setenable:Z,csvdata:ee,readymadeListData:u,fetchMasterList:g,setSearchTableData:ne,searchTableData:oe})}),t.jsx("div",{className:"-mt-5 main-div",children:t.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[ae&&t.jsx(Ie,{}),ie&&t.jsx(Be,{setdeleteStatus:N,deleteItem:Te,deactivate:E}),t.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[_&&(x==null?void 0:x.length)!=0&&t.jsx(Ve,{filter:!1,exportStatus:!1,assessmentType:!1,columns:we,dataList:ve,pageNumber:L}),t.jsx(Oe,{ChangePage:Ne,number:h,lastPage:re,nextPage:He,prevPage:be,postperpage:j})]}),_&&(x==null?void 0:x.length)==0&&t.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})})};export{ut as default};
