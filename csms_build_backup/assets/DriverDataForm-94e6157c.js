import{r as n,u as Ve,m as Ae,n as Pe,J as Ce,E as Se,K as qe,L as _e,A as p,a as h,j as l,b as Le}from"./index-f916f929.js";import{u as Re}from"./formik.esm-2de3563d.js";import{c as Be,a as d}from"./index.esm-b3999377.js";import{c as ie,e as de}from"./PowerupFunctions-6790304d.js";import{B as Me}from"./BarLoader-858f75dd.js";import{B as Ue}from"./BottomErrorCard-20c0353c.js";import{T as Te}from"./Tabs-02c9d570.js";import"./hoist-non-react-statics.cjs-fb57390d.js";function We(){var y,D,j,F,E,w,$,k,I,O,V,A,P,C,S,q,_,L,R,B,M,U,T,G,J,K,X,Y,z,H,Z,Q,W,ee,ae,le,se,oe,te,re;const[ce,x]=n.useState(!1),[me,ue]=n.useState(null),[xe,i]=n.useState(!1),[Ge,pe]=n.useState([]),[f,he]=n.useState(""),[b,fe]=n.useState(""),[g,be]=n.useState(""),[N,ge]=n.useState(""),{api_getDriverData:Ne,api_postDriverData:ve,api_editDriverData:ye,api_getDriverDataById:De}=Le(),v=Ve(),{id:r}=Ae(),je=Be({driverName:d().matches(Pe,"Please Enter value between A-Z to a-z").required("Driver name is required feild"),mobile:d().matches(Ce,"Please Enter valid mobile no").required("mobile no is required feild"),email:d().matches(Se,"Please Enter Valid Email").required("Email is required feild"),address:d().matches(qe,"Please Enter Valid Address").required("Address is required feild"),licenseNo:d().required("License no is required feild"),aadharNo:d().matches(_e,"Please Enter Valid Aadhar no").required("Aadhar is required feild"),panNo:d().required("Pan no is required feild")}),e=Re({initialValues:{driverName:"",mobile:"",email:"",address:"",licenseNo:"",aadharNo:"",panNo:"",aadharDoc:"",panDoc:"",photoDoc:"",licenseDoc:""},onSubmit:async(a,s)=>{console.log("at submit ",a);const o=new FormData;o.append("aadharDoc",a.aadharDoc),o.append("panDoc",a.panDoc),o.append("photoDoc",a.photoDoc),o.append("licenseDoc",a.licenseDoc),o.append("driverName",a.driverName),o.append("mobile",a.mobile),o.append("email",a.email),o.append("address",a.address),o.append("licenseNo",a.licenseNo),o.append("aadharNo",a.aadharNo),o.append("panNo",a.panNo);for(const t of o.values())console.log(t);Fe(o)},validationSchema:je}),Fe=a=>{i(!0);let s,o;r!==void 0?(s=ye,o=a,o.id=a.append("id",r)):(s=ve,o=a),console.log(o),p.post(s,o,h()).then(function(t){var m,u,ne;console.log("driver master..",(m=t==null?void 0:t.data)==null?void 0:m.data),((u=t==null?void 0:t.data)==null?void 0:u.status)===!0?v("/driver"):c(!0,`${(ne=t==null?void 0:t.data)==null?void 0:ne.message}`),i(!1)}).catch(function(t){console.log("==2 error list...",t),c(!0,"Error occured in submitting form."),x(!0),i(!1)})},Ee=()=>{i(!0);let a={id:r};p.post(De,a,h()).then(function(s){var o,t,m,u;console.log("fetch edit data response..",(o=s==null?void 0:s.data)==null?void 0:o.data),(t=s==null?void 0:s.data)!=null&&t.status?we((m=s==null?void 0:s.data)==null?void 0:m.data):c(!0,`${(u=s==null?void 0:s.data)==null?void 0:u.message}`),i(!1)}).catch(function(s){console.log("= edit data error...",s),x(!0),i(!1)})},we=a=>{console.log("existing property details in prop address...",a),e.setFieldValue("id",a==null?void 0:a.id),e.setFieldValue("driverName",a==null?void 0:a.driver_name),e.setFieldValue("mobile",a==null?void 0:a.mobile),e.setFieldValue("email",a==null?void 0:a.email),e.setFieldValue("address",a==null?void 0:a.address),e.setFieldValue("licenseNo",a==null?void 0:a.license_no),e.setFieldValue("aadharNo",a==null?void 0:a.aadhar_no),e.setFieldValue("panNo",a==null?void 0:a.pan_no),e.setFieldValue("aadharDoc",""),e.setFieldValue("panDoc",""),e.setFieldValue("licenseDoc",""),e.setFieldValue("photoDoc",""),he(a==null?void 0:a.aadhar_doc),fe(a==null?void 0:a.pan_doc),be(a==null?void 0:a.license_doc),ge(a==null?void 0:a.photo_doc)},$e=()=>{p.post(Ne,{},h()).then(function(a){var s,o,t;(s=a==null?void 0:a.data)!=null&&s.status?pe((o=a==null?void 0:a.data)==null?void 0:o.data):c(!0,`${(t=a==null?void 0:a.data)==null?void 0:t.message}`),i(!1)}).catch(function(a){console.log("==2 error list...",a),c(!0,"Error occured while fetching data."),x(!0),i(!1)})};n.useEffect(()=>{$e(),r!==void 0&&Ee()},[]);const ke=a=>{let s=a.target.name,o=a.target.value;if(s=="driverName"&&e.setFieldValue("driverName",ie(o,e.values.driverName,40)),s=="address"&&e.setFieldValue("address",ie(o,e.values.address,200)),s=="licenseNo"&&e.setFieldValue("licenseNo",de(o,e.values.licenseNo,50)),s=="panNo"&&e.setFieldValue("panNo",de(o.toUpperCase(),e.values.panNo,10)),s=="mobile"){let t=a.target.value;Oe(t)}if(s=="aadharNo"){let t=a.target.value;Ie(t)}},Ie=a=>{a>12&&e.setFieldValue("aadharNo",a.slice(0,12))},Oe=a=>{a.length>10&&e.setFieldValue("mobile",a.slice(0,10))},c=(a,s)=>{ue(s),x(a)};return l.jsx(l.Fragment,{children:l.jsx("div",{className:"main-div",children:l.jsxs("div",{className:"main-inner-div",children:[xe&&l.jsx(Me,{}),ce&&l.jsx(Ue,{activateBottomErrorCard:c,errorTitle:me}),l.jsx("div",{className:"main-sub-div",children:l.jsx("div",{className:"main-sub-inner-div",children:l.jsxs("div",{className:"text-div",children:[l.jsx("div",{className:"big-text",children:"Driver Master Form"}),l.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})})}),r!==void 0?"":l.jsx(Te,{listRoute:"/driver",formRoute:"/driver-form"}),l.jsx("div",{className:"details-div",children:l.jsx("span",{className:"text-lg font-noarml text-[#0F766E]",children:"Details of Driver"})}),l.jsx("div",{className:"form-div",children:l.jsx("form",{onSubmit:e.handleSubmit,onChange:ke,children:l.jsxs("div",{className:"form",children:[l.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:["Driver Name",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("driverName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter driver name"}),l.jsx("span",{className:"text-red-600 text-xs",children:e.touched.driverName&&e.errors.driverName?e.errors.driverName:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","Mobile No.",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("mobile"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter mobile no.",onKeyDown:a=>["e","E","+","-"].includes(a.key)&&a.preventDefault()}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.mobile&&e.errors.mobile?e.errors.mobile:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","Email",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("email"),type:"email",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter email "}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.email&&e.errors.email?e.errors.email:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","Address",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("address"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter address "}),l.jsx("span",{className:"text-red-600 text-xs",children:e.touched.address&&e.errors.address?e.errors.address:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","License No.",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("licenseNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter license no."}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.licenseNo&&e.errors.licenseNo?e.errors.licenseNo:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","Aadhar No.",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("aadharNo"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter aadhar no.",onKeyDown:a=>["e","E","+","-"].includes(a.key)&&a.preventDefault()}),l.jsx("span",{className:"text-red-600 text-xs",children:e.touched.aadharNo&&e.errors.aadharNo?e.errors.aadharNo:null})]})]}),l.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:[" ","PAN No.",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsx("input",{...e.getFieldProps("panNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter pan no."}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.panNo&&e.errors.panNo?e.errors.panNo:null})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold ",children:["Upload Aadhar",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsxs("div",{className:"block justify-start",children:[l.jsx("label",{htmlFor:"aadharDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),l.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"aadharDoc",id:"aadharDoc",type:"file",accept:".pdf",onChange:a=>{e.setFieldValue("aadharDoc",a.target.files[0])}}),e.values.aadharDoc&&r!==void 0?`${(y=e.values.aadharDoc)==null?void 0:y.name}`.slice(`${(D=e.values.aadharDoc)==null?void 0:D.name}`.lastIndexOf("-")+1||`${(j=e.values.aadharDoc)==null?void 0:j.name}`.lastIndexOf("/")+1||`${(F=e.values.aadharDoc)==null?void 0:F.name}`.lastIndexOf("\\")+1||`${(E=e.values.aadharDoc)==null?void 0:E.name}`.lastIndexOf(".")+1||`${(w=e.values.aadharDoc)==null?void 0:w.name}`.lastIndexOf(" ")+1||`${($=e.values.aadharDoc)==null?void 0:$.name}`.lastIndexOf(",")+1||`${(k=e.values.aadharDoc)==null?void 0:k.name}`.lastIndexOf("?")+1,`${(I=e.values.aadharDoc)==null?void 0:I.name}`.length):e.values.aadharDoc&&r===void 0?(O=e.values.aadharDoc)==null?void 0:O.name:f||"No file selected",l.jsx("br",{}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.aadharDoc&&e.errors.aadharDoc?e.errors.aadharDoc:null})]})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold",children:["Upload PAN",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsxs("div",{className:"block justify-start",children:[l.jsx("label",{htmlFor:"panDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),l.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"panDoc",id:"panDoc",type:"file",accept:".pdf",onChange:a=>{e.setFieldValue("panDoc",a.target.files[0])}}),e.values.panDoc&&r!==void 0?`${(V=e.values.panDoc)==null?void 0:V.name}`.slice(`${(A=e.values.panDoc)==null?void 0:A.name}`.lastIndexOf("-")+1||`${(P=e.values.panDoc)==null?void 0:P.name}`.lastIndexOf("/")+1||`${(C=e.values.panDoc)==null?void 0:C.name}`.lastIndexOf("\\")+1||`${(S=e.values.panDoc)==null?void 0:S.name}`.lastIndexOf(".")+1||`${(q=e.values.panDoc)==null?void 0:q.name}`.lastIndexOf(" ")+1||`${(_=e.values.panDoc)==null?void 0:_.name}`.lastIndexOf(",")+1||`${(L=e.values.panDoc)==null?void 0:L.name}`.lastIndexOf("?")+1,`${(R=e.values.panDoc)==null?void 0:R.name}`.length):e.values.panDoc&&r===void 0?(B=e.values.panDoc)==null?void 0:B.name:b||"No file selected",l.jsx("br",{}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.panDoc&&e.errors.panDoc?e.errors.panDoc:null})]})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold ",htmlFor:"photoDoc",children:["Upload Photo",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsxs("div",{className:"block justify-start",children:[l.jsx("label",{htmlFor:"photoDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),l.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"photoDoc",id:"photoDoc",type:"file",accept:".jpg,.jpeg,.png",onChange:a=>{e.setFieldValue("photoDoc",a.target.files[0])}}),e.values.photoDoc&&r!==void 0?`${(M=e.values.photoDoc)==null?void 0:M.name}`.slice(`${(U=e.values.photoDoc)==null?void 0:U.name}`.lastIndexOf("-")+1||`${(T=e.values.photoDoc)==null?void 0:T.name}`.lastIndexOf("/")+1||`${(G=e.values.photoDoc)==null?void 0:G.name}`.lastIndexOf("\\")+1||`${(J=e.values.photoDoc)==null?void 0:J.name}`.lastIndexOf(".")+1||`${(K=e.values.photoDoc)==null?void 0:K.name}`.lastIndexOf(" ")+1||`${(X=e.values.photoDoc)==null?void 0:X.name}`.lastIndexOf(",")+1||`${(Y=e.values.photoDoc)==null?void 0:Y.name}`.lastIndexOf("?")+1,`${(z=e.values.photoDoc)==null?void 0:z.name}`.length):e.values.photoDoc&&r===void 0?(H=e.values.photoDoc)==null?void 0:H.name:N||"No file selected",l.jsx("br",{}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.photoDoc&&e.errors.photoDoc?e.errors.photoDoc:null})]})]}),l.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1 text-[#0F766E] text-sm font-semibold ",children:["Upload License",l.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),l.jsxs("div",{className:"block justify-start",children:[l.jsx("label",{htmlFor:"licenseDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),l.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-3 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",name:"licenseDoc",id:"licenseDoc",type:"file",accept:".pdf",onChange:a=>{e.setFieldValue("licenseDoc",a.target.files[0])}}),e.values.licenseDoc&&r!==void 0?`${(Z=e.values.licenseDoc)==null?void 0:Z.name}`.slice(`${(Q=e.values.licenseDoc)==null?void 0:Q.name}`.lastIndexOf("-")+1||`${(W=e.values.licenseDoc)==null?void 0:W.name}`.lastIndexOf("/")+1||`${(ee=e.values.licenseDoc)==null?void 0:ee.name}`.lastIndexOf("\\")+1||`${(ae=e.values.licenseDoc)==null?void 0:ae.name}`.lastIndexOf(".")+1||`${(le=e.values.licenseDoc)==null?void 0:le.name}`.lastIndexOf(" ")+1||`${(se=e.values.licenseDoc)==null?void 0:se.name}`.lastIndexOf(",")+1||`${(oe=e.values.licenseDoc)==null?void 0:oe.name}`.lastIndexOf("?")+1,`${(te=e.values.licenseDoc)==null?void 0:te.name}`.length):e.values.licenseDoc&&r===void 0?(re=e.values.licenseDoc)==null?void 0:re.name:g||"No file selected",l.jsx("br",{}),l.jsx("span",{className:"text-red-600  text-xs",children:e.touched.licenseDoc&&e.errors.licenseDoc?e.errors.licenseDoc:null})]})]})]}),l.jsxs("div",{className:"cancel-button-div",children:[l.jsx("div",{className:"",children:l.jsx("button",{onClick:()=>v("/driver"),type:"button",className:"deactivate-button-master bg-red-500 text-white py-2",children:"Back to List"})}),l.jsx("div",{className:"submit-button-div",children:l.jsx("button",{type:"submit",className:"save-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{We as default};
