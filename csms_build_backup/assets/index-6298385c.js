import{j as t,r as u,u as B,A as j,a as b,b as M}from"./index-f916f929.js";import{F,I as N,S as H,c as I}from"./Select-d451ae47.js";import{M as f}from"./MenuItem-75f66cfe.js";import{T as w}from"./TextField-22b2c8ae.js";import{u as R,a as D,b as Y}from"./formik.esm-2de3563d.js";import{c as U,a as y}from"./index.esm-b3999377.js";import"./hoist-non-react-statics.cjs-fb57390d.js";function G(a){const{formik:l,feeHeadTypeList:d,financialList:i,classList:n}=a;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12 gap-4",children:[t.jsx("div",{className:"mt-4  col-span-8 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.fyId&&!!l.errors.fyId,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Financial Year"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Financial Year",...l.getFieldProps("fyId"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),i&&(i==null?void 0:i.map(r=>t.jsx(f,{value:r==null?void 0:r.fy,children:r==null?void 0:r.fy})))]}),t.jsx(I,{children:l.touched.fyId&&l.errors.fyId})]})}),t.jsx("div",{className:"mt-4 col-span-8 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.classId&&!!l.errors.classId,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Class"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Class",...l.getFieldProps("classId"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),n&&(n==null?void 0:n.map(r=>t.jsx(f,{value:r==null?void 0:r.id,children:r==null?void 0:r.class_name})))]}),t.jsx(I,{children:l.touched.classId&&l.errors.classId})]})}),t.jsx("div",{div:!0,className:"mt-4 col-span-4 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.feeHeadType&&!!l.errors.feeHeadType,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Fee Head Type"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Type",...l.getFieldProps("feeHeadType"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),d&&(d==null?void 0:d.map(r=>t.jsx(f,{value:r==null?void 0:r.id,children:r==null?void 0:r.fee_head_type})))]}),t.jsx(I,{children:l.touched.feeHeadType&&l.errors.feeHeadType})]})})]})})}function J(a){const{formik:l,feeHeadNameList:d}=a;return t.jsx("div",{className:" block w-full",children:t.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12   gap-4",children:[t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsxs(F,{fullWidth:!0,error:l.touched.feeHeadName&&!!l.errors.feeHeadName,children:[t.jsx(N,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Fee Head Name"}),t.jsxs(H,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Name",...l.getFieldProps("feeHeadName"),fullWidth:!0,size:"small",children:[t.jsx(f,{value:"",children:"Select"}),d&&(d==null?void 0:d.map(i=>t.jsx(f,{value:i==null?void 0:i.id,children:i==null?void 0:i.fee_head_name})))]}),t.jsx(I,{children:l.touched.feeHeadName&&l.errors.feeHeadName})]})}),t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsx(w,{type:"text",...l.getFieldProps("feeAmount"),label:"Fee Amount",fullWidth:!0,size:"small",error:l.touched.feeAmount&&!!l.errors.feeAmount,helperText:l.touched.feeAmount&&l.errors.feeAmount})}),t.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:t.jsx(w,{type:"text",...l.getFieldProps("description"),label:"Description",fullWidth:!0,size:"small",error:l.touched.description&&!!l.errors.description,helperText:l.touched.description&&l.errors.description})})]})})}function K(a){const{formik:l,months:d}=a;u.useEffect(()=>{l.setFieldValue("datas",d.map(r=>(console.log(r),{...r,inputValue:0})))},[d]),console.log(l.values.datas);const i=()=>{var c,h;const r=(h=(c=l==null?void 0:l.values)==null?void 0:c.datas)==null?void 0:h.map(x=>({...x,inputValue:1}));l.setFieldValue("datas",r)},n=()=>{var c,h;const r=(h=(c=l==null?void 0:l.values)==null?void 0:c.datas)==null?void 0:h.map(x=>({...x,inputValue:0}));l.setFieldValue("datas",r)};return t.jsx(t.Fragment,{children:d.length>0?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"border border-gray-300 mx-3 py-5 my-10 flex items-center justify-center flex-wrap",children:[l.values.datas.map((r,c)=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex w-[40vh] my-4",children:[t.jsx("h1",{className:"text-[1.8vh] mx-4 px-4  bg-gradient-to-r from-[#ccfbf1] w-[15vh]",children:r==null?void 0:r.month_name}),t.jsxs("h1",{children:[t.jsx("input",{...l.getFieldProps(`datas.${c}.inputValue`),value:r==null?void 0:r.datas,checked:l.values.datas[c].inputValue===1,onChange:()=>l.setFieldValue(`datas.${c}.inputValue`,r!=null&&r.inputValue?0:1),type:"checkbox",className:"h-6 w-6 m-1  bg-gradient-to-r from-indigo-300"})," "]})]})})),t.jsxs("div",{className:"flex items-center justify-center mt-6 w-full",children:[t.jsx("button",{onClick:i,className:"px-5 py-2 border border-[#059669] text-white rounded-[10px] bg-[#059669] mx-4",children:"Check All"}),t.jsx("button",{onClick:n,className:"px-5 py-2 border border-gray-400 text-[#059669] rounded-[10px] bg-white mx-4",children:"Clear All"})]})]})}):null})}function re(){const{api_fetcHeadTypeActiveList:a,api_fetcActiveHeadList:l,api_getactiveClassData:d,api_finance_year:i,api_classfeeadd:n}=M(),r=B(),[c,h]=u.useState(),[x,A]=u.useState([]),[S,v]=u.useState(),[T,C]=u.useState(),[_,k]=u.useState(),[O,p]=u.useState(!1),L=U({fyId:y().required("Required"),classId:y().required("Required"),feeHeadType:y().required("Required"),feeHeadName:y().required("Required"),feeAmount:y().required("Required")}),g=R({initialValues:{fyId:"",classId:"",feeHeadType:"",feeHeadName:"",feeAmount:"",description:"",datas:[]},onSubmit:async e=>{console.log("at submit",e);let o=e==null?void 0:e.datas.map(s=>({monthId:s==null?void 0:s.id,isMothChecked:s==null?void 0:s.inputValue,monthName:s==null?void 0:s.month_name,fyId:e==null?void 0:e.fyId,classId:e==null?void 0:e.classId,feeHeadTypeId:e==null?void 0:e.feeHeadType,feeHeadId:e==null?void 0:e.feeHeadName,feeAmount:(s==null?void 0:s.inputValue)===1?e.feeAmount:0,description:e==null?void 0:e.description}));console.log("hello",o),q(o)},validationSchema:L}),q=async e=>{try{(await j.post(`${n}`,{datas:e},b())).status==200&&r("/csms/fee/table-view")}catch(o){console.log(o)}},E=()=>{j.post(a,{},b()).then(function(e){var o,s,m;(o=e==null?void 0:e.data)!=null&&o.status?h((s=e==null?void 0:e.data)==null?void 0:s.data):console.log(!0,`${(m=e==null?void 0:e.data)==null?void 0:m.message}`),p(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},W=()=>{j.post(a,{},b()).then(function(e){var o,s,m;(o=e==null?void 0:e.data)!=null&&o.status?v((s=e==null?void 0:e.data)==null?void 0:s.data):console.log(!0,`${(m=e==null?void 0:e.data)==null?void 0:m.message}`),p(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},P=()=>{j.post(d,{},b()).then(function(e){var o,s,m;(o=e==null?void 0:e.data)!=null&&o.status?(console.log((s=e==null?void 0:e.data)==null?void 0:s.data),k((m=e==null?void 0:e.data)==null?void 0:m.data)):console.log(!0,"Error occured while fetching data."),p(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data.")})},$=()=>{p(!0),j.post(i,{},b()).then(function(e){e!=null&&e.data?(console.log(e==null?void 0:e.data),C(e==null?void 0:e.data)):console.log(!0,"Error occured while fetching data."),p(!1)}).catch(function(e){console.log("==2 error list...",e),console.log(!0,"Error occured while fetching data."),p(!1)})},z=async()=>{try{const e=await j.post(`${api_fetchmonth}`,{},b());e.data.status==200&&(console.log(e.data),A(e.data.data))}catch(e){console.log(e)}};return console.log(x),u.useEffect(()=>{E(),W(),P(),$(),z()},[]),console.log(c,x),t.jsx(t.Fragment,{children:t.jsx("div",{className:"p-5 w-full h-full",children:t.jsxs("div",{className:"flex border border-gray-300 py-5  w-full  h-full relative mt-5",children:[t.jsx("h1",{className:" absolute mt-[-4vh] flex items-center justify-center ml-6 font-bold text-[2.5vh] px-1 bg-white ",children:"Add Fee"}),t.jsx(D,{value:g,children:t.jsxs(Y,{autoComplete:"off",onSubmit:g.handleSubmit,children:[t.jsx(G,{formik:g,feeHeadTypeList:c,financialList:T,classList:_}),t.jsx(J,{formik:g,feeHeadNameList:S}),t.jsx(K,{formik:g,months:x}),t.jsxs("div",{className:"flex items-center justify-center mt-1 w-full",children:[t.jsx("button",{type:"submit",className:"px-5 py-2 border border-indigo-500 text-indigo-500 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-indigo-500",children:"Save"}),t.jsx("button",{type:"cancel",onClick:()=>g.resetForm(),className:"px-5 py-2 border border-red-400 text-red-400 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-red-400",children:"Cancel"})]})]})})]})})})}export{re as default};
