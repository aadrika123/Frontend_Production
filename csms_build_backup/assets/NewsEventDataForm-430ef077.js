import{r as m,u as U,a as J,j as t}from"./index-0cd5b1c8.js";import{u as H}from"./formik.esm-59936898.js";import{c as Y,a as G}from"./index.esm-2daf9377.js";import{b,e as K}from"./PowerupFunctions-8adc749f.js";import{A as v,a as f,B as u,b as Q}from"./AxiosInterceptors-d192cef8.js";import{B as W}from"./BarLoader-475527d2.js";import{B as X}from"./BottomErrorCard-5e21225b.js";import{T as Z}from"./Tabs-58ad7c2a.js";import"./hoist-non-react-statics.cjs-ef0c9066.js";function de(){var g,h,N,y,j,w,D,F,V,E;const[k,p]=m.useState(!1),[_,z]=m.useState(null),[S,a]=m.useState(!1),[ee,I]=m.useState([]),{api_getEventData:B,api_postEventData:O,api_editEventData:C,api_getEventDataByID:L}=Q(),x=U(),{id:r}=J(),P=Y({eventName:G().required("News name is required feild")}),s=H({initialValues:{eventName:"",date:"",time:"",description:"",eventVenue:"",organizer:"",eventDocs:""},enableReinitialize:!0,onSubmit:async(e,l)=>{console.log("at submit ",e);const o=new FormData;o.append("eventName",e.eventName),o.append("date",e.date),o.append("time",e.time),o.append("description",e.description),o.append("eventVenue",e.eventVenue),o.append("organizer",e.organizer),o.append("eventDocs",e.eventDocs);for(const n of o.values())console.log(n);A(o)},validationSchema:P}),A=e=>{a(!0);let l,o;r!==void 0?(l=C,o=e,o.id=e.append("id",r)):(l=O,o=e),console.log(o),v.post(l,o,f()).then(function(n){var c,d,$;console.log("news event master..",(c=n==null?void 0:n.data)==null?void 0:c.data),((d=n==null?void 0:n.data)==null?void 0:d.status)===!0?x("/news-event"):i(!0,`${($=n==null?void 0:n.data)==null?void 0:$.message}`),a(!1)}).catch(function(n){console.log("==2 error list...",n),i(!0,"Error occured in submitting form."),a(!1)})},T=()=>{a(!0);let e={id:r};v.post(L,e,f()).then(function(l){var o,n,c,d;console.log("fetch edit data response..",(o=l==null?void 0:l.data)==null?void 0:o.data),(n=l==null?void 0:l.data)!=null&&n.status?q((c=l==null?void 0:l.data)==null?void 0:c.data):i(!0,`${(d=l==null?void 0:l.data)==null?void 0:d.message}`),a(!1)}).catch(function(l){console.log("= edit data error...",l),p(!0),a(!1)})},q=e=>{console.log("existing property details in prop address...",e,`${u}/${e==null?void 0:e.upload_event_docs}`),console.log(new File([`${u}/${e==null?void 0:e.upload_event_docs}`],`${u}/${e==null?void 0:e.upload_event_docs}`,{type:"application/pdf"})),s.setFieldValue("id",e==null?void 0:e.id),s.setFieldValue("eventName",e==null?void 0:e.event_name),s.setFieldValue("date",e==null?void 0:e.event_date),s.setFieldValue("time",e==null?void 0:e.event_time),s.setFieldValue("description",e==null?void 0:e.description),s.setFieldValue("eventVenue",e==null?void 0:e.event_venue),s.setFieldValue("organizer",e==null?void 0:e.organizer),s.setFieldValue("eventDocs",new File([`${u}/${e==null?void 0:e.upload_event_docs}`],`${u}/${e==null?void 0:e.upload_event_docs}`,{type:"application/pdf"}))};console.log(s.values.eventDocs);const M=()=>{v.post(B,{},f()).then(function(e){var l,o,n;(l=e==null?void 0:e.data)!=null&&l.status?I((o=e==null?void 0:e.data)==null?void 0:o.data):i(!0,`${(n=e==null?void 0:e.data)==null?void 0:n.message}`),a(!1)}).catch(function(e){console.log("==2 error list...",e),i(!0,"Error occured while fetching data.")})};m.useEffect(()=>{M(),r!==void 0&&T()},[]);const R=e=>{let l=e.target.name,o=e.target.value;l=="eventName"&&s.setFieldValue("eventName",b(o,s.values.eventName,40)),l=="description"&&s.setFieldValue("description",b(o,s.values.description,100)),l=="eventVenue"&&s.setFieldValue("eventVenue",K(o,s.values.eventVenue,30)),l=="organizer"&&s.setFieldValue("organizer",b(o,s.values.organizer,30))},i=(e,l)=>{z(l),p(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[S&&t.jsx(W,{}),k&&t.jsx(X,{activateBottomErrorCard:i,errorTitle:_}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"News/Event Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),r===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsx("button",{onClick:()=>x("/news-event-form"),type:"submit",className:" add-button-master",children:"Add"})})}):null]}),r===void 0?t.jsx(Z,{listRoute:"/news-event",formRoute:"/news-event-form"}):"",t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of News/Event"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:s.handleSubmit,onChange:R,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["News/Event name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("eventName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter news/event name"}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.eventName&&s.errors.eventName?s.errors.eventName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Date",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("date"),type:"date",max:new Date().toISOString().split("T")[0],className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.date&&s.errors.date?s.errors.date:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Time",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("time"),type:"time",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.time&&s.errors.time?s.errors.time:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Description",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("description"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter description "}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.description&&s.errors.description?s.errors.description:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Event Venue",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("eventVenue"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter event venue."}),t.jsx("span",{className:"text-red-600  text-xs",children:s.touched.eventVenue&&s.errors.eventVenue?s.errors.eventVenue:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Organizer",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("organizer"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter name of organizer."}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.organizer&&s.errors.organizer?s.errors.organizer:null})]})]}),t.jsx("div",{className:"col-span-4 grid grid-cols-12",children:t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold ",children:["Document",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("div",{className:"block justify-start",children:[t.jsx("label",{htmlFor:"eventDocs",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),t.jsx("input",{className:"sr-only ",name:"eventDocs",id:"eventDocs",type:"file",accept:".pdf",onChange:e=>{s.setFieldValue("eventDocs",e.target.files[0])}}),s.values.eventDocs&&r!==void 0?`${(g=s.values.eventDocs)==null?void 0:g.name}`.slice(`${(h=s.values.eventDocs)==null?void 0:h.name}`.lastIndexOf("-")+1||`${(N=s.values.eventDocs)==null?void 0:N.name}`.lastIndexOf("/")+1||`${(y=s.values.eventDocs)==null?void 0:y.name}`.lastIndexOf("\\")+1||`${(j=s.values.eventDocs)==null?void 0:j.name}`.lastIndexOf(".")+1||`${(w=s.values.eventDocs)==null?void 0:w.name}`.lastIndexOf(" ")+1||`${(D=s.values.eventDocs)==null?void 0:D.name}`.lastIndexOf(",")+1||`${(F=s.values.eventDocs)==null?void 0:F.name}`.lastIndexOf("?")+1,`${(V=s.values.eventDocs)==null?void 0:V.name}`.length):s.values.eventDocs&&r===void 0?(E=s.values.eventDocs)==null?void 0:E.name:"No file selected"]})]})}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"",children:t.jsx("button",{onClick:()=>x("/news-event"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:r!==void 0?"Update":"Save"})})]})]})})})]})})})}export{de as default};
