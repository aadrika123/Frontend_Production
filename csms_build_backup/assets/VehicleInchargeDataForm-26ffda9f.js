import{r as d,u as oe,a as se,C as ie,l as ce,E as de,m as ne,n as me,j as t}from"./index-0cd5b1c8.js";import{u as ue}from"./formik.esm-59936898.js";import{c as he,a as m}from"./index.esm-2daf9377.js";import{b as xe}from"./PowerupFunctions-8adc749f.js";import{A as x,a as b,b as be,B as q}from"./AxiosInterceptors-d192cef8.js";import{B as fe}from"./BarLoader-475527d2.js";import{B as ge}from"./BottomErrorCard-5e21225b.js";import{T as pe}from"./Tabs-58ad7c2a.js";import"./hoist-non-react-statics.cjs-ef0c9066.js";function ke(){var w,E,D,F,S,k,_,V,$,A;d.useState();const[C,v]=d.useState(!1),[P,L]=d.useState(null),[B,s]=d.useState(!1),[f,O]=d.useState([]),[g,R]=d.useState([]),[p,T]=d.useState([]),[ye,M]=d.useState([]),{api_getVehicle_inchargeData:G,api_editVehicle_inchargeData:H,api_postVehicle_inchargeData:U,api_getVehicle_inchargeDataById:X,api_getStateData:J,api_getCountryData:Y,api_getDistrictData:z}=be(),y=oe(),{id:n}=se(),K=he({countryId:m().required("Select Country."),stateId:m().required("Select State."),cityId:m().required("Select city."),inchargeName:m().matches(ie,"Please Enter value between A-Z to a-z").required("Vehical incharge name is required feild"),mobile:m().matches(ce,"Please Enter valid mobile no").required("mobile no is required feild"),email:m().matches(de,"Please Enter Valid Email").required("Email is required feild"),address:m().matches(ne,"Please Enter Valid Address").required("Address is required feild"),aadharNo:m().matches(me,"Please Enter Valid Aadhar no").required("Aadhar is required feild")}),a=ue({initialValues:{countryId:"",stateId:"",cityId:"",inchargeName:"",mobile:"",email:"",address:"",aadharNo:"",aadharDoc:""},onSubmit:async(e,l)=>{console.log("at submit ",e);const r=new FormData;r.append("aadharDoc",e.aadharDoc),r.append("inchargeName",e.inchargeName),r.append("mobile",e.mobile),r.append("email",e.email),r.append("address",e.address),r.append("aadharNo",e.aadharNo),r.append("countryId",e.countryId),r.append("stateId",e.stateId),r.append("cityId",e.cityId);for(const o of r.values())console.log(o);Z(r)},validationSchema:K}),Z=e=>{s(!0);let l,r;n!==void 0?(l=H,r=e,r.id=e.append("id",n)):(l=U,r=e),console.log(r),x.post(l,r,b()).then(function(o){var c,u,h;console.log("vehicle incharge master..",(c=o==null?void 0:o.data)==null?void 0:c.data),((u=o==null?void 0:o.data)==null?void 0:u.status)===!0?y("/vehicleincharge"):i(!0,`${(h=o==null?void 0:o.data)==null?void 0:h.message}`),s(!1)}).catch(function(o){console.log("==2 error list...",o),i(!0,"Error occured in submitting form."),s(!1)})},Q=()=>{s(!0);let e={id:n};x.post(X,e,b()).then(function(l){var r,o,c,u;console.log("fetch edit data response..",(r=l==null?void 0:l.data)==null?void 0:r.data),(o=l==null?void 0:l.data)!=null&&o.status?W((c=l==null?void 0:l.data)==null?void 0:c.data):i(!0,`${(u=l==null?void 0:l.data)==null?void 0:u.message}`),s(!1)}).catch(function(l){console.log("= edit data error...",l),v(!0),s(!1)})},W=e=>{console.log("existing property details in prop address...",e),a.setFieldValue("id",e==null?void 0:e.id),a.setFieldValue("countryId",e==null?void 0:e.country_id),a.setFieldValue("stateId",e==null?void 0:e.state_id),a.setFieldValue("cityId",e==null?void 0:e.city_id),a.setFieldValue("inchargeName",e==null?void 0:e.incharge_name),a.setFieldValue("mobile",e==null?void 0:e.mobile),a.setFieldValue("email",e==null?void 0:e.email),a.setFieldValue("address",e==null?void 0:e.address),a.setFieldValue("aadharNo",e==null?void 0:e.aadhar_no),a.setFieldValue("aadharDoc",new File([`${q}/${e==null?void 0:e.aadhar_doc}`],`${q}/${e==null?void 0:e.aadhar_doc}`,{type:"application/pdf"}))},ee=()=>{x.post(G,{},b()).then(function(e){var l,r,o;(l=e==null?void 0:e.data)!=null&&l.status?M((r=e==null?void 0:e.data)==null?void 0:r.data):i(!0,`${(o=e==null?void 0:e.data)==null?void 0:o.message}`),s(!1)}).catch(function(e){console.log("==2 error list...",e),i(!0,"Error occured while fetching data.")})};d.useEffect(()=>{ee(),te(),j(),I(),n!==void 0&&Q()},[]);const te=()=>{x.post(Y,{},b()).then(function(e){var l,r,o;(l=e==null?void 0:e.data)!=null&&l.status?O((r=e==null?void 0:e.data)==null?void 0:r.data):i(!0,`${(o=e==null?void 0:e.data)==null?void 0:o.message}`),s(!1)}).catch(function(e){console.log("==2 error list...",e),i(!0,"Error occured while fetching data.")})},j=e=>{s(!0),x.post(J,{},b()).then(function(l){var r,o,c;if((r=l==null?void 0:l.data)!=null&&r.status){const h=((o=l==null?void 0:l.data)==null?void 0:o.data).filter(N=>N.country_id===parseInt(e));R(h)}else i(!0,`${(c=l==null?void 0:l.data)==null?void 0:c.message}`);s(!1)}).catch(function(l){console.log("==2 error list...",l),i(!0,"Error occured while fetching data.")})},I=e=>{s(!0),x.post(z,{},b()).then(function(l){var r,o,c;if(((r=l==null?void 0:l.data)==null?void 0:r.status)===!0){const h=((o=l==null?void 0:l.data)==null?void 0:o.data).filter(N=>N.state_id===parseInt(e));T(h)}else i(!0,`${(c=l==null?void 0:l.data)==null?void 0:c.message}`);s(!1)}).catch(function(l){console.log("==2 error list...",l),i(!0,"Error occured while fetching data.")})};d.useEffect(()=>{j(a.values.countryId)},[a.values.countryId]),d.useEffect(()=>{I(a.values.stateId)},[a.values.stateId]);const ae=e=>{let l=e.target.name,r=e.target.value;if(l=="inchargeName"&&a.setFieldValue("inchargeName",xe(r,a.values.inchargeName,50)),l=="mobile"){let o=e.target.value;re(o)}if(l=="aadharNo"){let o=e.target.value;le(o)}},i=(e,l)=>{L(l),v(e)},le=e=>{e>12&&a.setFieldValue("aadharNo",e.slice(0,12))},re=e=>{e.length>10&&a.setFieldValue("mobile",e.slice(0,10))};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[B&&t.jsx(fe,{}),C&&t.jsx(ge,{activateBottomErrorCard:i,errorTitle:P}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Vehicle Incharge Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>y("/vehicleincharge-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})})]}),n!==void 0?"":t.jsx(pe,{listRoute:"/vehicleincharge",formRoute:"/vehicleincharge-form"}),t.jsx("div",{className:"mt-6 border-b",children:t.jsx("span",{className:"text-lg font-noarml text-gray-500",children:"Details of Vehicle Incharge"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:a.handleSubmit,onChange:ae,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Incharge Name",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("inchargeName"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter incharge name"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.inchargeName&&a.errors.inchargeName?a.errors.inchargeName:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Email",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("email"),type:"email",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter  email"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.email&&a.errors.email?a.errors.email:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Mobile No.",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("mobile"),type:"number",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter mobile no"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.mobile&&a.errors.mobile?a.errors.mobile:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Address",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("address"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter address"}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.address&&a.errors.address?a.errors.address:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Aadhar No.",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...a.getFieldProps("aadharNo"),type:"number",onKeyDown:e=>["e","E","+","-"].includes(e.key)&&e.preventDefault(),className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter aadhar no."}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.aadharNo&&a.errors.aadharNo?a.errors.aadharNo:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Country",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("countryId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select country",children:[t.jsx("option",{value:"",children:"Select"}),f==null?void 0:f.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.country_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.countryId&&a.errors.countryId?a.errors.countryId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["State",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("stateId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select state",children:[t.jsx("option",{value:"",children:"Select"}),g==null?void 0:g.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.state_name}))]}),t.jsx("span",{className:"text-red-600  text-xs",children:a.touched.stateId&&a.errors.stateId?a.errors.stateId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["City",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...a.getFieldProps("cityId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select city",children:[t.jsx("option",{value:"",children:"Select"}),p==null?void 0:p.map((e,l)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.city_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:a.touched.cityId&&a.errors.cityId?a.errors.cityId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Upload Aadhar",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("div",{className:"block justify-start",children:[t.jsx("label",{htmlFor:"aadharDoc",className:"form-control h-10 block w-full border border-gray-200 px-3 2xl:py-1.5 py-2 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:"Choose File"}),t.jsx("input",{className:"sr-only form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding  rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",name:"aadharDoc",id:"aadharDoc",type:"file",accept:".pdf",onChange:e=>{a.setFieldValue("aadharDoc",e.target.files[0])}}),a.values.aadharDoc&&n!==void 0?`${(w=a.values.aadharDoc)==null?void 0:w.name}`.slice(`${(E=a.values.aadharDoc)==null?void 0:E.name}`.lastIndexOf("-")+1||`${(D=a.values.aadharDoc)==null?void 0:D.name}`.lastIndexOf("/")+1||`${(F=a.values.aadharDoc)==null?void 0:F.name}`.lastIndexOf("\\")+1||`${(S=a.values.aadharDoc)==null?void 0:S.name}`.lastIndexOf(".")+1||`${(k=a.values.aadharDoc)==null?void 0:k.name}`.lastIndexOf(" ")+1||`${(_=a.values.aadharDoc)==null?void 0:_.name}`.lastIndexOf(",")+1||`${(V=a.values.aadharDoc)==null?void 0:V.name}`.lastIndexOf("?")+1,`${($=a.values.aadharDoc)==null?void 0:$.name}`.length):a.values.aadharDoc&&n===void 0?(A=a.values.aadharDoc)==null?void 0:A.name:"No file selected"]})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"",children:t.jsx("button",{onClick:()=>y("/vehicleincharge"),type:"button",className:" px-6 py-2.5 bg-gray-200 hover:bg-gray-400 text-gray-700 font-medium text-xs leading-tight uppercase rounded shadow-md hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:"cypress_next2_button submit-button",children:n!==void 0?"Update":"Save"})})]})]})})})]})})})}export{ke as default};
