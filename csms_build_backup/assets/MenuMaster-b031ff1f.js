import{r as c,A as v,a as b,Q as m,j as t,g as Be,h as Te,S as Pe,b as Le}from"./index-f916f929.js";import{B as Ie}from"./BarLoader-858f75dd.js";import{n as C,c as Ve,a as qe}from"./PowerupFunctions-6790304d.js";import{u as He}from"./useSetTitle-649e2a77.js";import{D as Oe,L as $e}from"./DeleteView-67799ae7.js";import{B as Re}from"./BottomErrorCard-20c0353c.js";import{u as ze,a as Ue,b as We}from"./formik.esm-2de3563d.js";import{C as Ye}from"./index-3c33807a.js";import{a as Je}from"./index.esm-3ff8c7a6.js";import{c as Ke,a as w}from"./index.esm-b3999377.js";import{E as Qe}from"./jspdf.plugin.autotable-12d9d4cc.js";import{I as Ge}from"./iconify-c1503a8d.js";import{T as M}from"./TextField-22b2c8ae.js";import{I as Xe}from"./InputAdornment-be163edb.js";import"./index-39e9bbf5.js";import"./hoist-non-react-statics.cjs-fb57390d.js";import"./Link-dfdf966c.js";import"./typeof-7fd5df1e.js";import"./Select-d451ae47.js";const vt=()=>{const[g,D]=c.useState([]),[ee,te]=c.useState(null),[F,Ze]=c.useState(!0),[k,ae]=c.useState(!1),[le,se]=c.useState([]),[ie,o]=c.useState(!1),[A,E]=c.useState(!1),[re,ce]=c.useState(null),[x,B]=c.useState(null),[oe,y]=c.useState(!1),[T,de]=c.useState(),[d,P]=c.useState(1),[N,ne]=c.useState(10),[S,L]=c.useState(),[I,V]=c.useState(),[_,me]=c.useState(),[q,ue]=c.useState([]),{api_geticonData:he,menu_crud_store:xe,menu_crud_get_by_id:fe,menu_crud_get:ge,menu_crud_search:Ne,menu_crud_delete:je,menu_crud_edit:ve}=Le();He("Exam Term Master");const be=()=>{v.post(he,{},b()).then(function(e){e!=null&&e.data?ue(e==null?void 0:e.data):p(!0,"error"),o(!1)}).catch(function(e){console.log("==2 error list...",e),p(!0,"Error occured while fetching data.")})};c.useEffect(()=>{be()},[]);const f=[{id:1,fee_head:10,fee_head_type:10,desc:"hello"},{id:2,fee_head:10,fee_head_type:10,desc:"hello"},{id:3,fee_head:10,fee_head_type:10,desc:"hello"},{id:4,fee_head:10,fee_head_type:10,desc:"hello"},{id:5,fee_head:10,fee_head_type:10,desc:"hello"}];Ke({menuName:w().required("Required"),isSubMenu:w().required("Required"),orderNo:w().required("Required"),iconName:w().required("Required")});const i=ze({initialValues:{menuName:"",isSubMenu:0,orderNo:"",iconName:""},onSubmit:async(e,s)=>{console.log("at submit ",e);const l={...e,isSubMenu:e.isSubMenu?1:0};De(l),i.resetForm()}}),u=e=>{console.log(e);let s,l;e===void 0?(l={perPage:N,page:d},s=ge):(l={search:e,perPage:N,page:d},s=Ne),o(!0),v.post(s,l,b()).then(function(a){var r,n,h,j,H,O,$,R,z,U,W,Y,J,K,Q,G,X,Z;((r=a==null?void 0:a.data)==null?void 0:r.status)===!0?((h=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:h.total)===0?(m.error("Data not Found"),D((H=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:H.data),L(($=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:$.last_page),V((z=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:z.total)):(console.log("exam term data",(W=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:W.data),D((J=(Y=a==null?void 0:a.data)==null?void 0:Y.data)==null?void 0:J.data),L((Q=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:Q.last_page),V((X=(G=a==null?void 0:a.data)==null?void 0:G.data)==null?void 0:X.total)):m.error(`${(Z=a==null?void 0:a.data)==null?void 0:Z.message}`),o(!1)}).catch(function(a){m.warning("Error occured while fetching data."),o(!1)})};console.log(I);const we=g;console.log(g);const ye=e=>{ne(parseInt(e))},Se=e=>{P(e-1)},_e=e=>{P(e+1)};c.useEffect(()=>{u()},[d]),c.useEffect(()=>{u()},[N]);const pe=[{Header:"Sl No.",Cell:({cell:e})=>t.jsxs("span",{children:[" ",(d-1)*N+e.row.index+1," "]})},{Header:"Menu Name",accessor:"menu_name"},{Header:"Order no",accessor:"order_no"},{Header:"Created Date & Time",Cell:({cell:e})=>{var s,l;return t.jsxs("span",{children:[C((s=e.row.original)==null?void 0:s.date)," |"," ",C((l=e.row.original)==null?void 0:l.time)]})}},{Header:"Status",Cell:({cell:e})=>{var s,l;return t.jsx("span",{className:((s=e.row.original)==null?void 0:s.status)==="Active"?"text-[green]":"text-[red]",children:C((l=e.row.original)==null?void 0:l.status)})}},{Header:"Action",Cell:({cell:e})=>{var s,l;return t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>{Pe.fire({icon:"warning",title:"Are you sure?",text:"You want to update it!",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!"}).then(a=>{var r,n;a.value&&(B((r=e.row.original)==null?void 0:r.id),Ce((n=e.row.original)==null?void 0:n.id))})},className:"edit-button-master",children:t.jsx("a",{title:"edit",children:t.jsx(Je,{size:23})})}),t.jsx("button",{onClick:()=>{var a,r;te((a=e.row.original)==null?void 0:a.id),de(((r=e.row.original)==null?void 0:r.status)==="Active"?"deactive":"active"),y(!0)},className:`${((s=e.row.original)==null?void 0:s.status)=="Active"?"deactivate-button-master":"deactivate-second-button-master"}`,children:((l=e.row.original)==null?void 0:l.status)==="Active"?"Deactivate":"Activate"})]})}}];console.log(d);const Ce=e=>{o(!0);let s={id:e};v.post(fe,s,b()).then(function(l){var a,r,n,h;console.log("fetch edit data response..",(a=l==null?void 0:l.data)==null?void 0:a.data),(r=l==null?void 0:l.data)!=null&&r.status?Me((n=l==null?void 0:l.data)==null?void 0:n.data):m.error(`${(h=l==null?void 0:l.data)==null?void 0:h.message}`),o(!1)}).catch(function(l){console.log("= edit data error...",l),E(!0),o(!1)})},Me=e=>{console.log("existing property details in prop address...",e),i.setFieldValue("menuName",e==null?void 0:e.menu_name),i.setFieldValue("iconName",e==null?void 0:e.icon_name),i.setFieldValue("isSubMenu",e==null?void 0:e.is_sub_menu),i.setFieldValue("orderNo",e==null?void 0:e.order_no)};console.log(x);const De=e=>{console.log(e),o(!0);let s,l=e,a=e;x!==null?(s=ve,l=a,l.id=x):(e==null?void 0:e.menuName)!==""&&(e==null?void 0:e.orderNo)!==""&&x==null&&(s=xe,l=a),v.post(s,e,b()).then(function(r){var n,h,j;console.log("bank master..",(n=r==null?void 0:r.data)==null?void 0:n.data),((h=r==null?void 0:r.data)==null?void 0:h.status)===!0?(m.success(x!==null?"Data Updated Successfully!":"Data Added Successfully"),u(),B(null)):m.error(`${(j=r==null?void 0:r.data)==null?void 0:j.message}`),o(!1)}).catch(function(r){console.log("==2 error list...",r),m.warning("Error occured in submitting form."),o(!1)})},Fe=()=>{o(!0),y(!1);let e={id:ee,status:T};v.post(je,e,b()).then(function(s){var l,a;((l=s==null?void 0:s.data)==null?void 0:l.status)===!0?(u(),(e==null?void 0:e.status)=="active"?m.success("Activated Successfully"):m.error("Deactivated Successfully")):m.error(`${(a=s==null?void 0:s.data)==null?void 0:a.message}`),o(!1)}).catch(function(s){m.warning("Error occured in deletion."),o(!1)})};c.useEffect(()=>{u()},[]);const ke=e=>{let s=e.target.name,l=e.target.value;s=="menuName"&&i.setFieldValue("menuName",Ve(l,i.values.menuName,50)),s=="orderNo"&&i.setFieldValue("orderNo",qe(l,i.values.orderNo,3))},p=(e,s)=>{ce(s),E(e)},Ae=[{title:"Menu Name",feild:"menu_name"},{title:"Order no",feild:"order_no"},{title:"Created Date  ",feild:"date"},{title:"Created Time ",feild:"time"},{title:"Status",feild:"status"}],Ee=()=>{const e=new Qe;e.text("Menu Master Details",10,10),e.autoTable({theme:"grid",columns:Ae.map(s=>({...s,dataKey:s.feild})),body:g}),e.save("MenuMasters.pdf")};return c.useEffect(()=>{const e=g.map(s=>{const{id:l,...a}=s;return a});console.log(e),se(e)},[g]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full h-[76vh] lg:h-auto overflow-auto ",children:[t.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[t.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Menu Master"}),t.jsx("h1",{className:"text-gray-600 text-sm",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),t.jsx("div",{className:" mt-1 ml-3 mr-3 ",children:t.jsx("div",{className:"flex h-auto  items-start justify-start w-full",children:t.jsxs("div",{className:"grid grid-cols-12 w-full  ml-3 mr-3 ",children:[t.jsx("div",{className:"col-span-12  lg:col-span-4 w-full flex justify-center",children:t.jsxs("div",{className:"mt-8 border w-full  rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"Add"})]}),t.jsxs("div",{className:"w-full mb-6 h-[70vh] mt-14 pb-10 overflow-scroll ",children:[t.jsx(Ue,{value:i,children:t.jsxs(We,{autoComplete:"off",onChange:ke,onSubmit:i.handleSubmit,children:[t.jsxs("div",{className:"px-10 gap-4",children:[t.jsx("div",{className:"mt-4",children:t.jsx("div",{children:t.jsx(M,{...i.getFieldProps("orderNo"),label:"Order No",name:"orderNo",fullWidth:!0,size:"small",error:i.touched.orderNo&&!!i.errors.orderNo,helperText:i.touched.orderNo&&i.errors.orderNo})})}),t.jsx("div",{className:"mt-4",children:t.jsx(M,{...i.getFieldProps("menuName"),label:"Menu Name",name:"menuName",fullWidth:!0,size:"small",error:i.touched.menuName&&!!i.errors.menuName,helperText:i.touched.menuName&&i.errors.menuName})}),t.jsxs("div",{className:"mt-4 flex justify-start",children:[t.jsx("input",{...i.getFieldProps("isSubMenu"),className:"mr-2 leading-tight w-4 h-4 text-green-600",type:"checkbox"}),t.jsx("label",{className:"text-sm text-gray-600",children:"Is Sub Menu"})]}),t.jsx("div",{className:"mt-4",children:q&&q.map(e=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex row justify-start items-center mt-4",children:[t.jsxs("label",{className:"form-check-label text-gray-800 ml-6",children:[" ",t.jsxs("span",{className:"flex text-gray-700 text-sm font-semibold ",children:[" ",t.jsx(Ge,{icon:e==null?void 0:e.iconName,className:"w-8 h-8"})]})]}),t.jsx("input",{name:"iconName",value:e==null?void 0:e.iconName,checked:i.values.iconName===(e==null?void 0:e.iconName),onChange:s=>i.setFieldValue("iconName",s.target.value),type:"checkbox",className:"text-slat-500  ml-[10px]  text-[#6b7280] w-5 h-5 font-bold mt-2   "})]})}))})]}),t.jsx("div",{className:"mt-7",children:t.jsx("button",{type:"submit",className:"px-9 py-2.5 bg-[#6AB783] text-white font-medium text-sm leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out",children:x!==null?"Update":"Save"})})]})}),t.jsx("div",{className:"flex justify-center items lg:ml-16 mt-11 text-[1.5vh]",children:t.jsxs("h1",{className:"text-red-600",children:["Note : (*) is a mandatory field"," "]})})]})]})}),t.jsx("div",{className:" col-span-12 md:col-span-12 lg:col-span-8 w-full lg:ml-2 ",children:t.jsxs("div",{className:"mt-8 border   rounded-md relative",children:[t.jsxs("div",{className:"bg-white px-3 ",children:[" ",t.jsx("h1",{className:" absolute text-2xl bg-white flex font-semibold  -mt-4 text-gray-500 ml-9",children:"View List"})]}),t.jsx("div",{className:"mt-5  ",children:t.jsxs("div",{className:"flex flex-wrap justify-between",children:[t.jsxs("div",{className:"ml-9 text-3xl gap-x-3 flex",children:[t.jsx("div",{className:"text-red-700 cursor-pointer",children:t.jsx(Be,{onClick:Ee})}),t.jsx("div",{className:"text-green-700 cursor-pointer",children:t.jsx(Te,{onClick:()=>ae(!k)})}),k&&t.jsx(Ye,{data:le,target:"_blank"})]}),t.jsxs("div",{className:" mr-9 justify-start  max-[870px]:block max-[870px]:mt-2",children:[t.jsx("div",{className:"main-sub-inner-div"}),t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"global-filter-div",children:t.jsx(M,{id:"search",type:"search",label:"Search",size:"small",fullWidth:!0,onChange:e=>{e.target.value===""?u():me(e.target.value)},onKeyDown:e=>e.key==="Enter"&&u(_),sx:{width:"100%"},InputProps:{endAdornment:t.jsx(Xe,{position:"end",sx:{marginRight:"-14px"},children:t.jsx("button",{onClick:()=>{_===""?u():u(_)},className:"bg-[#3b82f6] w-14 max-[320px]:w-8 h-10 rounded-r-[5px] flex items-center justify-center text-white",type:"submit",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5 ",children:t.jsx("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})})})})}})})})]})]})}),t.jsx("div",{className:"-mt-5 main-div",children:t.jsxs("div",{className:" rounded-md h-[80vh] 2xl:p-6 p-4 overflow-y-auto",children:[ie&&t.jsx(Ie,{}),A&&t.jsx(Re,{activateBottomErrorCard:p,errorTitle:re}),A&&t.jsxs("div",{className:"alert-msg",role:"alert",children:[t.jsx("strong",{className:"sorry-msg",children:"Sorry! "}),t.jsx("span",{className:"some-error-msg",children:"Some error occured while fetching list. Please try again later"}),t.jsx("span",{className:"absolute-span"})]}),oe&&t.jsx(Oe,{setdeleteStatus:y,deleteItem:Fe,deactivate:T}),t.jsxs("div",{className:"h-[57vh] overflow-auto max-[1004px]:h-full",children:[F&&(f==null?void 0:f.length)!=0&&t.jsx($e,{filter:!1,exportStatus:!1,assessmentType:!1,columns:pe,dataList:we,pageNumber:I}),t.jsxs("div",{className:"mt-3 grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-2",children:[" ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:N,onChange:e=>ye(e.target.value),children:[5,10,25,50].map(e=>t.jsxs("option",{value:e,children:["show ",e]},e))})]}),t.jsxs("div",{className:"col-span-4 text-center col-start-5",children:[" ",t.jsxs("span",{children:["Page ","",t.jsxs("strong",{children:[d," of ",S]}),""]})]}),t.jsxs("div",{className:"col-span-4 text-right",children:[t.jsx("button",{className:(d===1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>Se(d),disabled:d===1,children:"⬅️"}),t.jsx("button",{className:(d===S?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>_e(d),disabled:d===S,children:"➡️"})]})]})]}),F&&(f==null?void 0:f.length)==0&&t.jsx("div",{className:"data-not-found",children:"Data Not Found"})]})})]})})]})})})]})})};export{vt as default};
