import{r as u,f as y,z,b as C,d as F,a3 as t,j as H,h as T,P as V}from"./index-202af0b7.js";function n(){const[w,i]=u.useState(!1),d=y(),{api_getFreeMenuList:B}=V(),{setmenuList:U}=u.useContext(z);u.useEffect(()=>{let l=window.localStorage.getItem("token");if(i(!0),l==null){d("/");return}q()},[]);const q=()=>{let l={moduleId:5};console.log("api header to login..."),C.post(B,l,F()).then(function(a){var c,g,m,e,f,o,L,r,h,x,D,b,I,N,S,j,v,A,E,M,P,k;console.log("fetched menu list.....",a),a.data.status==!0?(t("menuList",(g=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:g.permission),t("userName",(f=(e=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:e.userDetails)==null?void 0:f.userName),t("roles",(r=(L=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:L.userDetails)==null?void 0:r.roles),t("userUlbName",(D=(x=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:x.userDetails)==null?void 0:D.ulb),t("userMobile",(N=(I=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:I.userDetails)==null?void 0:N.mobileNo),t("userEmail",(v=(j=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:j.userDetails)==null?void 0:v.email),t("userImage",(M=(E=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:E.userDetails)==null?void 0:M.imageUrl),U((k=(P=a==null?void 0:a.data)==null?void 0:P.data)==null?void 0:k.permission),d("/advertisementLanding")):console.log("false..."),i(!0)}).catch(function(a){console.log("--2--login error...",a),i(!0)})};if(w)return H(T,{})}export{n as default};
