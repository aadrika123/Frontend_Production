import{j as e,h as i,G as E,a as Y,L as D,b as h,A as G}from"./index-7f456209.js";import{P as O}from"./Page-602aa055.js";import{B as U}from"./Breadcrumb-8cadac2e.js";import{F as b,I as y,S as N,a as F}from"./Select-dfdd65b3.js";import{M as m}from"./MenuItem-40c8af69.js";import{T as I}from"./TextField-9f130bdc.js";import{C as Z}from"./index-93abbe38.js";import{c as J,a as g,u as K,F as Q,b as V}from"./index.esm-be8b4273.js";function X(n){const{formik:t,feeHeadTypeList:l,financialList:o,classList:c}=n;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12 gap-4",children:[e.jsx("div",{className:"mt-4  col-span-8 lg:col-span-4",children:e.jsxs(b,{fullWidth:!0,error:t.touched.fyId&&!!t.errors.fyId,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Financial Year"}),e.jsxs(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Financial Year",...t.getFieldProps("fyId"),fullWidth:!0,size:"small",children:[e.jsx(m,{value:"",children:"Select"}),o&&(o==null?void 0:o.map(r=>e.jsx(m,{value:r==null?void 0:r.id,children:r==null?void 0:r.financial_year})))]}),e.jsx(F,{children:t.touched.fyId&&t.errors.fyId})]})}),e.jsx("div",{className:"mt-4 col-span-8 lg:col-span-4",children:e.jsxs(b,{fullWidth:!0,error:t.touched.classId&&!!t.errors.classId,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Class"}),e.jsxs(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Class",...t.getFieldProps("classId"),fullWidth:!0,size:"small",children:[e.jsx(m,{value:"",children:"Select"}),c&&(c==null?void 0:c.map(r=>e.jsx(m,{value:r==null?void 0:r.id,children:r==null?void 0:r.class_name})))]}),e.jsx(F,{children:t.touched.classId&&t.errors.classId})]})}),e.jsx("div",{div:!0,className:"mt-4 col-span-4 lg:col-span-4",children:e.jsxs(b,{fullWidth:!0,error:t.touched.feeHeadType&&!!t.errors.feeHeadType,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{m:-1},children:"Select Fee Head Type"}),e.jsxs(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Type",...t.getFieldProps("feeHeadType"),fullWidth:!0,size:"small",children:[e.jsx(m,{value:"",children:"Select"}),l&&(l==null?void 0:l.map(r=>e.jsx(m,{value:r==null?void 0:r.id,children:r==null?void 0:r.fee_head_type})))]}),e.jsx(F,{children:t.touched.feeHeadType&&t.errors.feeHeadType})]})})]})})}function ee(n){const{formik:t,feeHeadNameList:l}=n;return e.jsx("div",{className:" block w-full",children:e.jsxs("div",{className:"px-10 mt-2 grid grid-cols-12   gap-4",children:[e.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:e.jsxs(b,{fullWidth:!0,error:t.touched.feeHeadName&&!!t.errors.feeHeadName,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{mt:-1},children:"Select Fee Head Name"}),e.jsxs(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Fee Head Name",...t.getFieldProps("feeHeadName"),fullWidth:!0,size:"small",children:[e.jsx(m,{value:"",children:"Select"}),l&&(l==null?void 0:l.map(o=>e.jsx(m,{value:o==null?void 0:o.id,children:o==null?void 0:o.fee_head_name})))]}),e.jsx(F,{children:t.touched.feeHeadName&&t.errors.feeHeadName})]})}),e.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:e.jsx(I,{type:"text",...t.getFieldProps("feeAmount"),label:"Fee Amount",fullWidth:!0,size:"small",error:t.touched.feeAmount&&!!t.errors.feeAmount,helperText:t.touched.feeAmount&&t.errors.feeAmount})}),e.jsx("div",{div:!0,className:"mt-4 col-span-12 lg:col-span-4",children:e.jsx(I,{type:"text",...t.getFieldProps("description"),label:"Description",fullWidth:!0,size:"small",error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})})]})})}function se(n){const{formik:t,months:l}=n;i.useEffect(()=>{t.setFieldValue("datas",l.map(r=>(console.log(r),{...r,inputValue:0})))},[l]),console.log(t.values.datas);const o=()=>{var d,p;const r=(p=(d=t==null?void 0:t.values)==null?void 0:d.datas)==null?void 0:p.map(x=>({...x,inputValue:1}));t.setFieldValue("datas",r)},c=()=>{var d,p;const r=(p=(d=t==null?void 0:t.values)==null?void 0:d.datas)==null?void 0:p.map(x=>({...x,inputValue:0}));t.setFieldValue("datas",r)};return e.jsx(e.Fragment,{children:l.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border border-gray-300 mx-3 py-5 my-10 flex items-center justify-center flex-wrap",children:[t.values.datas.map((r,d)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-[40vh] my-4",children:[e.jsx("h1",{className:"text-[1.8vh] mx-4 px-4  bg-gradient-to-r from-[#ccfbf1] w-[15vh]",children:r==null?void 0:r.month_name}),e.jsxs("h1",{children:[e.jsx("input",{...t.getFieldProps(`datas.${d}.inputValue`),value:r==null?void 0:r.datas,checked:t.values.datas[d].inputValue===1,onChange:()=>t.setFieldValue(`datas.${d}.inputValue`,r!=null&&r.inputValue?0:1),type:"checkbox",className:"h-6 w-6 m-1  bg-gradient-to-r from-indigo-300"})," "]})]})})),e.jsxs("div",{className:"flex items-center justify-center mt-6 w-full",children:[e.jsx("button",{onClick:o,className:"px-5 py-2 border border-[#059669] text-white rounded-[10px] bg-[#059669] mx-4",children:"Check All"}),e.jsx("button",{onClick:c,className:"px-5 py-2 border border-gray-400 text-[#059669] rounded-[10px] bg-white mx-4",children:"Clear All"})]})]})}):null})}function te({setOpen:n,open:t}){return e.jsx(Z,{isOpen:t,children:e.jsx("div",{id:"defaultModal",tabIndex:-1,"aria-hidden":"true",className:" h-[calc(100%-1rem)] max-h-full ",children:e.jsx("div",{className:" w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:" bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Instruction"}),e.jsxs("button",{onClick:()=>n(!1),type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Step 1: select financial year, class, fee head type to know nature of fees."}),e.jsx("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Step 2: select fee head name and enter amount. Description box is not mandatory but you can add some description for future reference.."}),e.jsx("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Step 3: choose month by click on check box or can select multiple months by using check all button. To clear check box click on clear all button."}),e.jsx("p",{className:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"Step 4: after this all steps click on save button"})]})]})})})})}function re(n){return E({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,10 L12,18 M12,6 L12,8"}}]})(n)}function pe(){const{api_feeheadtype:n,api_feeheadname:t,api_class:l,api_financialYear:o,api_fetchmonth:c,api_classfeeadd:r}=G,d=Y(),[p,x]=i.useState(!0),[w,j]=i.useState(!1),[k,C]=i.useState(),[v,S]=i.useState([]),[H,A]=i.useState(),[T,M]=i.useState(),[L,_]=i.useState(),W=J({fyId:g().required("Required"),classId:g().required("Required"),feeHeadType:g().required("Required"),feeHeadName:g().required("Required"),feeAmount:g().required("Required")}),u=K({initialValues:{fyId:1,classId:1,feeHeadType:2,feeHeadName:"",feeAmount:"",description:"",datas:[]},onSubmit:async s=>{console.log("at submit",s);let f=s==null?void 0:s.datas.map(a=>({monthId:a==null?void 0:a.id,isMothChecked:a==null?void 0:a.inputValue,monthName:a==null?void 0:a.month_name,fyId:s==null?void 0:s.fyId,classId:s==null?void 0:s.classId,feeHeadTypeId:s==null?void 0:s.feeHeadType,feeHeadId:s==null?void 0:s.feeHeadName,feeAmount:(a==null?void 0:a.inputValue)===1?s.feeAmount:0,description:s==null?void 0:s.description}));console.log("hello",f),q(f)},validationSchema:W}),q=async s=>{try{(await h.post(`${r}`,{datas:s})).status==200&&d("/csms/fee/table-view")}catch(f){console.log(f)}},B=async()=>{try{const s=await h.post(`${n}`,{});s.status==200&&(console.log(s.data),C(s.data.data))}catch(s){console.log(s)}},P=async()=>{try{const s=await h.post(`${t}`,{});s.status==200&&(console.log(s.data),A(s.data.data))}catch(s){console.log(s)}},$=async()=>{try{const s=await h.post(`${l}`,{});s.status==200&&(console.log(s.data),_(s.data.data))}catch(s){console.log(s)}},z=async()=>{try{const s=await h.post(`${o}`,{});s.status==200&&(console.log(s.data),M(s.data.data))}catch(s){console.log(s)}},R=async()=>{try{x(!0);const s=await h.post(`${c}`,{});s.status==200&&(console.log(s.data),S(s.data.data)),x(!1)}catch(s){console.log(s),x(!1)}};return console.log(v),i.useEffect(()=>{B(),P(),$(),z(),R()},[]),console.log(k,v),e.jsxs(e.Fragment,{children:[e.jsx(te,{setOpen:j,open:w}),e.jsxs(O,{title:"Fee",pageName:"Class Fee Master",children:[e.jsx(U,{list:[{title:"Home",path:"/csms/home"},{title:"Class fee master list",path:"/csms/fee/table-view"},{title:"Class fee master",path:"/csms/fee/add"}]}),p?e.jsx(D,{}):e.jsxs("div",{className:"p-5 w-full h-full",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(re,{className:"text-indigo-500 text-[3vh] cursor-pointer",color:"red",onClick:()=>j(!0)})}),e.jsxs("div",{className:"flex border border-gray-300 py-5  w-full  h-full relative mt-5",children:[e.jsx("h1",{className:" absolute mt-[-4vh] flex items-center justify-center ml-6 font-bold text-[2.5vh] px-1 bg-white ",children:"Add Fee"}),e.jsx(Q,{value:u,children:e.jsxs(V,{autoComplete:"off",onSubmit:u.handleSubmit,children:[e.jsx(X,{formik:u,feeHeadTypeList:k,financialList:T,classList:L,open:w,setOpen:j}),e.jsx(ee,{formik:u,feeHeadNameList:H,open:w,setOpen:j}),e.jsx(se,{formik:u,months:v}),e.jsxs("div",{className:"flex items-center justify-center mt-1 w-full",children:[e.jsx("button",{type:"submit",className:"px-5 py-2 border border-indigo-500 text-indigo-500 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-indigo-500",children:"Save"}),e.jsx("button",{type:"cancel",onClick:()=>u.resetForm(),className:"px-5 py-2 border border-red-400 text-red-400 rounded-[10px] bg-white mx-4 hover:text-white hover:bg-red-400",children:"Cancel"})]})]})})]})]})]})]})}export{pe as default};
