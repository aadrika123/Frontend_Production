import{r as o,n as C,b as H,o as U,j as a,F as Y,T as w,G as E,R as L,B as M,p as V,q,s as D,t as z,v as G,E as J,d as K,A as O,z as Q,e as W,f as X,h as I}from"./index-ycav3uq8.js";import{P as Z}from"./index-D0RnYuU5.js";import{T as aa,a as ea,b as F,c as l,d as sa,e as r}from"./table-rvHCw5b0.js";import{P as la}from"./index-BZrgIScK.js";import{B as c}from"./badge-B9sB6hih.js";import"./index-BuQYzNhN.js";import"./circle-check-big-BSyZMyFI.js";import"./pagination-A1E4TOHz.js";const ra=W().shape({ulbId:X()});function da(){var i,h,p,x,u,j,g,m,b,N,f,v,P,y;const[n,R]=o.useState(1),[d,A]=o.useState(10),[$]=o.useState(""),s=C({api:`${I.getAllComplaints}?page=${n}&limit=${d}&q=${$}`,key:"searchAllComplaints",value:[n,d],options:{enabled:!0}}),k=C({api:`${I.getAllUlb}?page=1&limit=1000`,key:"geAllulb",value:[n,d],options:{enabled:!0}}),t=H({resolver:U(ra),defaultValues:{ulbId:"",moduleId:"",complaintTypeId:"",priorityId:"",targetTypeId:"",complaintSourceTypeId:""}}),B=async()=>{};return a.jsx("main",{className:"grid items-start",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx(Y,{methods:t,onSubmit:t.handleSubmit(B),className:"w-full",children:a.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background p-10 w-full",children:[a.jsxs("div",{children:[a.jsx(w,{htmlFor:"ulbId",children:"ULB"}),a.jsx(E,{className:"bg-background cursor-pointer",name:"ulbId",data:((p=(h=(i=k.data)==null?void 0:i.data)==null?void 0:h.docs)==null?void 0:p.map(e=>({value:e==null?void 0:e._id,label:e==null?void 0:e.ulbName})))??[]})]}),a.jsxs("div",{children:[a.jsx(w,{children:"Text"}),a.jsx(L,{name:"name",inputValidation:["CapitalFirstLetter","removeDoubleSpace","string"],placeholder:""})]}),a.jsx("div",{className:"mt-6",children:a.jsx(M,{isLoading:t.formState.isSubmitting,type:"submit",className:" w-auto  px-10 float-right",children:"Search"})})]})})}),a.jsxs(V,{children:[a.jsx(q,{className:"px-7",children:a.jsxs(D,{children:["Users List (",(u=(x=s.data)==null?void 0:x.data)==null?void 0:u.totalDocs,")"]})}),a.jsx(z,{children:s.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(G,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(aa,{children:[a.jsx(ea,{children:a.jsxs(F,{children:[a.jsx(l,{className:"",children:"#"}),a.jsx(l,{className:"",children:"Complaint No."}),a.jsx(l,{className:"",children:"Title"}),a.jsx(l,{className:"",children:"Description"}),a.jsx(l,{className:"",children:"ULB"}),a.jsx(l,{className:"",children:"Module"}),a.jsx(l,{className:"",children:"Created at"}),a.jsx(l,{className:"",children:"Status"}),a.jsx(l,{children:"Action"})]})}),a.jsx(sa,{children:(m=(g=(j=s==null?void 0:s.data)==null?void 0:j.data)==null?void 0:g.docs)==null?void 0:m.map((e,_)=>{var S,T;return a.jsxs(F,{children:[a.jsx(r,{children:n*d-d+_+1}),a.jsx(r,{children:e.complaintRefNo}),a.jsx(r,{children:e.complaintTitle}),a.jsx(r,{children:e.complaintDescription}),a.jsx(r,{children:(S=e.ulb)==null?void 0:S.ulbName}),a.jsx(r,{children:(T=e==null?void 0:e.module)==null?void 0:T.moduleName}),a.jsx(r,{children:J(e.createdAt).format("DD-MM-YYYY")}),a.jsxs(r,{children:[(e==null?void 0:e.wf_status)===3&&a.jsx(c,{className:"bg-amber-400 text-white",children:"Pending(re-opened)"}),(e==null?void 0:e.wf_status)===2&&a.jsx(c,{variant:"destructive",children:"Rejected"}),(e==null?void 0:e.wf_status)===1&&a.jsx(c,{variant:"success",children:"Resolved"}),(e==null?void 0:e.wf_status)===0&&a.jsx(c,{variant:"secondary",children:"Pending"})]}),a.jsx(r,{children:a.jsx(K,{to:`/e-dak/dashboard/management-complaint-details?complaintRefNo=${e==null?void 0:e.complaintRefNo}
                         &complaintId=${e==null?void 0:e._id}`,children:a.jsx(O,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},e._id)})})]}),a.jsx(Q,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(la,{page:n,perPage:d,totalPage:(N=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:N.totalDocs,hasNextPage:(v=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:v.hasNextPage,hasPrevPage:(y=(P=s==null?void 0:s.data)==null?void 0:P.data)==null?void 0:y.hasPrevPage,setPage:R,setPerPage:A})})]})})]})]})})}function ua(){return a.jsx(Z,{title:"Search Complaint",subTitle:"",children:a.jsx("div",{className:"py-0",children:a.jsx(da,{})})})}export{ua as default};
