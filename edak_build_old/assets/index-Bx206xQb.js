import{r as d,a as M,n as q,w as G,j as a,C as K,S as D,d as x,A as i,p as m,q as F,s as I,t as O,v as _,z as L}from"./index-ycav3uq8.js";import{P as W}from"./index-D0RnYuU5.js";import{T as B,a as $,b as h,c as s,d as z,e as r}from"./table-rvHCw5b0.js";import{P as X}from"./index-BZrgIScK.js";import{S as H}from"./index-CtkIkYQp.js";import{d as J,e as Q,b as U,c as V}from"./tabs-Mp0OEqRO.js";import"./badge-B9sB6hih.js";import"./index-BuQYzNhN.js";import"./circle-check-big-BSyZMyFI.js";import"./pagination-A1E4TOHz.js";function Y(){var P,w,y,S,k,A,C,T,E,R;const[o,g]=d.useState(1),[t,N]=d.useState(5),[j,f]=d.useState(""),[p,u]=d.useState(!0),[v,b]=d.useState(!1),{user:c}=M(),l=q({api:`${G.getEdak}?page=${o}&limit=${t}&draft=${p}&edakRefNo=${j}&ulbId=${c==null?void 0:c.userUlbId}`,key:"edakDraft",value:[o,t],options:{enabled:!0}});return d.useEffect(()=>{(async()=>{b(!0);try{await l.refetch()}catch(n){console.error("API call failed:",n)}finally{b(!1)}})()},[p]),a.jsx("main",{className:"grid items-start",children:a.jsxs(J,{defaultValue:"INBOX",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(K,{className:"flex-1 text-2xl font-bold",children:"E DAK List"}),a.jsx("div",{className:"flex flex-1 justify-end",children:a.jsxs(Q,{className:"flex gap-5",children:[(c==null?void 0:c.role)!="Nodal Officer"&&a.jsx(a.Fragment,{children:(c==null?void 0:c.roleId)!==D&&a.jsx(U,{value:"INBOX",onClick:()=>{u(!0)},children:"E-Dak Draft"})}),(c==null?void 0:c.roleId)!==D&&a.jsx(U,{value:"OUTBOX",onClick:()=>{u(!1)},children:"E-Dak Sent List"})]})})]}),a.jsx(V,{value:"INBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(H,{search:j,setSearch:f,refetch:l.refetch,isFetching:l.isLoading})}),a.jsx("div",{children:a.jsx(x,{to:"/e-dak/dashboard/e-dak-form?page=create",children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"Create New E-Dak"})})})]}),a.jsxs(m,{children:[a.jsx(F,{className:"px-7",children:a.jsxs(I,{children:["E-Dak Draft List(",(P=l.data)==null?void 0:P.totalDocs,")"]})}),a.jsx(O,{children:v?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(_,{})}):a.jsx(a.Fragment,{children:(w=l==null?void 0:l.data)!=null&&w.data&&l.data.data.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(B,{children:[a.jsx($,{children:a.jsxs(h,{children:[a.jsx(s,{className:"",children:"S No"}),a.jsx(s,{className:"",children:"Edak Ref No"}),a.jsx(s,{className:"",children:"Received Date"}),a.jsx(s,{className:"",children:"Received From"}),a.jsx(s,{className:"",children:"Category"}),a.jsx(s,{className:"",children:"Department"}),a.jsx(s,{className:"",children:"Date"}),a.jsx(s,{className:"",children:"Status"}),a.jsx(s,{children:"Action"})]})}),a.jsx(z,{children:l.data.data.map((e,n)=>a.jsxs(h,{children:[a.jsx(r,{children:n+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)==="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)===""?"N/A":e==null?void 0:e.departmentAlloted}),a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"font-bold text-green-500",children:"In Draft"}),a.jsx(r,{children:a.jsx(x,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=edakdraft`,children:a.jsx(i,{className:"bg-primary",children:"View"})})})]},e._id))})]}),a.jsx(L,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(X,{page:o,perPage:t,totalPage:(y=l==null?void 0:l.data)==null?void 0:y.totalPages,hasNextPage:(S=l==null?void 0:l.data)==null?void 0:S.nextPage,hasPrevPage:(k=l==null?void 0:l.data)==null?void 0:k.prevPage,setPage:g,setPerPage:N})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})}),a.jsx(V,{value:"OUTBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(H,{search:j,setSearch:f,refetch:l.refetch,isFetching:l.isLoading})}),a.jsx("div",{children:a.jsx(x,{to:"/e-dak/dashboard/e-dak-form",children:a.jsx(i,{className:"bg-primary",onClick:()=>{},children:"Create New E-Dak"})})})]}),a.jsxs(m,{children:[a.jsx(F,{className:"px-7",children:a.jsxs(I,{children:["E-Dak Sent List (",(A=l.data)==null?void 0:A.totalDocs,")"]})}),a.jsx(O,{children:v?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(_,{})}):a.jsx(a.Fragment,{children:(C=l==null?void 0:l.data)!=null&&C.data&&l.data.data.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(B,{children:[a.jsx($,{children:a.jsxs(h,{children:[a.jsx(s,{className:"",children:"S No"}),a.jsx(s,{className:"",children:"Edak Ref No"}),a.jsx(s,{className:"",children:"Received Date"}),a.jsx(s,{className:"",children:"Received From"}),a.jsx(s,{className:"",children:"Category"}),a.jsx(s,{className:"",children:"Department"}),a.jsx(s,{className:"",children:"Date"}),a.jsx(s,{className:"",children:"Status"}),a.jsx(s,{children:"Action"})]})}),a.jsx(z,{children:l.data.data.map((e,n)=>a.jsxs(h,{children:[a.jsx(r,{children:n+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)==="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)===""?"N/A":e==null?void 0:e.departmentAlloted}),a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"font-bold text-green-500",children:e.role?a.jsxs(a.Fragment,{children:[e.role==="no_pending"&&"Pending at Nodal Officer",e.role==="co_pending"&&"Pending at Commissioner",e.role==="si_acknowledge"&&"Acknowledged by SI",e.role==="si_pending"&&"Pending at Section Incharge"]}):e.draft===!1&&"Sent to Nodal Officer"}),a.jsx(r,{children:a.jsx(x,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=edakdraft`,children:a.jsx(i,{className:"bg-primary",children:"View"})})})]},e._id))})]}),a.jsx(L,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(X,{page:o,perPage:t,totalPage:(T=l==null?void 0:l.data)==null?void 0:T.totalPages,hasNextPage:(E=l==null?void 0:l.data)==null?void 0:E.nextPage,hasPrevPage:(R=l==null?void 0:l.data)==null?void 0:R.prevPage,setPage:g,setPerPage:N})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})})]})})}function ta(){return a.jsx(W,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(Y,{})})})}export{ta as default};
