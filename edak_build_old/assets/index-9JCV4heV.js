import{r as n,d as M,p as U,j as a,C as q,S as G,q as k,s as _,t as R,v as E,w as O,L as I,E as L,A as D,x as K}from"./index-BRnLakpB.js";import{P as W}from"./index-Bj9W1lOi.js";import{T as F,a as B,b as d,c,d as X,e as r}from"./table-DX_ipx9P.js";import{P as $}from"./index-Dq_TpNNj.js";import{S as z}from"./index-DWmEqRZi.js";import{d as J,e as Q,b as H,c as V}from"./tabs-DMPcqYA4.js";import"./badge-DsXNu46Z.js";import"./index-YSq32AOx.js";import"./circle-check-big-Ck6Q2ipy.js";import"./pagination-Di-b090E.js";function Y(){var b,v,w,y,T,P,S,A,C;const[o,i]=n.useState(1),[x,t]=n.useState(10),[h,p]=n.useState(""),[g,N]=n.useState("no_pending"),{user:j}=M(),[f,u]=n.useState(!1),l=U({api:`${K.getEdak}?draft=false&role=${g}&edakRefNo=${h}`,key:"edakDraft",value:[o,x],options:{enabled:!0}});return console.log("hello here data ",l==null?void 0:l.data),n.useEffect(()=>{(async()=>{u(!0);try{await l.refetch()}catch(s){console.error("API call failed:",s)}finally{u(!1)}})()},[g]),a.jsx("main",{className:"grid items-start",children:a.jsxs(J,{defaultValue:"INBOX",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(q,{className:"flex-1 text-2xl font-bold",children:"E DAK List"}),a.jsx("div",{className:"flex flex-1 justify-end",children:a.jsxs(Q,{className:"flex gap-5",children:[(j==null?void 0:j.roleId)!==G&&a.jsx(H,{value:"INBOX",onClick:()=>{N("no_pending")},children:"Inbox"}),a.jsx(H,{value:"OUTBOX",onClick:()=>{N("co_pending,si_acknowledge,si_pending")},children:"Outbox"})]})})]}),a.jsx(V,{value:"INBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx("div",{children:a.jsx(z,{search:h,setSearch:p,refetch:l.refetch,isFetching:l.isLoading})})}),a.jsxs(k,{children:[a.jsx(_,{className:"px-7",children:a.jsxs(R,{children:["E-Dak List Inbox (",(b=l.data)==null?void 0:b.totalDocs,")"]})}),a.jsx(E,{children:f?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(O,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(F,{children:[a.jsx(B,{children:a.jsxs(d,{children:[a.jsx(c,{className:"",children:"S No"}),a.jsx(c,{className:"",children:"Edak Ref No"}),a.jsx(c,{className:"",children:"Received Date"}),a.jsx(c,{className:"",children:"Received From"}),a.jsx(c,{className:"",children:"Category"}),a.jsx(c,{className:"",children:"Department"}),a.jsx(c,{className:"",children:"Date"}),a.jsx(c,{className:"",children:"Status"}),a.jsx(c,{children:"Action"})]})}),a.jsx(X,{children:(w=(v=l==null?void 0:l.data)==null?void 0:v.data)==null?void 0:w.map((e,s)=>a.jsxs(d,{children:[a.jsx(r,{children:s+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)=="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)==""?"N/A":e==null?void 0:e.departmentAlloted}),"                              ",a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"text-green-500 font-bold",children:(e==null?void 0:e.role)=="no_pending"&&"Pending"}),a.jsx(r,{children:a.jsx(I,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=inbox`,children:a.jsx(L,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},e._id))})]}),a.jsx(D,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx($,{page:o,perPage:x,totalPage:(y=l==null?void 0:l.data)==null?void 0:y.totalPages,setPage:i,setPerPage:t})})]})})]})]})}),a.jsx(V,{value:"OUTBOX",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx("div",{children:a.jsx(z,{search:h,setSearch:p,refetch:l.refetch,isFetching:l.isLoading})})}),a.jsxs(k,{children:[a.jsx(_,{className:"px-7",children:a.jsxs(R,{children:["E-Dak List Outbox (",(P=(T=l.data)==null?void 0:T.data)==null?void 0:P.totalDocs,")"]})}),a.jsx(E,{children:f?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(O,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(F,{children:[a.jsx(B,{children:a.jsxs(d,{children:[a.jsx(c,{className:"",children:"S No"}),a.jsx(c,{className:"",children:"Edak Ref No"}),a.jsx(c,{className:"",children:"Received Date"}),a.jsx(c,{className:"",children:"Received From"}),a.jsx(c,{className:"",children:"Category"}),a.jsx(c,{className:"",children:"Department"}),a.jsx(c,{className:"",children:"Date"}),a.jsx(c,{className:"",children:"Status"}),a.jsx(c,{children:"Action"})]})}),a.jsx(X,{children:(A=(S=l==null?void 0:l.data)==null?void 0:S.data)==null?void 0:A.map((e,s)=>a.jsxs(d,{children:[a.jsx(r,{children:s+1}),a.jsx(r,{children:e==null?void 0:e.edakRefNo}),a.jsx(r,{children:e==null?void 0:e.receivedDate}),a.jsx(r,{children:e==null?void 0:e.receivedFrom}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.category)=="e_mail"?"E-Mail":e==null?void 0:e.category}),a.jsx(r,{className:"capitalize",children:(e==null?void 0:e.departmentAlloted)==""?"N/A":e==null?void 0:e.departmentAlloted}),"                              ",a.jsx(r,{children:e==null?void 0:e.createdAt.split("T",[1])}),a.jsx(r,{className:"text-green-500 font-bold",children:e!=null&&e.role?a.jsxs(a.Fragment,{children:[(e==null?void 0:e.role)==="no_pending"&&"Pending at Nodal Officer",(e==null?void 0:e.role)==="co_pending"&&"Pending at Commissioner",(e==null?void 0:e.role)==="si_acknowledge"&&"Acknowledge by SI",(e==null?void 0:e.role)==="si_pending"&&"Pending at Section Incharge"]}):(e==null?void 0:e.draft)===!1&&"Sent to Nodal Officer"}),a.jsx(r,{children:a.jsx(I,{to:`/e-dak/dashboard/workflow-details?refNo=${e==null?void 0:e.edakRefNo}&page=outbox`,children:a.jsx(L,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},e._id))})]}),a.jsx(D,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx($,{page:o,perPage:x,totalPage:(C=l==null?void 0:l.data)==null?void 0:C.totalPages,setPage:i,setPerPage:t})})]})})]})]})})]})})}function oa(){return a.jsx(W,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(Y,{})})})}export{oa as default};
