import{j as e,U as u,W as N,V as p,a0 as Ce,A as n,a1 as Se,a2 as we,a3 as ke,a4 as Te,a5 as Fe,r as d,x as Ae,i as Ee,a as $e,n as je,b as Pe,o as _e,E as Ie,I as fe,X as ue,F as Re,C as Ne,d as Be,e as ze,f as Le,m as Me,w as f,_ as pe}from"./index-ycav3uq8.js";import{P as Ve}from"./index-D0RnYuU5.js";import{X as Ye}from"./x-QKiA1jZg.js";import{C as qe}from"./circle-check-big-BSyZMyFI.js";import{C as Oe}from"./circle-x-DljfLdW0.js";import"./badge-B9sB6hih.js";import"./index-BuQYzNhN.js";function Ue({sendTo:l,setSendTo:t,open:r,onOpenChange:i,onSubmit:o,userDetailsList:c}){return e.jsx(u,{open:r,onOpenChange:i,children:e.jsxs(N,{className:"sm:max-w-md",children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ce,{children:"Send To"}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(!1),children:e.jsx(Ye,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Send To"}),e.jsxs(Se,{value:l,onValueChange:a=>t(a),children:[e.jsx(we,{children:e.jsx(ke,{placeholder:"SELECT..."})}),e.jsx(Te,{children:c==null?void 0:c.map(a=>e.jsx(Fe,{value:a==null?void 0:a._id,children:a==null?void 0:a.fullName}))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{className:"bg-[#7C3AED] hover:bg-[#6D28D9]",onClick:()=>o(),children:"Send"})})]})]})})}const We=ze().shape({comment:Le().required("Comment is required")});function Xe(){var y,C,S,w,k,T,F,A,E,$,P,_,I,R,B,z,L,M,V,Y,q,O,U,W,X,Q,H,D,G,J,K,Z,ee,se,ae,le,ie,de,te,re,ce,ne,oe,xe,me;const[l,t]=d.useState(),[r,i]=d.useState(0),[o,c]=d.useState(!1),[a,g]=d.useState(!1),v=Ae({}),ge=Ee(),{user:x}=$e(),b=new URLSearchParams(Me().search),m=b.get("refNo"),h=b.get("page");console.log(r,"page");const s=je({api:`${f.getFileById}/${m}`,key:"EdakDetails",options:{enabled:!0}}),j=je({api:`${f.getUsersDetails}`,key:"edakDraft",options:{enabled:!0}}),ve=async()=>{var he;let ye={sendTo:l,receivedFrom:x==null?void 0:x._id};(he=(await v.mutateAsync({api:`${f.forwardFilesById}/${m}`,data:ye})).data)!=null&&he.success?(pe.success("File Sent Successfully"),c(!1),ge("/e-dak/dashboard/list-workflow")):pe.error("File Not Created!")},be=Pe({defaultValues:{comment:""},resolver:_e(We)});return e.jsx("main",{className:"grid flex-1 items-start",children:e.jsx("div",{className:"grid auto-rows-max items-start gap-4 md:gap-8 lg:col-span-2",children:e.jsx("div",{className:"",children:e.jsx("div",{className:" bg-background",children:e.jsxs("div",{className:"mx-auto max-w-7xl  rounded-lg p-8 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"mb-6 text-xl font-bold uppercase text-blue-800",children:["File Ref No : ",(S=(C=(y=s==null?void 0:s.data)==null?void 0:y.data)==null?void 0:C.fileData)==null?void 0:S.fileRefNo]}),e.jsxs("h1",{children:[e.jsx("span",{className:"text-md mb-6 pr-2 font-bold",children:"Priority -"}),e.jsx("span",{className:`font-bold capitalize ${((T=(k=(w=s==null?void 0:s.data)==null?void 0:w.data)==null?void 0:k.fileData)==null?void 0:T.priority)=="normal"?"text-green-400":"text-red-500"}`,children:(E=(A=(F=s==null?void 0:s.data)==null?void 0:F.data)==null?void 0:A.fileData)==null?void 0:E.priority})]}),e.jsxs("h1",{className:"text-md mb-6  flex items-center font-bold",children:["Status -",e.jsx("span",{className:"pl-2 text-orange-500",children:(_=(P=($=s==null?void 0:s.data)==null?void 0:$.data)==null?void 0:P.sentTo)==null?void 0:_.name}),e.jsx("span",{className:" text-orange-500",children:((B=(R=(I=s==null?void 0:s.data)==null?void 0:I.data)==null?void 0:R.fileData)==null?void 0:B.draft)===!0&&"In Draft"})]})]}),e.jsxs("p",{className:"mb-2 text-gray-600",children:[e.jsx("span",{className:"font-bold",children:"Created on : "}),Ie((V=(M=(L=(z=s==null?void 0:s.data)==null?void 0:z.data)==null?void 0:L.fileData)==null?void 0:M.fileData)==null?void 0:V.createdAt).format("DD-MM-YYYY")]}),e.jsx("div",{className:"mt-1 border-b border-[#99B37C]"}),e.jsxs("div",{className:"mt-4  grid grid-cols-1 space-y-4   md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center  space-x-4 capitalize",children:[e.jsx("div",{className:"font-semibold",children:"SenT To : "}),e.jsxs("div",{children:[e.jsx("p",{className:"capitalize opacity-90",children:(q=(Y=s==null?void 0:s.data)==null?void 0:Y.data)!=null&&q.sentTo?(W=(U=(O=s==null?void 0:s.data)==null?void 0:O.data)==null?void 0:U.sentTo)==null?void 0:W.name:"Not Assigned"})," "]})]}),e.jsxs("div",{className:"flex items-center  space-x-4 ",children:[e.jsx("div",{className:"font-semibold",children:"Title : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(H=(Q=(X=s==null?void 0:s.data)==null?void 0:X.data)==null?void 0:Q.fileData)==null?void 0:H.title})," "]})]}),e.jsxs("div",{className:"flex items-center  space-x-4 capitalize",children:[e.jsx("div",{className:"font-semibold",children:"Department : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(J=(G=(D=s==null?void 0:s.data)==null?void 0:D.data)==null?void 0:G.fileData)==null?void 0:J.department})," "]})]}),e.jsx("div",{className:"col-span-3 my-20 border-b border-[#99B37C]"}),e.jsxs("div",{className:"col-span-2 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Description : "}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-90",children:(ee=(Z=(K=s==null?void 0:s.data)==null?void 0:K.data)==null?void 0:Z.fileData)==null?void 0:ee.description})," "]})]}),e.jsxs("div",{className:"col-span-3 flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"File Document"}),e.jsxs(u,{children:[e.jsx(p,{}),e.jsx(N,{className:"sm:max-w-[800px] ",children:e.jsx("div",{className:"py-4",children:e.jsx(fe,{src:(le=(ae=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:ae.fileData)==null?void 0:le.document})})}),e.jsx(ue,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer ",children:e.jsx(fe,{src:(te=(de=(ie=s==null?void 0:s.data)==null?void 0:ie.data)==null?void 0:de.fileData)==null?void 0:te.document,className:"w-40"})})})]})]})]}),e.jsx(Re,{methods:be,children:e.jsxs(u,{open:o,children:[e.jsx(p,{}),e.jsx(N,{className:"sm:max-w-[500px]",children:e.jsx("div",{className:"py-4"})}),e.jsx("div",{className:"",children:e.jsx(Ue,{open:a,onOpenChange:g,setSendTo:t,sendTo:l,onSubmit:ve,userDetailsList:(ce=(re=j==null?void 0:j.data)==null?void 0:re.data)==null?void 0:ce.docs})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"mr-10",children:[((oe=(ne=s==null?void 0:s.data)==null?void 0:ne.data)==null?void 0:oe.wf_status)===1&&e.jsxs(Ne,{className:"mb-4 flex items-center",children:[e.jsx(qe,{className:"mr-2 inline text-green-500"}),"Complaint Resolved"]}),((me=(xe=s==null?void 0:s.data)==null?void 0:xe.data)==null?void 0:me.wf_status)===2&&e.jsxs(Ne,{className:"mb-4 flex items-center",children:[e.jsx(Oe,{className:"mr-2 inline text-red-500"}),"Complaint Rejected"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"col-span-4",children:[h!="sent"&&h!="report"&&e.jsx(ue,{onClick:()=>{g(!0),i(5)},asChild:!0,children:e.jsx(n,{name:"approve",disabled:v.isPending,type:"button",className:"pl-7 pr-7",children:"Send"})}),h=="draft"&&e.jsx(Be,{to:`/e-dak/dashboard/create-file?refNo=${m}&page=edit`,children:e.jsx(n,{className:"ml-5 bg-primary",onClick:()=>{},children:"Edit"})})]})})]})]})})]})})})})})}function as(){const[l,t]=d.useState(""),[r,i]=d.useState("");return console.log(t),console.log(i),e.jsx(Ve,{title:"Workflow Details",subTitle:"",searchLink:l,searchLabel:r,children:e.jsx("div",{className:"",children:e.jsx(Xe,{})})})}export{as as default};
