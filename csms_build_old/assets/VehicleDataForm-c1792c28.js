import{r as n,u as R,m as A,A as x,a as b,j as t,b as L}from"./index-3941a546.js";import{u as P}from"./formik.esm-f1168841.js";import{c as $,a as g}from"./index.esm-6cf26a62.js";import{e as p}from"./PowerupFunctions-d2a7455a.js";import{B as M}from"./BarLoader-5e24b4d4.js";import{B as U}from"./BottomErrorCard-b06e7e18.js";import{T as J}from"./Tabs-6a332c64.js";import"./hoist-non-react-statics.cjs-39f77784.js";const X=()=>{const[y,f]=n.useState(!1),[j,F]=n.useState(null),[T,r]=n.useState(!1);n.useState([]);const[u,S]=n.useState([]),{api_getvehicleDataById:V,api_postvehicleData:_,api_editvehicleData:E,api_getvehicleTypeData:k}=L(),h=R(),{id:c}=A(),I=$({vehicleTypesId:g().required("Vehicle type is Required"),registrationNo:g().required("Registration no is Required"),chasisNo:g().required("Chasis no is Required")}),s=P({initialValues:{vehicleTypesId:"",registrationNo:"",chasisNo:""},onSubmit:(e,i)=>{console.log("at submit ",e),w(e)},validationSchema:I}),w=e=>{r(!0);let i,a,o={vehicleTypesId:e.vehicleTypesId,registrationNo:e.registrationNo,chasisNo:e.chasisNo};c!==void 0?(i=E,a=o,a.id=c):(i=_,a=o),x.post(i,a,b()).then(function(l){var m,v,N;console.log("vehicle  master..",(m=l==null?void 0:l.data)==null?void 0:m.data),((v=l==null?void 0:l.data)==null?void 0:v.status)===!0?h("/vehicle"):d(!0,`${(N=l==null?void 0:l.data)==null?void 0:N.message}`),r(!1)}).catch(function(l){console.log("==2 error list...",l),d(!0,"Error occured in submitting form."),r(!1)})},B=()=>{r(!0);let e={id:c};x.post(V,e,b()).then(function(i){var a,o,l,m;console.log("fetch edit data response..",(a=i==null?void 0:i.data)==null?void 0:a.data),(o=i==null?void 0:i.data)!=null&&o.status?C((l=i==null?void 0:i.data)==null?void 0:l.data):d(!0,`${(m=i==null?void 0:i.data)==null?void 0:m.message}`),r(!1)}).catch(function(i){console.log("= edit data error...",i),f(!0),r(!1)})},C=e=>{console.log("existing property details in prop address...",e),s.setFieldValue("id",e==null?void 0:e.id),s.setFieldValue("vehiclesTypeName",e==null?void 0:e.vehicle_type_name),s.setFieldValue("vehicleTypesId",e==null?void 0:e.vehicle_types_id),s.setFieldValue("registrationNo",e==null?void 0:e.registration_no),s.setFieldValue("chasisNo",e==null?void 0:e.chasis_no)},q=()=>{x.post(k,{},b()).then(function(e){var i,a,o;(i=e==null?void 0:e.data)!=null&&i.status?S((a=e==null?void 0:e.data)==null?void 0:a.data):d(!0,`${(o=e==null?void 0:e.data)==null?void 0:o.message}`),r(!1)}).catch(function(e){console.log("==2 error list...",e),d(!0,"Error occured while fetching data.")})};n.useEffect(()=>{q(),c!==void 0&&B()},[]);const D=e=>{let i=e.target.name,a=e.target.value;i=="registrationNo"&&s.setFieldValue("registrationNo",p(a.toUpperCase(),s.values.registrationNo,30)),i=="chasisNo"&&s.setFieldValue("chasisNo",p(a.toUpperCase(),s.values.chasisNo,30))},d=(e,i)=>{F(i),f(e)};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"main-div",children:t.jsxs("div",{className:"main-inner-div",children:[T&&t.jsx(M,{}),y&&t.jsx(U,{activateBottomErrorCard:d,errorTitle:j}),t.jsxs("div",{className:"main-sub-div",children:[t.jsx("div",{className:"main-sub-inner-div",children:t.jsxs("div",{className:"text-div",children:[t.jsx("div",{className:"big-text",children:"Vehicle Master Form"}),t.jsx("div",{className:"small-text",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]})}),c===void 0?t.jsx("div",{className:"tab-div",children:t.jsx("div",{className:"add-button-master-div",children:t.jsxs("button",{onClick:()=>h("/vehicle-form"),type:"submit",className:" add-button-master",children:["Add"," "]})})}):null]}),c!==void 0?"":t.jsx(J,{listRoute:"/vehicle",formRoute:"/vehicle-form"}),t.jsx("div",{className:"details-div",children:t.jsx("span",{className:"detailes",children:"Details of Vehicle"})}),t.jsx("div",{className:"form-div",children:t.jsx("form",{onSubmit:s.handleSubmit,onChange:D,children:t.jsxs("div",{className:"form",children:[t.jsxs("div",{className:"col-span-4 grid grid-cols-12",children:[t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Vehicle Type",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsxs("select",{...s.getFieldProps("vehicleTypesId"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Select country",children:[t.jsx("option",{value:"",children:"Select"}),u==null?void 0:u.map((e,i)=>t.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.vehicle_type_name}))]}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.vehicleTypesId&&s.errors.vehicleTypesId?s.errors.vehicleTypesId:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Registration No",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("registrationNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter registration no"}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.registrationNo&&s.errors.registrationNo?s.errors.registrationNo:null})]}),t.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-2 md:pr-4",children:[t.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Chasis No",t.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t.jsx("input",{...s.getFieldProps("chasisNo"),type:"text",className:"form-control h-10 block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700  bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter chasis no"}),t.jsx("span",{className:"text-red-600 text-xs",children:s.touched.chasisNo&&s.errors.chasisNo?s.errors.chasisNo:null})]})]}),t.jsxs("div",{className:"cancel-button-div",children:[t.jsx("div",{className:"    ",children:t.jsx("button",{onClick:()=>h("/vehicle"),type:"button",className:"cancel-button",children:"Back to List"})}),t.jsx("div",{className:"submit-button-div",children:t.jsx("button",{type:"submit",className:" cypress_next2_button submit-button",children:c!==void 0?"Update":"Save"})})]})]})})})]})})})};export{X as default};
