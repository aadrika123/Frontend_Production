import{u as ne,r as o,j as a,F as W,b as l}from"./index-9bb62302.js";import{u as ie}from"./formik.esm-63171110.js";import{T as de}from"./ThemeStyle-994f51bc.js";import{R as v}from"./RentalApiList-e90481e3.js";import"./Hourglass-75792fc7.js";import{R as oe}from"./RotatingLoader-0b238a05.js";import{c as X,a as me}from"./useCustomQuery-86e6a779.js";import{c as y}from"./createLucideIcon-375c4fe1.js";import{U as ue,M as he,R as ge,B as xe,E as pe}from"./user-5ef4d0fc.js";import"./hoist-non-react-statics.cjs-0e1e4877.js";import"./ApiHeader2-b363f7b8.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],be=y("ChevronLeft",Ne);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ve=y("ChevronRight",fe);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],we=y("Search",ye);function ke(){var S,P,C,$,A,F,j,R,T,V,k,I,q,E,M,B,D,U,z,L,O,G,H,J,K,Q;const{titleColor:u}=de(),Y=ne(),[s,w]=o.useState(1),[m]=o.useState(10),[h,Z]=o.useState(""),[c,ee]=o.useState("");o.useEffect(()=>{const e=setTimeout(()=>{ee(h)},500);return()=>clearTimeout(e)},[h]),o.useEffect(()=>{w(1)},[c]);const t=ie({initialValues:{location:"",circle:"",page:s,perPage:m,key:c},onSubmit:e=>{console.log(e)}});o.useEffect(()=>{t.setFieldValue("page",s),t.setFieldValue("perPage",m),t.setFieldValue("key",c)},[s,m,c]);const g=X({api:v().circleApi,options:{enabled:!0}}),x=X({api:`${(S=v())==null?void 0:S.marketApi}?location_id=${(P=t==null?void 0:t.values)==null?void 0:P.circle}`,options:{enabled:!!((C=t==null?void 0:t.values)!=null&&C.circle)}}),r=me({api:`${($=v())==null?void 0:$.api_shopListByLocation}`,config:{marketId:(A=t==null?void 0:t.values)==null?void 0:A.location,page:s,perPage:m,key:c},value:[(F=t==null?void 0:t.values)==null?void 0:F.location,s,c],options:{enabled:!!((j=t==null?void 0:t.values)!=null&&j.location)}}),ae=(e,n)=>!e||!n?"N/A":(parseFloat(e)*parseFloat(n)).toFixed(2),te=e=>{console.log("Shop clicked:",e)},le=e=>{Z(e.target.value)},p=e=>{w(e)},N=((T=(R=r==null?void 0:r.data)==null?void 0:R.data)==null?void 0:T.total)||0,d=Math.ceil(N/m),re=((I=(k=(V=r==null?void 0:r.data)==null?void 0:V.data)==null?void 0:k.data)==null?void 0:I.length)||0,_=(s-1)*m+1,se=_+re-1,ce=()=>{const e=[];if(d<=5)for(let i=1;i<=d;i++)e.push(i);else{const i=Math.max(1,s-2),b=Math.min(d,i+5-1);i>1&&(e.push(1),i>2&&e.push("..."));for(let f=i;f<=b;f++)e.push(f);b<d&&(b<d-1&&e.push("..."),e.push(d))}return e};return r!=null&&r.isLoading?a(oe,{}):a(W,{children:l("div",{className:"bg-[#eff2f0]",children:[a("div",{className:"col-span-12",children:a("h1",{className:`font-semibold ${u} text-xl px-4 py-2 text-gray-600`,children:"Shop List"})}),a("form",{onSubmit:t.handleSubmit,children:a("div",{className:"p-3 md:p-10 flex justify-center items-center overflow-hidden",children:l("div",{className:"grid grid-cols-12 bg-[#fdfdfd] w-full md:w-1/3 p-6 md:p-10 rounded-2xl shadow-md",children:[a("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-2 text-gray-600",children:l("div",{className:"",children:[a("h1",{className:`${u} text-sm py-2 text-gray-600`,children:"Select Circle"}),l("select",{...t.getFieldProps("circle"),className:"border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal",children:[a("option",{value:"",children:"select"}),(M=(E=(q=g==null?void 0:g.data)==null?void 0:q.data)==null?void 0:E.data)==null?void 0:M.map((e,n)=>a("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.location},n))]}),a("p",{className:"text-red-500 text-xs",children:t.touched.circle&&t.errors.circle?t.errors.circle:null})]})}),a("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-1 text-gray-600",children:l("div",{className:"",children:[a("h1",{className:`${u} text-sm py-2 text-gray-600`,children:"Select Location"}),l("select",{...t.getFieldProps("location"),className:"border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal",children:[a("option",{value:"",children:"select"}),(U=(D=(B=x==null?void 0:x.data)==null?void 0:B.data)==null?void 0:D.data)==null?void 0:U.map((e,n)=>a("option",{value:e==null?void 0:e.building_id,children:e==null?void 0:e.building_name},n))]}),a("p",{className:"text-red-500 text-xs",children:t.touched.location&&t.errors.location?t.errors.location:null})]})})]})})}),((z=t==null?void 0:t.values)==null?void 0:z.location)&&a("div",{className:"px-3 pb-3",children:a("div",{className:"max-w-md mx-auto",children:l("div",{className:"relative",children:[a(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a("input",{type:"text",value:h,onChange:le,placeholder:"Search shops by shop number, allottee, or address...",className:"w-full pl-10 pr-4 py-2 border border-gray-100 rounded-xl bg-white shadow-lg text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),((L=t==null?void 0:t.values)==null?void 0:L.location)&&N>0&&a("div",{className:"px-3 pb-2",children:l("div",{className:"text-center text-sm text-gray-600",children:["Showing ",_," to ",se," of ",N," shops",c&&l("span",{className:"ml-2 text-blue-600",children:['(filtered by "',c,'")']})]})}),a("div",{className:"p-3",children:((H=(G=(O=r==null?void 0:r.data)==null?void 0:O.data)==null?void 0:G.data)==null?void 0:H.length)>0?l(W,{children:[(Q=(K=(J=r==null?void 0:r.data)==null?void 0:J.data)==null?void 0:K.data)==null?void 0:Q.map((e,n)=>l("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-4 border border-gray-100 active:scale-95 transition-all duration-200 cursor-pointer",onClick:()=>te(e),children:[l("div",{className:"flex justify-between items-start mb-3",children:[l("div",{className:"flex-1",children:[a("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.shop_no}),l("div",{className:"flex items-center text-gray-600 text-sm mb-2",children:[a(ue,{className:"w-4 h-4 mr-1"}),a("span",{children:e.allottee})]}),l("div",{className:"flex items-center text-gray-600 text-sm",children:[a(he,{className:"w-4 h-4 mr-1"}),a("span",{className:"capitalize",children:e.address||"N/A"})]})]}),a("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:e.circle_name})]}),l("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[l("div",{className:"bg-gray-50 rounded-lg p-3",children:[l("div",{className:"flex items-center text-gray-600 text-xs mb-1",children:[a(ge,{className:"w-3 h-3 mr-1"}),a("span",{children:"Dimensions"})]}),a("div",{className:"text-sm font-semibold text-gray-900",children:e.present_length&&e.present_breadth?`${e.present_length} × ${e.present_breadth} ft`:"N/A"})]}),l("div",{className:"bg-gray-50 rounded-lg p-3",children:[l("div",{className:"flex items-center text-gray-600 text-xs mb-1",children:[a(xe,{className:"w-3 h-3 mr-1"}),a("span",{children:"Total Area"})]}),a("div",{className:"text-sm font-semibold text-gray-900",children:e.area?`${e.area} sq ft`:ae(e.present_length,e.present_breadth)+" sq ft"})]})]}),l("div",{className:"flex justify-between items-center",children:[l("div",{className:"text-xs text-gray-500",children:["Building ID: ",e.market_id," • Shop #",e.id]}),l("div",{onClick:i=>{i.stopPropagation(),Y(`/shop-details/${e==null?void 0:e.id}`)},className:"flex items-center text-blue-600 text-sm font-medium",children:[a(pe,{className:"w-4 h-4 mr-1"}),a("span",{children:"View Details"})]})]}),a("div",{className:"mt-3 pt-3 border-t border-gray-100",children:l("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-600",children:[l("div",{children:[a("span",{className:"font-medium",children:"Present Occupier:"}),a("div",{className:"text-gray-800",children:e.present_occupier||"N/A"})]}),l("div",{children:[a("span",{className:"font-medium",children:"Rate:"}),l("div",{className:"text-gray-800",children:["₹",e.rate||"0"]})]}),l("div",{children:[a("span",{className:"font-medium",children:"Contact:"}),a("div",{className:"text-gray-800",children:e.contact_no||"N/A"})]}),l("div",{children:[a("span",{className:"font-medium",children:"Market:"}),a("div",{className:"text-gray-800",children:e.market_name||"N/A"})]})]})})]},e.id)),d>1&&a("div",{className:"flex justify-center items-center mt-6 mb-4",children:l("div",{className:"flex items-center space-x-2",children:[l("button",{onClick:()=>p(s-1),disabled:s===1,className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${s===1?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"} transition-all duration-200`,children:[a(be,{className:"w-4 h-4 mr-1"}),"Previous"]}),a("div",{className:"flex space-x-1",children:ce().map((e,n)=>a("button",{onClick:()=>e!=="..."&&p(e),disabled:e==="...",className:`px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${e===s?"bg-blue-600 text-white":e==="..."?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"}`,children:e},n))}),l("button",{onClick:()=>p(s+1),disabled:s===d,className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg ${s===d?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 active:scale-95"} transition-all duration-200`,children:["Next",a(ve,{className:"w-4 h-4 ml-1"})]})]})})]}):l("div",{className:"p-2 relative",children:[a("img",{src:"https://img.freepik.com/free-vector/people-using-search-box-query-engine-giving-result_74855-11000.jpg?w=1380&t=st=1689941552~exp=1689942152~hmac=2830199908ef781c2072c2c614b124d0656193ea00848ee3bc7b438e259e94ca",className:"mx-auto h-44 mt-6",alt:"No shops found"}),a("div",{className:"text-center mt-4 text-gray-600",children:c?`No shops found matching "${c}"`:"No shops found"})]})})]})})}export{ke as default};
