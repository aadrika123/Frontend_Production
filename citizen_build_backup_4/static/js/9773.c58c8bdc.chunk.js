"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[9773],{39773:function(e,o,l){l.r(o);var t=l(29439),d=l(72791),n=l(55705),i=l(81724),s=l(87011),a=(l(97948),l(36124)),c=l(75985),r=l(62037),u=l(32612),v=l(73728),p=l(99008),m=l(57689),x=(l(5289),l(60786)),h=l(93157),g=l(58253),f=l(80184);o.default=function(e){var o,l,j,b,N=g.Z,w=(0,m.UO)(),y=w.id,D=w.type;console.log("id in upload........",y,"and type => ",D);var S=(0,p.Z)(),Z=S.get_ConcessionDocumentsToUpload,C=S.post_ConcessionDocumentUpload,k=S.get_ObjectionDocumentsToUpload,U=S.post_ObjectionDocumentUpload,F=S.get_HarvestingDocumentsToUpload,_=S.post_HarvestingDocumentUpload,I=S.get_ConcessionDetailsById,O=S.get_HarvestingDetailsById,P=S.get_ObjectionDetailsById,A=(0,d.useState)(!1),R=(0,t.Z)(A,2),T=R[0],V=R[1],H=(0,d.useState)(""),B=(0,t.Z)(H,2),L=B[0],W=B[1],z=(0,d.useState)(""),E=(0,t.Z)(z,2),q=(E[0],E[1]),M=(0,d.useState)(0),Y=(0,t.Z)(M,2),G=Y[0],J=Y[1],K=(0,d.useState)(!1),Q=(0,t.Z)(K,2),X=Q[0],$=Q[1],ee=(0,d.useState)(""),oe=(0,t.Z)(ee,2),le=(oe[0],oe[1]),te=(0,d.useState)(1),de=(0,t.Z)(te,2),ne=de[0],ie=de[1],se=(0,d.useState)(0),ae=(0,t.Z)(se,2),ce=(ae[0],ae[1],(0,d.useState)()),re=(0,t.Z)(ce,2),ue=re[0],ve=re[1],pe=(0,d.useState)(""),me=(0,t.Z)(pe,2),xe=me[0],he=me[1],ge=(0,d.useState)(!0),fe=(0,t.Z)(ge,2),je=fe[0],be=fe[1],Ne=(0,d.useState)(!1),we=(0,t.Z)(Ne,2),ye=we[0],De=we[1],Se=(0,d.useState)(),Ze=(0,t.Z)(Se,2),Ce=Ze[0],ke=Ze[1],Ue=(0,d.useState)(),Fe=(0,t.Z)(Ue,2),_e=(Fe[0],Fe[1],(0,d.useState)()),Ie=(0,t.Z)(_e,2),Oe=Ie[0],Pe=Ie[1],Ae=(0,d.useState)(null),Re=(0,t.Z)(Ae,2),Te=Re[0],Ve=Re[1],He=(0,d.useState)(null),Be=(0,t.Z)(He,2),Le=Be[0],We=Be[1],ze=(0,d.useState)(!1),Ee=(0,t.Z)(ze,2),qe=(Ee[0],Ee[1]),Me=(0,d.useState)(!1),Ye=(0,t.Z)(Me,2),Ge=(Ye[0],Ye[1]);(0,d.useEffect)((function(){Je()}),[G]),(0,d.useEffect)((function(){var e="";"Concession"==D&&(e=I),"Rain Water Harvesting"==D&&(e=O),"Objection"==D&&(e=P),V(!0),h.Z.post(e,{applicationId:y},(0,u.Z)()).then((function(e){var o;V(!1),console.log("view full details...",e.data.data),Pe(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)})).catch((function(e){V(!1),console.log("==2 details by id error...",e)}))}),[]);var Je=function(){var e="";"Concession"==D&&(e=Z),"Rain Water Harvesting"==D&&(e=F),"Objection"==D&&(e=k),V(!0),console.log("before fetch upload doc"),h.Z.post("".concat(e),{applicationId:y},(0,u.Z)()).then((function(e){var o;console.log("list of doc to upload at pilotworkflowdocumentupload => ",null===e||void 0===e?void 0:e.data),ke(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data),V(!1)})).catch((function(e){console.log("data submission error bo doc upload => ",e),$(!1),V(!1)}))};console.log("temp doc => ",ye);var Ke=i.Ry({docId:i.Rx().required("Select document type"),docUpload:i.Z_().required("Select document")}),Qe=(0,n.TA)({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:function(e){console.log("use effect 2"),console.log("values submission => ",e),$e()},validationSchema:Ke}),Xe=function(e){var o=e.target.files[0];(0,x.VW)(o)&&(he(e.target.name),ve(URL.createObjectURL(e.target.files[0])),W(e.target.files[0]),Qe.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),console.log("use effect change ",Qe.values.docId,Qe.values.docUpload),console.log("file on change bo doc upload => ",o,"and doc upload => ",L,"and url => ",ue,"and name => ",null===o||void 0===o?void 0:o.name,"file name => ",xe),"pdf"==(null===o||void 0===o?void 0:o.name).substring((null===o||void 0===o?void 0:o.name).lastIndexOf(".")+1)?be(!1):be(!0))};console.log("and doc name => ",xe);var $e=function(o){if(null==Le)return c.Am.error("Select Document Type"),Ve(null),void We(null);console.log("doc ref name...",o);var l=new FormData;console.log("document  => ",L);var t={applicationId:null===e||void 0===e?void 0:e.id,ownerId:Te,docCode:Le,document:L};if(l.append("applicationId",y),null!=Te&&l.append("ownerId",Te),l.append("docCode",Le),l.append("document",L),console.log("form data bo doc upload => ",t),""!=L){De(!1),qe(!1),$(!1),Ge(!1),ie(ne+1),console.log("modal m end => ",X,ye),V(!0);var d="";"Concession"==D&&(d=C),"Rain Water Harvesting"==D&&(d=_),"Objection"==D&&(d=U),console.log("before fetch doc to upload...",l),h.Z.post("".concat(d),l,(0,a.Z)()).then((function(e){var o;console.log("data submitted bo doc upload => ",e.data),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.status?(c.Am.success("Document Uploaded Successfully !!"),$(!1),q(""),W(""),V(!1),J(G+1),he(""),Qe.setFieldValue("docUpload",""),J(G+1),Ve(null),We(null),Je()):(console.log("something went"),c.Am.error("Something went wrongg !!!"))})).catch((function(e){console.log("data submission error bo doc upload => ",e),$(!1),V(!1)}))}else c.Am.error("Select file")},eo=function(e){console.log("getting doc name => ",e),""==e&&c.Am.error("File not uploaded !!!"),""!=e&&(le(e),Ge(!0),ie(ne+1))},oo=function(e){We(e.target.value)},lo=(0,m.s0)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Ix,{position:"top-right",autoClose:2e3}),T&&(0,f.jsx)(r.Z,{}),(0,f.jsxs)("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[(0,f.jsx)("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:function(){return lo("/propertyDashboard")},children:"Back"}),"Objection"==D?(0,f.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:["Clerical Mistake"==(null===Oe||void 0===Oe?void 0:Oe.objection_for)&&(0,f.jsx)(f.Fragment,{children:"Clerical Objection"}),"\xa0","Assessment Error"==(null===Oe||void 0===Oe?void 0:Oe.objection_for)&&(0,f.jsx)(f.Fragment,{children:"Assessment Objection"}),"\xa0","Forgery"==(null===Oe||void 0===Oe?void 0:Oe.objection_for)&&(0,f.jsx)(f.Fragment,{children:"Forgery Objection"}),"\xa0 Document Upload"]}):(0,f.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[D," Document Upload"]}),(0,f.jsx)("div",{className:"text-gray-700 py-6 ",children:(0,f.jsx)("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:null===Oe||void 0===Oe||null===(o=Oe.fullDetailsData)||void 0===o||null===(l=o.cardArray)||void 0===l||null===(j=l.data)||void 0===j?void 0:j.map((function(e){return(0,f.jsxs)("div",{className:"grid grid-cols-2",children:[(0,f.jsxs)("div",{className:"px-4 py-2 font-semibold",children:[null===e||void 0===e?void 0:e.displayString," : "]}),(0,f.jsx)("div",{className:"px-4 py-2",children:null===e||void 0===e?void 0:e.value})]})}))})}),(0,f.jsx)("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),(0,f.jsx)("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsxs)("h1",{className:"text-xs poppins",children:[D," Documents"]}),(0,f.jsx)("div",{className:"bg-white shadow-md rounded my-2",children:(0,f.jsxs)("table",{className:"min-w-max w-full table-auto",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"#"}),(0,f.jsx)("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),(0,f.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"Document"}),(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"Status"}),(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"Remarks"}),(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"Preview"}),(0,f.jsx)("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),(0,f.jsx)("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:null===Ce||void 0===Ce||null===(b=Ce.listDocs)||void 0===b?void 0:b.map((function(e,o){var l,t,d,n,i,a,c,r,u,p,m,x,h,g,j,b,w,y,D,S,Z,C,k,U,F,_,I,O,P,A,R,V,H;return(0,f.jsxs)("tr",{className:"border-b border-gray-200 ",onSubmit:Qe.handleSubmit,onChange:Qe.handleChange,children:[(0,f.jsx)("td",{className:"py-3 px-6 font-semibold",children:o+1}),(0,f.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:(0,f.jsx)("img",{src:s,alt:"rain",className:"w-4"})}),(0,f.jsxs)("span",{className:"font-medium poppins",value:null===e||void 0===e?void 0:e.docName,children:["R"==(null===e||void 0===e?void 0:e.docType)&&(null===e||void 0===e||null===(l=e.masters[0])||void 0===l?void 0:l.docVal),"O"==(null===e||void 0===e?void 0:e.docType)&&"Additional"]})]})}),(0,f.jsx)("td",{className:"py-3 px-6",children:(0,f.jsx)("div",{className:"font-semibold text-sm",children:(0,f.jsx)("div",{className:"",children:(0,f.jsxs)("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:oo,children:[(0,f.jsx)("option",{value:"",selected:!0,children:"--select--"}),null===e||void 0===e||null===(t=e.masters)||void 0===t?void 0:t.map((function(e,o){return(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.documentCode,children:null===e||void 0===e?void 0:e.docVal})}))]})})})}),(0,f.jsx)("td",{className:"py-3 px-6 text-center relative",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,f.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,f.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){var o;return eo("".concat(N,"/").concat(null===e||void 0===e||null===(o=e.uploadedDoc)||void 0===o?void 0:o.docPath))},children:(0,f.jsxs)("div",{className:"flex items-center",children:["pdf"==(null===e||void 0===e||null===(d=e.uploadedDoc)||void 0===d||null===(n=d.docPath)||void 0===n?void 0:n.split(".")[(null===e||void 0===e||null===(i=e.uploadedDoc)||void 0===i||null===(a=i.docPath)||void 0===a||null===(c=a.split("."))||void 0===c?void 0:c.length)-1])&&(0,f.jsx)("div",{className:"flex-shrink-0 text-[28px]",children:(0,f.jsx)(v.NFo,{})}),"jpg"==(null===e||void 0===e||null===(r=e.uploadedDoc)||void 0===r||null===(u=r.docPath)||void 0===u?void 0:u.split(".")[(null===e||void 0===e||null===(p=e.uploadedDoc)||void 0===p||null===(m=p.docPath)||void 0===m||null===(x=m.split("."))||void 0===x?void 0:x.length)-1])&&(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)("img",{src:"".concat(N,"/").concat(null===e||void 0===e||null===(h=e.uploadedDoc)||void 0===h?void 0:h.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"jpeg"==(null===e||void 0===e||null===(g=e.uploadedDoc)||void 0===g||null===(j=g.docPath)||void 0===j?void 0:j.split(".")[(null===e||void 0===e||null===(b=e.uploadedDoc)||void 0===b||null===(w=b.docPath)||void 0===w||null===(y=w.split("."))||void 0===y?void 0:y.length)-1])&&(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)("img",{src:"".concat(N,"/").concat(null===e||void 0===e||null===(D=e.uploadedDoc)||void 0===D?void 0:D.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"png"==(null===e||void 0===e||null===(S=e.uploadedDoc)||void 0===S||null===(Z=S.docPath)||void 0===Z?void 0:Z.split(".")[(null===e||void 0===e||null===(C=e.uploadedDoc)||void 0===C||null===(k=C.docPath)||void 0===k||null===(U=k.split("."))||void 0===U?void 0:U.length)-1])&&(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)("img",{src:"".concat(N,"/").concat(null===e||void 0===e||null===(F=e.uploadedDoc)||void 0===F?void 0:F.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),(0,f.jsx)("td",{className:"py-3 px-6 text-center font-semibold",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,f.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{className:"whitespace-no-wrap",children:0==(null===e||void 0===e||null===(_=e.uploadedDoc)||void 0===_?void 0:_.verifyStatus)&&(0,f.jsx)(f.Fragment,{children:"Pending"})}),(0,f.jsx)("p",{className:"text-green-500 whitespace-no-wrap",children:1==(null===e||void 0===e||null===(I=e.uploadedDoc)||void 0===I?void 0:I.verifyStatus)&&(0,f.jsx)(f.Fragment,{children:"Verified"})}),(0,f.jsx)("p",{className:"text-red-500 whitespace-no-wrap",children:2==(null===e||void 0===e||null===(O=e.uploadedDoc)||void 0===O?void 0:O.verifyStatus)&&(0,f.jsx)(f.Fragment,{children:"Rejected"})})]})}),(0,f.jsx)("td",{className:"py-3 px-6 text-center",children:""==(null===e||void 0===e||null===(P=e.uploadedDoc)||void 0===P?void 0:P.remarks)||null==(null===e||void 0===e||null===(A=e.uploadedDoc)||void 0===A?void 0:A.remarks)?(0,f.jsx)("i",{className:"font-semibold",children:"N/A"}):null===e||void 0===e||null===(R=e.uploadedDoc)||void 0===R?void 0:R.remarks}),(0,f.jsxs)("td",{className:"py-3 px-6 text-center",children:[(null===e||void 0===e?void 0:e.docName)==xe&&1==je&&(0,f.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return eo(De(!ye))},children:(0,f.jsx)("img",{src:ue,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(null===e||void 0===e?void 0:e.docName)==xe&&0==je&&(0,f.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return eo(De(!ye))},children:(0,f.jsx)("div",{className:"text-[40px] text-center",children:(0,f.jsx)(v.NFo,{})})})]}),(0,f.jsx)("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:(0,f.jsx)("div",{className:"font-semibold text-sm",children:1!=(null===e||void 0===e||null===(V=e.uploadedDoc)||void 0===V?void 0:V.verifyStatus)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"",children:(0,f.jsx)("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:null===e||void 0===e?void 0:e.docName,onChange:Xe,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(1!=(null===e||void 0===e||null===(H=e.uploadedDoc)||void 0===H?void 0:H.verify_status)||""==(null===e||void 0===e?void 0:e.uploadedDoc))&&(0,f.jsx)("div",{className:"mt-2",children:!T&&(0,f.jsx)("button",{onClick:function(){return $e(null===e||void 0===e?void 0:e.docName)},type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})}))})]})})]})})]})]})}}}]);
//# sourceMappingURL=9773.c58c8bdc.chunk.js.map