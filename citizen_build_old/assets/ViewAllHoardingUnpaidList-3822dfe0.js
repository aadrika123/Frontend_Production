import{j as e}from"./mui-4460ff05.js";import{a as ne,r as a,u as le}from"./router-50323722.js";import{M as $}from"./index-815ff015.js";import{H as re}from"./HoardingApplicationFullDetail-4ab9276a.js";import{A as H,Q as j}from"./index-c4f87eb1.js";import{R as de}from"./RazorpayPaymentScreen-2d7c9eb7.js";import{A as z,a as G}from"./ReuploadDocumentModal-10ba08f4.js";import"./index-d6345b9f.js";import{B as ce}from"./BrandLoader-367eb690.js";import{C as me}from"./CommonModal-342458a8.js";import{S as xe}from"./ServerErrorCard-4f9fc526.js";import{A as pe}from"./ApiHeader-9c14b40d.js";import{A as he}from"./AdvtListTablePagination-67176dd8.js";import"./react-0598ffc9.js";import"./ProjectApiList-b5d41cfc.js";import"./BackendUrl-b545fbc2.js";import"./axios-67d8a945.js";import"./redux-834dcbe1.js";import"./i18next-e2c66b9b.js";import"./CitizenApplyApiList-f5f1cc72.js";import"./WaterApiList-6983e50b.js";import"./PowerupFunctions-7e05340f.js";import"./index-8de4e435.js";import"./Blocks-8ec1637c.js";import"./formik.esm-f4395bd1.js";import"./materialTailwind-f50bdae0.js";/* empty css                  */import"./DynamicData-617a6512.js";import"./useTranslation-163bd7aa.js";import"./index.esm-8fdb71bc.js";import"./reactIcons-708042c8.js";import"./react-tooltip.min-f1b4d991.js";const ge={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};function ue(t){var p,P,h,r,g,u;const[N,d]=ne.useState(!1),{api_getHoardingOrderIdForPayment:y}=G(),[_,b]=a.useState(),c=le();a.useEffect(()=>{t.openPaymentModal>0&&d(!0)},[t.openPaymentModal]);function w(){}function S(){d(!1)}const m=(o,s)=>{j.dismiss(),s=="success"&&j.success(o),s=="error"&&j.error(o)},A=o=>{var s;(o==null?void 0:o.status)==!0?(c(`/paymentScreen/${o.data.razorpay_payment_id}/${(s=t==null?void 0:t.applicationDetails)==null?void 0:s.workflow_id}`),m("Payment Successfull","success")):(j.error("Payment failed...."),m("Payment Failed","error"),c("/advertDashboard"))},x=o=>{const I={id:o.target.id};H.post(`${y}`,I,z()).then(function(n){n.data.status==!0&&de(n.data.data,A),b(n)}).catch(function(n){alert("Backend Server error. Unable to Generate Order Id")})};return e.jsx("div",{className:"",children:e.jsx($,{isOpen:N,onAfterOpen:w,onRequestClose:S,style:ge,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",e.jsxs("span",{className:"font-bold text-md ml-4 uppercase ",children:[(p=t==null?void 0:t.applicationDetails)==null?void 0:p.type," "]})]}),e.jsxs("div",{className:"md:flex block w-full h-56",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("p",{children:"Application No. -"}),e.jsx("p",{children:"Applied date -"})]}),e.jsxs("div",{className:"col-span-6 text-gray-500 font-bold",children:[e.jsxs("p",{children:[(P=t==null?void 0:t.applicationDetails)==null?void 0:P.application_no," "]}),e.jsx("p",{children:(h=t==null?void 0:t.applicationDetails)==null?void 0:h.application_date})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("p",{children:"Approve Date -"})}),e.jsx("div",{className:"col-span-6 text-gray-500 font-bold",children:e.jsxs("p",{children:[(r=t==null?void 0:t.applicationDetails)==null?void 0:r.approve_date,"  "]})})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:(g=t==null?void 0:t.applicationDetails)==null?void 0:g.payment_amount})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("button",{onClick:S,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:x,id:(u=t==null?void 0:t.applicationDetails)==null?void 0:u.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:""})})]})]})})})})}function Ke(){const[t,N]=a.useState(),[d,y]=a.useState(),{api_getHoardingUnpaidApplicationList:_,api_getHoardingApplicationDetailForPayment:b}=G();a.useState([]);const[c,w]=a.useState(),[S,m]=a.useState(!1),[A,x]=a.useState(!1),[p,P]=a.useState(!1),h=()=>x(!0),r=()=>x(!1),g=()=>{},[u,o]=a.useState(0);a.useState(!1);const[s,I]=a.useState(!1),[n,k]=a.useState(!1),[Q,D]=a.useState(!1),[J,K]=a.useState(0),[M,W]=a.useState(1),[X,F]=a.useState(0),[C,Y]=a.useState(10),[L,Z]=a.useState(""),[ee,R]=a.useState(!1),te=[{Header:"#",Cell:({row:i})=>e.jsx("div",{className:"pr-2",children:i.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:({cell:i})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ae(i.row.values.id,"Approve"),className:`bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                    hover:text-white text-white`,children:"View"}),e.jsx("button",{onClick:()=>se(i.row.values.id),className:`bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                 hover:text-white text-white`,children:"Pay"})]})}],ae=(i,f)=>{y(i),N(f),h()},se=i=>{const O={applicationId:i};H.post(`${b}`,O,z()).then(function(l){w(l.data.data),o(v=>v+1)}).catch(function(l){})};a.useEffect(()=>{E(M,C,L)},[M,L,C]);const E=(i,f,O="")=>{R(!0),D(!0),H.post(_,{page:i,perPage:f,key:O},pe()).then(l=>{var v,T,U,B,V,q;I((T=(v=l.data)==null?void 0:v.data)==null?void 0:T.data),k(!0),D(!1),K((B=(U=l.data)==null?void 0:U.data)==null?void 0:B.total),F((q=(V=l.data)==null?void 0:V.data)==null?void 0:q.last_page)}).catch(l=>{k(!1),D(!1)}),setTimeout(()=>{R(!1)},[500])},ie={totalDataCount:J,currentPageIndex:M,setcurrentPageIndex:W,pageLength:C,setpageLength:Y,lastPageIndex:X,setlastPageIndex:F,fetchInboxList:E,searchValue:L,setsearchValue:Z,refreshStatus:ee},oe=i=>{m(i)};return Q?e.jsx(e.Fragment,{children:e.jsx(ce,{})}):p?e.jsx(me,{children:e.jsx(xe,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:e.jsxs("div",{children:[e.jsx(ue,{openPaymentModal:u,applicationDetails:c}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[n&&(s==null?void 0:s.length)!=0&&e.jsx(he,{columns:te,dataList:s,values:ie}),n&&(s==null?void 0:s.length)==0&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx($,{isOpen:A,onAfterOpen:g,onRequestClose:r,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(re,{data:d,applicationType:t,showLoader:oe,closeModal:r})})})})})]})})})}export{Ke as default};
