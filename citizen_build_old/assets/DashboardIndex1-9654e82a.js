import{j as t,I as M}from"./mui-8bd1858b.js";import{r as i,u as he}from"./router-56e993c5.js";import{aT as He,M as ue,B as ge,aU as De,aV as Ee,U as Ce,aW as We,A as p,b as I,h as Ge,E as Me}from"./index-2b92fb77.js";import"./sweetalert2.esm.all-93f49e75.js";/* empty css              */import{w as de,t as Ve,a as Ue,s as ze,b as Fe,p as Be}from"./septic-92c6194c.js";import{m as Le,b as qe}from"./marriage-98e794b9.js";import{l as $e}from"./lodge-40c4a41c.js";import{a as xe}from"./redux-a3f69129.js";import{a as Je}from"./index.esm-79e01f48.js";import{u as Ye}from"./useSetLogout-86ccdb95.js";import{l as Ke}from"./localstorage-fbfe5679.js";import{P as Qe}from"./PetRegAPIList-ce2ed8c2.js";import"./axios-ab7cc016.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-f9ac8de7.js";import"./moment-a9aaa855.js";/* empty css                */import"./i18next-2edfafb0.js";const Xe="/assets/rigmachine-fbcb41f9.jpeg",Ze="/assets/grievancelogo-44b8f316.svg",ie="/assets/property-fbb4f386.png",et="/assets/finesimg-e530d190.jpg",me="/assets/swm-1b451a03.png";function tt(n){i.useState(!1);const g=()=>{n.navCloseStatus||(n.NAV_CLOSE(),n.NAV_CLOSE_ORIGINAL_STATUS()),n.navCloseStatus&&(n.NAV_OPEN(),n.NAV_OPEN_ORIGINAL_STATUS())};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full",children:[t.jsx("div",{className:"cursor-pointer bg-gray-100 p-2 rounded-lg",onClick:g,children:t.jsx(He,{color:"black",size:16})}),t.jsx("div",{className:"col-span-10",children:t.jsx("h4",{className:"text-white font-bold text-sm text-xl text-center",children:"JUIDCO"})})]})})}const at=n=>({navCloseStatus:n.navCloseStatus}),st=n=>({NAV_OPEN:g=>n({type:"NAV_OPEN"}),NAV_CLOSE:g=>n({type:"NAV_CLOSE"}),NAV_OPEN_ORIGINAL_STATUS:g=>n({type:"NAV_OPEN_ORIGINAL_STATUS"}),NAV_CLOSE_ORIGINAL_STATUS:g=>n({type:"NAV_CLOSE_ORIGINAL_STATUS"})});xe(at,st)(tt);const lt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};ue.setAppElement("#root");function rt(n){const[g,A]=i.useState(!1),[V,T]=i.useState(!0),[R,P]=i.useState(!1);setTimeout(()=>{T(!1)},1e4);function H(){A(!0)}function k(){A(!1)}const U=he(),D=()=>{!n.RightNavCloseStatus&&n.RIGHT_NAV_CLOSE(),n.RightNavCloseStatus&&n.RIGHT_NAV_OPEN()},z=()=>{P(!1),Ke(),n.LOGOUT(),U("/")},E=()=>{Ye(z)};return t.jsxs(t.Fragment,{children:[R&&t.jsx(ge,{}),t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full pr-12",children:[t.jsx("div",{className:"cursor-pointer",children:t.jsx("div",{onClick:H,className:"bg-gray-100 p-2 rounded-lg relative",children:t.jsx(De,{color:"black",size:16})})}),t.jsx("div",{className:"cursor-pointer",onClick:D,children:t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg ml-16",children:t.jsx(Ee,{color:"black",size:16})})})]}),t.jsx(ue,{isOpen:g,onRequestClose:k,style:lt,contentLabel:"Example Modal",children:t.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[t.jsx("button",{onClick:k,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:t.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:t.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),t.jsxs("div",{class:"p-6 text-center",children:[t.jsxs("div",{className:"w-full flex h-10",children:[" ",t.jsx("span",{className:"mx-auto",children:t.jsx(Je,{size:30})})]}),t.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you want to logout ?"}),t.jsx("button",{type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:E,children:"Yes, I'm sure"})]})]})})]})}const ot=n=>({RightNavCloseStatus:n.RightNavCloseStatus,isLoggedIn:n.isLoggedIn}),nt=n=>({RIGHT_NAV_OPEN:g=>n({type:"RIGHT_NAV_OPEN"}),LOGOUT:g=>n({type:"LOGOUT"}),RIGHT_NAV_CLOSE:g=>n({type:"RIGHT_NAV_CLOSE"})});xe(ot,nt)(rt);const kt=()=>{var L,q,$,J,Y,K,Q,X,Z;const n=he(),{post_citizenDashboard:g,api_getProfileDetails:A,api_applicationCount:V,api_allModulePayment:T,generateDashboardOrderId:R,generateDashboardReceipt:P}=Me(),{header:H}=Qe(),{handlePayment:k}=Ce(),[U,D]=i.useState([]),[z,E]=i.useState(null),[l,fe]=i.useState([]),[a,be]=i.useState([]),[Ne,c]=i.useState(!1),[je,w]=i.useState(0),[F,ye]=i.useState(!1),[y,C]=i.useState([]),[_,W]=i.useState([]),[pe,ct]=i.useState([]),[v,G]=i.useState([]),[dt,B]=i.useState(),we=()=>{c(!0),p.post(g,{},I()).then(e=>{var o,r,d;(o=e==null?void 0:e.data)!=null&&o.status&&(D((d=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:d.property),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},_e=()=>{c(!0),p.post(T,{},I()).then(e=>{var o,r,d;console.log((o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(be((d=e==null?void 0:e.data)==null?void 0:d.data),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},ve=()=>{c(!0),p.post(A,{},I()).then(e=>{var o,r;(o=e==null?void 0:e.data)!=null&&o.status&&E((r=e==null?void 0:e.data)==null?void 0:r.data),c(!1),console.log("Getting Citizen details",e)}).catch(e=>console.error(e)),c(!1)},Se=()=>{c(!0),p.post(V,{},I()).then(function(e){var o,r,d;console.log("fetched application count...",(o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(fe((d=e==null?void 0:e.data)==null?void 0:d.data),c(!1)),c(!1)}).catch(function(e){console.log("notification error......",e),c(!1)})};i.useEffect(()=>{we(),ve(),Se(),_e()},[]);let S=[{navigation:"/propertyDashboard",image:ie,total:(l==null?void 0:l.propDetails)??0,name:"Property",isHref:!1},{navigation:"/water-dashboard",image:de,total:(l==null?void 0:l.waterDetails)??0,name:"Water Connection(s)",isHref:!1},{navigation:"/trade-dashboard",image:Ve,total:(l==null?void 0:l.tradeDetails)??0,name:"Trade License(s)",isHref:!1},{navigation:"/swm-dashboard",image:me,total:(l==null?void 0:l.swmDetails)??0,name:"SWM",isHref:!1},{navigation:"/fines",image:et,total:(l==null?void 0:l.finesDetails)??0,name:"Fines & Penalties",isHref:!1},{navigation:"/advertisement-dashboard",image:Ue,total:(l==null?void 0:l.advertisementDetails)??0,name:"Advertisement",isHref:!1},{name:"Lodge & Banquet Registration",navigation:"/marketingDashboard",image:$e,total:(l==null?void 0:l.lodgeBanquetDetails)??0,isHref:!1},{navigation:"/marriage-index",image:Le,total:(l==null?void 0:l.marriageDetails)??0,name:"Marriage Registration",isHref:!1},{navigation:"/septicTankDashboard",image:ze,total:(l==null?void 0:l.septicTankerDetails)??0,name:"Septic Tank",isHref:!1},{navigation:"/waterTankerDashboard",image:Fe,total:(l==null?void 0:l.waterTankerDetails)??0,name:"Water Tank",isHref:!1},{navigation:"/pet-registration-dashboard",image:Be,total:(l==null?void 0:l.petDetails)??0,name:"Pet Registration",isHref:!1},{navigation:"/vehicle-registration-dashboard",image:Xe,total:(l==null?void 0:l.rigDetails)??0,name:"Rig Registration",isHref:!1},{navigation:`${window.location.origin}/grievance/citizen-dashboard/home`,image:Ze,total:(l==null?void 0:l.grievanceDetails)??0,name:"Grievance",isHref:!0}];console.log("module data===>",l);const O=(e,o,r)=>{const d=e.reduce((f,h)=>{var x;const u=(x=a==null?void 0:a.propDetails)==null?void 0:x.find(N=>N.id===h),b=parseFloat(u==null?void 0:u.total_demand_amount)||0;return f+b},0),m=o.reduce((f,h)=>{var x;const u=(x=a==null?void 0:a.waterDetails)==null?void 0:x.find(N=>N.id===h),b=parseFloat(u==null?void 0:u.total_demand_amount)||0;return f+b},0),s=r.reduce((f,h)=>{var x;const u=(x=a==null?void 0:a.swmDetails)==null?void 0:x.find(N=>N.id===h),b=parseFloat(u==null?void 0:u.total_demand_amount)||0;return f+b},0),j=d+m+s;return Number(j).toFixed(2)},Ie=()=>{var o,r,d;const e=!F;if(ye(e),e){const m=((o=a==null?void 0:a.propDetails)==null?void 0:o.map(h=>h.id))||[],s=((r=a==null?void 0:a.waterDetails)==null?void 0:r.map(h=>h.id))||[],j=((d=a==null?void 0:a.swmDetails)==null?void 0:d.map(h=>h.id))||[];C(m),W(s),G(j);const f=O(m,s,j);w(f)}else C([]),W([]),G([]),w("0.00")},Ae=e=>{C(o=>{const r=o.includes(e)?o.filter(m=>m!==e):[...o,e],d=O(r,_,v);return w(d),r})},Pe=e=>{W(o=>{const r=o.includes(e)?o.filter(m=>m!==e):[...o,e],d=O(y,r,v);return w(d),r})},ke=e=>{G(o=>{const r=o.includes(e)?o.filter(m=>m!==e):[...o,e],d=O(y,_,r);return w(d),r})},Oe=()=>{var r,d,m;(r=(a==null?void 0:a.propDetails)||[])==null||r.filter(s=>y.includes(s.id));const e=(d=(a==null?void 0:a.waterDetails)||[])==null?void 0:d.filter(s=>_.includes(s.id)),o=(m=(a==null?void 0:a.swmDetails)||[])==null?void 0:m.filter(s=>v.includes(s.id));Te(e,o)},Te=(e,o=[])=>{c(!0);const r=e.map(s=>({consumerId:s.id,amount:s.total_demand_amount,paymentMode:"Online",demandFrom:s.demand_from,demandUpto:s.demand_upto,remarks:"Ok"})),d=o.map(s=>({consumerId:s.id,amount:s.total_demand_amount,paymentMode:"Online",demandFrom:s.demand_from,demandUpto:s.demand_upto,remarks:"Ok"}));let m={propId:y,consumerDetails:r,swmDetails:d};console.log(m),p.post(R,m,I()).then(function(s){var j,f,h,u,b,x,N,ee,te,ae,se,le,re,oe,ne,ce;console.log("fetched application count...",s),(j=s==null?void 0:s.data)!=null&&j.status?(c(!1),window.ReactNativeWebView?Ge({generatedOrder:(f=s==null?void 0:s.data)==null?void 0:f.data,payload:{applicationId:(u=(h=s==null?void 0:s.data)==null?void 0:h.data)==null?void 0:u.applicationId,departmentId:(x=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:x.departmentId,status:"",captured:"1",card_id:"",amount:(ee=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:ee.amount,payment_method:"upi/netbanking",workflow_id:(ae=(te=s==null?void 0:s.data)==null?void 0:te.data)==null?void 0:ae.workflowId,user_id:(le=(se=s==null?void 0:s.data)==null?void 0:se.data)==null?void 0:le.userId,ulb_id:(oe=(re=s==null?void 0:s.data)==null?void 0:re.data)==null?void 0:oe.ulbId,created_at:""},api:P,returnUrl:"/citizen/dashboardPaymentHistory",isParam:!0}):(k((ne=s==null?void 0:s.data)==null?void 0:ne.data,Re),c(!1),console.log((ce=s==null?void 0:s.data)==null?void 0:ce.data))):c(!1)}).catch(function(s){console.log("notification error......",s),c(!1)})},Re=async e=>{console.log(e,"generateReceipt"),c(!0);let o={applicationId:e==null?void 0:e.applicationId,departmentId:e==null?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:e==null?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:e==null?void 0:e.workflowId,user_id:e==null?void 0:e.user_id,ulb_id:e==null?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:e==null?void 0:e.orderId,payment_id:e==null?void 0:e.razorpay_payment_id,created_at:""};console.log("Receipt",e),p.post(P,o,H).then(r=>{console.log("genereted receipt",r),B(!1),r.data.status==!0?(console.log("Oder ID Generated +++++++++",r.data),n("/dashboardPaymentHistory"),c(!1)):(notify(r.data.message,"error"),c(!1))}).catch(r=>{B(!1),console.log("Error genrating order id",r),notify(r.message,"error"),c(!1)})};return t.jsxs(t.Fragment,{children:[Ne&&t.jsx(ge,{}),t.jsxs("div",{className:"grid grid-cols-12 h-screen bg-white mx-4 md:mx-0 mb-4",children:[t.jsxs("div",{className:" md:ml-11 mt-12 col-span-12 md:col-span-8 order-last md:order-first",children:[t.jsx("h1",{className:"text-2xl font-semibold max-sm:text-center",children:"All E-Governance Services"}),t.jsxs("div",{className:"flex flex-wrap gap-x-[4rem] gap-y-3 mt-10 bg-white  max-sm:justify-center max-sm:mb-20",children:[console.log("Line 170",S),Array.isArray(S)&&(S==null?void 0:S.map(e=>t.jsx("div",{onClick:()=>{e.isHref?window.location.href=e.navigation:n(e==null?void 0:e.navigation)},className:"md:w-40 h-26 bg-white rounded-lg shadow-sm max-sm:w-full cursor-pointer",children:t.jsx("div",{className:"md:w-52 max-sm:w-full h-28 bg-white rounded-lg shadow-xl pl-2",children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-3 ",children:[t.jsx("div",{className:"w-10 h-10 rounded-full m-2 flex justify-center items-center",children:t.jsx("img",{src:e.image,alt:"",className:"w-8 h-8 rounded-full"})}),t.jsx("div",{className:"w-10 h-10 rounded-full mt-4 font-semibold flex justify-center items-center",children:(e==null?void 0:e.total)??0})]}),t.jsx("div",{className:"col-span-9 ml-4 ",children:t.jsx("h1",{className:"font-semibold text-sm mt-1 cursor-pointer",children:e==null?void 0:e.name})})]})})},e.id))),t.jsx("div",{className:"w-52 h-28shadow-xl pl-2",children:t.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:t.jsxs("span",{className:"hover:bg-gray-200 p-6 rounded-full cursor-pointer",onClick:()=>n("/propertyDashboard"),children:[" ",t.jsx(We,{className:"text-3xl"})]})})})]})]}),t.jsxs("div",{className:"col-span-12 md:col-span-4 order-1 md:order-last pr-10 pt-5 ml-[2rem]",children:[t.jsx("div",{className:"flex justify-center items-center w-full mt-10 font-semibold text-xl",children:t.jsxs("div",{className:"w-full bg-white shadow-lg rounded-md px-4 py-2",children:[t.jsxs("div",{className:"bg-blue-500 px-4 py-2 rounded-lg text-white flex items-center justify-center space-x-2",children:[t.jsx("img",{src:qe,alt:"Bell Icon",className:"w-6 h-6"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Pending Demands"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:ie,alt:"Property Icon",className:"w-6 h-6 mr-2"}),"Property"]}),(((L=a==null?void 0:a.propDetails)==null?void 0:L.length)>0||((q=a==null?void 0:a.waterDetails)==null?void 0:q.length)>0||(($=a==null?void 0:a.swmDetails)==null?void 0:$.length)>0)&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"selectAll",className:"font-semibold mr-2 text-lg",children:"Select All"}),t.jsx("input",{type:"checkbox",id:"selectAll",checked:F,onChange:Ie,className:"w-6 h-4"})]})]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 font-semibold ",children:"Holding No."}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((J=a==null?void 0:a.propDetails)==null?void 0:J.length)>0?(Y=a==null?void 0:a.propDetails)==null?void 0:Y.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.holding_no}),t.jsxs("td",{className:"border border-gray-500 ",children:["₹",e==null?void 0:e.total_demand_amount]}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>Ae(e.id,e.total_demand_amount)})})]},e.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(M,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:de,alt:"Water Icon",className:"w-6 h-6 mr-2"}),"Water"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((K=a==null?void 0:a.waterDetails)==null?void 0:K.length)>0?t.jsx(t.Fragment,{children:(Q=a==null?void 0:a.waterDetails)==null?void 0:Q.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.consumer_no}),t.jsxs("td",{className:"border border-gray-500 ",children:["₹",e==null?void 0:e.total_demand_amount]}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:_.includes(e.id)||pe.includes(e),onChange:()=>Pe(e.id,e.total_demand_amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(M,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:me,alt:"SWM Icon",className:"w-6 h-6 mr-2"}),"SWM"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center ",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 font-semibold",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((X=a==null?void 0:a.swmDetails)==null?void 0:X.length)>0?t.jsx(t.Fragment,{children:(Z=a==null?void 0:a.swmDetails)==null?void 0:Z.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e.consumer_no}),t.jsxs("td",{className:"border border-gray-500 ",children:["₹",e.total_demand_amount]}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:v.includes(e.id),onChange:()=>ke(e.id,e.total_demand_amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(M,{})," No Pending Dues"]})})})]})]}),(y.length>0||_.length>0||v.length>0)&&t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-lg flex-1",children:["Total Amount : ₹",je]}),t.jsx("button",{onClick:Oe,className:"bg-green-500 text-white px-4 py-1 rounded-lg shadow-sm border-2 border-green-600 hover:bg-green-600 ",children:"Pay Now"})]})]})}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx("button",{onClick:()=>n("/dashboardPaymentHistory"),className:"bg-blue-500 px-3 py-1.5 rounded-md text-white text-sm font-medium shadow-md hover:bg-blue-600 active:bg-blue-700 transition duration-200",children:"Payment History"})})]})]})]})};export{kt as default};
