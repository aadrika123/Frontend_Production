import{j as e}from"./mui-4460ff05.js";import{r,u as U}from"./router-50323722.js";import{M as W}from"./index-815ff015.js";import{n as h,c as v}from"./PowerupFunctions-7e05340f.js";import{u as $}from"./formik.esm-f4395bd1.js";import{c as G,a as p}from"./object-28c7a28e.js";import{C as I}from"./CitizenApplyApiList-f5f1cc72.js";/* empty css                  */import{a as S}from"./axios-67d8a945.js";import{c as J}from"./index-c4f87eb1.js";import{A as C}from"./ApiHeader-9c14b40d.js";import"./CommonModal-342458a8.js";import{B as K}from"./BottomErrorCard-32b13a05.js";import{L as Q}from"./ListTable-d8f8e5e6.js";import"./react-0598ffc9.js";import"./index-8de4e435.js";import"./BackendUrl-b545fbc2.js";import"./redux-834dcbe1.js";import"./i18next-e2c66b9b.js";import"./index-d6345b9f.js";import"./index.esm-8fdb71bc.js";import"./reactIcons-708042c8.js";W.setAppElement("#root");function vt(o){r.useState(!0);const[f,u]=r.useState(!1),[b,m]=r.useState(!1),[_,X]=r.useState(""),{api_sendMobileOtpAttachment:E,api_verifyHolding:Y,api_filterPropertyDetails:H}=I(),{notify:L}=r.useContext(J);U();const[M,w]=r.useState(!1),[A,F]=r.useState(null),[P,T]=r.useState(""),[Z,k]=r.useState(""),[x,B]=r.useState([]),V=G({ptn:p(),holdingNo:p()}),n=$({initialValues:{ptn:"",holdingNo:""},onSubmit:a=>{},validationSchema:V}),O=a=>{let i=a.target.name,t=a.target.value;i=="ptn"?(n.setFieldValue("holdingNo",""),o==null||o.setholdingNo("")):(n.setFieldValue("ptn",""),o==null||o.setptnNo("")),i=="ptn"&&n.setFieldValue("ptn",t),i=="holdingNo"&&n.setFieldValue("holdingNo",t),i=="ptn"&&t.length>=14||i=="holdingNo"&&t.length>=14?m(!0):m(!1)},z=a=>{w(!1),u(!0),m(!1);let i;a.ptn.length==0?i={holdingNo:a.holdingNo}:i={ptNo:a.ptn},S.post(E,i,C()).then(t=>{var l,s,d,c;(l=t==null?void 0:t.data)!=null&&l.status?(o==null||o.setpropertyAttachedMobileNo((d=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:d.mobileNo),o==null||o.setptnCardStatus(!1),o==null||o.setotpCardStatus(!0)):g(!0,v((c=t==null?void 0:t.data)==null?void 0:c.message)),u(!1)}).catch(t=>{L("Something went wrong in attachment...","error"),u(!1),g(!0,"Error occured. Please try again later."),m(!0)})},g=(a,i)=>{F(i),w(a)},D=(a,i,t)=>{if(n.values.holdingNo==""&&n.values.ptn==""){g(!0,"Enter holding or pt no.");return}T(""),u(!0),m(!1),i?o==null||o.setholdingNo(i):o==null||o.setptnNo(a),z(n.values)},q=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"owner_name"},{Header:"PT No.",accessor:"pt_no",Cell:({cell:a})=>e.jsx("span",{children:h(a.row.original.pt_no)})},{Header:"Holding No",accessor:"new_holding_no",Cell:({cell:a})=>e.jsx("span",{children:h(a.row.original.new_holding_no)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:a})=>e.jsx("span",{children:h(a.row.original.mobile_no)})},{Header:"Action",accessor:"id",Cell:({cell:a})=>e.jsx("button",{onClick:()=>{var i,t,l,s,d,c;return D((t=(i=a==null?void 0:a.row)==null?void 0:i.original)==null?void 0:t.pt_no,(s=(l=a==null?void 0:a.row)==null?void 0:l.original)==null?void 0:s.new_holding_no,(c=(d=a==null?void 0:a.row)==null?void 0:d.original)==null?void 0:c.ulb_id)},className:"bg-indigo-500 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-indigo-700 text-white",children:"Attach"})}],R=()=>{var i;let a;(i=Object.entries(n==null?void 0:n.values))==null||i.map(([t,l],s)=>{l!=""&&(a={filteredBy:t,parameter:l,isLegacy:!1,page:1,perPage:100},k(t))}),u(!0),S.post(H,a,C()).then(t=>{var l,s,d,c,y,N,j;(l=t==null?void 0:t.data)!=null&&l.status?(B((d=(s=t==null?void 0:t.data)==null?void 0:s.data)==null?void 0:d.data),((N=(y=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:y.data)==null?void 0:N.length)==0&&g(!0,"No Data Found !!!")):g(!0,v((j=t==null?void 0:t.data)==null?void 0:j.message))}).catch(t=>{}).finally(()=>u(!1))};return e.jsxs(e.Fragment,{children:[M&&e.jsx(K,{activateBottomErrorCard:g,errorTitle:A}),e.jsx("div",{class:"w-full sm:w-full  mx-auto",children:e.jsx("div",{class:"container mx-auto",children:e.jsxs("div",{class:"mx-auto flex flex-wrap gap-4 justify-center items-center",children:[e.jsx("div",{class:"w-max bg-white rounded text-center shadow-xl relative py-10 px-8",children:e.jsxs("div",{class:"",children:[e.jsx("button",{onClick:()=>o==null?void 0:o.closeModal(!1),type:"button",class:"absolute top-6 right-6 bg-transparent bg-gray-200 text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center shadow-sm  hover:bg-red-200 hover:border-none",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsx("div",{class:"text-2xl font-bold px-10",children:"Enter Holding or PT no."}),e.jsx("div",{class:"flex flex-col mt-4 text-center",children:e.jsxs("span",{className:"text-center",children:["Enter 14 digit PTN no, or Holding no.",e.jsx("br",{}),"to attach a property"]})}),e.jsx("div",{class:"flex flex-col mt-4 text-center",children:e.jsx("span",{className:"text-center text-red-400",children:P})}),e.jsx("div",{class:"flex flex-row justify-center text-center mt-5",children:e.jsxs("form",{onSubmit:n.handleSubmit,onChange:O,children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold w-full text-left",children:"PTN"}),e.jsx("input",{type:"text",...n.getFieldProps("ptn"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"})]}),e.jsx("div",{className:"font-semibold text-indigo-500 mt-2",children:"Or"}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold w-full text-left",children:"Holding No."}),e.jsx("input",{type:"text",...n.getFieldProps("holdingNo"),className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"})]}),e.jsx("div",{className:"text-red-500 mt-10",children:_}),e.jsxs("div",{class:"w-full text-center",children:[b&&e.jsx("button",{type:"button",onClick:R,disabled:f,className:"w-full  py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:f?"Fetching...":"Submit"}),!b&&e.jsx("button",{type:"button",className:"w-full  py-2.5 bg-gray-400 text-white font-medium text-xs leading-tight  rounded shadow-md  hover:shadow-lg  focus:shadow-lg focus:outline-none focus:ring-0  transition duration-150 ease-in-out cursor-default ",children:"Submit"})]})]})})]})}),(x==null?void 0:x.length)>0&&e.jsx("div",{class:"bg-white py-10 px-8 rounded text-center shadow-xl relative md:w-auto w-[97vw]",children:e.jsx(Q,{dataList:x,columns:q})})]})})})]})}export{vt as default};
