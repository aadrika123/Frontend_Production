import{j as l}from"./mui-376c770d.js";import{r as i}from"./router-87042356.js";import{l as $,c as oe,d as t,u as te,A as x,B as ie,i as j}from"./index-abe80df2.js";import{F as ne}from"./PetAccordionPage-57b0ed98.js";import{W as ce}from"./WaterApiList-e78e4288.js";import{P as de}from"./PetRegAPIList-e97990f3.js";import"./react-09dd1212.js";import"./axios-97164839.js";import"./reactIcons-6a3b6da1.js";import"./redux-f5c77cc0.js";import"./i18next-e99b4042.js";const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},pe=N=>{var C,E,V,K;const[h,v]=i.useState(),[L,f]=i.useState(),[n,z]=i.useState(),[w,P]=i.useState(!1),[W,A]=i.useState(!1),[T,S]=i.useState(!1),{notify:q}=i.useContext($),[F,Z]=i.useState(),[u,M]=i.useState(),[U,c]=i.useState(!1),{api_ulbList:H,header:g,api_wardList:Y}=ce(),{api_PetRegistrationApplyForm:J,api_PetRegistrationMaster:Q,api_ListOfSafHolding:X,api_getUserDetailsByHoldingSaf:ee,header1:le}=de(),re=oe({ulb:t().required("Kindly enter a value."),applicantName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Kindly enter a value."),applyThrough:t().required("Kindly enter a value."),holdingNo:t().required("Kindly enter a value."),categoryApplication:t().required("Kindly enter a value."),ward:t().required("Kindly enter a value."),mobileNo:t().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Kindly enter a value."),email:t().email().required("Kindly enter a value."),panNo:t().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Kindly enter a value."),petType:t().required("Kindly enter a value."),petName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),petGender:t().required("Kindly enter a value."),petBirthDate:t().required("Kindly enter a value."),breed:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),color:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorName:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),doctorRegNo:t().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Kindly enter a value."),dateOfRabies:t().required("Kindly enter a value."),dateOfLepVaccine:t().required("Kindly enter a value."),petFrom:t().required("Kindly enter a value.")}),a=te({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(r,s)=>{se(r)},validationSchema:re}),ae=r=>{let s=r.target.name,o=r.target.value;S(!1),s=="color"&&a.setFieldValue("color",j(o,a.values.color,20)),s=="doctorName"&&a.setFieldValue("doctorName",j(o,a.values.doctorName,20)),s=="breed"&&a.setFieldValue("breed",j(o,a.values.breed,20)),s=="petName"&&a.setFieldValue("petName",j(o,a.values.petName,20)),s=="doctorName"&&a.setFieldValue("doctorName",j(o,a.values.doctorName,20))},se=r=>{A(!0);const s={address:r==null?void 0:r.address,applyThrough:r==null?void 0:r.applyThrough,propertyNo:r==null?void 0:r.holdingNo,breed:r==null?void 0:r.breed,ownerCategory:r==null?void 0:r.categoryApplication,color:r==null?void 0:r.color,dateOfLepVaccine:r==null?void 0:r.dateOfLepVaccine,dateOfRabies:r==null?void 0:r.dateOfRabies,doctorName:r==null?void 0:r.doctorName,doctorRegNo:r==null?void 0:r.doctorRegNo,panNo:r==null?void 0:r.panNo,petBirthDate:r==null?void 0:r.petBirthDate,petFrom:r==null?void 0:r.petFrom,petGender:r==null?void 0:r.petGender,petName:r==null?void 0:r.petName,petType:r==null?void 0:r.petType,ulbId:r==null?void 0:r.ulb,ward:r==null?void 0:r.ward,applicantName:r==null?void 0:r.applicantName,mobileNo:r==null?void 0:r.mobileNo,email:r==null?void 0:r.email,panNo:r==null?void 0:r.panNo};console.log("complete payload",s),x.post(J,s,g).then(o=>{var d,p,m;A(!1),o.data.status?(console.log("Form applied successfully"),N.data(o.data.data),console.log("1",o.data.data),N.screen(2),q((d=o==null?void 0:o.data)==null?void 0:d.message,"success")):(q((p=o==null?void 0:o.data)==null?void 0:p.message,"error"),S((m=o==null?void 0:o.data)==null?void 0:m.message),console.log("Failed to apply pet registration"))}).catch(o=>{var d,p,m,b;S((p=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:p.error),q("Something Went wrong","error"),A(!1),console.log("Error while applying for pet registration..",(b=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:b.error)})};return i.useEffect(()=>{x.post(Q,{},le).then(r=>{r.data.status?(z(r.data.data),console.log("pet master data",r.data)):console.log("Error fetching pet master list")}).catch(r=>{console.log("Error while getting pet master list")})},[]),i.useEffect(()=>{x.get(H,g).then(r=>{r.data.status?(v(r.data.data),console.log("ULB List",r.data)):console.log("Error fetching ulb list")}).catch(r=>{console.log("Error while getting ulb list")})},[]),i.useEffect(()=>{c(!0),x.post(Y,{ulbId:a.values.ulb},g).then(r=>{c(!1),r.data.status?(f(r.data.data),console.log("Ward List",r.data)):console.log("Error fetching Ward list")}).catch(r=>{c(!1),console.log("Error while getting Ward list")})},[a.values.ulb]),i.useEffect(()=>{c(!0);let r;a.values.applyThrough==1&&(r="holding"),a.values.applyThrough==2&&(r="saf");const s={type:r,ulbId:a.values.ulb};x.post(X,s,g).then(o=>{c(!1),o.data.status?(Z(o.data.data),console.log("List of holding saf",o.data)):console.log("Error fetching saf holding")}).catch(o=>{c(!1),console.log("Error while getting saf holding")})},[a.values.ulb,a.values.applyThrough]),i.useEffect(()=>{c(!0);const r={connectionThrough:a.values.applyThrough,id:a.values.holdingNo,ulbId:a.values.ulb};x.post(ee,r,g).then(s=>{var o,d,p,m,b,_,R,B,D,k,I,G,y,O;c(!1),s.data.status?(M(s.data.data),console.log("User Details",s.data),a.setFieldValue("address",(d=(o=s==null?void 0:s.data)==null?void 0:o.data)==null?void 0:d.prop_address),a.setFieldValue("ward",(b=(m=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:m.wardDetails)==null?void 0:b.wardId),a.setFieldValue("applicantName",(B=(R=(_=s==null?void 0:s.data)==null?void 0:_.data)==null?void 0:R.owners[0])==null?void 0:B.ownerName),a.setFieldValue("mobileNo",(I=(k=(D=s==null?void 0:s.data)==null?void 0:D.data)==null?void 0:k.owners[0])==null?void 0:I.mobileNo),a.setFieldValue("email",(O=(y=(G=s==null?void 0:s.data)==null?void 0:G.data)==null?void 0:y.owners[0])==null?void 0:O.email)):console.log("Error fetching user Details")}).catch(s=>{c(!1),console.log("Error while getting user Details")})},[a.values.holdingNo,a.values.applyThrough]),console.log("formik.values.owner_type",a.values.categoryApplication),l.jsxs(l.Fragment,{children:[U&&l.jsx(ie,{}),l.jsxs("form",{onSubmit:a.handleSubmit,onChange:ae,children:[l.jsxs("div",{className:"overflow-y-auto ",children:[l.jsx("div",{className:"col-span-12 ml-2 my-2",children:l.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsxs("select",{...a.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[l.jsx("option",{value:"",children:"Select"}),h==null?void 0:h.map((r,s)=>l.jsx("option",{value:r.id,children:r.ulb_name},s))]}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ulb&&a.errors.ulb?a.errors.ulb:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsxs("select",{...a.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[l.jsx("option",{value:"",children:"Select"}),(C=n==null?void 0:n.registrationThrough)==null?void 0:C.map((r,s)=>l.jsx("option",{value:r.id,children:r.registration_through},s))]}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.applyThrough&&a.errors.applyThrough?a.errors.applyThrough:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsxs("select",{...a.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[l.jsx("option",{value:"",children:"Select"}),F&&(F==null?void 0:F.map((r,s)=>l.jsx("option",{value:(r==null?void 0:r.saf_no)||(r==null?void 0:r.new_holding_no),children:(r==null?void 0:r.saf_no)||(r==null?void 0:r.new_holding_no)},s)))]}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.holdingNo&&a.errors.holdingNo?a.errors.holdingNo:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsxs("select",{...a.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[l.jsx("option",{value:"",children:"Select"}),(n==null?void 0:n.ownertype)&&((E=n==null?void 0:n.ownertype)==null?void 0:E.map((r,s)=>s===0?l.jsx("option",{value:r.id,children:r.owner_type},s):s===1&&(u!=null&&u.tenanted)?l.jsx("option",{value:r.id,children:r.owner_type},s):null))]}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.categoryApplication&&a.errors.categoryApplication?a.errors.categoryApplication:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{type:"text",disabled:!0,...a.getFieldProps("ward"),value:(V=u==null?void 0:u.wardDetails)==null?void 0:V.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ward&&a.errors.ward?a.errors.ward:null})]})]}),l.jsx("div",{className:"col-span-12 ml-2 my-2",children:l.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),l.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.applicantName&&a.errors.applicantName?a.errors.applicantName:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.mobileNo&&a.errors.mobileNo?a.errors.mobileNo:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsx("label",{className:e==null?void 0:e.label,htmlFor:"email",children:"Email"}),l.jsx("input",{...a.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.email&&a.errors.email?a.errors.email:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.panNo&&a.errors.panNo?a.errors.panNo:null})]})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("textarea",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.address&&a.errors.address?a.errors.address:null})]})]}),l.jsx("div",{className:"col-span-12 ml-2 my-2",children:l.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Vehicle Details"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Driver",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petName&&a.errors.petName?a.errors.petName:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsxs("select",{...a.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[l.jsx("option",{value:"",children:"Select"}),(K=n==null?void 0:n.petGender)==null?void 0:K.map((r,s)=>l.jsx("option",{value:r.id,children:r.pet_gender},s))]}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petGender&&a.errors.petGender?a.errors.petGender:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petBirthDate&&a.errors.petBirthDate?a.errors.petBirthDate:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehComp",children:["Vehicle Company",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("vehComp"),maxLength:"50",type:"text",name:"vehComp",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"vehFrom",children:["Vehicle From",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("vehFrom"),maxLength:"50",type:"text",name:"vehFrom",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"Fitness",children:["Fitness",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("Fitness"),maxLength:"50",type:"file",name:"Fitness",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"taxCopy",children:["Tax Copy",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("taxCopy"),maxLength:"50",type:"file",name:"taxCopy",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]}),l.jsxs("div",{className:"m-3",children:[l.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"license",children:["License",l.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),l.jsx("input",{...a.getFieldProps("license"),maxLength:"50",type:"file",name:"license",className:e==null?void 0:e.textFiled}),l.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]})]})]}),l.jsxs("p",{className:"flex mt-3 gap-x-3",onClick:()=>P(!w),children:[l.jsx("input",{type:"checkbox",checked:w,name:"",id:"",onChange:r=>P(r.target.checked)}),l.jsx("p",{className:" select-none",children:"I have entered the correct information and agree to the terms and conditions."})]}),l.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:T&&T}),l.jsx("div",{className:"flex justify-center my-5 ",children:W?l.jsx("p",{children:"Form Submitting.."}):l.jsx("button",{type:"submit",disabled:!w,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow ",children:"Submit Application"})})]})]})},Ae=()=>{const[N,h]=i.useState(1),[v,L]=i.useState(),{setBreadCrumbData:f}=i.useContext($);return i.useEffect(()=>{f(["Apply Pet Registration"])},[]),l.jsx(l.Fragment,{children:l.jsx("div",{className:"grid grid-cols-9 space-x-6 md:my-2 md:mx-8 mx-2",children:l.jsxs("div",{className:"col-span-9 border border-gray-400 rounded mt-6",children:[l.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Rig (HYDT) Registration Application"}),l.jsxs("div",{className:"md:p-5 p-2",children:[l.jsxs("p",{className:`${N==1?"block":"hidden"}`,children:[" ",l.jsx(pe,{screen:h,data:L})," "]}),l.jsxs("p",{className:`${N==2?"block":"hidden"}`,children:[" ",l.jsx(ne,{screen:h,data:v})]})]})]})})})};export{Ae as default};
