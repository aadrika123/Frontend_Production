import{j as e}from"./mui-8e804a04.js";import{f as qe,r as m,u as Fe}from"./router-87042356.js";import{B as Te}from"./BarLoader-9ed8db6a.js";import{c as Ie,d as h,u as ze,b as B,Z as Me,X as u,a0 as de,v as Be,A as ie,Q as Ue,B as Oe,n as g}from"./index-83b5ba01.js";import{h as Ye}from"./useRazorPayForApp-cc3bb799.js";import{a as Re}from"./axios-97164839.js";import"./RazorpayPaymentScreen-23bdaacf.js";import{C as Ee}from"./CitizenApplyApiList-3fd0c591.js";import{b as Le}from"./ValidationFunction-10ed4d73.js";import{B as Ve}from"./BottomErrorCard-b31e4e97.js";import{U as $e}from"./UseRazorpay-62e4000a.js";import"./CommonModal-340f9ebb.js";import{S as Qe}from"./ServerErrorCard-01d0b23c.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-4db06ad6.js";import"./i18next-e99b4042.js";import"./logo1-66954bc2.js";import"./WaterApiList-349f6558.js";import"./index-48d14c2d.js";import"./index-4e794517.js";const Z=localStorage.getItem("citizenName"),X=localStorage.getItem("citizenMobile");function He(t){var S,D,I,y,c,f,p,r,N,U,R,q,F,T,E,C,z,xe,ue,be;const{handlePayment:J}=$e(),{propertyGenerateOrderId:v,propertyGenerateHoldingOrderId:K,propertyGenerateOrderIdDirect:k,api_getTransactionNoForReceipt:l,api_postPropertyPayment:ce,api_postSafPayment:Ce,api_generatedreceipt:O}=Ee(),{id:_,moduleType:d,userType:Y}=qe(),[ee,me]=m.useState(""),[ae,b]=m.useState(!1),x=Fe();m.useState(!1);const[w,te]=m.useState(),[se,le]=m.useState(!1),[ne,L]=m.useState(null),[oe,re]=m.useState(!1),[V,$]=m.useState(null);let P;(d=="holding"||d=="direct")&&(P=Ie({paymentUptoYear:h().required("Select Payment upto year"),paymentUptoQuarter:h().required("Select payment upt quarter"),paymentMode:h(),remarks:h().required("Enter remarks"),payAdvance:h(),advanceAmount:h().when("payAdvance",{is:!0,then:h().required("Enter advance amount")})})),d=="saf"&&(P=Ie({paymentUptoYear:h(),paymentUptoQuarter:h(),paymentMode:h(),remarks:h(),payAdvance:h(),advanceAmount:h()}));const s=ze({initialValues:{paymentUptoYear:"",paymentUptoQuarter:"",paymentMode:"ONLINE",remarks:"",payAdvance:"",advanceAmount:""},onSubmit:(a,i)=>{console.log("values at submit payment",a),W(a)},validationSchema:P}),Q=a=>{let i=a.target.name,n=a.target.value;i=="paymentMode"&&te(n),i=="payAdvance"&&le(a.target.checked),i=="paymentUptoQuarter"&&(t==null||t.fetchDemandDetail(n,s.values.paymentUptoYear)),i=="remarks"&&s.setFieldValue("remarks",de(n,s.values.remarks,100)),i=="bankName"&&s.setFieldValue("bankName",de(n,s.values.bankName,100)),i=="branchName"&&s.setFieldValue("branchName",de(n,s.values.branchName,100)),i=="cheque_dd_no"&&s.setFieldValue("cheque_dd_no",Be(n,s.values.cheque_dd_no,20)),i=="advanceAmount"&&s.setFieldValue("advanceAmount",Le(n,s.values.advanceAmount,10))},H=async a=>{console.log("generateReceipt",a),console.log(a);let i={applicationId:a==null?void 0:a.applicationId,departmentId:a==null?void 0:a.departmentId,status:"",captured:"1",card_id:"",amount:a==null?void 0:a.amount,payment_method:"upi/netbanking",workflow_id:a==null?void 0:a.workflowId,user_id:a==null?void 0:a.user_id,ulb_id:a==null?void 0:a.ulbId,payment_order_id:a==null?void 0:a.razorpay_order_id,payment_id:a==null?void 0:a.razorpay_payment_id,created_at:""};console.log("Receipt",a),ie.post(O,i,B()).then(n=>{var j;console.log("genereted receipt",n),n.data.status==!0?(console.log("Oder ID Generated ++++dddddddddddddddddddddddd+++++",n.data),G({orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id}),x(`/paymentReceipt/${(j=n==null?void 0:n.data)==null?void 0:j.data}/${d}`,{replace:!0})):Ue.error(n.data.message,"error")}).catch(n=>{console.log("Error genrating order id",n),Ue.error(n.message,"error")})},G=a=>{let i={orderId:a==null?void 0:a.razorpay_order_id,paymentId:a==null?void 0:a.razorpay_payment_id};Re.post(l,i,B()).then(function(n){var j,M;L((M=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:M.transaction_no),console.log("transaction no get response...",n==null?void 0:n.data),b(!1)}).catch(function(n){console.log("transaction no get error...",n),b(!1)})};console.log("demand details => ",(S=t==null?void 0:t.safPaymentDetailsData)==null?void 0:S.isPayable);const W=async a=>{var j,M,he;b(!0);let i,n;d=="holding"&&(i=K,n={propId:_,amount:(j=t==null?void 0:t.paymentDetails)==null?void 0:j.payableAmount,name:Z,contact:X,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),d=="saf"&&(i=v,n={id:_,amount:(M=t==null?void 0:t.safPaymentDetailsData)==null?void 0:M.payableAmount,name:Z,contact:X}),d=="direct"&&(i=k,n={propId:_,amount:(he=t==null?void 0:t.paymentDetails)==null?void 0:he.payableAmount,name:Z,contact:X,qtr:a==null?void 0:a.paymentUptoQuarter,fYear:a==null?void 0:a.paymentUptoYear}),console.log("name....",Z,"....mobile..",X),console.log("orderidpayload at payment before...",n,"moduleId..",d),Re.post(i,n,B()).then(o=>{var fe,pe,ge,ye,Ne,je,ve,we,_e,Pe,ke,Ae,Se,De;console.log("Order Id Response ",o==null?void 0:o.data),window.ReactNativeWebView?Ye({generatedOrder:(fe=o==null?void 0:o.data)==null?void 0:fe.data,payload:{applicationId:(ge=(pe=o==null?void 0:o.data)==null?void 0:pe.data)==null?void 0:ge.applicationId,departmentId:(Ne=(ye=o==null?void 0:o.data)==null?void 0:ye.data)==null?void 0:Ne.departmentId,status:"",captured:"1",card_id:"",amount:(ve=(je=o==null?void 0:o.data)==null?void 0:je.data)==null?void 0:ve.amount,payment_method:"upi/netbanking",workflow_id:(_e=(we=o==null?void 0:o.data)==null?void 0:we.data)==null?void 0:_e.workflowId,user_id:(ke=(Pe=o==null?void 0:o.data)==null?void 0:Pe.data)==null?void 0:ke.userId,ulb_id:(Se=(Ae=o==null?void 0:o.data)==null?void 0:Ae.data)==null?void 0:Se.ulbId,created_at:""},api:O,returnUrl:"/citizen/paymentReceipt",isParam:!1,moduleType:d}):J((De=o==null?void 0:o.data)==null?void 0:De.data,H),b(!1)}).catch(o=>{A(!0,"Error occured. Please try again later."),console.log("ERROR :-  Unable to Generate Order Id ",o),b(!1)})},A=(a,i)=>{$(i),re(a)};return ee==!0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your payment has been successfully done !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/paymentReceipt/${ne}/${d=="saf"?"saf":"holding"}`),children:"View Receipt"}),d!="direct"&&e.jsx("button",{className:"mr-4 max-sm:mt-2 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/propApplicationDetails/${_}`),children:"View Application"})]})]})})}):e.jsxs(e.Fragment,{children:[ae&&e.jsx(Te,{}),oe&&e.jsx(Ve,{activateBottomErrorCard:A,errorTitle:V}),e.jsx(Me,{position:"top-right",autoClose:2e3}),e.jsx("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e.jsx("div",{className:" block md:p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:e.jsx("form",{onSubmit:s.handleSubmit,onChange:Q,className:"md:p-4 relative",children:e.jsxs("div",{className:"grid grid-cols-12",children:[d!="saf"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Year"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoYear"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(I=(D=t==null?void 0:t.paymentDetails)==null?void 0:D.paymentUptoYrs)==null?void 0:I.map((a,i)=>e.jsx("option",{selected:i==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoYear&&s.errors.paymentUptoYear?s.errors.paymentUptoYear:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Upto Quarter"]}),e.jsxs("select",{...s.getFieldProps("paymentUptoQuarter"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:"Select"}),(c=(y=t==null?void 0:t.paymentDetails)==null?void 0:y.paymentUptoQtrs)==null?void 0:c.map((a,i)=>e.jsx("option",{selected:i==0,value:a,children:a}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentUptoQuarter&&s.errors.paymentUptoQuarter?s.errors.paymentUptoQuarter:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),e.jsx("select",{...s.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:e.jsx("option",{value:"ONLINE",children:"Online"})}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.paymentMode&&s.errors.paymentMode?s.errors.paymentMode:null})]}),Y!="direct"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e.jsx("input",{...s.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.remarks&&s.errors.remarks?s.errors.remarks:null})]}),(w=="CHEQUE"||w=="DD")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e.jsx("input",{...s.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.bankName&&s.errors.bankName?s.errors.bankName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e.jsx("input",{...s.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.branchName&&s.errors.branchName?s.errors.branchName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_no&&s.errors.cheque_dd_no?s.errors.cheque_dd_no:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e.jsx("input",{...s.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.cheque_dd_date&&s.errors.cheque_dd_date?s.errors.cheque_dd_date:null})]})]}),d!="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("input",{...s.getFieldProps("payAdvance"),id:"checked-checkbox",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 cursor-pointer"}),e.jsx("label",{for:"checked-checkbox",class:"ml-2 text-sm font-medium text-gray-900 darks:text-gray-300",children:"Pay Advance"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.payAdvance&&s.errors.payAdvance?s.errors.payAdvance:null})]}),se&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Advance amount"]}),e.jsx("input",{...s.getFieldProps("advanceAmount"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter advance amount in â‚¹"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:s.touched.advanceAmount&&s.errors.advanceAmount?s.errors.advanceAmount:null})]})]}),e.jsx("div",{className:"col-span-12"}),d!="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200 max-sm:px-2",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((f=t==null?void 0:t.paymentDetails)==null?void 0:f.totalDues)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Advance Amount Paid :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((p=t==null?void 0:t.paymentDetails)==null?void 0:p.advanceAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((r=t==null?void 0:t.paymentDetails)==null?void 0:r.rebateAmt)})]}),d=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((N=t==null?void 0:t.paymentDetails)==null?void 0:N.lateAssPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((U=t==null?void 0:t.paymentDetails)==null?void 0:U.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((R=t==null?void 0:t.paymentDetails)==null?void 0:R.onePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:u((q=t==null?void 0:t.paymentDetails)==null?void 0:q.payableAmount)})]})})]}),d=="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Total Tax :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((F=t==null?void 0:t.safPaymentDetailsData)==null?void 0:F.totalTax)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((T=t==null?void 0:t.safPaymentDetailsData)==null?void 0:T.rebateAmt)})]}),d=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Late Assessment Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((E=t==null?void 0:t.safPaymentDetailsData)==null?void 0:E.lateAssessmentPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"Special Rebate :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((C=t==null?void 0:t.safPaymentDetailsData)==null?void 0:C.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("span",{children:"1% Penalty :"})," ",e.jsx("span",{className:"font-mono font-semibold",children:u((z=t==null?void 0:t.safPaymentDetailsData)==null?void 0:z.totalOnePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsx("span",{children:"Total Payable Amount :"})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:u((xe=t==null?void 0:t.safPaymentDetailsData)==null?void 0:xe.payableAmount)})]})})]}),e.jsxs("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e.jsx("div",{className:""}),e.jsx("div",{className:"md:pl-10 text-right",children:e.jsxs("button",{type:"submit",className:"md:ml-4 font-bold px-6 py-2 bg-indigo-500 text-white  text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:[e.jsx("span",{className:"mr-2",children:"Pay"}),d=="saf"&&u((ue=t==null?void 0:t.safPaymentDetailsData)==null?void 0:ue.payableAmount),d!="saf"&&u((be=t==null?void 0:t.paymentDetails)==null?void 0:be.payableAmount)]})})]})]})})})})]})}function ha(t){var V,$,P,s,Q,H,G,W,A,S,D,I;const[J,v]=m.useState(!1),[K,k]=m.useState(!1);m.useState();const[l,ce]=m.useState(),[Ce,O]=m.useState();m.useState(!1);const[_,d]=m.useState(!1),[Y,ee]=m.useState(null),[me,ae]=m.useState(null),{id:b,moduleType:x}=qe(),w=Fe(),{zeroDemandPayment:te,api_getDirectHoldingDemandById:se,api_getHoldingDemandById:le,api_getsafDemandById:ne}=Ee(),L=(y=null,c=null)=>{d(!1);let f,p;x=="holding"&&(f=le,p={propId:b,fYear:c,qtr:y}),x=="saf"&&(f=ne,p={id:b}),x=="direct"&&(f=se,p={propId:b,fYear:c,qtr:y}),y!==null?k(!0):v(!0),console.log("before hit => ",p,f),ie.post(f,p,B()).then(function(r){var N,U,R,q,F,T,E,C,z;console.log("payment details data...",r==null?void 0:r.data),ce((N=r==null?void 0:r.data)==null?void 0:N.data),O(r==null?void 0:r.data),((R=(U=r==null?void 0:r.data)==null?void 0:U.data)==null?void 0:R.paymentStatus)==1&&w(`/viewDemand/${b}`),y!==null?k(!1):v(!1),ae((T=(F=(q=r==null?void 0:r.data)==null?void 0:q.data)==null?void 0:F.amounts)==null?void 0:T.isPayable),((z=(C=(E=r==null?void 0:r.data)==null?void 0:E.data)==null?void 0:C.amounts)==null?void 0:z.isPayable)==!1&&oe()}).catch(function(r){console.log("payment details error...",r),d(!0),y!==null?k(!1):v(!1)})},oe=()=>{v(!0),d(!1);let y={id:b,paymentMode:"Online"};ie.post(te,y,B()).then(c=>{var f,p,r,N;console.log("response zero payment => ",c),(f=c==null?void 0:c.data)!=null&&f.status?(console.log("response zero payment => ",(p=c==null?void 0:c.data)==null?void 0:p.data),ee((N=(r=c==null?void 0:c.data)==null?void 0:r.data)==null?void 0:N.TransactionNo)):(console.log("false status response zero payment => ",c),d(!0))}).catch(c=>{console.log("error zero payment => ",c),d(!0)}).finally(()=>v(!1))};if(m.useEffect(()=>{L()},[b,x]),J)return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsx("div",{className:"min-h-screen"})]});if(_)return e.jsx(Qe,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});const re=()=>{x!="direct"&&w(`/paymentReceipt/${Y}/${x=="saf"?"saf":"holding"}`),x=="direct"&&w(`/paymentReceipt/direct/${Y}/${x=="saf"?"saf":"holding"}`)};return e.jsxs(e.Fragment,{children:[K&&e.jsx(Te,{}),e.jsxs("div",{className:x=="direct"&&" p-4 mt-10",children:[e.jsx("div",{className:"w-full bg-white shadow-xl mb-6",children:e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[x!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((V=l==null?void 0:l.basicDetails)==null?void 0:V.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),x=="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g(($=l==null?void 0:l.basicDetails)==null?void 0:$.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Application No.(Saf No)"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((P=l==null?void 0:l.basicDetails)==null?void 0:P.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:g((s=l==null?void 0:l.basicDetails)==null?void 0:s.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:g((Q=l==null?void 0:l.basicDetails)==null?void 0:Q.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((H=l==null?void 0:l.basicDetails)==null?void 0:H.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((G=l==null?void 0:l.basicDetails)==null?void 0:G.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((W=l==null?void 0:l.basicDetails)==null?void 0:W.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[g((A=l==null?void 0:l.basicDetails)==null?void 0:A.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:g((S=l==null?void 0:l.basicDetails)==null?void 0:S.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:g((D=l==null?void 0:l.basicDetails)==null?void 0:D.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),e.jsx("div",{children:me==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your application is successfully submitted !"}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>re(),children:"View Receipt"}),x!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>w(`/propApplicationDetails/${b}`),children:"View Application"})]})]})}):e.jsx(He,{fetchDemandDetail:L,safPaymentDetailsData:l==null?void 0:l.amounts,paymentDetails:l==null?void 0:l.duesList,ulbId:(I=l==null?void 0:l.basicDetails)==null?void 0:I.ulb_id})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{ha as default};
