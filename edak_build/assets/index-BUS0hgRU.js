import{j as s,u,e as w,o as h,t as g,F as x,U as i,B as f,f as P,h as c,l as j,i as b,_ as m}from"./index-BRnLakpB.js";import{R as l}from"./RHFPasswordField-Dy9DstEq.js";import{P as p}from"./index-Bj9W1lOi.js";import"./badge-DsXNu46Z.js";import"./index-YSq32AOx.js";import"./circle-check-big-Ck6Q2ipy.js";function y({password:o}){const a=(r=>{let e=0;return r.length>=8&&e++,r.length>=12&&e++,/[a-z]/.test(r)&&/[A-Z]/.test(r)&&e++,/\d/.test(r)&&e++,/[^a-zA-Z0-9]/.test(r)&&e++,e})(o),n=()=>a<=1?"bg-red-500":a<=3?"bg-yellow-500":"bg-green-500",d=()=>a<=1?"Weak":a<=3?"Medium":"Strong";return o?s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"mb-1 flex gap-1",children:[1,2,3,4,5].map(r=>s.jsx("div",{className:`h-1 flex-1 rounded ${r<=a?n():"bg-gray-300"}`},r))}),s.jsx("p",{className:`text-xs ${a<=1?"text-red-500":a<=3?"text-yellow-500":"text-green-500"}`,children:d()})]}):null}const N=P().shape({currentPassword:c().required("Current Password is required").min(8,"Password must be at least 8 characters"),newPassword:c().required("New Password is required").min(8,"Password must be at least 8 characters"),confirmPassword:c().oneOf([j("newPassword")],"Passwords must match").required("Confirm Password is required").min(8,"Password must be at least 8 characters")});function v(){const o=u({}),t=w({resolver:h(N)}),a=async n=>{var d,r;try{const e=await o.mutateAsync({api:b.changePassword,data:{currentPassword:n.currentPassword,newPassword:n.newPassword,confirmPassword:n.confirmPassword}});(d=e.data)!=null&&d.success?(m.success((r=e==null?void 0:e.data)==null?void 0:r.message),localStorage.clear(),window.location.replace("/e-dak/auth/login")):m.error("Password not changed"),t.reset({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){console.log(e)}};return s.jsx(p,{children:s.jsx("section",{className:"relative flex w-full items-center justify-center   dark:bg-gray-900",children:s.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white px-4 py-8 shadow-md dark:bg-gray-800",children:[s.jsx("h1",{className:"mb-2 text-center text-2xl font-semibold capitalize text-gray-800 dark:text-white",children:s.jsx("span",{className:"text-[#0D7538] ",children:"Change Password"})}),s.jsx(g,{className:"px-2 text-center text-sm text-gray-500 dark:text-gray-400",children:"Easily change your password"}),s.jsx(x,{methods:t,onSubmit:t.handleSubmit(a),children:s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx(i,{htmlFor:"currentPassword",children:"Old Password"}),s.jsx(l,{className:"mt-1 w-full rounded-md bg-gray-100 shadow-sm dark:bg-gray-700",name:"currentPassword",placeholder:"Enter old password"})]}),s.jsxs("div",{children:[s.jsx(i,{htmlFor:"newPassword",children:"New Password"}),s.jsx(l,{className:"mt-1 w-full rounded-md bg-gray-100 shadow-sm dark:bg-gray-700",name:"newPassword",placeholder:"Enter new password"}),s.jsx(y,{password:t.watch("newPassword")||""})]}),s.jsxs("div",{children:[s.jsx(i,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsx(l,{className:"mt-1 w-full rounded-md bg-gray-100 shadow-sm dark:bg-gray-700",name:"confirmPassword",placeholder:"Confirm new password"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(f,{isLoading:t.formState.isSubmitting,type:"submit",className:"w-full rounded-md bg-[#0D7538] py-2 text-white hover:bg-green-700",children:"Submit"})})]})})]})})})}function A(){return s.jsx(s.Fragment,{children:s.jsx(v,{})})}export{A as default};
