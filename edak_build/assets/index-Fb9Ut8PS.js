import{e as ce,f as ne,x as xe,b as oe,o as te,j as s,F as he,C as re,T as ie,y as je,B as ue,h as v,_ as u,n as de,E as h,U as N,V as f,W as b,I as i,X as g,A as Ne,m as fe}from"./index-DCB-WJUW.js";import{P as be}from"./index-DSSDFw_K.js";import{B as a}from"./badge-ygz8NjRC.js";import{g as ge}from"./services-KQnp_8oA.js";import{R as ve,I as ye}from"./refresh-ccw-CaQJDPkS.js";import{M as we}from"./move-right-CntPH6Dw.js";import"./index-D-8BA9fm.js";import"./circle-check-big-CLg-fsMZ.js";const pe=ce().shape({comment:ne().required("Write comment")});function Ce({complaintData:l}){const t=xe({}),c=oe({resolver:te(pe)}),j=async e=>{var x,o;let n={complaintId:(o=(x=l==null?void 0:l.data)==null?void 0:x.data)==null?void 0:o._id,comment:e==null?void 0:e.comment};try{const r=await t.mutateAsync({api:v.reopenComplaint,data:n});r.data.success?(u.success(r.data.message),l==null||l.refetch()):u.error(r.data.message)}catch(r){u.error(ge(r))}};return s.jsx(he,{methods:c,onSubmit:c.handleSubmit(j),children:s.jsxs("div",{className:"gap-x-2 gap-y-4 px-10 py-10",children:[s.jsxs("div",{children:[s.jsx(re,{className:"text-2xl flex items-center font-bold mb-6 justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-7 h-7 bg-amber-600 rounded-full bg-red-5500 text-white justify-center items-center mr-2 flex ",children:s.jsx(ve,{className:"inline"})})," Re-Open Complaint"]})}),s.jsxs(ie,{className:"opacity-70 flex items-center",children:[s.jsx("div",{children:s.jsx(ye,{size:20,className:"inline mr-1"})}),s.jsx("div",{children:"Enter, why do you want to reopen this complaint?"})]}),s.jsx(je,{className:"bg-background w-full rounded-md p-4 h-40 border mt-2",name:"comment",placeholder:"Comment"})]}),s.jsx("div",{className:"mt-4",children:s.jsx(ue,{isLoading:c.formState.isSubmitting,type:"submit",className:" w-full",children:"Submit Re-Open"})})]})})}const ke="/images/profile.png",ae="66d57034c965c99dbe57be6e";function me(){var x,o,r,y,w,p,C,k,m,S,T,R,B,U,I,M,_,A,F,L,P,O,Y,$,E,W,z,H,q,G,Q,V,X,J,K,Z,D,ss,es,ds,as,rs,ls,cs,ns,xs,os,ts,hs,is,js,us,Ns,fs,bs,gs,vs,ys,ws,ps,Cs,ks,ms,Ss,Ts,Rs,Bs,Us,Is,Ms,_s,As,Fs,Ls,Ps,Os,Ys,$s,Es,Ws,zs,Hs,qs,Gs,Qs,Vs,Xs,Js;const t=new URLSearchParams(fe().search),c=t.get("complaintRefNo"),j=t.get("complaintId"),e=de({api:`${v.getComplaintDetailsByComplaintNo}/${c}`,key:"ComplaintDetails",options:{enabled:!0}}),n=de({api:`${v.complaintApplicationLog}/${j}`,key:"complaintApplicationLog",options:{enabled:!0}});return s.jsx("div",{className:"",children:s.jsx("div",{className:"min-h-screen",children:s.jsxs("div",{className:"max-w-7xl mx-auto bg-background shadow-lg rounded-lg p-8",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("h1",{className:"text-xl font-bold text-blue-800 mb-6 uppercase",children:["Complaint No : ",(o=(x=e==null?void 0:e.data)==null?void 0:x.data)==null?void 0:o.complaintRefNo]}),((w=(y=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:y.workflow)==null?void 0:w.workFlowName)&&s.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[s.jsx("span",{className:"opacity-60",children:"Current Stage : "}),(k=(C=(p=e==null?void 0:e.data)==null?void 0:p.data)==null?void 0:C.workflow)==null?void 0:k.workFlowName," Workflow"]}),!((T=(S=(m=e==null?void 0:e.data)==null?void 0:m.data)==null?void 0:S.workflow)!=null&&T.workFlowName)&&s.jsxs("h1",{className:"text- font-bold  mb-6 Capitalize",children:[s.jsx("span",{className:"opacity-60",children:"Current Stage : "}),((B=(R=e==null?void 0:e.data)==null?void 0:R.data)==null?void 0:B.currentUser)&&`${(M=(I=(U=e==null?void 0:e.data)==null?void 0:U.data)==null?void 0:I.currentUser)==null?void 0:M.fullName} `,((A=(_=e==null?void 0:e.data)==null?void 0:_.data)==null?void 0:A.currentWorkflow)&&`(${(P=(L=(F=e==null?void 0:e.data)==null?void 0:F.data)==null?void 0:L.currentWorkflow)==null?void 0:P.workFlowName})`,!((Y=(O=e==null?void 0:e.data)==null?void 0:O.data)!=null&&Y.currentWorkflow)&&!((E=($=e==null?void 0:e.data)==null?void 0:$.data)!=null&&E.currentUser)&&((z=(W=e==null?void 0:e.data)==null?void 0:W.data)==null?void 0:z.moduleId)===ae&&"State GRO",!((q=(H=e==null?void 0:e.data)==null?void 0:H.data)!=null&&q.currentWorkflow)&&!((Q=(G=e==null?void 0:e.data)==null?void 0:G.data)!=null&&Q.currentUser)&&((X=(V=e==null?void 0:e.data)==null?void 0:V.data)==null?void 0:X.moduleId)!==ae&&"ULB GRO"]}),s.jsx("h1",{className:"text-md font-bold  mb-6 flex items-center",children:s.jsxs("span",{children:["Status -",((K=(J=e==null?void 0:e.data)==null?void 0:J.data)==null?void 0:K.wf_status)===0&&s.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending"}),((D=(Z=e==null?void 0:e.data)==null?void 0:Z.data)==null?void 0:D.wf_status)===1&&s.jsx(a,{className:"bg-green-500 ml-2",children:"Resolved"}),((es=(ss=e==null?void 0:e.data)==null?void 0:ss.data)==null?void 0:es.wf_status)===2&&s.jsx(a,{className:"bg-red-500 ml-2",children:"Rejected"}),((as=(ds=e==null?void 0:e.data)==null?void 0:ds.data)==null?void 0:as.wf_status)===3&&s.jsx(a,{className:"bg-yellow-500 ml-2",children:"Pending(re-opened)"})]})})]}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Registered on ",h((ls=(rs=e==null?void 0:e.data)==null?void 0:rs.data)==null?void 0:ls.createdAt).format("DD-MM-YYYY")]}),s.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),s.jsxs("div",{className:"mt-4  grid grid-cols-1 md:grid-cols-3   space-y-4",children:[s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Full Name : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(ns=(cs=e==null?void 0:e.data)==null?void 0:cs.data)==null?void 0:ns.citizenName})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Mobile No : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(os=(xs=e==null?void 0:e.data)==null?void 0:xs.data)==null?void 0:os.mobileNo})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Email : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(is=(hs=(ts=e==null?void 0:e.data)==null?void 0:ts.data)==null?void 0:hs.email)==null?void 0:is.replace("@","[at]").replace(/\./g,"[dot]")})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"ULB : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(Ns=(us=(js=e==null?void 0:e.data)==null?void 0:js.data)==null?void 0:us.ulb)==null?void 0:Ns.ulbName})," "]})]}),s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Module : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(gs=(bs=(fs=e==null?void 0:e.data)==null?void 0:fs.data)==null?void 0:bs.module)==null?void 0:gs.moduleName})," "]})]}),((ys=(vs=e==null?void 0:e.data)==null?void 0:vs.data)==null?void 0:ys.fixedNo)&&s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsxs("div",{className:"font-semibold",children:[(ps=(ws=e==null?void 0:e.data)==null?void 0:ws.data)==null?void 0:ps.fixedNoLabel," : "]}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(ks=(Cs=e==null?void 0:e.data)==null?void 0:Cs.data)==null?void 0:ks.fixedNo})," "]})]}),((Ss=(ms=e==null?void 0:e.data)==null?void 0:ms.data)==null?void 0:Ss.tempNo)&&s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsxs("div",{className:"font-semibold",children:[(Rs=(Ts=e==null?void 0:e.data)==null?void 0:Ts.data)==null?void 0:Rs.tempNoLabel," : "]}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(Us=(Bs=e==null?void 0:e.data)==null?void 0:Bs.data)==null?void 0:Us.tempNo})," "]})]}),((Ms=(Is=e==null?void 0:e.data)==null?void 0:Is.data)==null?void 0:Ms.wf_status)===0||((As=(_s=e==null?void 0:e.data)==null?void 0:_s.data)==null?void 0:As.wf_status)===3&&s.jsxs("div",{className:"flex space-x-4  items-center",children:[s.jsx("div",{className:"font-semibold",children:"Pending From : "}),s.jsxs("div",{children:[s.jsxs("p",{className:"opacity-90",children:[h().diff(h((Ls=(Fs=e==null?void 0:e.data)==null?void 0:Fs.data)==null?void 0:Ls.createdAt),"days")," days"]})," "]})]}),s.jsx("div",{className:"col-span-3 border-b my-20 border-[#99B37C]"}),s.jsxs("div",{className:"col-span-2 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Title : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:(Os=(Ps=e==null?void 0:e.data)==null?void 0:Ps.data)==null?void 0:Os.complaintTitle})," "]})]}),s.jsxs("div",{className:"col-span-2 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Description : "}),s.jsxs("div",{children:[s.jsx("p",{className:"opacity-90",children:($s=(Ys=e==null?void 0:e.data)==null?void 0:Ys.data)==null?void 0:$s.complaintDescription})," "]})]}),s.jsxs("div",{className:"col-span-3 flex flex-col",children:[s.jsx("div",{className:"font-semibold",children:"Complaint Document"}),s.jsxs(N,{children:[s.jsx(f,{}),s.jsx(b,{className:"sm:max-w-[500px]",children:s.jsx("div",{className:"py-4",children:s.jsx(i,{src:(Ws=(Es=e==null?void 0:e.data)==null?void 0:Es.data)==null?void 0:Ws.imgUrl,className:"w-80"})})}),s.jsx(g,{asChild:!0,children:s.jsx("div",{className:"cursor-pointer ",children:s.jsx(i,{src:(Hs=(zs=e==null?void 0:e.data)==null?void 0:zs.data)==null?void 0:Hs.imgUrl,className:"w-40"})})})]})]})]}),s.jsxs("section",{className:"mt-8",children:[(((Gs=(qs=e==null?void 0:e.data)==null?void 0:qs.data)==null?void 0:Gs.wf_status)===1||((Vs=(Qs=e==null?void 0:e.data)==null?void 0:Qs.data)==null?void 0:Vs.wf_status)===2)&&s.jsxs(N,{children:[s.jsx(f,{}),s.jsxs(b,{className:"sm:max-w-[500px]",children:[s.jsx(re,{className:"mt-4 text-xl text-gray-500 font-bold flex justify-between",children:"Complaint Re-Open"}),s.jsx("div",{className:"py-4",children:s.jsx(Ce,{complaintData:e})})]}),s.jsx(g,{asChild:!0,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-xl font-semibold text-blue-800",children:"Complaint Flow History"})}),s.jsx("div",{children:s.jsx(Ne,{variant:"secondary",children:"Re-Open Complaint"})})]})})]}),s.jsx("div",{className:"border-b mt-1 border-[#99B37C]"}),s.jsx("div",{className:"flex flex-col space-y-4 mt-4",children:(Js=(Xs=n==null?void 0:n.data)==null?void 0:Xs.data)==null?void 0:Js.map((d,le)=>{var Ks,Zs,Ds,se,ee;return s.jsxs("div",{className:"flex space-x-4 items-center",children:[s.jsx("div",{children:le+1}),s.jsxs("div",{children:[(d==null?void 0:d.actionStatus)===0&&s.jsx(a,{className:"bg-gray-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===1&&s.jsx(a,{className:"bg-green-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===2&&s.jsx(a,{className:"bg-red-400 text-white",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===3&&s.jsx(a,{children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===4&&s.jsx(a,{className:"bg-amber-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===5&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===6&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===7&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===8&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===9&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===10&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===11&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),(d==null?void 0:d.actionStatus)===12&&s.jsx(a,{className:"bg-cyan-200 text-dark",children:d==null?void 0:d.statusText}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold mt-1",children:h((Zs=(Ks=e==null?void 0:e.data)==null?void 0:Ks.data)==null?void 0:Zs.createdAt).format("DD-MM-YYYY hh:mm a")})]}),s.jsx(we,{}),s.jsxs("div",{children:[s.jsxs(N,{children:[s.jsx(f,{}),s.jsx(b,{className:"sm:max-w-[500px]",children:s.jsx("div",{className:"py-4",children:s.jsx(i,{src:(Ds=d==null?void 0:d.actionBy)==null?void 0:Ds.fullImgUrl,className:"w-60"})})}),s.jsx(g,{asChild:!0,children:s.jsx("div",{className:"w-10 h-10 rounded-full border overflow-hidden cursor-pointer",children:s.jsx(i,{src:((se=d==null?void 0:d.actionBy)==null?void 0:se.fullImgUrl)||ke,className:"w-10 cursor-pointer hover:scale-105"})})})]}),s.jsxs("div",{className:"text-xs text-gray-700",children:["Action by ",s.jsx("span",{className:"font-semibold text-black text-md",children:(d==null?void 0:d.actionByUserId)===null?"Direct Citizen":(ee=d==null?void 0:d.actionBy)==null?void 0:ee.fullName})]})]})]})})})]})]})})})}function Ae(){return s.jsx(be,{title:"Complaint Details",subTitle:"Manage all the Complaint here",children:s.jsx("div",{className:"",children:s.jsx(me,{})})})}export{Ae as default};
