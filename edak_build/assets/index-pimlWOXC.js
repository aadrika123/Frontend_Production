import{d as Sa,r as x,p as wa,j as a,C as ka,S as w,L as t,E as j,q as y,s as C,t as S,v as k,w as R,A,x as ya}from"./index-BRnLakpB.js";import{P as Ra}from"./index-Bj9W1lOi.js";import{T as m,a as D,b as i,c as d,d as $,e as r}from"./table-DX_ipx9P.js";import{P as I}from"./index-Dq_TpNNj.js";import{S as E}from"./index-DWmEqRZi.js";import{d as Aa,e as ma,b as B,c as V}from"./tabs-DMPcqYA4.js";import"./badge-DsXNu46Z.js";import"./index-YSq32AOx.js";import"./circle-check-big-Ck6Q2ipy.js";import"./pagination-Di-b090E.js";function Da(){var O,U,W,z,J,K,M,Q,X,Y,Z,L,aa,ea,la,da,ra,ca,na,sa,xa,ha,oa,ta,ja,ia,Na,ga,pa,fa,ua,va,ba,Fa,Ta,Pa;const{user:n}=Sa(),N=n==null?void 0:n._id,[h,p]=x.useState(1),[o,f]=x.useState(10),[u,v]=x.useState(""),[g,b]=x.useState(!0),[_,H]=x.useState(""),[F,T]=x.useState(`${n==null?void 0:n._id}`),[Ca,q]=x.useState(""),[P,G]=x.useState(!1),c=wa({api:`${ya.getDraftFile}?page=${h}&limit=${o}&draft=${g}&createdBy=${F}`,key:"filesDraftList",value:[h,o],options:{enabled:!0}}),l=wa({api:`${ya.getFile}?page=${h}&limit=${o}&draft=${g}&createdBy=${F}&sendTo=${_}&receivedFrom=${Ca}`,key:"filesList",value:[h,o],options:{enabled:!0}});return x.useEffect(()=>{(async()=>{G(!0);try{await l.refetch(),g&&await c.refetch()}catch(s){console.error("API call failed:",s)}finally{G(!1)}})()},[g,_,F,N]),console.log((O=l==null?void 0:l.data)==null?void 0:O.data,"filesList"),a.jsx("main",{className:"grid items-start",children:a.jsxs(Aa,{defaultValue:"DRAFT",className:"w-full",children:[a.jsxs("div",{className:"flex",children:[a.jsx(ka,{className:"flex-1 text-2xl font-bold",children:"File List"}),a.jsx("div",{className:"flex flex-1 justify-end",children:a.jsxs(ma,{className:"flex gap-5",children:[a.jsx(a.Fragment,{children:(n==null?void 0:n.roleId)!==w&&a.jsx(B,{value:"DRAFT",onClick:()=>{b(!0),T(N)},children:"File Draft List"})}),(n==null?void 0:n.roleId)!==w&&a.jsx(B,{value:"RECIEVED",onClick:()=>{b(!1),T(""),q(""),H(N)},children:"File Received List"}),(n==null?void 0:n.roleId)!==w&&a.jsx(B,{value:"SENT",onClick:()=>{b(!1),H(""),T(""),q(N)},children:"File Sent List"})]})})]}),a.jsx(V,{value:"DRAFT",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(E,{search:u,setSearch:v,refetch:c.refetch,isFetching:c.isLoading})}),a.jsx("div",{children:a.jsx(t,{to:"/e-dak/dashboard/create-file",children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"Create New File"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Draft List(",(U=c.data)==null?void 0:U.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(R,{})}):a.jsx(a.Fragment,{children:(W=c==null?void 0:c.data)!=null&&W.data&&((J=(z=c==null?void 0:c.data)==null?void 0:z.data)==null?void 0:J.length)>0?a.jsxs(a.Fragment,{children:[a.jsxs(m,{children:[a.jsx(D,{children:a.jsxs(i,{children:[a.jsx(d,{className:"",children:"S No"}),a.jsx(d,{className:"",children:"Ref No"}),a.jsx(d,{className:"",children:"Title"}),a.jsx(d,{className:"",children:"Created By"}),a.jsx(d,{className:"",children:"Sent To"}),a.jsx(d,{className:"",children:"Department"}),a.jsx(d,{className:"",children:"Date"}),a.jsx(d,{className:"",children:"Status"}),a.jsx(d,{children:"Action"})]})}),a.jsx($,{children:(M=(K=c==null?void 0:c.data)==null?void 0:K.data)==null?void 0:M.map((e,s)=>a.jsxs(i,{children:[a.jsx(r,{children:s+1}),a.jsx(r,{children:e==null?void 0:e.fileRefNo}),a.jsx(r,{children:e==null?void 0:e.title}),a.jsx(r,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(r,{children:e==null?void 0:e.sendToFullName}),a.jsx(r,{children:e==null?void 0:e.department}),a.jsx(r,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(r,{className:"font-bold text-green-500",children:e!=null&&e.sendToFullName?e==null?void 0:e.sendToFullName:"Draft"}),a.jsx(r,{children:a.jsx(t,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},s))})]}),a.jsx(A,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(I,{page:h,perPage:o,totalPage:(X=(Q=c==null?void 0:c.data)==null?void 0:Q.pagination)==null?void 0:X.totalPages,hasNextPage:(Z=(Y=c==null?void 0:c.data)==null?void 0:Y.pagination)==null?void 0:Z.hasNextPage,hasPrevPage:(aa=(L=c==null?void 0:c.data)==null?void 0:L.pagination)==null?void 0:aa.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})}),a.jsx(V,{value:"SENT",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(E,{search:u,setSearch:v,refetch:l.refetch,isFetching:l.isLoading})}),a.jsx("div",{children:a.jsx(t,{to:"/e-dak/dashboard/create-file",children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"Create New FIle"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Sent List (",(la=(ea=l.data)==null?void 0:ea.data)==null?void 0:la.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(R,{})}):a.jsx(a.Fragment,{children:(da=l==null?void 0:l.data)!=null&&da.data&&((ca=(ra=l==null?void 0:l.data)==null?void 0:ra.data)==null?void 0:ca.length)>0?a.jsxs(a.Fragment,{children:[a.jsxs(m,{children:[a.jsx(D,{children:a.jsxs(i,{children:[a.jsx(d,{className:"",children:"S No"}),a.jsx(d,{className:"",children:"Ref No"}),a.jsx(d,{className:"",children:"Title"}),a.jsx(d,{className:"",children:"Created By"}),a.jsx(d,{className:"",children:"Sent To"}),a.jsx(d,{className:"",children:"Department"}),a.jsx(d,{className:"",children:"Date"}),a.jsx(d,{className:"",children:"Status"}),a.jsx(d,{children:"Action"})]})}),a.jsx($,{children:(na=l==null?void 0:l.data)==null?void 0:na.data.map((e,s)=>a.jsxs(i,{children:[a.jsx(r,{children:s+1}),a.jsx(r,{children:e==null?void 0:e.fileRefNo}),a.jsx(r,{children:e==null?void 0:e.title}),a.jsx(r,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(r,{children:e==null?void 0:e.sendToFullName}),a.jsx(r,{children:e==null?void 0:e.department}),a.jsx(r,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(r,{className:"font-bold text-green-500",children:e==null?void 0:e.sendToFullName}),a.jsx(r,{children:a.jsx(t,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},s))})]}),a.jsx(A,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(I,{page:h,perPage:o,totalPage:(xa=(sa=l==null?void 0:l.data)==null?void 0:sa.pagination)==null?void 0:xa.totalPages,hasNextPage:(oa=(ha=l==null?void 0:l.data)==null?void 0:ha.pagination)==null?void 0:oa.hasNextPage,hasPrevPage:(ja=(ta=l==null?void 0:l.data)==null?void 0:ta.pagination)==null?void 0:ja.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})}),a.jsx(V,{value:"RECIEVED",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("div",{children:a.jsx(E,{search:u,setSearch:v,refetch:l.refetch,isFetching:l.isLoading})}),a.jsx("div",{children:a.jsx(t,{to:"/e-dak/dashboard/create-file",children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"Create New FIle"})})})]}),a.jsxs(y,{children:[a.jsx(C,{className:"px-7",children:a.jsxs(S,{children:["File Received List (",(Na=(ia=l.data)==null?void 0:ia.data)==null?void 0:Na.totalDocs,")"]})}),a.jsx(k,{children:P?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(R,{})}):a.jsx(a.Fragment,{children:(ga=l==null?void 0:l.data)!=null&&ga.data&&((fa=(pa=l==null?void 0:l.data)==null?void 0:pa.data)==null?void 0:fa.length)>0?a.jsxs(a.Fragment,{children:[a.jsxs(m,{children:[a.jsx(D,{children:a.jsxs(i,{children:[a.jsx(d,{className:"",children:"S No"}),a.jsx(d,{className:"",children:"Ref No"}),a.jsx(d,{className:"",children:"Title"}),a.jsx(d,{className:"",children:"Created By"}),a.jsx(d,{className:"",children:"Sent To"}),a.jsx(d,{className:"",children:"Department"}),a.jsx(d,{className:"",children:"Date"}),a.jsx(d,{className:"",children:"Status"}),a.jsx(d,{children:"Action"})]})}),a.jsx($,{children:(va=(ua=l==null?void 0:l.data)==null?void 0:ua.data)==null?void 0:va.map((e,s)=>a.jsxs(i,{children:[a.jsx(r,{children:s+1}),a.jsx(r,{children:e==null?void 0:e.fileRefNo}),a.jsx(r,{children:e==null?void 0:e.title}),a.jsx(r,{children:e==null?void 0:e.receivedFromFullName}),a.jsx(r,{children:e==null?void 0:e.sendToFullName}),a.jsx(r,{children:e==null?void 0:e.department}),a.jsx(r,{children:e==null?void 0:e.createdAt.split("T")[0]}),a.jsx(r,{className:"font-bold text-green-500",children:e==null?void 0:e.sendToFullName}),a.jsx(r,{children:a.jsx(t,{to:`/e-dak/dashboard/file-workflow-details?refNo=${e==null?void 0:e.fileRefNo}&page=draft`,children:a.jsx(j,{className:"bg-primary",onClick:()=>{},children:"View"})})})]},s))})]}),a.jsx(A,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(I,{page:h,perPage:o,totalPage:(Fa=(ba=l==null?void 0:l.data)==null?void 0:ba.pagination)==null?void 0:Fa.totalPages,hasNextPage:(Ta=l==null?void 0:l.data.pagination)==null?void 0:Ta.hasNextPage,hasPrevPage:(Pa=l==null?void 0:l.data.pagination)==null?void 0:Pa.hasPrevPage,setPage:p,setPerPage:f})})]}):a.jsx("div",{className:"text-center",children:"No Data Available"})})})]})]})})]})})}function Ua(){return a.jsx(Ra,{title:"",subTitle:"",children:a.jsx("div",{className:"pb-12",children:a.jsx(Da,{})})})}export{Ua as default};
