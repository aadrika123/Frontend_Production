import{r as m,J as I,w as R,j as a,x as G,y as J,z as O,A as U,G as K,O as Q,M as V,i as D,_ as h}from"./index-sBt8KVQv.js";import{P as W}from"./index-bghbaOW_.js";import{T as X,a as Z,b as _,c as i,d as k,e as n}from"./table-DhJaKXns.js";import{g as F}from"./services-KQnp_8oA.js";import{P as z}from"./index-CWE-6F3H.js";import{S as aa}from"./index-m0Xp7Z0A.js";import{q as sa}from"./switch-C4sUQQw-.js";import"./badge-k_k0X2i3.js";import"./index-0SY1KMsh.js";import"./circle-check-big-gd_18BkE.js";import"./pagination-C0kqlCDZ.js";function ta(){var l,j,g,p,u,f,o,N,P,C,y;const[r,E]=m.useState(1),H=I({}),[d,Y]=m.useState(10),[x,q]=m.useState(""),[L]=m.useState(""),s=R({api:`${D.getAllCitizenFeedback}?page=${r}&limit=${d}&q=${x}`,key:"getAllCitizenFeedback",value:[r,d],options:{enabled:!0}}),B=async t=>{var c,v,S,w,T,$,b,A,M;try{const e=await H.mutateAsync({api:`${(c=D)==null?void 0:c.updateCitizenFeedback}/${t}`,data:{id:L}});(v=e==null?void 0:e.data)!=null&&v.success?(s==null||s.refetch(),((w=(S=e==null?void 0:e.data)==null?void 0:S.data)==null?void 0:w.status)==1&&h.success((T=e.data)==null?void 0:T.message),((b=($=e==null?void 0:e.data)==null?void 0:$.data)==null?void 0:b.status)==0&&h.error((A=e.data)==null?void 0:A.message)):h.error((M=e.data)==null?void 0:M.message)}catch(e){h.error(F(e))}};return a.jsx("main",{className:"grid items-start",children:a.jsxs("div",{className:"grid auto-rows-max items-start gap-4 md:gap-2 lg:col-span-2",children:[a.jsx("div",{className:"flex w-full justify-between gap-2",children:a.jsx("div",{children:a.jsx(aa,{search:x,setSearch:q,refetch:s==null?void 0:s.refetch,isFetching:s==null?void 0:s.isLoading})})}),a.jsxs(G,{children:[a.jsx(J,{className:"px-7",children:a.jsxs(O,{children:["Citizen Feedback List (",(j=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:j.totalDocs,")"]})}),a.jsx(U,{children:s!=null&&s.isLoading?a.jsx("div",{className:"flex h-32 items-center justify-center",children:a.jsx(K,{})}):a.jsxs(a.Fragment,{children:[a.jsxs(X,{children:[a.jsx(Z,{children:a.jsxs(_,{children:[a.jsx(i,{className:"",children:"#"}),a.jsx(i,{className:"",children:"Citizen Name"}),a.jsx(i,{className:"",children:"Feedback"}),a.jsx(i,{className:"",children:"Id"}),a.jsx(i,{className:"",children:"Created at"}),a.jsx(i,{className:"",children:"Status"})]})}),a.jsx(k,{children:(u=(p=(g=s==null?void 0:s.data)==null?void 0:g.data)==null?void 0:p.docs)==null?void 0:u.map((t,c)=>a.jsxs(_,{children:[a.jsx(n,{children:r*d-d+c+1}),a.jsx(n,{children:t==null?void 0:t.citizenName}),a.jsx(n,{children:t==null?void 0:t.feedback}),a.jsx(n,{children:t==null?void 0:t._id}),a.jsx(n,{children:Q(t==null?void 0:t.createdAt).format("DD-MM-YYYY")}),a.jsx(n,{children:a.jsxs(sa,{checked:(t==null?void 0:t.status)==1,onChange:()=>B(t._id),className:`${t!=null&&t.status?"bg-primary":"bg-gray-200"} relative inline-flex items-center h-6 rounded-full w-11`,children:[a.jsx("span",{className:"sr-only",children:"Enable notifications"}),a.jsx("span",{className:`${t!=null&&t.status?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full`})]})})]},t==null?void 0:t._id))})]}),a.jsx(V,{className:"mb-2 mt-4"}),a.jsx("div",{className:"flex w-full justify-end",children:a.jsx(z,{page:r,perPage:d,totalPage:(o=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:o.totalDocs,hasNextPage:(P=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:P.hasNextPage,hasPrevPage:(y=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:y.hasPrevPage,setPage:E,setPerPage:Y})})]})})]})]})})}function ga(){return a.jsx(W,{title:"Citizen Feedback",subTitle:"Manage all the Feedback here",children:a.jsx("div",{children:a.jsx(ta,{})})})}export{ga as default};
