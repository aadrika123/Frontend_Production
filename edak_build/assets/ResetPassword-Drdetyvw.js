import{k as x,u as h,d as f,o as y,j as a,F as P,B as b,e as v,f as e,l as j,n as k,i as N,_ as o}from"./index-X8Jed7md.js";import{g as F}from"./services-KQnp_8oA.js";import{R as c}from"./RHFPasswordField-W8GBiHAc.js";const S=v({id:e(),token:e(),password:e().required("Password is required"),confirmPassword:e().oneOf([j("password")],"Passwords must match").required("Confirm Password is required").min(3,"Password must be at least 3 characters")});function M(){const t=new URLSearchParams(k().search),u=x(),m=t.get("id"),l=t.get("token"),w=h({}),r=f({defaultValues:{id:"",token:"",password:""},resolver:y(S)}),p=async g=>{var d,n,i;try{const s=await w.mutateAsync({api:N.resetPassword,data:{id:m,token:l,password:g.password}});(d=s==null?void 0:s.data)!=null&&d.success?(o.success((n=s==null?void 0:s.data)==null?void 0:n.message),u("/grievance/citizen-dashboard/home")):o.error((i=s==null?void 0:s.data)==null?void 0:i.message)}catch(s){o.error(F(s)),console.log("Error sending OTP",s)}};return a.jsx(P,{methods:r,onSubmit:r.handleSubmit(p),children:a.jsxs("div",{className:"space-y-4 max-w-sm mx-auto border px-10 py-10 rounded-md",children:[a.jsx("div",{className:"space-y-2",children:a.jsx(c,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"password",placeholder:"Enter your new password"})}),a.jsx("div",{className:"space-y-2",children:a.jsx(c,{className:"rounded-xl py-6 px-5 w-full bg-background",name:"confirmPassword",placeholder:"Enter your confirm password"})}),a.jsx("div",{children:a.jsx(b,{type:"submit",isLoading:r.formState.isSubmitting,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Forget Your Password"})})]})})}export{M as default};
