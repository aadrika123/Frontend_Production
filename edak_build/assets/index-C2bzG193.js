import{k as N,r as h,e as S,o as F,p as j,i as m,j as e,F as C,A as u,U as W,H as I,B as $,q as y,s as T,t as A,v as H,w as L,E as P,f as R,h as b}from"./index-BRnLakpB.js";import{T as B,a as E,b as w,c as l,d as V,e as o}from"./table-DX_ipx9P.js";import{P as _}from"./index-Bj9W1lOi.js";import"./badge-DsXNu46Z.js";import"./index-YSq32AOx.js";import"./circle-check-big-Ck6Q2ipy.js";const q=R().shape({parentId:b(),levelSerial:b()});function G(){var t,c,d,p,x;const g=N(),[n]=h.useState(1),[i]=h.useState(10),r=S({resolver:F(q),defaultValues:{parentId:"",levelSerial:""}}),f=async()=>{s.refetch()},s=j({api:`${m.complaintWorkflowWiseReport}?workflowId=${r==null?void 0:r.watch("parentId")}`,key:"searchAllComplaints",value:[n,i],options:{enabled:!0}}),v=j({api:`${m.getAllWorkFlow}?page=1&limit=1000&parentId=null&levelSerial=1`,key:"getAllWorkFlow",value:[n,i],options:{enabled:!0}});return e.jsxs(e.Fragment,{children:[e.jsx(C,{methods:r,onSubmit:r.handleSubmit(f),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 gap-y-4 bg-background p-10",children:[e.jsx("h1",{className:"text-xl font-bold text-blue-800 uppercase col-span-4",children:"Search Your Complaint "}),e.jsx(u,{className:"col-span-4"}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"parentId",children:"Workflow"}),e.jsx(I,{className:"bg-background cursor-pointer",name:"parentId",data:((d=(c=(t=v.data)==null?void 0:t.data)==null?void 0:c.docs)==null?void 0:d.map(a=>({value:a==null?void 0:a._id,label:a==null?void 0:a.workFlowName})))??[]})]}),e.jsx("div",{}),e.jsx("div",{className:"mt-6",children:e.jsx($,{isLoading:r.formState.isSubmitting,type:"submit",className:" w-auto  px-10 float-right",children:"Search"})})]})}),e.jsx("div",{className:"mt-2",children:e.jsxs(y,{children:[e.jsx(T,{className:"px-7",children:e.jsx(A,{children:"Complaint List"})}),e.jsx(H,{children:s!=null&&s.isFetching?e.jsx("div",{className:"flex h-32 items-center justify-center",children:e.jsx(L,{})}):e.jsxs("div",{children:[e.jsxs(B,{children:[e.jsx(E,{children:e.jsxs(w,{children:[e.jsx(l,{className:"",children:"#"}),e.jsx(l,{className:"",children:"WorkFlow Name"}),e.jsx(l,{className:"",children:"Total Complaint no."}),e.jsx(l,{className:"",children:"View Complaint List"})]})}),e.jsx(V,{children:(x=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:x.map((a,k)=>e.jsxs(w,{children:[e.jsx(o,{children:k+1}),e.jsx(o,{children:a.workFlowName}),e.jsx(o,{children:a.complaintCount}),e.jsx(o,{children:e.jsx(P,{className:"bg-primary md:ml-5",onClick:()=>{g(`/grievance/dashboard/workflow-byId-Report?workflowId=${a==null?void 0:a._id}`)},children:"View"})})]},a._id))})]}),e.jsx(u,{className:"mb-2 mt-4"})]})})]})})]})}function M(){return e.jsx(_,{title:"Workflow Wise Reports Details",subTitle:"Grievance Workflow Wise Reports",children:e.jsx("div",{className:"",children:e.jsx(G,{})})})}export{M as default};
