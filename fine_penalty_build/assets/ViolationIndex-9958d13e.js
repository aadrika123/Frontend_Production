import{j as e,r as l,D as te,E as se,H as ae,G as ie,m as oe,c as re,a as H,u as ne,B as le,I as de,J as ce,F as xe,v as G,C as he,A as Z,f as U,h as J,n as ue,P as pe}from"./index-57f03571.js";import{r as E,C as be}from"./index-ec237915.js";import{S as ge}from"./ShimmerEffectInline-8af3d2f0.js";function fe({filter:n,setFilter:g}){return e.jsxs(e.Fragment,{children:["Search : "," ",e.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:n||"",onChange:h=>g(h.target.value)})]})}function me(n){const[g,h]=l.useState("hidden"),M=l.useMemo(()=>n.columns,[]),x=l.useMemo(()=>n.dataList,[n.dataList]);l.useEffect(()=>{k(10)},[]);const{getTableProps:f,getTableBodyProps:S,headerGroups:u,page:p,nextPage:L,previousPage:C,canNextPage:m,canPreviousPage:j,prepareRow:_,pageOptions:z,gotoPage:c,pageCount:B,setPageSize:k,state:T,setGlobalFilter:N}=E.useTable({columns:M,data:x,initialState:{pageIndex:0}},E.useGlobalFilter,E.useSortBy,E.usePagination),{globalFilter:I,pageIndex:R,pageSize:q}=T;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-2 pb-2",children:[e.jsx("div",{className:"flex-initial",children:e.jsx(fe,{filter:I,setFilter:N})}),(n==null?void 0:n.exportStatus)!==!1&&e.jsx("div",{className:"flex-initial ml-2",children:e.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>h(""),onMouseLeave:()=>h("hidden"),children:[e.jsx(be,{data:n.dataList,children:"Export"}),e.jsx("div",{className:g+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:e.jsx(te,{})})]})}),e.jsx("div",{className:"flex-1",children:n.children}),n.assessmentType&&e.jsxs("div",{className:"flex-initial flex",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-initial h-4 w-4 text-green-900 text-xs font-semibold text-center bg-green-200 rounded-full ml-4 ",children:"N"}),e.jsx("div",{className:"flex-initial text-xs ml-2",children:" New Assessment"}),e.jsx("div",{className:"flex-initial h-4 w-4 bg-blue-200  text-blue-900 text-xs font-semibold text-center rounded-full ml-4",children:"R"}),e.jsx("div",{className:"flex-initial text-xs ml-2",children:" Re-Assessment"}),e.jsx("div",{className:"flex-initial h-4 w-4 bg-red-200  text-red-900 text-xs font-semibold text-center rounded-full ml-4",children:"M"}),e.jsx("div",{className:"flex-initial text-xs ml-2",children:" Mutation"})]}),e.jsx("div",{}),e.jsx("div",{})]})]}),e.jsx("div",{className:" p-4 overflow-x-auto bg-white",children:e.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[e.jsxs("table",{...S,className:"min-w-full leading-normal",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:u==null?void 0:u.map(i=>e.jsx("tr",{...i.getHeaderGroupProps(),children:i.headers.map(d=>e.jsxs("th",{...d.getHeaderProps(d.getSortByToggleProps()),className:(d==null?void 0:d.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs capitalize",children:[d.render("Header"),e.jsx("span",{children:d.isSorted?d.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),e.jsxs("tbody",{...S(),className:"text-sm",children:[" ",p==null?void 0:p.map(i=>{var d;return _(i),e.jsx("tr",{...i.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:(d=i==null?void 0:i.cells)==null?void 0:d.map(v=>e.jsx("td",{...v.getCellProps(),className:"px-2 py-2 text-sm text-left",children:v.render("Cell")}))})}),e.jsx("tr",{children:e.jsx("td",{})})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-2",children:["  ",e.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:q,onChange:i=>k(Number(i.target.value)),children:[5,10,25,50].map(i=>e.jsxs("option",{value:i,children:["show ",i]},i))})]}),e.jsxs("div",{className:"col-span-4 text-center col-start-5",children:["   ",e.jsxs("span",{children:["page ","",e.jsxs("strong",{children:[R+1," of ",z.length]}),""]})]}),e.jsxs("div",{className:"col-span-4 text-right",children:[e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>c(0),disabled:!j,children:[e.jsx(se,{})," "]}),e.jsx("button",{className:(j?"opacity-100":"opacity-50")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>C(),disabled:!j,children:"⬅️"}),e.jsx("button",{className:(m?"opacity-100":"opacity-50")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>L(),disabled:!m,children:"➡️"}),e.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>c(B-1),disabled:!m,children:["  ",e.jsx(ae,{})]})]})]})]})})]})}function Y(n){return ie({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M2 5H14V7H2V5Z",fill:"currentColor"}},{tag:"path",attr:{d:"M2 9H14V11H2V9Z",fill:"currentColor"}},{tag:"path",attr:{d:"M10 13H2V15H10V13Z",fill:"currentColor"}},{tag:"path",attr:{d:"M16 9H18V13H22V15H18V19H16V15H12V13H16V9Z",fill:"currentColor"}}]})(n)}const we=()=>{oe("Violation Master");const{api_violationMasterList:n,api_updateViolation:g,api_deleteViolation:h,api_addViolation:M}=pe(),x=l.useRef(),[f,S]=l.useState([]),[u,p]=l.useState(!1),[L,C]=l.useState(!1),[m,j]=l.useState(""),[_,z]=l.useState(!1),[c,B]=l.useState(""),[k,T]=l.useState(null),[N,I]=l.useState(null),R="border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white",q="border border-red-300 text-red-400 mx-1 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white",i="float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-[#113766] hover:text-white text-white flex items-center",d="text-gray-800 text-sm",v="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",K="block w-full border focus:outline-none drop-shadow-sm focus:drop-shadow-md p-1 text-sm text-slate-500 file:mr-4 file:py-1 file:px-4 file:rounded-sm file:border file:text-xs file:font-semibold file:bg-zinc-100 hover:file:bg-zinc-200",Q=t=>`px-4 py-1 text-sm bg-${t}-500 hover:bg-${t}-600 select-none rounded-sm hover:drop-shadow-md text-white`,y=(t,s)=>{z(t),j(s)},V=(t,s=null)=>{switch(B(t),console.log(t,":::::::::",s),t){case"add":break;case"edit":I(s),r.setFieldValue("violationName",s==null?void 0:s.violation_name),r.setFieldValue("violationSection",s==null?void 0:s.violation_section),r.setFieldValue("penaltyAmount",s==null?void 0:s.penalty_amount);break;case"delete":T(s);break}x.current.showModal()},W=[{Header:"#",Cell:({row:t})=>e.jsx("div",{className:"pr-2",children:(t==null?void 0:t.index)+1})},{Header:"Violation Name",Cell:({cell:t})=>{var s;return G((s=t.row.original)==null?void 0:s.violation_name)}},{Header:"Violation Section",Cell:({cell:t})=>{var s;return G((s=t.row.original)==null?void 0:s.violation_section)}},{Header:"Penalty Amount",Cell:({cell:t})=>{var s;return he((s=t.row.original)==null?void 0:s.penalty_amount)}},{Header:"Action",accessor:"id",Cell:({cell:t})=>e.jsxs("div",{className:"flex flex-row flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{var s;return V("edit",(s=t==null?void 0:t.row)==null?void 0:s.original)},className:R,children:"Edit"}),e.jsx("button",{onClick:()=>{var s,a;return V("delete",(a=(s=t==null?void 0:t.row)==null?void 0:s.original)==null?void 0:a.id)},className:q,children:"Delete"})]})}],A=[{title:"Violation Name",key:"violationName",type:"text",hint:"Enter violation name",required:!0},{title:"Violation Section",key:"violationSection",type:"text",hint:"Enter violation section",required:!0},{title:"Penalty Amount",key:"penaltyAmount",type:"number",hint:"Enter penalty Amount",required:!0}],X=re().shape([...A].reduce((t,s)=>((s==null?void 0:s.type)!="select"&&(s==null?void 0:s.type)!="option"&&s.required&&(t[s.key]=H().required(s.hint)),((s==null?void 0:s.type)=="select"||(s==null?void 0:s.type)=="option")&&s!=null&&s.check&&(t[s.key]=H().when(s==null?void 0:s.check,{is:a=>a=="1",then:()=>s!=null&&s.required?H().required(s==null?void 0:s.hint):H()})),t),{})),r=ne({initialValues:{violationName:"",violationSection:"",penaltyAmount:""},enableReinitialize:!0,validationSchema:X,onSubmit:t=>{O(t)}}),$=()=>{p(!0),Z.post(n,{},U()).then(t=>{var s,a,o;(s=t==null?void 0:t.data)!=null&&s.status?S((a=t==null?void 0:t.data)==null?void 0:a.data):y(!0,J((o=t==null?void 0:t.data)==null?void 0:o.message)),console.log("fp violation list response => ",t)}).catch(t=>{y(!0,"Server Error! Please try again later."),console.log("error fp violation list => ",t)}).finally(()=>{p(!1)})},ee=(t,s="",a,o="",w="",F=!1,P,D=[])=>e.jsxs("div",{className:`flex flex-col ${o} `,children:[s!=""&&e.jsxs("label",{htmlFor:t,className:d,children:[s," ",F&&e.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),a!="select"&&a!="file"&&e.jsx("input",{...r.getFieldProps(t),type:a,className:v+`${r.touched[t]&&r.errors[t]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:t,id:"",placeholder:w}),a=="file"&&e.jsx("input",{...r.getFieldProps(t),type:a,className:K+`${r.touched[t]&&r.errors[t]?" border-red-200 placeholder:text-red-400 text-red-400 file:border-red-200 file:text-red-400":" focus:border-zinc-300 border-zinc-200 file:border-zinc-300 file:text-gray-600"}`,name:t,id:"",placeholder:w,accept:P}),a=="select"&&e.jsx("select",{...r.getFieldProps(t),className:v+`${r.touched[t]&&r.errors[t]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,children:D==null?void 0:D.map(b=>e.jsx("option",{value:b==null?void 0:b.value,children:b==null?void 0:b.title}))})]}),O=t=>{C(!0),x.current.close(),console.log(c,t);let s,a;switch(c){case"add":s={violationName:t==null?void 0:t.violationName,violationSection:t==null?void 0:t.violationSection,penaltyAmount:t==null?void 0:t.penaltyAmount},a=M;break;case"edit":s={id:N==null?void 0:N.id,violationName:t==null?void 0:t.violationName,violationSection:t==null?void 0:t.violationSection,penaltyAmount:t==null?void 0:t.penaltyAmount},a=g;break;case"delete":s={id:k},a=h;break}Z.post(a,s,U()).then(o=>{var w,F,P;(w=o==null?void 0:o.data)!=null&&w.status?(ue.success((F=o==null?void 0:o.data)==null?void 0:F.message),$()):y(!0,J((P=o==null?void 0:o.data)==null?void 0:P.message)),console.log("fp violation response => ",o)}).catch(o=>{y(!0,"Server Error! Please try again later."),console.log("error violation list => ",o)}).finally(()=>{C(!1),r.resetForm()})};return l.useEffect(()=>{$()},[]),e.jsxs(e.Fragment,{children:[L&&e.jsx(le,{}),_&&e.jsx(de,{activateBottomErrorCard:y,errorTitle:m}),e.jsxs("div",{className:"poppins p-4 px-6",children:[e.jsx("div",{className:"uppercase font-semibold text-gray-700 text-2xl py-2 text-center tracking-[0.7rem]",children:"Violation   Master"}),e.jsx("div",{className:"w-full h-[0.15rem] bg-gray-400 mb-6"}),u&&e.jsx(ge,{}),!u&&e.jsx(e.Fragment,{children:(f==null?void 0:f.length)>0?e.jsx(e.Fragment,{children:e.jsx(me,{columns:W,dataList:f,children:e.jsxs("button",{onClick:()=>V("add"),className:i,children:[e.jsx(Y,{})," Add Violation"]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("button",{onClick:()=>V("add"),className:i,children:[e.jsx(Y,{})," Add Violation"]})}),e.jsx("div",{className:"bg-red-100 text-red-500 py-2 text-lg font-semibold text-center border border-red-500 drop-shadow-sm",children:"Oops! No Data Found."})]})})]}),e.jsxs("dialog",{ref:x,className:"relative overflow-clip animate__animated animate__zoomIn animate__faster",children:[c!="delete"&&e.jsx("span",{onClick:()=>(x.current.close(),r.resetForm()),className:"block p-1 bg-red-100 hover:bg-red-500 rounded-full hover:text-white cursor-pointer transition-all duration-200 absolute top-2 right-2",children:e.jsx(ce,{})}),c!="delete"&&e.jsxs("form",{onChange:r.handleChange,onSubmit:r.handleSubmit,className:"p-4 px-8 py-6 shadow-lg",children:[e.jsxs("section",{className:"flex gap-4 flex-wrap",children:[e.jsxs("header",{className:"w-full font-semibold text-xl capitalize text-sky-700 border-b pb-1 text-center",children:[c," Violation"]}),A==null?void 0:A.map(t=>ee(t==null?void 0:t.key,t==null?void 0:t.title,t==null?void 0:t.type,"",t==null?void 0:t.hint,t==null?void 0:t.required))]}),e.jsx("footer",{className:"mt-4 flex justify-center",children:e.jsxs("button",{type:"submit",className:Q("green"),children:[c=="add"&&"Add",c=="edit"&&"Update"]})})]}),c=="delete"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:" z-50 px-6 py-4 flex flex-col gap-4 ",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-red-500 bg-red-100 p-2 block rounded-full drop-shadow-md shadow-red-300",children:e.jsx(xe,{size:25})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xl font-semibold border-b pb-1",children:"Confirmation Box"}),e.jsx("span",{className:"text-base",children:"Are you sure want to delete ?"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"text-white bg-slate-400 hover:bg-slate-500 px-4 py-1 text-sm ",onClick:()=>x.current.close(),children:"No"}),e.jsx("button",{className:"text-white bg-red-500 hover:bg-red-600 px-4 py-1 text-sm ",onClick:()=>O(),children:"Yes"})]})]})})]})]})};export{we as default};
