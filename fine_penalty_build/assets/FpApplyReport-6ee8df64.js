import{m as $,r as n,d as E,c as B,a as x,u as D,j as i,v as e,C as M,A as T,f as W,P as I}from"./index-27475b41.js";import{R as O,L as G}from"./index.esm-a4c14353.js";import{R as J}from"./Hourglass-e9ab42d2.js";import"./index-afbb486c.js";import"./index.esm-67f7bbd7.js";import"./ShimmerEffectInline-6afa5a93.js";const it=()=>{$("Fines & Penalties Apply Report");const{api_ViolationWiseReport:K,api_getViolationList:g}=I(),[l,f]=n.useState([]),[b,d]=n.useState(!1),y=E(),v=[{Header:"Sl.No.",Cell:({row:t})=>i.jsx("div",{children:(t==null?void 0:t.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.mobile)}},{Header:"Holding No",accessor:"holding_no",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.holding_no)}},{Header:"Application No",accessor:"application_no",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.application_no)}},{Header:"Violatioin Name",accessor:"violation_name",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.violation_section)}},{Header:"Penalty Amount",accessor:"penalty_amount",Cell:({cell:t})=>{var o;return M((o=t.row.original)==null?void 0:o.penalty_amount)}},{Header:"Apply Date",accessor:"date",Cell:({cell:t})=>{var o;return e((o=t.row.original)==null?void 0:o.date)}},{Header:"Action",Cell:({cell:t})=>i.jsx("div",{className:"flex gap-2 ",children:i.jsx("button",{onClick:()=>{var o,a;y(`/fp-details/${(a=(o=t==null?void 0:t.row)==null?void 0:o.original)==null?void 0:a.id}`)},className:`bg-sky-200 px-3 py-1 rounded-md shadow-lg hover:shadow-xl hover:bg-sky-500 \r
                  hover:text-white text-black`,children:"View"})})}],[p,j]=n.useState({}),[w,N]=n.useState(0),[S,_]=n.useState(!1),[Q,A]=n.useState(!1),C="text-gray-800 text-sm",h="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",r=[{title:"Violation Made",key:"violationMade",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:l,okey:"id",ovalue:"violation_name"},{title:"Violation Section",key:"violationSection",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:l,okey:"violation_section_id",ovalue:"violation_section"}],k=(t,o="",a,L="",V="",q=!1,c=[],P="",z="")=>i.jsxs("div",{className:`flex flex-col ${L} `,children:[o!=""&&i.jsxs("label",{htmlFor:t,className:C,children:[o," ",q&&i.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),a!="select"&&a!="file"&&i.jsx("input",{...s.getFieldProps(t),type:a,className:h+` ${s.touched[t]&&s.errors[t]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:t,id:"",placeholder:V}),a=="select"&&i.jsx("select",{...s.getFieldProps(t),className:h+` ${s.touched[t]&&s.errors[t]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,children:b?i.jsx("option",{children:"Loading..."}):i.jsxs(i.Fragment,{children:[i.jsx("option",{value:null,children:"Select"}),c==null?void 0:c.map(u=>i.jsx("option",{value:u[P],children:u[z]}))]})})]}),F=B().shape([...r].reduce((t,o)=>((o==null?void 0:o.type)!="select"&&(o==null?void 0:o.type)!="option"&&o.required&&(t[o.key]=x().required(o.hint)),((o==null?void 0:o.type)=="select"||(o==null?void 0:o.type)=="option")&&o!=null&&o.check&&o!=null&&o.required&&(t[o.key]=x().required(o==null?void 0:o.hint)),t),{})),s=D({initialValues:{violationMade:"",violationSection:""},enableReinitialize:!0,validationSchema:F,onSubmit:t=>{H(t)}}),H=t=>{A(!0),j({[t==null?void 0:t.searchBy]:t==null?void 0:t.entry}),N(o=>o+1)},R=()=>{d(!0),T.post(g,{},W()).then(t=>{var o,a;(o=t==null?void 0:t.data)!=null&&o.status&&f((a=t==null?void 0:t.data)==null?void 0:a.data),console.log("fp violation list response => ",t)}).catch(t=>{console.log("error fp violation list => ",t)}).finally(()=>{d(!1)})};return n.useEffect(()=>{R()},[]),i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:s.handleSubmit,onChange:s.handleChange,className:"bg-white poppins p-4",children:[i.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Fines & Penalties Apply Report"}),i.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[r==null?void 0:r.map(t=>k(t==null?void 0:t.key,t==null?void 0:t.title,t==null?void 0:t.type,t==null?void 0:t.width,t==null?void 0:t.hint,t==null?void 0:t.required,t==null?void 0:t.options,t==null?void 0:t.okey,t==null?void 0:t.ovalue)),i.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:i.jsx("div",{className:" ",children:S?i.jsx(i.Fragment,{children:i.jsx("div",{className:"flex justify-center",children:i.jsx(J,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):i.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[i.jsx("span",{className:"",children:i.jsx(O,{fontSize:""})}),i.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(p).length!==0&&i.jsx(G,{api:api_FpApplyReport,columns:v,requestBody:p,changeData:w,search:!1,loader:t=>_(t)})]})};export{it as default};
