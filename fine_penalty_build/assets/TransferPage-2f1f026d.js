import{r as i,b as A,d as D,A as I,f as S,e as g,j as B,B as E,P}from"./index-dbad4e29.js";function v(){const{api_getFreeMenuList:m}=P(),{setmenuList:L,setuserDetails:x}=i.useContext(A),e=D(),[h,l]=i.useState(!1);i.useEffect(()=>{let a=window.localStorage.getItem("token");if(l(!0),a==null){e("/");return}j()},[]);const j=()=>{let a={moduleId:10};I.post(m,a,S()).then(function(t){var u,o,c,d,f,s,n,r;console.log("fetched menu list.....",t),t.data.status==!0?(g("menuList",(o=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:o.permission),g("userDetails",(d=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:d.userDetails),L((s=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:s.permission),x((r=(n=t==null?void 0:t.data)==null?void 0:n.data)==null?void 0:r.userDetails),e("/home")):console.log("false...")}).catch(function(t){console.log("--2--login error...",t)}).finally(()=>l(!1))};if(h)return B.jsx(E,{})}export{v as default};
