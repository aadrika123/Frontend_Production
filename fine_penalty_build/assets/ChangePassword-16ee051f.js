import{d as N,r as p,m as P,c as j,a as l,y as v,u as S,j as s,A as C,f as E,n as w,z as A,P as F}from"./index-dbad4e29.js";/* empty css              */import{R as k}from"./Hourglass-2bdfaa25.js";const I=()=>{const{api_changePassword:u,api_forgotPassword:h}=F(),d=N(),[i,r]=p.useState(!1),[f,n]=p.useState();P("Change Password");const g=j().shape({oldPassword:l().required("Enter old password"),newPassword:l().min(6,"Minimum six character !").max(50,"Too Long!").required("Enter new password !").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),matchNewPassword:l().required("Confirm your new password").oneOf([v("newPassword"),null],"Password not match")}),e=S({initialValues:{oldPassword:"",newPassword:"",matchNewPassword:""},validationSchema:g,onSubmit:a=>{console.log("post data",a),b(a)}}),b=a=>{let o={password:a.oldPassword,newPassword:a.newPassword};console.log("request body before hit api => ",o),r(!0),C.post(type=="change"?u:h,o,E()).then(t=>{var c,m,x;((c=t==null?void 0:t.data)==null?void 0:c.status)==!0&&(console.log("successfully changed => ",t),w.success("Password changed successfully !!!"),type=="change"?d("/home"):d("/login")),((m=t==null?void 0:t.data)==null?void 0:m.status)==!1&&(w.error("Please try after sometime !!!"),n((x=t==null?void 0:t.data)==null?void 0:x.message)),r(!1)}).catch(t=>{console.log("change pwd error  => ",t),r(!1),n("Server Error !!!")})},y=a=>{let o=a.target.name,t=a.target.value;o=="mobile"&&e.setFieldValue("mobile",A(t,e.values.mobile,10))};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-center items-center mt-10",children:s.jsx("form",{onChange:y,className:"w-[30rem] px-8 rounded-lg bg-white shadow-xl mx-4 md:mx-0",children:s.jsx("div",{className:"grid grid-cols-12  md:px-0 ",children:s.jsx("div",{className:"w-full col-span-12 md:col-span-12 md:shadow-none py-10",children:s.jsxs("div",{className:"w-full  py-6  text-gray-700",children:[s.jsx("h1",{className:"text-center font-semibold my-1 flex justify-center",children:s.jsx("span",{className:"px-1 text-indigo-500 text-semibold text-2xl poppins uppercase",children:"Change Password"})}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Old Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("oldPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your Old Password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.oldPassword&&e.errors.oldPassword?e.errors.oldPassword:null})})," "]})]}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"New Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("newPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your New Password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.newPassword&&e.errors.newPassword?e.errors.newPassword:null})})," "]})]}),s.jsxs("div",{className:"my-3 relative text-sm",children:[s.jsx("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Confirm New Password"}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[s.jsx("input",{type:"password",...e.getFieldProps("matchNewPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Confirm your new password"}),s.jsx("div",{className:"w-full text-start",children:s.jsx("span",{className:"text-red-600 text-xs poppins text-start",children:e.touched.matchNewPassword&&e.errors.matchNewPassword?e.errors.matchNewPassword:null})})," "]})]}),s.jsx("div",{className:" my-10"}),s.jsx("div",{className:"text-center mt-3 text-xs"}),s.jsxs("div",{className:"my-5 relative",children:[s.jsxs("div",{className:"text-red-600 text-sm font-semibold my-3 ",children:[" ",s.jsxs("span",{className:"",children:[" ",f]})]}),i?s.jsx("div",{className:"flex w-full justify-center",children:s.jsx(k,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):s.jsx("button",{type:"submit",onClick:e.handleSubmit,disabled:i,className:" bg-indigo-500 hover:bg-indigo-700 px-5 shadow-xl py-2 w-full  rounded-md text-white text-lg font-semibold",children:"Submit"})]})]})})})})})})};export{I as default};
