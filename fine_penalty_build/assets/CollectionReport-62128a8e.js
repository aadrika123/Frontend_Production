import{r as i,u as M,j as t}from"./index-766f61e5.js";import{R as P,L as q}from"./index.esm-d6665974.js";import{c as L,a as z,u as $}from"./index.esm-33956b49.js";import{R as T}from"./Hourglass-7c46b077.js";import{P as V}from"./axios-b369a557.js";import{g as m,a as r,d as B}from"./PowerupFunctions-49ddea3e.js";import{u as E}from"./useSetTitle-9b560edf.js";import"./AxiosInterceptors-a7ee5726.js";import"./index-6976a2f3.js";import"./index-387d7a00.js";import"./index.esm-0b0e2c8b.js";import"./iconBase-c26efb67.js";import"./index.esm-2b32ebaf.js";import"./ApiHeader-6d683756.js";import"./ShimmerEffectInline-3c659d74.js";const ie=()=>{E("Collection Report");const{api_CollectionReport:f}=V(),[g,O]=i.useState(!1),b=M(),w=[{Header:"Sl.No.",Cell:({row:e})=>t.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.mobile)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:e})=>{var o;return t.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var s,l,c,d;return((l=(s=e==null?void 0:e.row)==null?void 0:s.original)==null?void 0:l.challan_id)&&b(`/challan/${(d=(c=e==null?void 0:e.row)==null?void 0:c.original)==null?void 0:d.challan_id}`)},children:r((o=e.row.original)==null?void 0:o.challan_no)})}},{Header:"Violation Made",accessor:"violation_name",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.violation_section)}},{Header:"Violation Place",accessor:"violation_place",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.violation_place)}},{Header:"Transaction No",accessor:"tran_no",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.tran_no)}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.tran_date)}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:e})=>{var o;return r((o=e.row.original)==null?void 0:o.payment_mode)}},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:e})=>{var o;return B((o=e.row.original)==null?void 0:o.total_amount)}}],[p,j]=i.useState({}),[y,v]=i.useState(0),[C,N]=i.useState(!1),[U,_]=i.useState(!1),S="text-gray-800 text-sm",h="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",n=[{title:"From Date",key:"fromDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Upto Date",key:"uptoDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Payment Mode",key:"paymentMode",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:"CASH",value:"Cash"}],okey:"id",ovalue:"value"}],D=(e,o="",s,l="",c="",d=!1,u=[],F="",A="")=>t.jsxs("div",{className:`flex flex-col ${l} `,children:[o!=""&&t.jsxs("label",{htmlFor:e,className:S,children:[o," ",d&&t.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),s!="select"&&s!="file"&&t.jsx("input",{...a.getFieldProps(e),type:s,className:h+` ${a.touched[e]&&a.errors[e]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:e,id:"",placeholder:c}),s=="select"&&t.jsx("select",{...a.getFieldProps(e),className:h+` ${a.touched[e]&&a.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:g?t.jsx("option",{children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"All"}),u==null?void 0:u.map(x=>t.jsx("option",{className:"",value:x[F],children:x[A]}))]})})]}),H=L().shape([...n].reduce((e,o)=>(o!=null&&o.required&&(e[o.key]=z().required(o==null?void 0:o.hint)),e),{})),R={fromDate:m(),uptoDate:m(),paymentMode:""},a=$({initialValues:R,enableReinitialize:!0,validationSchema:H,onSubmit:e=>{k(e)}}),k=e=>{_(!0),j({fromDate:e==null?void 0:e.fromDate,uptoDate:e==null?void 0:e.uptoDate,paymentMode:e==null?void 0:e.paymentMode}),v(o=>o+1)};return t.jsxs(t.Fragment,{children:[t.jsxs("form",{onSubmit:a.handleSubmit,onChange:a.handleChange,className:"bg-white poppins p-4 mb-8",children:[t.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Collection Report"}),t.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[n==null?void 0:n.map(e=>D(e==null?void 0:e.key,e==null?void 0:e.title,e==null?void 0:e.type,e==null?void 0:e.width,e==null?void 0:e.hint,e==null?void 0:e.required,e==null?void 0:e.options,e==null?void 0:e.okey,e==null?void 0:e.ovalue)),t.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:t.jsx("div",{className:" ",children:C?t.jsx(t.Fragment,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(T,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):t.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[t.jsx("span",{className:"",children:t.jsx(P,{fontSize:""})}),t.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(p).length!==0&&t.jsx(q,{api:f,columns:w,requestBody:p,changeData:y,search:!1,loader:e=>N(e)})]})};export{ie as default};
