import{j as t,r as n,E as A,H as Q,I as U,L as V,f as Z,G as W}from"./index-7f040d82.js";import{r as k,a as X}from"./index-9f15ac44.js";import{c as Y}from"./index.esm-e8dfd6af.js";import{S as z}from"./ShimmerEffectInline-1def86bf.js";function p({filter:e,setFilter:u}){return t.jsxs(t.Fragment,{children:["Search : "," ",t.jsx("input",{className:"border-2 border-gray-600 px-2 bg-gray-200",type:"text",value:e||"",onChange:i=>u(i.target.value)})]})}function ee(e){const[u,i]=n.useState("hidden"),f=n.useMemo(()=>e.columns,[]),d=n.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[g,L]=n.useState(10),[m,y]=n.useState(0);n.useEffect(()=>{y(0)},[e==null?void 0:e.totalCount]),n.useEffect(()=>{let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?w(parseInt(l)+1):w(parseInt(l))},[e==null?void 0:e.totalCount,g]);const{getTableBodyProps:x,headerGroups:o,prepareRow:N,setPageSize:w,state:D,rows:C,setGlobalFilter:E}=k.useTable({columns:f,data:d,initialState:{pageIndex:0}},k.useGlobalFilter,k.useSortBy,k.usePagination),{globalFilter:b,pageSize:j}=D,I=()=>{if(parseInt(m)>0&&parseInt(m)<=parseInt(e==null?void 0:e.lastPage))e==null||e.gotoPage(parseInt(m));else return!1},P=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&e.nextPage()},r=()=>{(e==null?void 0:e.currentPage)!=1&&e.prevPage()};return t.jsxs(t.Fragment,{children:[(e==null?void 0:e.search)==!1?t.jsxs("div",{className:"absolute -mt-[1vh] right-[2.3vw]",children:[t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>i(""),onMouseLeave:()=>i("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:u+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(A,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}):t.jsxs("div",{className:"flex mb-2 pb-2",children:[t.jsx("div",{className:"flex-initial opacity-50",children:t.jsx(p,{filter:b,setFilter:E})}),t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>i(""),onMouseLeave:()=>i("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:u+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(A,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"opacity-50",children:"Total Result : "}),t.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&t.jsx("div",{children:t.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[t.jsx(Y,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),t.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:t.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[t.jsxs("table",{...x,className:"min-w-full leading-normal",children:[t.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:o==null?void 0:o.map(l=>t.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(c=>t.jsxs("th",{...c.getHeaderProps(c.getSortByToggleProps()),className:(c==null?void 0:c.className)+" notranslate px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[c.render("Header"),t.jsx("span",{children:c.isSorted?c.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),t.jsxs("tbody",{...x(),className:"text-sm",children:[C.map((l,c)=>{var F;return N(l),t.jsx("tr",{...l.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:(F=l==null?void 0:l.cells)==null?void 0:F.map((S,B)=>t.jsx("td",{...S.getCellProps(),className:"notranslate px-2 py-2 text-sm text-left",children:S.render("Cell")}))})}),t.jsx("tr",{children:t.jsx("td",{})})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[t.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[t.jsx("span",{children:t.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:l=>{y(l.target.value)},placeholder:"Go to page..."})}),t.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>I(),children:[" ",t.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),t.jsxs("div",{className:"col-span-2",children:["  ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",value:g,onChange:l=>{L(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>t.jsxs("option",{selected:l===10,value:l,children:["show ",l]},l))})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",t.jsxs("span",{children:["page ","",t.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[t.jsx("abbr",{title:"First Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goFirst(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[t.jsx(Q,{})," "]})}),t.jsx("abbr",{title:"Previous Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>r(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"})}),t.jsx("abbr",{title:"Next Page",children:t.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white cursor-pointer",onClick:()=>P(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"})}),t.jsx("abbr",{title:"Last Page",children:t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>e==null?void 0:e.goLast(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",t.jsx(U,{})]})})]})]})]})})]})}const ce=e=>{const[u,i]=n.useState(10),[f,d]=n.useState(1),[g,L]=n.useState(0),[m,y]=n.useState(0),[x,o]=n.useState(0),[N,w]=n.useState(),[D,C]=n.useState(!1),[E,b]=n.useState(!1),[j,I]=n.useState([]),[P,r]=n.useState(!1),l=()=>{b(!1),r(!0),Object.keys(e==null?void 0:e.requestBody).length!==0&&e.loader(!0),console.log(`data before hitting api (${e==null?void 0:e.api}) => `,{...e==null?void 0:e.requestBody,perPage:u,page:f}),V.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:u,page:f},Z()).then(a=>{var s,h,v,M,R,T,H,O,q,G;((s=a==null?void 0:a.data)==null?void 0:s.status)==!0?(console.log("search success => ",a),e!=null&&e.getData&&(e==null||e.allData((h=a==null?void 0:a.data)==null?void 0:h.data)),I((M=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:M.data),o((T=(R=a==null?void 0:a.data)==null?void 0:R.data)==null?void 0:T.total),L((O=(H=a==null?void 0:a.data)==null?void 0:H.data)==null?void 0:O.current_page),y((G=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:G.last_page),b(!1)):(console.log("error while search => ",a),b(!0))}).catch(a=>(console.log("error while search => ",a),b(!0))).finally(()=>{r(!1),Object.keys(e==null?void 0:e.requestBody).length!==0&&e.loader(!1),b(!1)})},c=()=>{d(g+1)},F=()=>{d(g-1)},S=a=>{let s=parseInt(x/a),h=parseInt(x%a);if(h==0){s<g&&d(s),i(a);return}if(h!=0){s+1<g&&d(s+1),i(a);return}},B=()=>{d(1)},_=()=>{d(m)},$=a=>{d(a)},J=()=>{r(!0),C(!1),V.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:x},Z()).then(a=>{var s,h,v;((s=a==null?void 0:a.data)==null?void 0:s.status)==!0&&(w((v=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:v.data),K()),r(!1)}).catch(a=>{r(!1)})},K=()=>{C(!0)};return n.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(d(1),i(10),l())},[e==null?void 0:e.changeData]),n.useEffect(()=>{r(!0),l()},[f,u]),t.jsxs(t.Fragment,{children:[E&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Sorry! "}),t.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),D&&t.jsx(X,{data:N}),P&&t.jsx(z,{}),!P&&(j==null?void 0:j.length)>0?t.jsx(t.Fragment,{children:t.jsx(ee,{search:e==null?void 0:e.search,currentPage:g,lastPage:m,goFirst:B,goLast:_,count1:x,columns:e==null?void 0:e.columns,dataList:j,exportStatus:!0,perPage:u,perPageC:S,totalCount:x,nextPage:c,prevPage:F,exportDataF:J,exportData:N,gotoPage:a=>$(a)})}):t.jsx(t.Fragment,{children:!P&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};function ie(e){return W({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 14V20L10 22V14L4 5V3H20V5L14 14ZM6.4037 5L12 13.3944L17.5963 5H6.4037Z"}}]})(e)}export{ce as L,ie as R};
