import{r as s,u as z,j as a}from"./index-766f61e5.js";import{R as P,L as $}from"./index.esm-d6665974.js";import{c as O,a as G,u as U}from"./index.esm-33956b49.js";import{R as B}from"./Hourglass-7c46b077.js";import{P as I}from"./axios-b369a557.js";import{g,a as r,d as M}from"./PowerupFunctions-49ddea3e.js";import{u as W}from"./useSetTitle-9b560edf.js";import{A as J}from"./AxiosInterceptors-a7ee5726.js";import{A as K}from"./ApiHeader-6d683756.js";import"./index-6976a2f3.js";import"./index-387d7a00.js";import"./index.esm-0b0e2c8b.js";import"./iconBase-c26efb67.js";import"./index.esm-2b32ebaf.js";import"./ShimmerEffectInline-3c659d74.js";const he=()=>{W("Challan Generated Report");const{api_ChallanGeneratingReport:m,api_getUserList:y}=I(),[w,b]=s.useState([]),[v,h]=s.useState(!1),C=z(),j=[{Header:"Sl.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Officer Name",accessor:"user_name",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.user_name)}},{Header:"Name",accessor:"full_name",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.mobile)}},{Header:"Challan Type",accessor:"challan_type",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.challan_type)}},{Header:"Challan Category",accessor:"challan_category",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.challan_category)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:e})=>{var t;return a.jsx("div",{className:"underline cursor-pointer",onClick:()=>{var o,l,c,d;return((l=(o=e==null?void 0:e.row)==null?void 0:o.original)==null?void 0:l.challan_id)&&C(`/challan/${(d=(c=e==null?void 0:e.row)==null?void 0:c.original)==null?void 0:d.challan_id}`)},children:r((t=e.row.original)==null?void 0:t.challan_no)})}},{Header:"Violation Made",accessor:"violation_name",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.violation_name)}},{Header:"Violation Section",accessor:"violation_section",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.violation_section)}},{Header:"Violation Place",accessor:"violation_place",Cell:({cell:e})=>{var t;return r((t=e.row.original)==null?void 0:t.violation_place)}},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:e})=>{var t;return M((t=e.row.original)==null?void 0:t.total_amount)}}],[p,_]=s.useState({}),[N,S]=s.useState(0),[k,D]=s.useState(!1),[Q,H]=s.useState(!1),R="text-gray-800 text-sm",x="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",n=[{title:"From Date",key:"fromDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Upto Date",key:"uptoDate",width:"md:w-[20%] w-full",type:"date",hint:"",required:!0,options:"",okey:"",ovalue:""},{title:"Users",key:"users",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:w,okey:"id",ovalue:"user_name"},{title:"Challan Type",key:"challanType",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:"Via Verification",value:"Via Verification"},{id:"On Spot",value:"On Spot"}],okey:"id",ovalue:"value"},{title:"Challan Category",key:"challanCategory",width:"md:w-[20%] w-full",type:"select",hint:"Enter your name",options:[{id:1,value:"E-Rickshaw"},{id:2,value:"Others"}],okey:"id",ovalue:"value"}],A=(e,t="",o,l="",c="",d=!1,u=[],q="",E="")=>a.jsxs("div",{className:`flex flex-col ${l} `,children:[t!=""&&a.jsxs("label",{htmlFor:e,className:R,children:[t," ",d&&a.jsx("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),o!="select"&&o!="file"&&a.jsx("input",{...i.getFieldProps(e),type:o,className:x+` ${i.touched[e]&&i.errors[e]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:e,id:"",placeholder:c}),o=="select"&&a.jsx("select",{...i.getFieldProps(e),className:x+` ${i.touched[e]&&i.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:v?a.jsx("option",{children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"",children:"All"}),u==null?void 0:u.map(f=>a.jsx("option",{className:"",value:f[q],children:f[E]}))]})})]}),L=O().shape([...n].reduce((e,t)=>(t!=null&&t.required&&(e[t.key]=G().required(t==null?void 0:t.hint)),e),{})),F={fromDate:g(),uptoDate:g(),users:"",challanType:"",challanCategory:""},i=U({initialValues:F,enableReinitialize:!0,validationSchema:L,onSubmit:e=>{T(e)}}),T=e=>{H(!0),_({fromDate:e==null?void 0:e.fromDate,uptoDate:e==null?void 0:e.uptoDate,userId:e==null?void 0:e.users,challanType:e==null?void 0:e.challanType,challanCategory:e==null?void 0:e.challanCategory}),S(t=>t+1)},V=()=>{h(!0),J.post(y,{},K()).then(e=>{var t,o;(t=e==null?void 0:e.data)!=null&&t.status&&b((o=e==null?void 0:e.data)==null?void 0:o.data),console.log("fp violation list response => ",e)}).catch(e=>{console.log("error fp violation list => ",e)}).finally(()=>{h(!1)})};return s.useEffect(()=>{V()},[]),a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:i.handleSubmit,onChange:i.handleChange,className:"bg-white poppins p-4 mb-8",children:[a.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Challan Generated Report"}),a.jsxs("section",{className:"flex gap-4 flex-wrap my-6",children:[n==null?void 0:n.map(e=>A(e==null?void 0:e.key,e==null?void 0:e.title,e==null?void 0:e.type,e==null?void 0:e.width,e==null?void 0:e.hint,e==null?void 0:e.required,e==null?void 0:e.options,e==null?void 0:e.okey,e==null?void 0:e.ovalue)),a.jsx("div",{className:"mt-4 w-full md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-4",children:a.jsx("div",{className:" ",children:k?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-center",children:a.jsx(B,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):a.jsxs("button",{type:"submit",className:" flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-sm  text-sm px-5 py-1",children:[a.jsx("span",{className:"",children:a.jsx(P,{fontSize:""})}),a.jsx("span",{children:"Search Record"})]})})})]})]}),Object.keys(p).length!==0&&a.jsx($,{api:m,columns:j,requestBody:p,changeData:N,search:!1,loader:e=>D(e)})]})};export{he as default};
