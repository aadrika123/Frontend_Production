import{d as f,r as s,j as t,o as A,p as L,q as k,t as F,v as C,m as S,w as _,A as j,f as b,P}from"./index-dbad4e29.js";import{b as R}from"./index.esm-23510c7e.js";import{W as w}from"./react-tooltip.min-30bb328a.js";import{S as I}from"./ShimmerEffectInline-63140ef9.js";const H=e=>{const n=f();return s.useMemo(()=>{const d=e==null?void 0:e.matchForApply.map(a=>a.toLowerCase());return Array.isArray(e==null?void 0:e.allRole)&&(e==null?void 0:e.allRole.some(a=>d.includes(a.toLowerCase())))},[e==null?void 0:e.allRole]),s.useMemo(()=>{const d=e==null?void 0:e.matchForSafWf.map(a=>a.toLowerCase());return Array.isArray(e==null?void 0:e.allRole)&&(e==null?void 0:e.allRole.some(a=>d.includes(a.toLowerCase())))},[e==null?void 0:e.allRole]),t.jsx("div",{className:" bg-white shadow-xl py-4 px-2 md:px-6 md:py-6 mt-4 mx-10 mb-10",children:t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"flex-initial ml-4",children:[t.jsx("div",{className:"text-2xl font-bold text-black google-roboto capitalize",children:e==null?void 0:e.heading}),t.jsx("div",{className:"mt-1",children:t.jsxs("span",{className:"text-gray-600",children:[t.jsx(R,{className:"inline text-green-500 text-xl"}),e==null?void 0:e.subHeading]})}),t.jsx("div",{})]}),t.jsxs("div",{className:"flex-1 flex text-right justify-center items-center md:justify-end md:items-end h-full mt-4 md:mt-0",children:[t.jsx(w,{anchorId:"button-3"}),t.jsx("button",{id:"button-3","data-tooltip-content":"Click to change password.",onClick:()=>n(e==null?void 0:e.changePasswordLink),className:"mr-4 cypress_floor_add_update text-gray-700 px-4 md:px-8 py-3 bg-white-600 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-500 hover:shadow-lg focus:bg-indigo-500 hover:text-white focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Change Password"}),t.jsx(w,{anchorId:"button-1"}),t.jsx("button",{id:"button-1","data-tooltip-content":"Click to go to fine & penalty workflow.",onClick:()=>n(e==null?void 0:e.mainWorkflowLink),className:"cypress_floor_add_update text-white px-4 md:px-8 py-3 bg-indigo-500 font-medium border text-xs leading-tight capitalize rounded-xl shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Fine & Penalty Workflow"})]})]})})},W="/assets/forms-9a62bcb2.png",y=e=>t.jsx("div",{class:"transform hover:scale-105 transition duration-300 shadow-xl",children:t.jsxs("div",{class:"p-5 bg-white",children:[t.jsxs("div",{class:"flex justify-between border-b pb-4",children:[t.jsx("span",{className:"w-10 h-10 bg-indigo-100 rounded-full flex justify-center items-center",children:t.jsx("img",{className:"bg-indigo-50 rounded-full p-1",src:W,alt:""})}),t.jsx("div",{class:"bg-indigo-100 rounded-full h-6 px-2 flex justify-items-center text-indigo-600 font-semibold text-xs",children:t.jsx("span",{class:"flex items-center",children:A(L())})})]}),t.jsx("div",{class:"ml-2 w-full flex-1",children:t.jsx("div",{children:t.jsxs("div",{class:"flex justify-between mt-4 pr-4",children:[t.jsx("div",{class:"mt-1 text-base text-gray-600",children:e==null?void 0:e.heading}),t.jsx("div",{className:"font-bold leading-8 text-xl",children:e!=null&&e.loading?t.jsx("div",{class:"spinner2"}):k(e==null?void 0:e.total)})]})})})]})}),v=e=>{const n=f();return t.jsxs("div",{className:"w-full rounded overflow-hidden shadow-lg bg-white p-2 px-10 flex items-center gap-6",children:[t.jsx("div",{className:"flex-1",children:e==null?void 0:e.heading}),t.jsx("div",{onClick:()=>n(e==null?void 0:e.path),className:"cursor-pointer hover:bg-indigo-200 w-10 h-10 bg-indigo-50 rounded-full inline-flex justify-center items-center",children:t.jsx(F,{className:"inline text-indigo-500"})})]})},E=e=>{var d,a,m,c,h,o;const n=f();return t.jsx(t.Fragment,{children:t.jsxs("table",{className:"min-w-full leading-normal",children:[t.jsx("thead",{className:"bg-indigo-100",children:t.jsxs("tr",{className:"font-semibold",children:[t.jsx("th",{scope:"col",className:"px-2 py-2 border-b border-gray-200 text-gray-800  text-left text-sm",children:"#"}),(d=e==null?void 0:e.heading)==null?void 0:d.map(i=>t.jsx("th",{scope:"col",className:"px-2 py-2 border-b border-gray-200 text-gray-800  text-left text-sm",children:i})),t.jsx("th",{scope:"col",className:"px-2 py-2 border-b border-gray-200 text-gray-800  text-left text-sm",children:"Action"})]})}),t.jsx("tbody",{className:"bg-white",children:e!=null&&e.loading?t.jsx("tr",{children:t.jsx("td",{colSpan:((a=e==null?void 0:e.heading)==null?void 0:a.length)+2,children:t.jsx(I,{})})}):t.jsx(t.Fragment,{children:Array.isArray(e==null?void 0:e.data)&&t.jsx(t.Fragment,{children:((m=e==null?void 0:e.data)==null?void 0:m.length)>0?t.jsx(t.Fragment,{children:(h=(c=e==null?void 0:e.data)==null?void 0:c.slice(0,10))==null?void 0:h.map((i,r)=>{var x;return t.jsx(t.Fragment,{children:t.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[t.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r+1}),(x=e==null?void 0:e.dataKey)==null?void 0:x.map(g=>t.jsx("td",{className:"px-2 py-2 text-sm text-left",children:C(i[g])})),t.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[" ",t.jsx("button",{className:"w-max cursor-pointer px-4 py-1 bg-indigo-500 hover:bg-indigo-600 text-white text-sm",onClick:()=>n(`${e==null?void 0:e.viewLink}${i==null?void 0:i.id}`),children:"View"})]})]})})})}):t.jsx("tr",{children:t.jsx("td",{colSpan:((o=e==null?void 0:e.heading)==null?void 0:o.length)+2,className:"text-center text-red-500 font-semibold py-4",children:"No Application Found"})})})})})]})})};function z(){var u;S("Home");const{api_FPTrack:e,api_getInfractionList:n}=P(),d=(u=_("userDetails"))==null?void 0:u.roles,[a,m]=s.useState(null),[c,h]=s.useState(null),[o,i]=s.useState(!1),[r,x]=s.useState(!1),g=()=>{i(!0),j.post(e,{},b()).then(function(l){console.log("approved list data",l.data.data),h(l.data.data)}).catch(function(l){console.log("errorrr.... ",l)}).finally(()=>i(!1))},N=()=>{x(!0),j.post(n,{},b()).then(function(l){console.log("pending list data",l.data.data),m(l.data.data),i(!1)}).catch(function(l){console.log("errorrr.... ",l)}).finally(()=>x(!1))};return s.useEffect(()=>{g(),N()},[]),t.jsxs(t.Fragment,{children:[t.jsx(H,{matchForApply:["JSK"],matchForSafWf:["REGISTRAR","BACK OFFICE"],allRole:d,heading:"Fines & Penalties Home Page",subHeading:"Verified Account",changePasswordLink:"/change-password",mainWorkflowLink:"/fp-workflow",applyLink:"/fp-apply"}),t.jsxs("div",{class:"grid grid-cols-12 items-center mx-10 ",children:[t.jsxs("div",{class:"flex flex-row flex-wrap gap-2 items-start col-span-12 md:col-span-6 ",children:[t.jsx("div",{className:"w-[45%]",children:t.jsx(y,{heading:"Pending Application",total:a==null?void 0:a.total,loading:o})}),t.jsx("div",{className:"w-[45%]",children:t.jsx(y,{heading:"Challan Generated",total:c==null?void 0:c.total,loading:o})})]}),t.jsxs("div",{class:"flex flex-col flex-wrap gap-4 justify-center col-span-12 md:col-span-6 md:mt-0 mt-10",children:[t.jsx("div",{className:"w-full md:w-[50%]",children:t.jsx(v,{heading:"Application List",path:"/fp-list"})}),t.jsx("div",{className:"w-full md:w-[50%]",children:t.jsx(v,{heading:"Search Challan",path:"/search-challan"})})]})]}),t.jsxs("div",{className:"mx-10 mt-10 md:w-auto w-[80vw] overflow-auto",children:[t.jsx("div",{className:"font-bold text-md mb-2 flex-1 text-gray-600",children:"# Recent Applications"}),t.jsx(E,{loading:r,heading:["Application No.","Name","Mobile No.","Holding No.","Violation Name","Violation Section","Penalty Amount","Apply Date"],dataKey:["application_no","full_name","mobile_no","holding_no","violation_name","violation_section","penalty_amount","date"],data:(a==null?void 0:a.data)??[],viewLink:"/fp-details/"})]})]})}export{z as default};
