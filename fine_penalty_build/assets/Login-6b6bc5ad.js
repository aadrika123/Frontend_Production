import{r as h,c as _,u as V,g as L,j as e,s as B,a as u,n as g}from"./index-39011a05.js";import{c as H,a as S,u as I}from"./index.esm-17815669.js";/* empty css              */import{R as W}from"./Hourglass-e49ef29e.js";import{P as U}from"./axios-b369a557.js";import{A as z}from"./ApiHeader-6d683756.js";import{A as C}from"./AxiosInterceptors-a7ee5726.js";import{u as $}from"./DynamicData-89ec0084.js";import{c as G}from"./PowerupFunctions-c3ce5154.js";const J="/assets/fp-ae4c77d6.png",{api_login:K,api_getFreeMenuList:O}=U(),X=H({username:S().required("Enter Username"),password:S().required("Enter Password")});function se(){var p;const{setmenuList:A,setuserDetails:R,setheartBeatCounter:D}=h.useContext(_),[F,l]=h.useState(!1),r=I({initialValues:{username:"",password:""},onSubmit:x=>{E()},validationSchema:X}),f=V();h.useEffect(()=>{L("token")!="null"&&L("token")!=null&&f("/home")},[]);const P={headers:{Accept:"application/json"}},E=x=>{l(!0);let t={email:r.values.username,password:r.values.password};console.log("--1--before login send...",t),C.post(K,t,P).then(function(a){var s,i,o,d,c,n,m,b,w,j,v,y,N,k;console.log("message check login ",a.data),a.data.status==!0?(B("token",(i=(s=a==null?void 0:a.data)==null?void 0:s.data)==null?void 0:i.token),u("userDetails",(d=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:d.userDetails),((m=(n=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:n.userDetails)==null?void 0:m.user_type)=="CO"&&u("menuList",[{name:"Home",path:"/home",children:[]},{name:"Application List",path:"/fp-list",children:[]},{name:"Search Challan",path:"/search-challan",children:[]},{name:"Workflow",path:"/fp-workflow",children:[]}]),((j=(w=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:w.userDetails)==null?void 0:j.user_type)=="EC"&&u("menuList",[{name:"Home",path:"/home",children:[]},{name:"Application List",path:"/fp-list",children:[]},{name:"Search Challan",path:"/search-challan",children:[]},{name:"Violation Master",path:"/violation-master",children:[]},{name:"Reports",path:"",children:[{name:"Challan Generated Report",path:"/challan-generated-report"},{name:"Violation Wise Report",path:"/violation-wise-report"},{name:"Collection Report",path:"/collection-report"},{name:"Comparision Report",path:"/comparision-report"}]}]),((N=(y=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:y.userDetails)==null?void 0:N.user_type)=="JSK"&&u("menuList",[{name:"Home",path:"/home",children:[]},{name:"Application List",path:"/fp-list",children:[]},{name:"Search Challan",path:"/search-challan",children:[]}]),q(),D(M=>M+1),f("/home"),g.success("Login Successfull")):(console.log("false..."),l(!1),g.error((k=a==null?void 0:a.data)==null?void 0:k.message))}).catch(function(a){l(!1),console.log("--2--login error...",a),g.error("Server Error")})},q=()=>{let x={moduleId:10};console.log("request body",x),C.post(O,x,z()).then(function(t){var a,s,i,o,d,c,n,m;console.log("fetched menu list.....",(i=(s=(a=t==null?void 0:t.data)==null?void 0:a.data)==null?void 0:s.userDetails)==null?void 0:i.roles),t.data.status==!0?(A((d=(o=t==null?void 0:t.data)==null?void 0:o.data)==null?void 0:d.permission),R((n=(c=t==null?void 0:t.data)==null?void 0:c.data)==null?void 0:n.userDetails)):(console.log("false menu list => ",(m=t==null?void 0:t.data)==null?void 0:m.message),l(!1),seterrorMsg(G(t.data.message)))}).catch(function(t){l(!1),console.log("--2--login error...",t)})};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:" border-b border-gray-200 bg-white darks:bg-gray-800 darks:border-gray-800",children:e.jsx("div",{className:"container mx-auto xl:max-w-6xl ",children:e.jsx("nav",{className:"flex flex-row flex-nowrap items-center justify-center mt-0 py-4 px-6 ",id:"desktop-menu",children:e.jsx("a",{className:"flex items-center py-2 ltr:mr-4 rtl:ml-4 text-xl cursor-default",children:e.jsxs("div",{className:"flex gap-2",children:[" ",e.jsx("span",{className:"w-7",children:e.jsx("img",{src:(p=$())==null?void 0:p.ulb_logo,alt:"",srcset:""})})," ",e.jsx("span",{className:"font-bold text-xl",children:"Ranchi Nagar Nigam, Ranchi"})]})})})})}),e.jsx("main",{className:" bg-gray-100 flex justify-center items-center md:h-[80vh]",children:e.jsx("div",{className:"py-8 bg-gray-100 darks:bg-gray-900 darks:bg-opacity-40",children:e.jsx("div",{className:"mx-auto px-4 ",children:e.jsxs("div",{className:"flex flex-wrap flex-row justify-center gap-2 items-center",children:[e.jsx("div",{className:" px-4 w-full md:w-[30%]",children:e.jsx("div",{className:"max-w-full w-full px-2 sm:px-12 lg:pr-20 mb-12 lg:mb-0",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"p-6 sm:py-8 sm:px-12 rounded-lg bg-white darks:bg-gray-800 shadow-xl",children:[e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsx("div",{className:"text-center",children:e.jsx("h1",{className:"text-2xl leading-normal mb-3 font-bold text-gray-800 darks:text-gray-300 text-center",children:"Welcome Back"})}),e.jsx("hr",{className:"block w-12 h-0.5 mx-auto my-5 bg-gray-700 border-gray-700"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"inputemail",className:"inline-block mb-2",children:"Username"}),e.jsx("input",{...r.getFieldProps("username"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600",defaultValue:!0,"aria-label":"email",type:"email",required:!0}),e.jsx("span",{className:"text-red-600 text-xs",children:r.touched.username&&r.errors.username?r.errors.username:null})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex flex-wrap flex-row",children:e.jsx("div",{className:"flex-shrink max-w-full w-1/2",children:e.jsx("label",{htmlFor:"inputpass",className:"inline-block mb-2",children:"Password"})})}),e.jsx("input",{...r.getFieldProps("password"),className:"w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600","aria-label":"password",type:"password",defaultValue:!0,required:!0}),e.jsx("span",{className:"text-red-600 text-xs",children:r.touched.password&&r.errors.password?r.errors.password:null})]}),e.jsx("div",{className:"grid",children:F?e.jsx("div",{className:"flex justify-center",children:e.jsx(W,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsxs("button",{type:"submit",className:"py-2 px-4 inline-block text-center rounded leading-normal text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:[e.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"inline-block w-4 h-4 ltr:mr-2 rtl:ml-2 bi bi-box-arrow-in-right",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"flex flex-col items-center justify-center flex-wrap gapx-x-2 gap-y-2 w-full poppins",children:e.jsx("span",{className:"text-gray-700 text-sm font-semibold cursor-pointer w-full text-center",onClick:()=>setmobileCardStatus(!0),children:"Forgot Password"})})})]})})})}),e.jsx("div",{className:"px-4 w-full md:w-[45%]",children:e.jsxs("div",{className:"text-center mt-6 lg:mt-0",children:[e.jsx("img",{src:J,alt:"welcome",className:"w-[60%] h-auto mx-auto hue-rotate-[90deg]"}),e.jsx("div",{className:"px-4 mt-12",children:e.jsx("h1",{className:"text-bold text-4xl mb-2",children:"Fines & Penalties Admin Portal"})})]})})]})})})}),e.jsx("footer",{className:" bg-white py-6 border-t border-gray-200 darks:bg-gray-800 darks:border-gray-800",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl ",children:e.jsx("div",{className:"mx-auto px-4",children:e.jsxs("div",{className:"flex flex-wrap flex-row -mx-4",children:[e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full md:w-1/2 text-center md:ltr:text-left md:rtl:text-right"}),e.jsx("div",{className:"flex-shrink max-w-full px-4 w-full md:w-1/2 text-center md:ltr:text-right md:rtl:text-left"})]})})})})]})}export{se as default};
