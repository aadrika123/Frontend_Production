import{r as a,A as m,a as u,Q as g,j as e,b as xt}from"./index-db227e36.js";import{n as ht}from"./nodata-8c88fed1.js";import"./index-50cdb325.js";import"./Link-6fc20fc6.js";import{u as ft,a as jt,b as gt}from"./formik.esm-243b4d91.js";import{c as yt,a as x}from"./index.esm-d7f7d69e.js";import"./jspdf.plugin.autotable-3961c679.js";import"./iconify-d2386cf5.js";import"./lodash-9f7e64e1.js";import{P as vt}from"./Pagination-4f356562.js";import{F as h,I as y,S as v,c as f}from"./Select-1112e714.js";import{M as d}from"./MenuItem-d1862e39.js";import{T as Nt}from"./TextField-9598b68c.js";import"./hoist-non-react-statics.cjs-6b598447.js";import"./typeof-7fd5df1e.js";const kt=()=>{const[O,N]=a.useState([]),[b,I]=a.useState(1),[S,Q]=a.useState(10),[U,p]=a.useState(),[bt,F]=a.useState(),[V,j]=a.useState(!1),[G,K]=a.useState(!1),X=yt({fy:x().required("Required"),classId:x().required("Required"),sectionId:x().required("Required"),date:x().required("Required")}),c=ft({initialValues:{fy:"",classId:"",sectionId:"",date:""},validationSchema:X,onSubmit:async t=>{console.log("at submit ",t),ut(t),c.resetForm(),j(!1)}}),Z=O,D=t=>{Q(parseInt(t))},tt=t=>{I(t-1)},et=t=>{I(t+1)},[w,lt]=a.useState([]),[o,ct]=a.useState([]),[n,at]=a.useState([]),[It,i]=a.useState(!1),{api_finance_year:it,api_getactiveClassData:dt,api_section_group_map:st,api_attendance_report:rt}=xt(),ot=()=>{m.post(dt,{},u()).then(function(t){var l,s,r;(l=t==null?void 0:t.data)!=null&&l.status?(console.log((s=t==null?void 0:t.data)==null?void 0:s.data),ct((r=t==null?void 0:t.data)==null?void 0:r.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(t){console.log("==2 error list...",t),activateBottomErrorCard(!0,"Error occured while fetching data.")})},nt=t=>{i(!0),m.post(st,{classId:t},u()).then(function(l){l!=null&&l.data?(console.log(l==null?void 0:l.data),at(l==null?void 0:l.data.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(l){console.log("==2 error list...",l),activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)})},mt=()=>{i(!0),m.post(it,{},u()).then(function(t){t!=null&&t.data?(console.log(t==null?void 0:t.data),lt(t==null?void 0:t.data)):activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)}).catch(function(t){console.log("==2 error list...",t),activateBottomErrorCard(!0,"Error occured while fetching data."),i(!1)})},ut=t=>{i(!0),m.post(rt,{fy:t.fy,classId:t.classId,sectionId:t.sectionId,date:t.date},u()).then(function(l){var s,r,E,_,P,C,L,A,B,q,W,M,R,k,z,T,Y,$,H,J;((s=l==null?void 0:l.data)==null?void 0:s.status)===!0?((E=(r=l==null?void 0:l.data)==null?void 0:r.data)==null?void 0:E.total)===0||((P=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:P.data.length)===0?(g.error("Data not Found"),N((L=(C=l==null?void 0:l.data)==null?void 0:C.data)==null?void 0:L.data),p((B=(A=l==null?void 0:l.data)==null?void 0:A.data)==null?void 0:B.last_page),F((W=(q=l==null?void 0:l.data)==null?void 0:q.data)==null?void 0:W.total),j(!1),K(!0)):(console.log("class section map data",(R=(M=l==null?void 0:l.data)==null?void 0:M.data)==null?void 0:R.data),N((z=(k=l==null?void 0:l.data)==null?void 0:k.data)==null?void 0:z.data),p((Y=(T=l==null?void 0:l.data)==null?void 0:T.data)==null?void 0:Y.last_page),F((H=($=l==null?void 0:l.data)==null?void 0:$.data)==null?void 0:H.total),j(!0)):g.error(`${(J=l==null?void 0:l.data)==null?void 0:J.message}`),i(!1)}).catch(function(l){console.log("==2 error list...",l),g.warning("Error occured in submitting form."),i(!1)})};return a.useEffect(()=>{mt(),ot()},[]),a.useEffect(()=>{c.values.classId&&nt(c.values.classId)},[c.values.classId]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"h-[77vh] lg:h-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-start justify-start flex-col mt-5 ml-5 ",children:[e.jsx("h1",{className:"text-4xl font-semibold text-gray-700",children:"Attendance Status"}),e.jsx("h1",{className:"common-header-smalltext",children:"Unlock Your Potential. Join Our Journey Of Education And Excellence"})]}),e.jsx(jt,{value:c,children:e.jsx(gt,{autoComplete:"off",children:e.jsxs("div",{className:"grid grid-cols-12 gap-5 ml-[4vh] mr-[4vh] mt-[2vh]",children:[e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(h,{fullWidth:!0,error:c.touched.fy&&!!c.errors.fy,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{padding:0},children:"Financial year"}),e.jsxs(v,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("fy"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),w&&w.map((t,l)=>e.jsx(d,{value:t==null?void 0:t.fy,children:t==null?void 0:t.fy}))]}),e.jsx(f,{children:c.touched.fy&&c.errors.fy})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(h,{fullWidth:!0,error:c.touched.classId&&!!c.errors.classId,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{padding:0},children:"Select Class"}),e.jsxs(v,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("classId"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),o&&(o==null?void 0:o.map(t=>e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.class_name})))]}),e.jsx(f,{children:c.touched.classId&&c.errors.classId})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-3",children:e.jsxs(h,{fullWidth:!0,error:c.touched.sectionId&&!!c.errors.sectionId,children:[e.jsx(y,{id:"demo-simple-select-label",sx:{padding:0},children:"Select Section"}),e.jsxs(v,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Select Menu",...c.getFieldProps("sectionId"),fullWidth:!0,size:"small",children:[e.jsx(d,{value:"",children:"Select"}),n&&(n==null?void 0:n.map(t=>e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.section_name})))]}),e.jsx(f,{children:c.touched.sectionId&&c.errors.sectionId})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-2",children:e.jsxs(h,{fullWidth:!0,children:[e.jsx(Nt,{labelId:"demo-simple-select-label",id:"demo-simple-select",...c.getFieldProps("date"),fullWidth:!0,size:"small",type:"date"}),e.jsx(f,{children:c.touched.date&&c.errors.date})]})}),e.jsx("div",{className:"col-span-12 lg:col-span-1",children:e.jsx("button",{type:"submit",className:"  save-button",children:"Search"})})]})})}),V?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-auto  w-[150vw] lg:w-[95%] ml-[2vw] shadow-md mt-[2vh]   sm:rounded-lg",children:[e.jsxs("table",{className:"w-full text-sm text-left ",id:"myTable",children:[e.jsx("thead",{className:"text-md ",children:e.jsxs("tr",{className:"text-white bg-[#3f7772]",children:[e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Sl No."}),e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Admission No"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Full Name"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Financial Year"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Class"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Section"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Attendance Status"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Description"})]})}),Z.map((t,l)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b  hover:bg-slate-100 ",children:[e.jsx("td",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap  text-center",children:(b-1)*S+l+1}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.admission_no}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.first_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.academic_year}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.class_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.section_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.attendance_status}),e.jsx("td",{className:"px-6 py-4 text-center",children:t==null?void 0:t.description})]})})}))]}),e.jsx(vt,{ChangePage:D,number:b,lastPage:U,nextPage:et,prevPage:tt,postperpage:S})]})}):G?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:ht,alt:""})})}):null]})})};export{kt as default};
