import{j as e}from"../vendor/data-layer-BGlUSpHP.js";import{d as s,r}from"./router-BHBZNT6y.js";import{a as i}from"./useCustomQuery-BW-qnjpJ.js";import{u as a,a as t,B as o}from"../assets/index-gjZw8ZGq.js";import{L as c}from"./icons-Bmgu5WoN.js";import"../vendor/react-core-HnKmhvXM.js";import"./radix-overlays-DTvnYC8G.js";import"./radix-forms-CWJZ4_fY.js";import"./radix-core-CDbki3D7.js";import"../vendor/styling-Cj_bvvWu.js";import"./ui-components-DwK8En_U.js";import"./utils-Chh2F0W5.js";function n(){return e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(c,{className:"animate-spin text-gray-500",size:37,strokeWidth:2})})}function l(){const{ePramaan:c,loginWithEPramaan:l}=a(),m=s(),d=new URLSearchParams(window.location.search).get("code"),{data:f,isFetching:x,error:j}=i({api:t?.ePramanRedirect,key:"redirectEpramaan",config:{type:"mobile",code:d,nonce:c?.nonce,codeVerifier:c?.codeVerifier},value:[d],options:{enabled:!!d}});return r.useEffect(()=>{f&&!x&&(f?.status?l(f):m("/citizen"))},[f,x,l,m]),r.useEffect(()=>{j&&!x&&m("/citizen")},[j,x,m]),x?e.jsxs("div",{className:"flex flex-col h-28",children:[e.jsx(n,{}),e.jsx("div",{className:"flex flex-col flex-1 items-center justify-center",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("h1",{className:"text-base font-bold text-gray-600",children:"Please wait..."})})})]}):e.jsx("div",{className:"flex flex-col h-28",children:e.jsx("div",{className:"flex flex-col flex-1 items-center justify-center",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(o,{color:"blue",onClick:()=>m("/citizen"),children:"Go back to E-Praman Login"})})})})}export{l as default};
