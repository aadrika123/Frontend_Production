import{j as t,I as se}from"./mui-13e90ce6.js";import{r as i,u as oe}from"./router-56e993c5.js";import{aP as Ie,M as ne,B as ce,aQ as Ae,aR as Pe,A as j,b as w,x as Oe}from"./index-607a6b42.js";import"./sweetalert2.esm.all-93f49e75.js";/* empty css              */import{w as le,t as ke,a as Te,s as Re,b as He,p as De}from"./septic-92c6194c.js";import{m as Ee,b as Ce}from"./marriage-98e794b9.js";import{G as Ge}from"./reactIcons-d26c0b2d.js";import{l as Ve}from"./lodge-40c4a41c.js";import{h as ze}from"./useRazorPayForApp-00a62b48.js";import{U as We}from"./UseRazorpay-4579b10c.js";import{a as ie}from"./redux-4c679fbc.js";import{a as Le}from"./index.esm-79e01f48.js";import{u as Me}from"./useSetLogout-e779dce8.js";import{l as Ue}from"./localstorage-fbfe5679.js";import{P as Fe}from"./PetRegAPIList-e77fa95d.js";import"./axios-ab7cc016.js";import"./materialTailwind-5e750622.js";import"./moment-a9aaa855.js";/* empty css                */import"./i18next-2edfafb0.js";import"./index-1cc92de0.js";const Be="/assets/rigmachine-fbcb41f9.jpeg",qe="/assets/grievancelogo-44b8f316.svg",re="/assets/property-fbb4f386.png";function $e(o){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"}}]})(o)}const Je="/assets/finesimg-e530d190.jpg";function Qe(o){i.useState(!1);const h=()=>{o.navCloseStatus||(o.NAV_CLOSE(),o.NAV_CLOSE_ORIGINAL_STATUS()),o.navCloseStatus&&(o.NAV_OPEN(),o.NAV_OPEN_ORIGINAL_STATUS())};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full",children:[t.jsx("div",{className:"cursor-pointer bg-gray-100 p-2 rounded-lg",onClick:h,children:t.jsx(Ie,{color:"black",size:16})}),t.jsx("div",{className:"col-span-10",children:t.jsx("h4",{className:"text-white font-bold text-sm text-xl text-center",children:"JUIDCO"})})]})})}const Ye=o=>({navCloseStatus:o.navCloseStatus}),Ke=o=>({NAV_OPEN:h=>o({type:"NAV_OPEN"}),NAV_CLOSE:h=>o({type:"NAV_CLOSE"}),NAV_OPEN_ORIGINAL_STATUS:h=>o({type:"NAV_OPEN_ORIGINAL_STATUS"}),NAV_CLOSE_ORIGINAL_STATUS:h=>o({type:"NAV_CLOSE_ORIGINAL_STATUS"})});ie(Ye,Ke)(Qe);const Xe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};ne.setAppElement("#root");function Ze(o){const[h,_]=i.useState(!1),[G,O]=i.useState(!0),[k,S]=i.useState(!1);setTimeout(()=>{O(!1)},1e4);function T(){_(!0)}function I(){_(!1)}const V=oe(),R=()=>{!o.RightNavCloseStatus&&o.RIGHT_NAV_CLOSE(),o.RightNavCloseStatus&&o.RIGHT_NAV_OPEN()},z=()=>{S(!1),Ue(),o.LOGOUT(),V("/")},H=()=>{Me(z)};return t.jsxs(t.Fragment,{children:[k&&t.jsx(ce,{}),t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full pr-12",children:[t.jsx("div",{className:"cursor-pointer",children:t.jsx("div",{onClick:T,className:"bg-gray-100 p-2 rounded-lg relative",children:t.jsx(Ae,{color:"black",size:16})})}),t.jsx("div",{className:"cursor-pointer",onClick:R,children:t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg ml-16",children:t.jsx(Pe,{color:"black",size:16})})})]}),t.jsx(ne,{isOpen:h,onRequestClose:I,style:Xe,contentLabel:"Example Modal",children:t.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[t.jsx("button",{onClick:I,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:t.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:t.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),t.jsxs("div",{class:"p-6 text-center",children:[t.jsxs("div",{className:"w-full flex h-10",children:[" ",t.jsx("span",{className:"mx-auto",children:t.jsx(Le,{size:30})})]}),t.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you want to logout ?"}),t.jsx("button",{type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:H,children:"Yes, I'm sure"})]})]})})]})}const et=o=>({RightNavCloseStatus:o.RightNavCloseStatus,isLoggedIn:o.isLoggedIn}),tt=o=>({RIGHT_NAV_OPEN:h=>o({type:"RIGHT_NAV_OPEN"}),LOGOUT:h=>o({type:"LOGOUT"}),RIGHT_NAV_CLOSE:h=>o({type:"RIGHT_NAV_CLOSE"})});ie(et,tt)(Ze);const It=()=>{var F,B,q,$,J,Q;const o=oe(),{post_citizenDashboard:h,api_getProfileDetails:_,api_applicationCount:G,api_allModulePayment:O,generateDashboardOrderId:k,generateDashboardReceipt:S}=Oe(),{header:T}=Fe(),{handlePayment:I}=We(),[V,R]=i.useState([]),[z,H]=i.useState(null),[l,de]=i.useState([]),[s,me]=i.useState([]),[he,c]=i.useState(!1),[ge,A]=i.useState(0),[W,ue]=i.useState(!1),[y,D]=i.useState([]),[P,E]=i.useState([]),[xe,at]=i.useState([]),[L,M]=i.useState([]),[st,U]=i.useState(),fe=()=>{c(!0),j.post(h,{},w()).then(e=>{var n,r,a;(n=e==null?void 0:e.data)!=null&&n.status&&(R((a=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:a.property),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},be=()=>{c(!0),j.post(O,{},w()).then(e=>{var n,r,a;console.log((n=e==null?void 0:e.data)==null?void 0:n.data),(r=e==null?void 0:e.data)!=null&&r.status&&(me((a=e==null?void 0:e.data)==null?void 0:a.data),c(!1)),c(!1)}).catch(e=>console.error(e)),c(!1)},Ne=()=>{c(!0),j.post(_,{},w()).then(e=>{var n,r;(n=e==null?void 0:e.data)!=null&&n.status&&H((r=e==null?void 0:e.data)==null?void 0:r.data),c(!1),console.log("Getting Citizen details",e)}).catch(e=>console.error(e)),c(!1)},pe=()=>{c(!0),j.post(G,{},w()).then(function(e){var n,r,a;console.log("fetched application count...",(n=e==null?void 0:e.data)==null?void 0:n.data),(r=e==null?void 0:e.data)!=null&&r.status&&(de((a=e==null?void 0:e.data)==null?void 0:a.data),c(!1)),c(!1)}).catch(function(e){console.log("notification error......",e),c(!1)})};i.useEffect(()=>{fe(),Ne(),pe(),be()},[]);let v=[{navigation:"/propertyDashboard",image:re,total:(l==null?void 0:l.propDetails)??0,name:"Property",isHref:!1},{navigation:"/water-dashboard",image:le,total:(l==null?void 0:l.waterDetails)??0,name:"Water Connection(s)",isHref:!1},{navigation:"/trade-dashboard",image:ke,total:(l==null?void 0:l.tradeDetails)??0,name:"Trade License(s)",isHref:!1},{navigation:"/fines",image:Je,total:(l==null?void 0:l.finesDetails)??0,name:"Fines & Penalties",isHref:!1},{navigation:"/advertisement-dashboard",image:Te,total:(l==null?void 0:l.advertisementDetails)??0,name:"Advertisement",isHref:!1},{name:"Lodge & Banquet Registration",navigation:"/marketingDashboard",image:Ve,total:(l==null?void 0:l.lodgeBanquetDetails)??0,isHref:!1},{navigation:"/marriage-index",image:Ee,total:(l==null?void 0:l.marriageDetails)??0,name:"Marriage Registration",isHref:!1},{navigation:"/septicTankDashboard",image:Re,total:(l==null?void 0:l.septicTankerDetails)??0,name:"Septic Tank",isHref:!1},{navigation:"/waterTankerDashboard",image:He,total:(l==null?void 0:l.waterTankerDetails)??0,name:"Water Tank",isHref:!1},{navigation:"/pet-registration-dashboard",image:De,total:(l==null?void 0:l.petDetails)??0,name:"Pet Registration",isHref:!1},{navigation:"/vehicle-registration-dashboard",image:Be,total:(l==null?void 0:l.rigDetails)??0,name:"Rig Registration",isHref:!1},{navigation:`${window.location.origin}/grievance/citizen-dashboard/home`,image:qe,total:(l==null?void 0:l.grievanceDetails)??0,name:"Grievance",isHref:!0}];console.log("module data===>",l);const C=(e,n,r)=>{const a=e.reduce((x,d)=>{var u;const m=(u=s==null?void 0:s.propDetails)==null?void 0:u.find(b=>b.id===d),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),g=n.reduce((x,d)=>{var u;const m=(u=s==null?void 0:s.waterDetails)==null?void 0:u.find(b=>b.id===d),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),N=r.reduce((x,d)=>{var u;const m=(u=s==null?void 0:s.swmDetails)==null?void 0:u.find(b=>b.id===d),f=parseFloat(m==null?void 0:m.amount)||0;return x+f},0),p=a+g+N;return Number(p).toFixed(2)},je=()=>{var n,r,a;const e=!W;if(ue(e),e){const g=((n=s==null?void 0:s.propDetails)==null?void 0:n.map(d=>d.id))||[],N=((r=s==null?void 0:s.waterDetails)==null?void 0:r.map(d=>d.id))||[],p=((a=s==null?void 0:s.swmDetails)==null?void 0:a.map(d=>d.id))||[];D(g),E(N),M(p);const x=C(g,N,p);A(x)}else D([]),E([]),M([]),A("0.00")},ye=e=>{D(n=>{const r=n.includes(e)?n.filter(g=>g!==e):[...n,e],a=C(r,P,L);return A(a),r})},ve=e=>{E(n=>{const r=n.includes(e)?n.filter(g=>g!==e):[...n,e],a=C(y,r,L);return A(a),r})},we=()=>{var n,r;(n=(s==null?void 0:s.propDetails)||[])==null||n.filter(a=>y.includes(a.id));const e=(r=(s==null?void 0:s.waterDetails)||[])==null?void 0:r.filter(a=>P.includes(a.id));_e(e)},_e=e=>{c(!0);const n=e.map(a=>({consumerId:a.id,amount:a.total_demand_amount,paymentMode:"Online",demandFrom:a.demand_from,demandUpto:a.demand_upto,remarks:"Ok"}));let r={propId:y,consumerDetails:n};console.log(r),j.post(k,r,w()).then(function(a){var g,N,p,x,d,m,f,u,b,Y,K,X,Z,ee,te,ae;console.log("fetched application count...",a),(g=a==null?void 0:a.data)!=null&&g.status?(c(!1),window.ReactNativeWebView?ze({generatedOrder:(N=a==null?void 0:a.data)==null?void 0:N.data,payload:{applicationId:(x=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:x.applicationId,departmentId:(m=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:m.departmentId,status:"",captured:"1",card_id:"",amount:(u=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:u.amount,payment_method:"upi/netbanking",workflow_id:(Y=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:Y.workflowId,user_id:(X=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:X.userId,ulb_id:(ee=(Z=a==null?void 0:a.data)==null?void 0:Z.data)==null?void 0:ee.ulbId,created_at:""},api:S,returnUrl:"/citizen/dashboardPaymentHistory",isParam:!0}):(I((te=a==null?void 0:a.data)==null?void 0:te.data,Se),c(!1),console.log((ae=a==null?void 0:a.data)==null?void 0:ae.data))):c(!1)}).catch(function(a){console.log("notification error......",a),c(!1)})},Se=async e=>{console.log(e,"generateReceipt"),c(!0);let n={applicationId:e==null?void 0:e.applicationId,departmentId:e==null?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:e==null?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:e==null?void 0:e.workflowId,user_id:e==null?void 0:e.user_id,ulb_id:e==null?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:e==null?void 0:e.orderId,payment_id:e==null?void 0:e.razorpay_payment_id,created_at:""};console.log("Receipt",e),j.post(S,n,T).then(r=>{console.log("genereted receipt",r),U(!1),r.data.status==!0?(console.log("Oder ID Generated +++++++++",r.data),o("/dashboardPaymentHistory"),c(!1)):(notify(r.data.message,"error"),c(!1))}).catch(r=>{U(!1),console.log("Error genrating order id",r),notify(r.message,"error"),c(!1)})};return t.jsxs(t.Fragment,{children:[he&&t.jsx(ce,{}),t.jsxs("div",{className:"grid grid-cols-12 h-screen bg-white mx-4 md:mx-0",children:[t.jsxs("div",{className:" md:ml-11 mt-12 col-span-12 md:col-span-8 order-last md:order-first",children:[t.jsx("h1",{className:"text-2xl font-semibold max-sm:text-center",children:"All E-Governance Services"}),t.jsxs("div",{className:"flex flex-wrap gap-x-[4rem] gap-y-3 mt-10 bg-white  max-sm:justify-center max-sm:mb-20",children:[console.log("Line 170",v),Array.isArray(v)&&(v==null?void 0:v.map(e=>t.jsx("div",{onClick:()=>{e.isHref?window.location.href=e.navigation:o(e==null?void 0:e.navigation)},className:"md:w-40 h-26 bg-white rounded-lg shadow-sm max-sm:w-full cursor-pointer",children:t.jsx("div",{className:"md:w-52 max-sm:w-full h-28 bg-white rounded-lg shadow-xl pl-2",children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-3 ",children:[t.jsx("div",{className:"w-10 h-10 rounded-full m-2 flex justify-center items-center",children:t.jsx("img",{src:e.image,alt:"",className:"w-8 h-8 rounded-full"})}),t.jsx("div",{className:"w-10 h-10 rounded-full mt-4 font-semibold flex justify-center items-center",children:(e==null?void 0:e.total)??0})]}),t.jsx("div",{className:"col-span-9 ml-4 ",children:t.jsx("h1",{className:"font-semibold text-sm mt-1 cursor-pointer",children:e==null?void 0:e.name})})]})})},e.id))),t.jsx("div",{className:"w-52 h-28shadow-xl pl-2",children:t.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:t.jsxs("span",{className:"hover:bg-gray-200 p-6 rounded-full cursor-pointer",onClick:()=>o("/propertyDashboard"),children:[" ",t.jsx($e,{className:"text-3xl"})]})})})]})]}),t.jsxs("div",{className:"col-span-12 md:col-span-4 order-1 md:order-last pr-10 pt-5 ml-[2rem]",children:[t.jsx("div",{className:"flex justify-center items-center w-full mt-10 font-semibold text-xl",children:t.jsxs("div",{className:"w-full bg-white shadow-lg rounded-md px-4 py-2",children:[t.jsxs("div",{className:"bg-blue-500 px-4 py-2 rounded-lg text-white flex items-center justify-center space-x-2",children:[t.jsx("img",{src:Ce,alt:"Bell Icon",className:"w-6 h-6"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Pending Demands"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:re,alt:"Property Icon",className:"w-6 h-6 mr-2"}),"Property"]}),((F=s==null?void 0:s.propDetails)==null?void 0:F.length)!=0&&((B=s==null?void 0:s.waterDetails)==null?void 0:B.length)!=0&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"selectAll",className:"font-semibold mr-2 text-lg",children:"Select All"}),t.jsx("input",{type:"checkbox",id:"selectAll",checked:W,onChange:je,className:"w-6 h-4"})]})]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Holding No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((q=s==null?void 0:s.propDetails)==null?void 0:q.length)>0?($=s==null?void 0:s.propDetails)==null?void 0:$.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.holding_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>ye(e.id,e.total_demand_amount)})})]},e.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(se,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:le,alt:"Water Icon",className:"w-6 h-6 mr-2"}),"Water"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((J=s==null?void 0:s.waterDetails)==null?void 0:J.length)>0?t.jsx(t.Fragment,{children:(Q=s==null?void 0:s.waterDetails)==null?void 0:Q.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.consumer_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:P.includes(e.id)||xe.includes(e),onChange:()=>ve(e.id,e.total_demand_amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(se,{})," No Pending Dues"]})})})]})]}),(y.length>0||P.length>0)&&t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-lg",children:["Total Amount : ",ge]}),t.jsx("button",{onClick:we,className:"bg-green-500 text-white px-2 py-1 rounded-lg hover:bg-green-600 ",children:"Pay Now"})]})]})}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx("button",{onClick:()=>o("/dashboardPaymentHistory"),className:"bg-blue-500 px-3 py-1.5 rounded-md text-white text-sm font-medium shadow-md hover:bg-blue-600 active:bg-blue-700 transition duration-200",children:"Payment History"})})]})]})]})};export{It as default};
