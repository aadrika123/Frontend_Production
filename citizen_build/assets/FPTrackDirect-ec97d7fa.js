import{j as e}from"./mui-376c770d.js";import{r as l,u as X}from"./router-87042356.js";import{ai as Z,aj as ee,b as T,P as ae,c as te,d as $,u as ne,R as re,ak as se,n as F,y as ie,W as le}from"./index-4a5ec186.js";import{a as M}from"./axios-97164839.js";import{a as I}from"./index.esm-52adad60.js";import{f as oe}from"./index.esm-c151f2f7.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-f5c77cc0.js";import"./i18next-e99b4042.js";const de=a=>{const[S,x]=l.useState(10),[k,u]=l.useState(1),[g,E]=l.useState(0),[D,A]=l.useState(0),[f,q]=l.useState(0),[_,R]=l.useState(),[b,B]=l.useState(!1),[t,s]=l.useState(!1),[y,H]=l.useState([]),[N,o]=l.useState(!1),c=()=>{s(!1),o(!0),Object.keys(a==null?void 0:a.requestBody).length!==0&&typeof a.loader=="function"&&a.loader(!0),M.post(a==null?void 0:a.api,{...a==null?void 0:a.requestBody,perPage:S,page:k},T()).then(n=>{var i,d,j,w,h,r,v,m,P,C;((i=n==null?void 0:n.data)==null?void 0:i.status)==!0?(console.log("success getting list => ",n),a!=null&&a.getData&&(a==null||a.allData((d=n==null?void 0:n.data)==null?void 0:d.data)),H((w=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:w.data),q((r=(h=n==null?void 0:n.data)==null?void 0:h.data)==null?void 0:r.total),E((m=(v=n==null?void 0:n.data)==null?void 0:v.data)==null?void 0:m.current_page),A((C=(P=n==null?void 0:n.data)==null?void 0:P.data)==null?void 0:C.last_page),s(!1)):(console.log("false error while getting list => ",n),s(!0))}).catch(n=>(console.log("error while getting list => ",n),s(!0))).finally(()=>{o(!1),Object.keys(a==null?void 0:a.requestBody).length!==0&&typeof a.loader=="function"&&a.loader(!1),s(!1)})},L=()=>{u(g+1)},V=()=>{u(g-1)},W=n=>{let i=parseInt(f/n),d=parseInt(f%n);if(d==0){i<g&&u(i),x(n);return}if(d!=0){i+1<g&&u(i+1),x(n);return}},z=()=>{u(1)},Y=()=>{u(D)},G=n=>{u(n)},p=n=>n==null?void 0:n.map((d,j)=>{var h;const w=(h=a==null?void 0:a.columns)==null?void 0:h.map((r,v)=>{var P,C;var m=d[r==null?void 0:r.accessor];if(r!=null&&r.option&&((P=r==null?void 0:r.option)==null?void 0:P.length)>0){const O=(C=r==null?void 0:r.option)==null?void 0:C.find(U=>U.hasOwnProperty(d[r==null?void 0:r.accessor]));O?m=O[d[r==null?void 0:r.accessor]]:m=d[r==null?void 0:r.accessor]}return(r==null?void 0:r.Header.toLowerCase())!="action"&&{[r==null?void 0:r.Header]:r!=null&&r.accessor?m:j+1}});return Object.assign({},...w)}),J=n=>{},K=n=>{o(!0),B(!1),M.post(a==null?void 0:a.api,{...a==null?void 0:a.requestBody,perPage:f},T()).then(i=>{var d,j,w,h,r,v,m;((d=i==null?void 0:i.data)==null?void 0:d.status)==!0&&(n=="csv"&&(R(p((w=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:w.data)),Q()),n=="excel"&&J(p((r=(h=i==null?void 0:i.data)==null?void 0:h.data)==null?void 0:r.data)),n=="pdf"&&exportToPDF(p((m=(v=i==null?void 0:i.data)==null?void 0:v.data)==null?void 0:m.data))),o(!1)}).catch(i=>{o(!1)})},Q=()=>{B(!0)};return l.useEffect(()=>{(a==null?void 0:a.requestBody)!=null&&(u(1),x(10),c())},[a==null?void 0:a.changeData]),l.useEffect(()=>{o(!0),c()},[k,S]),e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),b&&e.jsx(Z,{data:_}),N,!N&&(y==null?void 0:y.length)>0?e.jsx(e.Fragment,{children:e.jsx(ee,{search:a==null?void 0:a.search,currentPage:g,lastPage:D,goFirst:z,goLast:Y,count1:f,columns:a==null?void 0:a.columns,dataList:y,exportStatus:a==null?void 0:a.exportStatus,perPage:S,perPageC:W,totalCount:f,nextPage:L,prevPage:V,exportDataF:K,exportData:_,gotoPage:n=>G(n)})}):e.jsx(e.Fragment,{children:!N&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})},we=()=>{const{api_FPTrack:a,api_searchChallanDirect:S}=ae(),x=X(),k=[{Header:"Sl.No.",Cell:({row:t})=>e.jsx("div",{children:(t==null?void 0:t.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.mobile)}},{Header:"Application No",accessor:"application_no",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.application_no)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.challan_no)}},{Header:"Challan Date",accessor:"challan_date",Cell:({cell:t})=>{var s;return ie((s=t.row.original)==null?void 0:s.challan_date)},className:"w-[7%]"},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:t})=>{var s;return le((s=t.row.original)==null?void 0:s.total_amount)}},{Header:"Has Expired",accessor:"hasExpired",Cell:({cell:t})=>{var s;return F((s=t.row.original)==null?void 0:s.has_expired)}},{Header:"Action",Cell:({cell:t})=>{var s,y,H,N;return e.jsxs("div",{className:"flex items-center flex-wrap md:flex-nowrap flex-row gap-2 ",children:[e.jsxs("button",{onClick:()=>{var o,c;x(`/challan-show/${(c=(o=t==null?void 0:t.row)==null?void 0:o.original)==null?void 0:c.id}/direct`)},className:`border border-sky-700 text-sky-700 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-sky-700 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(I,{})," Challan"]}),!((y=(s=t==null?void 0:t.row)==null?void 0:s.original)!=null&&y.payment_status)&&e.jsxs("button",{onClick:()=>{var o,c;x(`/fp-pay/${(c=(o=t==null?void 0:t.row)==null?void 0:o.original)==null?void 0:c.id}/direct`)},className:`border border-orange-600 text-orange-500 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-orange-600 \r
                            hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(oe,{})," Pay"]}),((N=(H=t==null?void 0:t.row)==null?void 0:H.original)==null?void 0:N.payment_status)&&e.jsxs("button",{onClick:()=>{var o,c;x(`/payment-receipt/${(c=(o=t==null?void 0:t.row)==null?void 0:o.original)==null?void 0:c.transaction_no}/direct`)},className:`border border-green-600 text-green-600 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-green-600 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(I,{})," Receipt"]})]})}}],[u,g]=l.useState({}),[E,D]=l.useState(0),[A,f]=l.useState(!1),[q,_]=l.useState(!1),R=te({searchBy:$().required("Select filter type"),entry:$().required("Enter the parameter")}),b=ne({initialValues:{searchBy:"",entry:""},validationSchema:R,onSubmit:t=>{B(t)}}),B=t=>{_(!0),g({[t==null?void 0:t.searchBy]:t==null?void 0:t.entry}),D(s=>s+1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full  md:pt-10",children:e.jsxs("div",{className:" ",children:[e.jsx("div",{className:"text-3xl font-bold text-center mt-10",children:"Fines & Penalties"}),e.jsx("div",{className:" text-center",children:"Ranchi Municipal Corporation, Ranchi"}),e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center p-4 md:p-6 transition-all duration-200",children:[e.jsx("aside",{className:" w-full bg-slate-50 shadow-md h-max",children:e.jsxs("form",{onSubmit:b.handleSubmit,onChange:b.handleChange,className:"bg-white poppins p-4",children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Search Your Challan"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-4 items-center gap-y-2 pb-4 mb-2 border-b",children:[e.jsxs("div",{className:"w-full md:w-[25%]",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...b.getFieldProps("searchBy"),className:`${b.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"applicationNo",children:"Application Number"}),e.jsx("option",{value:"mobile",children:"Mobile Number"}),e.jsx("option",{value:"challanNo",children:"Challan Number"})]})]}),e.jsxs("div",{className:"w-full md:w-[25%] ",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Parameter",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...b.getFieldProps("entry"),placeholder:"Enter the parameter",className:"h-10  w-full px-3 py-1 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-gray-400 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-400 shadow-md"})]}),e.jsx("div",{className:"mt-4 w-full  justify-center md:justify-start md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:e.jsx("div",{className:" ",children:A?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(re,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:"py-2 flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-md  text-sm px-5",children:[e.jsx("span",{className:"",children:e.jsx(se,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]})}),e.jsx("aside",{className:"w-full overflow-clip transition-all duration-300 h-full",children:e.jsx(de,{api:S,columns:k,requestBody:u,changeData:E,search:!1,loader:t=>f(t),exportStatus:!1})})]})]})})})};export{we as default};
