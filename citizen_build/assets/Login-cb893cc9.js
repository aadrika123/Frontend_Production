import{u as B,r as o,g as R,a as $,e as q,c as Y,d as v,b as U,j as e,h as W,S as Z,R as G,i as H,k as S,l as J,f as K}from"./index-c4004965.js";import Q from"./MobileNoCard-dbf69311.js";import X from"./OtpCard-34da57d3.js";const ee="/assets/login2-88f52aba.svg",re=()=>{B();const[x,l]=o.useState(!1),[C,n]=o.useState(!1),[M,d]=o.useState(!1),{api_citizenLogin2:L,api_ePramanLogin:te}=K(),[P,k]=o.useState(null);o.useState(!1);const{notify:r,setheartBeatCounter:E}=o.useContext(R),c=$(),[F,m]=o.useState();o.useState(!0),q();const z=Y().shape({mobile:v().required("Enter mobile no. !").min(10).max(10),password:v().min(6,"Minimum six character !").max(50,"Too Long!").required("Enter password no. !").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#.")}),a=U({initialValues:{mobile:"",password:""},onSubmit:s=>{console.log("post data",s),I(s)},validationSchema:z}),I=s=>{m(""),l(!0),u(!1),H.post(L,{mobile:s==null?void 0:s.mobile,password:s==null?void 0:s.password}).then(t=>{var i,b,p,h,g,f,w,y,j,N;console.log("response after login....",t==null?void 0:t.data),((i=t==null?void 0:t.data)==null?void 0:i.status)===!0?(localStorage.setItem("citizen_token",(p=(b=t==null?void 0:t.data)==null?void 0:b.data)==null?void 0:p.token),l(!1),r("Login Success","success"),window.localStorage.setItem("citizenMobile",(g=(h=t==null?void 0:t.data)==null?void 0:h.data)==null?void 0:g.mobile),window.localStorage.setItem("citizenName",(w=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:w.userName),E(A=>A+1),c("/landingDashboard")):(console.log("Login Failed",(y=t==null?void 0:t.data)==null?void 0:y.message),r(S((j=t==null?void 0:t.data)==null?void 0:j.message),"error"),l(!1)),console.log("=== Invalid Details",t),m(S((N=t==null?void 0:t.data)==null?void 0:N.message))}).catch(t=>{m("Oops! Please try again later."),console.log(t),console.log("-Exception--",t),l(!1),u(!0),r("something went wrongg !!","error")})},_=s=>{let t=s.target.name,i=s.target.value;t=="mobile"&&a.setFieldValue("mobile",J(i,a.values.mobile,10))},T=()=>{r("Mobile no. has been verified successfully !","success"),c("/change-password/forgot")},D=()=>{n(!1)},O=()=>{d(!1)},[V,u]=o.useState(!1);return V?e.jsx(W,{children:e.jsx(Z,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):C?e.jsx(Q,{cardFor:"Login",closeMobileModal:D,headTitle:"Forgot Password",title:"Enter mobile to get OTP",desc:"Enter your mobile no, which is attached to your account.",setverifedMobileNo:k,setmobileCardStatus:n,setotpCardStatus:d}):M?e.jsx(X,{verifedMobileNo:P,closeOtpModal:O,bottomNaviation:!0,headTitle:"Forgot OTP",callback:T,setotpCardStatus:d}):e.jsx(e.Fragment,{children:e.jsx("div",{className:" flex items-center justify-center text-center mt-6 md:p-0 mx-auto bg-white md:bg-none shadow-lg md:shadow-none w-full h-full",children:e.jsx("div",{className:" w-full h-full flex justify-center",children:e.jsx("form",{onChange:_,onSubmit:a.handleSubmit,className:"md:w-[60%] w-full md:h-[60%]",children:e.jsxs("div",{className:"grid grid-cols-12 px-6 md:px-0 drop-shadow-md w-full",children:[e.jsx("div",{className:"col-span-6 hidden md:py-10 bg-slate-100 p-5 md:flex justify-center items-center border-r",children:e.jsx("img",{src:ee,className:"hue-rotate-[-30deg] w-[80%]"})}),e.jsx("div",{className:"w-full md:px-10 col-span-12 md:col-span-6 md:shadow-none bg-white py-10 px-4",children:e.jsxs("div",{className:"w-full  pb-6 pt-0 md:py-6 md:mt-10 text-gray-700",children:[e.jsx("h1",{className:"text-center text-md font-semibold md:my-1 capitalize w-full"}),e.jsx("h1",{className:"text-center font-semibold my-1 flex justify-center",children:e.jsx("span",{className:"px-1 text-semibold text-2xl -mt-5 mb-4 border-b-2 border-b-[#99B37C]",children:"Log In "})}),e.jsxs("div",{className:"my-3 relative text-sm",children:[e.jsxs("div",{className:"text-gray-600 static mb-1 font-semibold text-left px-8 md:px-10 ",children:["Mobile No.",e.jsx("span",{className:"text-red-500 font-bold",children:"*"})]}),e.jsx("input",{type:"text",min:0,...a.getFieldProps("mobile"),className:"cypress_mobile border-b border-b-gray-200 focus:border-b focus:border-b-indigo-500  pl-2 px-3 py-1 w-full md:w-5/6 shadow-sm h-10 outline-none border border-solid border-gray-300 rounded hover:bg-gray-100",placeholder:"Enter Your mobile"}),e.jsx("div",{children:e.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.mobile&&a.errors.mobile?a.errors.mobile:null})})]}),e.jsxs("div",{className:"my-3 relative text-sm mt-4",children:[e.jsxs("div",{className:"text-gray-600 static mb-1 font-semibold text-left px-8 md:px-10",children:["Password ",e.jsx("span",{className:"text-red-500 font-bold",children:"*"})]}),e.jsx("input",{type:"password",...a.getFieldProps("password"),className:"cypress_password border-b border-b-gray-200 focus:border-b focus:border-b-indigo-500  pl-2 px-3 py-1 w-full md:w-5/6 shadow-sm h-10 outline-none border border-solid border-gray-300 rounded hover:bg-gray-100",placeholder:"Enter Your Password"}),e.jsx("div",{children:e.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.password&&a.errors.password?a.errors.password:null})})]}),e.jsx("div",{className:" my-10"}),e.jsx("div",{className:"text-center mt-3 text-xs"}),e.jsxs("div",{className:"my-5 self-center justify-self-center relative",children:[e.jsxs("div",{className:"text-red-600 text-sm font-semibold my-3 ",children:[" ",e.jsxs("span",{className:"",children:[" ",F]})]}),x?e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e.jsx("button",{type:"submit",disabled:x,className:"cypress_button_login bg-[#99B37C] hover:bg-[#99B37C] px-5 shadow-xl py-2 w-1/2  rounded-md text-white text-lg font-semibold",children:"Login"})]}),e.jsx("div",{className:"flex flex-row flex-wrap gapx-x-2 gap-y-2 w-full poppins justify-center",children:e.jsx("span",{className:"text-gray-700 text-sm font-semibold cursor-pointer md:w-[40%] w-full",onClick:()=>n(!0),children:"Forgot Password"})}),e.jsx("div",{className:"w-full flex justify-center mt-10",children:e.jsx("span",{onClick:()=>c("/register"),className:"hover:underline text-gray-700 font-semibold hover:bg-white px-3 py-1 cursor-pointer float-right",children:"Register"})})]})})]})})})})})};export{re as default};
