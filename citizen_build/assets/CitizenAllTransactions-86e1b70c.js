import{j as e}from"./mui-13ddac22.js";import{r as l,u as v}from"./router-07787e9d.js";import{C}from"./CitizenApplyApiList-f5f1cc72.js";import{C as _}from"./CustomErrorBoundary-6bc2443f.js";import{n as s,j as N}from"./PowerupFunctions-b93f3ef9.js";import{u as S}from"./UseSetTitle-3574e59f.js";import{T as A}from"./TitleBar-728af2ad.js";import{a as L}from"./axios-67d8a945.js";import{L as R}from"./ListTable-f7d465a4.js";import{A as P}from"./ApiHeader-9c14b40d.js";import{B as F}from"./BrandLoader-4735ecb8.js";import{S as B}from"./ServerErrorCard-68e24f9e.js";import"./CommonModal-b239bdef.js";import"./react-df1e779d.js";import"./BackendUrl-b545fbc2.js";import"./index-d3e69d32.js";import"./redux-af83932f.js";import"./i18next-e2c66b9b.js";import"./index-78a7f7bc.js";import"./index.esm-fee2921f.js";import"./reactIcons-4e4e3f5e.js";import"./index.esm-a61f9495.js";import"./index-94b9bccb.js";import"./index.esm-6db88f18.js";/* empty css                  */import"./DynamicData-8912af5f.js";import"./useTranslation-7a2cbf87.js";import"./index-c9914c9b.js";function E(r){var u;const[i,c]=l.useState(),[a,t]=l.useState(!1),[n,d]=l.useState(!1),[H,m]=l.useState(!1);let T=[...(u=r==null?void 0:r.transactionRules)==null?void 0:u.tableColumns];l.useEffect(()=>{w()},[]);const w=()=>{var p,f,x,y,g,h;m(!0),d(!1),t(!1),L[(x=(f=(p=r==null?void 0:r.transactionRules)==null?void 0:p.api)==null?void 0:f.api_getTranscationHistory)==null?void 0:x.method]((h=(g=(y=r==null?void 0:r.transactionRules)==null?void 0:y.api)==null?void 0:g.api_getTranscationHistory)==null?void 0:h.url,P()).then(function(o){var j,b;(j=o==null?void 0:o.data)!=null&&j.status?(c((b=o==null?void 0:o.data)==null?void 0:b.data),t(!0)):d(!0),m(!1)}).catch(function(o){d(!0),t(!1),m(!1)})};if(n)return e.jsx(B,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});if(!n)return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto bg-white",children:[e.jsx("h1",{className:"uppercase font-semibold text-center tracking-wider text-xl border-b pb-2 mb-4",children:"Property Payment History"}),H&&e.jsx(F,{}),a&&e.jsx(_,{errorMsg:"Some bug found",children:e.jsx(R,{assessmentType:!1,columns:T,dataList:i,export:!1})}),Array.isArray(i)&&(i==null?void 0:i.length)===0&&e.jsx("div",{className:"text-center mt-5 rounded py-2 font-semibold text-red-600",children:"No Transaction Found"})]})})}function dt(){S("Property Payment History");const r=v(),{api_getTranscationHistory:i}=C(),c={api:{api_getTranscationHistory:{method:"get",url:i}},transactionInfo:{title:"Citizen Payment History"},tableColumns:[{Header:"#",Cell:({row:a})=>e.jsx("div",{className:"pr-2",children:a.index+1})},{Header:"Type",accessor:"application_type",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.application_type)})}},{Header:"SAF No.",accessor:"saf_no",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.saf_no)})}},{Header:"Holding No.",accessor:"holding_no",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.holding_no)})}},{Header:"Transaction No.",accessor:"tran_no",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.tran_no)})}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.payment_mode)})}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:s((t=a.row.original)==null?void 0:t.tran_date)})}},{Header:"Amount",accessor:"amount",Cell:({cell:a})=>{var t;return e.jsx("div",{className:"pr-2",children:N((t=a.row.original)==null?void 0:t.amount)})}},{Header:"Receipt",Cell:({cell:a})=>e.jsx("button",{onClick:()=>{var t,n;a.row.original.application_type=="SAF"?r(`/paymentReceipt/${(t=a.row.original)==null?void 0:t.tran_no}/saf`):r(`/paymentReceipt/${(n=a.row.original)==null?void 0:n.tran_no}/holding`)},type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})}]};return e.jsxs(e.Fragment,{children:[e.jsx(A,{titleText:"Property Transaction History"}),e.jsx(_,{errorMsg:"Bug in TransactionHistoryFactory",children:e.jsx(E,{transactionRules:c})})]})}export{dt as default};
