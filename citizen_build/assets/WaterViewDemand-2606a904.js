import{r as d,u as w,a as A,aO as _,A as N,j as e,o as M,aA as i,bT as a}from"./index-9b75662c.js";import{W as Y}from"./WaterTopButtons-c68da3f3.js";function W(T){var o,l,h,m;const[g,n]=d.useState(!1),[s,f]=d.useState(),[r,j]=d.useState(),{id:x}=w(),y=A(),{api_waterApprovedApplicationDetails:b,api_waterListDemand:p,header:c}=_(),v=()=>{n(!0),N.post(b,{id:x},c).then(function(t){console.log("water Approved Application Details",t.data.data),f(t.data.data),n(!1)}).catch(function(t){console.log("Error : water Approved Application Details",t),n(!1)})};return d.useEffect(()=>{N.post(p,{ConsumerId:x},c).then(t=>{t.data.status?(console.log("Fetched Water Demand List",t.data.data),j(t.data.data)):console.log("Demand not found")}).catch(t=>{console.log("Exception while fetching Water Demand",t)})},[x]),d.useEffect(()=>{v()},[x]),e.jsxs(e.Fragment,{children:[g&&e.jsx(M,{}),e.jsx(Y,{active:"demand",consumerNo:s==null?void 0:s.consumer_no}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-2 container mx-auto w-full",children:e.jsxs("div",{className:"col-span-12 rounded-lg",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"",children:[e.jsxs("h1",{className:"px-1 font-semibold font-serif  text-gray-500",children:[e.jsx(i,{className:"inline"})," Basic Details"]}),e.jsx("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl",children:e.jsxs("div",{className:"flex flex-wrap gap-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:s!=null&&s.ulb_name?s==null?void 0:s.ulb_name:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"ULB Name"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s!=null&&s.ward_name?s==null?void 0:s.ward_name:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s!=null&&s.consumer_no?s==null?void 0:s.consumer_no:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Consumer No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s!=null&&s.connection_through?s==null?void 0:s.connection_through:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Connection Through"})]}),(s==null?void 0:s.connection_through)=="SAF"?e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:s!=null&&s.saf_no?s==null?void 0:s.saf_no:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"SAF No"})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:s!=null&&s.holding_no?s==null?void 0:s.holding_no:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:s!=null&&s.owner_char_type?s==null?void 0:s.owner_char_type:"N/A"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]})]})})]}),r?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap w-full space-x-0 my-5",children:[e.jsxs("div",{className:"grow",children:[e.jsx("span",{className:"text-sm",children:"Total Dues :"})," ",e.jsxs("span",{className:"font-semibold text-gray-700 text-lg",children:["₹ ",r==null?void 0:r.totalSumDemand]})]}),e.jsxs("div",{className:"grow",children:[e.jsx("span",{className:"text-sm",children:"Due From :"})," ",e.jsxs("span",{className:"font-semibold text-gray-700 text-lg",children:[a((o=r==null?void 0:r.consumerDemands[0])==null?void 0:o.demand_from,"YYYY-MM-DD").format("DD-MMM-yy")," "]})]}),e.jsxs("div",{className:"grow",children:[e.jsx("span",{className:"text-sm",children:"Due Upto :"})," ",e.jsxs("span",{className:"font-semibold text-gray-700 text-lg",children:[a((l=r==null?void 0:r.consumerDemands.at(-1))==null?void 0:l.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy")," "]})]}),e.jsxs("div",{className:"grow",children:[e.jsx("span",{className:"text-sm",children:"Total Due Months :"})," ",e.jsx("span",{className:"font-semibold text-gray-700 text-lg",children:(h=r==null?void 0:r.consumerDemands)==null?void 0:h.length})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("h1",{className:"px-1 font-semibold font-serif text-gray-500",children:[e.jsx(i,{className:"inline"})," Demand Details"]}),e.jsxs("table",{className:"min-w-full leading-normal mt-2 bg-white rounded-lg shadow-xl p-4",children:[e.jsx("thead",{className:"font-bold text-left text-sm border text-gray-800 bg-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand From"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Upto"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Amount"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Penalty"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Connection Type"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Payable Amount "})]})}),e.jsx("tbody",{className:"text-sm",children:e.jsx(e.Fragment,{children:(m=r==null?void 0:r.consumerDemands)==null?void 0:m.map((t,u)=>e.jsxs("tr",{className:"bg-white shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:u+1}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.demand_from?a(t==null?void 0:t.demand_from,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.demand_upto?a(t==null?void 0:t.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.balance_amount?t==null?void 0:t.balance_amount:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.penalty?t==null?void 0:t.penalty:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.connection_type?t==null?void 0:t.connection_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.amount?"₹ "+(t==null?void 0:t.amount):"N/A"})]}))})})]})]}),e.jsxs("div",{className:"mt-6 mx-3",children:[e.jsxs("div",{className:"float-left flex space-x-8",children:[e.jsx("p",{className:"text-gray-600 text-xl font-semibold",children:"Total Payable Amount"}),e.jsxs("p",{className:"text-black text-3xl font-semibold",children:["₹ ",r==null?void 0:r.totalSumDemand]})]}),e.jsx("div",{className:"float-right",children:e.jsx("button",{onClick:()=>y(`/waterDemandPayment/${x}`),className:"bg-indigo-700 hover:bg-indigo-600 px-4 py-2 rounded shadow-2xl text-white text-sm",children:"Pay Now"})})]})]}):e.jsx("div",{className:"text-center mt-5 border border-indigo-300 shadow-md rounded py-2 font-semibold text-red-600",children:"Demand Not Found !"})]}),e.jsx("div",{className:"mt-6"})]})}),e.jsx("div",{className:"w-full h-60"})]})}export{W as default};
