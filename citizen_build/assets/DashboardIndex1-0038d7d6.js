import{j as t,I as W}from"./mui-7fe93ce1.js";import{r as d,u as he}from"./router-e237bf16.js";import{B as ge,a6 as Ce,a7 as Ee,A as y,b as _}from"./index-fe657cb4.js";import{C as Ge}from"./CitizenApplyApiList-e875620c.js";import"./sweetalert2.esm.all-93f49e75.js";/* empty css              */import{w as ie,t as He,a as De,s as Ve,b as We,p as Me}from"./septic-92c6194c.js";import{m as ze,b as Ue}from"./marriage-98e794b9.js";import{G as Fe}from"./reactIcons-fd892024.js";import{l as Be}from"./lodge-40c4a41c.js";import{h as qe}from"./useRazorPayForApp-00a62b48.js";import{U as $e}from"./UseRazorpay-ae568b35.js";import{c as Le}from"./index.esm-fbf35f2f.js";import{a as ue}from"./redux-20438136.js";import{a as Je}from"./index.esm-bd2831e7.js";import{M as xe}from"./index-55bb3f5a.js";import{u as Ye}from"./useSetLogout-b186b782.js";import{l as Ke}from"./localstorage-fbfe5679.js";import{P as Qe}from"./PetRegAPIList-fe8f6e4b.js";import"./index-69005fc2.js";import"./index-5695ec7e.js";import"./axios-ab7cc016.js";import"./i18next-2edfafb0.js";import"./index-e02473da.js";const Xe="/assets/rigmachine-fbcb41f9.jpeg",Ze="/assets/grievancelogo-44b8f316.svg",me="/assets/property-fbb4f386.png";function et(c){return Fe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"}}]})(c)}const tt="/assets/finesimg-e530d190.jpg",at="/assets/swm-1b451a03.png";function st(c){d.useState(!1);const g=()=>{c.navCloseStatus||(c.NAV_CLOSE(),c.NAV_CLOSE_ORIGINAL_STATUS()),c.navCloseStatus&&(c.NAV_OPEN(),c.NAV_OPEN_ORIGINAL_STATUS())};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full",children:[t.jsx("div",{className:"cursor-pointer bg-gray-100 p-2 rounded-lg",onClick:g,children:t.jsx(Le,{color:"black",size:16})}),t.jsx("div",{className:"col-span-10",children:t.jsx("h4",{className:"text-white font-bold text-sm text-xl text-center",children:"JUIDCO"})})]})})}const rt=c=>({navCloseStatus:c.navCloseStatus}),lt=c=>({NAV_OPEN:g=>c({type:"NAV_OPEN"}),NAV_CLOSE:g=>c({type:"NAV_CLOSE"}),NAV_OPEN_ORIGINAL_STATUS:g=>c({type:"NAV_OPEN_ORIGINAL_STATUS"}),NAV_CLOSE_ORIGINAL_STATUS:g=>c({type:"NAV_CLOSE_ORIGINAL_STATUS"})});ue(rt,lt)(st);const ot={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};xe.setAppElement("#root");function ct(c){const[g,S]=d.useState(!1),[M,O]=d.useState(!0),[T,I]=d.useState(!1);setTimeout(()=>{O(!1)},1e4);function R(){S(!0)}function A(){S(!1)}const z=he(),C=()=>{!c.RightNavCloseStatus&&c.RIGHT_NAV_CLOSE(),c.RightNavCloseStatus&&c.RIGHT_NAV_OPEN()},U=()=>{I(!1),Ke(),c.LOGOUT(),z("/")},E=()=>{Ye(U)};return t.jsxs(t.Fragment,{children:[T&&t.jsx(ge,{}),t.jsxs("div",{className:"grid grid-cols-12 place-items-center h-full pr-12",children:[t.jsx("div",{className:"cursor-pointer",children:t.jsx("div",{onClick:R,className:"bg-gray-100 p-2 rounded-lg relative",children:t.jsx(Ce,{color:"black",size:16})})}),t.jsx("div",{className:"cursor-pointer",onClick:C,children:t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg ml-16",children:t.jsx(Ee,{color:"black",size:16})})})]}),t.jsx(xe,{isOpen:g,onRequestClose:A,style:ot,contentLabel:"Example Modal",children:t.jsxs("div",{class:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:[t.jsx("button",{onClick:A,type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:t.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:t.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),t.jsxs("div",{class:"p-6 text-center",children:[t.jsxs("div",{className:"w-full flex h-10",children:[" ",t.jsx("span",{className:"mx-auto",children:t.jsx(Je,{size:30})})]}),t.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you want to logout ?"}),t.jsx("button",{type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:E,children:"Yes, I'm sure"})]})]})})]})}const nt=c=>({RightNavCloseStatus:c.RightNavCloseStatus,isLoggedIn:c.isLoggedIn}),dt=c=>({RIGHT_NAV_OPEN:g=>c({type:"RIGHT_NAV_OPEN"}),LOGOUT:g=>c({type:"LOGOUT"}),RIGHT_NAV_CLOSE:g=>c({type:"RIGHT_NAV_CLOSE"})});ue(nt,dt)(ct);const Ht=()=>{var q,$,L,J,Y,K,Q,X,Z,ee,te,ae;const c=he(),{post_citizenDashboard:g,api_getProfileDetails:S,api_applicationCount:M,api_allModulePayment:O,generateDashboardOrderId:T,generateDashboardReceipt:I}=Ge(),{header:R}=Qe(),{handlePayment:A}=$e(),[z,C]=d.useState([]),[U,E]=d.useState(null),[l,fe]=d.useState([]),[s,be]=d.useState([]),[Ne,n]=d.useState(!1),[je,p]=d.useState(0),[F,ye]=d.useState(!1),[w,G]=d.useState([]),[P,H]=d.useState([]),[pe,it]=d.useState([]),[D,V]=d.useState([]),[mt,B]=d.useState(),we=()=>{n(!0),y.post(g,{},_()).then(e=>{var o,r,a;(o=e==null?void 0:e.data)!=null&&o.status&&(C((a=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:a.property),n(!1)),n(!1)}).catch(e=>console.error(e)),n(!1)},ve=()=>{n(!0),y.post(O,{},_()).then(e=>{var o,r,a;console.log((o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(be((a=e==null?void 0:e.data)==null?void 0:a.data),n(!1)),n(!1)}).catch(e=>console.error(e)),n(!1)},_e=()=>{n(!0),y.post(S,{},_()).then(e=>{var o,r;(o=e==null?void 0:e.data)!=null&&o.status&&E((r=e==null?void 0:e.data)==null?void 0:r.data),n(!1),console.log("Getting Citizen details",e)}).catch(e=>console.error(e)),n(!1)},Se=()=>{n(!0),y.post(M,{},_()).then(function(e){var o,r,a;console.log("fetched application count...",(o=e==null?void 0:e.data)==null?void 0:o.data),(r=e==null?void 0:e.data)!=null&&r.status&&(fe((a=e==null?void 0:e.data)==null?void 0:a.data),n(!1)),n(!1)}).catch(function(e){console.log("notification error......",e),n(!1)})};d.useEffect(()=>{we(),_e(),Se(),ve()},[]);let v=[{navigation:"/propertyDashboard",image:me,total:(l==null?void 0:l.propDetails)??0,name:"Property",isHref:!1},{navigation:"/water-dashboard",image:ie,total:(l==null?void 0:l.waterDetails)??0,name:"Water Connection(s)",isHref:!1},{navigation:"/trade-dashboard",image:He,total:(l==null?void 0:l.tradeDetails)??0,name:"Trade License(s)",isHref:!1},{navigation:"/fines",image:tt,total:(l==null?void 0:l.finesDetails)??0,name:"Fines & Penalties",isHref:!1},{navigation:"/advertisement-dashboard",image:De,total:(l==null?void 0:l.advertisementDetails)??0,name:"Advertisement",isHref:!1},{name:"Lodge & Banquet Registration",navigation:"/marketingDashboard",image:Be,total:(l==null?void 0:l.lodgeBanquetDetails)??0,isHref:!1},{navigation:"/marriage-index",image:ze,total:(l==null?void 0:l.marriageDetails)??0,name:"Marriage Registration",isHref:!1},{navigation:"/septicTankDashboard",image:Ve,total:(l==null?void 0:l.septicTankerDetails)??0,name:"Septic Tank",isHref:!1},{navigation:"/waterTankerDashboard",image:We,total:(l==null?void 0:l.waterTankerDetails)??0,name:"Water Tank",isHref:!1},{navigation:"/pet-registration-dashboard",image:Me,total:(l==null?void 0:l.petDetails)??0,name:"Pet Registration",isHref:!1},{navigation:"/vehicle-registration-dashboard",image:Xe,total:(l==null?void 0:l.rigDetails)??0,name:"Rig Registration",isHref:!1},{navigation:`${window.location.origin}/grievance/citizen-dashboard/home`,image:Ze,total:(l==null?void 0:l.grievanceDetails)??0,name:"Grievance",isHref:!0}];console.log("module data===>",l);const k=(e,o,r)=>{const a=e.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.propDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),h=o.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.waterDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.total_demand_amount)||0;return x+f},0),N=r.reduce((x,i)=>{var u;const m=(u=s==null?void 0:s.swmDetails)==null?void 0:u.find(b=>b.id===i),f=parseFloat(m==null?void 0:m.amount)||0;return x+f},0),j=a+h+N;return Number(j).toFixed(2)},Ie=()=>{var o,r,a;const e=!F;if(ye(e),e){const h=((o=s==null?void 0:s.propDetails)==null?void 0:o.map(i=>i.id))||[],N=((r=s==null?void 0:s.waterDetails)==null?void 0:r.map(i=>i.id))||[],j=((a=s==null?void 0:s.swmDetails)==null?void 0:a.map(i=>i.id))||[];G(h),H(N),V(j);const x=k(h,N,j);p(x)}else G([]),H([]),V([]),p("0.00")},Ae=e=>{G(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=k(r,P,D);return p(a),r})},Pe=e=>{H(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=k(w,r,D);return p(a),r})},ke=e=>{V(o=>{const r=o.includes(e)?o.filter(h=>h!==e):[...o,e],a=k(w,P,r);return p(a),r})},Oe=()=>{var o,r;(o=(s==null?void 0:s.propDetails)||[])==null||o.filter(a=>w.includes(a.id));const e=(r=(s==null?void 0:s.waterDetails)||[])==null?void 0:r.filter(a=>P.includes(a.id));Te(e)},Te=e=>{n(!0);const o=e.map(a=>({consumerId:a.consumer_id,amount:a.total_demand_amount,paymentMode:"Online",demandFrom:a.demand_from,demandUpto:a.demand_upto,remarks:"Ok"}));let r={propId:w,consumerDetails:o};console.log(r),y.post(T,r,_()).then(function(a){var h,N,j,x,i,m,f,u,b,se,re,le,oe,ce,ne,de;console.log("fetched application count...",a),(h=a==null?void 0:a.data)!=null&&h.status?(n(!1),window.ReactNativeWebView?qe({generatedOrder:(N=a==null?void 0:a.data)==null?void 0:N.data,payload:{applicationId:(x=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:x.applicationId,departmentId:(m=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:m.departmentId,status:"",captured:"1",card_id:"",amount:(u=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:u.amount,payment_method:"upi/netbanking",workflow_id:(se=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:se.workflowId,user_id:(le=(re=a==null?void 0:a.data)==null?void 0:re.data)==null?void 0:le.userId,ulb_id:(ce=(oe=a==null?void 0:a.data)==null?void 0:oe.data)==null?void 0:ce.ulbId,created_at:""},api:I,returnUrl:`/citizen/dashboardPayment/${id}`,isParam:!0}):(A((ne=a==null?void 0:a.data)==null?void 0:ne.data,Re),n(!1),console.log((de=a==null?void 0:a.data)==null?void 0:de.data))):n(!1)}).catch(function(a){console.log("notification error......",a),n(!1)})},Re=async e=>{console.log(e,"generateReceipt"),n(!0);let o={applicationId:e==null?void 0:e.applicationId,departmentId:e==null?void 0:e.departmentId,status:"",captured:"1",card_id:"",amount:e==null?void 0:e.amount,payment_method:"upi/netbanking",workflow_id:e==null?void 0:e.workflowId,user_id:e==null?void 0:e.user_id,ulb_id:e==null?void 0:e.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:e==null?void 0:e.orderId,payment_id:e==null?void 0:e.razorpay_payment_id,created_at:""};console.log("Receipt",e),y.post(I,o,R).then(r=>{console.log("genereted receipt",r),B(!1),r.data.status==!0?(console.log("Oder ID Generated +++++++++",r.data),n(!1)):(notify(r.data.message,"error"),n(!1))}).catch(r=>{B(!1),console.log("Error genrating order id",r),notify(r.message,"error"),n(!1)})};return t.jsxs(t.Fragment,{children:[Ne&&t.jsx(ge,{}),t.jsxs("div",{className:"grid grid-cols-12 h-screen bg-white mx-4 md:mx-0",children:[t.jsxs("div",{className:" md:ml-11 mt-12 col-span-12 md:col-span-8 order-last md:order-first",children:[t.jsx("h1",{className:"text-2xl font-semibold max-sm:text-center",children:"All E-Governance Services"}),t.jsxs("div",{className:"flex flex-wrap gap-x-[4rem] gap-y-3 mt-10 bg-white  max-sm:justify-center max-sm:mb-20",children:[console.log("Line 170",v),Array.isArray(v)&&(v==null?void 0:v.map(e=>t.jsx("div",{onClick:()=>{e.isHref?window.location.href=e.navigation:c(e==null?void 0:e.navigation)},className:"md:w-40 h-26 bg-white rounded-lg shadow-sm max-sm:w-full cursor-pointer",children:t.jsx("div",{className:"md:w-52 max-sm:w-full h-28 bg-white rounded-lg shadow-xl pl-2",children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsxs("div",{className:"col-span-3 ",children:[t.jsx("div",{className:"w-10 h-10 rounded-full m-2 flex justify-center items-center",children:t.jsx("img",{src:e.image,alt:"",className:"w-8 h-8 rounded-full"})}),t.jsx("div",{className:"w-10 h-10 rounded-full mt-4 font-semibold flex justify-center items-center",children:(e==null?void 0:e.total)==0?"":e==null?void 0:e.total})]}),t.jsx("div",{className:"col-span-9 ml-4 ",children:t.jsx("h1",{className:"font-semibold text-sm mt-1 cursor-pointer",children:e.name})})]})})},e.id))),t.jsx("div",{className:"w-52 h-28shadow-xl pl-2",children:t.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:t.jsxs("span",{className:"hover:bg-gray-200 p-6 rounded-full cursor-pointer",onClick:()=>c("/propertyDashboard"),children:[" ",t.jsx(et,{className:"text-3xl"})]})})})]})]}),t.jsx("div",{className:"col-span-12 md:col-span-4 order-1 md:order-last pr-10 pt-5 ml-[2rem]",children:t.jsx("div",{className:"flex justify-center items-center w-full mt-10 font-semibold text-xl",children:t.jsxs("div",{className:"w-full bg-white shadow-lg rounded-md px-4 py-2",children:[t.jsxs("div",{className:"bg-blue-500 px-4 py-2 rounded-lg text-white flex items-center justify-center space-x-2",children:[t.jsx("img",{src:Ue,alt:"Bell Icon",className:"w-6 h-6"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Pending Demands"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:me,alt:"Property Icon",className:"w-6 h-6 mr-2"}),"Property"]}),((q=s==null?void 0:s.propDetails)==null?void 0:q.length)!=0&&(($=s==null?void 0:s.waterDetails)==null?void 0:$.length)!=0&&((L=s==null?void 0:s.swmData)==null?void 0:L.length)!=0&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"selectAll",className:"font-semibold mr-2 text-lg",children:"Select All"}),t.jsx("input",{type:"checkbox",id:"selectAll",checked:F,onChange:Ie,className:"w-6 h-4"})]})]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Holding No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((J=s==null?void 0:s.propDetails)==null?void 0:J.length)>0?(Y=s==null?void 0:s.propDetails)==null?void 0:Y.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.holding_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>Ae(e.id,e.total_demand_amount)})})]},e.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:ie,alt:"Water Icon",className:"w-6 h-6 mr-2"}),"Water"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((K=s==null?void 0:s.waterDetails)==null?void 0:K.length)>0?t.jsx(t.Fragment,{children:(Q=s==null?void 0:s.waterDetails)==null?void 0:Q.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.consumer_no}),t.jsx("td",{className:"border border-gray-500 ",children:e==null?void 0:e.total_demand_amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:P.includes(e.id)||pe.includes(e),onChange:()=>Pe(e.id,e.total_demand_amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("h1",{className:"text-lg font-semibold flex items-center",children:[t.jsx("img",{src:at,alt:"SWM Icon",className:"w-6 h-6 mr-2"}),"SWM"]}),t.jsxs("table",{className:"w-full mt-2 border border-gray-300 text-center ",children:[t.jsx("thead",{className:"bg-gray-200 text-black text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-500 ",children:"Consumer No."}),t.jsx("th",{className:"border border-gray-500 ",children:"Payable Amount"}),t.jsx("th",{className:"border border-gray-500 ",children:"Select"})]})}),t.jsx("tbody",{className:"text-sm font-normal",children:((X=s==null?void 0:s.swmDetails)==null?void 0:X.length)>0?t.jsx(t.Fragment,{children:(Z=s==null?void 0:s.swmDetails)==null?void 0:Z.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-500 ",children:e.consumerNo}),t.jsx("td",{className:"border border-gray-500 ",children:e.amount}),t.jsx("td",{className:"border border-gray-500 ",children:t.jsx("input",{type:"checkbox",checked:D.includes(e.id),onChange:()=>ke(e.id,e.amount)})})]},e.id))}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"3",className:"border border-gray-500 text-center text-blue-500",children:[t.jsx(W,{})," No Pending Dues"]})})})]})]}),((ee=s==null?void 0:s.propDetails)==null?void 0:ee.length)!=0&&((te=s==null?void 0:s.waterDetails)==null?void 0:te.length)!=0&&((ae=s==null?void 0:s.swmData)==null?void 0:ae.length)!=0&&t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsxs("p",{className:"font-semibold text-lg",children:["Total Amount : ",je]}),t.jsx("button",{onClick:Oe,className:"bg-green-500 text-white px-2 py-1 rounded-lg hover:bg-green-600 ",children:"Pay Now"})]})]})})})]})]})};export{Ht as default};
