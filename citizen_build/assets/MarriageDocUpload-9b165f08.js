import{a as n,g as Xe,j as a,u as ca}from"./react-304bc6bc.js";import{f as ia}from"./folders-c40af08a.js";import{h as na,c as R,n as E,i as Je}from"./PowerupFunctions-89427d0e.js";import{F as sa}from"./index.esm-67588b58.js";import{P as Ze}from"./ProjectApiList-b5d41cfc.js";import{A,Q as Ke}from"./index-ff45b2e2.js";import{A as ma}from"./ApiHeader2-b5fd0f3d.js";import{T as oa}from"./Blocks-3268ddde.js";import{p as M}from"./photo-8f85a095.js";import{M as ra}from"./index-69dc9777.js";import{R as xa}from"./index.esm-536e5801.js";import{B as ua}from"./BottomErrorCard-422f9d4d.js";import{A as We}from"./ApiHeader-98968871.js";import{B as fa}from"./BarLoader-3bc14279.js";import"./index-5febc24e.js";import"./BackendUrl-b545fbc2.js";import"./CommonModal-3143ba46.js";/* empty css                  */const ha=e=>{var O,z,G,H,V,q,Q,Y,J,K,W,X,Z,p,ee,ae,te,le,de,ce,ie,ne,se,me,oe,re,xe,ue,fe,he,ge,je,we,ve,Ne,be,De,ye,Se,Fe,Pe,_e,Ce,Ee,Ie,Ue,ke,Me,Re,Ae,Be,$e,Te,Le,Oe,ze,Ge,He,Ve;const[B,y]=n.useState(""),[$,o]=n.useState(null),[S,w]=n.useState(null),[j,d]=n.useState(!1),[v,f]=n.useState([]),[T,I]=n.useState(null),[U,F]=n.useState(!1),[N,P]=n.useState(""),[r,t]=n.useState(""),s=()=>F(!0),x=()=>F(!1),h=()=>{},{id:_,btc:L}=Xe();let k=L=="true"||L==!0;const{api_docUpload:pe}=Ze(),ea=n.useRef([]),aa=n.useRef([]),ta=(l,c)=>{var u;const i=l.target.name;let g=l.target.files[0];if(!na(g)){e==null||e.activateBottomErrorCard(!0,`File is too large for ${i} ${e==null?void 0:e.name}`),w(null),y(""),o("");return}aa.current[c]=(u=l.target.files[0])==null?void 0:u.name,y(l.target.name),o(URL.createObjectURL(l.target.files[0])),w(l.target.files[0])},la=(l,c)=>{var g,u;if(d(!0),S==null){e==null||e.activateBottomErrorCard(!0,`Select document for ${l} ${e==null?void 0:e.name}`),d(!1);return}let i=new FormData;i.append("applicationId",_),i.append("document",S),i.append("docCode",(u=(g=e==null?void 0:e.doc)==null?void 0:g.masters[0])==null?void 0:u.documentCode),A.post(pe,i,ma()).then(m=>{var b,D;(b=m==null?void 0:m.data)!=null&&b.status?(Ke.success(`${e==null?void 0:e.name} uploaded successfully !!!`),e==null||e.refresh()):e==null||e.activateBottomErrorCard(!0,R((D=m==null?void 0:m.data)==null?void 0:D.message))}).catch(m=>{e==null||e.activateBottomErrorCard(!0,"Error getting document list, please try again later !")}).finally(()=>{d(!1)})},da=(l,c,i)=>{c==""&&Ke.error("File not uploaded !!!"),c!=""&&(t(l),I(i),t(l),P(c),s())},C=l=>v==null?void 0:v.some(c=>c==l);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center w-full flex-wrap gap-2 hover:bg-gray-50 border-b py-1.5",children:[a.jsx("div",{className:"w-[5%]",children:a.jsx("img",{src:ia,alt:"rain",className:"w-4"})}),a.jsxs("div",{className:"w-[90%] md:w-[22%] font-semibold md:font-normal",children:[e==null?void 0:e.name," ",a.jsx("span",{className:"text-red-600 inline",children:"*"})]}),a.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Uploaded Preview :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",onClick:()=>{var l,c,i,g,u,m,b,D,qe,Qe,Ye;return da((b=(c=(l=e==null?void 0:e.doc)==null?void 0:l.uploadedDoc)==null?void 0:c.docPath)==null?void 0:b.split(".")[((m=(u=(g=(i=e==null?void 0:e.doc)==null?void 0:i.uploadedDoc)==null?void 0:g.docPath)==null?void 0:u.split("."))==null?void 0:m.length)-1],`${(qe=(D=e==null?void 0:e.doc)==null?void 0:D.uploadedDoc)==null?void 0:qe.docPath}`,(Ye=(Qe=e==null?void 0:e.doc)==null?void 0:Qe.uploadedDoc)==null?void 0:Ye.uploadedDocId)},children:((O=e==null?void 0:e.doc)==null?void 0:O.uploadedDoc)==""?a.jsx("i",{className:"not-italic",children:"NA"}):a.jsxs(a.Fragment,{children:[((Y=(G=(z=e==null?void 0:e.doc)==null?void 0:z.uploadedDoc)==null?void 0:G.docPath)==null?void 0:Y.split(".")[((Q=(q=(V=(H=e==null?void 0:e.doc)==null?void 0:H.uploadedDoc)==null?void 0:V.docPath)==null?void 0:q.split("."))==null?void 0:Q.length)-1])=="pdf"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0 text-[28px]",children:a.jsx(sa,{})}),((ee=(K=(J=e==null?void 0:e.doc)==null?void 0:J.uploadedDoc)==null?void 0:K.docPath)==null?void 0:ee.split(".")[((p=(Z=(X=(W=e==null?void 0:e.doc)==null?void 0:W.uploadedDoc)==null?void 0:X.docPath)==null?void 0:Z.split("."))==null?void 0:p.length)-1])=="jpg"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>f(l=>{var c,i;return[...l,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:C((te=(ae=e==null?void 0:e.doc)==null?void 0:ae.uploadedDoc)==null?void 0:te.uploadedDocId)?M:`${(de=(le=e==null?void 0:e.doc)==null?void 0:le.uploadedDoc)==null?void 0:de.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((re=(ie=(ce=e==null?void 0:e.doc)==null?void 0:ce.uploadedDoc)==null?void 0:ie.docPath)==null?void 0:re.split(".")[((oe=(me=(se=(ne=e==null?void 0:e.doc)==null?void 0:ne.uploadedDoc)==null?void 0:se.docPath)==null?void 0:me.split("."))==null?void 0:oe.length)-1])=="jpeg"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>f(l=>{var c,i;return[...l,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:C((ue=(xe=e==null?void 0:e.doc)==null?void 0:xe.uploadedDoc)==null?void 0:ue.uploadedDocId)?M:`${(he=(fe=e==null?void 0:e.doc)==null?void 0:fe.uploadedDoc)==null?void 0:he.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),((De=(je=(ge=e==null?void 0:e.doc)==null?void 0:ge.uploadedDoc)==null?void 0:je.docPath)==null?void 0:De.split(".")[((be=(Ne=(ve=(we=e==null?void 0:e.doc)==null?void 0:we.uploadedDoc)==null?void 0:ve.docPath)==null?void 0:Ne.split("."))==null?void 0:be.length)-1])=="png"&&a.jsx("div",{className:"cursor-pointer flex-shrink-0",children:a.jsx("img",{onError:()=>f(l=>{var c,i;return[...l,(i=(c=e==null?void 0:e.doc)==null?void 0:c.uploadedDoc)==null?void 0:i.uploadedDocId]}),src:C((Se=(ye=e==null?void 0:e.doc)==null?void 0:ye.uploadedDoc)==null?void 0:Se.uploadedDocId)?M:`${(Pe=(Fe=e==null?void 0:e.doc)==null?void 0:Fe.uploadedDoc)==null?void 0:Pe.docPath}`,className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})]}),a.jsxs("div",{className:"w-full md:w-[15%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Status :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:((_e=e==null?void 0:e.doc)==null?void 0:_e.uploadedDoc)==""?a.jsx("i",{className:"not-italic",children:"NA"}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"whitespace-no-wrap",children:((Ee=(Ce=e==null?void 0:e.doc)==null?void 0:Ce.uploadedDoc)==null?void 0:Ee.verifyStatus)==0&&a.jsx(a.Fragment,{children:"Pending"})}),a.jsx("p",{className:"text-green-500 whitespace-no-wrap",children:((Ue=(Ie=e==null?void 0:e.doc)==null?void 0:Ie.uploadedDoc)==null?void 0:Ue.verifyStatus)==1&&a.jsx(a.Fragment,{children:"Verified"})}),a.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((ke=e==null?void 0:e.doc)==null?void 0:ke.btcStatus)===!0&&a.jsx(a.Fragment,{children:"BTC"})}),a.jsx("p",{className:"text-red-500 whitespace-no-wrap",children:((Re=(Me=e==null?void 0:e.doc)==null?void 0:Me.uploadedDoc)==null?void 0:Re.verifyStatus)==2&&a.jsx(a.Fragment,{children:"Rejected"})})]})})]}),a.jsxs("div",{className:"w-full md:w-[13%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Remarks :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:((Be=(Ae=e==null?void 0:e.doc)==null?void 0:Ae.uploadedDoc)==null?void 0:Be.remarks)==""||((Te=($e=e==null?void 0:e.doc)==null?void 0:$e.uploadedDoc)==null?void 0:Te.remarks)==null?a.jsx("i",{className:"not-italic",children:"NA"}):(Oe=(Le=e==null?void 0:e.doc)==null?void 0:Le.uploadedDoc)==null?void 0:Oe.remarks})]}),a.jsxs("div",{className:"w-full md:w-[20%] flex flex-row gap-2",children:[a.jsx("div",{className:"md:hidden visible text-md w-[40%]",children:"Upload :"}),a.jsx("div",{className:"flex flex-col gap-1 w-[60%] md:w-full",children:(ze=e==null?void 0:e.doc)!=null&&ze.btcStatus&&k||!((Ge=e==null?void 0:e.doc)!=null&&Ge.btcStatus)&&!k&&((He=e==null?void 0:e.doc)==null?void 0:He.uploadedDoc)==""||!((Ve=e==null?void 0:e.doc)!=null&&Ve.btcStatus)&&!k?a.jsx(a.Fragment,{children:j?a.jsx(a.Fragment,{children:a.jsx(oa,{radius:"9",color:"#6366f1",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0})}):a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:l=>ea.current[e==null?void 0:e.index]=l,type:"file",name:"groom",id:"",className:"",onChange:l=>ta(l)}),a.jsx("button",{disabled:j,onClick:()=>{var l;return la((l=e==null?void 0:e.doc)==null?void 0:l.docName,e==null?void 0:e.index)},className:"cursor-pointer w-max bg-indigo-400 hover:bg-indigo-500 text-white px-8 py-1 rounded-sm border border-indigo-600",children:"Upload"})]})}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"font-semibold text-sm text-green-500 text-center",children:"Uploaded"})})})]})]}),a.jsx(ra,{isOpen:U,onAfterOpen:h,onRequestClose:x,className:"w-screen h-screen flex justify-center items-center",contentLabel:"Example Modal",children:a.jsxs("div",{class:" rounded-lg shadow-xl border-2 border-gray-200 bg-white md:ml-32 p-4 animate__animated animate__zoomIn animate__faster w-full md:w-[60vw] h-[80vh]",children:[a.jsx("div",{className:"absolute top-2 font-normal bg-red-200 hover:bg-red-300 right-2 rounded-full p-2 cursor-pointer",onClick:x,children:a.jsx(xa,{})}),C(T)?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"w-full h-full bg-gray-700 flex items-center justify-center text-gray-200",children:[a.jsx("div",{className:"border-r-2 border-gray-200 pr-4",children:"Error"}),a.jsx("div",{className:"pl-4",children:"Document not visible"})]})}):a.jsxs(a.Fragment,{children:[r=="pdf"&&a.jsx(a.Fragment,{children:a.jsx("iframe",{className:"w-full h-full",src:N,frameborder:"0"})}),r!="pdf"&&a.jsx(a.Fragment,{children:a.jsx("div",{className:"w-full h-[77vh] overflow-auto flex flex-wrap items-center justify-center",children:a.jsx("img",{src:N,alt:"",srcset:"",className:""})})})]})]})})]})},Ra=()=>{const[e,B]=n.useState(!1),[y,$]=n.useState(""),[o,S]=n.useState([]),[w,j]=n.useState(!1),[d,v]=n.useState(null),{id:f,btc:T}=Xe(),{api_getDocList:I,api_getDetails:U}=Ze(),F=ca();n.useEffect(()=>{j(!0),P(),N()},[]);const N=()=>{A.post(U,{applicationId:f},We()).then(t=>{var s,x,h;(s=t==null?void 0:t.data)!=null&&s.status?v((x=t==null?void 0:t.data)==null?void 0:x.data):r(!0,R((h=t==null?void 0:t.data)==null?void 0:h.message))}).catch(t=>{r(!0,"Error getting document list, please try again later !")}).finally(()=>{j(!1)})},P=()=>{A.post(I,{applicationId:f},We()).then(t=>{var s,x,h,_;(s=t==null?void 0:t.data)!=null&&s.status?S((h=(x=t==null?void 0:t.data)==null?void 0:x.data)==null?void 0:h.listDocs):r(!0,R((_=t==null?void 0:t.data)==null?void 0:_.message))}).catch(t=>{r(!0,"Error getting document list, please try again later !")}).finally(()=>{j(!1)})},r=(t,s)=>{$(s),B(t)};return a.jsxs(a.Fragment,{children:[w&&a.jsx(fa,{}),!w&&a.jsxs("div",{className:" animate__animated animate__fadeIn animate__faster overflow-x-hidden overflow-y-scroll w-[99%] mx-auto rounded-md gap-6 h-full p-4",children:[e&&a.jsx(ua,{activateBottomErrorCard:r,errorTitle:y}),a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("h1",{className:"bg-white shadow-lg shadow-indigo-300 text-indigo-500 border-[0.17vw] border-indigo-500 px-[4vw] py-[1.5vh] w-max font-semibold text-[2.8vh]",children:"Document Upload For Marriage Registration"})}),a.jsxs("div",{className:"flex items-center flex-wrap w-full text-sm bg-white p-4 shadow-lg gap-2",children:[a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Application No. "}),a.jsx("div",{className:"font-semibold text-base",children:E(d==null?void 0:d.application_no)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Groom Name "}),a.jsx("div",{className:"font-semibold text-base",children:E(d==null?void 0:d.groom_name)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Bride Name "}),a.jsx("div",{className:"font-semibold text-base",children:E(d==null?void 0:d.bride_name)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Marriage Date "}),a.jsx("div",{className:"font-semibold text-base",children:Je(d==null?void 0:d.marriage_date)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[22%]",children:[a.jsx("div",{children:"Marriage Place "}),a.jsx("div",{className:"font-semibold text-base",children:E(d==null?void 0:d.marriage_place)})]}),a.jsxs("div",{className:"flex flex-col flex-wrap justify-center w-full md:w-[27%]",children:[a.jsx("div",{children:"Either of the Bride or Groom belongs to BPL category ? "}),a.jsx("div",{className:"font-semibold text-base",children:Je(d==null?void 0:d.is_bpl)})]})]}),a.jsx("p",{className:"text-sm mt-4",children:"Note : Image must be less than 1Mb and pdf must be less than 10MB."}),(d==null?void 0:d.doc_upload_status)==1&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"font-semibold text-sm text-green-600 py-2 flex gap-4 items-center",children:["All Documents Uploaded Successfully.",(d==null?void 0:d.payment_status)==0?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-black",children:"Continue to payment "})," ",a.jsx("button",{className:"border-[0.15vw] border-indigo-500 hover:bg-indigo-600 hover:text-white text-indigo-500 shadow-indigo-200 shadow-md px-[2vw] py-[0.6vh] text-[1.8vh] hover:shadow-none",onClick:()=>F(`/marriage-payment/${f}`),children:"Pay Now"})]}):a.jsx(a.Fragment,{children:"Your application is in verification process. Please wait for appointment date."})]})}),a.jsxs("div",{className:"bg-white  mt-4 flex flex-col p-4 shadow-lg text-sm transition-all duration-150 gap-2",children:[a.jsxs("div",{className:"hidden md:visible md:flex items-center w-full flex-wrap gap-2 border-b-2 border-indigo-400 mb-2 font-semibold text-base",children:[a.jsx("div",{className:"w-[5%]",children:"#"}),a.jsx("div",{className:"w-[22%]",children:"Document"}),a.jsx("div",{className:"w-[20%]",children:"Uploaded Preview"}),a.jsx("div",{className:"w-[15%]",children:"Status"}),a.jsx("div",{className:"w-[13%]",children:"Remarks"}),a.jsx("div",{className:"w-[20%]",children:"Upload"})]}),(o==null?void 0:o.length)>0&&(o==null?void 0:o.map((t,s)=>a.jsx(a.Fragment,{children:a.jsx(ha,{name:t==null?void 0:t.docName,doc:t,index:s,activateBottomErrorCard:r,refresh:()=>(P(),N())})})))]})]})]})};export{Ra as default};
