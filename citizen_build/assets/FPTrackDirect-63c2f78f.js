import{j as e}from"./mui-376c770d.js";import{r as l,u as X}from"./router-87042356.js";import{ag as Z,ah as ee,b as T,c as te,d as $,u as ae,R as ne,ai as re,P as se,n as F,y as ie,U as le}from"./index-abe80df2.js";import{a as I}from"./axios-97164839.js";import{a as L}from"./index.esm-52adad60.js";import{f as oe}from"./index.esm-c151f2f7.js";import"./react-09dd1212.js";import"./reactIcons-6a3b6da1.js";import"./redux-f5c77cc0.js";import"./i18next-e99b4042.js";const de=t=>{const[g,S]=l.useState(10),[k,u]=l.useState(1),[f,H]=l.useState(0),[D,E]=l.useState(0),[N,A]=l.useState(0),[_,b]=l.useState(),[q,a]=l.useState(!1),[s,h]=l.useState(!1),[y,B]=l.useState([]),[c,o]=l.useState(!1),O=()=>{h(!1),o(!0),Object.keys(t==null?void 0:t.requestBody).length!==0&&typeof t.loader=="function"&&t.loader(!0),I.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:g,page:k},T()).then(n=>{var i,d,j,w,x,r,v,m,P,C;((i=n==null?void 0:n.data)==null?void 0:i.status)==!0?(console.log("success getting list => ",n),t!=null&&t.getData&&(t==null||t.allData((d=n==null?void 0:n.data)==null?void 0:d.data)),B((w=(j=n==null?void 0:n.data)==null?void 0:j.data)==null?void 0:w.data),A((r=(x=n==null?void 0:n.data)==null?void 0:x.data)==null?void 0:r.total),H((m=(v=n==null?void 0:n.data)==null?void 0:v.data)==null?void 0:m.current_page),E((C=(P=n==null?void 0:n.data)==null?void 0:P.data)==null?void 0:C.last_page),h(!1)):(console.log("false error while getting list => ",n),h(!0))}).catch(n=>(console.log("error while getting list => ",n),h(!0))).finally(()=>{o(!1),Object.keys(t==null?void 0:t.requestBody).length!==0&&typeof t.loader=="function"&&t.loader(!1),h(!1)})},M=()=>{u(f+1)},V=()=>{u(f-1)},z=n=>{let i=parseInt(N/n),d=parseInt(N%n);if(d==0){i<f&&u(i),S(n);return}if(d!=0){i+1<f&&u(i+1),S(n);return}},U=()=>{u(1)},W=()=>{u(D)},Y=n=>{u(n)},R=n=>n==null?void 0:n.map((d,j)=>{var x;const w=(x=t==null?void 0:t.columns)==null?void 0:x.map((r,v)=>{var P,C;var m=d[r==null?void 0:r.accessor];if(r!=null&&r.option&&((P=r==null?void 0:r.option)==null?void 0:P.length)>0){const p=(C=r==null?void 0:r.option)==null?void 0:C.find(Q=>Q.hasOwnProperty(d[r==null?void 0:r.accessor]));p?m=p[d[r==null?void 0:r.accessor]]:m=d[r==null?void 0:r.accessor]}return(r==null?void 0:r.Header.toLowerCase())!="action"&&{[r==null?void 0:r.Header]:r!=null&&r.accessor?m:j+1}});return Object.assign({},...w)}),G=n=>{},J=n=>{o(!0),a(!1),I.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:N},T()).then(i=>{var d,j,w,x,r,v,m;((d=i==null?void 0:i.data)==null?void 0:d.status)==!0&&(n=="csv"&&(b(R((w=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:w.data)),K()),n=="excel"&&G(R((r=(x=i==null?void 0:i.data)==null?void 0:x.data)==null?void 0:r.data)),n=="pdf"&&exportToPDF(R((m=(v=i==null?void 0:i.data)==null?void 0:v.data)==null?void 0:m.data))),o(!1)}).catch(i=>{o(!1)})},K=()=>{a(!0)};return l.useEffect(()=>{(t==null?void 0:t.requestBody)!=null&&(u(1),S(10),O())},[t==null?void 0:t.changeData]),l.useEffect(()=>{o(!0),O()},[k,g]),e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Sorry! "}),e.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),q&&e.jsx(Z,{data:_}),c,!c&&(y==null?void 0:y.length)>0?e.jsx(e.Fragment,{children:e.jsx(ee,{search:t==null?void 0:t.search,currentPage:f,lastPage:D,goFirst:U,goLast:W,count1:N,columns:t==null?void 0:t.columns,dataList:y,exportStatus:t==null?void 0:t.exportStatus,perPage:g,perPageC:z,totalCount:N,nextPage:M,prevPage:V,exportDataF:J,exportData:_,gotoPage:n=>Y(n)})}):e.jsx(e.Fragment,{children:!c&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})},we=()=>{const{api_searchChallanDirect:t}=se(),g=X(),S=[{Header:"Sl.No.",Cell:({row:a})=>e.jsx("div",{children:(a==null?void 0:a.index)+1})},{Header:"Name",accessor:"full_name",Cell:({cell:a})=>{var s;return F((s=a.row.original)==null?void 0:s.full_name)}},{Header:"Mobile No.",accessor:"mobile",Cell:({cell:a})=>{var s;return F((s=a.row.original)==null?void 0:s.mobile)}},{Header:"Application No",accessor:"application_no",Cell:({cell:a})=>{var s;return F((s=a.row.original)==null?void 0:s.application_no)}},{Header:"Challan No",accessor:"challan_no",Cell:({cell:a})=>{var s;return F((s=a.row.original)==null?void 0:s.challan_no)}},{Header:"Challan Date",accessor:"challan_date",Cell:({cell:a})=>{var s;return ie((s=a.row.original)==null?void 0:s.challan_date)},className:"w-[7%]"},{Header:"Penalty Amount",accessor:"total_amount",Cell:({cell:a})=>{var s;return le((s=a.row.original)==null?void 0:s.total_amount)}},{Header:"Has Expired",accessor:"hasExpired",Cell:({cell:a})=>{var s;return F((s=a.row.original)==null?void 0:s.has_expired)}},{Header:"Action",Cell:({cell:a})=>{var s,h,y,B;return e.jsxs("div",{className:"flex items-center flex-wrap md:flex-nowrap flex-row gap-2 ",children:[e.jsxs("button",{onClick:()=>{var c,o;g(`/challan-show/${(o=(c=a==null?void 0:a.row)==null?void 0:c.original)==null?void 0:o.id}/direct`)},className:`border border-sky-700 text-sky-700 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-sky-700 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(L,{})," Challan"]}),!((h=(s=a==null?void 0:a.row)==null?void 0:s.original)!=null&&h.payment_status)&&e.jsxs("button",{onClick:()=>{var c,o;g(`/fp-pay/${(o=(c=a==null?void 0:a.row)==null?void 0:c.original)==null?void 0:o.id}/direct`)},className:`border border-orange-600 text-orange-500 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-orange-600 \r
                            hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(oe,{})," Pay"]}),((B=(y=a==null?void 0:a.row)==null?void 0:y.original)==null?void 0:B.payment_status)&&e.jsxs("button",{onClick:()=>{var c,o;g(`/payment-receipt/${(o=(c=a==null?void 0:a.row)==null?void 0:c.original)==null?void 0:o.transaction_no}/direct`)},className:`border border-green-600 text-green-600 w-24 py-1 rounded-sm shadow-md hover:shadow-xl hover:bg-green-600 \r
                    hover:text-white flex items-center justify-center gap-1 `,children:[e.jsx(L,{})," Receipt"]})]})}}],[k,u]=l.useState({}),[f,H]=l.useState(0),[D,E]=l.useState(!1),[N,A]=l.useState(!1),_=te({searchBy:$().required("Select filter type"),entry:$().required("Enter the parameter")}),b=ae({initialValues:{searchBy:"",entry:""},validationSchema:_,onSubmit:a=>{q(a)}}),q=a=>{A(!0),u({[a==null?void 0:a.searchBy]:a==null?void 0:a.entry}),H(s=>s+1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full  md:pt-10",children:e.jsxs("div",{className:" ",children:[e.jsx("div",{className:"text-3xl font-bold text-center mt-10",children:"Fines & Penalties"}),e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center p-4 md:p-6 transition-all duration-200",children:[e.jsx("aside",{className:" w-full bg-slate-50 shadow-md h-max",children:e.jsxs("form",{onSubmit:b.handleSubmit,onChange:b.handleChange,className:"bg-white poppins p-4",children:[e.jsx("h1",{className:"text-xl font-semibold uppercase text-center text-gray-700 border-b border-gray-400 mb-4 pb-1",children:"Search Your Challan"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-4 items-center gap-y-2 pb-4 mb-2 border-b",children:[e.jsxs("div",{className:"w-full md:w-[25%]",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...b.getFieldProps("searchBy"),className:`${b.errors.searchBy?"text-red-400 font-semibold border border-solid border-red-400 placeholder-red-300 shadow-red-100 ":"text-gray-700 font-normal border border-solid border-gray-400 placeholder-gray-400 h-10"} cursor-pointer w-full px-3 py-1 text-sm  bg-white bg-clip-padding rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-sm`,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"applicationNo",children:"Application Number"}),e.jsx("option",{value:"mobile",children:"Mobile Number"}),e.jsx("option",{value:"challanNo",children:"Challan Number"})]})]}),e.jsxs("div",{className:"w-full md:w-[25%] ",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Parameter",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...b.getFieldProps("entry"),placeholder:"Enter the parameter",className:"h-10  w-full px-3 py-1 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-gray-400 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-400 shadow-md"})]}),e.jsx("div",{className:"mt-4 w-full  justify-center md:justify-start md:w-[30%] flex flex-row flex-wrap items-center gap-x-4 gap-y-2 md:mt-6",children:e.jsx("div",{className:" ",children:D?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):e.jsxs("button",{type:"submit",className:"py-2 flex items-center border border-green-600 bg-green-500 hover:bg-green-600 text-white shadow-md rounded-md  text-sm px-5",children:[e.jsx("span",{className:"",children:e.jsx(re,{fontSize:""})}),e.jsx("span",{children:"Search Record"})]})})})]})]})}),e.jsx("aside",{className:"w-full overflow-clip transition-all duration-300 h-full",children:e.jsx(de,{api:t,columns:S,requestBody:k,changeData:f,search:!1,loader:a=>E(a),exportStatus:!1})})]})]})})})};export{we as default};
