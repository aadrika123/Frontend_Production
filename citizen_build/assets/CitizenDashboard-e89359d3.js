import{j as e}from"./mui-13e90ce6.js";import{r,b as Q,u as X,f as ye}from"./router-56e993c5.js";import{t as q,W as G,M as Z,A as B,f as je,c as Ne,d as H,u as we,N as he,O as ge,b as ve,as as me,g as Ae,h as Ce,B as Ie,y as _e,P as Se,j as pe}from"./index-d3f205b5.js";import{G as ke,a as ue}from"./index.esm-6017d94b.js";import{N as Pe}from"./NoDataFoundStyle1-828a64ad.js";import{W as Me}from"./WaterDeleteApplicationModal-376167c7.js";import{h as $}from"./moment-a9aaa855.js";import{i as Oe}from"./success-39308b33.js";import{i as Re}from"./pending-3ed0cdd6.js";import{a as Le}from"./axios-ab7cc016.js";import{U as fe}from"./UseRazorpay-4579b10c.js";import{h as be}from"./useRazorPayForApp-00a62b48.js";import{d as Ee}from"./demoUser-c2d710fd.js";import{C as ze}from"./CustomErrorBoundary-b1be3000.js";import"./index-1cc92de0.js";import"./reactIcons-d26c0b2d.js";import"./materialTailwind-30111caa.js";/* empty css                */import"./redux-4c679fbc.js";import"./i18next-2edfafb0.js";const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVR4nO2XvU4cMRSFP2CXFAQhIVFRohRA6GgpkAglNFBB8gSIv6SiQFRQ8wCAFJYngJ53QPyJhoouTRKEEgqMrnRGskbsMrvsMN6Vj2Rpxr7XM8c+9/oaIloHLtBWN9qOSChwkQhxR3KBi9IiSqt1pOUKOCtcJEKMkVzgYvolSisXuCgtorRygYvSIkorF7goLbJXv7XGWqr6bVkiRcC1C5FZYLcdiDSMIoiUgTmgAlwB98BfPVc0ZjbBBfsB0OFJ5yaDz41sgyFyDJSATmDH6z8HVoFRoEfNnteAC9k8AdvyfRORZiIh8R9YArpq2NrYMvAoHyMTBJFZra6RmKrD74vImO9M0UTKXkzYTmTBB2BezytezJSLJDLnxUQtOSWwpHAonw3F16Xeba53D/ZECkd6t5XNgi3Z/wbG1LeuvsMiiAzJ7lrvIxlILHixNOn1f9Yc140SaQb+aP7e1KoPp+wmgH8i8jU11qs5bK5giFgQO53mi+r7BPxS/+YLcwRBJJGWHXbo4Kt4393zstq+VwEQmrSSn7YT28c34MH7/inQXWWOH7L5GUL6vXgh/Y4Dt8AZ0FfFv6Ri8k3pt9kHopUdafQDgzX810I5EP0S5VFlR1ZMN1Ki5NHugAF9Z1t99mMrkkw1lLQTDRWNebUTZaJO/ZCtbhIz68pIH9Xs+btXktRVxr83TCJZL1avyqlopK+6ds21Zjth9VTVq+4zGfsc0+AWfWAAAAAASUVORK5CYII=",We={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Ve(c){var T,W,V;const[v,k]=r.useState(),[h,A]=r.useState(),[s,M]=r.useState(),[n,L]=r.useState(1),[C,x]=r.useState(),[b,S]=r.useState(),{notify:g}=r.useContext(q),[u,f]=Q.useState(!1),{api_swmSendOtpToAttach:P,api_swmVerifyotpToAttach:l,header:O}=G(),d=r.useRef(),I=()=>{d.current.focus()};r.useEffect(()=>{c.openAttachModal>0&&f(!0)},[c.openAttachModal]);function y(){}function i(){f(!1),L(1),A(),k(),M(),x(),S()}const E=()=>{if(v==""||v==null||v==null||(v==null?void 0:v.length)<=6)return I(),x({status:!1,msg:"Enter Valid Consumer No."});B.post(P,{consumerNo:v},O).then(a=>{var m,R;console.log("res.status",a.data.status,typeof a.status),(m=a==null?void 0:a.data)!=null&&m.status?(g("OTP Send on Register Mobile","success"),console.log("OTP Send on Register Mobile",a),A(a==null?void 0:a.data),L(2),x({status:!0,msg:"OTP Send on Register Mobile."})):(A(a==null?void 0:a.data),g("Error Sending OTP","error"),console.log("Error Sending OTP",a),x({status:!1,msg:(R=a==null?void 0:a.data)==null?void 0:R.message}),I())}).catch(a=>{g("Error Sending OTP","error"),console.log("ERROR : Sending OTP    ",a),x({status:!1,msg:"Error Sending OTP."}),I()})},t=()=>{if(s==""||s==null||s==null||(s==null?void 0:s.length)!=6)return S({status:!1,msg:"Enter Valid OTP."});const a={consumerNo:v,otp:s};B.post(l,a,O).then(m=>{var R;console.log("res.status",m.data.status,typeof m.status),(R=m==null?void 0:m.data)!=null&&R.status?(g("Consumer Attached Successfully","success"),console.log("Consumer Attached Successfully",m),S({status:!0,msg:m.data.message}),i(),c.refetch()):(g(m.data.message,"error"),console.log("Error Consumer Attached",m),S({status:!1,msg:m.data.message}))}).catch(m=>{g("Error Consumer Attached","error"),console.log("ERROR : Consumer Attached    ",m),S({status:!1,msg:"Error while attaching"})})};let j=(W=(T=h==null?void 0:h.data)==null?void 0:T.mobileNo)==null?void 0:W.toString(),z=(j==null?void 0:j.substring(0,2))+"XXXXXX"+(j==null?void 0:j.substring(8));return e.jsx("div",{className:"",children:e.jsx(Z,{isOpen:u,onAfterOpen:y,onRequestClose:i,style:We,contentLabel:"Example Modal",shouldCloseOnOverlayClick:!1,children:e.jsxs("div",{className:"w-[500px] h-auto bg-sky-100 shadow-2xl border border-indigo-200 py-6 px-2 m-1 rounded-md max-sm:flex max-sm:flex-col max-sm:w-full",children:[e.jsxs("p",{onClick:i,className:"absolute right-7 top-8 cursor-pointer rounded-full bg-sky-200 hover:bg-gray-200 mx-3",children:[e.jsx(ke,{size:25})," "]}),e.jsx("p",{className:" text-center text-xl font-semibold mx-5 text-gray-900",children:" Attach SWM Consumer "}),e.jsx("p",{className:"border-b py-1 mb-2 border-gray-500"}),n==1&&e.jsxs("div",{children:[e.jsxs("div",{className:" flex justify-center my-5 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Consumer No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:d,type:"text",onChange:a=>k(a.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsx("div",{className:"w-full text-center italic text-gray-700",children:"OR"}),e.jsxs("div",{className:" flex justify-center my-5 gap-2 max-sm:flex-col",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter Holding No.",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{ref:d,type:"text",onChange:a=>k(a.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:i,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:E,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Send OTP"})]}),C&&e.jsx("p",{className:`text-center text-sm font-semibold ${C!=null&&C.status?"text-green-500":"text-red-600"}`,children:C==null?void 0:C.msg}),e.jsx("div",{className:"text-xs text-center my-2",children:"Your Will get an OTP on your register mobile No."})]}),n==2&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-center font-semibold",children:["+91 ",z]}),e.jsxs("div",{className:" flex justify-center my-2 gap-2",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Enter OTP",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"number",onChange:a=>M(a.target.value),className:"border border-gray-500 py-1 rounded px-2"})]}),b&&e.jsx("p",{className:`text-center text-sm font-semibold ${b!=null&&b.status?"text-green-500":"text-red-600"}`,children:b==null?void 0:b.msg}),e.jsxs("div",{className:"text-xs text-center my-2",children:["Temporary OTP is ",e.jsxs("span",{className:"font-semibold",children:[" ",(V=h==null?void 0:h.data)==null?void 0:V.otp]}),"."]}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3",children:[e.jsx("button",{onClick:i,type:"button",className:"px-2 py-1 border border-indigo-600 hover:bg-indigo-600 hover:text-white shadow rounded",children:"Cancel"}),e.jsx("button",{onClick:t,type:"button",className:"px-2 py-1 border hover:bg-indigo-700 border-indigo-600 bg-indigo-500 text-white shadow rounded",children:"Submit"})]})]})]})})})}const Be={overlay:{},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function Fe(c){var E,t,j,z,T,W,V,a,m,R,U,Y,o,w,_,F;const[v,k]=Q.useState(!1);r.useState(),r.useState(!1),r.useState(!0);const[h,A]=r.useState(),[s,M]=r.useState(),[n,L]=r.useState(),[C,x]=r.useState(),[b,S]=r.useState(!1),{api_waterViewPendingApplication:g,api_waterMasterData:u,api_waterJeAfterSiteInspection:f,header:P}=G();X(),r.useEffect(()=>{k(!0)},[]);const l=c==null?void 0:c.id;function O(){}function d(){k(!1),c.openSiteVerityModal(!1)}r.useEffect(()=>{I(),y(),i()},[c==null?void 0:c.openSiteVerityModal]);const I=()=>{console.log("getApplicationDetail Data API CAlled.."),x(!0),B.post(`${g}`,{applicationId:l},P).then(function(N){L(N.data.data),x(!1)}).catch(function(N){console.log("==2 details by id error...",N),x(!1)})},y=()=>{console.log("fetchAfterInspectionData Data API CAlled.."),x(!0),B.post(f,{applicationId:l},P).then(N=>{N.data.status==!0&&(M(N.data.data),x(!1),console.log("Je Data After Site Inspection Done",N.data.data))}).catch(N=>{console.log("Exception While fetching after je data",N)})},i=()=>{console.log("Mater Data API CAlled.."),x(!0),B.post(`${u}`,{},P).then(N=>{A(N.data.data),x(!1)}).catch(N=>{x(!1),console.log("Exception While Master Data Fetch",N)})};return e.jsx("div",{className:"",children:e.jsx(Z,{isOpen:v,onAfterOpen:O,onRequestClose:d,style:Be,contentLabel:"Example Modal",children:e.jsx("div",{children:e.jsx("div",{className:"relative w-full h-full md:h-auto border-indigo-600 shadow-indigo-200 shadow-sm rounded",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow ",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Site Verification Details"}),e.jsxs("button",{onClick:d,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"defaultModal",children:[e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),C&&e.jsx(je,{}),b&&e.jsx("p",{className:"text-red-500 text-center font-semibold relative",children:b}),e.jsx("div",{className:"",children:e.jsxs("table",{className:"",children:[e.jsx("thead",{className:"font-bold text-left text-sm border text-white bg-indigo-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Sl No."}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Particulars"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"Proposed By Applicant"}),e.jsx("th",{className:"px-2 py-2 border-b border-gray-200  text-xs uppercase text-left",children:"JE Inspection Report"})]})}),e.jsxs("tbody",{className:"text-sm",children:[e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"1."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Property Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(E=n==null?void 0:n.applicationDetails)!=null&&E.property_type?(t=n==null?void 0:n.applicationDetails)==null?void 0:t.property_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((z=(j=h==null?void 0:h.water_property_type_mstr)==null?void 0:j.find(N=>N.id===(s==null?void 0:s.property_type_id)))==null?void 0:z.property_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"2."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Total Area in Sq.Ft."}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(T=n==null?void 0:n.applicationDetails)!=null&&T.area_sqft?(W=n==null?void 0:n.applicationDetails)==null?void 0:W.area_sqft:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(s==null?void 0:s.area_sqft)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"3."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Report"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(V=n==null?void 0:n.applicationDetails)!=null&&V.pipeline_type?(a=n==null?void 0:n.applicationDetails)==null?void 0:a.pipeline_type:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[((R=(m=h==null?void 0:h.water_param_pipeline_type)==null?void 0:m.find(N=>N.id===(s==null?void 0:s.pipeline_type_id)))==null?void 0:R.pipeline_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"4."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size (In MM)"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[s==null?void 0:s.pipeline_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"5."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Distribution Pipeline Size Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(s==null?void 0:s.pipeline_size_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"6."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Is Application Comes Under Regularization"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(U=n==null?void 0:n.applicationDetails)!=null&&U.connection_type?(Y=n==null?void 0:n.applicationDetails)==null?void 0:Y.connection_type:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:((w=(o=h==null?void 0:h.water_connection_type_mstr)==null?void 0:o.find(N=>N.id===(s==null?void 0:s.connection_type_id)))==null?void 0:w.connection_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"7."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Diameter"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[s==null?void 0:s.pipe_size," MM"]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"8."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Pipe Quality"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsxs("td",{className:"px-2 py-2 text-left text-base",children:[(s==null?void 0:s.pipe_type)||"N/A","              "]})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"9."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Permissible Ferrule Size"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(s==null?void 0:s.ferrule_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"10."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Road Type"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(s==null?void 0:s.road_type)||"N/A"})]}),e.jsxs("tr",{className:"bg-white text-gray-700 shadow-xl border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-left text-base",children:"11."}),e.jsx("td",{className:"px-2 py-2 text-left font-semibold text-sm",children:"Applicant Category"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(_=n==null?void 0:n.applicationDetails)!=null&&_.category?(F=n==null?void 0:n.applicationDetails)==null?void 0:F.category:"N/A"}),e.jsx("td",{className:"px-2 py-2 text-left text-base",children:(s==null?void 0:s.category)||"N/A"})]})]})]})}),e.jsx("div",{className:"flex justify-center p-6 border-t border-gray-200 rounded-b",children:e.jsx("button",{onClick:d,className:"mx-2 text-white bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 rounded-lg border border-indigo-200 text-sm font-medium px-5 py-2.5 focus:z-10 ",children:"Close"})})]})})})})})}const Ue=c=>{var z,T,W,V,a,m,R,U,Y;const{handlePayment:v}=fe(),k=X(),[h,A]=r.useState(!1),[s,M]=r.useState(!1),[n,L]=r.useState(""),{notify:C}=r.useContext(q),{api_WaterGetDetailsById:x,header:b,api_rzpWaterOrderId:S,api_generatedreceipt:g}=G(),u=c==null?void 0:c.paymentData;console.log("props paymentData==>>",u);const f=o=>{if(!(o==null||o==""))return JSON.parse(o)},P=Ne({isInstallment:H().required("Require"),installment:H().when([],{is:()=>l.values.isInstallment=="yes",then:H().required("Select Installment")})}),l=we({enableReinitialize:!0,initialValues:{isInstallment:"no",installment:""},onSubmit:o=>{i(o)},validationSchema:P}),O=o=>{var F,N,J;const w=o.target.name,_=o.target.value;console.log("name",w,"vlue",_),_=="no"&&(console.log("Done.."),l.setFieldValue("installment","")),w=="installment"&&((F=f(_))==null?void 0:F.amount)==Number((N=n==null?void 0:n.calculation)==null?void 0:N.penalty)&&((J=n==null?void 0:n.calculation)==null?void 0:J.paidStatus)!=1&&(l.setFieldValue("installment",""),l.setFieldValue("isInstallment","no"))},d=()=>{c.closeModal()};r.useEffect(()=>{var o,w;((o=n==null?void 0:n.calculation)==null?void 0:o.paidStatus)==1&&((w=n==null?void 0:n.calculation)==null?void 0:w.chargeCatagoryId)==2&&l.setFieldValue("isInstallment","yes")},[n]);const I=()=>{var o;M(!0),console.log("before fetch property details in deactivation"),Le.post(x,{applicationId:(o=u==null?void 0:u.connectionCharges)==null?void 0:o.applicationId},b).then(function(w){console.log("view water details by id...",w.data.data),L(w.data.data),M(!1)}).catch(function(w){console.log("==2 details by id error...",w),M(!1),C("Something Went Wrong","error")})};r.useEffect(()=>{I()},[u]);const y=async o=>{console.log("generateReceipt",o),console.log(o);let w={applicationId:o==null?void 0:o.applicationId,departmentId:o==null?void 0:o.departmentId,status:"",captured:"1",card_id:"",amount:o==null?void 0:o.amount,payment_method:"upi/netbanking",workflow_id:o==null?void 0:o.workflowId,user_id:o==null?void 0:o.userId,ulb_id:o==null?void 0:o.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:o==null?void 0:o.razorpay_order_id,payment_id:o==null?void 0:o.razorpay_payment_id,created_at:""};console.log("Receipt",o),B.post(g,w,b).then(_=>{var F;console.log("genereted receipt",_),_.data.status==!0?(console.log("Oder ID Generated ++++dddddddddddddddddddddddd+++++",_.data),k(`/waterConnReceipt/${(F=_==null?void 0:_.data)==null?void 0:F.data}`,{replace:!0})):toast.error(_.data.message,"error")}).catch(_=>{console.log("Error genrating order id",_),toast.error(_.message,"error")})},i=o=>{var F,N,J;let w;o.isInstallment=="yes"&&(w=((F=f(o==null?void 0:o.installment))==null?void 0:F.ids).split(","));const _={id:(N=u==null?void 0:u.connectionCharges)==null?void 0:N.applicationId,applycationType:(J=u==null?void 0:u.connectionCharges)==null?void 0:J.type,isInstallment:o.isInstallment,penaltyIds:w};console.log("payment function hit..",_),A(!0),B.post(S,_,b).then(p=>{var K,D,ee,te,se,ne,ae,le,oe,re,de,ie,ce,xe;console.log("Oder ID Generated",p),A(!1),window.ReactNativeWebView?be({generatedOrder:(K=p==null?void 0:p.data)==null?void 0:K.data,payload:{applicationId:(ee=(D=p==null?void 0:p.data)==null?void 0:D.data)==null?void 0:ee.applicationId,departmentId:(se=(te=p==null?void 0:p.data)==null?void 0:te.data)==null?void 0:se.departmentId,status:"",captured:"1",card_id:"",amount:(ae=(ne=p==null?void 0:p.data)==null?void 0:ne.data)==null?void 0:ae.amount,payment_method:"upi/netbanking",workflow_id:(oe=(le=p==null?void 0:p.data)==null?void 0:le.data)==null?void 0:oe.workflowId,user_id:(de=(re=p==null?void 0:p.data)==null?void 0:re.data)==null?void 0:de.userId,ulb_id:(ce=(ie=p==null?void 0:p.data)==null?void 0:ie.data)==null?void 0:ce.ulbId,user_id:localStorage.getItem("citizenId"),created_at:""},api:g,returnUrl:"/citizen/waterConnReceipt",isParam:!1}):v((xe=p==null?void 0:p.data)==null?void 0:xe.data,y)}).catch(p=>{A(!1),console.log("Error generating order id",p),C(p.message,"error")})},E=o=>o==NaN||o==null?0:o;let t=0,j;return l.values.isInstallment=="yes"&&(j=0),l.values.isInstallment=="no"&&(j=Number((z=n==null?void 0:n.calculation)==null?void 0:z.penalty)/10),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:l.handleSubmit,onChange:O,children:e.jsxs("div",{className:"bg-white #789fde shadow-2xl border border-red-200 p-5 rounded-md",children:[e.jsx("p",{onClick:d,className:"float-right absolute right-6 top-6 hover:bg-gray-300 bg-gray-200 p-1 cursor-pointer",children:e.jsx(ue,{})}),e.jsxs("div",{className:"border-b-2  pl-3 font-semibold border-red-400 flex",children:[e.jsx(he,{size:20,className:"mt-0.5 mr-1"}),"Regularization Payment"]}),e.jsx("p",{className:"text-center text-green-800 font-semibold",children:"Note: 10% rebate on penalty in case the whole penalty is paid"}),e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("img",{src:"https://img.freepik.com/free-vector/hand-holding-phone-with-credit-card-screen-man-making-purchase-shopping-paying-online-using-banking-app-flat-vector-illustration-transaction-e-commerce-concept_74855-26014.jpg?w=1380&t=st=1686898919~exp=1686899519~hmac=4b0ddb44860ec647fa33a1a0416ea0c1cc8167693a13fdba3f09058d099f0e76",alt:"My Image",width:200,height:100})}),e.jsxs("div",{className:"flex items-center px-10",children:[e.jsx("div",{className:"font-semibold text-lg text-gray-500",children:e.jsx("p",{children:"Application No.-"})}),e.jsx("p",{className:"font-semibold text-lg text-gray-500",children:(T=u==null?void 0:u.connectionCharges)==null?void 0:T.applicationNo})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-lg text-green-500",children:e.jsx("p",{children:"Total Amount ₹-"})}),e.jsxs("p",{className:"font-semibold text-lg text-green-500",children:[l.values.isInstallment==="yes"&&Number((W=n==null?void 0:n.calculation)==null?void 0:W.connectionFee)+Number(E((V=f(l.values.installment))==null?void 0:V.amount))-j,l.values.isInstallment==="no"&&Number((a=n==null?void 0:n.calculation)==null?void 0:a.connectionFee)+Number((m=n==null?void 0:n.calculation)==null?void 0:m.penalty)-j]})]}),e.jsxs("div",{className:"grid grid-cols-12 px-4 py-2 text-sm gap-y-2",children:[e.jsx("div",{className:"col-span-12 mt-2 text-gray-800",children:e.jsxs("div",{className:"grid grid-cols-12 text-base rounded",children:[e.jsxs("div",{className:"col-span-6 space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Payment For:"})," ",(R=n==null?void 0:n.calculation)==null?void 0:R.chargeCatagory]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Connection Fee:"})," ₹"," ",(U=n==null?void 0:n.calculation)==null?void 0:U.connectionFee]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Penalty:"})," ₹"," ",(Y=n==null?void 0:n.calculation)==null?void 0:Y.penalty]})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsxs("p",{className:"font-semibold",children:["Rebate: ₹ ",j]}),e.jsx("div",{className:"flex",children:e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("span",{className:"font-semibold",children:"Installment Payment"}),e.jsx("input",{type:"radio",name:"isInstallment",value:"yes",checked:l.values.isInstallment==="yes",onChange:l.handleChange,onBlur:l.handleBlur}),"Yes",e.jsx("input",{type:"radio",name:"isInstallment",value:"no",checked:l.values.isInstallment==="no",onChange:l.handleChange,onBlur:l.handleBlur}),"No"]}),e.jsx("p",{className:"text-red-500 text-xs font-semibold",children:l.touched.isInstallment&&l.errors.isInstallment?l.errors.isInstallment:null})]})}),e.jsxs("div",{className:`${l.values.isInstallment==="no"?"opacity-50":""} flex gap-2 disabled:opacity-60`,children:[e.jsx("p",{className:"font-semibold",children:"Select Installment"}),e.jsxs("select",{onChange:l.handleChange,disabled:l.values.isInstallment==="no",value:l.values.installment,name:"installment",className:"disabled:opacity-60 disabled:border-0 border border-gray-800 rounded shadow text-sm h-6",children:[e.jsx("option",{value:"",children:"Select"}),n&&(n==null?void 0:n.penaltyInstallments.map((o,w)=>(t+=Number(o.balance_amount),e.jsx("option",{value:JSON.stringify({ids:o.ids,amount:t}),children:t},w))))]})]}),e.jsx("p",{className:"text-red-500 text-xs text-center font-semibold",children:l.touched.installment&&l.errors.installment?l.errors.installment:null})]})]})}),e.jsx("div",{className:"col-span-12 mt-2",children:e.jsx("div",{className:"text-center font-light rounded",children:e.jsx("p",{children:"Note: You can pay using Card / UPI / Netbanking / Wallet etc."})})}),e.jsx("div",{className:"col-span-12 mt-2",children:e.jsx("div",{className:"flex justify-center",children:h?e.jsx(ge,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:c.closeModal,className:"mx-3 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{type:"submit",className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm rounded-sm shadow-xl",children:"Pay Now"})]})})})]})]})})})},Ye=c=>{var u,f,P,l,O;const{handlePayment:v}=fe(),k=X(),[h,A]=r.useState(!1);r.useState();const s=c==null?void 0:c.paymentData;ye();const{notify:M}=r.useContext(q),{api_rzpWaterOrderId:n,api_getTranNo:L,header:C,api_generatedreceipt:x}=G(),b=()=>{c.closeModal()},S=async d=>{console.log("generateReceipt",d),console.log(d);let I={applicationId:d==null?void 0:d.applicationId,departmentId:d==null?void 0:d.departmentId,status:"",captured:"1",card_id:"",amount:d==null?void 0:d.amount,payment_method:"upi/netbanking",workflow_id:d==null?void 0:d.workflowId,user_id:d==null?void 0:d.userId,ulb_id:d==null?void 0:d.ulbId,user_id:localStorage.getItem("citizenId"),payment_order_id:d==null?void 0:d.razorpay_order_id,payment_id:d==null?void 0:d.razorpay_payment_id,created_at:""};console.log("Receipt",d),B.post(x,I,ve()).then(y=>{console.log("genereted receipt",y),y.data.status==!0?(console.log("Oder ID Generated ++++dddddddddddddddddddddddd+++++",y.data),k(`/application-payment-history/${d==null?void 0:d.applicationId}`,{replace:!0})):me.error(y.data.message,"error")}).catch(y=>{console.log("Error genrating order id",y),me.error(y.message,"error")})},g=()=>{var I,y;A(!0);const d={id:(I=s==null?void 0:s.connectionCharges)==null?void 0:I.applicationId,applycationType:(y=s==null?void 0:s.connectionCharges)==null?void 0:y.type};console.log("Payment Button Clicked..",d),B.post(n,d,C).then(i=>{var E,t,j,z,T,W,V,a,m,R,U,Y,o,w;console.log("Oder ID Generated",i),A(!1),window.ReactNativeWebView?be({generatedOrder:(E=i==null?void 0:i.data)==null?void 0:E.data,payload:{applicationId:(j=(t=i==null?void 0:i.data)==null?void 0:t.data)==null?void 0:j.applicationId,departmentId:(T=(z=i==null?void 0:i.data)==null?void 0:z.data)==null?void 0:T.departmentId,status:"",captured:"1",card_id:"",amount:(V=(W=i==null?void 0:i.data)==null?void 0:W.data)==null?void 0:V.amount,payment_method:"upi/netbanking",workflow_id:(m=(a=i==null?void 0:i.data)==null?void 0:a.data)==null?void 0:m.workflowId,user_id:(U=(R=i==null?void 0:i.data)==null?void 0:R.data)==null?void 0:U.userId,ulb_id:(o=(Y=i==null?void 0:i.data)==null?void 0:Y.data)==null?void 0:o.ulbId,user_id:localStorage.getItem("citizenId"),created_at:""},api:x,returnUrl:"/citizen/waterConnReceipt",isParam:!1}):v((w=i==null?void 0:i.data)==null?void 0:w.data,S)}).catch(i=>{A(!1),console.log("Error genrating order id",i),M(i.message,"error")})};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("p",{onClick:b,className:"float-right absolute right-12 top-12 hover:bg-gray-300 bg-gray-200 p-1 cursor-pointer",children:[" ",e.jsx(ue,{})," "]}),e.jsxs("div",{className:"bg-white shadow-2xl border border-blue-200 md:p-5 md:m-5 rounded-md",children:[e.jsxs("div",{className:" border-b-2 py-1 pl-3 font-semibold border-red-400 flex",children:[e.jsx(he,{size:20,className:"mt-0.5 mr-1"}),"Make Payment"," "]}),e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("img",{src:"https://img.freepik.com/free-vector/hand-holding-phone-with-credit-card-screen-man-making-purchase-shopping-paying-online-using-banking-app-flat-vector-illustration-transaction-e-commerce-concept_74855-26014.jpg?w=1380&t=st=1686898919~exp=1686899519~hmac=4b0ddb44860ec647fa33a1a0416ea0c1cc8167693a13fdba3f09058d099f0e76",alt:"My Image",width:200,height:100})}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-gray-500",children:e.jsx("p",{children:"Application No:-"})}),e.jsx("p",{className:"font-semibold text-2xl text-gray-500",children:(u=s==null?void 0:s.connectionCharges)==null?void 0:u.applicationNo})]}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"font-semibold text-2xl text-green-500",children:e.jsx("p",{children:"Amount-Rs:"})}),e.jsx("p",{className:"font-semibold text-2xl text-green-500",children:((f=s==null?void 0:s.connectionCharges)==null?void 0:f.amount)||"N/A"})]}),e.jsx("h1",{className:"text-center font-semibold",children:"Amount Breakup"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"col-span-3 ",children:[e.jsxs("h1",{children:["Payment For : ",(P=s==null?void 0:s.connectionCharges)==null?void 0:P.charge_category]}),e.jsxs("h1",{children:["Penalty : ₹ ",(l=s==null?void 0:s.connectionCharges)==null?void 0:l.penalty]}),e.jsxs("h1",{children:["Connection Fee : ₹ ",(O=s==null?void 0:s.connectionCharges)==null?void 0:O.conn_fee]})]})}),e.jsx("div",{className:"md:col-span-12 col-span-12 md:mt-5 mt-2",children:e.jsx("div",{className:"text-center font-extralight px-2 rounded",children:e.jsx("p",{children:"Note : You can pay using Card / UPI / Netbanking / Wallet etc."})})}),e.jsx("div",{className:"col-span-12 md:mt-5 mt-2 max-sm:mb-2",children:e.jsx("div",{className:"flex justify-center",children:h?e.jsx(ge,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"30",visible:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,className:"mx-3 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-2 text-sm rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:g,className:"mx-3 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-5 py-2 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})})]})]})})},Xe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};function Ge(c){var u,f,P;const[v,k]=Q.useState(!1),[h,A]=r.useState(!1),[s,M]=r.useState(),[n,L]=r.useState(),C=X();r.useContext(q),G(),console.log(c==null?void 0:c.paymentData);const x=c.paymentData;console.log("paymentData==>",x),r.useEffect(()=>{k(!0)},[]);function b(){}function S(){k(!1),A(!1),M(!1),L(!1),c==null||c.openPaymentModal(!1)}const g=l=>{var d,I,y;l!=null&&l.status&&A(!0),console.log("fetchTransactionDetails",l);const O={orderId:(d=l==null?void 0:l.data)==null?void 0:d.razorpay_order_id,paymentId:(I=l==null?void 0:l.data)==null?void 0:I.razorpay_payment_id,signature:(y=l==null?void 0:l.data)==null?void 0:y.razorpay_signature};console.log("payload",O)};return e.jsx("div",{className:"",children:e.jsxs(Z,{isOpen:v,onAfterOpen:b,onRequestClose:S,style:Xe,contentLabel:"Example Modal",children:[h&&e.jsxs("div",{className:`${s?"bg-green-200":"bg-yellow-50"} shadow-2xl border border-sky-200 md:p-5 md:m-5 rounded-md`,children:[e.jsxs("div",{className:"flex justify-center",children:[s&&e.jsx("img",{src:Oe,className:"h-16",alt:"Payment Success",srcset:""}),!s&&e.jsx("img",{src:Re,className:"h-12",alt:"Payment Pending",srcset:""})]}),e.jsxs("div",{className:"py-1 pl-3 font-semibold text-center text-2xl text-gray-800",children:[s?"Payment Completed Successfully":"Payment Under Processing"," "]}),(s==null?void 0:s.transectionNo)&&e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"text-base",children:" Payment Transaction No"})," ",e.jsx("span",{className:"font-bold text-blue-700 text-xl",children:s==null?void 0:s.transectionNo})]}),!(s!=null&&s.transectionNo)&&e.jsxs("p",{className:"text-center font-semibold",children:[e.jsx("span",{className:"text-base",children:" Payment Status"})," ",e.jsx("span",{className:" text-blue-500 text-base",children:"Pending"})]}),e.jsx("p",{className:"border-b border-gray-300 mx-10 py-1"}),e.jsxs("div",{className:"grid grid-cols-12 px-8 py-3 leading-8 space-x-8 text-sm",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Application No"}),e.jsx("p",{children:"Transaction Type"})]}),e.jsxs("div",{className:"col-span-6 ml-3",children:[e.jsx("p",{children:((u=x==null?void 0:x.connectionCharges)==null?void 0:u.applicationNo)||"NA"}),e.jsx("p",{children:((f=x==null?void 0:x.connectionCharges)==null?void 0:f.charge_category)||"NA"})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6 font-semibold",children:[e.jsx("p",{children:"Amount"}),e.jsx("p",{children:"Payment Date"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("p",{children:(s==null?void 0:s.amount)||((P=x==null?void 0:x.connectionCharges)==null?void 0:P.amount)}),e.jsx("p",{children:(s==null?void 0:s.transectionDate)||"Pending"})]})]})}),e.jsx("div",{className:"col-span-12 md:mt-4 mt-10",children:e.jsxs("div",{className:"flex justify-center",children:[e.jsx("button",{onClick:S,className:"mx-2 bg-sky-600 hover:bg-sky-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm rounded-sm shadow-xl",children:"Dashboard"}),s&&e.jsx("button",{onClick:()=>C(`/waterConnReceipt/${s==null?void 0:s.transectionNo}`),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"View Receipt"}),!s&&e.jsx("button",{onClick:()=>g(),className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"Check Status"})]})})]})]}),!h&&((c==null?void 0:c.category)=="Regulaization"?e.jsx(Ue,{closeModal:S,fetchTransactionDetails:g,paymentData:x}):e.jsx(Ye,{closeModal:S,fetchTransactionDetails:g,paymentData:x}))]})})}const Je=c=>{const[v,k]=r.useState(null),[h,A]=r.useState(!1),[s,M]=r.useState(),[n,L]=r.useState(!1),[C,x]=r.useState(),[b,S]=r.useState(!1),[g,u]=r.useState(),f=c.data,P=c==null?void 0:c.isLoading,l=X(),O=t=>{k(v===t?null:t)},d=t=>{S(!0),u(t),console.log("Clicked PAy",t)},I=()=>{console.log("WaterPendingApplicationsList - Before"),c.refechList(),console.log("WaterPendingApplicationsList - After")},y=t=>{M(t),A(!0)},i=t=>{x(t),L(!0)};if(P)return"Loading..";if(!f)return e.jsx(Pe,{message:"No Pending Water Application Found."});const E=g==null?void 0:g.connection_type_name;return e.jsxs(e.Fragment,{children:[h&&e.jsx(Me,{setOpenDeleteModal:A,openDeleteModal:h,dataTobeDeleted:s,reFetch:I}),n&&e.jsx(Fe,{openSiteVerityModal:L,id:C}),b&&e.jsx(Ge,{category:E,openPaymentModal:S,paymentData:g,refechList:I}),e.jsxs("div",{className:"w-full md:ml-0 mb-20",children:[e.jsxs("p",{className:"font-manrope md:my-4 px-1 ",children:["Total : "," ",e.jsx("span",{className:"font-semibold",children:f==null?void 0:f.length})]}),e.jsx("div",{className:"overflow-y-auto h-auto md:w-full mb-10 md:mr-0 max-sm:p-1",children:f==null?void 0:f.map((t,j)=>e.jsxs("div",{className:"md:w-full border border-gray-300 rounded-md my-2 bg-white cursor-pointer",onClick:()=>O(j),children:[e.jsxs("div",{className:"flex max-sm:gap-0 overflow-auto md:flex grid-cols-12 p-2 w-full items-center max-sm:items-start justify-between border-b border-gray-100  max-sm:flex-col",children:[e.jsx("div",{className:"flex flex-row justify-center items-center max-sm:w-full max-sm:mt-2 max-sm:mb-2",children:e.jsx("img",{src:Ee,className:"h-10 ml-3 rounded-full "})}),e.jsxs("div",{className:"max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"ULB"}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm truncate",style:{color:t!=null&&t.parked?"red":"inherit"},children:(t==null?void 0:t.ulb_name)||"Ranchi Municipal Corporation"})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%] ",children:"Consumer No."}),e.jsx("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",style:{color:t!=null&&t.parked?"red":"inherit"},children:t==null?void 0:t.consumer_no})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer Type"}),e.jsxs("p",{className:"px-2 py-1 break-all font-manrope font-semibold col-span-2 text-sm",children:[" ",t==null?void 0:t.consumer_type_name]})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Consumer Name"}),e.jsx("p",{className:" md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:t==null?void 0:t.applicant_name})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due Amount"}),e.jsx("p",{className:" md:block px-2 py-1 break-all col-span-2 font-semibold text-sm",children:t==null?void 0:t.total_demand_amount})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due From"}),e.jsx("p",{className:" md:block px-2 py-1 col-span-2 max-sm:text-sm",children:$(t==null?void 0:t.demand_from,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsxs("div",{className:" max-sm:w-full max-sm:flex max-sm:mb-2",children:[e.jsx("p",{className:"px-2 text-gray-500 max-sm:w-[40%]",children:"Due Upto"}),e.jsx("p",{className:" md:block px-2 py-1 col-span-2 max-sm:text-sm",children:$(t==null?void 0:t.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy")})]}),e.jsx("div",{className:"max-sm:flex max-sm:justify-end max-sm:w-full",children:e.jsx("p",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium col-span-1 ",children:v===j?e.jsx(Ae,{size:24}):e.jsx(Ce,{size:24})})})]}),e.jsx("div",{className:"flex-none bg-gray-100",children:v===j&&e.jsxs("div",{className:"p-2 md:p-5 ease-in duration-300 bg-indigo-100",children:[e.jsxs("div",{className:"md:hidden grid grid-cols-12 text-sm border-b-2 pb-2 mb-2 border-gray-100",children:[e.jsxs("div",{className:"col-span-6 mr-1",children:[e.jsxs("p",{className:"flex justify-between",children:["Payment :",e.jsxs("span",{className:"font-semibold",children:[(t==null?void 0:t.payment_status)==0&&"UnPaid",(t==null?void 0:t.payment_status)==1&&"Paid",(t==null?void 0:t.payment_status)==2&&"Processing"]})]}),e.jsxs("p",{className:"flex justify-between",children:["Document :",e.jsx("span",{className:"font-semibold",children:(t==null?void 0:t.doc_upload_status)==!0?"Uploaded":"NotUpload"})]})]}),e.jsxs("div",{className:"col-span-6 ml-4",children:[e.jsxs("p",{className:"flex justify-between",children:["Type :",e.jsxs("span",{className:"font-semibold",children:[" ",t==null?void 0:t.type]})]}),e.jsxs("p",{className:"flex justify-between",children:["Apply on :",e.jsx("span",{className:"font-semibold text-xs",children:$(t==null?void 0:t.apply_date,"YYYY-MM-DD").format("DD-MMM-yy")})]})]})]}),e.jsxs("div",{className:"flex justify-center md:justify-end flex-wrap gap-1 md:gap-3",children:[(t==null?void 0:t.is_field_verified)&&e.jsx("button",{onClick:()=>i(t==null?void 0:t.id),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Site Verification"}),(t==null?void 0:t.doc_upload_status)&&(t==null?void 0:t.payment_status)==0&&e.jsx("button",{onClick:()=>d(t),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(t==null?void 0:t.actualPaymentStatus)==0&&e.jsx("button",{onClick:()=>d(t),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Pay Now"}),(t==null?void 0:t.current_role_name)==""&&e.jsx("button",{onClick:()=>l(`/water-doc-upload/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Upload Document"}),(t==null?void 0:t.parked)==!0&&e.jsx("button",{onClick:()=>l(`/water-doc-upload/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"Re-Upload Document"}),e.jsx("button",{onClick:()=>l(`/water/viewApplication/${t==null?void 0:t.id}`),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-indigo-500 hover:bg-indigo-600",children:"View Details"}),(t==null?void 0:t.payment_status)==0&&(t==null?void 0:t.current_role)==""&&e.jsx("button",{onClick:()=>y({application_no:t==null?void 0:t.application_no,id:t==null?void 0:t.id}),className:"px-2 md:px-3 py-1 rounded text-xs md:text-sm text-white bg-red-500 hover:bg-red-600",children:"Delete"})]})]},t.name)})]},t.index))})]})]})},qe=()=>{r.useState(null);const[c,v]=r.useState(1),[k,h]=r.useState(0),[A,s]=r.useState(),[M,n]=r.useState(),[L,C]=r.useState(),[x,b]=r.useState(!1),[S,g]=r.useState(!1),[u,f]=r.useState(!1);r.useState(!1);const[P,l]=r.useState(!0),{api_swmAttachedConsumerList:O,api_citizenApplications:d,api_citizenApprovedApplications:I,header:y}=G(),i=X(),E=()=>{h(a=>a+1)},{setBreadCrumbData:t}=r.useContext(q);r.useEffect(()=>{t(["Water Dashboard"])},[]);const j=()=>{l(!0),f(!0),B.post(O,{},y).then(a=>{var m;l(!1),a.data.status?(f(!1),s((m=a==null?void 0:a.data)==null?void 0:m.data),console.log("Fetched Attached WAter consumer List",a)):(f(!1),console.log("Error: While fetching attached consumer list",a.data))}).catch(a=>{if(l(!1),f(!1),console.log("Exception: While fetching attached consumer list",a),a.response.status===401)return i("/logout")})},z=()=>{l(!0),b(!0),B.post(d,{},y).then(a=>{var m;l(!1),a.data.status?(b(!1),n((m=a==null?void 0:a.data)==null?void 0:m.data),console.log("Fetched water pending application list",a)):(b(!1),console.log("Error: While fetching water pending application list",a.data))}).catch(a=>{if(l(!1),b(!1),console.log("Exception: While fetching water pending application list",a),a.response.status===401)return i("/logout")})},T=()=>{l(!0),g(!0),B.post(I,{},y).then(a=>{var m;l(!1),a.data.status?(g(!1),C((m=a==null?void 0:a.data)==null?void 0:m.data),console.log("Fetched water pending application list",a)):(g(!1),console.log("Error: While fetching water pending application list",a.data))}).catch(a=>{if(l(!1),g(!1),a.response.status===401)return i("/logout");console.log("Exception: While fetching water pending application list",a)})};r.useEffect(()=>{j(),z(),T()},[]);const W=()=>{z()},V=()=>{j()};return e.jsx(e.Fragment,{children:P?e.jsx(Ie,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{openAttachModal:k,refetch:V}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex-1 md:flex items-center md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"md:text-3xl text-2xl text-gray-800 font-semibold max-sm:pl-5",children:[" ","SWM Dashboard"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 max-sm:pl-5",children:"Here is list of all SWM Consumers attached."})]}),e.jsxs("div",{className:"flex p-2 gap-1 max-sm:pl-5",children:[e.jsx("button",{onClick:()=>E(),className:`${_e} relative`,"data-tooltip-id":"link-connection-tooltip",children:e.jsxs("span",{className:"flex text-sm md:text-base",children:[e.jsx("span",{className:"md:mt-1 mr-1",children:e.jsx(Se,{size:17})}),"Link Consumer"]})}),e.jsx(pe,{id:"link-connection-tooltip",place:"top",effect:"solid",content:"Click to link an existing connection.",className:`!bg-white !text-black !border !border-gray-300 \r
                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r
                   transition-opacity duration-300 ease-in-out`}),e.jsx(pe,{id:"apply-new-connection-tooltip",place:"top",effect:"solid",content:"Click to apply for a new water connection.",className:`!bg-white !text-black !border !border-gray-300 \r
                   shadow-lg px-3 py-2 rounded-md text-sm font-medium \r
                   transition-opacity duration-300 ease-in-out`})]})]}),e.jsx("div",{className:"bg-white overflow-auto",children:e.jsx("ul",{className:"border-b flex items-center gap-1 md:gap-x-6 text-xs md:text-sm",children:e.jsx("li",{className:`py-2 border-b-2 ${c==1?"text-indigo-500 border-indigo-500":"border-white text-gray-500"}  `,children:e.jsxs("button",{onClick:()=>v(1),role:"tab",className:"flex items-center font-semibold gap-x-2 py-2 px-2 rounded-lg duration-150 hover:text-indigo-500 hover:bg-gray-50 active:bg-gray-100",children:[e.jsx("img",{className:"h-5 w-5 hidden md:block",src:Te,alt:"Approved Icon"}),"Attached Consumers"]})})})}),e.jsx("div",{children:e.jsx("section",{className:"container mx-auto py-4",children:e.jsx("div",{children:c==1&&e.jsx(ze,{errorMsg:"Error Data Loading..",children:e.jsx(Je,{refechList:W,isLoading:x,data:A})})})})})]})]})})},He=()=>e.jsx("div",{className:"p-10",children:e.jsx(qe,{})}),gt=()=>(X(),e.jsx(e.Fragment,{children:e.jsx("section",{className:"-mt-10",children:e.jsx(He,{})})}));export{gt as default};
