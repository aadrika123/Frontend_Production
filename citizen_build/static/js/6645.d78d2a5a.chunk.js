"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[6645],{76645:function(e,t,n){n.r(t);var o=n(4942),r=n(1413),s=n(70885),i=n(72791),c=n(57689),a=n(99008),l=n(61044),u=n(5055),d=n(39723),f=n(64491),h=n(25229),x=n(80184);t.default=function(e){var t,n=(0,i.useState)(!1),v=(0,s.Z)(n,2),m=v[0],g=v[1],p=(0,i.useState)(""),b=(0,s.Z)(p,2),w=(b[0],b[1],(0,a.Z)().api_verifyMobileOtp),y=(0,i.useState)(!1),j=(0,s.Z)(y,2),k=j[0],Z=j[1],N=(0,i.useContext)(u.n).notify,S=(0,i.useState)(!1),C=(0,s.Z)(S,2),L=C[0],D=C[1],O=(0,i.useState)(""),P=(0,s.Z)(O,2),R=P[0],T=P[1],B=(0,i.useState)(60),K=(0,s.Z)(B,2),M=K[0],z=K[1],_=(0,i.useState)({first:"",second:"",third:"",fourth:"",fifth:"",sixth:""}),E=(0,s.Z)(_,2),I=E[0],V=E[1],F=(0,i.useRef)(),H=(0,i.useRef)(),U=(0,i.useRef)(),W=(0,i.useRef)(),q=(0,i.useRef)(),A=(0,i.useRef)(),G=(0,c.s0)(),J=(0,i.useState)("first"),Q=(0,s.Z)(J,2),X=Q[0],Y=Q[1],$=function(e,t){T("");var n=(0,r.Z)((0,r.Z)({},I),{},(0,o.Z)({},t,e.target.value));if(V((0,r.Z)((0,r.Z)({},I),{},(0,o.Z)({},t,e.target.value))),1===e.target.value.length)switch(t){case"first":H.current.focus(),Y("second");break;case"second":U.current.focus(),Y("third");break;case"third":W.current.focus(),Y("fourth");break;case"fourth":q.current.focus(),Y("fifth");break;case"fifth":A.current.focus(),Y("sixth");break;case"sixth":Y("sixth")}te(n)},ee=function(e){switch(e){case"second":F.current.focus(),V((0,r.Z)((0,r.Z)({},I),{},{second:""})),Y("first");break;case"third":H.current.focus(),V((0,r.Z)((0,r.Z)({},I),{},{third:""})),Y("second");break;case"fourth":U.current.focus(),V((0,r.Z)((0,r.Z)({},I),{},{fourth:""})),Y("third");break;case"fifth":W.current.focus(),V((0,r.Z)((0,r.Z)({},I),{},{fifth:""})),Y("fouth");break;case"sixth":q.current.focus(),V((0,r.Z)((0,r.Z)({},I),{},{sixth:""})),Y("fifth")}},te=function(e){console.table(e),""!=e.first&&""!=e.second&&""!=e.third&&""!=e.fourth&&""!=e.fifth&&""!=e.sixth?D(!0):D(!1)},ne=60,oe=function(){t=setInterval((function(){z((function(e){return e-1})),0==(ne-=1)&&(g(!0),console.log("inside static stop..."),clearInterval(t))}),1e3)};(0,i.useEffect)((function(){oe()}),[]);var re=(0,i.useState)(!1),se=(0,s.Z)(re,2),ie=se[0],ce=se[1];return ie?(0,x.jsx)(f.Z,{children:(0,x.jsx)(h.Z,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):(0,x.jsxs)(x.Fragment,{children:[k&&(0,x.jsx)(d.Z,{}),(0,x.jsx)(f.Z,{children:(0,x.jsx)("div",{class:"",children:(0,x.jsx)("div",{class:"container mx-auto",children:(0,x.jsx)("div",{class:"max-w-sm mx-auto md:max-w-lg",children:(0,x.jsxs)("div",{class:"w-full px-2 md:px-0",children:[(0,x.jsxs)("div",{className:"w-full text-center py-2  bg-gray-200 text-black relative",children:[null===e||void 0===e?void 0:e.headTitle,(0,x.jsx)("button",{onClick:null===e||void 0===e?void 0:e.closeOtpModal,type:"button",class:"absolute top-1 right-6 bg-transparent bg-gray-200 text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center shadow-sm  hover:bg-red-200 hover:border-none",children:(0,x.jsx)("svg",{class:"w-5 h-5",fill:"currentColor",children:(0,x.jsx)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})})]}),(0,x.jsxs)("div",{class:"bg-white py-20 px-6 md:py-20 md:px-20 w-full md:w-auto rounded text-center shadow-xl relative",children:[(0,x.jsx)("div",{class:"text-2xl font-bold px-2",children:"OTP Verification"}),(0,x.jsx)("div",{class:"flex flex-col mt-4 text-center",children:(0,x.jsx)("span",{className:"text-center text-red-400",children:R})}),(0,x.jsxs)("div",{class:"flex flex-col mt-4",children:[(0,x.jsx)("span",{children:"Enter the OTP you received at"}),(0,x.jsxs)("span",{class:"font-bold",children:["+91 ",null===e||void 0===e?void 0:e.verifedMobileNo]})]}),(0,x.jsxs)("div",{id:"otp",class:"flex flex-row justify-center text-center px-2 mt-5",children:[(0,x.jsx)("input",{ref:F,type:"text",min:0,value:I.first,maxLength:1,onChange:function(e){return $(e,"first")},onKeyDown:function(e){return"Backspace"===e.key&&ee("first")},className:"".concat("first"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")}),(0,x.jsx)("input",{ref:H,type:"text",min:0,value:I.second,maxLength:1,onChange:function(e){return $(e,"second")},onKeyDown:function(e){return"Backspace"===e.key&&ee("second")},className:"".concat("second"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")}),(0,x.jsx)("input",{ref:U,type:"text",min:0,value:I.third,maxLength:1,onChange:function(e){return $(e,"third")},onKeyDown:function(e){return"Backspace"===e.key&&ee("third")},className:"".concat("third"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")}),(0,x.jsx)("input",{ref:W,type:"text",min:0,value:I.fourth,maxLength:1,onChange:function(e){return $(e,"fourth")},onKeyDown:function(e){return"Backspace"===e.key&&ee("fourth")},className:"".concat("fourth"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")}),(0,x.jsx)("input",{ref:q,type:"text",min:0,value:I.fifth,maxLength:1,onChange:function(e){return $(e,"fifth")},onKeyDown:function(e){return"Backspace"===e.key&&ee("fifth")},className:"".concat("fifth"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")}),(0,x.jsx)("input",{ref:A,type:"text",min:0,value:I.sixth,maxLength:1,onChange:function(e){return $(e,"sixth")},onKeyDown:function(e){return"Backspace"===e.key&&ee("sixth")},className:"".concat("sixth"===X?"active":""," m-2 border h-10 w-10 text-center form-control rounded")})]}),(0,x.jsxs)("div",{class:"flex justify-center text-center mt-5",children:[!m&&(0,x.jsx)("div",{className:"w-10 h-10 bg-indigo-500 flex justify-center items-center rounded-full text-white",children:M}),(0,x.jsxs)("button",{disabled:!m,onClick:function(){null===e||void 0===e||e.reSendOtp(),g(!1),z(60),ne=60,oe()},class:"ml-4 flex items-center ".concat(m?"text-indigo-500 hover:text-blue-900 cursor-pointer":"text-gray-400 hover:text-none cursor-default"),children:[(0,x.jsx)("span",{class:"font-bold",children:"Resend OTP"}),(0,x.jsx)("i",{class:"bx bx-caret-right ml-1"})]})]}),(0,x.jsxs)("div",{class:"w-full text-center mt-5",children:[L&&(0,x.jsx)("button",{type:"button",onClick:function(){ce(!1),Z(!0);var t={otp:"".concat(I.first).concat(I.second).concat(I.third).concat(I.fourth).concat(I.fifth).concat(I.sixth),mobileNo:null===e||void 0===e?void 0:e.verifedMobileNo};console.log("before verify otp...",t),l.ZP.post(w,t).then((function(t){var n,o;(console.log("otp verify response",null===t||void 0===t?void 0:t.data),null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.status)?null===e||void 0===e||e.callback():(N("Wrong OTP, Please enter correct OTP","error"),T(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message));Z(!1)})).catch((function(e){console.log("otp verify error",e),N("Something went wrong...","error"),T("Something went wrong !"),ce(!0),Z(!1)}))},className:"w-full  py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:"Submit"}),!L&&(0,x.jsx)("button",{type:"button",className:"w-full  py-2.5 bg-gray-400 text-white font-medium text-xs leading-tight  rounded shadow-md  hover:shadow-lg  focus:shadow-lg focus:outline-none focus:ring-0  transition duration-150 ease-in-out cursor-default ",children:"Submit"})]}),0!=(null===e||void 0===e?void 0:e.bottomNaviation)&&(0,x.jsxs)("div",{className:"text-left w-full mt-10 flex justify-center items-center",children:[(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsx)("span",{onClick:function(){return G("/")},className:"text-indigo-500 font-semibold hover:bg-white px-3 py-1 cursor-pointer ",children:"Home"})}),(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsx)("span",{onClick:function(){return G("/login")},className:"text-indigo-500 font-semibold hover:bg-white px-3 py-1 cursor-pointer float-right",children:"Login "})})]})]})]})})})})})]})}}}]);
//# sourceMappingURL=6645.d78d2a5a.chunk.js.map