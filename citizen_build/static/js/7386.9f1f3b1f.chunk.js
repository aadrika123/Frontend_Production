"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[7386],{40399:function(e,s,l){l(72791),l(39883);var t=l(67619),a=l(80184);s.Z=function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"p-4 w-screen h-screen fixed top-0 left-0 flex flex-col justify-center items-center shadow-xl",style:{zIndex:1e3},children:[(0,a.jsx)("div",{className:"w-full h-full bg-indigo-50 absolute top-0 left-0 opacity-50 shadow-xl"}),(0,a.jsxs)("div",{className:"rounded-full relative shadow-xl",children:[(0,a.jsx)("img",{className:"w-28 h-28",src:t.Z,alt:""}),(0,a.jsx)("div",{className:"w-full h-full absolute top-0 left-0 border-4 border-indigo-500 rounded-full border-t-white border-b-white animate-spin"})]}),(0,a.jsx)("div",{children:"Loading..."})]})})}},87386:function(e,s,l){l.r(s);var t=l(1413),a=l(29439),i=l(31243),d=l(55705),o=l(72791),r=l(57689),n=l(81724),c=l(32612),x=l(80166),m=l(82536),u=l(39723),v=l(40399),h=l(60786),p=l(58048),f=l(5055),j=(l(64491),l(25229),l(80184));s.default=function(e){var s,l,g,b,N,y,w,Z,_,P,D,k,S=(0,o.useState)(),C=(0,a.Z)(S,2),F=C[0],H=C[1],R=(0,o.useState)(),T=(0,a.Z)(R,2),E=(T[0],T[1]),U=(0,o.useState)(!1),q=(0,a.Z)(U,2),z=q[0],I=q[1],O=(0,o.useState)(!1),A=(0,a.Z)(O,2),L=A[0],B=A[1],J=(0,o.useState)(),V=(0,a.Z)(J,2),W=V[0],M=V[1],G=(0,o.useState)(!1),K=(0,a.Z)(G,2),Q=K[0],X=(K[1],(0,r.UO)().id),Y=(0,x.Z)(),$=Y.api_getHoldingDeactivationDetails,ee=Y.api_postHoldingDeactivationApply,se=(0,o.useContext)(f.n).notify,le=(0,o.useState)(!1),te=(0,a.Z)(le,2),ae=te[0],ie=te[1],de=(0,o.useState)(null),oe=(0,a.Z)(de,2),re=oe[0],ne=oe[1],ce=(0,o.useState)(!1),xe=(0,a.Z)(ce,2),me=xe[0],ue=xe[1],ve=(0,r.s0)(),he=n.Ry({holdingDoc:n.Z_().required("Upload proof of deactivation"),remark:n.Z_().required("write comment for deactivation")}),pe=(0,d.TA)({initialValues:{holdingDoc:"",remark:""},onSubmit:function(e,s){console.log("onsumbt deactivation ",e),e.remark.length<10?se("Please write atleast 10 character comment","error"):fe()},validationSchema:he}),fe=function(){B(!0),ie(!1);var e=new FormData;e.append("propertyId",X),e.append("document",F),e.append("comments",pe.values.remark),console.log("before apply holding deactivation ",e),i.Z.post(ee,e,(0,c.Z)()).then((function(e){var s;(console.log("submit deactivation response....",null===e||void 0===e?void 0:e.data),e.data.status)?(se("Holding deactivation applied successfully !!","success"),ue(!0)):(se(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message,"error"),je(!0,"Error occured. Please try again later."));B(!1)})).catch((function(e){console.log("error at submit deactivation ",e),se("something went wrong !!","error"),je(!0,"Error occured. Please try again later."),B(!1)}))};(0,o.useEffect)((function(){ie(!1),I(!0),console.log("before fetch property details in deactivation"),i.Z.post($,{propertyId:X},(0,c.Z)()).then((function(e){console.log("view prop prop full details...",e.data),M(e.data),I(!1)})).catch((function(e){console.log("==2 details by id error...",e),ie(!0),I(!1)}))}),[]);var je=function(e,s){ne(s),ie(e)};return z?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v.Z,{}),(0,j.jsx)("div",{className:"min-h-screen"})]}):(0,j.jsxs)(j.Fragment,{children:[L&&(0,j.jsx)(u.Z,{}),ae&&(0,j.jsx)(m.Z,{activateBottomErrorCard:je,errorTitle:re}),(0,j.jsx)("div",{className:p.tj,children:"Holding Deactivation"}),(0,j.jsx)("div",{className:"w-full bg-white shadow-xl mb-6",children:(0,j.jsxs)("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[(0,j.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.holding_no)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(l=W.data)||void 0===l?void 0:l.old_ward_no)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-semibold text-lg",children:(0,h.jP)(null===W||void 0===W||null===(g=W.data)||void 0===g?void 0:g.old_ward_no)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-semibold text-md",children:(0,h.jP)(null===W||void 0===W||null===(b=W.data)||void 0===b?void 0:b.ownership_type)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(N=W.data)||void 0===N?void 0:N.property_type)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),(0,j.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(y=W.data)||void 0===y?void 0:y.zone_mstr_id)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(w=W.data)||void 0===w?void 0:w.is_mobile_tower)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsxs)("div",{className:"font-semibold text-md",children:[(0,h.jP)(null===W||void 0===W||null===(Z=W.data)||void 0===Z?void 0:Z.is_hoarding_board)," "]}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-semibold text-md",children:(0,h.jP)(null===W||void 0===W||null===(_=W.data)||void 0===_?void 0:_.is_petrol_pump)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===W||void 0===W||null===(P=W.data)||void 0===P?void 0:P.is_water_harvesting)}),(0,j.jsx)("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),(0,j.jsxs)("div",{children:[1!=(null===W||void 0===W||null===(D=W.data)||void 0===D?void 0:D.deactivationStatus)&&!me&&(0,j.jsx)("form",{onSubmit:pe.handleSubmit,onChange:function(e){"holdingDoc"==e.target.name&&function(e){e.target.files[0],E(URL.createObjectURL(e.target.files[0])),H(e.target.files[0])}(e)},encType:"multipart/form",className:"w-full bg-white shadow-xl py-5",children:(0,j.jsxs)("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-center pl-6 py-2",children:[(0,j.jsx)("label",{className:"",children:"Upload Document"}),(0,j.jsxs)("div",{className:"text-xs text-gray-700 md:ml-4",children:[(0,j.jsx)("input",(0,t.Z)((0,t.Z)({},pe.getFieldProps("holdingDoc")),{},{accept:".pdf,.png,.jpg,.jpeg",type:"file",className:"mt-2 form-control block w-full px-3 py-2 text-base font-normal bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none cursor-pointer shadow-md w-40"})),(0,j.jsx)("div",{children:"Only pdf, jpg, jpeg or png allowed."}),(0,j.jsx)("span",{className:"text-red-600 absolute text-xs",children:pe.touched.holdingDoc&&pe.errors.holdingDoc?pe.errors.holdingDoc:null})]}),(0,j.jsx)("div",{className:"mt-10 md:mt-0",children:(0,j.jsx)("label",{className:"",children:"Add Remarks"})}),(0,j.jsxs)("div",{className:"md:ml-4",children:[(0,j.jsx)("textarea",(0,t.Z)((0,t.Z)({},pe.getFieldProps("remark")),{},{className:"form-control block w-full px-3 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none shadow-md w-60 ",placeholder:"Enter your remark"})),(0,j.jsx)("span",{className:"text-red-600 absolute text-xs",children:pe.touched.remark&&pe.errors.remark?pe.errors.remark:null})]}),(0,j.jsx)("div",{className:"md:ml-4",children:(0,j.jsx)("button",{type:"submit",className:p.J4,children:"Submit Deactivation Request"})})]})}),me&&(0,j.jsx)("div",{className:"w-full h-full bg-white p-20",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"text-center font-semibold text-3xl",children:"Deactivation for this property has been applied."}),(0,j.jsx)("div",{className:"text-center mt-6",children:(0,j.jsx)("button",{type:"button",className:p.J4,onClick:function(){return ve("/propertyDashboard")},children:"View Dashboard"})})]})}),(1==(null===W||void 0===W||null===(k=W.data)||void 0===k?void 0:k.deactivationStatus)||Q)&&(0,j.jsx)("div",{children:(0,j.jsx)("h1",{className:"w-full text-center text-red-500 text-2xl font-semibold",children:"Deactivation request already submitted !"})})]}),(0,j.jsx)("div",{className:"w-full h-40 md:none"})]})}}}]);
//# sourceMappingURL=7386.9f1f3b1f.chunk.js.map