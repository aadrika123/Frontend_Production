"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[195],{70195:function(e,o,t){t.r(o);var l=t(1413),n=t(29439),i=t(72791),a=t(97948),d=t.n(a),s=t(60786),r=t(55705),u=t(81724),c=t(99008),g=t(62037),h=t(31243),v=t(5055),x=t(57689),p=t(32612),f=(t(64491),t(25229),t(82536)),m=t(48119),b=t(80184);d().setAppElement("#root"),o.default=function(e){var o=(0,i.useState)(!0),t=(0,n.Z)(o,2),a=(t[0],t[1],(0,i.useState)(!1)),d=(0,n.Z)(a,2),w=d[0],N=d[1],j=(0,i.useState)(!1),y=(0,n.Z)(j,2),Z=y[0],_=y[1],S=(0,i.useState)(""),C=(0,n.Z)(S,2),P=C[0],k=(C[1],(0,c.Z)()),H=k.api_sendMobileOtpAttachment,F=(k.api_verifyHolding,k.api_filterPropertyDetails),A=(0,i.useContext)(v.n).notify,E=((0,x.s0)(),(0,i.useState)(!1)),L=(0,n.Z)(E,2),T=L[0],M=L[1],V=(0,i.useState)(null),O=(0,n.Z)(V,2),z=O[0],B=O[1],D=(0,i.useState)(""),R=(0,n.Z)(D,2),W=R[0],q=R[1],G=(0,i.useState)(""),I=(0,n.Z)(G,2),J=(I[0],I[1]),K=(0,i.useState)([]),Q=(0,n.Z)(K,2),U=Q[0],X=Q[1],Y=u.Ry({ptnNo:u.Z_(),holdingNo:u.Z_()}),$=(0,r.TA)({initialValues:{ptnNo:"",holdingNo:""},onSubmit:function(e){console.log("at submit form.....",e)},validationSchema:Y}),ee=function(e,o){B(o),M(e)},oe=function(o,t,l){""!=$.values.holdingNo||""!=$.values.ptn?(console.log("attach holding => ",o,t,l),q(""),console.log("otp send..."),N(!0),_(!1),t?null===e||void 0===e||e.setholdingNo(t):null===e||void 0===e||e.setptnNo(o),function(o){var t;M(!1),N(!0),_(!1),t=0==o.ptnNo.length?{holdingNo:o.holdingNo}:{ptNo:o.ptnNo},console.log("before send otp for attachment...",t),h.Z.post(H,t,(0,p.Z)()).then((function(o){var t,l,n,i;console.log("otp send for attachment response",null===o||void 0===o?void 0:o.data),null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t.status?(null===e||void 0===e||e.setpropertyAttachedMobileNo(null===o||void 0===o||null===(l=o.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.mobileNo),null===e||void 0===e||e.setptnCardStatus(!1),null===e||void 0===e||e.setotpCardStatus(!0)):ee(!0,null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message),N(!1)})).catch((function(e){console.log("error otp send",e),A("Something went wrong in attachment...","error"),N(!1),ee(!0,"Error occured. Please try again later."),_(!0)}))}($.values)):ee(!0,"Enter holding or pt no.")},te=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"owner_name"},{Header:"PT No.",accessor:"pt_no",Cell:function(e){var o=e.cell;return(0,b.jsx)("span",{children:(0,s.jP)(o.row.original.pt_no)})}},{Header:"Holding No",accessor:"new_holding_no",Cell:function(e){var o=e.cell;return(0,b.jsx)("span",{children:(0,s.jP)(o.row.original.new_holding_no)})}},{Header:"Mobile No",accessor:"mobile_no",Cell:function(e){var o=e.cell;return(0,b.jsx)("span",{children:(0,s.jP)(o.row.original.mobile_no)})}},{Header:"Action",accessor:"id",Cell:function(e){var o=e.cell;return(0,b.jsx)("button",{onClick:function(){var e,t,l,n,i,a;return oe(null===o||void 0===o||null===(e=o.row)||void 0===e||null===(t=e.original)||void 0===t?void 0:t.pt_no,null===o||void 0===o||null===(l=o.row)||void 0===l||null===(n=l.original)||void 0===n?void 0:n.new_holding_no,null===o||void 0===o||null===(i=o.row)||void 0===i||null===(a=i.original)||void 0===a?void 0:a.ulb_id)},className:"bg-indigo-500 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-indigo-700 text-white",children:"Attach"})}}];return(0,b.jsxs)(b.Fragment,{children:[w&&(0,b.jsx)(g.Z,{}),T&&(0,b.jsx)(f.Z,{activateBottomErrorCard:ee,errorTitle:z}),(0,b.jsx)("div",{class:"w-full sm:w-full  mx-auto",children:(0,b.jsx)("div",{class:"container mx-auto",children:(0,b.jsxs)("div",{class:"mx-auto flex flex-wrap gap-4 justify-center items-center",children:[(0,b.jsx)("div",{class:"w-max bg-white rounded text-center shadow-xl relative py-10 px-8",children:(0,b.jsxs)("div",{class:"",children:[(0,b.jsx)("button",{onClick:function(){return null===e||void 0===e?void 0:e.closeModal(!1)},type:"button",class:"absolute top-6 right-6 bg-transparent bg-gray-200 text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center shadow-sm  hover:bg-red-200 hover:border-none",children:(0,b.jsx)("svg",{class:"w-5 h-5",fill:"currentColor",children:(0,b.jsx)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),(0,b.jsx)("div",{class:"text-2xl font-bold px-10",children:"Enter Holding or PT no."}),(0,b.jsx)("div",{class:"flex flex-col mt-4 text-center",children:(0,b.jsxs)("span",{className:"text-center",children:["Enter 14 digit PTN no, or Holding no.",(0,b.jsx)("br",{}),"to attach a property"]})}),(0,b.jsx)("div",{class:"flex flex-col mt-4 text-center",children:(0,b.jsx)("span",{className:"text-center text-red-400",children:W})}),(0,b.jsx)("div",{class:"flex flex-row justify-center text-center mt-5",children:(0,b.jsxs)("form",{onSubmit:$.handleSubmit,onChange:function(o){var t=o.target.name,l=o.target.value;"ptnNo"==t?($.setFieldValue("holdingNo",""),null===e||void 0===e||e.setholdingNo("")):($.setFieldValue("ptnNo",""),null===e||void 0===e||e.setptnNo("")),"ptnNo"==t&&$.setFieldValue("ptnNo",l),"holdingNo"==t&&$.setFieldValue("holdingNo",l),"ptnNo"==t&&l.length>=14||"holdingNo"==t&&l.length>=14?_(!0):_(!1)},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold w-full text-left",children:"PTN"}),(0,b.jsx)("input",(0,l.Z)((0,l.Z)({type:"text"},$.getFieldProps("ptnNo")),{},{className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}))]}),(0,b.jsx)("div",{className:"font-semibold text-indigo-500 mt-2",children:"Or"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold w-full text-left",children:"Holding No."}),(0,b.jsx)("input",(0,l.Z)((0,l.Z)({type:"text"},$.getFieldProps("holdingNo")),{},{className:"form-control block w-full px-3 2xl:py-1.5 py-1 2xl:text-base text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}))]}),(0,b.jsx)("div",{className:"text-red-500 mt-10",children:P}),(0,b.jsxs)("div",{class:"w-full text-center",children:[Z&&(0,b.jsx)("button",{type:"button",onClick:function(){var e,o;null===(e=Object.entries(null===$||void 0===$?void 0:$.values))||void 0===e||e.map((function(e,t){var l=(0,n.Z)(e,2),i=l[0],a=l[1];""!=a&&(o={filteredBy:i,parameter:a,isLegacy:!1,page:1,perPage:100},J(i))})),N(!0),console.log("gettting body => ",o),h.Z.post(F,o,(0,p.Z)()).then((function(e){var o,t,l,n,i,a,d;(console.log("holding list => ",e),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.status)?(X(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.data),0==(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.length)&&ee(!0,"No Data Found !!!")):ee(!0,null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.message)})).catch((function(e){console.log("error getting holding list => ",e)})).finally((function(){return N(!1)}))},className:"w-full  py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out",children:w?"Fetching...":"Submit"}),!Z&&(0,b.jsx)("button",{type:"button",className:"w-full  py-2.5 bg-gray-400 text-white font-medium text-xs leading-tight  rounded shadow-md  hover:shadow-lg  focus:shadow-lg focus:outline-none focus:ring-0  transition duration-150 ease-in-out cursor-default ",children:"Submit"})]})]})})]})}),(null===U||void 0===U?void 0:U.length)>0&&(0,b.jsx)("div",{class:"bg-white py-10 px-8 rounded text-center shadow-xl relative md:w-auto w-[97vw]",children:(0,b.jsx)(m.Z,{dataList:U,columns:te})})]})})})]})}}}]);
//# sourceMappingURL=195.fb3967d6.chunk.js.map