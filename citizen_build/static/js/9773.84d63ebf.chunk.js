"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[9773],{36124:function(e,o,l){function t(){var e=window.localStorage.getItem("citizen_token");return{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}}l.d(o,{Z:function(){return t}})},39773:function(e,o,l){l.r(o);var t=l(70885),d=l(72791),n=l(55705),i=l(81724),s=l(87011),a=(l(97948),l(61044)),c=l(36124),r=l(75985),u=l(62037),p=l(32612),v=l(73728),m=l(99008),x=l(57689),h=(l(5289),l(80184));o.default=function(e){var o,l,f,g,j="http://192.168.0.16:8000",b=(0,x.UO)(),N=b.id,w=b.type;console.log("id in upload........",N,"and type => ",w);var y=(0,m.Z)(),D=y.get_ConcessionDocumentsToUpload,S=y.post_ConcessionDocumentUpload,Z=y.get_ObjectionDocumentsToUpload,C=y.post_ObjectionDocumentUpload,k=y.get_HarvestingDocumentsToUpload,U=y.post_HarvestingDocumentUpload,F=y.get_ConcessionDetailsById,P=y.get_HarvestingDetailsById,_=y.get_ObjectionDetailsById,I=(0,d.useState)(!1),O=(0,t.Z)(I,2),A=O[0],R=O[1],T=(0,d.useState)(""),B=(0,t.Z)(T,2),H=B[0],V=B[1],z=(0,d.useState)(""),L=(0,t.Z)(z,2),E=(L[0],L[1]),W=(0,d.useState)(0),q=(0,t.Z)(W,2),M=q[0],Y=q[1],G=(0,d.useState)(!1),J=(0,t.Z)(G,2),K=J[0],Q=J[1],X=(0,d.useState)(""),$=(0,t.Z)(X,2),ee=($[0],$[1]),oe=(0,d.useState)(1),le=(0,t.Z)(oe,2),te=le[0],de=le[1],ne=(0,d.useState)(0),ie=(0,t.Z)(ne,2),se=(ie[0],ie[1],(0,d.useState)()),ae=(0,t.Z)(se,2),ce=ae[0],re=ae[1],ue=(0,d.useState)(""),pe=(0,t.Z)(ue,2),ve=pe[0],me=pe[1],xe=(0,d.useState)(!0),he=(0,t.Z)(xe,2),fe=he[0],ge=he[1],je=(0,d.useState)(!1),be=(0,t.Z)(je,2),Ne=be[0],we=be[1],ye=(0,d.useState)(),De=(0,t.Z)(ye,2),Se=De[0],Ze=De[1],Ce=(0,d.useState)(),ke=(0,t.Z)(Ce,2),Ue=(ke[0],ke[1],(0,d.useState)()),Fe=(0,t.Z)(Ue,2),Pe=Fe[0],_e=Fe[1],Ie=(0,d.useState)(null),Oe=(0,t.Z)(Ie,2),Ae=Oe[0],Re=Oe[1],Te=(0,d.useState)(null),Be=(0,t.Z)(Te,2),He=Be[0],Ve=Be[1],ze=(0,d.useState)(!1),Le=(0,t.Z)(ze,2),Ee=(Le[0],Le[1]),We=(0,d.useState)(!1),qe=(0,t.Z)(We,2),Me=(qe[0],qe[1]);(0,d.useEffect)((function(){Ye()}),[M]),(0,d.useEffect)((function(){var e="";"Concession"==w&&(e=F),"Rain Water Harvesting"==w&&(e=P),"Objection"==w&&(e=_),R(!0),a.ZP.post(e,{applicationId:N},(0,p.Z)()).then((function(e){var o;R(!1),console.log("view full details...",e.data.data),_e(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)})).catch((function(e){R(!1),console.log("==2 details by id error...",e)}))}),[]);var Ye=function(){var e="";"Concession"==w&&(e=D),"Rain Water Harvesting"==w&&(e=k),"Objection"==w&&(e=Z),R(!0),console.log("before fetch upload doc"),a.ZP.post("".concat(e),{applicationId:N},(0,p.Z)()).then((function(e){var o;console.log("list of doc to upload at pilotworkflowdocumentupload => ",null===e||void 0===e?void 0:e.data),Ze(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data),R(!1)})).catch((function(e){console.log("data submission error bo doc upload => ",e),Q(!1),R(!1)}))};console.log("temp doc => ",Ne);var Ge=i.Ry({docId:i.Rx().required("Select document type"),docUpload:i.Z_().required("Select document")}),Je=(0,n.TA)({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:function(e){console.log("use effect 2"),console.log("values submission => ",e),Qe()},validationSchema:Ge}),Ke=function(e){var o=e.target.files[0];me(e.target.name),re(URL.createObjectURL(e.target.files[0])),V(e.target.files[0]),Je.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),console.log("use effect change ",Je.values.docId,Je.values.docUpload),console.log("file on change bo doc upload => ",o,"and doc upload => ",H,"and url => ",ce,"and name => ",null===o||void 0===o?void 0:o.name,"file name => ",ve),"pdf"==(null===o||void 0===o?void 0:o.name).substring((null===o||void 0===o?void 0:o.name).lastIndexOf(".")+1)?ge(!1):ge(!0)};console.log("and doc name => ",ve);var Qe=function(o){if(null==He)return r.Am.error("Select Document Type"),Re(null),void Ve(null);console.log("doc ref name...",o);var l=new FormData;console.log("document  => ",H);var t={applicationId:null===e||void 0===e?void 0:e.id,ownerId:Ae,docCode:He,document:H};if(l.append("applicationId",N),null!=Ae&&l.append("ownerId",Ae),l.append("docCode",He),l.append("document",H),console.log("form data bo doc upload => ",t),""!=H){we(!1),Ee(!1),Q(!1),Me(!1),de(te+1),console.log("modal m end => ",K,Ne),R(!0);var d="";"Concession"==w&&(d=S),"Rain Water Harvesting"==w&&(d=U),"Objection"==w&&(d=C),console.log("before fetch doc to upload...",l),a.ZP.post("".concat(d),l,(0,c.Z)()).then((function(e){var o;console.log("data submitted bo doc upload => ",e.data),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.status?(r.Am.success("Document Uploaded Successfully !!"),Q(!1),E(""),V(""),R(!1),Y(M+1),me(""),Je.setFieldValue("docUpload",""),Y(M+1),Re(null),Ve(null),Ye()):(console.log("something went"),r.Am.error("Something went wrongg !!!"))})).catch((function(e){console.log("data submission error bo doc upload => ",e),Q(!1),R(!1)}))}else r.Am.error("Select file")},Xe=function(e){console.log("getting doc name => ",e),""==e&&r.Am.error("File not uploaded !!!"),""!=e&&(ee(e),Me(!0),de(te+1))},$e=function(e){Ve(e.target.value)},eo=(0,x.s0)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.Ix,{position:"top-right",autoClose:2e3}),A&&(0,h.jsx)(u.Z,{}),(0,h.jsxs)("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[(0,h.jsx)("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:function(){return eo("/propertyDashboard")},children:"Back"}),"Objection"==w?(0,h.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:["Clerical Mistake"==(null===Pe||void 0===Pe?void 0:Pe.objection_for)&&(0,h.jsx)(h.Fragment,{children:"Clerical Objection"}),"\xa0","Assessment Error"==(null===Pe||void 0===Pe?void 0:Pe.objection_for)&&(0,h.jsx)(h.Fragment,{children:"Assessment Objection"}),"\xa0","Forgery"==(null===Pe||void 0===Pe?void 0:Pe.objection_for)&&(0,h.jsx)(h.Fragment,{children:"Forgery Objection"}),"\xa0 Document Upload"]}):(0,h.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[w," Document Upload"]}),(0,h.jsx)("div",{className:"text-gray-700 py-6 ",children:(0,h.jsx)("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:null===Pe||void 0===Pe||null===(o=Pe.fullDetailsData)||void 0===o||null===(l=o.cardArray)||void 0===l||null===(f=l.data)||void 0===f?void 0:f.map((function(e){return(0,h.jsxs)("div",{className:"grid grid-cols-2",children:[(0,h.jsxs)("div",{className:"px-4 py-2 font-semibold",children:[null===e||void 0===e?void 0:e.displayString," : "]}),(0,h.jsx)("div",{className:"px-4 py-2",children:null===e||void 0===e?void 0:e.value})]})}))})}),(0,h.jsx)("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),(0,h.jsx)("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsxs)("h1",{className:"text-xs poppins",children:[w," Documents"]}),(0,h.jsx)("div",{className:"bg-white shadow-md rounded my-2",children:(0,h.jsxs)("table",{className:"min-w-max w-full table-auto",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"#"}),(0,h.jsx)("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),(0,h.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"Document"}),(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"Status"}),(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"Remarks"}),(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"Preview"}),(0,h.jsx)("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),(0,h.jsx)("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:null===Se||void 0===Se||null===(g=Se.listDocs)||void 0===g?void 0:g.map((function(e,o){var l,t,d,n,i,a,c,r,u,p,m,x,f,g,b,N,w,y,D,S,Z,C,k,U,F,P,_,I,O,R,T,B,H;return(0,h.jsxs)("tr",{className:"border-b border-gray-200 ",onSubmit:Je.handleSubmit,onChange:Je.handleChange,children:[(0,h.jsx)("td",{className:"py-3 px-6 font-semibold",children:o+1}),(0,h.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:(0,h.jsx)("img",{src:s,alt:"rain",className:"w-4"})}),(0,h.jsxs)("span",{className:"font-medium poppins",value:null===e||void 0===e?void 0:e.docName,children:["R"==(null===e||void 0===e?void 0:e.docType)&&(null===e||void 0===e||null===(l=e.masters[0])||void 0===l?void 0:l.docVal),"O"==(null===e||void 0===e?void 0:e.docType)&&"Additional"]})]})}),(0,h.jsx)("td",{className:"py-3 px-6",children:(0,h.jsx)("div",{className:"font-semibold text-sm",children:(0,h.jsx)("div",{className:"",children:(0,h.jsxs)("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:$e,children:[(0,h.jsx)("option",{value:"",selected:!0,children:"--select--"}),null===e||void 0===e||null===(t=e.masters)||void 0===t?void 0:t.map((function(e,o){return(0,h.jsx)("option",{value:null===e||void 0===e?void 0:e.documentCode,children:null===e||void 0===e?void 0:e.docVal})}))]})})})}),(0,h.jsx)("td",{className:"py-3 px-6 text-center relative",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,h.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,h.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){var o;return Xe("".concat(j,"/").concat(null===e||void 0===e||null===(o=e.uploadedDoc)||void 0===o?void 0:o.docPath))},children:(0,h.jsxs)("div",{className:"flex items-center",children:["pdf"==(null===e||void 0===e||null===(d=e.uploadedDoc)||void 0===d||null===(n=d.docPath)||void 0===n?void 0:n.split(".")[(null===e||void 0===e||null===(i=e.uploadedDoc)||void 0===i||null===(a=i.docPath)||void 0===a||null===(c=a.split("."))||void 0===c?void 0:c.length)-1])&&(0,h.jsx)("div",{className:"flex-shrink-0 text-[28px]",children:(0,h.jsx)(v.NFo,{})}),"jpg"==(null===e||void 0===e||null===(r=e.uploadedDoc)||void 0===r||null===(u=r.docPath)||void 0===u?void 0:u.split(".")[(null===e||void 0===e||null===(p=e.uploadedDoc)||void 0===p||null===(m=p.docPath)||void 0===m||null===(x=m.split("."))||void 0===x?void 0:x.length)-1])&&(0,h.jsx)("div",{className:"flex-shrink-0",children:(0,h.jsx)("img",{src:"".concat(j,"/").concat(null===e||void 0===e||null===(f=e.uploadedDoc)||void 0===f?void 0:f.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"jpeg"==(null===e||void 0===e||null===(g=e.uploadedDoc)||void 0===g||null===(b=g.docPath)||void 0===b?void 0:b.split(".")[(null===e||void 0===e||null===(N=e.uploadedDoc)||void 0===N||null===(w=N.docPath)||void 0===w||null===(y=w.split("."))||void 0===y?void 0:y.length)-1])&&(0,h.jsx)("div",{className:"flex-shrink-0",children:(0,h.jsx)("img",{src:"".concat(j,"/").concat(null===e||void 0===e||null===(D=e.uploadedDoc)||void 0===D?void 0:D.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"png"==(null===e||void 0===e||null===(S=e.uploadedDoc)||void 0===S||null===(Z=S.docPath)||void 0===Z?void 0:Z.split(".")[(null===e||void 0===e||null===(C=e.uploadedDoc)||void 0===C||null===(k=C.docPath)||void 0===k||null===(U=k.split("."))||void 0===U?void 0:U.length)-1])&&(0,h.jsx)("div",{className:"flex-shrink-0",children:(0,h.jsx)("img",{src:"".concat(j,"/").concat(null===e||void 0===e||null===(F=e.uploadedDoc)||void 0===F?void 0:F.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),(0,h.jsx)("td",{className:"py-3 px-6 text-center font-semibold",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,h.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{className:"whitespace-no-wrap",children:0==(null===e||void 0===e||null===(P=e.uploadedDoc)||void 0===P?void 0:P.verifyStatus)&&(0,h.jsx)(h.Fragment,{children:"Pending"})}),(0,h.jsx)("p",{className:"text-green-500 whitespace-no-wrap",children:1==(null===e||void 0===e||null===(_=e.uploadedDoc)||void 0===_?void 0:_.verifyStatus)&&(0,h.jsx)(h.Fragment,{children:"Verified"})}),(0,h.jsx)("p",{className:"text-red-500 whitespace-no-wrap",children:2==(null===e||void 0===e||null===(I=e.uploadedDoc)||void 0===I?void 0:I.verifyStatus)&&(0,h.jsx)(h.Fragment,{children:"Rejected"})})]})}),(0,h.jsx)("td",{className:"py-3 px-6 text-center",children:""==(null===e||void 0===e||null===(O=e.uploadedDoc)||void 0===O?void 0:O.remarks)||null==(null===e||void 0===e||null===(R=e.uploadedDoc)||void 0===R?void 0:R.remarks)?(0,h.jsx)("i",{className:"font-semibold",children:"N/A"}):null===e||void 0===e||null===(T=e.uploadedDoc)||void 0===T?void 0:T.remarks}),(0,h.jsxs)("td",{className:"py-3 px-6 text-center",children:[(null===e||void 0===e?void 0:e.docName)==ve&&1==fe&&(0,h.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return Xe(we(!Ne))},children:(0,h.jsx)("img",{src:ce,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(null===e||void 0===e?void 0:e.docName)==ve&&0==fe&&(0,h.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return Xe(we(!Ne))},children:(0,h.jsx)("div",{className:"text-[40px] text-center",children:(0,h.jsx)(v.NFo,{})})})]}),(0,h.jsx)("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:(0,h.jsx)("div",{className:"font-semibold text-sm",children:1!=(null===e||void 0===e||null===(B=e.uploadedDoc)||void 0===B?void 0:B.verifyStatus)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"",children:(0,h.jsx)("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:null===e||void 0===e?void 0:e.docName,onChange:Ke,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(1!=(null===e||void 0===e||null===(H=e.uploadedDoc)||void 0===H?void 0:H.verify_status)||""==(null===e||void 0===e?void 0:e.uploadedDoc))&&(0,h.jsx)("div",{className:"mt-2",children:!A&&(0,h.jsx)("button",{onClick:function(){return Qe(null===e||void 0===e?void 0:e.docName)},type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})}))})]})})]})})]})]})}},87011:function(e,o,l){e.exports=l.p+"static/media/folders.a9fd17f57f747ee94364.png"}}]);
//# sourceMappingURL=9773.84d63ebf.chunk.js.map