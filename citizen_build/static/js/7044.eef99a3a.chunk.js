"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[7044],{37044:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var n=t(29439),s=t(72791),l=t(97948),i=t.n(l),o=t(70894),d=(t(7058),t(57689)),c=t(75985),r=t(93157),p=t(10917),u=t(23178),h=t(71507),x=t(80184),m={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};var v=function(e){var a,t,l,o,v,g,j=s.useState(!1),f=(0,n.Z)(j,2),N=f[0],y=f[1],b=(0,u.Z)().api_getHoardingOrderIdForPayment,w=(0,s.useState)(),Z=(0,n.Z)(w,2),S=(Z[0],Z[1]),P=(0,d.s0)();function A(){y(!1)}(0,s.useEffect)((function(){e.openPaymentModal>0&&y(!0)}),[e.openPaymentModal]),console.log("payment card details",null===e||void 0===e?void 0:e.applicationDetails);var D=function(e,a){c.Am.dismiss(),"success"==a&&c.Am.success(e),"error"==a&&c.Am.error(e)},_=function(a){var t;(console.log("Payment Status =>",a),1==(null===a||void 0===a?void 0:a.status))?(P("/paymentScreen/".concat(a.data.razorpay_payment_id,"/").concat(null===e||void 0===e||null===(t=e.applicationDetails)||void 0===t?void 0:t.workflow_id)),D("Payment Successfull","success")):(c.Am.error("Payment failed...."),D("Payment Failed","error"),P("/advertDashboard"))};return(0,x.jsx)("div",{className:"",children:(0,x.jsx)(i(),{isOpen:N,onAfterOpen:function(){},onRequestClose:A,style:m,contentLabel:"Example Modal",children:(0,x.jsx)("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:(0,x.jsxs)("div",{className:"",children:[(0,x.jsxs)("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",(0,x.jsxs)("span",{className:"font-bold text-md ml-4 uppercase ",children:[null===e||void 0===e||null===(a=e.applicationDetails)||void 0===a?void 0:a.type," "]})]}),(0,x.jsxs)("div",{className:"md:flex block w-full h-56",children:[(0,x.jsxs)("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsxs)("div",{className:"grid grid-cols-12",children:[(0,x.jsxs)("div",{className:"col-span-6  text-gray-600",children:[(0,x.jsx)("p",{children:"Application No. -"}),(0,x.jsx)("p",{children:"Applied date -"})]}),(0,x.jsxs)("div",{className:"col-span-6 text-gray-500 font-bold",children:[(0,x.jsxs)("p",{children:[null===e||void 0===e||null===(t=e.applicationDetails)||void 0===t?void 0:t.application_no," "]}),(0,x.jsx)("p",{children:null===e||void 0===e||null===(l=e.applicationDetails)||void 0===l?void 0:l.application_date})]})]})}),(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsxs)("div",{className:"grid grid-cols-12",children:[(0,x.jsx)("div",{className:"col-span-6  text-gray-600",children:(0,x.jsx)("p",{children:"Approve Date -"})}),(0,x.jsx)("div",{className:"col-span-6 text-gray-500 font-bold",children:(0,x.jsxs)("p",{children:[null===e||void 0===e||null===(o=e.applicationDetails)||void 0===o?void 0:o.approve_date,"  "]})})]})}),(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsx)("div",{className:"grid grid-cols-12",children:(0,x.jsx)("div",{className:"col-span-6  text-gray-600",children:(0,x.jsx)("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsx)("div",{className:"grid grid-cols-12",children:(0,x.jsx)("div",{className:"col-span-6  text-gray-600",children:(0,x.jsx)("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:null===e||void 0===e||null===(v=e.applicationDetails)||void 0===v?void 0:v.payment_amount})})})}),(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsx)("div",{className:"grid grid-cols-12",children:(0,x.jsxs)("div",{className:"col-span-6  text-gray-600",children:[(0,x.jsx)("button",{onClick:A,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),(0,x.jsx)("button",{onClick:function(e){console.log("payment id on click pay",e.target.id);var a={id:e.target.id};r.Z.post("".concat(b),a,(0,h.Z)()).then((function(e){console.log("generate order id",e.data),1==e.data.status&&(console.log("OrderId Generated True",e.data),(0,p.Z)(e.data.data,_)),S(e)})).catch((function(e){alert("Backend Server error. Unable to Generate Order Id")}))},id:null===e||void 0===e||null===(g=e.applicationDetails)||void 0===g?void 0:g.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),(0,x.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,x.jsx)("div",{className:"grid grid-cols-12",children:(0,x.jsx)("div",{className:"col-span-6  text-gray-600",children:(0,x.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),(0,x.jsx)("div",{className:"",children:(0,x.jsx)("div",{className:""})})]})]})})})})},g=(t(800),t(93877)),j=t(64491),f=t(25229),N=t(32612),y=t(40483);var b=function(){var e=(0,s.useState)(),a=(0,n.Z)(e,2),t=a[0],l=a[1],d=(0,s.useState)(),c=(0,n.Z)(d,2),p=c[0],m=c[1],b=(0,u.Z)(),w=b.api_getHoardingUnpaidApplicationList,Z=b.api_getHoardingApplicationDetailForPayment,S=(0,s.useState)([]),P=(0,n.Z)(S,2),A=P[0],D=(P[1],(0,s.useState)()),_=(0,n.Z)(D,2),k=_[0],C=_[1],I=(0,s.useState)(!1),F=(0,n.Z)(I,2),H=(F[0],F[1]),L=(0,s.useState)(!1),O=(0,n.Z)(L,2),M=O[0],E=O[1],T=(0,s.useState)(!1),R=(0,n.Z)(T,2),U=R[0],V=(R[1],function(){return E(!1)}),z=(0,s.useState)(0),G=(0,n.Z)(z,2),q=G[0],B=G[1],J=(0,s.useState)(!1),K=(0,n.Z)(J,2),Q=(K[0],K[1],(0,s.useState)(!1)),W=(0,n.Z)(Q,2),X=W[0],Y=W[1],$=(0,s.useState)(!1),ee=(0,n.Z)($,2),ae=ee[0],te=ee[1],ne=(0,s.useState)(!1),se=(0,n.Z)(ne,2),le=se[0],ie=se[1],oe=(0,s.useState)(0),de=(0,n.Z)(oe,2),ce=de[0],re=de[1],pe=(0,s.useState)(1),ue=(0,n.Z)(pe,2),he=ue[0],xe=ue[1],me=(0,s.useState)(0),ve=(0,n.Z)(me,2),ge=ve[0],je=ve[1],fe=(0,s.useState)(10),Ne=(0,n.Z)(fe,2),ye=Ne[0],be=Ne[1],we=(0,s.useState)(""),Ze=(0,n.Z)(we,2),Se=Ze[0],Pe=Ze[1],Ae=(0,s.useState)(!1),De=(0,n.Z)(Ae,2),_e=De[0],ke=De[1],Ce=[{Header:"#",Cell:function(e){var a=e.row;return(0,x.jsx)("div",{className:"pr-2",children:a.index+1})}},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:function(e){var a=e.cell;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{onClick:function(){return Ie(a.row.values.id,"Approve")},className:"bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r hover:text-white text-white",children:"View"}),(0,x.jsx)("button",{onClick:function(){return Fe(a.row.values.id)},className:"bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r hover:text-white text-white",children:"Pay"})]})}}],Ie=function(e,a){console.log("..............application id..............",e),console.log("..............application type..............",a),m(e),l(a),E(!0)},Fe=function(e){var a={applicationId:e};r.Z.post("".concat(Z),a,(0,h.Z)()).then((function(e){console.log("application detail for payment 1",e),C(e.data.data),B((function(e){return e+1}))})).catch((function(e){console.log("errorrr.... ",e)}))};(0,s.useEffect)((function(){He(he,ye,Se)}),[he,Se,ye]);var He=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";ke(!0),ie(!0),r.Z.post(w,{page:e,perPage:a,key:t},(0,N.Z)()).then((function(e){var a,t,n,s,l,i;Y(null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data),te(!0),ie(!1),re(null===(n=e.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.total),je(null===(l=e.data)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.last_page)})).catch((function(e){console.log("Error while fetching Filter Data",e),te(!1),ie(!1)})),setTimeout((function(){ke(!1)}),[500])},Le={totalDataCount:ce,currentPageIndex:he,setcurrentPageIndex:xe,pageLength:ye,setpageLength:be,lastPageIndex:ge,setlastPageIndex:je,fetchInboxList:He,searchValue:Se,setsearchValue:Pe,refreshStatus:_e};return le?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(g.Z,{})}):U?(0,x.jsx)(j.Z,{children:(0,x.jsx)(f.Z,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):(console.log("unpaid application full list",null===A||void 0===A?void 0:A.data),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:(0,x.jsxs)("div",{children:[(0,x.jsx)(v,{openPaymentModal:q,applicationDetails:k}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:(0,x.jsx)("div",{className:"col-span-12 p-2",children:(0,x.jsxs)("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[(0,x.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),(0,x.jsx)("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 p-2",children:[ae&&0!=(null===X||void 0===X?void 0:X.length)&&(0,x.jsx)(y.Z,{columns:Ce,dataList:X,values:Le}),ae&&0==(null===X||void 0===X?void 0:X.length)&&(0,x.jsx)("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),(0,x.jsx)("div",{className:"grid grid-cols-1",children:(0,x.jsx)(i(),{isOpen:M,onAfterOpen:function(){},onRequestClose:V,contentLabel:"Example Modal",children:(0,x.jsx)("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:(0,x.jsx)("div",{className:"h-[44rem] bg-white overflow-y-auto",children:(0,x.jsx)(o.Z,{data:p,applicationType:t,showLoader:function(e){H(e)},closeModal:V})})})})})]})})}))}}}]);
//# sourceMappingURL=7044.eef99a3a.chunk.js.map