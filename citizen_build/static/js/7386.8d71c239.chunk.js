"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[7386],{87386:function(e,t,s){s.r(t);var l=s(1413),a=s(70885),i=s(61044),d=s(55705),o=s(72791),n=s(57689),r=s(81724),c=s(32612),x=s(80166),m=s(82536),u=s(39723),v=s(40399),h=s(60786),p=s(5055),g=(s(64491),s(25229),s(80184));t.default=function(e){var t,s,f,j,b,N,y,w,Z,_,P,k,S=(0,o.useState)(),D=(0,a.Z)(S,2),H=D[0],C=D[1],R=(0,o.useState)(),T=(0,a.Z)(R,2),E=(T[0],T[1]),F=(0,o.useState)(!1),U=(0,a.Z)(F,2),q=U[0],O=U[1],z=(0,o.useState)(!1),A=(0,a.Z)(z,2),I=A[0],B=A[1],L=(0,o.useState)(),W=(0,a.Z)(L,2),M=W[0],V=W[1],G=(0,o.useState)(!1),J=(0,a.Z)(G,2),K=J[0],Q=(J[1],(0,n.UO)().id),X=(0,x.Z)(),Y=X.api_getHoldingDeactivationDetails,$=X.api_postHoldingDeactivationApply,ee=(0,o.useContext)(p.n).notify,te=(0,o.useState)(!1),se=(0,a.Z)(te,2),le=se[0],ae=se[1],ie=(0,o.useState)(null),de=(0,a.Z)(ie,2),oe=de[0],ne=de[1],re=(0,o.useState)(!1),ce=(0,a.Z)(re,2),xe=ce[0],me=ce[1],ue=(0,n.s0)(),ve=r.Ry({holdingDoc:r.Z_().required("Upload proof of deactivation"),remark:r.Z_().required("write comment for deactivation")}),he=(0,d.TA)({initialValues:{holdingDoc:"",remark:""},onSubmit:function(e,t){console.log("onsumbt deactivation ",e),e.remark.length<10?ee("Please write atleast 10 character comment","error"):pe()},validationSchema:ve}),pe=function(){B(!0),ae(!1);var e=new FormData;e.append("propertyId",Q),e.append("document",H),e.append("comments",he.values.remark),console.log("before apply holding deactivation ",e),i.ZP.post($,e,(0,c.Z)()).then((function(e){var t;(console.log("submit deactivation response....",null===e||void 0===e?void 0:e.data),e.data.status)?(ee("Holding deactivation applied successfully !!","success"),me(!0)):(ee(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message,"error"),ge(!0,"Error occured. Please try again later."));B(!1)})).catch((function(e){console.log("error at submit deactivation ",e),ee("something went wrong !!","error"),ge(!0,"Error occured. Please try again later."),B(!1)}))};(0,o.useEffect)((function(){ae(!1),O(!0),console.log("before fetch property details in deactivation"),i.ZP.post(Y,{propertyId:Q},(0,c.Z)()).then((function(e){console.log("view prop prop full details...",e.data),V(e.data),O(!1)})).catch((function(e){console.log("==2 details by id error...",e),ae(!0),O(!1)}))}),[]);var ge=function(e,t){ne(t),ae(e)};return q?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v.Z,{}),(0,g.jsx)("div",{className:"min-h-screen"})]}):(0,g.jsxs)(g.Fragment,{children:[I&&(0,g.jsx)(u.Z,{}),le&&(0,g.jsx)(m.Z,{activateBottomErrorCard:ge,errorTitle:oe}),(0,g.jsx)("div",{className:" font-bold text-2xl pb-4 md:py-4",children:"Holding Deactivation"}),(0,g.jsx)("div",{className:"w-full bg-white shadow-xl mb-6",children:(0,g.jsxs)("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[(0,g.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(t=M.data)||void 0===t?void 0:t.holding_no)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(s=M.data)||void 0===s?void 0:s.old_ward_no)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold text-lg",children:(0,h.jP)(null===M||void 0===M||null===(f=M.data)||void 0===f?void 0:f.old_ward_no)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold text-md",children:(0,h.jP)(null===M||void 0===M||null===(j=M.data)||void 0===j?void 0:j.ownership_type)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(b=M.data)||void 0===b?void 0:b.property_type)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(N=M.data)||void 0===N?void 0:N.zone_mstr_id)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(y=M.data)||void 0===y?void 0:y.is_mobile_tower)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"font-semibold text-md",children:[(0,h.jP)(null===M||void 0===M||null===(w=M.data)||void 0===w?void 0:w.is_hoarding_board)," "]}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-semibold text-md",children:(0,h.jP)(null===M||void 0===M||null===(Z=M.data)||void 0===Z?void 0:Z.is_petrol_pump)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("div",{className:"font-bold text-sm",children:(0,h.jP)(null===M||void 0===M||null===(_=M.data)||void 0===_?void 0:_.is_water_harvesting)}),(0,g.jsx)("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]})}),(0,g.jsxs)("div",{children:[1!=(null===M||void 0===M||null===(P=M.data)||void 0===P?void 0:P.deactivationStatus)&&!xe&&(0,g.jsx)("form",{onSubmit:he.handleSubmit,onChange:function(e){"holdingDoc"==e.target.name&&function(e){e.target.files[0],E(URL.createObjectURL(e.target.files[0])),C(e.target.files[0])}(e)},encType:"multipart/form",className:"w-full bg-white shadow-xl py-5",children:(0,g.jsxs)("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-center pl-6 py-2",children:[(0,g.jsx)("label",{className:"",children:"Upload Document"}),(0,g.jsxs)("div",{className:"text-xs text-gray-700 md:ml-4",children:[(0,g.jsx)("input",(0,l.Z)((0,l.Z)({},he.getFieldProps("holdingDoc")),{},{accept:".pdf,.png,.jpg,.jpeg",type:"file",className:"mt-2 form-control block w-full px-3 py-2 text-base font-normal bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none cursor-pointer shadow-md w-40"})),(0,g.jsx)("div",{children:"Only pdf, jpg, jpeg or png allowed."}),(0,g.jsx)("span",{className:"text-red-600 absolute text-xs",children:he.touched.holdingDoc&&he.errors.holdingDoc?he.errors.holdingDoc:null})]}),(0,g.jsx)("div",{className:"mt-10 md:mt-0",children:(0,g.jsx)("label",{className:"",children:"Add Remarks"})}),(0,g.jsxs)("div",{className:"md:ml-4",children:[(0,g.jsx)("textarea",(0,l.Z)((0,l.Z)({},he.getFieldProps("remark")),{},{className:"form-control block w-full px-3 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 foc}us:outline-none shadow-md w-60 ",placeholder:"Enter your remark"})),(0,g.jsx)("span",{className:"text-red-600 absolute text-xs",children:he.touched.remark&&he.errors.remark?he.errors.remark:null})]}),(0,g.jsx)("div",{className:"md:ml-4",children:(0,g.jsx)("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded  hover:bg-indigo-700 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out mt-10 shadow-xl w-60",children:"Submit Deactivation Request"})})]})}),xe&&(0,g.jsx)("div",{className:"w-full h-full bg-white p-20",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-center font-semibold text-3xl",children:"Deactivation for this property has been applied."}),(0,g.jsx)("div",{className:"text-center mt-6",children:(0,g.jsx)("button",{type:"button",className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:function(){return ue("/search/fresh/direct/direct")},children:"Search Holding"})})]})}),(1==(null===M||void 0===M||null===(k=M.data)||void 0===k?void 0:k.deactivationStatus)||K)&&(0,g.jsx)("div",{children:(0,g.jsx)("h1",{className:"w-full text-center text-red-500 text-2xl font-semibold",children:"Deactivation request already submitted !"})})]}),(0,g.jsx)("div",{className:"w-full h-40 md:none"})]})}}}]);
//# sourceMappingURL=7386.8d71c239.chunk.js.map