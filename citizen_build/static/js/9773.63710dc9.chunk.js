"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[9773],{36124:function(e,o,l){function t(){var e=window.localStorage.getItem("citizen_token");return{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}}l.d(o,{Z:function(){return t}})},39773:function(e,o,l){l.r(o);var t=l(29439),d=l(72791),n=l(55705),i=l(81724),s=l(87011),a=(l(97948),l(36124)),c=l(75985),r=l(62037),u=l(32612),v=l(73728),p=l(99008),m=l(57689),x=(l(5289),l(60786)),h=l(93157),g=l(80184);o.default=function(e){var o,l,f,j,b="http://192.168.0.16:8000",N=(0,m.UO)(),w=N.id,y=N.type;console.log("id in upload........",w,"and type => ",y);var D=(0,p.Z)(),S=D.get_ConcessionDocumentsToUpload,Z=D.post_ConcessionDocumentUpload,C=D.get_ObjectionDocumentsToUpload,k=D.post_ObjectionDocumentUpload,U=D.get_HarvestingDocumentsToUpload,F=D.post_HarvestingDocumentUpload,_=D.get_ConcessionDetailsById,I=D.get_HarvestingDetailsById,O=D.get_ObjectionDetailsById,A=(0,d.useState)(!1),P=(0,t.Z)(A,2),R=P[0],T=P[1],V=(0,d.useState)(""),B=(0,t.Z)(V,2),H=B[0],z=B[1],L=(0,d.useState)(""),W=(0,t.Z)(L,2),E=(W[0],W[1]),q=(0,d.useState)(0),M=(0,t.Z)(q,2),Y=M[0],G=M[1],J=(0,d.useState)(!1),K=(0,t.Z)(J,2),Q=K[0],X=K[1],$=(0,d.useState)(""),ee=(0,t.Z)($,2),oe=(ee[0],ee[1]),le=(0,d.useState)(1),te=(0,t.Z)(le,2),de=te[0],ne=te[1],ie=(0,d.useState)(0),se=(0,t.Z)(ie,2),ae=(se[0],se[1],(0,d.useState)()),ce=(0,t.Z)(ae,2),re=ce[0],ue=ce[1],ve=(0,d.useState)(""),pe=(0,t.Z)(ve,2),me=pe[0],xe=pe[1],he=(0,d.useState)(!0),ge=(0,t.Z)(he,2),fe=ge[0],je=ge[1],be=(0,d.useState)(!1),Ne=(0,t.Z)(be,2),we=Ne[0],ye=Ne[1],De=(0,d.useState)(),Se=(0,t.Z)(De,2),Ze=Se[0],Ce=Se[1],ke=(0,d.useState)(),Ue=(0,t.Z)(ke,2),Fe=(Ue[0],Ue[1],(0,d.useState)()),_e=(0,t.Z)(Fe,2),Ie=_e[0],Oe=_e[1],Ae=(0,d.useState)(null),Pe=(0,t.Z)(Ae,2),Re=Pe[0],Te=Pe[1],Ve=(0,d.useState)(null),Be=(0,t.Z)(Ve,2),He=Be[0],ze=Be[1],Le=(0,d.useState)(!1),We=(0,t.Z)(Le,2),Ee=(We[0],We[1]),qe=(0,d.useState)(!1),Me=(0,t.Z)(qe,2),Ye=(Me[0],Me[1]);(0,d.useEffect)((function(){Ge()}),[Y]),(0,d.useEffect)((function(){var e="";"Concession"==y&&(e=_),"Rain Water Harvesting"==y&&(e=I),"Objection"==y&&(e=O),T(!0),h.Z.post(e,{applicationId:w},(0,u.Z)()).then((function(e){var o;T(!1),console.log("view full details...",e.data.data),Oe(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)})).catch((function(e){T(!1),console.log("==2 details by id error...",e)}))}),[]);var Ge=function(){var e="";"Concession"==y&&(e=S),"Rain Water Harvesting"==y&&(e=U),"Objection"==y&&(e=C),T(!0),console.log("before fetch upload doc"),h.Z.post("".concat(e),{applicationId:w},(0,u.Z)()).then((function(e){var o;console.log("list of doc to upload at pilotworkflowdocumentupload => ",null===e||void 0===e?void 0:e.data),Ce(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data),T(!1)})).catch((function(e){console.log("data submission error bo doc upload => ",e),X(!1),T(!1)}))};console.log("temp doc => ",we);var Je=i.Ry({docId:i.Rx().required("Select document type"),docUpload:i.Z_().required("Select document")}),Ke=(0,n.TA)({initialValues:{docId:"",docUpload:"",docName:""},onSubmit:function(e){console.log("use effect 2"),console.log("values submission => ",e),Xe()},validationSchema:Je}),Qe=function(e){var o=e.target.files[0];(0,x.VW)(o)&&(xe(e.target.name),ue(URL.createObjectURL(e.target.files[0])),z(e.target.files[0]),Ke.setFieldValue("docUpload",URL.createObjectURL(e.target.files[0])),console.log("use effect change ",Ke.values.docId,Ke.values.docUpload),console.log("file on change bo doc upload => ",o,"and doc upload => ",H,"and url => ",re,"and name => ",null===o||void 0===o?void 0:o.name,"file name => ",me),"pdf"==(null===o||void 0===o?void 0:o.name).substring((null===o||void 0===o?void 0:o.name).lastIndexOf(".")+1)?je(!1):je(!0))};console.log("and doc name => ",me);var Xe=function(o){if(null==He)return c.Am.error("Select Document Type"),Te(null),void ze(null);console.log("doc ref name...",o);var l=new FormData;console.log("document  => ",H);var t={applicationId:null===e||void 0===e?void 0:e.id,ownerId:Re,docCode:He,document:H};if(l.append("applicationId",w),null!=Re&&l.append("ownerId",Re),l.append("docCode",He),l.append("document",H),console.log("form data bo doc upload => ",t),""!=H){ye(!1),Ee(!1),X(!1),Ye(!1),ne(de+1),console.log("modal m end => ",Q,we),T(!0);var d="";"Concession"==y&&(d=Z),"Rain Water Harvesting"==y&&(d=F),"Objection"==y&&(d=k),console.log("before fetch doc to upload...",l),h.Z.post("".concat(d),l,(0,a.Z)()).then((function(e){var o;console.log("data submitted bo doc upload => ",e.data),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.status?(c.Am.success("Document Uploaded Successfully !!"),X(!1),E(""),z(""),T(!1),G(Y+1),xe(""),Ke.setFieldValue("docUpload",""),G(Y+1),Te(null),ze(null),Ge()):(console.log("something went"),c.Am.error("Something went wrongg !!!"))})).catch((function(e){console.log("data submission error bo doc upload => ",e),X(!1),T(!1)}))}else c.Am.error("Select file")},$e=function(e){console.log("getting doc name => ",e),""==e&&c.Am.error("File not uploaded !!!"),""!=e&&(oe(e),Ye(!0),ne(de+1))},eo=function(e){ze(e.target.value)},oo=(0,m.s0)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Ix,{position:"top-right",autoClose:2e3}),R&&(0,g.jsx)(r.Z,{}),(0,g.jsxs)("div",{className:"overflow-x-auto mx-auto w-full px-36 relative",children:[(0,g.jsx)("button",{className:"absolute top-2 left-2 bg-indigo-500 px-4 py-1 shadow-lg rounded-sm text-white hover:bg-white poppins border-2 border-indigo-500 hover:text-indigo-600 transition-all duration-200 mt-1 hover:border-2 hover:border-indigo-600",onClick:function(){return oo("/propertyDashboard")},children:"Back"}),"Objection"==y?(0,g.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:["Clerical Mistake"==(null===Ie||void 0===Ie?void 0:Ie.objection_for)&&(0,g.jsx)(g.Fragment,{children:"Clerical Objection"}),"\xa0","Assessment Error"==(null===Ie||void 0===Ie?void 0:Ie.objection_for)&&(0,g.jsx)(g.Fragment,{children:"Assessment Objection"}),"\xa0","Forgery"==(null===Ie||void 0===Ie?void 0:Ie.objection_for)&&(0,g.jsx)(g.Fragment,{children:"Forgery Objection"}),"\xa0 Document Upload"]}):(0,g.jsxs)("div",{className:"poppins text-xl 2xl:text-2xl font-semibold uppercase text-gray-700 2xl:mt-4 mt-2 w-full text-center",children:[y," Document Upload"]}),(0,g.jsx)("div",{className:"text-gray-700 py-6 ",children:(0,g.jsx)("div",{className:"grid md:grid-cols-2 text-sm bg-white shadow-lg rounded-sm py-4",children:null===Ie||void 0===Ie||null===(o=Ie.fullDetailsData)||void 0===o||null===(l=o.cardArray)||void 0===l||null===(f=l.data)||void 0===f?void 0:f.map((function(e){return(0,g.jsxs)("div",{className:"grid grid-cols-2",children:[(0,g.jsxs)("div",{className:"px-4 py-2 font-semibold",children:[null===e||void 0===e?void 0:e.displayString," : "]}),(0,g.jsx)("div",{className:"px-4 py-2",children:null===e||void 0===e?void 0:e.value})]})}))})}),(0,g.jsx)("div",{className:"text-red-500 font-semibold poppins 2xl:text-sm text-xs",children:"You have been redirected as Back To Citizen to re-upload documents."}),(0,g.jsx)("div",{className:"w-full flex md:px-4 bg-white font-sans overflow-x-auto py-6",children:(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsxs)("h1",{className:"text-xs poppins",children:[y," Documents"]}),(0,g.jsx)("div",{className:"bg-white shadow-md rounded my-2",children:(0,g.jsxs)("table",{className:"min-w-max w-full table-auto",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-indigo-100 text-gray-600 uppercase text-sm leading-normal",children:[(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"#"}),(0,g.jsx)("th",{className:"py-3 px-6 text-left cursor-pointer",children:"Document Name"}),(0,g.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"Document"}),(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"Status"}),(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"Remarks"}),(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"Preview"}),(0,g.jsx)("th",{className:"py-3 px-6 text-center",children:"Upload"})]})}),(0,g.jsx)("tbody",{className:"text-gray-600 text-sm font-light bg-white",children:null===Ze||void 0===Ze||null===(j=Ze.listDocs)||void 0===j?void 0:j.map((function(e,o){var l,t,d,n,i,a,c,r,u,p,m,x,h,f,j,N,w,y,D,S,Z,C,k,U,F,_,I,O,A,P,T,V,B;return(0,g.jsxs)("tr",{className:"border-b border-gray-200 ",onSubmit:Ke.handleSubmit,onChange:Ke.handleChange,children:[(0,g.jsx)("td",{className:"py-3 px-6 font-semibold",children:o+1}),(0,g.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"mr-2 bg-white shadow-lg rounded-full p-2",children:(0,g.jsx)("img",{src:s,alt:"rain",className:"w-4"})}),(0,g.jsxs)("span",{className:"font-medium poppins",value:null===e||void 0===e?void 0:e.docName,children:["R"==(null===e||void 0===e?void 0:e.docType)&&(null===e||void 0===e||null===(l=e.masters[0])||void 0===l?void 0:l.docVal),"O"==(null===e||void 0===e?void 0:e.docType)&&"Additional"]})]})}),(0,g.jsx)("td",{className:"py-3 px-6",children:(0,g.jsx)("div",{className:"font-semibold text-sm",children:(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("select",{className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md w-36",name:"docId",onChange:eo,children:[(0,g.jsx)("option",{value:"",selected:!0,children:"--select--"}),null===e||void 0===e||null===(t=e.masters)||void 0===t?void 0:t.map((function(e,o){return(0,g.jsx)("option",{value:null===e||void 0===e?void 0:e.documentCode,children:null===e||void 0===e?void 0:e.docVal})}))]})})})}),(0,g.jsx)("td",{className:"py-3 px-6 text-center relative",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,g.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,g.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){var o;return $e("".concat(b,"/").concat(null===e||void 0===e||null===(o=e.uploadedDoc)||void 0===o?void 0:o.docPath))},children:(0,g.jsxs)("div",{className:"flex items-center",children:["pdf"==(null===e||void 0===e||null===(d=e.uploadedDoc)||void 0===d||null===(n=d.docPath)||void 0===n?void 0:n.split(".")[(null===e||void 0===e||null===(i=e.uploadedDoc)||void 0===i||null===(a=i.docPath)||void 0===a||null===(c=a.split("."))||void 0===c?void 0:c.length)-1])&&(0,g.jsx)("div",{className:"flex-shrink-0 text-[28px]",children:(0,g.jsx)(v.NFo,{})}),"jpg"==(null===e||void 0===e||null===(r=e.uploadedDoc)||void 0===r||null===(u=r.docPath)||void 0===u?void 0:u.split(".")[(null===e||void 0===e||null===(p=e.uploadedDoc)||void 0===p||null===(m=p.docPath)||void 0===m||null===(x=m.split("."))||void 0===x?void 0:x.length)-1])&&(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)("img",{src:"".concat(b,"/").concat(null===e||void 0===e||null===(h=e.uploadedDoc)||void 0===h?void 0:h.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"jpeg"==(null===e||void 0===e||null===(f=e.uploadedDoc)||void 0===f||null===(j=f.docPath)||void 0===j?void 0:j.split(".")[(null===e||void 0===e||null===(N=e.uploadedDoc)||void 0===N||null===(w=N.docPath)||void 0===w||null===(y=w.split("."))||void 0===y?void 0:y.length)-1])&&(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)("img",{src:"".concat(b,"/").concat(null===e||void 0===e||null===(D=e.uploadedDoc)||void 0===D?void 0:D.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})}),"png"==(null===e||void 0===e||null===(S=e.uploadedDoc)||void 0===S||null===(Z=S.docPath)||void 0===Z?void 0:Z.split(".")[(null===e||void 0===e||null===(C=e.uploadedDoc)||void 0===C||null===(k=C.docPath)||void 0===k||null===(U=k.split("."))||void 0===U?void 0:U.length)-1])&&(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)("img",{src:"".concat(b,"/").concat(null===e||void 0===e||null===(F=e.uploadedDoc)||void 0===F?void 0:F.docPath),className:"md:w-[2vw] w-[5vw]",alt:"",srcset:""})})]})})}),(0,g.jsx)("td",{className:"py-3 px-6 text-center font-semibold",children:""==(null===e||void 0===e?void 0:e.uploadedDoc)?(0,g.jsx)("i",{className:"font-semibold",children:"N/A"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"whitespace-no-wrap",children:0==(null===e||void 0===e||null===(_=e.uploadedDoc)||void 0===_?void 0:_.verifyStatus)&&(0,g.jsx)(g.Fragment,{children:"Pending"})}),(0,g.jsx)("p",{className:"text-green-500 whitespace-no-wrap",children:1==(null===e||void 0===e||null===(I=e.uploadedDoc)||void 0===I?void 0:I.verifyStatus)&&(0,g.jsx)(g.Fragment,{children:"Verified"})}),(0,g.jsx)("p",{className:"text-red-500 whitespace-no-wrap",children:2==(null===e||void 0===e||null===(O=e.uploadedDoc)||void 0===O?void 0:O.verifyStatus)&&(0,g.jsx)(g.Fragment,{children:"Rejected"})})]})}),(0,g.jsx)("td",{className:"py-3 px-6 text-center",children:""==(null===e||void 0===e||null===(A=e.uploadedDoc)||void 0===A?void 0:A.remarks)||null==(null===e||void 0===e||null===(P=e.uploadedDoc)||void 0===P?void 0:P.remarks)?(0,g.jsx)("i",{className:"font-semibold",children:"N/A"}):null===e||void 0===e||null===(T=e.uploadedDoc)||void 0===T?void 0:T.remarks}),(0,g.jsxs)("td",{className:"py-3 px-6 text-center",children:[(null===e||void 0===e?void 0:e.docName)==me&&1==fe&&(0,g.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return $e(ye(!we))},children:(0,g.jsx)("img",{src:re,alt:"",srcset:"",className:"md:w-[3vw] w-[5vw] text-center"})}),(null===e||void 0===e?void 0:e.docName)==me&&0==fe&&(0,g.jsx)("div",{className:"flex items-center justify-center font-semibold text-[26px] cursor-pointer",onClick:function(){return $e(ye(!we))},children:(0,g.jsx)("div",{className:"text-[40px] text-center",children:(0,g.jsx)(v.NFo,{})})})]}),(0,g.jsx)("td",{className:"py-3 px-6 flex flex-wrap gap-2",children:(0,g.jsx)("div",{className:"font-semibold text-sm",children:1!=(null===e||void 0===e||null===(V=e.uploadedDoc)||void 0===V?void 0:V.verifyStatus)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"",children:(0,g.jsx)("input",{accept:".pdf,.jpg,.jpeg",type:"file",name:null===e||void 0===e?void 0:e.docName,onChange:Qe,className:"form-control block w-full px-3 py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 foc}us:outline-none cursor-pointer shadow-md w-36"})}),(1!=(null===e||void 0===e||null===(B=e.uploadedDoc)||void 0===B?void 0:B.verify_status)||""==(null===e||void 0===e?void 0:e.uploadedDoc))&&(0,g.jsx)("div",{className:"mt-2",children:!R&&(0,g.jsx)("button",{onClick:function(){return Xe(null===e||void 0===e?void 0:e.docName)},type:"submit",className:" px-4 py-1.5 bg-indigo-500 text-white text-xs leading-tight rounded shadow-md hover:bg-indigo-700 poppins hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Upload"})})," "]})})})]})}))})]})})]})})]})]})}}}]);
//# sourceMappingURL=9773.63710dc9.chunk.js.map