"use strict";(self.webpackChunkcitizen_landing=self.webpackChunkcitizen_landing||[]).push([[2993],{2993:function(e,t,s){s.r(t),s.d(t,{default:function(){return D}});var a=s(1413),n=s(29439),o=s(72791),l=s(57689),d=s(31243),r=s(16856),i=s(72426),c=s.n(i),m=s(55705),x=s(81724),u=s(65064),p=s(10917),h=s(5055),b=s(39723),g=s(97948),f=s.n(g),v=s(76053),y=(s(98431),s(12297)),N=s(80184),j={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none"}};var w=function(e){var t=o.useState(!1),s=(0,n.Z)(t,2),a=s[0],d=s[1],r=null===e||void 0===e?void 0:e.transData,i=(0,l.s0)(),c=e.paymentData;function m(){d(!1)}return console.log("paymentData======",c),(0,o.useEffect)((function(){d(!0)}),[]),(0,N.jsx)("div",{className:"",children:(0,N.jsx)(f(),{isOpen:a,onAfterOpen:function(){},onRequestClose:m,style:j,contentLabel:"Example Modal",children:(0,N.jsx)("div",{children:(0,N.jsxs)("div",{className:"bg-green-200 shadow-2xl border border-sky-200 p-5 m-5 rounded-md",children:[(0,N.jsxs)("div",{onClick:m,className:"absolute cursor-pointer bg-green-100 hover:bg-gray-300 p-1 rounded-md",children:[(0,N.jsx)(v.nfZ,{})," "]}),(0,N.jsx)("div",{className:"flex justify-center",children:(0,N.jsx)("img",{src:y,className:"h-20",alt:"",srcset:""})}),(0,N.jsx)("div",{className:"py-1 pl-3 font-semibold text-center text-2xl text-gray-800",children:" Payment Completed Successfully "}),(0,N.jsxs)("p",{className:"text-center",children:[(0,N.jsx)("span",{className:"text-base",children:" Payment Transaction No"})," ",(0,N.jsx)("span",{className:"font-bold text-blue-700 text-xl",children:null===r||void 0===r?void 0:r.transectionNo})]}),(0,N.jsx)("p",{className:"border-b border-gray-300 mx-10 py-1"}),(0,N.jsxs)("div",{className:"grid grid-cols-12 px-8 py-3 leading-8 space-x-8 text-sm",children:[(0,N.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,N.jsxs)("div",{className:"grid grid-cols-12",children:[(0,N.jsxs)("div",{className:"col-span-6 font-semibold",children:[(0,N.jsx)("p",{children:"Application No"}),(0,N.jsx)("p",{children:"Connection Type"})]}),(0,N.jsxs)("div",{className:"col-span-6 ml-3",children:[(0,N.jsx)("p",{children:null===r||void 0===r?void 0:r.applicationNo}),(0,N.jsx)("p",{children:null===r||void 0===r?void 0:r.tranType})]})]})}),(0,N.jsx)("div",{className:"md:col-span-6 col-span-12",children:(0,N.jsxs)("div",{className:"grid grid-cols-12",children:[(0,N.jsxs)("div",{className:"col-span-6 font-semibold",children:[(0,N.jsx)("p",{children:"Amount"}),(0,N.jsx)("p",{children:"Payment Date"})]}),(0,N.jsxs)("div",{className:"col-span-6",children:[(0,N.jsx)("p",{children:null===r||void 0===r?void 0:r.amount}),(0,N.jsx)("p",{children:null===r||void 0===r?void 0:r.transectionDate})]})]})}),(0,N.jsx)("div",{className:"col-span-12 md:mt-4 mt-10",children:(0,N.jsxs)("div",{className:"flex justify-center",children:[(0,N.jsx)("button",{onClick:m,className:"mx-2 bg-sky-600 hover:bg-sky-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm rounded-sm shadow-xl",children:"Close"}),r&&(0,N.jsx)("button",{onClick:function(){return i("/waterUserReceipt/".concat(null===r||void 0===r?void 0:r.transectionNo))},className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-4 py-2 text-sm  rounded-sm shadow-xl",children:"View Receipt"})]})})]})]})})})})},D=function(){var e,t,s,i=(0,o.useState)(),g=(0,n.Z)(i,2),f=g[0],v=g[1],y=(0,o.useState)(!1),j=(0,n.Z)(y,2),D=j[0],_=j[1],A=(0,o.useState)(),M=(0,n.Z)(A,2),Z=M[0],k=M[1],F=(0,o.useState)(),Y=(0,n.Z)(F,2),P=Y[0],S=Y[1],C=(0,o.useState)(),U=(0,n.Z)(C,2),I=U[0],R=U[1],E=(0,o.useState)(),T=(0,n.Z)(E,2),O=T[0],z=T[1],q=(0,o.useState)(!1),L=(0,n.Z)(q,2),B=L[0],W=L[1],G=(0,o.useState)(),V=(0,n.Z)(G,2),X=V[0],H=V[1],J=(0,l.UO)().id,K=(0,l.s0)(),Q=(0,o.useContext)(h.n).notify,$=(0,u.Z)(),ee=$.api_getTranNo,te=$.api_waterApprovedApplicationDetails,se=$.api_waterListDemand,ae=$.api_waterDemandCalculation,ne=$.api_waterDemandPayment,oe=$.header;(0,o.useEffect)((function(){de(),re()}),[J]),(0,o.useEffect)((function(){le()}),[O,I]);var le=function(){if(""==O)return S();if(""==I)return S();_(!0);var e={consumerId:J,demandFrom:I,demandUpto:O};d.Z.post(ae,e,oe).then((function(e){console.log("water demand calculation Details",e.data.data),S(e.data.data),_(!1)})).catch((function(e){console.log("Error : water calculating demand",e),_(!1)}))},de=function(){_(!0),d.Z.post(te,{id:J},oe).then((function(e){console.log("water Approved Application Details",e.data.data),v(e.data.data),_(!1)})).catch((function(e){console.log("Error : water Approved Application Details",e),_(!1)}))},re=function(){d.Z.post(se,{ConsumerId:J},oe).then((function(e){console.log("Fetched Water Demand List",e.data.data),k(e.data.data)})).catch((function(e){console.log("Exception while fetching Water Demand",e)}))},ie=function(e){if(console.log("Payment Status =>",e),1==e.status){Q("Payment Done successfully","success"),W(!0);var t={orderId:e.data.razorpay_order_id,paymentId:e.data.razorpay_payment_id};d.Z.post(ee,t,oe).then((function(e){console.log("Data after payment success by OrderId and PaymentID",e),1==e.data.status&&H(e.data.data)})).catch((function(e){return console.log("Exception/Error while fetching by OrderID and Payment ID",e)}))}re()},ce=x.Ry({monthFrom:x.Z_().required("Require Field"),monthUpto:x.Z_().required("Require Field")}),me=(0,m.TA)({enableReinitialize:!0,initialValues:{monthFrom:"",monthUpto:"",penalty:"",rebate:"",advanced:""},onSubmit:function(e,t){!function(){_(!0);var e={consumerId:J,demandFrom:I,demandUpto:O,amount:null===P||void 0===P?void 0:P.totalPayAmount,paymentMode:"online",remarks:"citizen payment"};console.log("final submit",e),d.Z.post(ne,e,oe).then((function(e){e.data.status?(_(!1),console.log("Order Id Generated Successfully",e),1==e.data.status?(0,p.Z)(e.data.data,ie):Q(e.data.message,"error")):(console.log("Failed Generate Order ID.",e),_(!1))})).catch((function(e){console.log("Exception while generating order id",e),_(!1)}))}()},validationSchema:ce}),xe=null===Z||void 0===Z||null===(e=Z.consumerDemands)||void 0===e?void 0:e.filter((function(e){return c()(e.demand_upto,"YYYY-MM-DD").format("yy-MM").toString()>=c()(I,"YYYY-MM-DD").format("yy-MM")}));return(0,N.jsxs)(N.Fragment,{children:[D&&(0,N.jsx)(b.Z,{}),B&&(0,N.jsx)(w,{transData:X}),(0,N.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-2 container mx-auto w-full",children:(0,N.jsxs)("div",{className:"col-span-12 rounded-lg p-4",children:[(0,N.jsx)("div",{className:"p-4",children:(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("h1",{className:"px-1 font-semibold font-serif  text-gray-500",children:[(0,N.jsx)(r.XN7,{className:"inline"})," Basic Details"]}),(0,N.jsx)("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl p-4",children:(0,N.jsxs)("div",{className:"flex space-x-5 pl-4 ",children:[(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-semibold text-sm",children:null!==f&&void 0!==f&&f.ulb_name?null===f||void 0===f?void 0:f.ulb_name:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"ULB Name"})]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-bold text-sm",children:null!==f&&void 0!==f&&f.ward_name?null===f||void 0===f?void 0:f.ward_name:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-bold text-sm",children:null!==f&&void 0!==f&&f.consumer_no?null===f||void 0===f?void 0:f.consumer_no:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"Consumer No"})]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-bold text-sm",children:null!==f&&void 0!==f&&f.connection_through?null===f||void 0===f?void 0:f.connection_through:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"Connection Through"})]}),"SAF"==(null===f||void 0===f?void 0:f.connection_through)?(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-semibold text-md",children:null!==f&&void 0!==f&&f.saf_no?null===f||void 0===f?void 0:f.saf_no:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"SAF No"})]}):(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-semibold text-md",children:null!==f&&void 0!==f&&f.holding_no?null===f||void 0===f?void 0:f.holding_no:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"Holding No"})]}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("div",{className:"font-semibold text-md",children:null!==f&&void 0!==f&&f.owner_char_type?null===f||void 0===f?void 0:f.owner_char_type:"N/A"}),(0,N.jsx)("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]})]})})]})}),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"mt-5 p-4",children:[(0,N.jsxs)("h1",{className:"px-1 font-semibold font-serif text-gray-500",children:[(0,N.jsx)(r.XN7,{className:"inline"}),"Due Demand Details"]}),(0,N.jsxs)("table",{className:"min-w-full leading-normal mt-2 bg-white rounded-lg shadow-xl p-4",children:[(0,N.jsx)("thead",{className:"font-bold text-left text-sm border text-gray-800 bg-white",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand From"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Upto"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Amount"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Penalty"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Connection Type"}),(0,N.jsx)("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Payable Amount "})]})}),(0,N.jsx)("tbody",{className:"text-sm",children:(0,N.jsx)(N.Fragment,{children:null===Z||void 0===Z||null===(t=Z.consumerDemands)||void 0===t?void 0:t.map((function(e,t){return(0,N.jsxs)("tr",{className:"bg-white shadow-xl border-b border-gray-200",children:[(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t+1}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.demand_from?c()(null===e||void 0===e?void 0:e.demand_from,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.demand_upto?c()(null===e||void 0===e?void 0:e.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.balance_amount?null===e||void 0===e?void 0:e.balance_amount:"N/A"}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.penalty?null===e||void 0===e?void 0:e.penalty:"N/A"}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.connection_type?null===e||void 0===e?void 0:e.connection_type:"N/A"}),(0,N.jsx)("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:null!==e&&void 0!==e&&e.amount?"\u20b9 "+(null===e||void 0===e?void 0:e.amount):"N/A"})]})}))})})]})]})}),(0,N.jsx)("div",{className:"col-span-12 rounded-lg p-4",children:(0,N.jsx)("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl border border-y-gray-200 p-4",children:(0,N.jsx)("form",{onSubmit:me.handleSubmit,onChange:function(e){var t=e.target.name,s=e.target.value;"monthFrom"==t&&R(s),"monthUpto"==t&&z(s)},className:"p-4 relative",children:(0,N.jsxs)("div",{className:"grid grid-cols-12",children:[(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsxs)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[(0,N.jsx)("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month From"]}),(0,N.jsxs)("select",(0,a.Z)((0,a.Z)({},me.getFieldProps("monthFrom")),{},{type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[(0,N.jsx)("option",{value:"",children:"Select"}),null===Z||void 0===Z||null===(s=Z.consumerDemands)||void 0===s?void 0:s.map((function(e,t){return(0,N.jsx)("option",{value:e.demand_from,children:c()(e.demand_from,"YYYY-MM-DD").format("MMM-yy")},t)}))]})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.monthFrom&&me.errors.monthFrom?me.errors.monthFrom:null})]}),(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsxs)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[(0,N.jsx)("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month Upto"]}),(0,N.jsxs)("select",(0,a.Z)((0,a.Z)({},me.getFieldProps("monthUpto")),{},{type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[(0,N.jsx)("option",{value:"",children:"Select"}),null===xe||void 0===xe?void 0:xe.map((function(e,t){return(0,N.jsx)("option",{value:e.demand_upto,children:c()(e.demand_upto,"YYYY-MM-DD").format("MMM-yy")},t)}))]})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.monthUpto&&me.errors.monthUpto?me.errors.monthUpto:null})]}),(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Total Demand"}),(0,N.jsx)("input",(0,a.Z)((0,a.Z)({},me.getFieldProps("amount")),{},{value:(null===P||void 0===P?void 0:P.totalDemand)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.amount&&me.errors.amount?me.errors.amount:null})]}),(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Penalty"}),(0,N.jsx)("input",(0,a.Z)((0,a.Z)({},me.getFieldProps("penalty")),{},{value:(null===P||void 0===P?void 0:P.totalPenalty)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.penalty&&me.errors.penalty?me.errors.penalty:null})]}),(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Rebate"}),(0,N.jsx)("input",(0,a.Z)((0,a.Z)({},me.getFieldProps("rebate")),{},{value:(null===P||void 0===P?void 0:P.totalRebate)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.rebate&&me.errors.rebate?me.errors.rebate:null})]}),(0,N.jsxs)("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[(0,N.jsx)("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Advanced"}),(0,N.jsx)("input",(0,a.Z)((0,a.Z)({},me.getFieldProps("advanced")),{},{value:(null===P||void 0===P?void 0:P.totalAdvance)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"})),(0,N.jsx)("span",{className:"text-red-600 absolute text-xs",children:me.touched.advanced&&me.errors.advanced?me.errors.advanced:null})]}),(0,N.jsx)("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:(0,N.jsxs)("p",{children:["Remain Advance : ",(0,N.jsx)("span",{className:"text-orange-700 font-semibold",children:(null===P||void 0===P?void 0:P.remaningAdvanceAmount)||0})]})}),(0,N.jsx)("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:(0,N.jsxs)("p",{children:[" Payable Amount : ",(0,N.jsx)("span",{className:"text-green-700 font-semibold",children:null!==P&&void 0!==P&&P.totalPayAmount?"\u20b9"+(null===P||void 0===P?void 0:P.totalPayAmount):0})]})}),(0,N.jsxs)("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[(0,N.jsx)("div",{className:""}),(0,N.jsxs)("div",{className:"md:pl-10 text-right space-x-5",children:[(0,N.jsx)("button",{type:"button",onClick:function(){return K(-1)},className:" px-6 py-2.5 bg-sky-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-sky-700 hover:shadow-lg focus:bg-sky-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Back"}),(0,N.jsx)("button",{type:"submit",className:" px-6 py-2.5 bg-indigo-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-indigo-600 hover:shadow-lg focus:bg-indigo-700 focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Pay Tax"})]})]})]})})})})]})})]})}},12297:function(e,t,s){e.exports=s.p+"static/media/success.e39fa5f54a849d8fc1a5.png"}}]);
//# sourceMappingURL=2993.94363495.chunk.js.map