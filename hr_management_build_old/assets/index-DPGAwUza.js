import{G as M,j as e,E,a as F,r as y,u as L,I as H,b as N,_ as j}from"./index-CMq8gJQc.js";import{u as R,C as I,I as T,a as B,b as $,o as V,c as _,F as K,R as k,B as q,d as z,e as v,g as W}from"./useCustomQuery-B3dC_oGG.js";import{d as O,e as S}from"./useCrypto-9FiK9rRQ.js";function U({name:u,label:m,inputSize:h,...p}){const{control:n}=R(),[s,g]=M.useState(!1);return e.jsx(I,{name:u,control:n,render:({field:{ref:i,...c},fieldState:{error:o}})=>e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:m,children:[m," ",o&&m&&e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(T,{...c,value:typeof c.value=="number"&&c.value===0?"":c.value,ref:i,className:`mt-1 ${o?"border-red-400":null}
              ${h==="small"&&"h-8"||h==="medium"&&"h-10"||h==="large"&&"h-12"||"h-9"}`,type:s?"text":"password",...p}),e.jsx("button",{style:{backgroundColor:"none"},type:"button",className:"absolute right-3 top-4",onClick:()=>g(w=>!w),children:s?e.jsx(E,{width:20,height:20}):e.jsx(F,{width:20,height:20})})]}),o&&e.jsx("span",{className:"text-red-400 text-xs",children:o==null?void 0:o.message})]})})}const X=z({email:v().email("Enter a valid email").required("Email is required"),password:v().min(8,"Password must be at least 8 characters").required(),captcha:v().required("Please enter the captcha")});function G(){var b;const[u,m]=y.useState(""),h=B({}),{login:p}=L(),n=$({defaultValues:{email:"",password:"",captcha:""},resolver:V(X)}),s=_({api:`${N.getCaptcha}`,key:"getCaptcha",value:[],options:{enabled:!0}});console.log("getCaptchaData",(b=s==null?void 0:s.data)==null?void 0:b.data);const g=async()=>{if(s!=null&&s.data){const r=O(s==null?void 0:s.data.data.captcha_code),l=document.createElement("canvas");l.width=200,l.height=50;const a=l.getContext("2d");if(a){const d=a.createLinearGradient(0,0,l.width,l.height);d.addColorStop(0,"#f9fafb"),d.addColorStop(1,"#e5e7eb"),a.fillStyle=d,a.fillRect(0,0,l.width,l.height);for(let t=0;t<30;t++)a.fillStyle=`rgba(0, 0, 0, ${Math.random()*.2})`,a.fillRect(Math.random()*l.width,Math.random()*l.height,1,1);for(let t=0;t<3;t++)a.strokeStyle=`rgba(0, 0, 0, ${Math.random()*.15})`,a.lineWidth=1,a.beginPath(),a.moveTo(Math.random()*l.width,Math.random()*l.height),a.lineTo(Math.random()*l.width,Math.random()*l.height),a.stroke();a.font="bold 26px Arial",a.fillStyle="#374151",a.textAlign="center",a.textBaseline="middle",a.shadowColor="rgba(0, 0, 0, 0.2)",a.shadowBlur=2,a.shadowOffsetX=1,a.shadowOffsetY=1;const x=r.split(""),f=(l.width-x.length*20)/2;x.forEach((t,C)=>{const P=f+C*24+15,A=l.height/2+(Math.random()-.5)*5;a.save(),a.translate(P,A),a.rotate((Math.random()-.5)*.3),a.fillText(t,0,0),a.restore()}),m(l.toDataURL())}}};y.useEffect(()=>{g()},[s==null?void 0:s.data]);const i=r=>(r.preventDefault(),!1),c=r=>{(r.ctrlKey||r.metaKey)&&["c","v","x"].includes(r.key.toLowerCase())&&r.preventDefault()},o=async r=>{var l,a,d,x,f;console.log("data",r);try{const t=await h.mutateAsync({api:N.login,data:{email:r.email,password:S(r.password),captcha_code:S(r.captcha),captcha_id:(a=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:a.captcha_id,moduleId:"30"}});(d=t==null?void 0:t.data)!=null&&d.status?(await p(t==null?void 0:t.data),j.success((x=t==null?void 0:t.data)==null?void 0:x.message)):(j.error((f=t==null?void 0:t.data)==null?void 0:f.message),s==null||s.refetch(),n.setValue("captcha",""))}catch(t){j.error(W(t.message)),s==null||s.refetch(),n.setValue("captcha","")}finally{n.reset({...n.getValues(),email:"",password:"",captcha:""})}},w=()=>{s==null||s.refetch(),n.setValue("captcha","")};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"darks:bg-gray-800 darks:border-gray-800 h-[7vh] w-full border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto xl:max-w-6xl",children:e.jsx("nav",{className:"",id:"desktop-menu",children:e.jsx("a",{href:"/",children:e.jsx("div",{className:"mt-6",children:e.jsx("span",{className:"text-xl font-bold uppercase",children:"Login - Human Resource Management System"})})})})})}),e.jsx("main",{className:"flex h-[80vh] items-center justify-center bg-gray-100",children:e.jsx("div",{className:"darks:bg-gray-900 darks:bg-opacity-40 bg-gray-100",children:e.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:e.jsx("div",{className:"mb-12 w-full max-w-full px-2 sm:px-12 lg:mb-0 lg:pr-20",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"darks:bg-gray-800 rounded-lg bg-white p-6 shadow-xl sm:px-12 sm:py-8",children:[e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("h1",{className:"darks:text-gray-300 mb- text-center text-2xl font-bold leading-normal text-gray-800",children:"Welcome Back"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"mb-7 w-10 border border-b border-black"})})]}),e.jsx(K,{methods:n,onSubmit:n.handleSubmit(o),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx(k,{className:"w-full bg-background px-5 py-5",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your User Name",autoComplete:"off",onPaste:i,onCopy:i,onCut:i,onKeyDown:c})}),e.jsx("div",{className:"space-y-2",children:e.jsx(U,{className:"w-full bg-background px-5 py-5",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:i,onCopy:i,onCut:i,onKeyDown:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter CAPTCHA"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:s!=null&&s.isFetching?e.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100",children:e.jsxs("svg",{className:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):u?e.jsx("img",{src:u,alt:"CAPTCHA",className:"h-[50px] w-[150px] rounded border border-gray-300 object-contain"}):e.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100 text-xs text-gray-500",children:"Failed to load"})}),e.jsx("button",{type:"button",onClick:w,disabled:s==null?void 0:s.isFetching,className:"p-2 text-gray-500 transition-colors hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50",title:"Refresh CAPTCHA",children:e.jsx("svg",{className:`h-5 w-5 ${s!=null&&s.isFetching?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx(k,{className:"w-full bg-background px-5 py-3",name:"captcha",placeholder:"Enter the text shown in the image",autoComplete:"off",onPaste:i,onCopy:i,onCut:i,onKeyDown:c})]}),e.jsx("div",{children:e.jsxs(q,{type:"submit",isLoading:n.formState.isSubmitting,className:"mt-2 w-full px-4 py-5 shadow-none",children:[e.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-box-arrow-in-right mr-1 inline-block h-4 w-4 ltr:mr-2 rtl:ml-2",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]})})]})})})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:e.jsxs("div",{className:"mt-6 text-center lg:mt-0",children:[e.jsx(H,{src:"/images/hrms_banner.png",alt:"welcome",className:"h-68"}),e.jsxs("div",{className:"mt-2 px-4",children:[e.jsx("h1",{className:"text-bold mb-2 text-2xl",children:"Serve Citizen Services with Ease of Access"}),e.jsx("p",{className:"mb-4 text-base text-gray-500",children:"Manage citizen government services with easy of access and serve them in on time."})]})]})})]})})})}),e.jsx("footer",{className:"darks:bg-gray-800 darks:border-gray-800 h-[10vh] w-full border-t border-gray-200 bg-white py-6",children:e.jsx("div",{className:"container mx-auto w-full px-4 xl:max-w-6xl",children:e.jsx("div",{className:"mx-auto px-4",children:e.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-left md:rtl:text-right",children:e.jsxs("ul",{className:"space-x-4 ltr:pl-0 rtl:pr-0",children:[e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Support |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Help Center |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Privacy |"})}),e.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:e.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Terms of Service"})})]})}),e.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-right md:rtl:text-left",children:e.jsxs("p",{className:"mb-0 mt-3 md:mt-0",children:[e.jsx("a",{href:"#",className:"hover:text-indigo-500",children:"UD&HD"})," ","| All right reserved"]})})]})})})})]})}function Z(){return e.jsx("div",{className:"",children:e.jsx(G,{})})}export{Z as default};
