import{w as K,u as Q,j as e,F as k,a as s,r as c,k as X,W as Z,n as ee,p as u,q as ne,f as D,s as te,B as se,A as oe}from"./index-02ab1109.js";import{u as F}from"./useSetTitle-f0179f46.js";function le(){const{id:r}=K();console.log("param document",r);const b=Q();return e(k,{children:e("div",{className:"bg-gray-200   h-screen",children:e("div",{className:" w-2/6 mx-auto  bg-white p-12",children:s("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 mx-auto ",children:[e("div",{children:e("img",{src:"https://cdn-icons-png.flaticon.com/512/2169/2169862.png",className:"h-40 mx-auto"})}),e("div",{className:"ml-32 -mt-10",children:e("img",{src:"https://cdn-icons-png.flaticon.com/512/5610/5610944.png",className:"h-12 mx-auto opacity-75"})}),e("div",{children:e("h1",{className:"text-center text-2xl text-gray-600",children:"Payment Successful"})}),e("div",{children:s("h1",{className:"text-center text-sm text-gray-500",children:["Your payment is  successful!",e("br",{})," Now you upload your Document"]})}),s("div",{className:"mx-auto flex flex-row space-x-4",children:[e("button",{className:"w-32 text-xs p-3 mt-10 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-sky-400 rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600",onClick:()=>b(`/safdocumentupload/${r}`),children:"Upload Document"}),e("button",{className:"w-32 text-xs mt-10 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-sky-400 rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600",onClick:()=>b("/dashboardEntry"),children:"Dashboard"})]})]})})})})}let ae=window.localStorage.getItem("token");console.log("token at basic details is post method...",ae);function re(r){var w,_,h,z,H,J;const[b,I]=c.useState(""),[n,x]=c.useState("no"),[P,S]=c.useState(),[q,j]=c.useState(),[p,A]=c.useState(0),[C,m]=c.useState(),[R,f]=c.useState(),{notify:g}=c.useContext(X),M=Q(),t=r==null?void 0:r.data,a=r==null?void 0:r.installment,T=r==null?void 0:r.applicationId,W=r==null?void 0:r.connCat;F("Payment Page");const{api_waterPayConnectionCharges:E,header:B}=Z();c.useEffect(()=>{if(n=="no"){const o=(t==null?void 0:t.penalty)/10;S((t==null?void 0:t.totalAmount)-o),f(o),(t==null?void 0:t.connectionFee)==0&&(x("yes"),f(0))}n=="yes"&&S(Number(t==null?void 0:t.connectionFee)+p)},[p,n,t]);const V=ee({isInstallmentRadio:u().required("select Is InstallmentRadio"),paymentMode:u().required("select payment mode"),remarks:u().required("Enter remarks"),branchName:u(),cheque_dd_no:u(),cheque_dd_date:u(),advanceAmount:u()}),l=ne({enableReinitialize:!0,initialValues:{paymentMode:"",remarks:"",bankName:"",branchName:"",cheque_dd_no:"",cheque_dd_date:"",applicationId:T,chargeCategory:W,selectInstallment:"",isInstallmentRadio:"no"},onSubmit:(o,i)=>{L(o)},validationSchema:V}),L=o=>{console.log("items",o);const i={paymentMode:o==null?void 0:o.paymentMode,remarks:o==null?void 0:o.remarks,bankName:o==null?void 0:o.bankName,branchName:o==null?void 0:o.branchName,chequeNo:o==null?void 0:o.cheque_dd_no,chequeDate:o==null?void 0:o.cheque_dd_date,amount:P,isInstallment:n,penaltyAmount:t==null?void 0:t.penalty,applicationId:o==null?void 0:o.applicationId,penaltyIds:C,chargeCategory:o==null?void 0:o.chargeCategory};console.log("Final Payload",i),D.post(E,i,B).then(d=>{var Y,G,U;((Y=d==null?void 0:d.data)==null?void 0:Y.status)==!0?(M(`/water-payment-receipt/${(U=(G=d==null?void 0:d.data)==null?void 0:G.data)==null?void 0:U.TransactionNo}/application`),console.log("Payment Done",d),g("Payment Done Successfully","success")):g("Error While Payment","error")}).catch(d=>{g("Something Went Wrong","error"),console.log("Expecption while payment",d)})},O=o=>{console.log("This..",o.target.selectedIndex,a[0].id),o.target.selectedIndex==1&&m([a[0].id]),o.target.selectedIndex==2&&m([a[0].id,a[1].id]),o.target.selectedIndex==3&&(m([a[0].id,a[1].id,a[2].id]),x("no"),m(void 0))},$=o=>{let i=o.target.name,d=o.target.value;console.log(i,d),i=="paymentMode"&&j(d),i=="selectInstallment"&&O(o),i=="selectInstallment"&&o.target.selectedIndex==3&&x("no"),i=="selectInstallment"&&A(Number(d)),i=="isInstallmentRadio"&&x(o.target.value)};if(b==!0)return e(k,{children:e(le,{})});const y=(t==null?void 0:t.penalty)>0&&((w=a[0])==null?void 0:w.installment_amount),N=(t==null?void 0:t.penalty)>0&&Number((_=a[1])==null?void 0:_.installment_amount)+Number((h=a[0])==null?void 0:h.installment_amount),v=(t==null?void 0:t.penalty)>0&&Number((z=a[2])==null?void 0:z.installment_amount)+Number((H=a[1])==null?void 0:H.installment_amount)+Number((J=a[0])==null?void 0:J.installment_amount);return s(k,{children:[e(te,{position:"top-right",autoClose:2e3}),e("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e("div",{className:" block p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:s("form",{onSubmit:l.handleSubmit,onChange:$,className:"p-4 relative",children:[(t==null?void 0:t.connectionFee)!=0&&(t==null?void 0:t.penalty)!=0&&e("div",{className:"text-center text-green-600 font-semibold pb-2",children:"Note: 10% rebate on penalty in case whole penalty is paid"}),s("div",{className:"grid grid-cols-12",children:[s("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("span",{children:"Connection Fee :"})," ",e("span",{className:"font-mono font-semibold",children:t==null?void 0:t.connectionFee})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("span",{children:"Penalty :"})," ",e("span",{className:"font-mono font-semibold",children:t==null?void 0:t.penalty})]}),(t==null?void 0:t.penalty)>0&&s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4 flex space-x-2",children:[e("span",{children:"Pay penalty on installment?:"})," ",e("span",{className:"font-mono font-semibold",children:s("span",{className:"flex space-x-2",children:[s("label",{children:[e("input",{...l.getFieldProps("isInstallmentRadio"),type:"radio",name:"isInstallmentRadio",value:"yes",checked:n==="yes",disabled:(t==null?void 0:t.connectionFee)==0}),"Yes"]}),s("label",{children:[e("input",{...l.getFieldProps("isInstallmentRadio"),type:"radio",name:"isInstallmentRadio",value:"no",checked:n==="no",disabled:(t==null?void 0:t.connectionFee)==0}),"No"]})]})})]}),(t==null?void 0:t.penalty)>0&&n=="yes"?s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{children:["Select Installment",e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),s("select",{...l.getFieldProps("selectInstallment"),type:"text",className:"form-control mx-2 px-1 py-1 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:y,children:y}),a[1]&&e("option",{value:N,children:N}),a[2]&&e("option",{value:v,children:v})]}),e("p",{className:"text-red-600 text-xs",children:l.touched.selectInstallment&&l.errors.selectInstallment?l.errors.selectInstallment:null})]}):e("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4 flex"}),e("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:s("div",{className:"w-full",children:[e("span",{children:"Total Payable Amount :"})," ",s("span",{className:"font-mono font-semibold text-xl",children:[" â‚¹",P]})]})}),e("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:s("div",{className:"w-full",children:[e("span",{children:"Rebate :"})," ",e("span",{className:"font-mono font-semibold text-xl",children:n=="yes"?0:R})]})})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),s("select",{...l.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"Cash",children:"Cash"}),e("option",{value:"Cheque",children:"Cheque"}),e("option",{value:"DD",children:"DD"}),e("option",{value:"online",children:"Online"})]}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.paymentMode&&l.errors.paymentMode?l.errors.paymentMode:null})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e("input",{...l.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.remarks&&l.errors.remarks?l.errors.remarks:null})]}),(q=="Cheque"||q=="DD")&&s(k,{children:[s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e("input",{...l.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Bank Name."}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.bankName&&l.errors.bankName?l.errors.bankName:null})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e("input",{...l.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Branch Name"}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.branchName&&l.errors.branchName?l.errors.branchName:null})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e("input",{...l.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.cheque_dd_no&&l.errors.cheque_dd_no?l.errors.cheque_dd_no:null})]}),s("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e("input",{...l.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:l.touched.cheque_dd_date&&l.errors.cheque_dd_date?l.errors.cheque_dd_date:null})]})]}),e("div",{className:"col-span-12"}),s("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e("div",{className:""}),e("div",{className:"md:pl-10 text-right",children:e("button",{type:"submit",className:" px-6 py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Pay Tax"})})]})]})]})})})]})}function ie(r){var p,A,C,m,R,f,g,M,t,a,T,W,E,B,V,l,L,O,$,y,N,v,w,_;const[b,I]=c.useState(!1),[n,x]=c.useState(),{id:P}=K(),{notify:S}=c.useContext(X),{api_WaterGetDetailsById:q}=Z();F("Water Application Payment");const j=()=>{I(!0),console.log("before fetch property details in deactivation"),D.post(q,{applicationId:P},oe()).then(function(h){console.log("view water details by id...",h.data.data),x(h.data.data),I(!1)}).catch(function(h){console.log("==2 details by id error...",h),I(!1),S("Something Went Wrong","error")})};return c.useEffect(()=>{j()},[]),s(k,{children:[b&&e(se,{}),e("div",{className:"w-full bg-white shadow-xl mb-6",children:e("div",{className:"",children:s("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4",children:[s("div",{className:"flex space-x-5 pl-4 ",children:[s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(p=n==null?void 0:n.applicationDetails)!=null&&p.application_no?(A=n==null?void 0:n.applicationDetails)==null?void 0:A.application_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Application No"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(C=n==null?void 0:n.applicationDetails)!=null&&C.ward_name?(m=n==null?void 0:n.applicationDetails)==null?void 0:m.ward_name:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),s("div",{className:"flex-1",children:[s("div",{className:"font-semibold text-md",children:[(R=n==null?void 0:n.applicationDetails)!=null&&R.connection_type?(f=n==null?void 0:n.applicationDetails)==null?void 0:f.connection_type:"N/A"," "]}),e("div",{className:"text-gray-500 text-xs",children:"Connection Type"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(g=n==null?void 0:n.applicationDetails)!=null&&g.owner_char_type?(M=n==null?void 0:n.applicationDetails)==null?void 0:M.owner_char_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(t=n==null?void 0:n.applicationDetails)!=null&&t.property_type?(a=n==null?void 0:n.applicationDetails)==null?void 0:a.property_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),s("div",{className:"flex space-x-10  pl-4 mt-4",children:[s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(T=n==null?void 0:n.applicationDetails)!=null&&T.pipeline_type?(W=n==null?void 0:n.applicationDetails)==null?void 0:W.pipeline_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Pipeline Type"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(E=n==null?void 0:n.applicationDetails)!=null&&E.connection_through?(B=n==null?void 0:n.applicationDetails)==null?void 0:B.connection_through:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Connection Through"})]}),(n==null?void 0:n.connection_through)=="SAF"?s("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(V=n==null?void 0:n.applicationDetails)!=null&&V.saf_no?(l=n==null?void 0:n.applicationDetails)==null?void 0:l.saf_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"SAF No"})]}):s("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(L=n==null?void 0:n.applicationDetails)!=null&&L.holding_no?(O=n==null?void 0:n.applicationDetails)==null?void 0:O.holding_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Holding No"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:($=n==null?void 0:n.applicationDetails)!=null&&$.area_sqft?(y=n==null?void 0:n.applicationDetails)==null?void 0:y.area_sqft:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Area (Sqft.)"})]}),s("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(N=n==null?void 0:n.applicationDetails)!=null&&N.category?(v=n==null?void 0:n.applicationDetails)==null?void 0:v.category:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Category"})]})]})]})})}),e("div",{children:e(re,{connCat:(w=n==null?void 0:n.applicationDetails)==null?void 0:w.connection_type,applicationId:(_=n==null?void 0:n.applicationDetails)==null?void 0:_.id,installment:n==null?void 0:n.penaltyInstallments,data:n==null?void 0:n.calculation})}),e("div",{className:"w-full h-40 md:none"})]})}export{ie as default};
