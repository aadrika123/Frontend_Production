import{l as r,v as x,W as j,H as M,y as O,z as N,B as T,m as $,q as z,A as _,k as s,o as L,j as e,D as R,G as U,L as G}from"./index-0caa0f8a.js";function ee(){const[a,y]=r.useState();x();const[d,n]=r.useState(!1),[I,u]=r.useState(),[J,i]=r.useState(),[v,c]=r.useState(!1),[w,K]=r.useState(1);r.useState("");const[S,Q]=r.useState(5),[A,X]=r.useState(""),[B,Y]=r.useState(0);r.useState(10);const{api_waterSearchActiveApplication:H,header:Z}=j(),{filterBy:k,parameter:C}=x();M("Water Application Search");const E=O({filterBy:N().required("This is a required field !"),entry:N().required("This is a required field !")}),o=T({initialValues:{filterBy:"",entry:""},onSubmit:t=>{h(t)},validationSchema:E}),F=$();r.useEffect(()=>{B>0&&h()},[k,C]);const q=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${o.values.filterBy}/${o.values.parameter} `)},h=t=>{c(!0),n(!1);const p={filterBy:t?t.filterBy:o.values.filterBy,parameter:t?t.entry:o.values.entry,pages:S,page:w,search:A};console.log("before fetch applied application..",p),z.post(H,p,_()).then(l=>{var m,g,f,b;console.log("applied application. in ...",(g=(m=l==null?void 0:l.data)==null?void 0:m.data)==null?void 0:g.data),(f=l==null?void 0:l.data)!=null&&f.status?(y((b=l==null?void 0:l.data)==null?void 0:b.data),n(!0)):(u(l.data.message),notify("No data found","error")),c(!1)}).catch(l=>{console.log("Error while fetching Filter Data",l),n(!1),c(!1)})};console.log("readymadeListData.data",a==null?void 0:a.data);const P=t=>{o.values.filterBy=t.target.value,t.target.value=="holdingNo"&&i("Enter Holding No."),t.target.value=="safNo"&&i("Enter SAF No."),t.target.value=="newConnection"&&i("Enter Application No."),t.target.value=="regularization"&&i("Enter Application No."),t.target.value=="name"&&i("Enter Owner Name"),t.target.value=="mobileNo"&&i("Enter Mobile No.")},V=()=>{u(),o.values&&i(o.values.filterBy)},W=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Application No",accessor:"application_no"},{Header:" Holding No",accessor:"holding_no"},{Header:"Applicant Name",accessor:"applicantname"},{Header:"Address",accessor:"address"},{Header:"Mobile No",accessor:"mobileno"},{Header:"Action",accessor:"id",Cell:({cell:t})=>e("button",{onClick:()=>{q(),F(`/waterViewApplication/${t.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];return console.log("readymadeListData.data",a==null?void 0:a.data),s(L,{children:[v&&e(R,{}),s("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Applied Applications"})}),e("form",{onChange:V,onSubmit:o.handleSubmit,children:s("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-5 my-5 m-10",children:[s("div",{children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",e("span",{className:"text-red-500",children:"*"})]}),s("select",{name:"filterBy",onChange:P,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"newConnection",children:"New Connection"}),e("option",{value:"regularization",children:"Regularization"}),e("option",{value:"name",children:"Name"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"holdingNo",children:"Holding No"})]}),e("p",{className:"text-red-500 text-xs",children:o.touched.filterBy&&o.errors.filterBy?o.errors.filterBy:null})]}),s("div",{children:[s("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Paramter",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"entry",onChange:o.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:o.touched.entry&&o.errors.entry?o.errors.entry:null})]}),e("div",{className:"mt-4",children:s("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 max-sm:m-0 py-1",children:[" ",s("p",{className:"flex justify-center",children:[" ",s("span",{className:"mt-1",children:[" ",e(U,{})," "]})," ","Search record"]})]})})]})}),s("div",{className:"mt-10 p-1",children:[d&&(a==null?void 0:a.length)!=0&&e(G,{columns:W,dataList:a==null?void 0:a.data}),d&&((a==null?void 0:a.length)==0||(a==null?void 0:a.data)==null)&&e("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"}),e("div",{className:"w-full h-40"})]})]})]})}export{ee as default};
