import{r as l,w as W,k as M,W as _,A as j,u as q,n as D,p as x,q as O,a,F as V,j as e,B as E,U as R,f as T}from"./index-02ab1109.js";import{b as $}from"./index-a86e1274.js";import{L as U}from"./ListTable-6da67014.js";function J(){const[N,d]=l.useState(),[I,c]=l.useState(!1),{type:n}=W(),[y,m]=l.useState(!1),[o,v]=l.useState(),[u,h]=l.useState(!1),{notify:f}=l.useContext(M),[w,i]=l.useState(),{api_waterSearchConsumer:S}=_(),B=j(),C=q(),A=s=>{i(),h(!1),m(!0);const p={filterBy:r.values.filterBy,parameter:r.values.parameter};console.log("before fetch holding details....",p),T.post(S,p,B).then(t=>{var g,b;console.log("search property list",t==null?void 0:t.data),(g=t==null?void 0:t.data)!=null&&g.status?(v((b=t==null?void 0:t.data)==null?void 0:b.data),h(!0)):(i(t.data.message),f("No data found","error")),m(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),f("Something went wrong!!","error"),m(!1),i("Something Went Wrong"),h(!1)})},F=D({filterBy:x().required("This is a required field !"),parameter:x().required("This is a required field !")}),r=O({initialValues:{filterBy:"",parameter:""},onSubmit:s=>{A()},validationSchema:F}),H=s=>{r.values.filterBy=s.target.value,s.target.value=="holdingNo"&&(d("Holding No"),c(!0)),s.target.value=="ownerDetails"&&(d("Owner Details"),c(!1)),s.target.value=="address"&&(d("Address"),c(!1))},k=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"applicant_name"},{Header:"Consumer No",accessor:"consumer_no"},{Header:"Holding No",accessor:"holding_no"},{Header:"SAF No",accessor:"saf_no"},{Header:"Mobile No",accessor:"mobile_no"},{Header:"Address",accessor:"address"},{Header:"Action",accessor:"id",Cell:({cell:s})=>e("button",{onClick:()=>C(`/waterViewConsumer/${s.row.values.id}`),className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}],L=()=>{i()};return a(V,{children:[y&&e(E,{}),(n=="re"||n=="mu")&&a("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e($,{className:"inline mr-2 text-3xl"}),"For ",e("span",{className:"font-semibold",children:n=="re"?"Re-Assessment":"Mutation"})," of property search the property and then apply for ",n=="re"?"Re-Assessment":"Mutation"]}),a("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Consumer"})}),e("form",{onChange:L,onSubmit:r.handleSubmit,children:a("div",{className:"flex justify-center space-x-8 my-5 m-10",children:[a("div",{children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e("span",{className:"text-red-500",children:"*"})]}),a("select",{name:"filterBy",onChange:H,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"consumerNo",children:"Consumer No"}),e("option",{value:"holdingNo",children:"Holding No"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"applicantName",children:"Applicant Name"}),e("option",{value:"mobileNo",children:"Mobile No"})]}),e("p",{className:"text-red-500 text-xs",children:r.touched.filterBy&&r.errors.filterBy?r.errors.filterBy:null})]}),a("div",{children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By ",N," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:r.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:r.touched.parameter&&r.errors.parameter?r.errors.parameter:null})]}),e("div",{className:"mt-4",children:a("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:[" ",a("p",{className:"flex",children:[" ",a("span",{className:"mt-1 mr-2",children:[" ",e(R,{})," "]})," ","Search record"]})]})})]})}),e("div",{className:"flex justify-center text-red-600 mb-2 font-semibold",children:w})]}),a("div",{className:"mt-10",children:[u&&(o==null?void 0:o.length)!=0&&e(U,{columns:k,dataList:o}),u&&(o==null?void 0:o.length)==0&&e("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"}),e("div",{className:"w-full h-40"})]})]})}export{J as default};
