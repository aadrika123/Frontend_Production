import{l as o,v as A,x as L,W as U,A as z,m as G,q as I,y as J,z as C,B as K,k as l,o as Q,j as e,D as X,E as Y,G as Z,L as D}from"./index-f85cf950.js";function ne(){const[ee,n]=o.useState(),[ae,c]=o.useState(!1),{type:d}=A(),[F,h]=o.useState(!1),[a,k]=o.useState(),[b,u]=o.useState(!1),{notify:x}=o.useContext(L),[H,m]=o.useState(),[N,te]=o.useState(1);o.useState("");const[y,se]=o.useState(5),[W,oe]=o.useState(""),[M,re]=o.useState(0),{api_waterSearchConsumer:O}=U(),{filterBy:i,parameter:p,pages:V}=A(),_=()=>{i!=null&&i!=""&&(console.log("This is What i need ",i,p),f({filterBy:i,parameter:p}))};o.useEffect(()=>{_()},[i,p,V]);const j=z(),E=G();o.useEffect(()=>{M>0&&f()},[N,y]);const P=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${t.values.filterBy}/${t.values.parameter} `)},f=s=>{console.log("data",s),m(),u(!1),h(!0);const g={filterBy:s?s.filterBy:t.values.filterBy,parameter:s?s.parameter:t.values.parameter,pages:y,page:N,search:W};console.log("th paypayload",g),console.log("before fetch holding details....",g),I.post(O,g,j).then(r=>{var v,w,S,B;console.log("search property list",(w=(v=r==null?void 0:r.data)==null?void 0:v.data)==null?void 0:w.data),(S=r==null?void 0:r.data)!=null&&S.status?(k((B=r==null?void 0:r.data)==null?void 0:B.data),u(!0)):(m(r.data.message),x("No data found","error")),h(!1)}).catch(r=>{console.log("Error while fetching Filter Data",r),x("Something went wrong!!","error"),h(!1),m("Something Went Wrong"),u(!1)})};console.log(a==null?void 0:a.data,a==null?void 0:a.data);const q=J({filterBy:C().required("This is a required field !"),parameter:C().required("This is a required field !")}),t=K({initialValues:{filterBy:"",parameter:""},onSubmit:s=>{f(s)},validationSchema:q}),$=s=>{t.values.filterBy=s.target.value,s.target.value=="holdingNo"&&(n("Holding No"),c(!0)),s.target.value=="ownerDetails"&&(n("Owner Details"),c(!1)),s.target.value=="address"&&(n("Address"),c(!1)),s.target.value=="applicationNo"&&(n("Application No"),c(!1))};console.log("readymadeListData.data",a==null?void 0:a.data);const T=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Owner's Name",accessor:"applicant_name"},{Header:"Consumer No",accessor:"consumer_no"},{Header:"Holding No",accessor:"holding_no"},{Header:"SAF No",accessor:"saf_no"},{Header:"Mobile No",accessor:"mobile_no"},{Header:"Address",accessor:"address"},{Header:"Action",accessor:"id",Cell:({cell:s})=>e("button",{onClick:()=>{P(),E(`/waterViewConsumer/${s.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}],R=()=>{m(),t.values&&n(t.values.filterBy)};return l(Q,{children:[F&&e(X,{}),(d=="re"||d=="mu")&&l("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e(Y,{className:"inline mr-2 text-3xl"}),"For"," ",e("span",{className:"font-semibold",children:d=="re"?"Re-Assessment":"Mutation"})," ","of property search the property and then apply for"," ",d=="re"?"Re-Assessment":"Mutation"]}),l("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Consumer"})}),e("form",{onChange:R,onSubmit:t.handleSubmit,children:l("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-3 my-5 m-10",children:[l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",e("span",{className:"text-red-500",children:"*"})]}),l("select",{name:"filterBy",onChange:$,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"consumerNo",children:"Consumer No"}),e("option",{value:"holdingNo",children:"Holding No"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"applicantName",children:"Applicant Name"}),e("option",{value:"mobileNo",children:"Mobile No"}),e("option",{value:"applicationNo",children:"Application No"})]}),e("p",{className:"text-red-500 text-xs",children:t.touched.filterBy&&t.errors.filterBy?t.errors.filterBy:null})]}),l("div",{children:[l("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Parameter ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:t.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:t.touched.parameter&&t.errors.parameter?t.errors.parameter:null})]}),e("div",{className:"mt-4 ",children:e("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5  max-sm:m-0 max-sm:mt-5 m-3 py-1",children:l("p",{className:"flex justify-center",children:[l("span",{className:"mt-1 mr-2",children:[" ",e(Z,{})," "]})," ","Search record"," "]})})})]})}),e("div",{className:"flex justify-center text-red-600 mb-2 font-semibold",children:H})]}),l("div",{className:"mt-10",children:[b&&(a==null?void 0:a.length)!=0&&e(D,{columns:T,dataList:a==null?void 0:a.data}),b&&(a==null?void 0:a.length)==0&&e("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"}),e("div",{className:"w-full h-40"})]})]})}export{ne as default};
