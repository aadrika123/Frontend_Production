import{r as n,W as S,o as A,q as m,s as B,u as H,a,F as k,j as e,B as C,V as F,f as L,A as E}from"./index-3c06fb98.js";import{L as q}from"./ListTable-891fa8b7.js";import{u as T}from"./useSetTitle-03a93f92.js";import"./index-831bf534.js";function M(){const[o,u]=n.useState(),[d,s]=n.useState(!1),[f,i]=n.useState(),[g,c]=n.useState(!1),{api_waterSearchActiveApplication:b,header:W}=S();T("Water Application Search");const x=A({filterBy:m().required("This is a required field !"),entry:m().required("This is a required field !")}),r=B({initialValues:{filterBy:"",entry:""},onSubmit:t=>{N(t)},validationSchema:x}),y=H(),N=t=>{c(!0),s(!1);const p={filterBy:t.filterBy,parameter:t.entry};console.log("before fetch applied application..",p),L.post(b,p,E()).then(l=>{var h;console.log("applied application. in ...",l==null?void 0:l.data),u((h=l.data)==null?void 0:h.data),s(!0),c(!1)}).catch(l=>{console.log("Error while fetching Filter Data",l),s(!1),c(!1)})},v=t=>{r.values.filterBy=t.target.value,t.target.value=="holdingNo"&&i("Enter Holding No."),t.target.value=="safNo"&&i("Enter SAF No."),t.target.value=="newConnection"&&i("Enter Application No."),t.target.value=="regularization"&&i("Enter Application No."),t.target.value=="name"&&i("Enter Owner Name"),t.target.value=="mobileNo"&&i("Enter Mobile No.")},w=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Application No",accessor:"application_no"},{Header:"Holding No",accessor:"holding_no"},{Header:"Applicant Name",accessor:"applicantname"},{Header:"Address",accessor:"address"},{Header:"Mobile No",accessor:"mobileno"},{Header:"Action",accessor:"id",Cell:({cell:t})=>e("button",{onClick:()=>y(`/waterViewApplication/${t.row.original.id}`),className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];return a(k,{children:[g&&e(C,{}),a("div",{className:"border shadow-xl bg-white mt-6",children:[e("div",{className:"flex ml-5 mt-2 ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Applied Applications"})}),e("form",{onSubmit:r.handleSubmit,children:a("div",{className:"flex justify-center space-x-8 my-5 m-10",children:[a("div",{children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",e("span",{className:"text-red-500",children:"*"})]}),a("select",{name:"filterBy",onChange:v,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"newConnection",children:"New Connection"}),e("option",{value:"regularization",children:"Regularization"}),e("option",{value:"name",children:"Name"}),e("option",{value:"safNo",children:"SAF No"}),e("option",{value:"holdingNo",children:"Holding No"})]}),e("p",{className:"text-red-500 text-xs",children:r.touched.filterBy&&r.errors.filterBy?r.errors.filterBy:null})]}),a("div",{children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[f||"Select Application Type"," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"entry",onChange:r.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:r.touched.entry&&r.errors.entry?r.errors.entry:null})]}),e("div",{className:"mt-4",children:a("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:[" ",a("p",{className:"flex",children:[" ",a("span",{className:"mt-1 mr-2",children:[" ",e(F,{})," "]})," ","Search record"]})]})})]})}),a("div",{className:"m-10",children:[d&&(o==null?void 0:o.length)!=0&&e(q,{columns:w,dataList:o}),d&&(o==null?void 0:o.length)==0&&e("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]})]})]})}export{M as default};
