import{j as e}from"../vendor/data-layer-D-mN4jNr.js";import{r as s}from"./router-CukBMuo-.js";import{b as a,a as t,u as l}from"./useCustomQuery-DpDVXO1L.js";import{g as r,B as c}from"../assets/index-BEFM8Tg5.js";import{P as i}from"./index-DLnICXI7.js";import{C as d,b as n,c as m,a as x}from"./card-C3jEVp7y.js";import{S as o,a as h,b as j,c as u,d as g}from"./select-C8Er8muz.js";import{g as p,L as N,G as y,h as b,U as f,i as v,P as w,c as _}from"./icons-BKNS1bB5.js";import"../vendor/react-core-DF3nNwgj.js";import"./radix-overlays-Bd5f9pAl.js";import"./radix-forms-DokPSy8L.js";import"./radix-core-Cwp28e6O.js";import"../vendor/styling-Bmy4sVOj.js";import"./ui-components-DR6XnHte.js";import"./utils-CAw9X-in.js";const L=()=>{const[L,C]=s.useState(""),[S,k]=s.useState(""),[B,U]=s.useState(""),[P,M]=s.useState([]),[T,W]=s.useState(null),[F,$]=s.useState(""),[A,E]=s.useState("card"),{data:I,isLoading:K,error:V}=a({api:r.getUlbList,key:"getUlbList",options:{enabled:!0}}),{data:Y,isLoading:z}=t({api:r.getModuleList,key:"getModuleList",options:{enabled:!0}}),G=l({}),O=l({});return e.jsx(i,{title:"Know Your Tax Collector",meta:{canonical:"https://jharkhandegovernance.com/know-your-tax-collector",description:"Find your tax collector information by selecting your ULB and ward. Get contact details and other information about tax collectors in your area."},children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Know Your Tax Collector"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Find your tax collector information by selecting your ULB, ward and module"})]}),e.jsxs(d,{className:"mb-8",children:[e.jsx(n,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Select Your Location"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Select ULB ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(o,{value:L,onValueChange:e=>{const s="select-ulb"===e?"":e;C(s),k(""),U(""),M([]),W(null),s&&(async e=>{try{const s=await G.mutateAsync({api:r.getWardListByULB,data:{ulbId:e}});s.data.status?(M(s.data.data),$("")):($(s.data.message),M([]))}catch(s){$("Server error occurred. Please try again later."),M([])}})(s)},children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Choose your ULB"})}),e.jsxs(u,{children:[e.jsx(g,{value:"select-ulb",children:"Select ULB"}),K?e.jsx(g,{value:"loading",disabled:!0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 animate-spin"}),"Loading ULBs..."]})}):I?.data?.length>0?I.data.map(s=>e.jsx(g,{value:s.id.toString(),children:s.ulb_name},s.id)):e.jsx(g,{value:"no-data",disabled:!0,children:V?"Error loading ULBs":"No ULBs available"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Ward (Optional)"}),e.jsxs(o,{value:S,onValueChange:e=>{k("select-ward"===e?"":e)},disabled:!L||G.isPending,children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Choose your ward"})}),e.jsxs(u,{children:[e.jsx(g,{value:"select-ward",children:"Select Ward"}),G.isPending?e.jsx(g,{value:"loading",disabled:!0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 animate-spin"}),"Loading wards..."]})}):P?.map(s=>e.jsxs(g,{value:s.id.toString(),children:["Ward ",s.ward_no," - ",s.ward_name]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Module (Optional)"}),e.jsxs(o,{value:B,onValueChange:e=>{U("select-module"===e?"":e)},children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Choose module"})}),e.jsxs(u,{children:[e.jsx(g,{value:"select-module",children:"Select Module"}),z?e.jsx(g,{value:"loading",disabled:!0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 animate-spin"}),"Loading modules..."]})}):Y?.data?.length>0?Y.data.map(s=>e.jsx(g,{value:s.id.toString(),children:s.module_name},s.id)):e.jsx(g,{value:"no-data",disabled:!0,children:"No modules available"})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 pt-4",children:[e.jsx(c,{onClick:()=>{L&&(async(e,s,a)=>{try{const t={};e&&(t.ulb_id=e),s&&(t.ward_id=s),a&&(t.module_id=a);const l=await O.mutateAsync({api:r.getTaxCollectorByULB,data:t});l.data.status?(W(l.data.data),$("")):($(l.data.message),W(null))}catch(t){$("Server error occurred. Please try again later."),W(null)}})(L,S||void 0,B||void 0)},disabled:!L||O.isPending,className:"px-8",children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):"Find Tax Collector"}),e.jsx(c,{onClick:()=>{C(""),k(""),U(""),M([]),W(null),$("")},variant:"outline",className:"px-8",children:"Reset Filters"})]})]})]}),!L&&!T&&!O.isPending&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data to Collect"}),e.jsx("p",{className:"text-gray-500",children:"Please select ULB, ward, or modules to find tax collector information."})]}),F&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700",children:F})}),T&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:T.ulb_image,alt:T.ulb_name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:T.ulb_name}),e.jsxs("p",{className:"text-gray-600",children:["Ward: ",T.ward_name]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Tax Collector Information"}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded-full",children:["Total: ",T.tc_details?.length||0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"card"===A?"default":"outline",size:"sm",onClick:()=>E("card"),children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),"Cards"]}),e.jsxs(c,{variant:"list"===A?"default":"outline",size:"sm",onClick:()=>E("list"),children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"List"]})]})]}),"card"===A?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.tc_details?.map((s,a)=>e.jsxs(d,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(n,{className:"pb-3",children:e.jsxs(m,{className:"flex items-center gap-2 text-lg",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),s.tc_name]})}),e.jsxs(x,{className:"space-y-3",children:[s.module&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Module: ",s.module]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Ward: ",s.ward_name]})]}),s.tc_mobile&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("a",{href:`tel:${s.tc_mobile}`,className:"text-sm hover:text-blue-600 transition-colors",children:s.tc_mobile})]}),s?.email&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("a",{href:`${s?.email}`,className:"text-sm hover:text-blue-600 transition-colors",children:s.email})]}),s.tc_image&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:s.tc_image,alt:s.tc_name,className:"w-full h-32 rounded-lg object-cover"})})]})]},a))}):e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Module"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ward"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T.tc_details?.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.tc_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.module||"NA"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.ward_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.tc_mobile?e.jsxs("a",{href:`tel:${s.tc_mobile}`,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),s.tc_mobile]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No contact"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.email?e.jsxs("a",{href:`tel:${s.email}`,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),s.email]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No Email"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.tc_image?e.jsx("img",{src:s.tc_image,alt:s.tc_name,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"h-6 w-6 text-gray-400"})})})]},a))})]})})})]}),!T&&L&&!O.isPending&&!F&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tax Collector Found"}),e.jsx("p",{className:"text-gray-500",children:"No tax collector information available for the selected location."})]})]})})})};export{L as default};
