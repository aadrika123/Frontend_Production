import{u as X,be as os,r as h,b as u,d as rs,o as xs,j as s,D as ns,B as M,F as hs,C as ss,a2 as js,R as ps,x as Ns,y as fs,M as N,z as bs,S as ys,a5 as j,L as vs,K as Cs,c as Ts,a as Rs,g as L,_ as r,I as Ss}from"./index-D-9IcDeW.js";import{g as ws}from"./services-KQnp_8oA.js";import{T as Es,a as Os,b as g,c as x,d as _s,e as n}from"./table-TWFhCp3u.js";const Fs=Ts().shape({complaintNo:Rs().required("Complaint No. is Required")});function Bs(){var y,v,C,T,R,S,w,E,O,_,F,B,I,P,A,G,$,D,H,k,z,V,K,q,U,W,Y,Z,J;X({});const d=X({}),a=os(),[es,f]=h.useState(!1),[as,ls]=h.useState(!1),[ds,is]=h.useState(!0),[b,ts]=h.useState(""),{currentLanguage:e}=u(),p=rs({resolver:xs(Fs)});console.log(as);const cs=async t=>{var c,m,o;try{const l=await a.mutateAsync({api:`${L.getComplaintDetailsByComplaintNo}/${t==null?void 0:t.complaintNo}`});(c=l.data)!=null&&c.success?r.success((m=l==null?void 0:l.data)==null?void 0:m.message):r.error((o=l==null?void 0:l.data)==null?void 0:o.message)}catch(l){console.log(l)}},ms=async()=>{var t,c,m,o,l,Q;try{const i=await d.mutateAsync({api:L.verifyEmailOtp,data:{otp:b,email:(m=(c=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:c.data)==null?void 0:m.email}});(o=i==null?void 0:i.data)!=null&&o.success?(r.success((l=i==null?void 0:i.data)==null?void 0:l.message),f(!1),is(!0)):r.error((Q=i==null?void 0:i.data)==null?void 0:Q.message)}catch(i){r.error(ws(i.message))}};return s.jsxs(s.Fragment,{children:[s.jsx(ns,{open:es,setOpen:f,title:"OTP Send to your Registered Email",setEdit:ls,children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-bold mb-4",children:"Enter OTP"}),s.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[s.jsx("input",{value:b,onChange:t=>ts(t.target.value),type:"text",placeholder:"Enter OTP",className:"input-field w-full border border-gray-300 rounded-md p-2"}),s.jsx("div",{children:s.jsx(M,{type:"button",onClick:ms,className:"w-full rounded-xl py-6 px-4 mt-2 shadow-none",variant:"outline",children:"Verify OTP"})})]})]})}),s.jsx(hs,{methods:p,onSubmit:p.handleSubmit(cs),children:s.jsxs("div",{className:"md:px-24 space-y-4",children:[s.jsxs(ss,{className:"text-xl text-primary font-bold",children:[e==null?void 0:e.TRACK_GR," "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"md:w-4/12",children:[s.jsx(js,{htmlFor:"complaintNo",children:e==null?void 0:e.GN}),s.jsx(ps,{className:"bg-background",name:"complaintNo",placeholder:""})]}),s.jsx("div",{className:"col-span-3 mt-7",children:s.jsx(M,{isLoading:p.formState.isSubmitting,type:"submit",className:"w-auto rounded-xl px-10 float-right",children:e==null?void 0:e.SUBMIT})})]})]})}),((v=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:v.success)&&ds&&s.jsx("div",{className:"mt-20 md:px-24",children:s.jsxs(Ns,{children:[s.jsx(fs,{className:"px-7",children:s.jsx(N,{children:e==null?void 0:e.GL})}),s.jsx(bs,{children:a.isPending?s.jsx("div",{className:"flex h-32 items-center justify-center",children:s.jsx(ys,{})}):s.jsxs(Es,{children:[s.jsx(Os,{children:s.jsxs(g,{children:[s.jsxs(x,{children:[e==null?void 0:e.GRIEVANCE_NO,"."]}),s.jsx(x,{children:e==null?void 0:e.CITIZEN_NAME}),s.jsxs(x,{children:[e==null?void 0:e.MOBILE_NO,"."]}),s.jsx(x,{children:e==null?void 0:e.STATUS}),s.jsx(x,{children:e==null?void 0:e.VIEW})]})}),s.jsx(_s,{children:s.jsxs(g,{children:[s.jsx(n,{children:(R=(T=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:T.data)==null?void 0:R.complaintRefNo}),s.jsx(n,{children:(E=(w=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:w.data)==null?void 0:E.citizenName}),s.jsx(n,{children:(F=(_=(O=a==null?void 0:a.data)==null?void 0:O.data)==null?void 0:_.data)==null?void 0:F.mobileNo}),s.jsxs(n,{children:[((P=(I=(B=a==null?void 0:a.data)==null?void 0:B.data)==null?void 0:I.data)==null?void 0:P.wf_status)===3&&s.jsx(j,{className:"bg-amber-400 text-white",children:e==null?void 0:e.PR}),(($=(G=(A=a==null?void 0:a.data)==null?void 0:A.data)==null?void 0:G.data)==null?void 0:$.wf_status)===2&&s.jsx(j,{variant:"destructive",children:e==null?void 0:e.R}),((k=(H=(D=a==null?void 0:a.data)==null?void 0:D.data)==null?void 0:H.data)==null?void 0:k.wf_status)===1&&s.jsxs(j,{variant:"success",children:[e==null?void 0:e.RS," "]}),((K=(V=(z=a==null?void 0:a.data)==null?void 0:z.data)==null?void 0:V.data)==null?void 0:K.wf_status)===0&&s.jsx(j,{variant:"secondary",children:e==null?void 0:e.P})]}),s.jsx(n,{children:s.jsx(vs,{to:`/grievance/citizen/complaint-details?complaintRefNo=${(W=(U=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:U.data)==null?void 0:W.complaintRefNo}&complaintId=${(J=(Z=(Y=a==null?void 0:a.data)==null?void 0:Y.data)==null?void 0:Z.data)==null?void 0:J._id}`,children:s.jsx(Cs,{className:"bg-primary",children:e==null?void 0:e.VIEW})})})]})})]})})]})})]})}function Gs(){const{currentLanguage:d}=u();return s.jsxs("div",{className:"grid sm:grid-cols-4 grid-cols-1",children:[s.jsxs("div",{className:"col-span-4 md:col-span-1 flex items-center flex-col md:px-10 mt-10 space-y-4 hidden sm:block",children:[s.jsx(ss,{className:"text-xl text-primary font-bold",children:d==null?void 0:d.TRACK_GR}),s.jsx(Ss,{src:"/images/complain_boy.png",className:"w-40"}),s.jsx(N,{className:"text-center",children:d==null?void 0:d.FF_FB}),s.jsx(N,{className:"text-center",children:d==null?void 0:d.YF_FB})]}),s.jsx("div",{className:"col-span-4 md:col-span-3 p-2 sm:p-10 bg-gray-50 h-screen",children:s.jsx(Bs,{})})]})}export{Gs as default};
