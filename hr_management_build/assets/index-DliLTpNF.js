import{r as C,l as as,j as e,h as G,_ as U,m as B,n as ge,B as I,e as Ee,o as ts,p as ye,q as rs}from"./index-CzH94V9M.js";import{b as ls,g as ns,d as is,U as Z,C as ds,c as cs,e as os,f as ms,h as xs,i as ps,j as hs,k as us,P as gs}from"./index-C8L4Yc_u.js";import{c as be,d as _e,b as N,e as We,a as je,o as fe,f as bs,g as He}from"./yup-B_iiO-bo.js";import{F as Ne,a as X,R as E,B as pe}from"./label-D2LCjk_O.js";import"./input-BNAtp2MH.js";import{u as ee,c as js,b as le,a as fs}from"./useCustomQuery-Dhej8C9V.js";import{B as Ye}from"./briefcase-DNo2RxrE.js";import{H as he,P as Se,M as Ze,R as Ns,S as ve}from"./RHFUploadFiled-BPfReYO2.js";import{B as Be}from"./building-2-Dj5I2QrY.js";import{C as Q}from"./calendar-C6DUOQUF.js";import{U as te}from"./users-DaVtBTXR.js";import{H as De,M as K,C as ae,u as ys,D as Ce,a as Pe,b as Me,c as ke,d as Fe,e as $e,f as Te,g as qe,F as vs,h as ws,E as _s,i as Ie,R as ze,W as Ss,U as As,j as Ge,k as Je}from"./usePdfValidator-DFKCVUuG.js";import{C as Es}from"./circle-alert-OXdGSmMn.js";import{H as Ke,C as re}from"./house-CKwlS0Tw.js";import{C as Cs}from"./check-BbSVThG-.js";import{S as Ue,d as es,C as oe,c as ue,h as Ae,a as Ps,e as Ms}from"./Spinner--xYnpvrC.js";import{P as Ve}from"./plus-BDPdqTqz.js";import{F as me}from"./file-text-COlAEbji.js";import{E as ks}from"./eye-SmaVk4B4.js";import{T as ss}from"./trash-2-CC_MdCV2.js";import{C as xe,S as Fs}from"./search-BzkXz1M5.js";import{C as we}from"./clock-jNjEhJVW.js";import{D as Xe}from"./dollar-sign-DqR213Ye.js";const $s=be().shape({emp_type_id:_e().integer().required().label("Employee Type"),emp_code:N().max(50).required().label("Employee Code"),emp_name:N().max(100).required().label("Employee Name"),gender:N().oneOf(["male","female","other"]).required().label("Gender"),dob:We().required().label("Date of Birth"),marital_status:N().oneOf(["single","married","divorced","widowed"]).required().label("Marital Status"),religion:N().max(50).required().label("Religion"),emp_blood_group:N().oneOf(["A+","A-","B+","B-","O+","O-","AB+","AB-"]).required().label("Blood Group"),emp_health_status:N().max(50).required().label("Health Status").required(),contact_no:N().max(10).required().label("Contact Number").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),emergency_contact_no:N().max(10).required().label("Emergency Contact").matches(/^[0-9]{10}$/,"Contact Number must be 10 digits"),email:N().email().max(100).required().label("Email"),emp_present_address:N().required().label("Present Address"),present_post_office:N().max(100).required().label("Present Post Office"),present_pin_code:N().max(6).required().label("Present PIN Code"),present_police_station:N().max(100).optional().label("Present Police Station"),present_state:N().max(100).required().label("Present State"),present_district:N().max(100).required().label("Present District"),emp_permanent_address:N().required().label("Permanent Address"),permanent_post_office:N().max(100).required().label("Permanent Post Office"),permanent_pin_code:N().max(6).required().label("Permanent PIN Code"),permanent_police_station:N().max(100).optional().label("Permanent Police Station"),permanent_state:N().max(100).required().label("Permanent State"),permanent_district:N().max(100).required().label("Permanent District"),aadhaar_no:N().max(12).optional().label("Aadhaar Number"),pan_no:N().max(10).optional().label("PAN Number"),uan_no:N().max(12).optional().label("UAN Number"),esi_no:N().max(17).optional().label("ESI Number"),passport_no:N().max(20).optional().label("Passport Number"),driving_license_no:N().max(20).optional().label("Driving License"),department_id:N().required().label("Department"),department_name:N().label("Department Name").optional(),designation_id:_e().integer().required().label("Designation"),date_of_joining:We().required().label("Date of Joining")});function Ts({id:b,getDataById:c}){var $,O,q,J,ne,ie,de,ce;const j=ls(),[t,i]=C.useState(!1),p=ee({}),S=as(),m=ns(),u=is(),A=C.useMemo(()=>{var H;if(!((H=c.data)!=null&&H.data))return{};const{ulb_id:M,status:F,created_at:R,updated_at:x,id:y,emp_image:g,...P}=c.data.data,T={};return Object.entries(P).forEach(([D,z])=>{T[D]=z==null?void 0:String(z)}),T},[c.data]),d=je({defaultValues:A,resolver:fe($s)}),o=async M=>{var F,R,x,y;try{const g=await p.mutateAsync({api:`${(F=G)==null?void 0:F.updateEmployeeById}`,data:{id:b,...M}});(R=g.data)!=null&&R.success?(U.success((x=g==null?void 0:g.data)==null?void 0:x.message),S("/hrms/dashboard/employee-list")):U.error(((y=g.data)==null?void 0:y.message)||"Employee not created successfully")}catch(g){console.log(g),U.error("An error occurred while creating employee")}},s=M=>{if(i(M),M){const F=d.getValues("emp_present_address"),R=d.getValues("present_post_office"),x=d.getValues("present_pin_code"),y=d.getValues("present_police_station"),g=d.getValues("present_state"),P=d.getValues("present_district");d.setValue("emp_permanent_address",F),d.setValue("permanent_post_office",R),d.setValue("permanent_pin_code",x),d.setValue("permanent_police_station",y),d.setValue("permanent_state",g),d.setValue("permanent_district",P)}else d.setValue("emp_permanent_address",""),d.setValue("permanent_post_office",""),d.setValue("permanent_pin_code",""),d.setValue("permanent_police_station",""),d.setValue("permanent_state",""),d.setValue("permanent_district","")};C.useEffect(()=>{c.data&&d.reset(A)},[c.data,d,A]);const r=[{label:"Fit",value:"fit"},{label:"Unfit",value:"unfit"},{label:"Disabled",value:"disabled"}],n=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],k=[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Divorced",value:"divorced"},{label:"Widowed",value:"widowed"}],w=[{label:"A+",value:"A+"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B-",value:"B-"},{label:"O+",value:"O+"},{label:"O-",value:"O-"},{label:"AB+",value:"AB+"},{label:"AB-",value:"AB-"}],a="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",v=129,l=79,h=1,f=async()=>{ds("Are you sure you want to approve this employee?","Please confirm",async()=>{var M,F,R,x,y;try{const g=((F=(M=c.data)==null?void 0:M.data)==null?void 0:F.emp_image)||a,P=await V(g),T=Y(P),H=await p.mutateAsync({api:(R=B)==null?void 0:R.createUserAuth,data:T});if(!((x=H.data)!=null&&x.status))throw new Error(((y=H.data)==null?void 0:y.message)||"Employee approval failed");const D=H.data.data.id;await Promise.all([_(D),L(D)]),await W(D),U.success("Employee approved successfully"),S("/hrms/dashboard/employee-list")}catch(g){console.error("Employee approval error:",g);const P=g instanceof Error?g.message:"An error occurred while approving employee";U.error(P)}})},V=async M=>{const R=await(await fetch(M)).blob();return new File([R],"employee_image.jpg",{type:R.type})},Y=M=>{var x;const F=new FormData,R=(x=c.data)==null?void 0:x.data;return F.append("name",d.getValues("emp_name")),F.append("mobile",d.getValues("contact_no")),F.append("altMobile",d.getValues("emergency_contact_no")),F.append("email",d.getValues("email")),F.append("address",d.getValues("emp_present_address")),F.append("userType","Employee"),F.append("ulbId",(R==null?void 0:R.ulb_id)||""),F.append("photo",M),F},_=async M=>{var R,x;const F=await p.mutateAsync({api:(R=B)==null?void 0:R.createMenuRoleAuth,data:{userId:M,permissionStatus:!0,menuRoleId:v}});if(!((x=F.data)!=null&&x.status))throw new Error("Failed to create menu role permission");return F},L=async M=>{var F;return p.mutateAsync({api:(F=B)==null?void 0:F.createWorkFlowRoleAuth,data:{userId:M,permissionStatus:!0,wfRoleId:l}})},W=async M=>{var R,x,y,g;const F=await p.mutateAsync({api:(R=G)==null?void 0:R.approveEmployee,data:{id:String((y=(x=c.data)==null?void 0:x.data)==null?void 0:y.id),authorization_id:String(M),approval_status:h}});if(!((g=F.data)!=null&&g.success))throw new Error("Failed to update employee approval status");return F};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-8 rounded-lg border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-md",children:e.jsx(Z,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comprehensive Employee Registration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Please fill in all required fields marked with asterisk (*)"})]})]})}),e.jsxs(Ne,{methods:d,onSubmit:d.handleSubmit(o),children:[e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Ye,{className:"h-5 w-5 text-blue-600"}),"Employment Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Department, designation and job information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Employee Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(X,{name:"emp_type_id",data:((O=($=m==null?void 0:m.data)==null?void 0:$.data)==null?void 0:O.map(M=>({label:String(M.emp_type),value:String(M.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),"Employee Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(E,{name:"emp_code",placeholder:"Enter Employee Code",disabled:!0,inputValidation:["removeSpecialCharacterExceptSpace"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Be,{className:"h-4 w-4 text-gray-400"}),"Department"]}),e.jsx(X,{name:"department_id",selectedText:"department_name",isSearch:!0,data:(J=(q=j==null?void 0:j.data)==null?void 0:q.data)!=null&&J.length?j.data.data.map(M=>({label:String(M.department_name),value:String(M.id)})):[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-400"}),"Designation"]}),e.jsx(X,{name:"designation_id",isSearch:!0,data:((ie=(ne=u==null?void 0:u.data)==null?void 0:ne.data)==null?void 0:ie.map(M=>({label:String(M.designation_name),value:String(M.id)})))||[]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Date of Joining"]}),e.jsx(E,{name:"date_of_joining",type:"date",placeholder:"Select Joining Date"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-600"}),"Personal Details"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Employee personal information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Z,{className:"h-4 w-4 text-gray-400"}),"Full Name"]}),e.jsx(E,{name:"emp_name",placeholder:"Enter Full Name",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Gender"]}),e.jsx(X,{name:"gender",data:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),"Date of Birth"]}),e.jsx(E,{name:"dob",type:"date",placeholder:"Select Date of Birth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Marital Status"]}),e.jsx(X,{name:"marital_status",data:k})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(te,{className:"h-4 w-4 text-gray-400"}),"Religion"]}),e.jsx(E,{name:"religion",placeholder:"Enter Religion",inputValidation:["removeSpecialCharacterExceptSpace"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(De,{className:"h-4 w-4 text-gray-400"}),"Blood Group"]}),e.jsx(X,{name:"emp_blood_group",data:w})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(De,{className:"h-4 w-4 text-gray-400"}),"Health Status"]}),e.jsx(X,{name:"emp_health_status",data:r})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600"}),"Contact Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Primary and emergency contact details"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Se,{className:"h-4 w-4 text-gray-400"}),"Contact Number"]}),e.jsx(E,{name:"contact_no",placeholder:"Enter 10-digit Mobile Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Es,{className:"h-4 w-4 text-gray-400"}),"Emergency Contact"]}),e.jsx(E,{name:"emergency_contact_no",placeholder:"Enter Emergency Contact Number",inputValidation:["number"],maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ze,{className:"h-4 w-4 text-gray-400"}),"Email Address"]}),e.jsx(E,{disabled:!0,name:"email",type:"email",placeholder:"example@domain.com"})]})]})})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(Ke,{className:"h-5 w-5 text-blue-600"}),"Address Information"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Residential address details"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Present Address"]}),e.jsx(E,{name:"emp_present_address",placeholder:"Enter Present Address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(E,{name:"present_post_office",placeholder:"Enter Post Office"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(E,{name:"present_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(E,{name:"present_police_station",placeholder:"Enter Police Station"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(E,{name:"present_district",placeholder:"Enter District"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(E,{name:"present_state",placeholder:"Enter State"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsx("input",{type:"checkbox",id:"sameAsPresent",checked:t,onChange:M=>s(M.target.checked),className:"h-5 w-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"sameAsPresent",className:"flex cursor-pointer items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(Ke,{className:"h-4 w-4 text-blue-600"}),"Permanent address is same as present address"]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-full space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Permanent Address"]}),e.jsx(E,{name:"emp_permanent_address",placeholder:"Enter Permanent Address",disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Post Office"]}),e.jsx(E,{name:"permanent_post_office",placeholder:"Enter Post Office",disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),"PIN Code"]}),e.jsx(E,{name:"permanent_pin_code",placeholder:"Enter 6-digit PIN Code",inputValidation:["number"],maxLength:6,disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"Police Station"]}),e.jsx(E,{name:"permanent_police_station",placeholder:"Enter Police Station",disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"District"]}),e.jsx(E,{name:"permanent_district",placeholder:"Enter District",disabled:t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(K,{className:"h-4 w-4 text-gray-400"}),"State"]}),e.jsx(E,{name:"permanent_state",placeholder:"Enter State",disabled:t})]})]})})]})]}),e.jsxs("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),"Government IDs & Documents"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Official identification documents"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Aadhaar Number"]}),e.jsx(E,{name:"aadhaar_no",placeholder:"Enter 12-digit Aadhaar",inputValidation:["aadhaar"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"PAN Number"]}),e.jsx(E,{name:"pan_no",placeholder:"Enter PAN Number",inputValidation:["pan"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"UAN Number"]}),e.jsx(E,{name:"uan_no",placeholder:"Enter UAN Number",inputValidation:["UAN"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"ESI Number"]}),e.jsx(E,{name:"esi_no",placeholder:"Enter ESI Number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Passport Number"]}),e.jsx(E,{name:"passport_no",placeholder:"Enter Passport Number",inputValidation:["Passport"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400"}),"Driving License"]}),e.jsx(E,{name:"driving_license_no",placeholder:"Enter Driving License Number",inputValidation:["drivingLicence"]})]})]})})]}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-500",children:"*"})," Indicates required fields"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(pe,{isLoading:d.formState.isSubmitting,type:"submit",className:"flex h-11 items-center gap-2 rounded-lg bg-blue-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-blue-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4"}),"Update Employee"]})}),((ce=(de=c.data)==null?void 0:de.data)==null?void 0:ce.approval_status)==0&&e.jsx(pe,{onClick:f,type:"button",className:"flex h-11 items-center gap-2 rounded-lg bg-green-600 px-8 font-semibold text-white shadow-md transition-all hover:bg-green-700 hover:shadow-lg disabled:opacity-50",children:e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"h-4 w-4"}),"Approve"]})})]})]})})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All information provided will be stored securely and used only for official purposes. Please ensure accuracy of the details before submission."]})})]})}const qs=be().shape({doc_name:N().required("Document Name is required"),doc_type_id:N().required("Document Type is required"),doc_path:bs().required("Document is required").test("fileRequired","Document is required",b=>b instanceof File||typeof b=="string"&&b!==""),description:N().required("Description is required")});function Us({title:b,id:c,edit:j,refetch:t,getDataById:i}){var a,v,l,h,f,V,Y;const{validateFile:p,reset:S}=ys({maxFileSizeMB:5,strictMode:!0,autoValidate:!1}),m=ee({}),u=js({}),A=C.useRef(null),d=cs(),{data:o}=le({api:`${(a=G)==null?void 0:a.updateEmployeeById}/${c}`,key:"getDocumentById",options:{enabled:j}}),s=je({defaultValues:{doc_type_id:((v=o==null?void 0:o.data)==null?void 0:v.doc_type_id)||"",doc_name:((l=o==null?void 0:o.data)==null?void 0:l.doc_name)||"",doc_path:((h=o==null?void 0:o.data)==null?void 0:h.doc_path)||"",description:((f=o==null?void 0:o.data)==null?void 0:f.description)||""},resolver:fe(qs)}),{id:r}=ge(),n=async _=>{var W;const L=(W=_.target.files)==null?void 0:W[0];if(L&&(L==null?void 0:L.type)==="application/pdf"){const $=await p(L);$.isValid?(U.success($.message),S(),s.setValue("doc_path",L)):(U.error($.message),_.target.value="",s.resetField("doc_path"))}else L&&s.setValue("doc_path",L)},k=async _=>{var L,W,$,O;try{const q=new FormData;if(q.append("emp_id",String(r)),q.append("doc_type_id",_.doc_type_id),q.append("doc_name",_.doc_name),q.append("description",_.description),q.append("file",_==null?void 0:_.doc_path),j&&_)console.log("Editing document with data:",_);else{const J=await m.mutateAsync({api:G.uploadEmployeeDocument,data:q});(L=J.data)!=null&&L.success?(U.success((W=J==null?void 0:J.data)==null?void 0:W.message),($=A.current)==null||$.click()):U.error(((O=J.data)==null?void 0:O.message)||"Document not attached successfully"),s.reset({doc_name:"",description:"",doc_path:"",doc_type_id:""})}t()}catch(q){console.log("Submit Error:",q),U.error("An error occurred while processing your request")}};C.useEffect(()=>{var _,L,W,$;j&&o?s.reset({doc_type_id:(_=o==null?void 0:o.data)==null?void 0:_.doc_type_id,doc_name:(L=o==null?void 0:o.data)==null?void 0:L.doc_name,doc_path:(W=o==null?void 0:o.data)==null?void 0:W.doc_path,description:(($=o==null?void 0:o.data)==null?void 0:$.description)??""}):s.reset({doc_type_id:"",doc_name:"",doc_path:"",description:""})},[j,o]),C.useEffect(()=>{var _,L,W,$;(s==null?void 0:s.watch("doc_name"))==="Aadhaar Card"?s.setValue("description",((L=(_=i==null?void 0:i.data)==null?void 0:_.data)==null?void 0:L.aadhaar_no)||""):(s==null?void 0:s.watch("doc_name"))==="Pan Card"?s.setValue("description",(($=(W=i==null?void 0:i.data)==null?void 0:W.data)==null?void 0:$.pan_no)||""):s.setValue("description","")},[s==null?void 0:s.watch("doc_name")]);const w=s.formState.isSubmitting||u.isPending;return e.jsxs(Ce,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(I,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Add New Document"]})}),e.jsx(Me,{className:"sm:max-w-[425px]",children:e.jsxs(Ne,{methods:s,onSubmit:s.handleSubmit(k),children:[e.jsxs(ke,{children:[e.jsx(Fe,{children:b}),e.jsx($e,{})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(X,{label:"Select Document",name:"doc_type_id",selectedText:"doc_name",data:((Y=(V=d==null?void 0:d.data)==null?void 0:V.data)==null?void 0:Y.map(_=>({label:String(_.doc_name),value:String(_.id)})))||[]})}),e.jsx("div",{children:e.jsx(Ns,{label:"Upload Document",name:"doc_path",accept:".pdf,.doc,.docx,.png,.jpg,.jpeg",onChange:n,placeholder:"Upload your document"})}),e.jsx("div",{children:e.jsx(E,{label:`${(s==null?void 0:s.watch("doc_name"))||"Document"} No (Optional)`,name:"description",placeholder:`Enter ${(s==null?void 0:s.watch("doc_name"))||"Document"} No`,inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx(Ue,{})]}),e.jsxs(Te,{className:"mt-5 flex justify-between",children:[e.jsx(qe,{asChild:!0,children:e.jsx(I,{variant:"outline",ref:A,children:"Cancel"})}),e.jsx(pe,{type:"submit",isLoading:w,children:"Save changes"})]})]})})]})}function Vs({id:b,getDataById:c}){var r,n,k,w;const[j,t]=C.useState(""),[i,p]=C.useState(!1),{id:S}=ge(),m=le({api:`${G.getEmployeeDocuments}?emp_id=${S}`,key:"getEmployeeDocumentsId",value:[],options:{enabled:!0}}),u=ee({}),A=async a=>{Ie("Are you sure?","Please confirm",async()=>{var v,l,h;try{const f=await u.mutateAsync({api:`${G.deleteEmployeeDocument}`,data:{id:Ee(a.toString())}});(v=f==null?void 0:f.data)!=null&&v.success?(U.success(((l=f==null?void 0:f.data)==null?void 0:l.message)||"Deleted successfully"),m.refetch()):U.error(((h=f==null?void 0:f.data)==null?void 0:h.message)||"Failed to delete")}catch(f){U.error("Error deleting item"),console.error("Delete Error:",f)}})},d=a=>{var v;return((v=a.split(".").pop())==null?void 0:v.toLowerCase())||""},o=a=>{const v=d(a);return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(v)},s=a=>d(a)==="pdf";return e.jsx("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100/50",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Employee Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all attached documents"})]}),e.jsx(Us,{title:i?"Edit Document":"Attach Document",id:b,edit:i,setEdit:p,refetch:m.refetch,getDataById:c})]}),m.isLoading?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(es,{})}):e.jsx(e.Fragment,{children:((n=(r=m==null?void 0:m.data)==null?void 0:r.data)==null?void 0:n.length)===0?e.jsx(oe,{className:"border-2 border-dashed border-gray-300 bg-white",children:e.jsxs(ue,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-6",children:e.jsx(me,{className:"h-16 w-16 text-gray-400"})}),e.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"No documents found"}),e.jsx("p",{className:"mt-2 text-center text-gray-600",children:j?"Try adjusting your search criteria":"Upload your first document to get started"})]})}):e.jsx("div",{className:"space-y-4",children:(w=(k=m==null?void 0:m.data)==null?void 0:k.data)==null?void 0:w.map(a=>e.jsx(oe,{className:"group overflow-hidden border border-gray-200 bg-white transition-all duration-300 hover:shadow-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50",children:[o(a==null?void 0:a.doc_path)?e.jsx("img",{src:a.doc_path,alt:(a==null?void 0:a.doc_name)||"Document",className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",onError:v=>{var l,h;v.currentTarget.style.display="none",(h=(l=v.currentTarget.parentElement)==null?void 0:l.querySelector(".fallback-icon"))==null||h.classList.remove("hidden")}}):s(a==null?void 0:a.doc_path)?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-red-100 p-4",children:e.jsx(vs,{className:"h-12 w-12 text-red-600"})})}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-blue-100 p-4",children:e.jsx(me,{className:"h-12 w-12 text-blue-600"})})}),e.jsx("div",{className:"fallback-icon flex hidden h-full items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-gray-100 p-4",children:e.jsx(me,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("div",{className:"absolute bottom-1 left-1",children:e.jsx("span",{className:"rounded bg-white/95 px-2 py-0.5 text-xs font-bold uppercase text-gray-700 shadow backdrop-blur-sm",children:d(a==null?void 0:a.doc_path)||"file"})}),e.jsx("div",{className:"absolute inset-0 bg-black/70 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:e.jsxs("div",{className:"flex h-full items-center justify-center gap-2",children:[e.jsx("a",{href:a.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-blue-600 shadow transition-transform hover:scale-105",children:e.jsx(ks,{className:"h-3 w-3"})}),e.jsx("a",{href:a.doc_path,download:!0,className:"flex items-center gap-1 rounded bg-white px-2 py-1 text-xs text-green-600 shadow transition-transform hover:scale-105",children:e.jsx(ws,{className:"h-3 w-3"})})]})})]}),e.jsx("div",{className:"flex flex-1 items-center gap-4 p-4",children:e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate text-lg font-semibold text-gray-900",children:(a==null?void 0:a.doc_name)||"Document"}),e.jsx("p",{className:"mt-1 line-clamp-1 text-sm text-gray-600",children:(a==null?void 0:a.description)||"No description available"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"whitespace-nowrap",children:Ae(a==null?void 0:a.created_at).format("DD MMM YYYY")})]}),e.jsxs("a",{href:a.doc_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700",children:[e.jsx(_s,{className:"h-4 w-4"}),"Open"]}),e.jsx(I,{size:"sm",variant:"ghost",className:"h-9 w-9 rounded-lg p-0 text-red-500 transition-all hover:bg-red-50 hover:text-red-700",onClick:()=>A(a==null?void 0:a.id),children:e.jsx(ss,{className:"h-4 w-4"})})]})]})})})]})},a==null?void 0:a.id))})})]})})}const Ls=be().shape({family_member_name:N().required("Family member name is required"),relationship:N().required("Relationship is required"),dob:N().required("Date of birth is required"),address:N().required("Address is required"),is_dependent:He().default(!1),isNominee:He().default(!1),nominee_percentage:_e().nullable().when("isNominee",{is:!0,then:b=>b.required("Nominee percentage is required when marked as nominee").min(0,"Percentage must be at least 0").max(100,"Percentage cannot exceed 100"),otherwise:b=>b.notRequired()})}),Rs=[{label:"Spouse",value:"Spouse"},{label:"Son",value:"Son"},{label:"Daughter",value:"Daughter"},{label:"Father",value:"Father"},{label:"Mother",value:"Mother"},{label:"Brother",value:"Brother"},{label:"Sister",value:"Sister"},{label:"Other",value:"Other"}];function Os({title:b="Add Family Member",id:c,edit:j,refetch:t,getDataById:i}){var r;const p=ee({}),S=C.useRef(null),{id:m}=ge(),{data:u}=le({api:`${(r=G)==null?void 0:r.getFamilyMemberById}/${c}`,key:"getFamilyMemberById",options:{enabled:j&&!!c}}),A=je({defaultValues:{family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null},resolver:fe(Ls)}),d=A.watch("isNominee"),o=async n=>{var k,w,a,v,l,h,f,V;try{const Y={emp_id:m,family_member_name:n.family_member_name,relationship:n.relationship,dob:n.dob,address:n.address,is_dependent:n.is_dependent||!1,isNominee:n.isNominee||!1,nominee_percentage:n.isNominee?n.nominee_percentage:null};if(j&&c){const _=await p.mutateAsync({api:`${G.updateFamilyMemberById}/${c}`,data:Y});(k=_.data)!=null&&k.success?(U.success(((w=_==null?void 0:_.data)==null?void 0:w.message)||"Family member updated successfully"),(a=S.current)==null||a.click()):U.error(((v=_.data)==null?void 0:v.message)||"Failed to update family member")}else{const _=await p.mutateAsync({api:G.createFamily,data:Y});(l=_.data)!=null&&l.success?(U.success(((h=_==null?void 0:_.data)==null?void 0:h.message)||"Family member added successfully"),(f=S.current)==null||f.click()):U.error(((V=_.data)==null?void 0:V.message)||"Failed to add family member")}A.reset(),t==null||t()}catch(Y){console.error("Submit Error:",Y),U.error("An error occurred while processing your request")}};C.useEffect(()=>{var n,k,w,a,v,l,h;j&&u?A.reset({family_member_name:((n=u==null?void 0:u.data)==null?void 0:n.family_member_name)||"",relationship:((k=u==null?void 0:u.data)==null?void 0:k.relationship)||"",dob:((w=u==null?void 0:u.data)==null?void 0:w.dob)||"",address:((a=u==null?void 0:u.data)==null?void 0:a.address)||"",is_dependent:((v=u==null?void 0:u.data)==null?void 0:v.is_dependent)||!1,isNominee:((l=u==null?void 0:u.data)==null?void 0:l.isNominee)||!1,nominee_percentage:((h=u==null?void 0:u.data)==null?void 0:h.nominee_percentage)||null}):A.reset({family_member_name:"",relationship:"",dob:"",address:"",is_dependent:!1,isNominee:!1,nominee_percentage:null})},[j,u]);const s=A.formState.isSubmitting||p.isPending;return e.jsxs(Ce,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(I,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Add Family Member"]})}),e.jsx(Me,{className:"sm:max-w-[500px]",children:e.jsxs(Ne,{methods:A,onSubmit:A.handleSubmit(o),children:[e.jsxs(ke,{children:[e.jsx(Fe,{children:b}),e.jsx($e,{children:j?"Update family member information":"Add a new family member"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(E,{label:"Family Member Name",name:"family_member_name",placeholder:"Enter family member name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsx("div",{children:e.jsx(X,{label:"Relationship",name:"relationship",selectedText:"relationship",data:Rs})}),e.jsx("div",{children:e.jsx(E,{label:"Date of Birth",name:"dob",type:"date",placeholder:"Select date of birth"})}),e.jsx("div",{children:e.jsx(E,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(Ue,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ze,{name:"is_dependent",label:"Mark as Dependent"}),e.jsx(ze,{name:"isNominee",label:"Mark as Nominee"}),d&&e.jsx("div",{className:"ml-6",children:e.jsx(E,{label:"Nominee Percentage",name:"nominee_percentage",placeholder:"Enter percentage (0-100)",inputValidation:["number"]})})]})]}),e.jsxs(Te,{className:"mt-5 flex justify-between",children:[e.jsx(qe,{asChild:!0,children:e.jsx(I,{variant:"outline",ref:S,children:"Cancel"})}),e.jsx(pe,{type:"submit",isLoading:s,children:j?"Update":"Save"})]})]})})]})}function Ws({id:b,getDataById:c}){var u,A,d,o;C.useState("");const[j,t]=C.useState(!1),i=le({api:`${G.getAllFamilyDetail}?emp_id=${b}`,key:"getEmployeeFamilyDetailsId",value:[b],options:{enabled:!0}}),p=ee({}),S=async s=>{Ie("Are you sure?","Please confirm",async()=>{var r,n,k;try{const w=await p.mutateAsync({api:`${G.deleteFamilyMember}`,data:{id:Ee(s.toString())}});(r=w==null?void 0:w.data)!=null&&r.success?(U.success(((n=w==null?void 0:w.data)==null?void 0:n.message)||"Deleted successfully"),i.refetch()):U.error(((k=w==null?void 0:w.data)==null?void 0:k.message)||"Failed to delete")}catch(w){U.error("Error deleting family member"),console.error("Delete Error:",w)}})},m=s=>({Spouse:"bg-purple-100 text-purple-700",Father:"bg-blue-100 text-blue-700",Mother:"bg-pink-100 text-pink-700",Son:"bg-green-100 text-green-700",Daughter:"bg-yellow-100 text-yellow-700",Other:"bg-gray-100 text-gray-700"})[s]||"bg-gray-100 text-gray-700";return e.jsx("main",{className:"min-h-screen bg-gray-50/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:"Employee Family Members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage family member details and nominees"})]}),e.jsx(Os,{title:j?"Edit Family Member":"Add Family Member",id:b,edit:j,setEdit:t,refetch:i.refetch,getDataById:c})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.isLoading?e.jsx(oe,{children:e.jsx(ue,{className:"flex h-32 items-center justify-center",children:e.jsx(es,{})})}):e.jsxs(e.Fragment,{children:[(A=(u=i==null?void 0:i.data)==null?void 0:u.data)==null?void 0:A.map(s=>e.jsxs(oe,{className:"border border-gray-200 transition-all duration-200 hover:shadow-lg",children:[e.jsx(Ps,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx(Ms,{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.family_member_name}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${m(s==null?void 0:s.relationship)}`,children:s==null?void 0:s.relationship})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(I,{size:"sm",variant:"ghost",className:"flex h-7 w-7 items-center p-0 text-red-500 hover:bg-red-50 hover:text-red-700",onClick:()=>S(s==null?void 0:s.id),children:e.jsx(ss,{className:"h-3.5 w-3.5"})})})]})}),e.jsxs(ue,{className:"space-y-4 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Date of Birth:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Ae(s==null?void 0:s.dob).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"rounded-lg border bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Address:"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s==null?void 0:s.address})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:[s!=null&&s.is_dependent?e.jsx(re,{className:"h-4 w-4 text-green-500"}):e.jsx(xe,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dependent"})]}),e.jsx("div",{className:"flex items-center gap-2 rounded-lg border bg-white px-3 py-2",children:s!=null&&s.is_nominee?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Nominee (",s==null?void 0:s.nominee_percentage,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Not a Nominee"})]})})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Q,{className:"h-3 w-3"}),e.jsxs("span",{children:["Added on"," ",Ae(s==null?void 0:s.created_at).format("DD-MM-YYYY")]})]})})]})]},s==null?void 0:s.id)),((o=(d=i==null?void 0:i.data)==null?void 0:d.data)==null?void 0:o.length)===0&&e.jsx(oe,{className:"py-12 text-center",children:e.jsxs(ue,{children:[e.jsx(te,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"No family members found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Add family member details to get started"}),e.jsx(I,{className:"bg-blue-600 hover:bg-blue-700",children:"Add First Family Member"})]})})]})})]})})}const Hs=be().shape({name:N().required("Name is required"),mobile:N().required("Mobile is required"),altMobile:N().required("Alternate Mobile is required"),email:N().email("Invalid email").required("Email is required"),address:N().required("Address is required"),userType:N().required("User Type is required"),module_name:N().optional()});function Qe({title:b="Add New User",edit:c,moduleAccessRefetch:j,getDataById:t,userData:i}){var q,J,ne,ie,de,ce,M,F,R;const p=os(),S=ee({}),m=C.useRef(null),u=ms();ts();const A=((ne=(J=(q=t==null?void 0:t.data)==null?void 0:q.data)==null?void 0:J.email)==null?void 0:ne.split("@")[0])||"",d=((ie=localStorage.getItem("ulbName"))==null?void 0:ie.split(" ")[0])||"",o=C.useMemo(()=>{var x,y,g,P,T,H,D,z,se,Le,Re,Oe;return c?{name:(i==null?void 0:i.name)||"",mobile:(i==null?void 0:i.mobile)||"",altMobile:(i==null?void 0:i.alternateMobile)||"",email:(i==null?void 0:i.email)||"",address:(i==null?void 0:i.address)||"",userType:(i==null?void 0:i.user_type)||""}:{name:((y=(x=t==null?void 0:t.data)==null?void 0:x.data)==null?void 0:y.emp_name)||"",mobile:((P=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:P.contact_no)||"",altMobile:((H=(T=t==null?void 0:t.data)==null?void 0:T.data)==null?void 0:H.emergency_contact_no)||((z=(D=t==null?void 0:t.data)==null?void 0:D.data)==null?void 0:z.contact_no)||"",email:"",address:((Le=(se=t==null?void 0:t.data)==null?void 0:se.data)==null?void 0:Le.emp_present_address)||((Oe=(Re=t==null?void 0:t.data)==null?void 0:Re.data)==null?void 0:Oe.emp_permanent_address)||"",userType:""}},[t]),s=je({defaultValues:o,resolver:fe(Hs)}),r=((de=s.watch("userType"))==null?void 0:de.replace(/\s+/g,""))||"";C.useEffect(()=>{s.reset(o)},[o,s]),C.useEffect(()=>{s!=null&&s.watch("userType")&&!c&&s.setValue("email",`${A}@${r.toLocaleLowerCase()}.${d.toLocaleLowerCase()}`)},[s,A,r,d]);const n={PTMS:"Public Transport Management System",PTMS_ALL_ULB:"PTMS All Ulb"},k="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3dSEtDvpd9KAn4SdFJVoL0K1lj4Xfc-wVWQ&s",w=async x=>{const y=s.watch("module_name");y===n.PTMS||y===n.PTMS_ALL_ULB?await a(x,y):await v(x)},a=async(x,y)=>{var H,D,z,se;const g=y===n.PTMS?(H=ye)==null?void 0:H.onBoardingConductor:(D=ye)==null?void 0:D.onBoardingConductorNew,P=await L(g||"");if(!((z=P==null?void 0:P.data)!=null&&z.status))return;const T=await l(x);(se=T==null?void 0:T.data)!=null&&se.status&&(await W(String(T.data.data.id),P.data.data.cunique_id||""),$())},v=async x=>{var P,T;const y=await l(x);if(!((P=y==null?void 0:y.data)!=null&&P.status))return;const g=c?"User updated successfully":"User created successfully";U.success(g),j==null||j(),(T=m.current)==null||T.click()},l=async x=>{try{const y=await h(),g=f(x,y);return c?await V(g):await Y(g)}catch(y){throw console.error("Submit Error:",y),y}},h=async()=>{var P,T;const x=((T=(P=t.data)==null?void 0:P.data)==null?void 0:T.emp_image)||k,g=await(await fetch(x)).blob();return new File([g],"employee_image.jpg",{type:g.type})},f=(x,y)=>{var P,T;const g=new FormData;return g.append("name",x.name),g.append("mobile",x.mobile),g.append("altMobile",x.altMobile),g.append("email",x.email),g.append("address",x.address),g.append("userType",x.userType),g.append("ulbId",((T=(P=t.data)==null?void 0:P.data)==null?void 0:T.ulb_id)||""),g.append("photo",y),g.append("id",parseInt(i==null?void 0:i.id)||""),g},V=async x=>await S.mutateAsync({api:B.updateUser,data:x}),Y=async x=>{const y=await S.mutateAsync({api:B.createUserAuth,data:x});return await _(y),y},_=async x=>{var y,g,P,T,H;await S.mutateAsync({api:(y=G)==null?void 0:y.createModuleAccess,data:{emp_id:String((P=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:P.id),module_access_id:String((H=(T=x==null?void 0:x.data)==null?void 0:T.data)==null?void 0:H.id),module_user_type:s.getValues("userType")}})},L=async x=>{var y,g,P,T,H,D;try{return await S.mutateAsync({api:x,data:{firstName:((g=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:g.emp_name)||"",bloodGrp:((T=(P=t==null?void 0:t.data)==null?void 0:P.data)==null?void 0:T.emp_blood_group)||"",mobileNo:s.getValues("mobile"),emailId:s.getValues("email"),adhar_no:(D=(H=t==null?void 0:t.data)==null?void 0:H.data)==null?void 0:D.aadhaar_no}})}catch(z){console.error("PTMS user creation error:",z);const se=z instanceof Error?z.message:"An error occurred while creating PTMS User";throw U.error(se),z}},W=async(x,y)=>{var g;try{return await S.mutateAsync({api:(g=ye)==null?void 0:g.updateUserName,data:{id:Number(x),user_name:y}})}catch(P){console.error("Update User Name error:",P);const T=P instanceof Error?P.message:"An error occurred while updating User Name";throw U.error(T),P}},$=()=>{var x;j==null||j(),U.success("User created successfully"),(x=m.current)==null||x.click()},O=s.formState.isSubmitting||S.isPending;return e.jsxs(Ce,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(I,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 sm:w-auto",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),b]})}),e.jsx(Me,{className:"sm:max-w-[500px]",children:e.jsxs(Ne,{methods:s,onSubmit:s.handleSubmit(w),children:[e.jsxs(ke,{children:[e.jsx(Fe,{children:b}),e.jsx($e,{children:c?"Update user information":"Add a new user to the system"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-x-2 gap-y-4",children:[e.jsx("div",{children:e.jsx(X,{name:"module_name",isSearch:!0,data:((M=(ce=p==null?void 0:p.data)==null?void 0:ce.data)==null?void 0:M.map(x=>({label:String(x.module_name),value:String(x.module_name)})))||[]})}),e.jsx("div",{children:e.jsx(X,{label:"User Type",name:"userType",isSearch:!0,selectedText:"Select user type",data:((R=(F=u==null?void 0:u.data)==null?void 0:F.data)==null?void 0:R.map(x=>({label:String(x),value:String(x)})))||[]})}),e.jsx("div",{children:e.jsx(E,{label:"Name",name:"name",placeholder:"Enter full name",inputValidation:["removeDoubleSpace","removeSpecialCharacterExceptSpace"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(E,{label:"Mobile",name:"mobile",placeholder:"Enter mobile number",inputValidation:["number"]}),e.jsx(E,{label:"Alternate Mobile",name:"altMobile",placeholder:"Enter alternate mobile",inputValidation:["number"]})]}),e.jsx("div",{children:e.jsx(E,{label:"Email",disabled:c,name:"email",type:"email",placeholder:"Enter email address"})}),e.jsx("div",{children:e.jsx(E,{label:"Address",name:"address",placeholder:"Enter address",inputValidation:["removeDoubleSpace"]})}),e.jsx(Ue,{})]}),e.jsxs(Te,{className:"mt-5 flex justify-between",children:[e.jsx(qe,{asChild:!0,children:e.jsx(I,{variant:"outline",ref:m,children:"Cancel"})}),e.jsx(pe,{type:"submit",isLoading:O,children:c?"Update":"Save"})]})]})})]})}function Ys({userId:b}){const c=xs(b),j=ee({}),[t,i]=C.useState([]),[p,S]=C.useState({}),[m,u]=C.useState("");console.log("permittedRoleAuthData",c),C.useEffect(()=>{var n;c!=null&&c.data&&i(((n=c.data)==null?void 0:n.data)||[])},[c]);const A=async(n,k)=>{var w,a;S(v=>({...v,[n]:!0}));try{const v=await j.mutateAsync({api:`${(w=B)==null?void 0:w.createWorkFlowRoleAuth}`,data:{userId:parseInt(b),wfRoleId:n,permissionStatus:!k}});v&&((a=v.data)!=null&&a.status)&&(c.refetch(),i(l=>l.map(h=>h.id===n?{...h,permission_status:!k}:h))),U.success("Permission updated successfully")}catch(v){console.error("Error updating permission:",v)}finally{S(v=>({...v,[n]:!1}))}},d=t.filter(n=>n.role_name.toLowerCase().includes(m.toLowerCase())),o=t.filter(n=>n.permission_status).length,s=t.length,r=t.some(n=>n.permission_status);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Workflow Role Permissions"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[o," of ",s," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:n=>u(n.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(n=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${n.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",n.id]}),n.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:n.role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:n.permission_status,onChange:()=>A(n.id,n.permission_status),disabled:p[n.id]||!n.permission_status&&r,className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${p[n.id]||!n.permission_status&&r?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${n.permission_status?"translate-x-5":"translate-x-0"} ${p[n.id]?"animate-pulse":""}`,children:p[n.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},n.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function Ds({userId:b}){const c=ps(b),j=ee({}),[t,i]=C.useState([]),[p,S]=C.useState({}),[m,u]=C.useState("");C.useEffect(()=>{var r;c!=null&&c.data&&i(((r=c.data)==null?void 0:r.data)||[])},[c]);const A=async(r,n)=>{var k,w;S(a=>({...a,[r]:!0}));try{const a=await j.mutateAsync({api:`${(k=B)==null?void 0:k.createMenuRoleAuth}`,data:{userId:parseInt(b),menuRoleId:r,permissionStatus:!n}});a&&((w=a.data)!=null&&w.status)&&(c.refetch(),i(v=>v.map(l=>l.id===r?{...l,permission_status:!n}:l))),U.success("Permission updated successfully")}catch(a){console.error("Error updating permission:",a)}finally{S(a=>({...a,[r]:!1}))}},d=t.filter(r=>r.menu_role_name.toLowerCase().includes(m.toLowerCase())),o=t.filter(r=>r.permission_status).length,s=t.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Roles"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[o," of ",s," roles enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:m,onChange:r=>u(r.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(r=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${r.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",r.id]}),r.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsx("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:r.menu_role_name})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:r.permission_status,onChange:()=>A(r.id,r.permission_status),disabled:p[r.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${p[r.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${r.permission_status?"translate-x-5":"translate-x-0"} ${p[r.id]?"animate-pulse":""}`,children:p[r.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},r.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No roles found matching "',m,'"']})})]})})}function zs({userId:b}){const c=hs(b),j=ee({}),[t,i]=C.useState([]),[p,S]=C.useState({}),[m,u]=C.useState("");C.useEffect(()=>{var r;c!=null&&c.data&&i(((r=c.data)==null?void 0:r.data)||[])},[c]);const A=async(r,n)=>{var k,w;S(a=>({...a,[r]:!0}));try{const a=await j.mutateAsync({api:`${(k=B)==null?void 0:k.createWardAuth}`,data:{userId:parseInt(b),wardList:[{permissionStatus:!n,wardId:r}]}});a&&((w=a.data)!=null&&w.status)&&(c.refetch(),i(v=>v.map(l=>l.id===r?{...l,permission_status:!n}:l))),U.success("Permission updated successfully")}catch(a){console.error("Error updating permission:",a)}finally{S(a=>({...a,[r]:!1}))}},d=t.filter(r=>r.ward_name.toString().includes(m)),o=t.filter(r=>r.permission_status).length,s=t.length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Permitted Wards"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[o," of ",s," wards enabled"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search wards...",value:m,onChange:r=>u(r.target.value),className:"w-full rounded-lg border border-slate-300 px-4 py-2 pl-10 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(r=>e.jsx("div",{className:`rounded-lg border-2 bg-white p-4 shadow-sm transition-all duration-200 hover:shadow-md ${r.permission_status?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("span",{className:"rounded bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-500",children:["ID: ",r.id]}),r.permission_status&&e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:"Active"})]}),e.jsxs("h3",{className:"text-sm font-semibold leading-tight text-slate-800",children:["Ward ",r.ward_name]})]}),e.jsxs("label",{className:"relative ml-3 inline-flex cursor-pointer items-center",children:[e.jsx("input",{type:"checkbox",checked:r.permission_status,onChange:()=>A(r.id,r.permission_status),disabled:p[r.id],className:"peer sr-only"}),e.jsx("div",{className:`peer h-6 w-11 rounded-full bg-slate-300 transition-all peer-checked:bg-blue-600 peer-focus:ring-4 peer-focus:ring-blue-300 ${p[r.id]?"cursor-not-allowed opacity-50":""}`,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${r.permission_status?"translate-x-5":"translate-x-0"} ${p[r.id]?"animate-pulse":""}`,children:p[r.id]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-blue-600 border-t-transparent"})})})})]})]})},r.id))}),d.length===0&&e.jsx("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:e.jsxs("div",{className:"text-lg text-slate-400",children:['No wards found matching "',m,'"']})})]})})}function Gs({getDataById:b}){var A,d,o,s,r,n,k,w;const[c,j]=C.useState(""),[t,i]=C.useState("workflow"),p=us(Ee(String((d=(A=b==null?void 0:b.data)==null?void 0:A.data)==null?void 0:d.id))),S=fs({api:(o=B)==null?void 0:o.getUsrByIdAuth,config:{id:c},value:[c],options:{enabled:!!c}}),m=(n=(r=(s=S==null?void 0:S.data)==null?void 0:s.data)==null?void 0:r.data)==null?void 0:n[0],u=[{id:"workflow",label:"Workflow Permission",icon:Ss},{id:"permittedRoles",label:" Permitted Roles",icon:As},{id:"ward",label:"Ward Role",icon:Be}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between py-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Module Access Management"})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("div",{children:e.jsxs("select",{value:c,onChange:a=>j(a.target.value),className:`h-9 w-full cursor-pointer rounded-md border-2 border-slate-300 bg-slate-50 px-3 transition-colors
                     duration-200 hover:border-blue-400 focus:border-blue-400 focus:outline-none focus:ring-2
                     focus:ring-blue-500 md:w-52`,children:[e.jsx("option",{value:"",disabled:!0,children:"Select Module Access"}),(w=(k=p==null?void 0:p.data)==null?void 0:k.data)==null?void 0:w.map(a=>e.jsx("option",{value:a.module_access_id,className:"cursor-pointer hover:bg-blue-50",children:a.module_user_type},a.module_access_id))]})}),e.jsx(Qe,{title:"Add User",edit:!1,moduleAccessRefetch:p.refetch,getDataById:b,userData:m})]})]}),m?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx(Qe,{title:"Edit User",edit:!0,moduleAccessRefetch:p.refetch,getDataById:b,userData:m})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(Z,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User ID"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:m.id})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:e.jsx(Z,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Username"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:m.user_name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(Z,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Full Name"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:m.name})]})]}),e.jsxs("div",{className:"group flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4 transition-colors hover:bg-slate-100",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(Ze,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Email"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:m.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-cyan-100",children:e.jsx(Se,{className:"h-5 w-5 text-cyan-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Mobile"}),e.jsx("p",{className:"truncate text-sm font-medium text-slate-800",children:m.mobile})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(ve,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"User Type"}),e.jsx("span",{className:"inline-block rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700",children:m.user_type})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(ve,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Status"}),e.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs font-medium ${m.suspended?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:m.suspended?"Suspended":"Active"})]})]}),m.photo&&m.photo!=="/"&&e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-pink-100",children:e.jsx(Z,{className:"h-5 w-5 text-pink-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500",children:"Photo"}),e.jsx("img",{src:m.photo,alt:"User",className:"mt-1 h-12 w-12 rounded-lg border-2 border-slate-200 object-cover"})]})]})]})]})}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:u.map(a=>{const v=a.icon;return e.jsxs("button",{onClick:()=>i(a.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 text-sm font-medium transition-all ${t===a.id?"border-b-2 border-blue-600 bg-white text-blue-600":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:[e.jsx(v,{className:"h-4 w-4"}),a.label]},a.id)})})}),e.jsxs("div",{className:"p-6",children:[t==="workflow"&&e.jsx(Ys,{userId:c}),t==="permittedRoles"&&e.jsx(Ds,{userId:c}),t==="ward"&&e.jsx(zs,{userId:c})]})]})]}):e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-12 text-center shadow-lg",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-slate-100",children:e.jsx(ve,{className:"h-10 w-10 text-slate-400"})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-slate-800",children:"No Module Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a module access type to view user details"})]})]})})}function Js({id:b,getDataById:c}){var v;const[j,t]=C.useState("calendar"),[i,p]=C.useState(""),S=le({api:`${G.getAllAttendanceByEmpId}?emp_id=${b}`,key:"getAllAttendanceByEmpId",options:{enabled:!0}}),m=((v=S==null?void 0:S.data)==null?void 0:v.data)||[],u=l=>{switch(l){case 1:return{label:"Present",color:"bg-green-50 text-green-700 border-green-200",icon:e.jsx(re,{className:"h-4 w-4"}),iconColor:"text-green-600"};case 2:return{label:"Half Day",color:"bg-blue-50 text-blue-700 border-blue-200",icon:e.jsx(Ge,{className:"h-4 w-4"}),iconColor:"text-blue-600"};case 3:return{label:"Leave",color:"bg-yellow-50 text-yellow-700 border-yellow-200",icon:e.jsx(Q,{className:"h-4 w-4"}),iconColor:"text-yellow-600"};case 4:return{label:"Holiday",color:"bg-purple-50 text-purple-700 border-purple-200",icon:e.jsx(Je,{className:"h-4 w-4"}),iconColor:"text-purple-600"};default:return{label:"Absent",color:"bg-red-50 text-red-700 border-red-200",icon:e.jsx(xe,{className:"h-4 w-4"}),iconColor:"text-red-600"}}},A=l=>new Date(l).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),d=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"--:--",o=C.useMemo(()=>{if(!i.trim())return m;const l=i.toLowerCase();return m.filter(h=>`${h.month} ${h.year}`.toLowerCase().includes(l))},[m,i]),s=o.reduce((l,h)=>(h.attendance_status===1?l.present++:h.attendance_status===2?l.leave++:l.absent++,l.totalHours+=parseInt(h.working_hours||"0"),l.totalDays++,l),{present:0,absent:0,leave:0,totalHours:0,totalDays:0}),r=o.reduce((l,h)=>{const f=`${h.month} ${h.year}`;return l[f]||(l[f]=[]),l[f].push(h),l},{}),n={};o.forEach(l=>{const h=`${l.month} ${l.year}`;n[h]||(n[h]={});const f=new Date(l.date).getDate().toString();n[h][f]=l});const k=(l,h)=>{const f=new Date(`${l} 1, ${h}`).getMonth();return new Date(parseInt(h),f+1,0).getDate()},w=(l,h)=>{const f=new Date(`${l} 1, ${h}`).getMonth();return new Date(parseInt(h),f,1).getDay()},a=C.useMemo(()=>{const l=new Set;return m.forEach(h=>{l.add(`${h.month} ${h.year}`)}),Array.from(l).sort((h,f)=>{const[V,Y]=h.split(" "),[_,L]=f.split(" "),W=new Date(`${V} 1, ${Y}`);return new Date(`${_} 1, ${L}`).getTime()-W.getTime()})},[m]);return e.jsxs("div",{className:"mx-auto min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between ",children:[e.jsx("div",{children:e.jsx("h1",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Attendance Records"})}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by month (e.g., December 2024)",value:i,onChange:l=>p(l.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),i&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(xe,{className:"h-4 w-4"})})]})]}),i&&a.filter(l=>l.toLowerCase().includes(i.toLowerCase())).length>0&&e.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 bg-white shadow-sm",children:a.filter(l=>l.toLowerCase().includes(i.toLowerCase())).slice(0,5).map(l=>e.jsx("button",{onClick:()=>p(l),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50",children:l},l))})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[e.jsx("div",{className:"rounded-lg border-l-4 border-green-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Present"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.present})]}),e.jsx(re,{className:"h-10 w-10 text-green-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-red-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.absent})]}),e.jsx(xe,{className:"h-10 w-10 text-red-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Leave"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.leave})]}),e.jsx(Ge,{className:"h-10 w-10 text-blue-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-purple-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Hours"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalHours})]}),e.jsx(we,{className:"h-10 w-10 text-purple-500"})]})}),e.jsx("div",{className:"rounded-lg border-l-4 border-indigo-500 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:s.totalDays})]}),e.jsx(Q,{className:"h-10 w-10 text-indigo-500"})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>t("calendar"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${j==="calendar"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Je,{className:"h-4 w-4"}),"Calendar View"]}),e.jsxs("button",{onClick:()=>t("list"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors ${j==="list"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(rs,{className:"h-4 w-4"}),"List View"]})]})}),j==="calendar"&&e.jsx(e.Fragment,{children:Object.entries(n).map(([l,h])=>{const[f,V]=l.split(" "),Y=k(f,V),_=w(f,V),L=Array.from({length:Y},($,O)=>O+1),W=Array.from({length:_},($,O)=>O);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l})]}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>e.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-600",children:$},$)),W.map($=>e.jsx("div",{className:"p-2"},`empty-${$}`)),L.map($=>{const O=h[$.toString()],q=O?u(O.attendance_status):null;return e.jsxs("div",{className:`min-h-20 rounded-lg border-2 p-2 transition-all ${O?q==null?void 0:q.color:"border-gray-200 bg-gray-50"} ${O?"hover:shadow-md":""}`,children:[e.jsx("div",{className:"mb-1 text-sm font-semibold text-gray-700",children:$}),O&&q&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:q==null?void 0:q.iconColor,children:q==null?void 0:q.icon}),e.jsx("span",{className:"text-xs font-medium",children:q==null?void 0:q.label})]}),O.attendance_status===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["In: ",d(O.emp_in_time)]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Out: ",d(O.emp_out_time)]}),e.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[O.working_hours,"h"]})]})]})]},$)})]})})]},l)})}),j==="list"&&e.jsx(e.Fragment,{children:Object.entries(r).map(([l,h])=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l})]}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check In"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Check Out"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-600",children:"Hours"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(f=>{const V=u(f.attendance_status);return e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A(f.date)})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-3 py-1 text-xs font-medium ${V.color}`,children:[e.jsx("span",{className:V==null?void 0:V.iconColor,children:V==null?void 0:V.icon}),V==null?void 0:V.label]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(we,{className:"h-4 w-4 text-gray-400"}),d(f.emp_in_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-900",children:[e.jsx(we,{className:"h-4 w-4 text-gray-400"}),d(f.emp_out_time)]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[f.working_hours||"0","h"]})})]},f.id)})})]})})})]},l))}),o.length===0&&e.jsxs("div",{className:"rounded-lg bg-white p-12 text-center shadow-sm",children:[e.jsx(Q,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg text-gray-500",children:i?"No attendance records found for the search term":"No attendance records found"}),i&&e.jsx("button",{onClick:()=>p(""),className:"mt-4 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Clear Search"})]})]})}const ba=()=>{var S,m,u,A,d;const[b,c]=C.useState(()=>localStorage.getItem("employeeActiveTab")||"basic"),{id:j}=ge();C.useEffect(()=>{localStorage.setItem("employeeActiveTab",b)},[b]);const t={basicSalary:"45,000",hra:"18,000",da:"13,500",grossSalary:"76,500",pf:"5,400",tax:"7,650",netSalary:"63,450"},i=[{id:"basic",label:"Basic Details",icon:Z},{id:"document",label:"Attached Documents",icon:me},{id:"family",label:"Family Details",icon:te},{id:"salary",label:"Salary Details",icon:Xe},{id:"attendance",label:"Attendance",icon:Q},{id:"moduleAccess",label:"Module Access",icon:re}],p=le({api:`${(S=G)==null?void 0:S.getEmployeeById}?id=${j}`,key:"getEmployeeByIddsadasdasdasd",value:[j],options:{enabled:!!j}});return e.jsx(gs,{title:"Employee Management",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100",children:e.jsx("div",{className:" py-4",children:e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white",children:e.jsx(Z,{size:32,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:(u=(m=p==null?void 0:p.data)==null?void 0:m.data)==null?void 0:u.emp_name}),e.jsxs("p",{className:"text-blue-100",children:["ID: ",(d=(A=p==null?void 0:p.data)==null?void 0:A.data)==null?void 0:d.emp_code]})]})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex overflow-x-auto",children:i.map(o=>{const s=o.icon;return e.jsxs("button",{onClick:()=>c(o.id),className:`flex items-center gap-2 whitespace-nowrap px-6 py-4 font-semibold transition-all ${b===o.id?"border-b-4 border-blue-700 bg-white text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"}`,children:[e.jsx(s,{size:20}),o.label]},o.id)})})}),e.jsxs("div",{className:"p-8",children:[b==="basic"&&e.jsx(Ts,{id:j,getDataById:p}),b==="document"&&e.jsx(Vs,{id:j,getDataById:p}),b==="family"&&e.jsx(Ws,{id:j,getDataById:p}),b==="salary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx(Xe,{className:"text-blue-600",size:28}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Breakdown"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border-2 border-green-200 bg-green-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-green-800",children:[e.jsx(re,{size:24}),"Earnings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Basic Salary"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t.basicSalary})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"House Rent Allowance (HRA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t.hra})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-green-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Dearness Allowance (DA)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t.da})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-green-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-green-900",children:"Gross Salary"}),e.jsx("span",{className:"text-xl font-bold text-green-900",children:t.grossSalary})]})]})]}),e.jsxs("div",{className:"rounded-lg border-2 border-red-200 bg-red-50 p-6",children:[e.jsxs("h4",{className:"mb-4 flex items-center gap-2 text-xl font-semibold text-red-800",children:[e.jsx(me,{size:24}),"Deductions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Provident Fund (PF)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t.pf})]}),e.jsxs("div",{className:"flex items-center justify-between border-b border-red-200 py-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Income Tax (TDS)"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t.tax})]}),e.jsx("div",{className:"py-3"}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg bg-blue-100 px-3 py-3",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"Net Salary"}),e.jsx("span",{className:"text-xl font-bold text-blue-900",children:t.netSalary})]})]})]})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-yellow-300 bg-yellow-50 p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:"Note:"})," Salary details shown are for the current month. For historical records, please contact the Accounts Department."]})})]}),b==="attendance"&&e.jsx(Js,{id:j,getDataById:p}),b==="moduleAccess"&&e.jsx(Gs,{getDataById:p})]})]})})})})};export{ba as default};
