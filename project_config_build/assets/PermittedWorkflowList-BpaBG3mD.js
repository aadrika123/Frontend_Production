import{r as e,j as s,ae as t,aa as r,a7 as l,a6 as a,W as d,Y as i,J as n,z as o,a2 as c,ah as x,aG as m,an as u,H as g}from"./vendor-C4evAtTJ.js";import{C as h,a as f}from"./card-EDwaVfSs.js";import{u as v,a as p}from"./useCustomQuery-Biqbx2br.js";import{B as j,c as b,m as N}from"./index-BhvcAUpD.js";import{g as w}from"./services-Bn_cfjy0.js";import{S as y}from"./Spinner-DGUbUInj.js";import{S as k}from"./switch-BHVeU7NL.js";function C(c){var x,m,u;const[g,C]=e.useState(""),[_,A]=e.useState("all"),S=e.useRef(null),L=v({}),R=p({api:null==(x=N)?void 0:x.userPermittedRoles,key:"userPermittedRoles",config:{userId:null==c?void 0:c.id},options:{enabled:!0}});e.useEffect(()=>{const e=e=>{var s;!e.altKey||"s"!==e.key&&"S"!==e.key||(e.preventDefault(),e.stopPropagation(),null==(s=S.current)||s.focus())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[]);const P=(null==(u=null==(m=null==R?void 0:R.data)?void 0:m.data)?void 0:u.filter(e=>e.menu_role_name.toLowerCase().includes(g.toLowerCase())))||[],I=P.filter(e=>"active"===_?!0===e.permission_status:"inactive"!==_||!1===e.permission_status),z=P.filter(e=>e.permission_status).length,F=P.filter(e=>!e.permission_status).length;return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-600/10 text-blue-600",children:s.jsx(t,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Role Permissions"}),s.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Manage menu access roles with quick toggle"})]})]}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border bg-muted/30 p-1",children:[s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("all"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","all"===_?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(r,{className:"h-3 w-3"}),"All (",P.length,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("active"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","active"===_?"bg-green-600 text-white shadow-sm hover:bg-green-600":"text-muted-foreground hover:text-foreground"),children:[s.jsx(l,{className:"h-3 w-3"}),"Active (",z,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("inactive"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","inactive"===_?"bg-muted text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(a,{className:"h-3 w-3"}),"Inactive (",F,")"]})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(d,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:S,type:"text",placeholder:"Search roles...",value:g,onChange:e=>C(e.target.value),className:"h-10 w-full rounded-xl border border-border bg-background pl-10 pr-20 text-sm outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 sm:w-64"}),s.jsx("div",{className:"absolute right-2.5 hidden items-center gap-1 sm:flex",children:s.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[s.jsx("span",{className:"text-xs",children:"Alt"}),"S"]})})]})]})]}),R.isLoading?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(y,{}),s.jsx("p",{className:"mt-4 text-xs font-medium text-muted-foreground",children:"Loading permissions..."})]})}):s.jsx(s.Fragment,{children:0===I.length?s.jsx(h,{className:"overflow-hidden rounded-2xl border bg-card shadow-sm",children:s.jsx(f,{className:"p-12",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-muted/50",children:s.jsx(t,{className:"h-8 w-8 text-muted-foreground/30"})}),s.jsx("h4",{className:"text-sm font-bold text-foreground",children:"No roles found"}),s.jsx("p",{className:"text-[11px] text-muted-foreground",children:g||"all"!==_?"Try adjusting your filters or search criteria":"No roles available for this user"})]})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4",children:s.jsx(i,{mode:"popLayout",children:I.map((e,t)=>{const r=e.permission_status;return s.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,delay:.02*t},children:s.jsx(h,{className:b("group overflow-hidden rounded-xl border transition-all hover:shadow-md",r?"border-green-500/20 bg-green-500/5":"border-border bg-card hover:border-primary/30"),children:s.jsx(f,{className:"p-4",children:s.jsx("div",{className:"flex flex-col gap-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:b("flex h-10 w-10 items-center justify-center rounded-lg transition-all",r?"bg-green-500/20 text-green-600":"bg-muted text-muted-foreground group-hover:bg-primary/10 group-hover:text-primary"),children:r?s.jsx(l,{className:"h-4 w-4"}):s.jsx(a,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h3",{className:"line-clamp-2 text-sm font-bold text-foreground",children:e.menu_role_name}),s.jsx("p",{className:b("mt-1 text-[10px] font-bold uppercase tracking-wider",r?"text-green-600":"text-muted-foreground"),children:r?"Active":"Inactive"})]})]}),s.jsx(k,{checked:r,onCheckedChange:s=>(async(e,s)=>{var t,r,l,a;try{const d={userId:null==c?void 0:c.id,permissionStatus:s,menuRoleId:e},i=await L.mutateAsync({api:null==(t=N)?void 0:t.addMenuRoleUser,data:d});(null==(r=null==i?void 0:i.data)?void 0:r.status)?(o.success((null==(l=null==i?void 0:i.data)?void 0:l.message)||"Permission updated successfully"),R.refetch()):o.error((null==(a=null==i?void 0:i.data)?void 0:a.message)||"Failed to update permission")}catch(d){o.error(w(d))}})(e.id,s),disabled:L.isPending,className:"data-[state=checked]:bg-green-600"})]})})})})},e.id)})})}),s.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border bg-muted/20 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:["Showing: ",I.length," of ",P.length," ","Roles"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Active: ",z]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-muted-foreground"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Inactive: ",F]})]})]})]})]})})]})}function _(t){var g,C,_;const[A,S]=e.useState(""),[L,R]=e.useState("all"),P=e.useRef(null),I=v({}),[z]=c(),F=z.get("ulb_id"),W=p({api:null==(g=N)?void 0:g.fetchWardByUserAndUlb,key:"permittedWardByUser",config:{ulbId:Number(F),userId:null==t?void 0:t.id},options:{enabled:!0}});e.useEffect(()=>{const e=e=>{var s;!e.altKey||"s"!==e.key&&"S"!==e.key||(e.preventDefault(),e.stopPropagation(),null==(s=P.current)||s.focus())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[]);const E=(null==(_=null==(C=null==W?void 0:W.data)?void 0:C.data)?void 0:_.filter(e=>{var s;return(null==(s=null==e?void 0:e.ward_name)?void 0:s.toString().toLowerCase().includes(A.toLowerCase()))||""==A}))||[],U=E.filter(e=>"active"===L?1===e.status:"inactive"!==L||0===e.status),B=E.filter(e=>1===e.status).length,D=E.filter(e=>0===e.status).length,T=async e=>{try{const s=E.filter(s=>s.status!==(e?1:0));if(0===s.length)return void o(`All matching wards are already ${e?"active":"inactive"}.`);const r=o.loading(`${e?"Activating":"Deactivating"} ${s.length} wards...`);await Promise.all(s.map(e=>{var s;return I.mutateAsync({api:null==(s=N)?void 0:s.toggleWardByUserPermission,data:{user_id:null==t?void 0:t.id,ward_name:null==e?void 0:e.ward_name,ulb_id:Number(F)}})})),o.dismiss(r),o.success((e?"Activated":"Deactivated")+" all wards successfully"),W.refetch()}catch(s){o.error(w(s))}};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-600/10 text-amber-600",children:s.jsx(x,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Ward Permissions"}),s.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Manage geographical ward access with quick toggle"})]})]}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(j,{variant:"outline",size:"sm",className:"gap-2 border-emerald-600/20 bg-emerald-600/10 text-emerald-600 hover:bg-emerald-600 hover:text-white",onClick:()=>T(!0),disabled:I.isPending,children:[s.jsx(m,{className:"h-3 w-3"}),"Select All"]}),s.jsxs(j,{variant:"outline",size:"sm",className:"gap-2 border-red-600/20 bg-red-600/10 text-red-600 hover:bg-red-600 hover:text-white",onClick:()=>T(!1),disabled:I.isPending,children:[s.jsx(u,{className:"h-3 w-3"}),"Remove All"]})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border bg-muted/30 p-1",children:[s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>R("all"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","all"===L?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(r,{className:"h-3 w-3"}),"All (",E.length,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>R("active"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","active"===L?"bg-green-600 text-white shadow-sm hover:bg-green-600":"text-muted-foreground hover:text-foreground"),children:[s.jsx(l,{className:"h-3 w-3"}),"Active (",B,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>R("inactive"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","inactive"===L?"bg-muted text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(a,{className:"h-3 w-3"}),"Deactivated (",D,")"]})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(d,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:P,type:"text",placeholder:"Search wards...",value:A,onChange:e=>S(e.target.value),className:"h-10 w-full rounded-xl border border-border bg-background pl-10 pr-20 text-sm outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 sm:w-64"}),s.jsx("div",{className:"absolute right-2.5 hidden items-center gap-1 sm:flex",children:s.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[s.jsx("span",{className:"text-xs",children:"Alt"}),"S"]})})]})]})]}),W.isLoading?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(y,{}),s.jsx("p",{className:"mt-4 text-xs font-medium text-muted-foreground",children:"Loading permissions..."})]})}):s.jsx(s.Fragment,{children:0===U.length?s.jsx(h,{className:"overflow-hidden rounded-2xl border bg-card shadow-sm",children:s.jsx(f,{className:"p-12",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-muted/50",children:s.jsx(x,{className:"h-8 w-8 text-muted-foreground/30"})}),s.jsx("h4",{className:"text-sm font-bold text-foreground",children:"No wards found"}),s.jsx("p",{className:"text-[11px] text-muted-foreground",children:A||"all"!==L?"Try adjusting your filters or search criteria":"No wards available for this user"})]})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:s.jsx(i,{mode:"popLayout",children:U.map((e,r)=>{const d=!e.is_suspended,i=0===e.status;return s.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,delay:.02*r},children:s.jsx(h,{className:b("group overflow-hidden rounded-xl border transition-all hover:shadow-md",d?"border-green-500/20 bg-green-500/5":i?"border-red-500/20 bg-red-500/5":"border-border bg-card hover:border-primary/30"),children:s.jsx(f,{className:"p-4",children:s.jsx("div",{className:"flex flex-col gap-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:b("flex h-10 w-10 items-center justify-center rounded-lg transition-all",d?"bg-green-500/20 text-green-600":i?"bg-red-500/20 text-red-600":"bg-muted text-muted-foreground group-hover:bg-primary/10 group-hover:text-primary"),children:d?s.jsx(l,{className:"h-5 w-5"}):s.jsx(a,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h3",{className:"line-clamp-2 text-sm font-bold text-foreground",children:e.ward_name}),s.jsx("p",{className:b("mt-1 text-[10px] font-bold uppercase tracking-wider",d?"text-green-600":i?"text-red-600":"text-muted-foreground"),children:d?"Active":i?"Deactivated":"Inactive"})]})]}),s.jsx(k,{checked:d,onCheckedChange:s=>(async e=>{var s,r,l,a;try{const d={user_id:null==t?void 0:t.id,ward_name:null==e?void 0:e.ward_name,ulb_id:Number(F)},i=await I.mutateAsync({api:null==(s=N)?void 0:s.toggleWardByUserPermission,data:d});(null==(r=null==i?void 0:i.data)?void 0:r.status)?(o.success((null==(l=null==i?void 0:i.data)?void 0:l.message)||"Permission updated successfully"),W.refetch()):o.error((null==(a=null==i?void 0:i.data)?void 0:a.message)||"Failed to update permission")}catch(d){o.error(w(d))}})(e),disabled:I.isPending||i,className:"data-[state=checked]:bg-green-600"})]})})})})},e.id)})})}),s.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border bg-muted/20 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:["Showing: ",U.length," of ",E.length," ","Wards"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Active: ",B]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Deactivated: ",D]})]})]})]})]})})]})}function A(t){var c,x,m;const[u,C]=e.useState(""),[_,A]=e.useState("all"),S=e.useRef(null),L=v({}),R=p({api:null==(c=N)?void 0:c.workFlowRoleByUser,key:"permittedworkFlowRoleByUser",config:{userId:null==t?void 0:t.id},options:{enabled:!0}});e.useEffect(()=>{const e=e=>{var s;!e.altKey||"s"!==e.key&&"S"!==e.key||(e.preventDefault(),e.stopPropagation(),null==(s=S.current)||s.focus())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[]);const P=(null==(m=null==(x=null==R?void 0:R.data)?void 0:x.data)?void 0:m.filter(e=>e.role_name.toLowerCase().includes(u.toLowerCase())))||[],I=P.filter(e=>"active"===_?!0===e.permission_status:"inactive"!==_||!1===e.permission_status),z=P.filter(e=>e.permission_status).length,F=P.filter(e=>!e.permission_status).length,W=async(e,s)=>{var r,l,a,d;try{const i={permissionStatus:s,userId:null==t?void 0:t.id,wfRoleId:e},n=await L.mutateAsync({api:null==(r=N)?void 0:r.AddRemoveWorkFlowRoleByUser,data:i});(null==(l=null==n?void 0:n.data)?void 0:l.status)?(o.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Permission updated successfully"),R.refetch()):o.error((null==(d=null==n?void 0:n.data)?void 0:d.message)||"Failed to update permission")}catch(i){o.error(w(i))}};return s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-violet-600/10 text-violet-600",children:s.jsx(g,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Workflow Roles"}),s.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Assign process and approval roles with quick toggle"})]})]}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border bg-muted/30 p-1",children:[s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("all"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","all"===_?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(r,{className:"h-3 w-3"}),"All (",P.length,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("active"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","active"===_?"bg-violet-600 text-white shadow-sm hover:bg-violet-600":"text-muted-foreground hover:text-foreground"),children:[s.jsx(l,{className:"h-3 w-3"}),"Active (",z,")"]}),s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>A("inactive"),className:b("h-8 gap-2 rounded-lg px-3 text-xs font-bold transition-all","inactive"===_?"bg-muted text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(a,{className:"h-3 w-3"}),"Inactive (",F,")"]})]}),s.jsxs("div",{className:"relative flex items-center",children:[s.jsx(d,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:S,type:"text",placeholder:"Search workflow roles...",value:u,onChange:e=>C(e.target.value),className:"h-10 w-full rounded-xl border border-border bg-background pl-10 pr-20 text-sm outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 sm:w-64"}),s.jsx("div",{className:"absolute right-2.5 hidden items-center gap-1 sm:flex",children:s.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[s.jsx("span",{className:"text-xs",children:"Alt"}),"S"]})})]})]})]}),R.isLoading?s.jsx("div",{className:"flex h-64 items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(y,{}),s.jsx("p",{className:"mt-4 text-xs font-medium text-muted-foreground",children:"Loading permissions..."})]})}):s.jsx(s.Fragment,{children:0===I.length?s.jsx(h,{className:"overflow-hidden rounded-2xl border bg-card shadow-sm",children:s.jsx(f,{className:"p-12",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"mb-3 flex h-16 w-16 items-center justify-center rounded-full bg-muted/50",children:s.jsx(g,{className:"h-8 w-8 text-muted-foreground/30"})}),s.jsx("h4",{className:"text-sm font-bold text-foreground",children:"No workflow roles found"}),s.jsx("p",{className:"text-[11px] text-muted-foreground",children:u||"all"!==_?"Try adjusting your filters or search criteria":"No workflow roles available for this user"})]})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4",children:s.jsx(i,{mode:"popLayout",children:I.map((e,t)=>{const r=e.permission_status;return s.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,delay:.02*t},children:s.jsx(h,{className:b("group overflow-hidden rounded-xl border transition-all hover:shadow-md",r?"border-violet-500/20 bg-violet-500/5":"border-border bg-card hover:border-primary/30"),children:s.jsx(f,{className:"p-4",children:s.jsx("div",{className:"flex flex-col gap-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:b("flex h-10 w-10 items-center justify-center rounded-lg transition-all",r?"bg-violet-500/20 text-violet-600":"bg-muted text-muted-foreground group-hover:bg-primary/10 group-hover:text-primary"),children:r?s.jsx(l,{className:"h-5 w-5"}):s.jsx(a,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h3",{className:"line-clamp-1 text-sm font-bold text-foreground",children:null==e?void 0:e.role_name}),s.jsx("span",{className:b("mt-1 text-[10px] font-bold uppercase tracking-wider",r?"text-violet-600":"text-muted-foreground"),children:r?"Active":"Inactive"})]})]}),s.jsx(k,{checked:r,onCheckedChange:t=>(async(e,t)=>{try{const r=P.find(s=>s.permission_status&&s.id!==e);t&&r?o(l=>s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-bold",children:"Replace Active Workflow Role?"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Only one workflow role can be active at a time. This will deactivate"," ",s.jsx("span",{className:"font-bold text-violet-600",children:r.role_name}),"."]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{o.dismiss(l.id),await W(e,t)},className:"rounded-lg bg-violet-600 px-3 py-1.5 text-xs font-bold text-white hover:bg-violet-700",children:"Replace"}),s.jsx("button",{onClick:()=>o.dismiss(l.id),className:"rounded-lg bg-muted px-3 py-1.5 text-xs font-bold text-foreground hover:bg-muted/80",children:"Cancel"})]})]}),{duration:6e3}):await W(e,t)}catch(r){o.error(w(r))}})(e.id,t),disabled:L.isPending||1===z&&!r,className:"data-[state=checked]:bg-violet-600"})]})})})})},e.id)})})}),s.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border bg-muted/20 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:["Showing: ",I.length," of ",P.length," ","Workflow Roles"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-violet-500"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Active: ",z]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-muted-foreground"}),s.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Inactive: ",F]})]})]})]})]})})]})}export{C as P,_ as a,A as b};
