import{m as e,j as a,J as t,ab as s,a3 as r,ac as l,ad as i,S as d,ae as n,r as o,af as c,ag as x,ah as m,ai as u,Z as h,aj as p,ak as b,al as g,am as j,a4 as f,an as v,ao as N,Y as w,y as k,A as y,z as C,ap as z,aq as _,ar as S,as as A,at as L,X as I,W as M,$ as D,a2 as U,a7 as W,au as $,av as B,aw as O,ax as R,ay as T,az as Z,aA as P,aB as F,a8 as E,aC as q}from"./vendor-BYEve7Lm.js";import{C as V,a as H,c as G,d as J,D as Q,e as X,f as Y,g as K,P as ee}from"./card-CCk4Fcj3.js";import{B as ae,c as te,m as se,d as re,e as le}from"./index-D-WK3WBg.js";import{C as ie}from"./CreateUlbForm-Cp4aLG1U.js";import{a as de,u as ne}from"./useCustomQuery-BqJuBb9h.js";import{T as oe,a as ce,b as xe,c as me}from"./tabs-BynpLJ-P.js";import{c as ue,a as he,d as pe}from"./yup-rnfMwIpx.js";import{T as be,a as ge,b as je,c as fe,d as ve,e as Ne}from"./table-Cm0Oq01X.js";import{I as we}from"./input-rV9H863X.js";import{S as ke}from"./switch-C2b8-GuS.js";import{g as ye}from"./services-Bn_cfjy0.js";import{S as Ce}from"./Spinner-CCa1YHa-.js";import{q as ze,V as _e,r as Se,s as Ae,t as Le,u as Ie,v as Me,w as De,x as Ue,y as We,z as $e,A as Be,O as Oe}from"./ui-qCrIzFQ2.js";import{B as Re}from"./badge-DoJkTzvh.js";import{r as Te}from"./icons-Z8aKJdqm.js";import"./query-CJAX0F5v.js";import"./axios-Dos3PyFQ.js";import"./zustand-Dp6hMumu.js";import"./datetime-picker-CVy54M0Q.js";import"./select-64z5B__J.js";import"./label-DkEWzZ9r.js";import"./index-CQ_yaZx1.js";const Ze=({ulbName:l,ulb_logo:i,progress:d,onBack:n})=>{const o=e();return a.jsxs("div",{className:"relative overflow-hidden bg-slate-900 px-8 py-10 shadow-2xl dark:bg-black rounded-2xl",children:[a.jsx("div",{className:"absolute right-0 top-0 -mr-32 -mt-32 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 -mb-32 -ml-32 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),a.jsx("div",{className:"relative z-10 mx-auto max-w-7xl rounded-2xl",children:a.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-8 md:flex-row md:items-end",children:[a.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex-1",children:[a.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[i?a.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-2xl bg-white p-2 shadow-2xl ring-4 ring-white/10",children:a.jsx("img",{src:i,alt:l,className:"h-full w-full object-contain"})}):a.jsx("div",{className:"rounded-2xl bg-primary/10 p-3 text-primary ring-1 ring-primary/20",children:a.jsx(s,{className:"animate-spin-slow",size:24})}),a.jsx("h1",{className:"text-2xl font-black tracking-tight text-white md:text-3xl",children:l})]}),a.jsxs("div",{className:"mt-8 max-w-md",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Synchronization Status"}),a.jsxs("span",{className:"text-[10px] font-black text-white/90",children:[d,"% Optimal"]})]}),a.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-800 p-[1px]",children:a.jsx(t.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full bg-primary shadow-[0_0_10px_rgba(59,130,246,0.5)]"})})]})]}),a.jsx(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex gap-3",children:a.jsxs(ae,{variant:"outline",onClick:()=>o(-1),className:"border-slate-700 bg-slate-800/50 text-slate-300 backdrop-blur-sm hover:bg-slate-700 hover:text-white",children:[a.jsx(r,{className:"mr-2"}),n?"Switch ULB":"Back"]})})]})})]})},Pe=({data:e})=>{const{basic_information:s,global_master:r}=e,o=[{label:"Municipal Code",value:s.code,icon:l},{label:"Regional Association",value:s.association_with||"N/A",icon:i},{label:"Ward Count",value:r.ward_count.toLocaleString(),icon:d},{label:"Operational Status",value:s.active_status?"active":"inactive",icon:n,isStatus:!0}];return a.jsx("div",{className:"grid grid-cols-1 gap-4 px-8 md:grid-cols-2 lg:grid-cols-4",children:o.map((e,s)=>a.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1*s+.3},children:a.jsx(V,{className:"group overflow-hidden border-none bg-white shadow-xl transition-all duration-300 hover:shadow-2xl dark:bg-slate-900",children:a.jsx(H,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-slate-100 p-3 text-slate-500 transition-all duration-300 group-hover:bg-primary/10 group-hover:text-primary dark:bg-slate-800 dark:text-slate-400",children:a.jsx(e.icon,{size:20})}),a.jsxs("div",{className:"min-h-12 max-h-12",children:[a.jsx("p",{className:"mb-1 text-[10px] font-normal uppercase tracking-widest text-muted-foreground",children:e.label}),e.isStatus?a.jsxs("div",{className:te("inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider","active"===e.value?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-red-500/20 bg-red-500/10 text-red-500"),children:[a.jsx("div",{className:te("h-1.5 w-1.5 animate-pulse rounded-full","active"===e.value?"bg-emerald-500":"bg-red-500")}),e.value]}):a.jsx("p",{className:"text-sm font-black tracking-tight text-slate-800 dark:text-slate-200",children:e.value})]})]})})})},e.label))})},Fe=({data:e})=>{var s;const[r,l]=o.useState(!0),[i,d]=o.useState(!1),[n,k]=o.useState(!1),[y,C]=o.useState(null),z=de({api:null==(s=se)?void 0:s.getAllJuidcoUlbList,key:"ulbLists",options:{enabled:!0}}),_=[{label:"Official Name",value:e.ulb_name,icon:c,fullWidth:!0},{label:"Registry ID",value:e.id,icon:x},{label:"Code",value:e.code,icon:x},{label:"Type",value:e.ulb_type,icon:m},{label:"Regional Category",value:e.category||"N/A",icon:u},{label:"Primary Address",value:e.address,icon:u,fullWidth:!0},{label:"Hindi Title",value:e.hindi_name||"N/A",icon:h,fullWidth:!0},{label:"Incorporation",value:e.incorporation_date?new Date(e.incorporation_date).toLocaleDateString():"N/A",icon:p},{label:"Toll Free Support",value:e.toll_free_no||"N/A",icon:b},{label:"Administrative Web",value:e.current_website||"N/A",icon:g,fullWidth:!0},{label:"Corporate Email",value:e.email||"N/A",icon:j,fullWidth:!0},{label:"Parent Gateway",value:e.parent_website||"N/A",icon:f,fullWidth:!0}];return a.jsxs(a.Fragment,{children:[a.jsxs(V,{className:"mx-8 overflow-hidden border-none bg-white shadow-xl transition-all duration-500 dark:bg-slate-900",children:[a.jsxs(G,{className:"flex cursor-pointer flex-row items-center justify-between border-b border-slate-100 bg-slate-50/50 p-6 transition-colors hover:bg-slate-100 dark:border-slate-800 dark:bg-slate-800/30 dark:hover:bg-slate-800/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-3 text-primary ring-1 ring-primary/20",children:a.jsx(c,{})}),a.jsxs("div",{children:[a.jsx(J,{className:"text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:"Basic Configuration"}),a.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Core identification and contact matrix"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ae,{onClick:()=>(C(e),k(!0),void d(!0)),variant:"outline",size:"sm",className:"h-9 border-slate-200 bg-white px-4 shadow-sm transition-all hover:bg-primary hover:text-white dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[a.jsx(h,{className:"mr-2"}),"Modify"]}),a.jsx("div",{onClick:()=>l(!r),className:"text-slate-400",children:r?a.jsx(v,{}):a.jsx(N,{})})]})]}),a.jsx(w,{children:r&&a.jsx(t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:a.jsx(H,{className:"p-8",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:_.map((e,t)=>a.jsxs("div",{className:te("group flex gap-4 rounded-2xl border border-slate-100 bg-slate-50 p-4 transition-all duration-300 hover:border-primary/20 hover:bg-white hover:shadow-lg dark:border-slate-800 dark:bg-slate-800/20 dark:hover:bg-slate-800",e.fullWidth&&"md:col-span-2"),children:[a.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-white text-slate-400 shadow-sm transition-all group-hover:scale-110 group-hover:text-primary dark:bg-slate-700",children:a.jsx(e.icon,{size:16})}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[10px] font-normal uppercase tracking-widest text-muted-foreground",children:e.label}),a.jsx("p",{className:"text-sm font-bold leading-tight text-slate-800 dark:text-slate-200 ",children:e.value||"N/A"})]})]},`${e.label}-${t}`))})})})})]}),a.jsx(ie,{open:i,setOpen:d,edit:n,setEdit:k,editData:y,title:n?"Update ULB Details":"Add New ULB",refetch:()=>z.refetch()})]})},Ee=ue().shape({id:pe().nullable(),wardNumber:he().required("Ward Number is required").matches(/^\d+$/,"Must be a number")}),qe=({open:e,onOpenChange:t,ulbId:s})=>{const[r,l]=o.useState(null),{data:i,refetch:n,isLoading:c}=de({api:re.api_getUlbWardList,key:`wardList-${s}`,config:{ulbId:s},options:{enabled:e&&!!s}}),x=ne({}),m=ne({}),u=ne({}),{register:p,handleSubmit:b,reset:g,setValue:j,formState:{errors:f,isSubmitting:v}}=k({resolver:y(Ee),defaultValues:{id:null,wardNumber:""}}),N=(null==i?void 0:i.data)||[];return a.jsx(Q,{open:e,onOpenChange:t,children:a.jsxs(X,{className:"max-w-3xl overflow-hidden border-none bg-white p-0 shadow-2xl dark:bg-slate-900",children:[a.jsx(Y,{className:"bg-slate-50 px-6 py-4 dark:bg-slate-800/50",children:a.jsxs(K,{className:"flex items-center gap-3 text-xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-2 text-primary",children:a.jsx(d,{})}),"Ward Management Matrix"]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("form",{onSubmit:b(async e=>{var a,t;try{const r=!!e.id,i=r?re.api_updateUlbWard:re.api_createUlbWard,d=r?{id:e.id,wardNumber:e.wardNumber,ulbId:s}:{ulbId:s,wardNumber:e.wardNumber},o=await(r?m:x).mutateAsync({api:i,data:d});(null==(a=null==o?void 0:o.data)?void 0:a.status)?(C.success(o.data.message||`Ward ${r?"updated":"created"} successfully`),g({id:null,wardNumber:""}),l(null),n()):C.error((null==(t=null==o?void 0:o.data)?void 0:t.message)||"Operation failed")}catch(r){C.error(ye(r))}}),className:"mb-8 flex items-end gap-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4 dark:border-slate-800 dark:bg-slate-800/20",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:r?"Update Ward Identifier":"New Ward Identifier"}),a.jsx(we,{...p("wardNumber"),placeholder:"Enter Ward Number (e.g. 101)",className:"h-11 border-slate-200 bg-white font-bold text-slate-800 transition-all focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"}),f.wardNumber&&a.jsx("p",{className:"text-xs font-bold text-red-500",children:f.wardNumber.message})]}),a.jsxs("div",{className:"flex gap-2",children:[r&&a.jsx(ae,{type:"button",variant:"outline",onClick:()=>{l(null),g({id:null,wardNumber:""})},className:"h-11 px-6",children:"Cancel"}),a.jsx(ae,{type:"submit",disabled:v,className:"h-11 min-w-[120px] bg-primary font-bold shadow-lg shadow-primary/20 hover:bg-primary/90",children:v?a.jsx(Ce,{className:"h-4 w-4 text-white"}):r?"Update":"Create"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto rounded-xl border border-slate-100 bg-white dark:border-slate-800 dark:bg-slate-900",children:a.jsxs(be,{children:[a.jsx(ge,{className:"bg-slate-50 dark:bg-slate-800/50",children:a.jsxs(je,{children:[a.jsx(fe,{className:"font-bold text-slate-500",children:"ID"}),a.jsx(fe,{className:"font-bold text-slate-500",children:"Ward Number"}),a.jsx(fe,{className:"font-bold text-slate-500",children:"Status"}),a.jsx(fe,{className:"text-right font-bold text-slate-500",children:"Actions"})]})}),a.jsx(ve,{children:c?a.jsx(je,{children:a.jsx(Ne,{colSpan:4,className:"h-32 text-center",children:a.jsx(Ce,{className:"mx-auto text-primary"})})}):0===N.length?a.jsx(je,{children:a.jsx(Ne,{colSpan:4,className:"h-32 text-center text-slate-400",children:"No wards found. Create one above."})}):N.map(e=>a.jsxs(je,{className:"group transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[a.jsxs(Ne,{className:"font-mono text-xs font-bold text-slate-400",children:["#",e.id]}),a.jsx(Ne,{className:"font-bold text-slate-700 dark:text-slate-300",children:e.ward_name||e.ward_number||`Ward ${e.id}`}),a.jsx(Ne,{children:a.jsx(ke,{checked:1===e.status||!0===e.status,onCheckedChange:()=>(async(e,a)=>{var t,s;try{const r=a?0:1,l=await u.mutateAsync({api:re.api_deleteUlbWard,data:{id:e,status:r}});(null==(t=null==l?void 0:l.data)?void 0:t.status)?(C.success(`Ward ${r?"activated":"deactivated"} successfully`),n()):C.error((null==(s=null==l?void 0:l.data)?void 0:s.message)||"Status update failed")}catch(r){C.error(ye(r))}})(e.id,1===e.status||!0===e.status),className:"data-[state=checked]:bg-emerald-500"})}),a.jsx(Ne,{className:"text-right",children:a.jsx("div",{className:"flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:a.jsx(ae,{size:"icon",variant:"ghost",onClick:()=>(e=>{l(e.id),j("id",e.id),j("wardNumber",e.ward_name||e.ward_number)})(e),className:"h-8 w-8 text-slate-400 hover:bg-primary/10 hover:text-primary",children:a.jsx(h,{size:14})})})})]},e.id))})]})})]})]})})},Ve=ue().shape({id:pe().nullable(),zone:he().required("Zone Name is required").min(2,"Zone Name must be at least 2 characters")}),He=({open:e,onOpenChange:t,ulbId:s})=>{const[r,l]=o.useState(null),{data:d,refetch:n,isLoading:c}=de({api:re.zone_list_Api,key:`zoneList-${s}`,config:{ulbId:s},options:{enabled:e&&!!s}}),x=ne({}),m=ne({}),u=ne({}),{register:p,handleSubmit:b,reset:g,setValue:j,formState:{errors:f,isSubmitting:v}}=k({resolver:y(Ve),defaultValues:{id:null,zone:""}}),N=(null==d?void 0:d.data)||[];return a.jsx(Q,{open:e,onOpenChange:t,children:a.jsxs(X,{className:"max-w-3xl overflow-hidden border-none bg-white p-0 shadow-2xl dark:bg-slate-900",children:[a.jsx(Y,{className:"bg-slate-50 px-6 py-4 dark:bg-slate-800/50",children:a.jsxs(K,{className:"flex items-center gap-3 text-xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-2 text-primary",children:a.jsx(i,{})}),"Zone Distribution Matrix"]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("form",{onSubmit:b(async e=>{var a,t;try{const r=!!e.id,i=r?re.api_updateZoneApi:re.api_PostZoneApi,d=r?{id:e.id,zone:e.zone,ulbId:s}:{ulbId:s,zone:e.zone},o=await(r?m:x).mutateAsync({api:i,data:d});(null==(a=null==o?void 0:o.data)?void 0:a.status)?(C.success(o.data.message||`Zone ${r?"updated":"created"} successfully`),g({id:null,zone:""}),l(null),n()):C.error((null==(t=null==o?void 0:o.data)?void 0:t.message)||"Operation failed")}catch(r){C.error(ye(r))}}),className:"mb-8 flex items-end gap-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4 dark:border-slate-800 dark:bg-slate-800/20",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:r?"Update Zone Identifier":"New Zone Identifier"}),a.jsx(we,{...p("zone"),placeholder:"Enter Zone Name (e.g. North Zone)",className:"h-11 border-slate-200 bg-white font-bold text-slate-800 transition-all focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"}),f.zone&&a.jsx("p",{className:"text-xs font-bold text-red-500",children:f.zone.message})]}),a.jsxs("div",{className:"flex gap-2",children:[r&&a.jsx(ae,{type:"button",variant:"outline",onClick:()=>{l(null),g({id:null,zone:""})},className:"h-11 px-6",children:"Cancel"}),a.jsx(ae,{type:"submit",disabled:v,className:"h-11 min-w-[120px] bg-primary font-bold shadow-lg shadow-primary/20 hover:bg-primary/90",children:v?a.jsx(Ce,{className:"h-4 w-4 text-white"}):r?"Update":"Create"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto rounded-xl border border-slate-100 bg-white dark:border-slate-800 dark:bg-slate-900",children:a.jsxs(be,{children:[a.jsx(ge,{className:"bg-slate-50 dark:bg-slate-800/50",children:a.jsxs(je,{children:[a.jsx(fe,{className:"font-bold text-slate-500",children:"ID"}),a.jsx(fe,{className:"font-bold text-slate-500",children:"Zone Name"}),a.jsx(fe,{className:"font-bold text-slate-500",children:"ULB Name"}),a.jsx(fe,{className:"font-bold text-slate-500",children:"Status"}),a.jsx(fe,{className:"text-right font-bold text-slate-500",children:"Actions"})]})}),a.jsx(ve,{children:c?a.jsx(je,{children:a.jsx(Ne,{colSpan:5,className:"h-32 text-center",children:a.jsx(Ce,{className:"mx-auto text-primary"})})}):0===N.length?a.jsx(je,{children:a.jsx(Ne,{colSpan:5,className:"h-32 text-center text-slate-400",children:"No zones found. Create one above."})}):N.map(e=>a.jsxs(je,{className:"group transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[a.jsxs(Ne,{className:"font-mono text-xs font-bold text-slate-400",children:["#",e.id]}),a.jsx(Ne,{className:"font-bold text-slate-700 dark:text-slate-300",children:e.zone}),a.jsx(Ne,{className:"text-xs font-medium text-slate-500",children:e.ulb_name}),a.jsx(Ne,{children:a.jsx(ke,{checked:e.status,onCheckedChange:()=>(async(e,a)=>{var t,s;try{const r=a?0:1,l=await u.mutateAsync({api:re.api_deleteZoneApi,data:{id:e,status:r}});(null==(t=null==l?void 0:l.data)?void 0:t.status)?(C.success(`Zone ${r?"activated":"deactivated"} successfully`),n()):C.error((null==(s=null==l?void 0:l.data)?void 0:s.message)||"Status update failed")}catch(r){C.error(ye(r))}})(e.id,e.status),className:"data-[state=checked]:bg-emerald-500"})}),a.jsx(Ne,{className:"text-right",children:a.jsx("div",{className:"flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:a.jsx(ae,{size:"icon",variant:"ghost",type:"button",onClick:()=>(e=>{l(e.id),j("id",e.id),j("zone",e.zone_name||e.zone)})(e),className:"h-8 w-8 text-slate-400 hover:bg-primary/10 hover:text-primary",children:a.jsx(h,{size:14})})})})]},e.id))})]})})]})]})})},Ge=o.forwardRef(({className:e,children:t,...s},r)=>a.jsxs(ze,{ref:r,className:te("relative overflow-hidden",e),...s,children:[a.jsx(_e,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(Je,{}),a.jsx(Se,{})]}));Ge.displayName=ze.displayName;const Je=o.forwardRef(({className:e,orientation:t="vertical",...s},r)=>a.jsx(Ae,{ref:r,orientation:t,className:te("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:a.jsx(Le,{className:"relative flex-1 rounded-full bg-border"})}));function Qe({className:e,...t}){return a.jsx("div",{className:te("animate-pulse rounded-md bg-muted",e),...t})}function Xe({tableName:e,headers:t,onSuccess:s,onCancel:r,editData:l}){const[i,d]=o.useState(l||{}),[n,c]=o.useState(!1),x=!!l,m=o.useMemo(()=>t.filter(e=>!["id","created_at","updated_at","deleted_at","property_type_code","user_id"].includes(e.toLowerCase())),[t]),u=(e,a)=>{d(t=>({...t,[e]:a}))},h=ne({}),p=ne({});return a.jsxs(je,{className:"border-b-2 border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[a.jsx(Ne,{className:"border-r bg-blue-100/50 text-center font-mono text-xs font-bold text-blue-600 dark:border-white/5 dark:bg-blue-900/30",children:x?"EDIT":"NEW"}),t.map(e=>{const t=m.includes(e),s=(e=>{const a=e.toLowerCase();return a.includes("status")||a.includes("active")?"boolean":a.includes("date")||a.includes("time")||a.includes("created")||a.includes("updated")?"date":a.includes("amount")||a.includes("price")||a.includes("count")||a.includes("number")?"number":"text"})(e);return t?a.jsx(Ne,{className:"border-r px-2 py-2 dark:border-white/5",children:"boolean"===s?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ke,{checked:i[e]||!1,onCheckedChange:a=>u(e,a),className:"data-[state=checked]:bg-green-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:i[e]?"Active":"Inactive"})]}):a.jsx(we,{type:s,value:i[e]||"",onChange:a=>u(e,a.target.value),required:!0,placeholder:`Enter ${e.replace(/_/g," ")}`,className:"h-8 min-w-[150px] rounded border-slate-300 bg-white text-xs shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-800"})},e):a.jsx(Ne,{className:"border-r px-2 py-2 dark:border-white/5",children:a.jsx("span",{className:"text-xs italic text-slate-400",children:"Auto"})},e)}),a.jsx(Ne,{className:"sticky right-0 bg-blue-50/90 px-2 py-2 dark:bg-blue-900/30",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(ae,{type:"button",variant:"ghost",size:"icon",onClick:r,disabled:n,className:"h-7 w-7 text-red-500 hover:bg-red-500/10",children:a.jsx(z,{size:12})}),a.jsx(ae,{type:"button",onClick:async a=>{var t,r;a.preventDefault(),c(!0);try{const a={};m.forEach(e=>{void 0!==i[e]&&""!==i[e]&&(a[e]=i[e])});const n={tableName:e,data:a,id:null==l?void 0:l.id},o=x?p:h,c=x?se.updateDynamicTable:se.createDynamicTable,u=await o.mutateAsync({api:c,data:n});(null==(t=null==u?void 0:u.data)?void 0:t.status)?(C.success(u.data.message||`Record ${x?"updated":"created"} successfully!`),d({}),s()):C.error((null==(r=null==u?void 0:u.data)?void 0:r.message)||`Failed to ${x?"update":"create"} record`)}catch(n){C.error((null==n?void 0:n.message)||`An error occurred while ${x?"updating":"creating"} record`)}finally{c(!1)}},disabled:n,size:"icon",className:"h-7 w-7 bg-green-600 text-white hover:bg-green-700",children:n?a.jsx(_,{className:"animate-spin",size:12}):a.jsx(S,{size:12})})]})})]})}function Ye({open:e,onOpenChange:t,moduleName:s,masterName:r,originalName:l}){var i,d,n;const[c,x]=o.useState(""),[m,u]=o.useState(!1),[p,b]=o.useState(null),g=ne({}),j=de({api:se.getDynamicTableStructure,key:`dynamic_table_${l}`,config:{tableName:l},options:{enabled:!!l&&e}}),f=(null==(i=null==j?void 0:j.data)?void 0:i.data)||[],v=null==j?void 0:j.isLoading,N=o.useMemo(()=>0===f.length?[]:Object.keys(f[0]),[f]),w=o.useMemo(()=>c?f.filter(e=>N.some(a=>String(e[a]).toLowerCase().includes(c.toLowerCase()))):f,[f,c,N]);return a.jsx(a.Fragment,{children:a.jsx(Q,{open:e,onOpenChange:t,children:a.jsxs(X,{className:"flex h-[95vh] w-full max-w-[95vw] flex-col overflow-auto border-none bg-[#f8f9fc] p-0 shadow-2xl dark:bg-secondary",children:[a.jsx(Y,{className:"shrink-0 border-b border-white/10 bg-secondary px-8 py-4 text-muted-foreground",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-blue-500/30 bg-blue-500/20 text-blue-400 backdrop-blur-md",children:a.jsx(A,{size:18})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{className:"text-xl font-bold tracking-tight",children:r}),a.jsx(Re,{variant:"outline",className:"border-blue-500/30 bg-blue-500/10 text-[10px] font-black uppercase tracking-widest text-primary",children:l})]}),a.jsxs("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground",children:["Registry Control â€¢ ",s]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>{j.refetch()},className:"h-9 w-9 text-primary hover:bg-white/10 hover:text-primary/60",children:a.jsx(L,{className:v?"animate-spin":""})}),a.jsxs(ae,{className:"mr-6 h-9 gap-2 rounded-lg bg-blue-600 px-4 text-sm font-bold shadow-lg shadow-blue-600/20 hover:bg-blue-700",onClick:()=>{u(!0)},children:[a.jsx(I,{size:12})," Add Row"]})]})]})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-between gap-4 border-b bg-white px-8 py-3 dark:border-white/5 dark:bg-[#1a1d24]",children:[a.jsxs("div",{className:"relative w-full max-w-md",children:[a.jsx(M,{className:"absolute left-3.5 top-1/2 size-3 -translate-y-1/2 text-slate-400"}),a.jsx(we,{placeholder:"Filter results...",value:c,onChange:e=>x(e.target.value),className:"h-9 rounded-lg border-slate-200 bg-slate-50 pl-10 text-xs font-medium shadow-sm ring-offset-background focus-visible:ring-1 focus-visible:ring-blue-500 dark:border-white/10 dark:bg-black/20"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"mx-2 h-6 w-[1px] bg-slate-200 dark:bg-white/10"}),a.jsxs("span",{className:"text-[11px] font-bold uppercase tracking-wider text-slate-500",children:[w.length," Rows found"]})]})]}),a.jsx("div",{className:"relative flex-1 overflow-hidden",children:a.jsxs(Ge,{className:"h-full w-full",children:[a.jsx("div",{className:"min-w-fit",children:a.jsxs(be,{className:"border-separate border-spacing-0",children:[a.jsx(ge,{className:"sticky top-0 z-10 bg-slate-100/80 backdrop-blur-md dark:bg-white/5",children:a.jsxs(je,{className:"border-none hover:bg-transparent",children:[a.jsx(fe,{className:"w-12 border-r text-center text-[10px] font-bold uppercase tracking-tighter text-slate-500 dark:border-white/5",children:"#"}),N.map(e=>{return a.jsx(fe,{className:"border-r px-6 text-[10px] font-black uppercase tracking-widest text-slate-600 dark:border-white/5 dark:text-slate-400",children:(t=e,t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "))},e);var t}),a.jsx(fe,{className:"sticky right-0 bg-slate-100/90 px-4 text-right text-[10px] font-black uppercase tracking-widest text-slate-600 dark:bg-black/80 dark:text-slate-400",children:"Actions"})]})}),a.jsxs(ve,{children:[m&&a.jsx(Xe,{tableName:l,headers:N,onSuccess:()=>{u(!1),j.refetch()},onCancel:()=>u(!1)}),v?Array.from({length:15}).map((e,t)=>a.jsxs(je,{children:[a.jsx(Ne,{children:a.jsx(Qe,{className:"h-4 w-4"})}),N.map(e=>a.jsx(Ne,{children:a.jsx(Qe,{className:"h-4 w-32"})},e)),a.jsx(Ne,{children:a.jsx(Qe,{className:"h-4 w-12"})})]},t)):w.length>0?w.map((e,t)=>p&&p.id===e.id?a.jsx(Xe,{tableName:l,headers:N,editData:e,onSuccess:()=>{b(null),j.refetch()},onCancel:()=>b(null)},`edit-${e.id}`):a.jsxs(je,{className:"group border-b transition-colors hover:bg-blue-500/5 dark:border-white/5",children:[a.jsx(Ne,{className:"border-r bg-slate-50/50 text-center font-mono text-[10px] text-slate-400 dark:border-white/5 dark:bg-white/5",children:t+1}),N.map(t=>a.jsx(Ne,{className:"whitespace-nowrap border-r px-6 font-medium dark:border-white/5",children:"status"===t?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"size-1.5 rounded-full "+(e[t]?"animate-pulse bg-emerald-500":"bg-red-500")}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest "+(e[t]?"text-emerald-500":"text-red-500"),children:e[t]?"Active":"Inactive"})]}):a.jsx("span",{className:"text-xs "+("number"==typeof e[t]?"font-mono text-blue-500":"text-slate-700 dark:text-slate-300"),children:""===e[t]?a.jsx("span",{className:"italic text-slate-400",children:"null"}):String(e[t])})},t)),a.jsx(Ne,{className:"sticky right-0 px-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[a.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>{b(e),u(!1)},className:"h-7 w-7 text-blue-500 hover:bg-blue-500/10",children:a.jsx(h,{size:12})}),a.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>(async e=>{var a,t,s;try{const r=await g.mutateAsync({api:se.deleteDynamicTable,data:{tableName:l,id:e}});(null==(a=null==r?void 0:r.data)?void 0:a.status)?(C.success((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Deleted successfully"),j.refetch()):C.error((null==(s=null==r?void 0:r.data)?void 0:s.message)||"Failed to delete")}catch(r){C.error(ye(r))}})(e.id),className:"h-7 w-7 text-red-500 hover:bg-red-500/10",children:a.jsx(D,{size:12})})]})})]},e.id||t)):a.jsx(je,{children:a.jsx(Ne,{colSpan:N.length+2,className:"h-[400px] bg-white text-center dark:bg-transparent",children:a.jsxs("div",{className:"flex flex-col items-center justify-center opacity-40",children:[a.jsx(A,{size:48,className:"mb-4 text-slate-300"}),a.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"No data records found"}),a.jsxs("p",{className:"text-xs",children:["The table ",l," is currently empty."]})]})})})]})]})}),a.jsx(Je,{orientation:"horizontal"})]})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t bg-slate-50 px-8 py-2 text-[10px] font-bold uppercase tracking-widest text-slate-400 dark:border-white/5 dark:bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{children:["Connected to: ",r," Registry"]}),a.jsx("span",{className:"text-slate-300",children:"|"}),a.jsxs("span",{children:["Buffer Size: ",w.length]})]}),a.jsxs("div",{children:["Server Response:"," ",(null==(n=null==(d=null==j?void 0:j.data)?void 0:d["meta-data"])?void 0:n.responsetime)||"0","ms"]})]})]})})})}function Ke(){return a.jsxs("div",{className:"w-full h-svh flex justify-center items-center",children:[a.jsx(Te,{className:"animate-spin",size:32}),a.jsx("span",{className:"sr-only",children:"loading"})]})}Je.displayName=Ae.displayName;const ea=({module:e,index:s,onOpenMaster:r})=>{var l,i,d,n;const[c,x]=o.useState(!1),m=e.id||e.module_id,u=de({api:null==(l=se)?void 0:l.moduleRegistryList,key:`moduleMasterList_${m}`,config:{moduleId:m},options:{enabled:!!m}}),h=de({api:null==(i=se)?void 0:i.moduleMasterPercentage,key:`moduleMasterPercentage${m}`,config:{moduleId:m},options:{enabled:!!m}}),p=(null==(d=null==u?void 0:u.data)?void 0:d.data)||[],b=p.length>0,g=(null==(n=null==h?void 0:h.data)?void 0:n.data)||{},j=(null==g?void 0:g.completion_percentage)||0;return a.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.06*s},children:a.jsxs(V,{className:"group overflow-hidden border border-slate-200/80 bg-white shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-800 dark:bg-slate-950 "+(b?"ring-1 ring-emerald-500/20":"ring-1 ring-amber-500/20"),children:[a.jsx("div",{className:"border-b border-slate-200/70 bg-slate-50/90 px-5 py-4 dark:border-slate-800 dark:bg-slate-900/80",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg "+(b?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":"bg-amber-500/10 text-amber-600 dark:text-amber-400"),children:a.jsx(B,{})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-extrabold uppercase tracking-wider text-slate-800 dark:text-slate-100",children:e.module_name}),a.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-[11px]",children:[a.jsxs("span",{className:"font-medium text-slate-500",children:[(null==g?void 0:g.tables_with_data)||0,"/",(null==g?void 0:g.total_tables)||0," Tables"]}),a.jsxs("span",{className:"font-bold "+(100===j?"text-emerald-600":j>=50?"text-amber-600":"text-red-600"),children:[j,"%"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"rounded-full px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider "+(b?"bg-emerald-500/10 text-emerald-700 dark:text-emerald-400":"bg-amber-500/10 text-amber-700 dark:text-amber-400"),children:[p.length," Masters"]}),b&&a.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>x(!c),className:"h-8 w-8 p-0",children:c?a.jsx(v,{}):a.jsx(N,{})})]})]})}),a.jsx(w,{children:c&&b&&a.jsx(t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:a.jsx(H,{className:"space-y-2.5 p-5",children:p.map((t,s)=>a.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200/70 bg-white p-3.5 transition-all duration-200 hover:border-primary/30 hover:bg-primary/[0.03] dark:border-slate-800 dark:bg-slate-900/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/50"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:t.table_name||t.name}),a.jsxs("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400",children:["DB: ",t.database_name||"N/A"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"rounded-full px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider "+(t.status?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:t.status?"Active":"Inactive"}),a.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>r(null==e?void 0:e.module_name,(null==t?void 0:t.table_name)||(null==t?void 0:t.name),null==t?void 0:t.original_name),className:"h-8 rounded-lg border border-transparent px-3 text-[10px] font-bold uppercase tracking-wider text-primary transition-all hover:border-primary/20 hover:bg-primary/5",children:"View"})]})]},s))})})})]})})};function aa({ulbId:e}){var t,s;const[r,l]=o.useState(!1),[d,n]=o.useState(""),[c,x]=o.useState(""),[m,u]=o.useState("");U();const h=(e,a,t)=>{n(e),x(a),u(t),l(!0)},p=de({api:null==(t=se)?void 0:t.getModuleByUlbId,key:"permittedModuleListByUlb",config:{ulbId:e},options:{enabled:!!e}}),b=(null==(s=null==p?void 0:p.data)?void 0:s.data)||[],g=null==p?void 0:p.isLoading;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-5 rounded-2xl border border-slate-200/70 bg-white px-5 py-4 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-primary/10 text-primary",children:a.jsx(i,{className:"text-sm"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-extrabold uppercase tracking-wider text-slate-800 dark:text-slate-100",children:"Module Registry Masters"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure and review master tables for each permitted module"})]})]}),a.jsxs("div",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 text-[11px] font-semibold text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[a.jsx(W,{className:"text-emerald-500"}),b.length," Modules"]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:g?a.jsx("div",{className:"col-span-1 rounded-xl border border-dashed border-primary/30 bg-primary/[0.03] py-12 text-center text-xl md:col-span-2",children:a.jsx(Ke,{})}):b.length>0?b.map((e,t)=>a.jsx(ea,{module:e,index:t,onOpenMaster:h},e.id||e.module_id)):a.jsxs("div",{className:"col-span-1 rounded-xl border border-dashed border-slate-300 bg-slate-50 py-12 text-center dark:border-slate-800 dark:bg-slate-900 md:col-span-2",children:[a.jsx($,{className:"mx-auto mb-3 text-2xl text-slate-400"}),a.jsx("p",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400",children:"No Modules Found"})]})}),a.jsx(Ye,{open:r,onOpenChange:()=>l(!1),moduleName:d,masterName:c,originalName:m})]})}const ta=({globalMaster:e,ulbId:s})=>{const[r,l]=o.useState(!1),[n,c]=o.useState(!1),x=[{id:1,name:"Ward Management",count:e.ward_count,icon:d,description:"Geographic boundaries and civic wards",color:e.ward_count>0?"green":"red",action:()=>l(!0)},{id:2,name:"Zone Distribution",count:e.zone_count,icon:O,description:"Macro administrative divisions",color:e.zone_count>0?"green":"red",action:()=>c(!0)}];return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mx-8 space-y-6",children:a.jsxs(oe,{defaultValue:"basic",className:"w-full",children:[a.jsx("div",{className:"mb-6 flex items-center justify-between",children:a.jsxs(ce,{className:"h-12 gap-4 rounded-2xl bg-slate-300/50 px-4 dark:bg-slate-700/50",children:[a.jsxs(xe,{value:"basic",className:"\r\n                relative flex items-center gap-2\r\n                rounded-2xl px-6 py-2\r\n                text-xs font-extrabold uppercase tracking-widest\r\n                text-slate-600 transition-all\r\n\r\n                duration-300 ease-out hover:scale-[1.05]\r\n                hover:text-primary data-[state=active]:scale-[1.08]\r\n\r\n                data-[state=active]:bg-white\r\n                data-[state=active]:text-primary\r\n                data-[state=active]:shadow-lg\r\n                data-[state=active]:shadow-primary/30\r\n                dark:text-slate-300\r\n\r\n                dark:data-[state=active]:bg-slate-900\r\n              ",children:[a.jsx(R,{className:"text-sm"}),"Global Masters"]}),a.jsxs(xe,{value:"module",className:"\r\n                  relative flex items-center gap-2\r\n                  rounded-2xl px-6 py-2\r\n                  text-xs font-extrabold uppercase tracking-widest\r\n                  text-slate-600 transition-all\r\n\r\n                  duration-300 ease-out hover:scale-[1.05]\r\n                  hover:text-primary data-[state=active]:scale-[1.08]\r\n\r\n                  data-[state=active]:bg-white\r\n                  data-[state=active]:text-primary\r\n                  data-[state=active]:shadow-lg\r\n                  data-[state=active]:shadow-primary/30\r\n                  dark:text-slate-300\r\n\r\n                  dark:data-[state=active]:bg-slate-900\r\n                ",children:[a.jsx(i,{className:"text-sm"}),"Module Specific"]})]})}),a.jsx(me,{value:"basic",className:"mt-0",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:x.map((e,s)=>a.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05*s},children:a.jsx(V,{className:`group overflow-hidden border-none bg-white shadow-lg ring-1 ring-slate-200/50 transition-all duration-500 hover:shadow-2xl bg-${e.color}-500/20 ring-${e.color}-500/20`,children:a.jsxs(H,{className:"p-0",children:[a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 flex items-start justify-between",children:a.jsx("div",{className:te("rounded-2xl p-4 shadow-inner transition-all duration-500 group-hover:text-white","green"===e.color?"bg-green-500/10 text-green-500 group-hover:bg-green-500":"bg-red-500/10 text-red-500 group-hover:bg-red-500"),children:a.jsx(e.icon,{size:24})})}),a.jsx("h3",{className:"mb-1 text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:e.name}),a.jsx("p",{className:"mb-3 text-[11px] font-medium text-slate-500",children:e.description}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-400",children:[a.jsx(T,{className:"text-[8px]"}),"Real-time synchronization"]})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 bg-slate-50 px-6 py-4 dark:border-slate-800 dark:bg-slate-800/50",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-3xl font-black leading-none tracking-tighter text-slate-800 dark:text-slate-200",children:e.count}),a.jsx("span",{className:"mt-1 text-[9px] font-black uppercase tracking-widest text-slate-400 dark:text-slate-500",children:"Active Records"})]}),a.jsxs(ae,{variant:"link",onClick:e.action,className:te("h-auto p-0 text-[10px] font-black uppercase tracking-widest transition-transform group-hover:translate-x-1","green"===e.color?"text-green-500 hover:text-green-600":"text-red-500 hover:text-red-600"),children:["Manage ","->"]})]})]})})},e.id))})}),a.jsx(me,{value:"module",className:"mt-0",children:a.jsx(aa,{ulbId:s})})]})}),a.jsx(qe,{open:r,onOpenChange:l,ulbId:s}),a.jsx(He,{open:n,onOpenChange:c,ulbId:s})]})},sa=({actions:e})=>a.jsxs(V,{className:"mx-8 overflow-hidden border-none bg-white shadow-xl transition-all duration-500 dark:bg-slate-900",children:[a.jsx(G,{className:"border-b border-slate-100 bg-red-50/20 p-6 dark:border-slate-800 dark:bg-red-950/20",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-red-100 p-3 text-red-600 ring-1 ring-red-200 dark:bg-red-900/40 dark:text-red-400 dark:ring-red-800",children:a.jsx(n,{})}),a.jsxs("div",{children:[a.jsx(J,{className:"text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:"Administrative Controls"}),a.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Critical system overrides and security protocols"})]})]})}),a.jsx(H,{className:"p-8",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.map((e,s)=>a.jsx(t.div,{initial:{opacity:0,x:s%2==0?-20:20},animate:{opacity:1,x:0},transition:{delay:.5+.1*s},children:a.jsxs(ae,{variant:"outline",className:te("group flex h-auto w-full flex-row items-start gap-5 rounded-2xl border-2 p-6 shadow-sm transition-all duration-300","warning"===e.color?"border-slate-100 bg-slate-50 hover:border-primary hover:bg-primary hover:text-white dark:border-slate-800 dark:bg-slate-800/50":"border-red-50 bg-red-50/30 hover:border-red-500 hover:bg-red-500 hover:text-white dark:border-red-950/20 dark:bg-red-950/10"),onClick:e.action,children:[a.jsx("div",{className:te("rounded-xl p-4 shadow-sm transition-all duration-300 group-hover:scale-110 group-hover:bg-white/20","warning"===e.color?"bg-white text-slate-400 dark:bg-slate-700 dark:text-slate-300":"bg-white text-red-600 dark:bg-slate-700 dark:text-red-400"),children:a.jsx(e.icon,{size:24})}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("h4",{className:"mb-1 text-lg font-black tracking-tight",children:e.title}),a.jsx("p",{className:te("text-xs font-medium leading-relaxed","text-slate-500 group-hover:text-white/80 dark:text-slate-400"),children:e.description})]}),a.jsx("div",{className:"opacity-0 transition-opacity group-hover:opacity-100",children:a.jsx(Z,{className:"animate-pulse text-white"})})]})},e.id))})})]}),ra=Ie,la=Me,ia=o.forwardRef(({className:e,...t},s)=>a.jsx(Oe,{className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));ia.displayName=Oe.displayName;const da=o.forwardRef(({className:e,...t},s)=>a.jsxs(la,{children:[a.jsx(ia,{}),a.jsx(De,{ref:s,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));da.displayName=De.displayName;const na=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...t});na.displayName="AlertDialogHeader";const oa=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});oa.displayName="AlertDialogFooter";const ca=o.forwardRef(({className:e,...t},s)=>a.jsx(Ue,{ref:s,className:te("text-lg font-semibold",e),...t}));ca.displayName=Ue.displayName;const xa=o.forwardRef(({className:e,...t},s)=>a.jsx(We,{ref:s,className:te("text-sm text-muted-foreground",e),...t}));xa.displayName=We.displayName;const ma=o.forwardRef(({className:e,...t},s)=>a.jsx(Be,{ref:s,className:te(le(),e),...t}));ma.displayName=Be.displayName;const ua=o.forwardRef(({className:e,...t},s)=>a.jsx($e,{ref:s,className:te(le({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ua.displayName=$e.displayName;const ha=({open:e,onOpenChange:t,onConfirm:s,title:r,description:l,isSaving:i})=>a.jsx(ra,{open:e,onOpenChange:t,children:a.jsxs(da,{className:"overflow-hidden rounded-3xl border-none bg-white p-8 shadow-2xl dark:bg-slate-900",children:[a.jsx("div",{className:"absolute -left-24 -top-24 h-48 w-48 rounded-full bg-red-500/10 blur-3xl dark:bg-red-500/5"}),a.jsxs(na,{className:"relative z-10",children:[a.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-2xl bg-red-50 text-red-600 shadow-inner ring-1 ring-red-100 dark:bg-red-950/30 dark:text-red-400 dark:ring-red-900/50",children:a.jsx(Z,{size:32})}),a.jsx(ca,{className:"text-center text-3xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:r}),a.jsx(xa,{className:"text-center text-base font-medium leading-relaxed text-slate-500 dark:text-slate-400 md:px-6",children:l})]}),a.jsxs(oa,{className:"relative z-10 mt-8 flex-col-reverse gap-3 sm:flex-row",children:[a.jsx(ua,{disabled:i,className:"h-12 flex-1 rounded-xl border-none bg-slate-100 text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700",children:"Abort"}),a.jsx(ma,{onClick:e=>{e.preventDefault(),s()},disabled:i,className:"h-12 flex-1 rounded-xl bg-red-600 text-[10px] font-black uppercase tracking-widest text-white shadow-lg shadow-red-600/20 transition-all hover:bg-red-700 active:scale-95 dark:bg-red-600 dark:hover:bg-red-700",children:i?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(P,{className:"animate-spin text-[10px]"}),"Processing"]}):"Confirm"})]})]})}),pa=()=>{var e,s;const[r,l]=o.useState(null),[i,d]=o.useState(!1),[n]=U(),x=n.get("ulb_id");n.get("ulb_name");const m=de({api:re.api_getUlbList,key:"api_getUlbList",options:{}}),u=de({api:se.ulbConfigurationList,key:`ulbConfig-${x}`,config:{ulbId:x},options:{enabled:!!x}});null==(e=null==m?void 0:m.data)||e.data;const h=(null==(s=null==u?void 0:u.data)?void 0:s.data)||null,p=e=>{l(e)},b=[{id:"hide-citizen",title:"Hide from Citizen Portal",description:"ULB will not be visible to citizens",icon:F,color:"warning",action:()=>p({id:"hide-citizen",title:"Hide from Citizen Portal",description:"ULB will not be visible to citizens",icon:F,color:"warning"})},{id:"hide-admin",title:"Hide from Admin Panel",description:"ULB will not appear in admin listings",icon:E,color:"warning",action:()=>p({id:"hide-admin",title:"Hide from Admin Panel",description:"ULB will not appear in admin listings",icon:E,color:"warning"})},{id:"disable-login",title:"Disable Login Access",description:"Prevent all users from signing into this ULB",icon:q,color:"danger",action:()=>p({id:"disable-login",title:"Disable Login Access",description:"Prevent all users from signing into this ULB",icon:q,color:"danger"})},{id:"deactivate",title:"Emergency Deactivation",description:"Immediately suspend all ULB services and access",icon:Z,color:"danger",action:()=>p({id:"deactivate",title:"Emergency Deactivation",description:"Immediately suspend all ULB services and access",icon:Z,color:"danger"})}];return u.isLoading||!h?a.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-6 bg-slate-50 dark:bg-[#0a0a0a]",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-24 w-24 animate-spin rounded-full border-4 border-slate-200 border-t-primary"}),a.jsx(c,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-primary",size:24})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-black tracking-tight text-slate-800 dark:text-white",children:"Configuring Municipal Data"}),a.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.3em] text-slate-400",children:"Matrix Initializing..."})]})]}):a.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen overflow-x-hidden rounded-2xl bg-slate-50 pb-20 transition-colors duration-500 dark:bg-[#0a0a0a]",children:[a.jsx(Ze,{ulbName:h.basic_information.ulb_name,ulb_logo:h.basic_information.ulb_logo,progress:90}),a.jsxs("main",{className:"relative z-20 -mt-10 space-y-8",children:[a.jsx(Pe,{data:h}),a.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-10",children:[a.jsx(Fe,{data:h.basic_information}),a.jsx(ta,{globalMaster:h.global_master,ulbId:h.basic_information.id}),a.jsx(sa,{actions:b})]})]}),a.jsx(ha,{open:!!r,onOpenChange:e=>!e&&l(null),onConfirm:()=>{r&&(d(!0),setTimeout(()=>{d(!1),l(null),C.success(`${r.title} executed successfully!`,{icon:"ðŸš€",style:{borderRadius:"15px",background:"#1e293b",color:"#fff",fontWeight:"bold",fontSize:"12px"}})},2e3))},title:(null==r?void 0:r.title)||"Confirm Action",description:`Are you absolutely sure you want to perform "${null==r?void 0:r.title}"? This is an administrative operation that may affect production data and user access.`,isSaving:i})]})};function ba(){return a.jsx(ee,{title:"ULB Master Data",subTitle:"Control all ULB Master Data here",children:a.jsx(pa,{})})}export{ba as default};
