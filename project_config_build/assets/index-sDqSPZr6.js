import{r as e,y as s,z as t,j as l,J as r,b6 as a,W as o,X as n,Y as i,Z as d}from"./vendor-D8EavInP.js";import{C as c,a as u,D as m,e as x,f as p,g,P as h}from"./card-D9KSG9du.js";import{d as f,B as j}from"./index-DkV-K92L.js";import{g as b}from"./services-Bn_cfjy0.js";import{u as v,a as N}from"./useCustomQuery-CDyLuuCr.js";import{T as y,a as w,b as L,c as U,d as S,e as k}from"./table-LRjUu_pZ.js";import{P as B}from"./index-DyAadDmV.js";import{S as F}from"./Spinner-DVulOLCZ.js";import{L as C}from"./label-BCyDt2Ps.js";import{I as _}from"./input-E4qDHzT4.js";import{S as P,a as I,b as E,c as M,d as q}from"./select-BIA6zlce.js";import"./icons-B7NtgHiY.js";import"./ui-BhL1dNIh.js";import"./query-DU6DGVMZ.js";import"./axios-Dos3PyFQ.js";import"./zustand-q0JsXtuM.js";const V={id:"",ulbId:"",logoFile:{}};function z(){var h,z;const[A,D]=e.useState(1),[T,R]=e.useState(10),[J,K]=e.useState(""),O=e.useRef(null),[Q,W]=e.useState(!1),[X,Y]=e.useState(!1),[Z,G]=e.useState(null),H=s({defaultValues:V}),$=v({}),ee=N({api:f.api_getUlbLogoList,key:"ulbLogoList",options:{enabled:!0}}),se=N({api:f.api_getUlbList,key:"ulbList",options:{enabled:!0}}),te=(null==(h=null==ee?void 0:ee.data)?void 0:h.data)||[],le=(null==(z=null==se?void 0:se.data)?void 0:z.data)||[];e.useEffect(()=>{const e=e=>{var s;!e.altKey||"s"!==e.key&&"S"!==e.key||(e.preventDefault(),e.stopPropagation(),null==(s=O.current)||s.focus())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[]),e.useEffect(()=>{Q||H.reset(V)},[Q,H]);const re=e.useMemo(()=>{const e=J.trim().toLowerCase();return e?null==te?void 0:te.filter(s=>{var t;return null==(t=s.ulb_name)?void 0:t.toLowerCase().includes(e)}):te},[te,J]),ae=A*T,oe=ae-T,ne=null==re?void 0:re.slice(oe,ae),ie=H.handleSubmit(async e=>{var s,l,r;try{const a=new FormData;a.append("ulbId",e.ulbId),e.logoFile&&e.logoFile[0]&&a.append("logo",e.logoFile[0]);const o=await $.mutateAsync({api:f.api_PostUlblogo,data:a});(null==(s=null==o?void 0:o.data)?void 0:s.status)?(t.success((null==(l=null==o?void 0:o.data)?void 0:l.message)||"ULB Logo uploaded successfully"),W(!1),Y(!1),G(null),H.reset(V),ee.refetch()):t.error((null==(r=null==o?void 0:o.data)?void 0:r.message)||"Failed to upload ULB Logo")}catch(a){t.error(b(a))}});return l.jsxs("div",{children:[l.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:l.jsxs(c,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[l.jsx("div",{className:"border-b bg-gradient-to-r from-purple-500/10 via-blue-500/10 to-cyan-500/10 p-4",children:l.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 text-white shadow-lg",children:l.jsx(a,{className:"h-6 w-6"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-foreground",children:"ULB Logo Master"}),l.jsxs("div",{className:"inline-block rounded-full bg-gradient-to-r from-purple-600/10 to-blue-600/10 px-3 py-0.5 text-[10px] font-bold uppercase tracking-wider text-purple-600",children:[null==te?void 0:te.length," Logos Found"]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"relative flex items-center md:min-w-[320px]",children:[l.jsx(o,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),l.jsx("input",{ref:O,type:"text",placeholder:"Search ULB logos...",value:J,onChange:e=>{K(e.target.value),D(1)},className:"h-10 w-full rounded-xl border border-border bg-background pl-10 pr-20 text-sm outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"}),l.jsx("div",{className:"absolute right-2.5 hidden items-center gap-1 sm:flex",children:l.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[l.jsx("span",{className:"text-xs",children:"Alt"}),"S"]})})]}),l.jsxs(j,{type:"button",onClick:()=>{Y(!1),G(null),H.reset(V),W(!0)},className:"flex items-center gap-2 shadow-md transition-all hover:from-purple-700 hover:to-blue-700 active:scale-95",children:[l.jsx(n,{className:"h-4 w-4"}),"Upload Logo"]})]})]})}),l.jsxs(u,{className:"p-0",children:[ee.isLoading?l.jsx("div",{className:"flex h-64 items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(F,{}),l.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground",children:"Loading ULB Logos..."})]})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs(y,{children:[l.jsx(w,{children:l.jsxs(L,{className:"border-b-2 hover:bg-transparent",children:[l.jsx(U,{className:"w-20 text-center text-xs font-bold uppercase tracking-wider text-foreground/70",children:"#"}),l.jsx(U,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Logo"}),l.jsx(U,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"ULB Name"}),l.jsx(U,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Logo URL"}),l.jsx(U,{className:"text-center text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Actions"})]})}),l.jsx(S,{children:l.jsx(i,{children:null==ne?void 0:ne.map((e,s)=>l.jsxs(r.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"group/row border-b transition-all hover:bg-muted/40",children:[l.jsx(k,{className:"py-4 text-center",children:l.jsx("div",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-purple-100 to-blue-100 text-xs font-bold text-purple-700",children:oe+s+1})}),l.jsx(k,{className:"py-4",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx("img",{src:e.logo_url,alt:e.ulb_name,className:"h-12 w-12 rounded-lg border object-cover shadow-sm",onError:e=>{e.target.src="/placeholder-logo.png"}})})}),l.jsx(k,{className:"py-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(a,{className:"h-4 w-4 text-purple-600"}),l.jsx("span",{className:"font-medium text-foreground",children:e.ulb_name})]})}),l.jsx(k,{className:"py-4",children:l.jsx("a",{href:e.logo_url,target:"_blank",rel:"noopener noreferrer",className:"block max-w-xs truncate text-sm text-blue-500 hover:underline",children:e.logo_url})}),l.jsx(k,{className:"py-4",children:l.jsx("div",{className:"flex items-center justify-center gap-3",children:l.jsx(j,{variant:"ghost",size:"icon",onClick:()=>(e=>{Y(!0),G(e.id);const s=le.find(s=>s.ulb_name===e.ulb_name);s&&H.setValue("ulbId",String(s.id)),W(!0)})(e),className:"h-8 w-8 text-purple-600 hover:bg-purple-600/10 hover:text-purple-700",children:l.jsx(d,{className:"h-4 w-4"})})})})]},e.id))})})]}),(null==re?void 0:re.length)>=0&&l.jsx("div",{className:"border-t p-4",children:l.jsx(B,{currentPage:A,totalItems:null==re?void 0:re.length,itemsPerPage:T,onPageChange:D,onItemsPerPageChange:e=>{R(e),D(1)}})})]}),!ee.isLoading&&0===(null==te?void 0:te.length)&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[l.jsx("div",{className:"mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-purple-100 to-blue-100",children:l.jsx(a,{className:"h-12 w-12 text-purple-400"})}),l.jsx("h3",{className:"mb-2 text-xl font-bold text-foreground",children:"No ULB Logos found"}),l.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:J?"Try a different search term.":"Upload your first ULB Logo."})]})]})]})}),l.jsx(m,{open:Q,onOpenChange:e=>{W(e),e||(Y(!1),G(null),H.reset(V))},children:l.jsxs(x,{className:"max-h-[90vh] min-w-[50vw] overflow-y-auto",children:[l.jsx(p,{children:l.jsxs(g,{className:"flex items-center gap-2 text-xl font-bold",children:[l.jsx(a,{className:"h-5 w-5 text-purple-600"}),X?"Update ULB Logo":"Upload ULB Logo"]})}),l.jsxs("form",{onSubmit:ie,className:"space-y-5",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(C,{htmlFor:"ulbId",children:"Select ULB"}),l.jsxs(P,{value:H.watch("ulbId"),onValueChange:e=>H.setValue("ulbId",e),children:[l.jsx(I,{className:"h-10",children:l.jsx(E,{placeholder:"Select ULB"})}),l.jsx(M,{children:null==le?void 0:le.map(e=>l.jsx(q,{value:String(e.id),children:e.ulb_name},e.id))})]}),H.formState.errors.ulbId&&l.jsx("p",{className:"text-sm text-red-500",children:"ULB selection is required"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(C,{htmlFor:"logoFile",children:"Logo File"}),l.jsx(_,{...H.register("logoFile",{required:!X&&"Logo file is required"}),type:"file",accept:"image/*",className:"h-10"}),H.formState.errors.logoFile&&l.jsx("p",{className:"text-sm text-red-500",children:H.formState.errors.logoFile.message})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[l.jsx(j,{type:"button",variant:"outline",onClick:()=>W(!1),children:"Cancel"}),l.jsx(j,{type:"submit",className:"min-w-[120px] bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:$.isPending,children:$.isPending?"Saving...":X?"Update Logo":"Upload Logo"})]})]})]})})]})}function A(){return l.jsx(h,{title:"Ulb Logo Master",subTitle:"Manage all Ulbs Logo Master here. ",children:l.jsx(z,{})})}export{A as default};
