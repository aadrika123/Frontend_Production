import{y as e,B as a,r as l,j as s,$ as t,z as i,E as r,G as o,H as d,I as n,ak as c,M as u,P as m,C as x,Y as f,aa as h,an as p,a5 as g,b1 as j,A as v,b2 as b,ab as w}from"./vendor-C2pSf0e_.js";import{u as N,b as y,m as k,D as _,F as R,R as S,B as L,M as C,g as I,C as D,e as F,T as W,h as B,i as z,j as U,k as A,l as E,S as q,p as P,o as V,s as M,P as O}from"./index-DHN82BNk.js";import{T as $,a as H,b as T,c as Y}from"./tabs-Bp5PGmLE.js";import{c as G,b as J,a as K,d as Q}from"./yup-D2FteOaG.js";import{R as X}from"./RHFSelectField-BjY-eWmh.js";import{R as Z}from"./RHFSwitch-eAQTdNLQ.js";import"./query-DWeUG8lz.js";import"./ui-DEgguNHf.js";import"./icons-EVOHFWxn.js";import"./axios-Dos3PyFQ.js";import"./zustand-DirRCQQf.js";const ee=G().shape({id:J().nullable(),workflowName:K().required("Workflow Name is required"),moduleId:J().typeError("Module is required").required("Module is required")});function ae({open:r,setOpen:o,edit:d,setEdit:n,editData:c,refetch:u}){var m,x;const f=N({}),h=y({api:k.userManagementModuleList,key:"userManagementModuleList",options:{enabled:r}}),p=e({defaultValues:{id:void 0,workflowName:"",moduleId:void 0},resolver:a(ee)}),{reset:g,handleSubmit:j,formState:{isSubmitting:v}}=p;l.useEffect(()=>{r&&g(d&&c?{id:c.id,workflowName:c.workflow_name,moduleId:c.module_id}:{id:void 0,workflowName:"",moduleId:void 0})},[r,d,c,g]);const b=(null==(x=null==(m=null==h?void 0:h.data)?void 0:m.data)?void 0:x.map(e=>({value:e.id.toString(),label:e.module_name})))||[];return s.jsx(_,{open:r,setOpen:o,title:d?"Update Workflow":"Add New Workflow",setEdit:n,edit:d,children:s.jsx("div",{className:"p-1",children:s.jsx(R,{methods:p,onSubmit:j(async e=>{var a,l,s;try{const t=d?C.workflowUpdate:C.workflowAdd,r=await f.mutateAsync({api:t,data:e});(null==(a=null==r?void 0:r.data)?void 0:a.status)?(i.success((null==(l=null==r?void 0:r.data)?void 0:l.message)||`Workflow ${d?"updated":"added"} successfully`),o(!1),n&&n(!1),u()):i.error((null==(s=null==r?void 0:r.data)?void 0:s.message)||"Something went wrong")}catch(t){i.error(I(t))}}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-primary/5 p-4 text-primary",children:[s.jsx(t,{size:20}),s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider",children:"Workflow Configuration"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[s.jsx(S,{label:"Workflow Name",name:"workflowName",placeholder:"e.g. RIG MACHINE"}),s.jsx(X,{label:"Assign to Module",name:"moduleId",data:b})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:s.jsx(L,{isLoading:v,type:"submit",className:"h-11 rounded-xl bg-primary px-8 text-sm font-bold text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:shadow-xl active:scale-95",children:d?"Update Workflow":"Create Workflow"})})]})})})})}function le(){var e,a;const[x,f]=l.useState(1),[h,p]=l.useState(10),[g,j]=l.useState(""),v=l.useRef(null),[b,w]=l.useState(!1),[k,_]=l.useState(!1),[R,S]=l.useState(null),L=y({api:C.workflowList,key:"workflowList",options:{enabled:!0}}),M=N({}),O=(null==(a=null==(e=null==L?void 0:L.data)?void 0:e.data)?void 0:a.filter(e=>{var a,l;return(null==(a=null==e?void 0:e.workflow_name)?void 0:a.toLowerCase().includes(g.toLowerCase()))||(null==(l=null==e?void 0:e.module_name)?void 0:l.toLowerCase().includes(g.toLowerCase()))}))||[],$=x*h,H=$-h,T=null==O?void 0:O.slice(H,$);return s.jsxs("div",{className:"mt-4",children:[s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(D,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[s.jsx("div",{className:"border-b bg-muted/30 p-4",children:s.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 text-primary",children:s.jsx(t,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Workflow Master"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Define and manage system-wide workflow processes"})]})]}),s.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3 lg:w-auto",children:[s.jsxs("div",{className:"relative flex-1 lg:min-w-[300px]",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx("input",{ref:v,type:"text",placeholder:"Search workflow or module (Alt+S)...",className:"h-10 w-full rounded-xl border border-input bg-background pl-10 pr-4 text-sm ring-offset-background transition-all focus:outline-none focus:ring-2 focus:ring-primary/20",value:g,onChange:e=>j(e.target.value)})]}),s.jsxs(F,{onClick:()=>{S(null),_(!1),w(!0)},className:"h-10 gap-2 rounded-xl bg-primary px-4 font-semibold text-primary-foreground shadow-lg shadow-primary/20 transition-all hover:shadow-xl active:scale-95",children:[s.jsx(d,{size:14}),s.jsx("span",{children:"Add Workflow"})]})]})]})}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(W,{children:[s.jsx(B,{className:"bg-muted/50",children:s.jsxs(z,{className:"hover:bg-transparent",children:[s.jsx(U,{className:"w-[80px] font-bold",children:"SL. No."}),s.jsx(U,{className:"font-bold",children:"Workflow Name"}),s.jsx(U,{className:"font-bold",children:"Module Name"}),s.jsx(U,{className:"text-center font-bold",children:"Created At"}),s.jsx(U,{className:"text-right font-bold",children:"Actions"})]})}),s.jsx(A,{className:"px-4",children:s.jsx(n,{mode:"wait",children:(null==L?void 0:L.isLoading)?s.jsx(z,{children:s.jsx(E,{colSpan:5,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(q,{}),s.jsx("p",{className:"animate-pulse text-sm text-muted-foreground",children:"Loading workflows..."})]})})}):0===T.length?s.jsx(z,{children:s.jsx(E,{colSpan:5,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 opacity-50",children:[s.jsx(t,{size:50,className:"text-muted-foreground"}),s.jsx("p",{className:"font-medium text-muted-foreground",children:"No workflows found"})]})})}):T.map((e,a)=>s.jsxs(r.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.05*a},className:"group border-b transition-colors hover:bg-muted/30",children:[s.jsx(E,{className:"font-medium p-4",children:(x-1)*h+a+1}),s.jsx(E,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-foreground",children:e.workflow_name}),s.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:["ID: #",e.id]})]})}),s.jsx(E,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-blue-100/50 text-blue-600 dark:bg-blue-900/20",children:s.jsx(c,{size:12})}),s.jsx("span",{className:"font-semibold",children:e.module_name})]})}),s.jsx(E,{className:"text-center text-sm italic text-muted-foreground",children:e.created_at||"N/A"}),s.jsx(E,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(e=>{S(e),_(!0),w(!0)})(e),className:"h-8 w-8 rounded-lg text-blue-600 hover:bg-blue-50 hover:text-blue-700 dark:hover:bg-blue-900/30",title:"Edit",children:s.jsx(u,{size:14})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(async e=>{V("Are you sure?","Do you want to delete this workflow?",async()=>{var a,l,s;try{const t=await M.mutateAsync({api:C.workflowDelete,data:{id:e}});(null==(a=null==t?void 0:t.data)?void 0:a.status)?(i.success((null==(l=null==t?void 0:t.data)?void 0:l.message)||"Workflow deleted successfully"),L.refetch()):i.error((null==(s=null==t?void 0:t.data)?void 0:s.message)||"Failed to delete workflow")}catch(t){i.error(I(t))}})})(e.id),className:"h-8 w-8 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-900/30",title:"Delete",children:s.jsx(m,{size:14})})]})})]},e.id))})})]})})}),!(null==L?void 0:L.isLoading)&&O.length>0&&s.jsx("div",{className:"border-t bg-muted/10 p-4",children:s.jsx(P,{currentPage:x,onPageChange:e=>{f(e)},itemsPerPage:h,onItemsPerPageChange:e=>{p(e),f(1)},totalItems:O.length})})]})}),s.jsx(ae,{open:b,setOpen:w,edit:k,setEdit:_,editData:R,refetch:L.refetch})]})}const se=G().shape({id:J().nullable(),ulbId:J().typeError("ULB is required").required("ULB is required"),wfMasterId:J().typeError("Workflow is required").required("Workflow is required"),altName:K().nullable(),initiatorRoleId:J().typeError("Initiator Role is required").required("Initiator Role is required"),finisherRoleId:J().typeError("Finisher Role is required").required("Finisher Role is required"),isDocRequired:Q().nullable()});function te({open:t,setOpen:r,edit:o,setEdit:d,editData:n,refetch:c}){var u,m,f,h,p,g;const j=N({}),v=y({api:M.api_getUlbList,key:"api_getUlbList",options:{enabled:t}}),b=y({api:C.workflowList,key:"workflowList",options:{enabled:t}}),w=y({api:C.allRole,key:"allRoleList",options:{enabled:t}}),k=e({defaultValues:{id:void 0,ulbId:void 0,wfMasterId:void 0,altName:"",initiatorRoleId:void 0,finisherRoleId:void 0,isDocRequired:!1},resolver:a(se)}),{reset:D,handleSubmit:F,control:W,formState:{isSubmitting:B}}=k;l.useEffect(()=>{t&&D(o&&n?{id:n.id,ulbId:n.ulb_id,wfMasterId:n.wf_master_id,altName:n.alt_name||"",initiatorRoleId:n.initiator_role_id,finisherRoleId:n.finisher_role_id,isDocRequired:Boolean(n.is_doc_required)}:{id:void 0,ulbId:void 0,wfMasterId:void 0,altName:"",initiatorRoleId:void 0,finisherRoleId:void 0,isDocRequired:!1})},[t,o,n,D]);const z=(null==(m=null==(u=null==v?void 0:v.data)?void 0:u.data)?void 0:m.map(e=>({value:e.id.toString(),label:e.ulb_name})))||[],U=(null==(h=null==(f=null==b?void 0:b.data)?void 0:f.data)?void 0:h.map(e=>({value:e.id.toString(),label:e.workflow_name})))||[],A=(null==(g=null==(p=null==w?void 0:w.data)?void 0:p.data)?void 0:g.map(e=>({value:e.id.toString(),label:e.role_name})))||[];return s.jsx(_,{open:t,setOpen:r,title:o?"Edit ULB Workflow":"Add ULB Workflow",setEdit:d,edit:o,children:s.jsx("div",{className:"p-2",children:s.jsx(R,{methods:k,onSubmit:F(async e=>{var a,l,s;try{const t=o?C.ulbWfUpdate:C.ulbWfAdd,n={...e,isDocRequired:e.isDocRequired?"true":"false"},u=await j.mutateAsync({api:t,data:n});(null==(a=null==u?void 0:u.data)?void 0:a.status)?(i.success((null==(l=null==u?void 0:u.data)?void 0:l.message)||`ULB Workflow ${o?"updated":"added"} successfully`),r(!1),d&&d(!1),c()):i.error((null==(s=null==u?void 0:u.data)?void 0:s.message)||"Something went wrong")}catch(t){i.error(I(t))}}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[s.jsx(X,{label:"ULB Name",name:"ulbId",data:z}),s.jsx(X,{label:"Workflow Name",name:"wfMasterId",data:U})]}),s.jsx(S,{label:"Alternate Name (Optional)",name:"altName",placeholder:"Enter alternate name if any..."}),s.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[s.jsx(X,{label:"Initiator Role Name",name:"initiatorRoleId",data:A}),s.jsx(X,{label:"Finisher Role Name",name:"finisherRoleId",data:A})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Is Document Required?"}),s.jsx(x,{name:"isDocRequired",control:W,render:({field:e})=>s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("label",{className:"group flex cursor-pointer items-center gap-2",children:[s.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full border-2 transition-all "+(!0===e.value?"border-primary bg-primary shadow-lg shadow-primary/20":"border-slate-300 dark:border-slate-600"),children:!0===e.value&&s.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-white"})}),s.jsx("input",{type:"radio",className:"hidden",checked:!0===e.value,onChange:()=>e.onChange(!0)}),s.jsx("span",{className:"text-sm font-bold "+(!0===e.value?"text-primary":"text-muted-foreground"),children:"Yes"})]}),s.jsxs("label",{className:"group flex cursor-pointer items-center gap-2",children:[s.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full border-2 transition-all "+(!1===e.value?"border-slate-700 bg-slate-700 dark:border-slate-300 dark:bg-slate-300":"border-slate-300 dark:border-slate-600"),children:!1===e.value&&s.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-white dark:bg-slate-900"})}),s.jsx("input",{type:"radio",className:"hidden",checked:!1===e.value,onChange:()=>e.onChange(!1)}),s.jsx("span",{className:"text-sm font-bold "+(!1===e.value?"text-slate-800 dark:text-slate-200":"text-muted-foreground"),children:"No"})]})]})})]})]})}),s.jsx("div",{className:"flex items-center justify-end gap-3 border-t pt-5",children:s.jsx(L,{isLoading:B,type:"submit",className:"h-12 rounded-2xl bg-primary px-10 text-sm font-black uppercase tracking-widest text-primary-foreground shadow-xl shadow-primary/20 transition-all hover:bg-primary/90 active:scale-[0.98]",children:o?"Update Assignment":"Assign Workflow"})})]})})})})}function ie(){var e,a;const[t,c]=l.useState(1),[x,g]=l.useState(10),[j,v]=l.useState(""),b=l.useRef(null),[w,k]=l.useState(!1),[_,R]=l.useState(!1),[S,L]=l.useState(null),M=y({api:C.ulbWfList,key:"ulbWfList",options:{enabled:!0}}),O=N({}),$=(null==(a=null==(e=null==M?void 0:M.data)?void 0:e.data)?void 0:a.filter(e=>{var a,l,s;return(null==(a=null==e?void 0:e.workflow_name)?void 0:a.toLowerCase().includes(j.toLowerCase()))||(null==(l=null==e?void 0:e.ulb_name)?void 0:l.toLowerCase().includes(j.toLowerCase()))||(null==(s=null==e?void 0:e.alt_name)?void 0:s.toLowerCase().includes(j.toLowerCase()))}))||[],H=t*x,T=H-x,Y=null==$?void 0:$.slice(T,H);return s.jsxs("div",{className:"mt-4",children:[s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(D,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[s.jsx("div",{className:"border-b bg-muted/30 p-4",children:s.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-600/10 text-blue-600",children:s.jsx(f,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"ULB Workflow Management"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign and customize workflows for specific ULBs"})]})]}),s.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3 lg:w-auto",children:[s.jsxs("div",{className:"relative flex-1 lg:min-w-[300px]",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx("input",{ref:b,type:"text",placeholder:"Search workflow, ULB or alt name...",className:"h-10 w-full rounded-xl border border-input bg-background pl-10 pr-4 text-sm ring-offset-background transition-all focus:outline-none focus:ring-2 focus:ring-primary/20",value:j,onChange:e=>v(e.target.value)})]}),s.jsxs(F,{onClick:()=>{L(null),R(!1),k(!0)},className:"h-10 gap-2 rounded-xl bg-primary px-4 font-semibold text-white shadow-lg shadow-primary/20 transition-all hover:bg-primary/90 active:scale-95",children:[s.jsx(d,{size:14}),s.jsx("span",{children:"Add ULB Workflow"})]})]})]})}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(W,{children:[s.jsx(B,{className:"bg-muted/40",children:s.jsxs(z,{className:"border-b text-center hover:bg-transparent",children:[s.jsx(U,{className:"w-[80px] px-6 py-4 text-center text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"SL."}),s.jsx(U,{className:"px-6 py-4 text-left text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"ULB & Workflow"}),s.jsx(U,{className:"px-6 py-4 text-left text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"Alternate Name"}),s.jsx(U,{className:"px-6 py-4 text-center text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"Roles (Init/Fin)"}),s.jsx(U,{className:"px-6 py-4 text-center text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"Doc Required"}),s.jsx(U,{className:"px-6 py-4 text-right text-[11px] font-bold uppercase tracking-wider text-muted-foreground",children:"Actions"})]})}),s.jsx(A,{children:s.jsx(n,{mode:"wait",children:(null==M?void 0:M.isLoading)?s.jsx(z,{children:s.jsx(E,{colSpan:6,className:"h-64 border-none text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx(q,{}),s.jsx("p",{className:"animate-pulse text-sm font-medium text-muted-foreground",children:"Fetching ULB workflows..."})]})})}):0===Y.length?s.jsx(z,{children:s.jsx(E,{colSpan:6,className:"h-64 border-none text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 opacity-40",children:[s.jsx(f,{size:48,className:"text-muted-foreground"}),s.jsx("p",{className:"text-lg font-semibold text-muted-foreground",children:"No ULB workflows found"})]})})}):Y.map((e,a)=>s.jsxs(r.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.98},transition:{delay:.04*a,duration:.2},className:"group border-b transition-all last:border-0 hover:bg-muted/40",children:[s.jsx(E,{className:"px-6 py-5 text-center font-semibold text-muted-foreground",children:(t-1)*x+a+1}),s.jsx(E,{className:"px-6 py-5",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"rounded bg-blue-100 px-1.5 py-0.5 text-[10px] font-bold uppercase text-blue-600",children:"ULB"}),s.jsx("span",{className:"text-sm font-bold text-foreground",children:e.ulb_name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[10px] font-bold uppercase text-slate-600",children:"WF"}),s.jsx("span",{className:"text-xs font-semibold text-muted-foreground",children:e.workflow_name})]})]})}),s.jsx(E,{className:"px-6 py-5",children:s.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:e.alt_name||"-"})}),s.jsx(E,{className:"px-6 py-5 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 shadow-sm",title:`Initiator: ${e.initiator_role_name}`,children:s.jsx(h,{size:12})}),s.jsx("span",{className:"max-w-[80px] truncate text-[9px] font-black uppercase tracking-tighter text-muted-foreground",children:e.initiator_role_name||"--"})]}),s.jsx("div",{className:"h-4 w-[1px] rotate-12 bg-border"}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-violet-100 text-violet-600 shadow-sm",title:`Finisher: ${e.finisher_role_name}`,children:s.jsx(h,{size:12})}),s.jsx("span",{className:"max-w-[90px] truncate text-[9px] font-black uppercase tracking-tighter text-muted-foreground",children:e.finisher_role_name||"--"})]})]})}),s.jsx(E,{className:"px-6 py-5 text-center",children:s.jsx("div",{className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-bold "+(e.is_doc_required?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-slate-100 text-slate-600 dark:bg-slate-800"),children:e.is_doc_required?s.jsxs(s.Fragment,{children:[s.jsx(p,{size:10}),s.jsx("span",{children:"Yes"})]}):s.jsx("span",{children:"No"})})}),s.jsx(E,{className:"px-6 py-5 text-right",children:s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(e=>{L(e),R(!0),k(!0)})(e),className:"h-9 w-9 rounded-xl border border-blue-100 bg-blue-50 text-blue-600 shadow-sm transition-all hover:bg-blue-600 hover:text-white active:scale-90 dark:border-blue-900/30 dark:bg-blue-900/20",title:"Edit",children:s.jsx(u,{size:14})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(async e=>{V("Are you sure?","Do you want to delete this ULB workflow?",async()=>{var a,l,s;try{const t=await O.mutateAsync({api:C.ulbWfDelete,data:{id:e}});(null==(a=null==t?void 0:t.data)?void 0:a.status)?(i.success((null==(l=null==t?void 0:t.data)?void 0:l.message)||"ULB Workflow deleted successfully"),M.refetch()):i.error((null==(s=null==t?void 0:t.data)?void 0:s.message)||"Failed to delete ULB workflow")}catch(t){i.error(I(t))}})})(e.id),className:"h-9 w-9 rounded-xl border border-red-100 bg-red-50 text-red-600 shadow-sm transition-all hover:bg-red-600 hover:text-white active:scale-90 dark:border-red-900/30 dark:bg-red-900/20",title:"Delete",children:s.jsx(m,{size:14})})]})})]},e.id))})})]})})}),!(null==M?void 0:M.isLoading)&&$.length>0&&s.jsx("div",{className:"border-t bg-muted/10 p-4",children:s.jsx(P,{currentPage:t,onPageChange:e=>{c(e)},itemsPerPage:x,onItemsPerPageChange:e=>{g(e),c(1)},totalItems:$.length})})]})}),s.jsx(te,{open:w,setOpen:k,edit:_,setEdit:R,editData:S,refetch:M.refetch})]})}const re=G().shape({id:J().nullable(),workflowName:K().required("Workflow Name is required"),roleName:K().required("Role Name is required"),fdRoleName:K().nullable(),bdRoleName:K().nullable(),isInitiator:Q().default(!1),isFinisher:Q().default(!1),isBtc:Q().default(!1),canViewDocument:Q().default(!1),canUploadDocument:Q().default(!1),canVerifyDocument:Q().default(!1),allowFreeCommunication:Q().default(!1),allowFullList:Q().default(!1),canEscalate:Q().default(!1),canForward:Q().default(!1),canBackward:Q().default(!1),isPseudo:Q().default(!1),showFieldVerification:Q().default(!1),serialNo:J().typeError("Serial No must be a number").required("Serial No is required")});function oe({open:t,setOpen:r,edit:o,setEdit:d,editData:n,refetch:c}){var u,m,x,f;const h=N({}),p=y({api:C.workflowList,key:"workflowList",options:{enabled:t}}),g=y({api:C.allRole,key:"roleList",options:{enabled:t}}),j=e({defaultValues:{id:void 0,workflowName:"",roleName:"",fdRoleName:"",bdRoleName:"",isInitiator:!1,isFinisher:!1,isBtc:!1,canViewDocument:!1,canUploadDocument:!1,canVerifyDocument:!1,allowFreeCommunication:!1,allowFullList:!1,canEscalate:!1,canForward:!1,canBackward:!1,isPseudo:!1,showFieldVerification:!1,serialNo:0},resolver:a(re)}),{reset:v,handleSubmit:b,formState:{isSubmitting:w}}=j;l.useEffect(()=>{var e,a,l,s;t&&v(o&&n?{id:n.id,workflowName:null==(e=n.workflow_id)?void 0:e.toString(),roleName:null==(a=n.wf_role_id)?void 0:a.toString(),fdRoleName:(null==(l=n.forward_role_id)?void 0:l.toString())||"",bdRoleName:(null==(s=n.backward_role_id)?void 0:s.toString())||"",isInitiator:n.is_initiator,isFinisher:n.is_finisher,isBtc:n.is_btc,canViewDocument:n.can_view_document,canUploadDocument:n.can_upload_document,canVerifyDocument:n.can_verify_document,allowFreeCommunication:n.allow_free_communication,allowFullList:n.allow_full_list,canEscalate:n.can_escalate,canForward:n.can_forward,canBackward:n.can_backward,isPseudo:n.is_pseudo,showFieldVerification:n.show_field_verification,serialNo:n.serial_no}:{id:void 0,workflowName:"",roleName:"",fdRoleName:"",bdRoleName:"",isInitiator:!1,isFinisher:!1,isBtc:!1,canViewDocument:!1,canUploadDocument:!1,canVerifyDocument:!1,allowFreeCommunication:!1,allowFullList:!1,canEscalate:!1,canForward:!1,canBackward:!1,isPseudo:!1,showFieldVerification:!1,serialNo:0})},[t,o,n,v]);const k=(null==(m=null==(u=null==p?void 0:p.data)?void 0:u.data)?void 0:m.map(e=>({value:e.id.toString(),label:e.workflow_name})))||[],D=(null==(f=null==(x=null==g?void 0:g.data)?void 0:x.data)?void 0:f.map(e=>({value:e.id.toString(),label:e.role_name})))||[];return s.jsx(_,{open:t,setOpen:r,title:o?"Update Role Map":"Add New Role Map",setEdit:d,edit:o,children:s.jsx("div",{className:"p-1",children:s.jsx(R,{methods:j,onSubmit:b(async e=>{var a,l,s;try{const t=o?C.wfRoleUpdate:C.wfRoleAdd,n={id:o?e.id:void 0,workflowId:Number(e.workflowName),wfRoleId:Number(e.roleName),forwardRoleId:e.fdRoleName?Number(e.fdRoleName):null,backwardRoleId:e.bdRoleName?Number(e.bdRoleName):null,isInitiator:e.isInitiator,isFinisher:e.isFinisher,isBtc:e.isBtc,canViewDocument:e.canViewDocument,canUploadDocument:e.canUploadDocument,canVerifyDocument:e.canVerifyDocument,allowFreeCommunication:e.allowFreeCommunication,allowFullList:e.allowFullList,canEscalate:e.canEscalate,canForward:e.canForward,canBackward:e.canBackward,isPseudo:e.isPseudo,showFieldVerification:e.showFieldVerification,serialNo:Number(e.serialNo)},u=await h.mutateAsync({api:t,data:n});(null==(a=null==u?void 0:u.data)?void 0:a.status)?(i.success((null==(l=null==u?void 0:u.data)?void 0:l.message)||`Workflow Map ${o?"updated":"added"} successfully`),r(!1),d&&d(!1),c()):i.error((null==(s=null==u?void 0:u.data)?void 0:s.message)||"Something went wrong")}catch(t){i.error(I(t))}}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[s.jsx(X,{label:"Workflow",name:"workflowName",data:k}),s.jsx(X,{label:"Role",name:"roleName",data:D}),s.jsx(X,{label:"Forward Role",name:"fdRoleName",data:D}),s.jsx(X,{label:"Backward Role",name:"bdRoleName",data:D}),s.jsx(S,{label:"Serial No",name:"serialNo",type:"number",placeholder:"e.g. 1"})]}),s.jsxs("div",{className:"rounded-xl bg-muted/30 p-4",children:[s.jsx("p",{className:"mb-4 text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Permissions & Controls"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:[s.jsx(Z,{label:"Is Initiator",name:"isInitiator"}),s.jsx(Z,{label:"Is Finisher",name:"isFinisher"}),s.jsx(Z,{label:"Is BTC",name:"isBtc"}),s.jsx(Z,{label:"Is Pseudo",name:"isPseudo"}),s.jsx(Z,{label:"Can View Docs",name:"canViewDocument"}),s.jsx(Z,{label:"Can Upload Docs",name:"canUploadDocument"}),s.jsx(Z,{label:"Can Verify Docs",name:"canVerifyDocument"}),s.jsx(Z,{label:"Can Forward",name:"canForward"}),s.jsx(Z,{label:"Can Backward",name:"canBackward"}),s.jsx(Z,{label:"Can Escalate",name:"canEscalate"}),s.jsx(Z,{label:"Free Comm.",name:"allowFreeCommunication"}),s.jsx(Z,{label:"Full List",name:"allowFullList"}),s.jsx(Z,{label:"Show Field Verif.",name:"showFieldVerification"})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:s.jsx(L,{isLoading:w,type:"submit",className:"h-11 rounded-xl bg-violet-600 px-8 text-sm font-bold text-white shadow-lg shadow-violet-600/20 transition-all hover:bg-violet-700 active:scale-95",children:o?"Update Map":"Create Map"})})]})})})})}function de(){var e,a;const[t,c]=l.useState(1),[x,f]=l.useState(10),[h,p]=l.useState(""),v=l.useRef(null),[b,w]=l.useState(!1),[k,_]=l.useState(!1),[R,S]=l.useState(null),L=y({api:C.wfRoleList,key:"wfRoleList",options:{enabled:!0}}),M=N({}),O=(null==(a=null==(e=null==L?void 0:L.data)?void 0:e.data)?void 0:a.filter(e=>{var a,l,s;return(null==(a=null==e?void 0:e.role_name)?void 0:a.toLowerCase().includes(h.toLowerCase()))||(null==(l=null==e?void 0:e.workflow_name)?void 0:l.toLowerCase().includes(h.toLowerCase()))||(null==(s=null==e?void 0:e.ulb_name)?void 0:s.toLowerCase().includes(h.toLowerCase()))}))||[],$=t*x,H=$-x,T=null==O?void 0:O.slice(H,$);return s.jsxs("div",{className:"mt-4",children:[s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(D,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[s.jsx("div",{className:"border-b bg-muted/30 p-4",children:s.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/20",children:s.jsx(g,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Workflow Role Mapping"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Define workflow steps and role permissions"})]})]}),s.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3 lg:w-auto",children:[s.jsxs("div",{className:"relative flex-1 lg:min-w-[300px]",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx("input",{ref:v,type:"text",placeholder:"Search role, workflow or ULB...",className:"h-10 w-full rounded-xl border border-input bg-background pl-10 pr-4 text-sm ring-offset-background transition-all focus:outline-none focus:ring-2 focus:ring-violet-500/20",value:h,onChange:e=>p(e.target.value)})]}),s.jsxs(F,{onClick:()=>{S(null),_(!1),w(!0)},className:"h-10 gap-2 rounded-xl bg-violet-600 px-4 font-semibold text-white shadow-lg shadow-violet-600/20 transition-all hover:bg-violet-700 active:scale-95",children:[s.jsx(d,{size:14}),s.jsx("span",{children:"Add Role Map"})]})]})]})}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(W,{children:[s.jsx(B,{className:"bg-muted/50",children:s.jsxs(z,{className:"hover:bg-transparent",children:[s.jsx(U,{className:"w-[80px] font-bold",children:"SL. No."}),s.jsx(U,{className:"font-bold",children:"Role Name"}),s.jsx(U,{className:"font-bold",children:"Workflow & ULB"}),s.jsx(U,{className:"font-bold",children:"Direction"}),s.jsx(U,{className:"min-w-[600px] text-center font-bold",children:"Permissions"}),s.jsx(U,{className:"text-right font-bold",children:"Actions"})]})}),s.jsx(A,{className:"px-4",children:s.jsx(n,{mode:"wait",children:(null==L?void 0:L.isLoading)?s.jsx(z,{children:s.jsx(E,{colSpan:6,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(q,{}),s.jsx("p",{className:"animate-pulse text-sm text-muted-foreground",children:"Loading role maps..."})]})})}):0===T.length?s.jsx(z,{children:s.jsx(E,{colSpan:6,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 opacity-50",children:[s.jsx(g,{size:50,className:"text-muted-foreground"}),s.jsx("p",{className:"font-medium text-muted-foreground",children:"No role maps found"})]})})}):T.map((e,a)=>s.jsxs(r.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.05*a},className:"group border-b transition-colors hover:bg-muted/30",children:[s.jsx(E,{className:"p-4 font-medium",children:(t-1)*x+a+1}),s.jsx(E,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-foreground",children:e.role_name}),s.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:["Step: #",e.serial_no]})]})}),s.jsx(E,{children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"text-violet-500",size:12}),s.jsx("span",{className:"text-xs font-semibold",children:e.workflow_name})]}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:e.ulb_name})]})}),s.jsx(E,{children:s.jsxs("div",{className:"flex flex-col gap-1 text-[11px] font-medium",children:[e.forward_role_name&&s.jsxs("div",{className:"flex items-center gap-1 text-emerald-600",children:[s.jsx("span",{className:"rounded bg-emerald-100 px-1 py-0.5 dark:bg-emerald-900/30",children:"FWD:"}),e.forward_role_name]}),e.backward_role_name&&s.jsxs("div",{className:"flex items-center gap-1 text-rose-600",children:[s.jsx("span",{className:"rounded bg-rose-100 px-1 py-0.5 dark:bg-rose-900/30",children:"BWD:"}),e.backward_role_name]})]})}),s.jsx(E,{children:s.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 sm:grid-cols-3 md:grid-cols-4",children:[{label:"Is Initiator",value:e.is_initiator},{label:"Is Finisher",value:e.is_finisher},{label:"Is BTC",value:e.is_btc},{label:"View Document",value:e.can_view_document},{label:"Upload Document",value:e.can_upload_document},{label:"Verify Document",value:e.can_verify_document},{label:"Free Comm.",value:e.allow_free_communication},{label:"Full List",value:e.allow_full_list},{label:"Can Escalate",value:e.can_escalate},{label:"Pseudo User",value:e.is_pseudo},{label:"Can Forward",value:e.can_forward},{label:"Can Backward",value:e.can_backward},{label:"Field Verif.",value:e.show_field_verification}].map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between gap-2 rounded border bg-background px-2 py-1 text-[10px]",children:[s.jsx("span",{className:"whitespace-nowrap font-medium text-muted-foreground",children:e.label}),s.jsx("span",{className:"font-bold "+(e.value?"text-green-600":"text-red-500"),children:e.value?"Yes":"No"})]},a))})}),s.jsx(E,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(e=>{S(e),_(!0),w(!0)})(e),className:"h-8 w-8 rounded-lg text-blue-600 hover:bg-blue-50 hover:text-blue-700 dark:hover:bg-blue-900/30",title:"Edit",children:s.jsx(u,{size:14})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(async e=>{V("Are you sure?","Do you want to delete this role map?",async()=>{var a,l,s;try{const t=await M.mutateAsync({api:C.wfRoleDelete,data:{id:e}});(null==(a=null==t?void 0:t.data)?void 0:a.status)?(i.success((null==(l=null==t?void 0:t.data)?void 0:l.message)||"Role map deleted successfully"),L.refetch()):i.error((null==(s=null==t?void 0:t.data)?void 0:s.message)||"Failed to delete role map")}catch(t){i.error(I(t))}})})(e.id),className:"h-8 w-8 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-900/30",title:"Delete",children:s.jsx(m,{size:14})})]})})]},e.id))})})]})})}),!(null==L?void 0:L.isLoading)&&O.length>0&&s.jsx("div",{className:"border-t bg-muted/10 p-4",children:s.jsx(P,{currentPage:t,onPageChange:e=>{c(e)},itemsPerPage:x,onItemsPerPageChange:e=>{f(e),c(1)},totalItems:O.length})})]})}),s.jsx(oe,{open:b,setOpen:w,edit:k,setEdit:_,editData:R,refetch:L.refetch})]})}const ne=G().shape({id:J().nullable(),roleName:K().required("Role Name is required"),isSuspended:Q().default(!1)});function ce({open:t,setOpen:r,edit:o,setEdit:d,editData:n,refetch:c}){const u=N({}),m=e({defaultValues:{id:void 0,roleName:"",isSuspended:!1},resolver:a(ne)}),{reset:x,handleSubmit:f,formState:{isSubmitting:h}}=m;l.useEffect(()=>{t&&x(o&&n?{id:n.id,roleName:n.role_name,isSuspended:n.is_suspended}:{id:void 0,roleName:"",isSuspended:!1})},[t,o,n,x]);return s.jsx(_,{open:t,setOpen:r,title:o?"Update Workflow Role":"Add New Workflow Role",setEdit:d,edit:o,children:s.jsx("div",{className:"p-1",children:s.jsx(R,{methods:m,onSubmit:f(async e=>{var a,l,s;try{const t=o?M.api_updateWorkflowRole:M.api_PostWorkflowRole,n={id:o?e.id:void 0,roleName:e.roleName,isSuspended:e.isSuspended},m=await u.mutateAsync({api:t,data:n});(null==(a=null==m?void 0:m.data)?void 0:a.status)?(i.success((null==(l=null==m?void 0:m.data)?void 0:l.message)||`Workflow Role ${o?"updated":"added"} successfully`),r(!1),d&&d(!1),c()):i.error((null==(s=null==m?void 0:m.data)?void 0:s.message)||"Something went wrong")}catch(t){i.error(I(t))}}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-orange-100 p-4 text-orange-600 dark:bg-orange-900/20",children:[s.jsx(v,{size:20}),s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider",children:"Role Configuration"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[s.jsx(S,{label:"Role Name",name:"roleName",placeholder:"e.g. Developer"}),s.jsx(Z,{label:"Is Suspended",name:"isSuspended"})]})]}),s.jsx("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:s.jsx(L,{isLoading:h,type:"submit",className:"h-11 rounded-xl bg-violet-600 px-8 text-sm font-bold text-white shadow-lg shadow-violet-600/20 transition-all hover:bg-violet-700 active:scale-95",children:o?"Update Role":"Create Role"})})]})})})})}function ue(){var e,a;const[t,c]=l.useState(1),[x,f]=l.useState(10),[h,p]=l.useState(""),g=l.useRef(null),[j,w]=l.useState(!1),[k,_]=l.useState(!1),[R,S]=l.useState(null),L=y({api:M.getWorkflowRole,key:"getWorkflowRole",options:{enabled:!0}}),C=N({}),O=(null==(a=null==(e=null==L?void 0:L.data)?void 0:e.data)?void 0:a.filter(e=>{var a;return null==(a=null==e?void 0:e.role_name)?void 0:a.toLowerCase().includes(h.toLowerCase())}))||[],$=t*x,H=$-x,T=null==O?void 0:O.slice(H,$);return s.jsxs("div",{className:"mt-4",children:[s.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(D,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[s.jsx("div",{className:"border-b bg-muted/30 p-4",children:s.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-orange-100 text-orange-600 dark:bg-orange-900/20",children:s.jsx(b,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Workflow Roles"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage roles for workflow assignments"})]})]}),s.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3 lg:w-auto",children:[s.jsxs("div",{className:"relative flex-1 lg:min-w-[300px]",children:[s.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx("input",{ref:g,type:"text",placeholder:"Search roles...",className:"h-10 w-full rounded-xl border border-input bg-background pl-10 pr-4 text-sm ring-offset-background transition-all focus:outline-none focus:ring-2 focus:ring-orange-500/20",value:h,onChange:e=>p(e.target.value)})]}),s.jsxs(F,{onClick:()=>{S(null),_(!1),w(!0)},className:"h-10 gap-2 rounded-xl bg-orange-600 px-4 font-semibold text-white shadow-lg shadow-orange-600/20 transition-all hover:bg-orange-700 active:scale-95",children:[s.jsx(d,{size:14}),s.jsx("span",{children:"Add Role"})]})]})]})}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(W,{children:[s.jsx(B,{className:"bg-muted/50",children:s.jsxs(z,{className:"hover:bg-transparent",children:[s.jsx(U,{className:"w-[80px] font-bold",children:"SL. No."}),s.jsx(U,{className:"font-bold",children:"Role Name"}),s.jsx(U,{className:"font-bold",children:"Created By"}),s.jsx(U,{className:"text-center font-bold",children:"Status"}),s.jsx(U,{className:"text-right font-bold",children:"Actions"})]})}),s.jsx(A,{className:"px-4",children:s.jsx(n,{mode:"wait",children:(null==L?void 0:L.isLoading)?s.jsx(z,{children:s.jsx(E,{colSpan:5,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(q,{}),s.jsx("p",{className:"animate-pulse text-sm text-muted-foreground",children:"Loading roles..."})]})})}):0===T.length?s.jsx(z,{children:s.jsx(E,{colSpan:5,className:"h-48 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 opacity-50",children:[s.jsx(v,{size:50,className:"text-muted-foreground"}),s.jsx("p",{className:"font-medium text-muted-foreground",children:"No workflow roles found"})]})})}):T.map((e,a)=>s.jsxs(r.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.05*a},className:"group border-b transition-colors hover:bg-muted/30",children:[s.jsx(E,{className:"p-4 font-medium",children:(t-1)*x+a+1}),s.jsx(E,{children:s.jsx("span",{className:"font-bold text-foreground",children:e.role_name})}),s.jsx(E,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:e.created_by})}),s.jsx(E,{className:"text-center",children:s.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium "+(e.is_suspended?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:e.is_suspended?"Suspended":"Active"})}),s.jsx(E,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(e=>{S(e),_(!0),w(!0)})(e),className:"h-8 w-8 rounded-lg text-blue-600 hover:bg-blue-50 hover:text-blue-700 dark:hover:bg-blue-900/30",title:"Edit",children:s.jsx(u,{size:14})}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>(async e=>{V("Are you sure?","Do you want to delete this role?",async()=>{var a,l,s;try{const t=await C.mutateAsync({api:M.api_deleteWorkflowRole,data:{id:e}});(null==(a=null==t?void 0:t.data)?void 0:a.status)?(i.success((null==(l=null==t?void 0:t.data)?void 0:l.message)||"Role deleted successfully"),L.refetch()):i.error((null==(s=null==t?void 0:t.data)?void 0:s.message)||"Failed to delete role")}catch(t){i.error(I(t))}})})(e.id),className:"h-8 w-8 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 dark:hover:bg-red-900/30",title:"Delete",children:s.jsx(m,{size:14})})]})})]},e.id))})})]})})}),!(null==L?void 0:L.isLoading)&&O.length>0&&s.jsx("div",{className:"border-t bg-muted/10 p-4",children:s.jsx(P,{currentPage:t,onPageChange:e=>{c(e)},itemsPerPage:x,onItemsPerPageChange:e=>{f(e),c(1)},totalItems:O.length})})]})}),s.jsx(ce,{open:j,setOpen:w,edit:k,setEdit:_,editData:R,refetch:L.refetch})]})}function me(){const[e,a]=w(),l=e.get("tab")||"workflow-master",i=[{id:"workflow-master",label:"Workflow Master",icon:s.jsx(t,{size:14}),content:s.jsx(le,{})},{id:"ulb-workflow",label:"Ulb Workflow",icon:s.jsx(f,{size:14}),content:s.jsx(ie,{})},{id:"workflow-rolemap",label:"Workflow Rolemap",icon:s.jsx(g,{size:14}),content:s.jsx(de,{})},{id:"workflow-role",label:"Workflow Role",icon:s.jsx(v,{size:14}),content:s.jsx(ue,{})}];return s.jsx("div",{className:"flex flex-col gap-6 p-1",children:s.jsx(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:s.jsxs($,{value:l,onValueChange:e=>{a({tab:e})},className:"w-full",children:[s.jsx(H,{className:" inline-flex h-12 items-center justify-start rounded-2xl bg-muted/30 p-1",children:i.map(e=>s.jsxs(T,{value:e.id,className:"flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition-all data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-md",children:[e.icon,s.jsx("span",{children:e.label})]},e.id))}),i.map(e=>s.jsx(Y,{value:e.id,className:"focus:outline-none",children:e.content},e.id))]})})})}function xe(){return s.jsx(O,{title:"Manage All Workflow Here.",children:s.jsx(me,{})})}export{xe as default};
