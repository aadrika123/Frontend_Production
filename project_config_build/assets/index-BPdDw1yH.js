import{r as e,y as s,b3 as a,j as i,J as t,bf as r,Z as d,ah as n,aD as l,ak as m}from"./vendor-C4evAtTJ.js";import{C as c,a as o,D as x,e as h,f as p,g as u,P as j}from"./card-DiAP098P.js";import{d as g,b as v}from"./index-nOKeclHv.js";import{L as f}from"./label-DG1IsmQj.js";import{I as N}from"./input-BmuDym1d.js";import{S as b}from"./switch-DiVucjTg.js";import{S as y}from"./Spinner-V_xsUq7L.js";import{u as A,a as w}from"./useCustomQuery-776SQh42.js";import"./icons-s1CkBPDV.js";import"./ui-BtaoVrnA.js";import"./query-CtA7BnhH.js";import"./axios-Dos3PyFQ.js";import"./zustand-DzHKdda2.js";const S={Name:"",designation:"",Image:null,address:"",phone:"",email:""};function k(){var j;const[k,C]=e.useState(!1),[I,q]=e.useState(!1),[F,_]=e.useState(null),M=s({defaultValues:S}),E=A({}),D=w({api:g.api_getAdministrativeApiList,key:"administrativeList",options:{enabled:!0}}),L=(null==(j=null==D?void 0:D.data)?void 0:j.data)||[],P=w({api:g.api_getAdministrativeApiById,key:`administrativeById_${F??""}`,config:{id:F},options:{enabled:!!F&&I&&k}});e.useEffect(()=>{var e;if(!k||!I)return;const s=null==(e=null==P?void 0:P.data)?void 0:e.data;if(!s)return;const a=Array.isArray(s)?s[0]:s;a&&M.reset({Name:a.name||"",designation:a.designation||"",Image:null,address:a.address||"",phone:a.phone||"",email:a.email||""})},[k,I,null==P?void 0:P.data,M]);const z=M.handleSubmit(async e=>{var s,i,t;try{const r=new FormData;r.append("Name",e.Name),r.append("designation",e.designation),r.append("address",e.address),r.append("phone",e.phone),r.append("email",e.email),e.Image&&r.append("Image",e.Image),I&&F&&r.append("id",F.toString());const d=await E.mutateAsync({api:I?g.api_updateAdministrativeApi:g.api_PostAdministrativeApi,data:r});(null==(s=null==d?void 0:d.data)?void 0:s.status)?(a.success((null==(i=null==d?void 0:d.data)?void 0:i.message)||(I?"Administrative updated successfully":"Administrative created successfully")),C(!1),q(!1),_(null),M.reset(S),D.refetch()):a.error((null==(t=null==d?void 0:d.data)?void 0:t.message)||"Failed to save Administrative")}catch(r){a.error("Failed to save Administrative")}});return i.jsxs("div",{children:[i.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsxs(c,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[i.jsx("div",{className:"border-b bg-muted/30 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-600",children:i.jsx(r,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Administrative"}),i.jsxs("div",{className:"inline-block rounded-full bg-indigo-600/10 px-3 py-0.5 text-[10px] font-bold uppercase tracking-wider text-indigo-600",children:[L.length," Members"]})]})]}),i.jsxs(v,{type:"button",onClick:()=>{q(!1),_(null),M.reset(S),C(!0)},className:"flex items-center gap-2 bg-primary shadow-md transition-all hover:bg-primary/90 active:scale-95",children:[i.jsx(r,{className:"h-4 w-4"}),"Add Member"]})]})}),i.jsx(o,{className:"p-0",children:D.isLoading?i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(y,{}),i.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground",children:"Loading Administrative..."})]})}):L.length>0?i.jsx("div",{className:"space-y-4 p-6",children:L.map(e=>i.jsx("div",{className:"rounded-lg border p-4 transition-shadow hover:shadow-md",children:i.jsxs("div",{className:"flex items-start gap-4",children:[e.image_url&&i.jsx("img",{src:e.image_url,alt:e.name,className:"h-16 w-16 rounded-full object-cover"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-foreground",children:e.name}),i.jsx("p",{className:"text-sm font-medium text-blue-600",children:e.designation})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(v,{variant:"ghost",size:"icon",onClick:()=>(e=>{q(!0),_(e.id),C(!0)})(e),className:"h-8 w-8 text-blue-600 hover:bg-blue-600/10",children:i.jsx(d,{className:"h-4 w-4"})}),i.jsx(b,{checked:1===e.is_suspended,onCheckedChange:()=>(async(e,s)=>{var i,t,r;try{const d=await E.mutateAsync({api:g.api_deleteAdministrativeApi,data:{id:e,status:1===s?0:1}});(null==(i=null==d?void 0:d.data)?void 0:i.status)?(a.success((null==(t=null==d?void 0:d.data)?void 0:t.message)||`Administrative ${1===s?"deactivated":"activated"} successfully`),D.refetch()):a.error((null==(r=null==d?void 0:d.data)?void 0:r.message)||"Failed to update status")}catch(d){a.error("Failed to update status")}})(e.id,e.is_suspended),className:"data-[state=checked]:bg-green-500"})]})]}),i.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(n,{className:"h-3 w-3"}),i.jsx("span",{children:e.address})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(l,{className:"h-3 w-3"}),i.jsx("span",{children:e.phone})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(m,{className:"h-3 w-3"}),i.jsx("span",{children:e.email})]})]})]})]})]})},e.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[i.jsx("div",{className:"mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted/50",children:i.jsx(r,{className:"h-12 w-12 text-muted-foreground/40"})}),i.jsx("h3",{className:"mb-2 text-xl font-bold text-foreground",children:"No Administrative Members"}),i.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:"Add administrative members to display on the citizen landing page."})]})})]})}),i.jsx(x,{open:k,onOpenChange:e=>{C(e),e||(q(!1),_(null),M.reset(S))},children:i.jsxs(h,{className:"max-h-[90vh] min-w-[60vw] overflow-y-auto",children:[i.jsx(p,{children:i.jsx(u,{className:"text-xl font-bold",children:I?"Update Administrative Member":"Add Administrative Member"})}),I&&P.isLoading?i.jsxs("div",{className:"py-10 text-center",children:[i.jsx(y,{}),i.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Loading member details..."})]}):i.jsxs("form",{onSubmit:z,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(f,{htmlFor:"Name",children:"Name *"}),i.jsx(N,{id:"Name",...M.register("Name",{required:"Name is required"}),placeholder:"Enter name"}),M.formState.errors.Name&&i.jsx("p",{className:"text-sm text-red-500",children:M.formState.errors.Name.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(f,{htmlFor:"designation",children:"Designation *"}),i.jsx(N,{id:"designation",...M.register("designation",{required:"Designation is required"}),placeholder:"Enter designation"}),M.formState.errors.designation&&i.jsx("p",{className:"text-sm text-red-500",children:M.formState.errors.designation.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(f,{htmlFor:"Image",children:["Profile Image ",!I&&"*"]}),i.jsx(N,{id:"Image",type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];M.setValue("Image",a||null)}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(f,{htmlFor:"address",children:"Address *"}),i.jsx(N,{id:"address",...M.register("address",{required:"Address is required"}),placeholder:"Enter address"}),M.formState.errors.address&&i.jsx("p",{className:"text-sm text-red-500",children:M.formState.errors.address.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(f,{htmlFor:"phone",children:"Phone *"}),i.jsx(N,{id:"phone",...M.register("phone",{required:"Phone is required"}),placeholder:"Enter phone number"}),M.formState.errors.phone&&i.jsx("p",{className:"text-sm text-red-500",children:M.formState.errors.phone.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(f,{htmlFor:"email",children:"Email *"}),i.jsx(N,{id:"email",type:"email",...M.register("email",{required:"Email is required"}),placeholder:"Enter email address"}),M.formState.errors.email&&i.jsx("p",{className:"text-sm text-red-500",children:M.formState.errors.email.message})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[i.jsx(v,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancel"}),i.jsx(v,{type:"submit",className:"min-w-[120px]",disabled:E.isPending,children:E.isPending?"Saving...":I?"Update Member":"Create Member"})]})]})]})})]})}function C(){return i.jsx(j,{title:"Citizen Desk",subTitle:"Manage Citizen Desk Masters",children:i.jsx(k,{})})}export{C as default};
