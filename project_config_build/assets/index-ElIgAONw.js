import{r as e,j as s,y as a,A as t,U as r,b3 as l,X as i,W as d,Y as n,J as o,am as c,Z as x,$ as m}from"./vendor-C4evAtTJ.js";import{D as u,e as p,f as h,g as b,h as g,C as f,a as j,b as w,P as v}from"./card-BEU1s0mS.js";import{c as y,m as N,B as k}from"./index-MUabuSWX.js";import{I as q}from"./input-Cn0aUyLR.js";import{a as F,u as A}from"./useCustomQuery-4wOHHCTZ.js";import{c as C,d as Q,a as S}from"./yup-CKFt8x4I.js";import{S as I,a as L,b as _,c as D,d as E}from"./select-BMg4sfw3.js";import"./icons-s1CkBPDV.js";import"./ui-BtaoVrnA.js";import"./query-CtA7BnhH.js";import"./axios-Dos3PyFQ.js";import"./zustand-DzHKdda2.js";const z=e.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:y("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));z.displayName="Textarea";const M=C().shape({question:S().required("Question is required"),answer:S().required("Answer is required"),moduleId:Q().required("Module is required")});function T({open:l,onOpenChange:i,editData:d,onSubmit:n}){var o;const{register:c,handleSubmit:x,reset:m,setValue:f,watch:j,formState:{errors:w}}=a({resolver:t(M),defaultValues:{question:"",answer:"",moduleId:void 0}}),v=F({api:N.post_moduleList,key:"moduleList",options:{enabled:l}}),y=(null==(o=null==v?void 0:v.data)?void 0:o.data)||[];e.useEffect(()=>{l&&m(d?{question:d.question,answer:d.answer,moduleId:d.module_id}:{question:"",answer:"",moduleId:void 0})},[l,d,m]);const A=j("moduleId");return s.jsx(u,{open:l,onOpenChange:i,children:s.jsxs(p,{className:"max-w-2xl overflow-hidden border-none bg-slate-50 p-0 shadow-2xl dark:bg-slate-900",children:[s.jsx(h,{className:"bg-primary px-8 py-6 text-white",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-white/20 backdrop-blur-md",children:s.jsx(r,{size:20})}),s.jsxs("div",{children:[s.jsx(b,{className:"text-2xl font-black tracking-tight",children:d?"Edit FAQ":"Add New FAQ"}),s.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-white/70",children:d?"Update existing faq details":"Create a new frequently asked question"})]})]})}),s.jsxs("form",{onSubmit:x(e=>{n({...e,id:null==d?void 0:d.id,moduelName:e.moduleId})}),className:"space-y-6 p-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Target Module"}),s.jsxs(I,{onValueChange:e=>f("moduleId",Number(e)),value:A?String(A):void 0,children:[s.jsx(L,{className:"h-12 rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950",children:s.jsx(_,{placeholder:"Select a module"})}),s.jsx(D,{children:y.map(e=>s.jsx(E,{value:String(e.id),children:e.module_name},e.id))})]}),w.moduleId&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:w.moduleId.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Question"}),s.jsx(q,{...c("question"),placeholder:"How do I...?",className:"h-12 rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950"}),w.question&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:w.question.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Answer"}),s.jsx(z,{...c("answer"),placeholder:"Briefly explain the answer...",className:"min-h-[150px] rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950"}),w.answer&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:w.answer.message})]})]}),s.jsxs(g,{className:"gap-3 border-t border-slate-100 pt-6 dark:border-slate-800",children:[s.jsx(k,{type:"button",variant:"outline",onClick:()=>i(!1),className:"h-12 rounded-xl border-slate-200 bg-white px-8 font-bold text-slate-600 transition-all hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-400",children:"Cancel"}),s.jsx(k,{type:"submit",className:"h-12 rounded-xl bg-primary px-8 font-bold shadow-lg shadow-primary/20 transition-all hover:bg-primary/90 active:scale-95",children:d?"Update FAQ":"Create FAQ"})]})]})]})})}function U(){var a;const[t,u]=e.useState(""),[p,h]=e.useState(!1),[b,g]=e.useState(null),[v,y]=e.useState(null),C=F({api:N.post_listFaq,key:"faqList",options:{enabled:!0}}),Q=(null==(a=null==C?void 0:C.data)?void 0:a.data)||[],S=A({options:{onSuccess:()=>{l.success("FAQ Created Successfully"),h(!1),C.refetch()},onError:()=>{l.error("Failed to create FAQ")}}}),I=A({options:{onSuccess:()=>{l.success("FAQ Updated Successfully"),h(!1),C.refetch()},onError:()=>{l.error("Failed to update FAQ")}}}),L=A({options:{onSuccess:()=>{l.success("FAQ Deleted Successfully"),C.refetch()},onError:()=>{l.error("Failed to delete FAQ")}}}),_=Q.filter(e=>{var s,a,r;return(null==(s=null==e?void 0:e.question)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=null==e?void 0:e.answer)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(r=null==e?void 0:e.module_name)?void 0:r.toLowerCase().includes(t.toLowerCase()))});return s.jsxs("div",{className:"mx-auto max-w-6xl space-y-8 p-8",children:[s.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-800 dark:text-white",children:"Knowledge Base"}),s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Manage frequently asked questions across all system modules"})]}),s.jsxs(k,{onClick:()=>{g(null),h(!0)},className:"h-12 gap-2 rounded-2xl bg-primary px-6 font-bold shadow-xl shadow-primary/20 transition-all hover:bg-primary/90 active:scale-95",children:[s.jsx(i,{size:14})," Create New FAQ"]})]}),s.jsxs("div",{className:" flex items-center justify-between gap-8",children:[s.jsxs("div",{className:"relative min-w-[80%]",children:[s.jsx(d,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"}),s.jsx(q,{placeholder:"Search by question, answer or module...",value:t,onChange:e=>u(e.target.value),className:"h-14 rounded-[1.25rem] border-none bg-white pl-12 text-sm font-medium shadow-lg shadow-slate-200/50 ring-1 ring-slate-100 transition-all focus:ring-4 focus:ring-primary/10 dark:bg-slate-900 dark:shadow-none dark:ring-slate-800"})]}),s.jsx("div",{className:"flex items-center gap-4  rounded-[1.25rem] bg-slate-100/50 p-2 dark:bg-slate-800/50",children:s.jsxs("div",{className:"flex flex-1 flex-col items-center p-2",children:[s.jsx("span",{className:"text-xl font-black text-primary",children:Q.length}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Total FAQs"})]})})]}),s.jsx("div",{className:"space-y-4",children:s.jsx(n,{mode:"popLayout",children:_.length>0?_.map((e,a)=>s.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:.05*a},children:s.jsx(f,{className:`group overflow-hidden border-none transition-all duration-300 ${v===e.id?"bg-primary shadow-2xl shadow-primary/20 ring-1 ring-primary":"bg-white shadow-xl shadow-slate-200/30 ring-1 ring-slate-100 hover:bg-slate-50 hover:ring-slate-200"} dark:bg-slate-900 dark:ring-slate-800`,children:s.jsxs(j,{className:"p-0",children:[s.jsxs("div",{className:"flex cursor-pointer items-center justify-between p-6",onClick:()=>{return s=e.id,void y(v===s?null:s);var s},children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl transition-colors "+(v===e.id?"bg-white/20 text-white":"bg-primary/10 text-primary group-hover:bg-primary group-hover:text-white"),children:s.jsx(r,{size:20})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"rounded-lg px-2 py-0.5 text-[9px] font-black uppercase tracking-widest "+(v===e.id?"bg-white/20 text-white":"bg-blue-50 text-blue-600 dark:bg-blue-900/30"),children:e.module_name}),s.jsxs("span",{className:"text-[9px] font-bold "+(v===e.id?"text-white/60":"text-slate-400"),children:["ID: #",e.id]})]}),s.jsx("h3",{className:"mt-1 text-lg font-black tracking-tight "+(v===e.id?"text-white":"text-slate-800 dark:text-slate-200"),children:e.question})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("div",{className:"transition-transform duration-300 "+(v===e.id?"rotate-180 text-white":"text-slate-300"),children:s.jsx(c,{})})})]}),s.jsx(n,{children:v===e.id&&s.jsx(o.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:s.jsxs("div",{className:"border-t border-white/10 p-8 pt-4",children:[s.jsx("div",{className:"rounded-2xl bg-white/10 p-6 text-white/90 backdrop-blur-sm",children:s.jsx("p",{className:"whitespace-pre-wrap font-medium leading-relaxed",children:e.answer})}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsxs(k,{onClick:s=>{s.stopPropagation(),(e=>{g(e),h(!0)})(e)},className:"h-10 rounded-xl bg-white/20 px-6 font-bold text-white transition-all hover:bg-white/30",children:[s.jsx(x,{className:"mr-2"})," Edit FAQ"]}),s.jsxs(k,{onClick:s=>{s.stopPropagation(),w("Delete FAQ","Are you sure you want to delete this FAQ?",()=>{return s=e.id,void L.mutate({api:N.post_deleteFaq,data:{id:s}});var s})},className:"h-10 rounded-xl border border-white/20 bg-red-500/20 px-6 font-bold text-white transition-all hover:bg-red-500/40",children:[s.jsx(m,{className:"mr-2"})," Delete"]})]})]})})})]})})},e.id)):s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50 py-20 dark:border-slate-800 dark:bg-slate-900/50",children:[s.jsx("div",{className:"mb-4 flex h-20 w-20 items-center justify-center rounded-3xl bg-slate-100 text-slate-300 dark:bg-slate-800",children:s.jsx(d,{size:32})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"No FAQs Found"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Try adjusting your search or create a new FAQ"})]})})}),s.jsx(T,{open:p,onOpenChange:h,editData:b,onSubmit:e=>{const s={question:e.question,answer:e.answer,moduleId:e.moduelName};e.id?I.mutate({api:N.post_editFaq,data:{...s,id:e.id}}):S.mutate({api:N.post_addFaq,data:s})}})]})}function B(){return s.jsx(v,{title:"FAQ Master",subTitle:"Manage All FAQs Here.",children:s.jsx(U,{})})}export{B as default};
