import{w as e,c as a,j as s,C as t,x as l,r,y as i,z as n,A as c}from"./vendor-C4evAtTJ.js";import{c as d,a as o}from"./yup-CKFt8x4I.js";import{F as m,R as h,B as x}from"./datetime-picker-AUhkjGMU.js";import{u as p,I as u,a as f}from"./index-D37-tLuj.js";import{g}from"./services-Bn_cfjy0.js";import"./select-ARkI9mnT.js";import{I as b}from"./input-DS7_2XCu.js";import{E as v,p as j}from"./ui-BtaoVrnA.js";import"./switch-BA4E8GzC.js";import"./label-CodFY8pR.js";import{u as w,a as y}from"./useCustomQuery-CL1dp-yG.js";import"./icons-DZJSvCRl.js";import"./query-CtA7BnhH.js";import"./axios-Dos3PyFQ.js";import"./zustand-DzHKdda2.js";function N({name:l,label:r,inputSize:i,...n}){const{control:c}=e(),[d,o]=a.useState(!1);return s.jsx(t,{name:l,control:c,render:({field:{ref:e,...a},fieldState:{error:t}})=>s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:r,children:[r," ",t&&r&&s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx(b,{...a,value:"number"==typeof a.value&&0===a.value?"":a.value,ref:e,className:`mt-1 ${t?"border-red-400":null}\n              ${("small"===i?"h-8":"medium"===i&&"h-10")||"large"===i&&"h-12"||"h-9"}`,type:d?"text":"password",...n}),s.jsx("button",{style:{backgroundColor:"none"},type:"button",className:"absolute right-3 top-4",onClick:()=>o(e=>!e),children:d?s.jsx(v,{width:20,height:20}):s.jsx(j,{width:20,height:20})})]}),t&&s.jsx("span",{className:"text-red-400 text-xs",children:null==t?void 0:t.message})]})})}function k(e){const a="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e",s=l.enc.Latin1.parse(l.SHA256(a).toString(l.enc.Latin1)),t=l.SHA256(a).toString().substring(0,16),r=l.enc.Latin1.parse(t),i=l.AES.encrypt(e,s,{iv:r,mode:l.mode.CBC,padding:l.pad.Pkcs7});return l.enc.Base64.stringify(i.ciphertext)}const C=d({email:o().email("Enter a valid email").required("Email is required"),password:o().min(8,"Password must be at least 8 characters").required(),captcha:o().required("Please enter the captcha")});function S(){const[e,a]=r.useState(""),t=w({}),{login:d}=p(),o=i({defaultValues:{email:"",password:"",captcha:""},resolver:c(C)}),b=y({api:`${f.getCaptcha}`,key:"getCaptcha",value:[],options:{enabled:!0}}),v=async()=>{if(null==b?void 0:b.data){const e=function(e){const a="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e";try{const s=l.enc.Latin1.parse(l.SHA256(a).toString(l.enc.Latin1)),t=l.SHA256(a).toString().substring(0,16),r=l.enc.Latin1.parse(t),i=l.enc.Base64.parse(e);return l.AES.decrypt({ciphertext:i},s,{iv:r,mode:l.mode.CBC,padding:l.pad.Pkcs7}).toString(l.enc.Utf8)}catch(s){return"Decryption failed"}}(null==b?void 0:b.data.data.captcha_code),s=document.createElement("canvas");s.width=200,s.height=50;const t=s.getContext("2d");if(t){const l=t.createLinearGradient(0,0,s.width,s.height);l.addColorStop(0,"#f9fafb"),l.addColorStop(1,"#e5e7eb"),t.fillStyle=l,t.fillRect(0,0,s.width,s.height);for(let e=0;e<30;e++)t.fillStyle=`rgba(0, 0, 0, ${.2*Math.random()})`,t.fillRect(Math.random()*s.width,Math.random()*s.height,1,1);for(let e=0;e<3;e++)t.strokeStyle=`rgba(0, 0, 0, ${.15*Math.random()})`,t.lineWidth=1,t.beginPath(),t.moveTo(Math.random()*s.width,Math.random()*s.height),t.lineTo(Math.random()*s.width,Math.random()*s.height),t.stroke();t.font="bold 26px Arial",t.fillStyle="#374151",t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0, 0, 0, 0.2)",t.shadowBlur=2,t.shadowOffsetX=1,t.shadowOffsetY=1;const r=e.split(""),i=(s.width-20*r.length)/2;r.forEach((e,a)=>{const l=i+24*a+15,r=s.height/2+5*(Math.random()-.5);t.save(),t.translate(l,r),t.rotate(.3*(Math.random()-.5)),t.fillText(e,0,0),t.restore()}),a(s.toDataURL())}}};r.useEffect(()=>{v()},[null==b?void 0:b.data]);const j=e=>(e.preventDefault(),!1),S=e=>{(e.ctrlKey||e.metaKey)&&["c","v","x"].includes(e.key.toLowerCase())&&e.preventDefault()};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"darks:bg-gray-800 darks:border-gray-800 h-[7vh] w-full border-b border-gray-200 bg-white",children:s.jsx("div",{className:"container mx-auto xl:max-w-6xl",children:s.jsx("nav",{className:"",id:"desktop-menu",children:s.jsx("a",{href:"/",children:s.jsx("div",{className:"mt-6",children:s.jsx("span",{className:"text-xl font-bold uppercase",children:"Login - Human Resource Management System"})})})})})}),s.jsx("main",{className:"flex h-[80vh] items-center justify-center bg-gray-100",children:s.jsx("div",{className:"darks:bg-gray-900 darks:bg-opacity-40 bg-gray-100",children:s.jsx("div",{className:"container mx-auto px-4 xl:max-w-6xl",children:s.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[s.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:s.jsx("div",{className:"mb-12 w-full max-w-full px-2 sm:px-12 lg:mb-0 lg:pr-20",children:s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"darks:bg-gray-800 rounded-lg bg-white p-6 shadow-xl sm:px-12 sm:py-8",children:[s.jsxs("div",{className:"space-y-3 text-center",children:[s.jsx("h1",{className:"darks:text-gray-300 mb- text-center text-2xl font-bold leading-normal text-gray-800",children:"Welcome Back"}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"mb-7 w-10 border border-b border-black"})})]}),s.jsx(m,{methods:o,onSubmit:o.handleSubmit(async e=>{var a,s,l,r,i;try{const c=await t.mutateAsync({api:f.login,data:{email:e.email,password:k(e.password),captcha_code:k(e.captcha),captcha_id:null==(s=null==(a=null==b?void 0:b.data)?void 0:a.data)?void 0:s.captcha_id,moduleId:"35"}});(null==(l=null==c?void 0:c.data)?void 0:l.status)?(await d(null==c?void 0:c.data),n.success(null==(r=null==c?void 0:c.data)?void 0:r.message)):(n.error(null==(i=null==c?void 0:c.data)?void 0:i.message),null==b||b.refetch(),o.setValue("captcha",""))}catch(c){n.error(g(c.message)),null==b||b.refetch(),o.setValue("captcha","")}finally{o.reset({...o.getValues(),email:"",password:"",captcha:""})}}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsx(h,{className:"w-full bg-background px-5 py-5",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your User Name",autoComplete:"off",onPaste:j,onCopy:j,onCut:j,onKeyDown:S})}),s.jsx("div",{className:"space-y-2",children:s.jsx(N,{className:"w-full bg-background px-5 py-5",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:j,onCopy:j,onCut:j,onKeyDown:S})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter CAPTCHA"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:(null==b?void 0:b.isFetching)?s.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100",children:s.jsxs("svg",{className:"h-5 w-5 animate-spin text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e?s.jsx("img",{src:e,alt:"CAPTCHA",className:"h-[50px] w-[150px] rounded border border-gray-300 object-contain"}):s.jsx("div",{className:"flex h-[50px] w-[150px] items-center justify-center rounded border border-gray-300 bg-gray-100 text-xs text-gray-500",children:"Failed to load"})}),s.jsx("button",{type:"button",onClick:()=>{null==b||b.refetch(),o.setValue("captcha","")},disabled:null==b?void 0:b.isFetching,className:"p-2 text-gray-500 transition-colors hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50",title:"Refresh CAPTCHA",children:s.jsx("svg",{className:"h-5 w-5 "+((null==b?void 0:b.isFetching)?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),s.jsx(h,{className:"w-full bg-background px-5 py-3",name:"captcha",placeholder:"Enter the text shown in the image",autoComplete:"off",onPaste:j,onCopy:j,onCut:j,onKeyDown:S})]}),s.jsx("div",{children:s.jsxs(x,{type:"submit",isLoading:o.formState.isSubmitting,className:"mt-2 w-full px-4 py-5 shadow-none",children:[s.jsxs("svg",{xmlnsXlink:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-box-arrow-in-right mr-1 inline-block h-4 w-4 ltr:mr-2 rtl:ml-2",viewBox:"0 0 16 16",children:[s.jsx("path",{fillRule:"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"}),s.jsx("path",{fillRule:"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]}),"Login"]})})]})})]})})})}),s.jsx("div",{className:"w-full max-w-full flex-shrink px-4 lg:w-1/2",children:s.jsxs("div",{className:"mt-6 text-center lg:mt-0",children:[s.jsx(u,{src:"/images/hrms_banner.png",alt:"welcome",className:"h-68"}),s.jsxs("div",{className:"mt-2 px-4",children:[s.jsx("h1",{className:"text-bold mb-2 text-2xl",children:"Serve Citizen Services with Ease of Access"}),s.jsx("p",{className:"mb-4 text-base text-gray-500",children:"Manage citizen government services with easy of access and serve them in on time."})]})]})})]})})})}),s.jsx("footer",{className:"darks:bg-gray-800 darks:border-gray-800 h-[10vh] w-full border-t border-gray-200 bg-white py-6",children:s.jsx("div",{className:"container mx-auto w-full px-4 xl:max-w-6xl",children:s.jsx("div",{className:"mx-auto px-4",children:s.jsxs("div",{className:"-mx-4 flex flex-row flex-wrap",children:[s.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-left md:rtl:text-right",children:s.jsxs("ul",{className:"space-x-4 ltr:pl-0 rtl:pr-0",children:[s.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:s.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Support |"})}),s.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:s.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Help Center |"})}),s.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:s.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Privacy |"})}),s.jsx("li",{className:"inline-block ltr:mr-3 rtl:ml-3",children:s.jsx("a",{className:"hover:text-indigo-500",href:"#",children:"Terms of Service"})})]})}),s.jsx("div",{className:"w-full max-w-full flex-shrink px-4 text-center md:w-1/2 md:ltr:text-right md:rtl:text-left",children:s.jsxs("p",{className:"mb-0 mt-3 md:mt-0",children:[s.jsx("a",{href:"#",className:"hover:text-indigo-500",children:"UD&HD"})," ","| All right reserved"]})})]})})})})]})}function A(){return s.jsx("div",{className:"",children:s.jsx(S,{})})}export{A as default};
