import{r as e,y as s,b3 as a,j as i,E as t,bf as r,M as d,ao as n,aK as l,ar as m}from"./vendor-C2pSf0e_.js";import{u as c,b as o,s as x,C as h,r as p,f as u,S as g,q as j,w as v,x as f,y as N,z as b,Q as y,I as A,P as w}from"./index-DHN82BNk.js";import"./query-DWeUG8lz.js";import"./ui-DEgguNHf.js";import"./icons-EVOHFWxn.js";import"./axios-Dos3PyFQ.js";import"./zustand-DirRCQQf.js";import"./yup-D2FteOaG.js";const S={Name:"",designation:"",Image:null,address:"",phone:"",email:""};function k(){var w;const[k,q]=e.useState(!1),[C,I]=e.useState(!1),[F,M]=e.useState(null),_=s({defaultValues:S}),E=c({}),P=o({api:x.api_getAdministrativeApiList,key:"administrativeList",options:{enabled:!0}}),z=(null==(w=null==P?void 0:P.data)?void 0:w.data)||[],L=o({api:x.api_getAdministrativeApiById,key:`administrativeById_${F??""}`,config:{id:F},options:{enabled:!!F&&C&&k}});e.useEffect(()=>{var e;if(!k||!C)return;const s=null==(e=null==L?void 0:L.data)?void 0:e.data;if(!s)return;const a=Array.isArray(s)?s[0]:s;a&&_.reset({Name:a.name||"",designation:a.designation||"",Image:null,address:a.address||"",phone:a.phone||"",email:a.email||""})},[k,C,null==L?void 0:L.data,_]);const D=_.handleSubmit(async e=>{var s,i,t;try{const r=new FormData;r.append("Name",e.Name),r.append("designation",e.designation),r.append("address",e.address),r.append("phone",e.phone),r.append("email",e.email),e.Image&&r.append("Image",e.Image),C&&F&&r.append("id",F.toString());const d=await E.mutateAsync({api:C?x.api_updateAdministrativeApi:x.api_PostAdministrativeApi,data:r});(null==(s=null==d?void 0:d.data)?void 0:s.status)?(a.success((null==(i=null==d?void 0:d.data)?void 0:i.message)||(C?"Administrative updated successfully":"Administrative created successfully")),q(!1),I(!1),M(null),_.reset(S),P.refetch()):a.error((null==(t=null==d?void 0:d.data)?void 0:t.message)||"Failed to save Administrative")}catch(r){a.error("Failed to save Administrative")}});return i.jsxs("div",{children:[i.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsxs(h,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[i.jsx("div",{className:"border-b bg-muted/30 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-600",children:i.jsx(r,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Administrative"}),i.jsxs("div",{className:"inline-block rounded-full bg-indigo-600/10 px-3 py-0.5 text-[10px] font-bold uppercase tracking-wider text-indigo-600",children:[z.length," Members"]})]})]}),i.jsxs(p,{type:"button",onClick:()=>{I(!1),M(null),_.reset(S),q(!0)},className:"flex items-center gap-2 bg-primary shadow-md transition-all hover:bg-primary/90 active:scale-95",children:[i.jsx(r,{className:"h-4 w-4"}),"Add Member"]})]})}),i.jsx(u,{className:"p-0",children:P.isLoading?i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(g,{}),i.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground",children:"Loading Administrative..."})]})}):z.length>0?i.jsx("div",{className:"space-y-4 p-6",children:z.map(e=>i.jsx("div",{className:"rounded-lg border p-4 transition-shadow hover:shadow-md",children:i.jsxs("div",{className:"flex items-start gap-4",children:[e.image_url&&i.jsx("img",{src:e.image_url,alt:e.name,className:"h-16 w-16 rounded-full object-cover"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-foreground",children:e.name}),i.jsx("p",{className:"text-sm font-medium text-blue-600",children:e.designation})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(p,{variant:"ghost",size:"icon",onClick:()=>(e=>{I(!0),M(e.id),q(!0)})(e),className:"h-8 w-8 text-blue-600 hover:bg-blue-600/10",children:i.jsx(d,{className:"h-4 w-4"})}),i.jsx(j,{checked:1===e.is_suspended,onCheckedChange:()=>(async(e,s)=>{var i,t,r;try{const d=await E.mutateAsync({api:x.api_deleteAdministrativeApi,data:{id:e,status:1===s?0:1}});(null==(i=null==d?void 0:d.data)?void 0:i.status)?(a.success((null==(t=null==d?void 0:d.data)?void 0:t.message)||`Administrative ${1===s?"deactivated":"activated"} successfully`),P.refetch()):a.error((null==(r=null==d?void 0:d.data)?void 0:r.message)||"Failed to update status")}catch(d){a.error("Failed to update status")}})(e.id,e.is_suspended),className:"data-[state=checked]:bg-green-500"})]})]}),i.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(n,{className:"h-3 w-3"}),i.jsx("span",{children:e.address})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(l,{className:"h-3 w-3"}),i.jsx("span",{children:e.phone})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(m,{className:"h-3 w-3"}),i.jsx("span",{children:e.email})]})]})]})]})]})},e.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[i.jsx("div",{className:"mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted/50",children:i.jsx(r,{className:"h-12 w-12 text-muted-foreground/40"})}),i.jsx("h3",{className:"mb-2 text-xl font-bold text-foreground",children:"No Administrative Members"}),i.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:"Add administrative members to display on the citizen landing page."})]})})]})}),i.jsx(v,{open:k,onOpenChange:e=>{q(e),e||(I(!1),M(null),_.reset(S))},children:i.jsxs(f,{className:"max-h-[90vh] min-w-[60vw] overflow-y-auto",children:[i.jsx(N,{children:i.jsx(b,{className:"text-xl font-bold",children:C?"Update Administrative Member":"Add Administrative Member"})}),C&&L.isLoading?i.jsxs("div",{className:"py-10 text-center",children:[i.jsx(g,{}),i.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Loading member details..."})]}):i.jsxs("form",{onSubmit:D,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"Name",children:"Name *"}),i.jsx(A,{id:"Name",..._.register("Name",{required:"Name is required"}),placeholder:"Enter name"}),_.formState.errors.Name&&i.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.Name.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"designation",children:"Designation *"}),i.jsx(A,{id:"designation",..._.register("designation",{required:"Designation is required"}),placeholder:"Enter designation"}),_.formState.errors.designation&&i.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.designation.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(y,{htmlFor:"Image",children:["Profile Image ",!C&&"*"]}),i.jsx(A,{id:"Image",type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];_.setValue("Image",a||null)}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"address",children:"Address *"}),i.jsx(A,{id:"address",..._.register("address",{required:"Address is required"}),placeholder:"Enter address"}),_.formState.errors.address&&i.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.address.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"phone",children:"Phone *"}),i.jsx(A,{id:"phone",..._.register("phone",{required:"Phone is required"}),placeholder:"Enter phone number"}),_.formState.errors.phone&&i.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.phone.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"email",children:"Email *"}),i.jsx(A,{id:"email",type:"email",..._.register("email",{required:"Email is required"}),placeholder:"Enter email address"}),_.formState.errors.email&&i.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.email.message})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[i.jsx(p,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),i.jsx(p,{type:"submit",className:"min-w-[120px]",disabled:E.isPending,children:E.isPending?"Saving...":C?"Update Member":"Create Member"})]})]})]})})]})}function q(){return i.jsx(w,{title:"Citizen Desk",subTitle:"Manage Citizen Desk Masters",children:i.jsx(k,{})})}export{q as default};
