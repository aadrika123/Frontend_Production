import{r as e,j as s,y as a,B as t,a7 as r,b3 as l,H as i,G as d,I as n,E as o,at as c,M as x,P as u}from"./vendor-C2pSf0e_.js";import{n as m,b as h,m as p,w as b,x as g,y as f,z as j,E as w,G as v,H as y,J as N,K as k,I as q,N as F,e as A,u as C,C as Q,f as S,o as I,P as L}from"./index-DHN82BNk.js";import{c as _,b as E,a as z}from"./yup-D2FteOaG.js";import"./query-DWeUG8lz.js";import"./ui-DEgguNHf.js";import"./icons-EVOHFWxn.js";import"./axios-Dos3PyFQ.js";import"./zustand-DirRCQQf.js";const D=e.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:m("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));D.displayName="Textarea";const M=_().shape({question:z().required("Question is required"),answer:z().required("Answer is required"),moduleId:E().required("Module is required")});function T({open:l,onOpenChange:i,editData:d,onSubmit:n}){var o;const{register:c,handleSubmit:x,reset:u,setValue:m,watch:C,formState:{errors:Q}}=a({resolver:t(M),defaultValues:{question:"",answer:"",moduleId:void 0}}),S=h({api:p.post_moduleList,key:"moduleList",options:{enabled:l}}),I=(null==(o=null==S?void 0:S.data)?void 0:o.data)||[];e.useEffect(()=>{l&&u(d?{question:d.question,answer:d.answer,moduleId:d.module_id}:{question:"",answer:"",moduleId:void 0})},[l,d,u]);const L=C("moduleId");return s.jsx(b,{open:l,onOpenChange:i,children:s.jsxs(g,{className:"max-w-2xl overflow-hidden border-none bg-slate-50 p-0 shadow-2xl dark:bg-slate-900",children:[s.jsx(f,{className:"bg-primary px-8 py-6 text-white",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-white/20 backdrop-blur-md",children:s.jsx(r,{size:20})}),s.jsxs("div",{children:[s.jsx(j,{className:"text-2xl font-black tracking-tight",children:d?"Edit FAQ":"Add New FAQ"}),s.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-white/70",children:d?"Update existing faq details":"Create a new frequently asked question"})]})]})}),s.jsxs("form",{onSubmit:x(e=>{n({...e,id:null==d?void 0:d.id,moduelName:e.moduleId})}),className:"space-y-6 p-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Target Module"}),s.jsxs(w,{onValueChange:e=>m("moduleId",Number(e)),value:L?String(L):void 0,children:[s.jsx(v,{className:"h-12 rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950",children:s.jsx(y,{placeholder:"Select a module"})}),s.jsx(N,{children:I.map(e=>s.jsx(k,{value:String(e.id),children:e.module_name},e.id))})]}),Q.moduleId&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:Q.moduleId.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Question"}),s.jsx(q,{...c("question"),placeholder:"How do I...?",className:"h-12 rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950"}),Q.question&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:Q.question.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Answer"}),s.jsx(D,{...c("answer"),placeholder:"Briefly explain the answer...",className:"min-h-[150px] rounded-xl border-slate-200 bg-white font-medium shadow-sm focus:ring-4 focus:ring-primary/10 dark:border-slate-800 dark:bg-slate-950"}),Q.answer&&s.jsx("p",{className:"text-[10px] font-bold uppercase text-red-500",children:Q.answer.message})]})]}),s.jsxs(F,{className:"gap-3 border-t border-slate-100 pt-6 dark:border-slate-800",children:[s.jsx(A,{type:"button",variant:"outline",onClick:()=>i(!1),className:"h-12 rounded-xl border-slate-200 bg-white px-8 font-bold text-slate-600 transition-all hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-400",children:"Cancel"}),s.jsx(A,{type:"submit",className:"h-12 rounded-xl bg-primary px-8 font-bold shadow-lg shadow-primary/20 transition-all hover:bg-primary/90 active:scale-95",children:d?"Update FAQ":"Create FAQ"})]})]})]})})}function H(){var a;const[t,m]=e.useState(""),[b,g]=e.useState(!1),[f,j]=e.useState(null),[w,v]=e.useState(null),y=h({api:p.post_listFaq,key:"faqList",options:{enabled:!0}}),N=(null==(a=null==y?void 0:y.data)?void 0:a.data)||[],k=C({options:{onSuccess:()=>{l.success("FAQ Created Successfully"),g(!1),y.refetch()},onError:()=>{l.error("Failed to create FAQ")}}}),F=C({options:{onSuccess:()=>{l.success("FAQ Updated Successfully"),g(!1),y.refetch()},onError:()=>{l.error("Failed to update FAQ")}}}),L=C({options:{onSuccess:()=>{l.success("FAQ Deleted Successfully"),y.refetch()},onError:()=>{l.error("Failed to delete FAQ")}}}),_=N.filter(e=>{var s,a,r;return(null==(s=null==e?void 0:e.question)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=null==e?void 0:e.answer)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(r=null==e?void 0:e.module_name)?void 0:r.toLowerCase().includes(t.toLowerCase()))});return s.jsxs("div",{className:"mx-auto max-w-6xl space-y-8 p-8",children:[s.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black tracking-tight text-slate-800 dark:text-white",children:"Knowledge Base"}),s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Manage frequently asked questions across all system modules"})]}),s.jsxs(A,{onClick:()=>{j(null),g(!0)},className:"h-12 gap-2 rounded-2xl bg-primary px-6 font-bold shadow-xl shadow-primary/20 transition-all hover:bg-primary/90 active:scale-95",children:[s.jsx(i,{size:14})," Create New FAQ"]})]}),s.jsxs("div",{className:" flex items-center justify-between gap-8",children:[s.jsxs("div",{className:"relative min-w-[80%]",children:[s.jsx(d,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"}),s.jsx(q,{placeholder:"Search by question, answer or module...",value:t,onChange:e=>m(e.target.value),className:"h-14 rounded-[1.25rem] border-none bg-white pl-12 text-sm font-medium shadow-lg shadow-slate-200/50 ring-1 ring-slate-100 transition-all focus:ring-4 focus:ring-primary/10 dark:bg-slate-900 dark:shadow-none dark:ring-slate-800"})]}),s.jsx("div",{className:"flex items-center gap-4  rounded-[1.25rem] bg-slate-100/50 p-2 dark:bg-slate-800/50",children:s.jsxs("div",{className:"flex flex-1 flex-col items-center p-2",children:[s.jsx("span",{className:"text-xl font-black text-primary",children:N.length}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Total FAQs"})]})})]}),s.jsx("div",{className:"space-y-4",children:s.jsx(n,{mode:"popLayout",children:_.length>0?_.map((e,a)=>s.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:.05*a},children:s.jsx(Q,{className:`group overflow-hidden border-none transition-all duration-300 ${w===e.id?"bg-primary shadow-2xl shadow-primary/20 ring-1 ring-primary":"bg-white shadow-xl shadow-slate-200/30 ring-1 ring-slate-100 hover:bg-slate-50 hover:ring-slate-200"} dark:bg-slate-900 dark:ring-slate-800`,children:s.jsxs(S,{className:"p-0",children:[s.jsxs("div",{className:"flex cursor-pointer items-center justify-between p-6",onClick:()=>{return s=e.id,void v(w===s?null:s);var s},children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl transition-colors "+(w===e.id?"bg-white/20 text-white":"bg-primary/10 text-primary group-hover:bg-primary group-hover:text-white"),children:s.jsx(r,{size:20})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"rounded-lg px-2 py-0.5 text-[9px] font-black uppercase tracking-widest "+(w===e.id?"bg-white/20 text-white":"bg-blue-50 text-blue-600 dark:bg-blue-900/30"),children:e.module_name}),s.jsxs("span",{className:"text-[9px] font-bold "+(w===e.id?"text-white/60":"text-slate-400"),children:["ID: #",e.id]})]}),s.jsx("h3",{className:"mt-1 text-lg font-black tracking-tight "+(w===e.id?"text-white":"text-slate-800 dark:text-slate-200"),children:e.question})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("div",{className:"transition-transform duration-300 "+(w===e.id?"rotate-180 text-white":"text-slate-300"),children:s.jsx(c,{})})})]}),s.jsx(n,{children:w===e.id&&s.jsx(o.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:s.jsxs("div",{className:"border-t border-white/10 p-8 pt-4",children:[s.jsx("div",{className:"rounded-2xl bg-white/10 p-6 text-white/90 backdrop-blur-sm",children:s.jsx("p",{className:"whitespace-pre-wrap font-medium leading-relaxed",children:e.answer})}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsxs(A,{onClick:s=>{s.stopPropagation(),(e=>{j(e),g(!0)})(e)},className:"h-10 rounded-xl bg-white/20 px-6 font-bold text-white transition-all hover:bg-white/30",children:[s.jsx(x,{className:"mr-2"})," Edit FAQ"]}),s.jsxs(A,{onClick:s=>{s.stopPropagation(),I("Delete FAQ","Are you sure you want to delete this FAQ?",()=>{return s=e.id,void L.mutate({api:p.post_deleteFaq,data:{id:s}});var s})},className:"h-10 rounded-xl border border-white/20 bg-red-500/20 px-6 font-bold text-white transition-all hover:bg-red-500/40",children:[s.jsx(u,{className:"mr-2"})," Delete"]})]})]})})})]})})},e.id)):s.jsxs("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border-2 border-dashed border-slate-200 bg-slate-50 py-20 dark:border-slate-800 dark:bg-slate-900/50",children:[s.jsx("div",{className:"mb-4 flex h-20 w-20 items-center justify-center rounded-3xl bg-slate-100 text-slate-300 dark:bg-slate-800",children:s.jsx(d,{size:32})}),s.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"No FAQs Found"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Try adjusting your search or create a new FAQ"})]})})}),s.jsx(T,{open:b,onOpenChange:g,editData:f,onSubmit:e=>{const s={question:e.question,answer:e.answer,moduleId:e.moduelName};e.id?F.mutate({api:p.post_editFaq,data:{...s,id:e.id}}):k.mutate({api:p.post_addFaq,data:s})}})]})}function P(){return s.jsx(L,{title:"FAQ Master",subTitle:"Manage All FAQs Here.",children:s.jsx(H,{})})}export{P as default};
