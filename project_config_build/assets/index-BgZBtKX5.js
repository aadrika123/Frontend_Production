import{r as e,y as s,z as t,j as a,J as r,bk as n,W as l,X as i,Y as d,aF as o,am as c,a7 as m,a6 as x,Z as u}from"./vendor-Cw0yupI3.js";import{C as p,a as h,D as f,e as j,f as g,g as N,P as v}from"./card-Ca9nFfyp.js";import{d as b,B as y,c as w}from"./index-Uy6CRp-L.js";import{g as C}from"./services-Bn_cfjy0.js";import{u as k,a as S}from"./useCustomQuery-C4KcVbng.js";import{S as I}from"./switch-Bwt2DsG8.js";import{T as A,a as L,b as _,c as P,d as E,e as F}from"./table-CTZ9XDT-.js";import{P as q}from"./index-CuIXjQEV.js";import{S as D}from"./Spinner-CeCCKMkg.js";import{L as M}from"./label-CaZSqfZ1.js";import{I as Z}from"./input-DbQNgrMd.js";import"./icons-DfkRqyLz.js";import"./ui-Cxd06urH.js";import"./query-Dol-AhSL.js";import"./axios-Dos3PyFQ.js";import"./zustand-DjDQVScW.js";const z={id:"",departnameName:"",address:"",mobile:"",email:"",fax:""};function B(){var v;const[B,T]=e.useState(1),[$,U]=e.useState(10),[J,K]=e.useState(""),O=e.useRef(null),[Q,R]=e.useState(!1),[V,W]=e.useState(!1),[X,Y]=e.useState(null),G=s({defaultValues:z}),H=k({}),ee=S({api:b.api_getContactInfoApiList,key:"contactLinkList",options:{enabled:!0}}),se=(null==(v=null==ee?void 0:ee.data)?void 0:v.data)||[],te=S({api:b.api_getContactInfoApiById,key:`contactLinkById_${X??""}`,config:{id:X},options:{enabled:!!X&&V&&Q}});e.useEffect(()=>{const e=e=>{var s;!e.altKey||"s"!==e.key&&"S"!==e.key||(e.preventDefault(),e.stopPropagation(),null==(s=O.current)||s.focus())};return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)},[]),e.useEffect(()=>{var e;if(!Q)return;if(!V)return void G.reset(z);const s=null==(e=null==te?void 0:te.data)?void 0:e.data;if(!s)return;const t=Array.isArray(s)?s[0]:s;t&&G.reset({id:String(t.id)||"",departnameName:t.department_name||"",address:t.address||"",mobile:t.mobile_no||"",email:t.email||"",fax:t.fax||""})},[Q,V,null==te?void 0:te.data,G]);const ae=e.useMemo(()=>{const e=J.trim().toLowerCase();return e?null==se?void 0:se.filter(s=>{var t,a,r;return(null==(t=s.department_name)?void 0:t.toLowerCase().includes(e))||(null==(a=s.email)?void 0:a.toLowerCase().includes(e))||(null==(r=s.mobile_no)?void 0:r.toLowerCase().includes(e))}):se},[se,J]),re=B*$,ne=re-$,le=null==ae?void 0:ae.slice(ne,re),ie=G.handleSubmit(async e=>{var s,a,r;try{const n=await H.mutateAsync({api:V?b.api_updateContactInfoApi:b.api_PostContactInfoApi,data:V?{id:X,departnameName:e.departnameName,address:e.address,mobile:e.mobile,email:e.email,fax:e.fax,isSuspended:!0}:{departnameName:e.departnameName,address:e.address,mobile:e.mobile,email:e.email,fax:e.fax,isSuspended:!0}});(null==(s=null==n?void 0:n.data)?void 0:s.status)?(t.success((null==(a=null==n?void 0:n.data)?void 0:a.message)||(V?"Contact Info updated successfully":"Contact Info created successfully")),R(!1),W(!1),Y(null),G.reset(z),ee.refetch()):t.error((null==(r=null==n?void 0:n.data)?void 0:r.message)||"Failed to save Contact Info")}catch(n){t.error(C(n))}});return a.jsxs("div",{children:[a.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsxs(p,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[a.jsx("div",{className:"border-b bg-gradient-to-r from-purple-500/10 via-blue-500/10 to-cyan-500/10 p-4",children:a.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 text-white shadow-lg",children:a.jsx(n,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Contact Information"}),a.jsxs("div",{className:"inline-block rounded-full bg-gradient-to-r from-purple-600/10 to-blue-600/10 px-3 py-0.5 text-[10px] font-bold uppercase tracking-wider text-purple-600",children:[null==se?void 0:se.length," Contacts Found"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative flex items-center md:min-w-[320px]",children:[a.jsx(l,{className:"absolute left-3 h-4 w-4 text-muted-foreground"}),a.jsx("input",{ref:O,type:"text",placeholder:"Search contacts...",value:J,onChange:e=>{K(e.target.value),T(1)},className:"h-10 w-full rounded-xl border border-border bg-background pl-10 pr-20 text-sm outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"}),a.jsx("div",{className:"absolute right-2.5 hidden items-center gap-1 sm:flex",children:a.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[a.jsx("span",{className:"text-xs",children:"Alt"}),"S"]})})]}),a.jsxs(y,{type:"button",onClick:()=>{W(!1),Y(null),G.reset(z),R(!0)},className:"flex items-center gap-2 shadow-md transition-all hover:from-purple-700 hover:to-blue-700 active:scale-95",children:[a.jsx(i,{className:"h-4 w-4"}),"Add Contact"]})]})]})}),a.jsxs(h,{className:"p-0",children:[ee.isLoading?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(D,{}),a.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground",children:"Loading Contact Information..."})]})}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs(A,{children:[a.jsx(L,{children:a.jsxs(_,{className:"border-b-2 hover:bg-transparent",children:[a.jsx(P,{className:"w-20 text-center text-xs font-bold uppercase tracking-wider text-foreground/70",children:"#"}),a.jsx(P,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Department"}),a.jsx(P,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Address"}),a.jsx(P,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Contact"}),a.jsx(P,{className:"text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Fax"}),a.jsx(P,{className:"text-center text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Status"}),a.jsx(P,{className:"text-center text-xs font-bold uppercase tracking-wider text-foreground/70",children:"Actions"})]})}),a.jsx(E,{children:a.jsx(d,{children:null==le?void 0:le.map((e,s)=>a.jsxs(r.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"group/row border-b transition-all hover:bg-muted/40",children:[a.jsx(F,{className:"py-4 text-center",children:a.jsx("div",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-purple-100 to-blue-100 text-xs font-bold text-purple-700",children:ne+s+1})}),a.jsx(F,{className:"max-w-xs py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(n,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-foreground",children:e.department_name})]})}),a.jsx(F,{className:"max-w-md py-4",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:e.address})}),a.jsx(F,{className:"py-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(o,{className:"h-3 w-3 text-green-600"}),a.jsx("span",{children:e.mobile_no})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(c,{className:"h-3 w-3 text-blue-600"}),a.jsx("span",{className:"truncate",children:e.email})]})]})}),a.jsx(F,{className:"py-4",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:e.fax||"N/A"})}),a.jsx(F,{className:"py-4 text-center",children:a.jsxs("span",{className:w("inline-flex items-center gap-1 rounded-full border px-2.5 py-0.5 text-xs font-bold transition-colors",1===e.is_suspended?"border-green-500/20 bg-green-500/10 text-green-500":"border-red-500/20 bg-red-500/10 text-red-500"),children:[1===e.is_suspended?a.jsx(m,{className:"h-3 w-3"}):a.jsx(x,{className:"h-3 w-3"}),1===e.is_suspended?"Active":"Inactive"]})}),a.jsx(F,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(y,{variant:"ghost",size:"icon",onClick:()=>(e=>{W(!0),Y(e.id),R(!0)})(e),className:"h-8 w-8 text-purple-600 hover:bg-purple-600/10 hover:text-purple-700",children:a.jsx(u,{className:"h-4 w-4"})}),a.jsx(I,{checked:1===e.is_suspended,onCheckedChange:()=>(async(e,s)=>{var a,r,n;try{const l=await H.mutateAsync({api:b.api_deleteContactInfoApi,data:{id:e,status:1===s?0:1}});(null==(a=null==l?void 0:l.data)?void 0:a.status)?(t.success((null==(r=null==l?void 0:l.data)?void 0:r.message)||`Contact Info ${1===s?"deactivated":"activated"} successfully`),ee.refetch()):t.error((null==(n=null==l?void 0:l.data)?void 0:n.message)||"Failed to update Contact Info status")}catch(l){t.error(C(l))}})(e.id,e.is_suspended),className:"data-[state=checked]:bg-green-500"})]})})]},e.id))})})]}),(null==ae?void 0:ae.length)>0&&a.jsx("div",{className:"border-t p-4",children:a.jsx(q,{currentPage:B,totalItems:null==ae?void 0:ae.length,itemsPerPage:$,onPageChange:T,onItemsPerPageChange:e=>{U(e),T(1)}})})]}),!ee.isLoading&&0===(null==se?void 0:se.length)&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[a.jsx("div",{className:"mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-purple-100 to-blue-100",children:a.jsx(n,{className:"h-12 w-12 text-purple-400"})}),a.jsx("h3",{className:"mb-2 text-xl font-bold text-foreground",children:"No Contact Information found"}),a.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:J?"Try a different search term.":"Create your first Contact Information entry."})]})]})]})}),a.jsx(f,{open:Q,onOpenChange:e=>{R(e),e||(W(!1),Y(null),G.reset(z))},children:a.jsxs(j,{className:"max-h-[90vh] min-w-[50vw] overflow-y-auto",children:[a.jsx(g,{children:a.jsxs(N,{className:"flex items-center gap-2 text-xl font-bold",children:[a.jsx(n,{className:"h-5 w-5 text-purple-600"}),V?"Update Contact Information":"Add New Contact Information"]})}),V&&te.isLoading?a.jsxs("div",{className:"py-10 text-center",children:[a.jsx(D,{}),a.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Loading Contact Information..."})]}):a.jsxs("form",{onSubmit:ie,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(M,{htmlFor:"departnameName",children:"Department Name"}),a.jsx(Z,{...G.register("departnameName",{required:"Department name is required"}),placeholder:"Enter department name",className:"h-10"}),G.formState.errors.departnameName&&a.jsx("p",{className:"text-sm text-red-500",children:G.formState.errors.departnameName.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(M,{htmlFor:"address",children:"Address"}),a.jsx(Z,{...G.register("address",{required:"Address is required"}),placeholder:"Enter the address",className:"h-10"}),G.formState.errors.address&&a.jsx("p",{className:"text-sm text-red-500",children:G.formState.errors.address.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(M,{htmlFor:"mobile",children:"Mobile Number"}),a.jsx(Z,{...G.register("mobile",{required:"Mobile number is required"}),placeholder:"Enter mobile number",className:"h-10"}),G.formState.errors.mobile&&a.jsx("p",{className:"text-sm text-red-500",children:G.formState.errors.mobile.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(M,{htmlFor:"email",children:"Email"}),a.jsx(Z,{...G.register("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),placeholder:"Enter email address",className:"h-10"}),G.formState.errors.email&&a.jsx("p",{className:"text-sm text-red-500",children:G.formState.errors.email.message})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(M,{htmlFor:"fax",children:"Fax"}),a.jsx(Z,{...G.register("fax"),placeholder:"Enter fax number (optional)",className:"h-10"})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[a.jsx(y,{type:"button",variant:"outline",onClick:()=>R(!1),children:"Cancel"}),a.jsx(y,{type:"submit",className:"min-w-[120px] bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:H.isPending,children:H.isPending?"Saving...":V?"Update Contact":"Create Contact"})]})]})]})})]})}function T(){return a.jsx(v,{title:"Contant Link",subTitle:"Manage Contant Links here. ",children:a.jsx(B,{})})}export{T as default};
