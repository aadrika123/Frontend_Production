import{r as e,y as s,z as t,j as i,E as a,be as n,M as o,b8 as l}from"./vendor-of9_hwUT.js";import{u as d,b as c,s as r,g as u,C as m,r as x,f as h,S as b,q as j,w as v,x as p,y as f,z as g,U as y,P as N}from"./index-CVblQ-Zi.js";import"./query-CfdbInZo.js";import"./ui-DGRyWpwx.js";import"./icons-C5eWvnai.js";import"./axios-Dos3PyFQ.js";import"./zustand-xphxtTnV.js";import"./yup-BW00wNfM.js";const U={aboutUs:"",vision:"",mission:"",objective:"",function:""};function A(){var N;const[A,w]=e.useState(!1),[_,C]=e.useState(!1),[V,S]=e.useState(null),L=s({defaultValues:U}),T=d({}),k=c({api:r.api_getAboutUsApiList,key:"aboutUsList",options:{enabled:!0}}),M=(null==(N=null==k?void 0:k.data)?void 0:N.data)||[],F=c({api:r.api_getAboutUsApiById,key:`aboutUsById_${V??""}`,config:{id:V},options:{enabled:!!V&&_&&A}});e.useEffect(()=>{var e;if(!A||!_)return;const s=null==(e=null==F?void 0:F.data)?void 0:e.data;if(!s)return;const t=Array.isArray(s)?s[0]:s;t&&L.reset({aboutUs:t.about_us||"",vision:t.vision||"",mission:t.mission||"",objective:t.objective||"",function:t.functn||""})},[A,_,null==F?void 0:F.data,L]);const I=L.handleSubmit(async e=>{var s,i,a;try{const n=await T.mutateAsync({api:_?r.api_updateAboutUsApi:r.api_PostAboutUsApi,data:_?{id:V,aboutUs:e.aboutUs,vision:e.vision,mission:e.mission,objective:e.objective,function:e.function}:{aboutUs:e.aboutUs,vision:e.vision,mission:e.mission,objective:e.objective,function:e.function}});(null==(s=null==n?void 0:n.data)?void 0:s.status)?(t.success((null==(i=null==n?void 0:n.data)?void 0:i.message)||(_?"About Us updated successfully":"About Us created successfully")),w(!1),C(!1),S(null),L.reset(U),k.refetch()):t.error((null==(a=null==n?void 0:n.data)?void 0:a.message)||"Failed to save About Us")}catch(n){t.error(u(n))}});return i.jsxs("div",{children:[i.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsxs(m,{className:"overflow-hidden rounded-2xl border bg-card shadow-lg",children:[i.jsx("div",{className:"border-b bg-muted/30 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-blue-600/10 text-blue-600",children:i.jsx(n,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-foreground",children:"About Us"}),i.jsx("div",{className:"inline-block rounded-full bg-blue-600/10 px-3 py-0.5 text-[10px] font-bold uppercase tracking-wider text-blue-600",children:M.length>0?"Configured":"Not Configured"})]})]}),i.jsxs(x,{type:"button",onClick:()=>{C(!1),S(null),L.reset(U),w(!0)},className:"flex items-center gap-2 bg-primary shadow-md transition-all hover:bg-primary/90 active:scale-95",children:[i.jsx(n,{className:"h-4 w-4"}),"Add About Us"]})]})}),i.jsx(h,{className:"p-0",children:k.isLoading?i.jsx("div",{className:"flex h-64 items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(b,{}),i.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground",children:"Loading About Us..."})]})}):M.length>0?i.jsx("div",{className:"p-6 space-y-6",children:M.map(e=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between border-b pb-4 mb-4",children:[i.jsx("h4",{className:"text-lg font-semibold",children:"About Us Information"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(x,{variant:"ghost",size:"icon",onClick:()=>(e=>{C(!0),S(e.id),w(!0)})(e),className:"h-8 w-8 text-blue-600 hover:bg-blue-600/10",children:i.jsx(o,{className:"h-4 w-4"})}),i.jsx(j,{checked:1===e.is_suspended,onCheckedChange:()=>(async(e,s)=>{var i,a,n;try{const o=await T.mutateAsync({api:r.api_deleteAboutUsApi,data:{id:e,status:1===s?0:1}});(null==(i=null==o?void 0:o.data)?void 0:i.status)?(t.success((null==(a=null==o?void 0:o.data)?void 0:a.message)||`About Us ${1===s?"deactivated":"activated"} successfully`),k.refetch()):t.error((null==(n=null==o?void 0:o.data)?void 0:n.message)||"Failed to update status")}catch(o){t.error(u(o))}})(e.id,e.is_suspended),className:"data-[state=checked]:bg-green-500"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"About Us"}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.about_us},className:"prose prose-sm max-w-none"})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Vision"}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.vision},className:"prose prose-sm max-w-none"})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Mission"}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.mission},className:"prose prose-sm max-w-none"})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Objective"}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.objective},className:"prose prose-sm max-w-none"})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Functions"}),i.jsx("div",{dangerouslySetInnerHTML:{__html:e.functn},className:"prose prose-sm max-w-none"})]})]})]},e.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[i.jsx("div",{className:"mb-4 flex h-24 w-24 items-center justify-center rounded-full bg-muted/50",children:i.jsx(n,{className:"h-12 w-12 text-muted-foreground/40"})}),i.jsx("h3",{className:"mb-2 text-xl font-bold text-foreground",children:"No About Us Information"}),i.jsx("p",{className:"max-w-sm text-sm text-muted-foreground",children:"Add About Us information to display on the citizen landing page."})]})})]})}),i.jsx(v,{open:A,onOpenChange:e=>{w(e),e||(C(!1),S(null),L.reset(U))},children:i.jsxs(p,{className:"max-h-[90vh] min-w-[70vw] overflow-y-auto",children:[i.jsx(f,{children:i.jsx(g,{className:"text-xl font-bold",children:_?"Update About Us":"Add About Us"})}),_&&F.isLoading?i.jsxs("div",{className:"py-10 text-center",children:[i.jsx(b,{}),i.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:"Loading About Us details..."})]}):i.jsxs("form",{onSubmit:I,className:"space-y-5",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"aboutUs",children:"About Us"}),i.jsx(l,{value:L.watch("aboutUs"),onTextChange:e=>L.setValue("aboutUs",e.htmlValue),style:{height:"250px"}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"vision",children:"Vision"}),i.jsx(l,{value:L.watch("vision"),onTextChange:e=>L.setValue("vision",e.htmlValue),style:{height:"250px"}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"mission",children:"Mission"}),i.jsx(l,{value:L.watch("mission"),onTextChange:e=>L.setValue("mission",e.htmlValue),style:{height:"250px"}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"objective",children:"Objective"}),i.jsx(l,{value:L.watch("objective"),onTextChange:e=>L.setValue("objective",e.htmlValue),style:{height:"250px"}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(y,{htmlFor:"function",children:"Functions"}),i.jsx(l,{value:L.watch("function"),onTextChange:e=>L.setValue("function",e.htmlValue),style:{height:"250px"}})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[i.jsx(x,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),i.jsx(x,{type:"submit",className:"min-w-[120px]",disabled:T.isPending,children:T.isPending?"Saving...":_?"Update About Us":"Create About Us"})]})]})]})})]})}function w(){return i.jsx(N,{title:"About Us Master",subTitle:"Manage About Us content here.",children:i.jsx(A,{})})}export{w as default};
