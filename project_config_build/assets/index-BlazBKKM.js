import{m as e,j as a,J as s,ab as t,a3 as l,ac as r,ad as i,S as d,ae as n,r as o,af as c,ag as x,ah as m,ai as u,Z as h,aj as p,ak as b,al as g,am as f,a4 as j,an as v,ao as N,Y as w,y,A as k,z as _,ap as C,aq as z,ar as S,as as A,at as I,X as L,W as M,$,a2 as D,a7 as U,au as O,av as W,aw as B,ax as R,ay as P,az as T,aA as Z,c as F,aB as E,a8 as q,aC as H}from"./vendor-Cw0yupI3.js";import{C as V,a as G,c as K,d as J,D as Q,e as X,f as Y,g as ee,P as ae}from"./card-B8oLHT_S.js";import{B as se,c as te,m as le,d as re,e as ie}from"./index-iXZY_DvU.js";import{C as de}from"./CreateUlbForm-B3gWrEu_.js";import{a as ne,u as oe}from"./useCustomQuery-B0IS257H.js";import{T as ce,a as xe,b as me,c as ue}from"./tabs-TwNTmgup.js";import{c as he,a as pe,d as be}from"./yup-CjHziZVU.js";import{T as ge,a as fe,b as je,c as ve,d as Ne,e as we}from"./table-DRFVuCdF.js";import{I as ye}from"./input-LWSecp6H.js";import{S as ke}from"./switch-BIkVAKvI.js";import{g as _e}from"./services-Bn_cfjy0.js";import{S as Ce}from"./Spinner-CTHd9tm9.js";import{q as ze,V as Se,r as Ae,s as Ie,t as Le,u as Me,v as $e,w as De,x as Ue,y as Oe,z as We,A as Be,O as Re}from"./ui-Cxd06urH.js";import{B as Pe}from"./badge-DK4Yvf5k.js";import{r as Te}from"./icons-DfkRqyLz.js";import{u as Ze}from"./query-Dol-AhSL.js";import"./axios-Dos3PyFQ.js";import"./zustand-DjDQVScW.js";import"./datetime-picker-eCa_jalC.js";import"./select-14hZ19Cx.js";import"./RHFSelectField-DGFUSNJw.js";import"./label-DT6y_ZH-.js";import"./index-DNgxqOXG.js";const Fe=({ulbName:r,ulb_logo:i,globalProgress:d,moduleProgress:n,onBack:o})=>{const c=e();return a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-slate-900 px-8 py-10 shadow-2xl dark:bg-black",children:[a.jsx("div",{className:"absolute right-0 top-0 -mr-32 -mt-32 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 -mb-32 -ml-32 h-64 w-64 rounded-full bg-primary/5 blur-3xl"}),a.jsx("div",{className:"relative z-10 mx-auto max-w-7xl rounded-2xl",children:a.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-8 md:flex-row md:items-end",children:[a.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex-1",children:[a.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[i?a.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-2xl bg-white p-2 shadow-2xl ring-4 ring-white/10",children:a.jsx("img",{src:i,alt:r,className:"h-full w-full object-contain"})}):a.jsx("div",{className:"rounded-2xl bg-primary/10 p-3 text-primary ring-1 ring-primary/20",children:a.jsx(t,{className:"animate-spin-slow",size:24})}),a.jsx("h1",{className:"text-2xl font-black tracking-tight text-white md:text-3xl",children:r})]}),a.jsxs("div",{className:"mt-4 max-w-md",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Global Setup"}),a.jsxs("span",{className:"text-[10px] font-black "+(100===d?"text-emerald-400":"text-red-400"),children:[d,"%"," ",100===d?"Optimal":"Incomplete"]})]}),a.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-800 p-[1px]",children:a.jsx(s.div,{initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full bg-primary shadow-[0_0_10px_rgba(59,130,246,0.5)]"})})]}),a.jsxs("div",{className:"mt-8 max-w-md",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-widest text-muted-foreground",children:"Module Setup"}),a.jsxs("span",{className:"text-[10px] font-black "+(100===n?"text-emerald-400":"text-red-400"),children:[n,"%"," ",100===n?"Optimal":"Incomplete"]})]}),a.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-800 p-[1px]",children:a.jsx(s.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full bg-primary shadow-[0_0_10px_rgba(59,130,246,0.5)]"})})]})]}),a.jsx(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex gap-3",children:a.jsxs(se,{variant:"outline",onClick:()=>c(-1),className:"border-slate-700 bg-slate-800/50 text-slate-300 backdrop-blur-sm hover:bg-slate-700 hover:text-white",children:[a.jsx(l,{className:"mr-2"}),o?"Switch ULB":"Back"]})})]})})]})},Ee=({data:e})=>{var t;const{basic_information:l,global_setup:o}=e,c=[{label:"Municipal Code",value:l.code,icon:r},{label:"Regional Association",value:l.association_with||"N/A",icon:i},{label:"Ward Count",value:(null==(t=null==o?void 0:o.ward_count)?void 0:t.toLocaleString())||"0",icon:d},{label:"Operational Status",value:l.active_status?"active":"inactive",icon:n,isStatus:!0}];return a.jsx("div",{className:"grid grid-cols-1 gap-4 px-8 md:grid-cols-2 lg:grid-cols-4",children:c.map((e,t)=>a.jsx(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1*t+.3},children:a.jsx(V,{className:"group overflow-hidden border-none bg-white shadow-xl transition-all duration-300 hover:shadow-2xl dark:bg-slate-900",children:a.jsx(G,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-slate-100 p-3 text-slate-500 transition-all duration-300 group-hover:bg-primary/10 group-hover:text-primary dark:bg-slate-800 dark:text-slate-400",children:a.jsx(e.icon,{size:20})}),a.jsxs("div",{className:"max-h-12 min-h-12",children:[a.jsx("p",{className:"mb-1 text-[10px] font-normal uppercase tracking-widest text-muted-foreground",children:e.label}),e.isStatus?a.jsxs("div",{className:te("inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wider","active"===e.value?"border border-emerald-500/20 bg-emerald-500/10 text-emerald-600":"border border-red-500/20 bg-red-500/10 text-red-500"),children:[a.jsx("div",{className:te("h-1.5 w-1.5 animate-pulse rounded-full","active"===e.value?"bg-emerald-500":"bg-red-500")}),e.value]}):a.jsx("p",{className:"text-sm font-black tracking-tight text-slate-800 dark:text-slate-200",children:e.value})]})]})})})},e.label))})},qe=({data:e})=>{var t;const[l,r]=o.useState(!0),[i,d]=o.useState(!1),[n,y]=o.useState(!1),[k,_]=o.useState(null),C=ne({api:null==(t=le)?void 0:t.getAllJuidcoUlbList,key:"ulbLists",options:{enabled:!0}}),z=[{label:"Official Name",value:e.ulb_name,icon:c,fullWidth:!0},{label:"Registry ID",value:e.id,icon:x},{label:"Code",value:e.code,icon:x},{label:"Type",value:e.ulb_type,icon:m},{label:"Regional Category",value:e.category||"N/A",icon:u},{label:"Primary Address",value:e.address,icon:u,fullWidth:!0},{label:"Hindi Title",value:e.hindi_name||"N/A",icon:h,fullWidth:!0},{label:"Incorporation",value:e.incorporation_date?new Date(e.incorporation_date).toLocaleDateString():"N/A",icon:p},{label:"Toll Free Support",value:e.toll_free_no||"N/A",icon:b},{label:"Administrative Web",value:e.current_website||"N/A",icon:g,fullWidth:!0},{label:"Corporate Email",value:e.email||"N/A",icon:f,fullWidth:!0},{label:"Parent Gateway",value:e.parent_website||"N/A",icon:j,fullWidth:!0}];return a.jsxs(a.Fragment,{children:[a.jsxs(V,{className:"mx-8 overflow-hidden border-none bg-white shadow-xl transition-all duration-500 dark:bg-slate-900",children:[a.jsxs(K,{className:"flex cursor-pointer flex-row items-center justify-between border-b border-slate-100 bg-slate-50/50 p-6 transition-colors hover:bg-slate-100 dark:border-slate-800 dark:bg-slate-800/30 dark:hover:bg-slate-800/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-3 text-primary ring-1 ring-primary/20",children:a.jsx(c,{})}),a.jsxs("div",{children:[a.jsx(J,{className:"text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:"Basic Configuration"}),a.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Core identification and contact matrix"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(se,{onClick:()=>(_(e),y(!0),void d(!0)),variant:"outline",size:"sm",className:"h-9 border-slate-200 bg-white px-4 shadow-sm transition-all hover:bg-primary hover:text-white dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[a.jsx(h,{className:"mr-2"}),"Modify"]}),a.jsx("div",{onClick:()=>r(!l),className:"text-slate-400",children:l?a.jsx(v,{}):a.jsx(N,{})})]})]}),a.jsx(w,{children:l&&a.jsx(s.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},children:a.jsx(G,{className:"p-8",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:z.map((e,s)=>a.jsxs("div",{className:te("group flex gap-4 rounded-2xl border border-slate-100 bg-slate-50 p-4 transition-all duration-300 hover:border-primary/20 hover:bg-white hover:shadow-lg dark:border-slate-800 dark:bg-slate-800/20 dark:hover:bg-slate-800",e.fullWidth&&"md:col-span-2"),children:[a.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-white text-slate-400 shadow-sm transition-all group-hover:scale-110 group-hover:text-primary dark:bg-slate-700",children:a.jsx(e.icon,{size:16})}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1 text-[10px] font-normal uppercase tracking-widest text-muted-foreground",children:e.label}),a.jsx("p",{className:"text-sm font-bold leading-tight text-slate-800 dark:text-slate-200 ",children:e.value||"N/A"})]})]},`${e.label}-${s}`))})})})})]}),a.jsx(de,{open:i,setOpen:d,edit:n,setEdit:y,editData:k,title:n?"Update ULB Details":"Add New ULB",refetch:()=>C.refetch()})]})},He=he().shape({id:be().nullable(),wardNumber:pe().required("Ward Number is required").matches(/^\d+$/,"Must be a number")}),Ve=({open:e,onOpenChange:s,ulbId:t})=>{const[l,r]=o.useState(null),{data:i,refetch:n,isLoading:c}=ne({api:re.api_getUlbWardList,key:`wardList-${t}`,config:{ulbId:t},options:{enabled:e&&!!t}}),x=oe({}),m=oe({}),u=oe({}),{register:p,handleSubmit:b,reset:g,setValue:f,formState:{errors:j,isSubmitting:v}}=y({resolver:k(He),defaultValues:{id:null,wardNumber:""}}),N=(null==i?void 0:i.data)||[];return a.jsx(Q,{open:e,onOpenChange:s,children:a.jsxs(X,{className:"max-w-3xl overflow-hidden border-none bg-white p-0 shadow-2xl dark:bg-slate-900",children:[a.jsx(Y,{className:"bg-slate-50 px-6 py-4 dark:bg-slate-800/50",children:a.jsxs(ee,{className:"flex items-center gap-3 text-xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-2 text-primary",children:a.jsx(d,{})}),"Ward Management Matrix"]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("form",{onSubmit:b(async e=>{var a,s;try{const l=!!e.id,i=l?re.api_updateUlbWard:re.api_createUlbWard,d=l?{id:e.id,wardNumber:e.wardNumber,ulbId:t}:{ulbId:t,wardNumber:e.wardNumber},o=await(l?m:x).mutateAsync({api:i,data:d});(null==(a=null==o?void 0:o.data)?void 0:a.status)?(_.success(o.data.message||`Ward ${l?"updated":"created"} successfully`),g({id:null,wardNumber:""}),r(null),n()):_.error((null==(s=null==o?void 0:o.data)?void 0:s.message)||"Operation failed")}catch(l){_.error(_e(l))}}),className:"mb-8 flex items-end gap-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4 dark:border-slate-800 dark:bg-slate-800/20",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:l?"Update Ward Identifier":"New Ward Identifier"}),a.jsx(ye,{...p("wardNumber"),placeholder:"Enter Ward Number (e.g. 101)",className:"h-11 border-slate-200 bg-white font-bold text-slate-800 transition-all focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"}),j.wardNumber&&a.jsx("p",{className:"text-xs font-bold text-red-500",children:j.wardNumber.message})]}),a.jsxs("div",{className:"flex gap-2",children:[l&&a.jsx(se,{type:"button",variant:"outline",onClick:()=>{r(null),g({id:null,wardNumber:""})},className:"h-11 px-6",children:"Cancel"}),a.jsx(se,{type:"submit",disabled:v,className:"h-11 min-w-[120px] bg-primary font-bold shadow-lg shadow-primary/20 hover:bg-primary/90",children:v?a.jsx(Ce,{className:"h-4 w-4 text-white"}):l?"Update":"Create"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto rounded-xl border border-slate-100 bg-white dark:border-slate-800 dark:bg-slate-900",children:a.jsxs(ge,{children:[a.jsx(fe,{className:"bg-slate-50 dark:bg-slate-800/50",children:a.jsxs(je,{children:[a.jsx(ve,{className:"font-bold text-slate-500",children:"ID"}),a.jsx(ve,{className:"font-bold text-slate-500",children:"Ward Number"}),a.jsx(ve,{className:"font-bold text-slate-500",children:"Status"}),a.jsx(ve,{className:"text-right font-bold text-slate-500",children:"Actions"})]})}),a.jsx(Ne,{children:c?a.jsx(je,{children:a.jsx(we,{colSpan:4,className:"h-32 text-center",children:a.jsx(Ce,{className:"mx-auto text-primary"})})}):0===N.length?a.jsx(je,{children:a.jsx(we,{colSpan:4,className:"h-32 text-center text-slate-400",children:"No wards found. Create one above."})}):N.map(e=>a.jsxs(je,{className:"group transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[a.jsxs(we,{className:"font-mono text-xs font-bold text-slate-400",children:["#",e.id]}),a.jsx(we,{className:"font-bold text-slate-700 dark:text-slate-300",children:e.ward_name||e.ward_number||`Ward ${e.id}`}),a.jsx(we,{children:a.jsx(ke,{checked:1===e.status||!0===e.status,onCheckedChange:()=>(async(e,a)=>{var s,t;try{const l=a?0:1,r=await u.mutateAsync({api:re.api_deleteUlbWard,data:{id:e,status:l}});(null==(s=null==r?void 0:r.data)?void 0:s.status)?(_.success(`Ward ${l?"activated":"deactivated"} successfully`),n()):_.error((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Status update failed")}catch(l){_.error(_e(l))}})(e.id,1===e.status||!0===e.status),className:"data-[state=checked]:bg-emerald-500"})}),a.jsx(we,{className:"text-right",children:a.jsx("div",{className:"flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:a.jsx(se,{size:"icon",variant:"ghost",onClick:()=>(e=>{r(e.id),f("id",e.id),f("wardNumber",e.ward_name||e.ward_number)})(e),className:"h-8 w-8 text-slate-400 hover:bg-primary/10 hover:text-primary",children:a.jsx(h,{size:14})})})})]},e.id))})]})})]})]})})},Ge=he().shape({id:be().nullable(),zone:pe().required("Zone Name is required").min(2,"Zone Name must be at least 2 characters")}),Ke=({open:e,onOpenChange:s,ulbId:t})=>{const[l,r]=o.useState(null),{data:d,refetch:n,isLoading:c}=ne({api:re.zone_list_Api,key:`zoneList-${t}`,config:{ulbId:t},options:{enabled:e&&!!t}}),x=oe({}),m=oe({}),u=oe({}),{register:p,handleSubmit:b,reset:g,setValue:f,formState:{errors:j,isSubmitting:v}}=y({resolver:k(Ge),defaultValues:{id:null,zone:""}}),N=(null==d?void 0:d.data)||[];return a.jsx(Q,{open:e,onOpenChange:s,children:a.jsxs(X,{className:"max-w-3xl overflow-hidden border-none bg-white p-0 shadow-2xl dark:bg-slate-900",children:[a.jsx(Y,{className:"bg-slate-50 px-6 py-4 dark:bg-slate-800/50",children:a.jsxs(ee,{className:"flex items-center gap-3 text-xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:[a.jsx("div",{className:"rounded-xl bg-primary/10 p-2 text-primary",children:a.jsx(i,{})}),"Zone Distribution Matrix"]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("form",{onSubmit:b(async e=>{var a,s;try{const l=!!e.id,i=l?re.api_updateZoneApi:re.api_PostZoneApi,d=l?{id:e.id,zone:e.zone,ulbId:t}:{ulbId:t,zone:e.zone},o=await(l?m:x).mutateAsync({api:i,data:d});(null==(a=null==o?void 0:o.data)?void 0:a.status)?(_.success(o.data.message||`Zone ${l?"updated":"created"} successfully`),g({id:null,zone:""}),r(null),n()):_.error((null==(s=null==o?void 0:o.data)?void 0:s.message)||"Operation failed")}catch(l){_.error(_e(l))}}),className:"mb-8 flex items-end gap-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4 dark:border-slate-800 dark:bg-slate-800/20",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:l?"Update Zone Identifier":"New Zone Identifier"}),a.jsx(ye,{...p("zone"),placeholder:"Enter Zone Name (e.g. North Zone)",className:"h-11 border-slate-200 bg-white font-bold text-slate-800 transition-all focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"}),j.zone&&a.jsx("p",{className:"text-xs font-bold text-red-500",children:j.zone.message})]}),a.jsxs("div",{className:"flex gap-2",children:[l&&a.jsx(se,{type:"button",variant:"outline",onClick:()=>{r(null),g({id:null,zone:""})},className:"h-11 px-6",children:"Cancel"}),a.jsx(se,{type:"submit",disabled:v,className:"h-11 min-w-[120px] bg-primary font-bold shadow-lg shadow-primary/20 hover:bg-primary/90",children:v?a.jsx(Ce,{className:"h-4 w-4 text-white"}):l?"Update":"Create"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto rounded-xl border border-slate-100 bg-white dark:border-slate-800 dark:bg-slate-900",children:a.jsxs(ge,{children:[a.jsx(fe,{className:"bg-slate-50 dark:bg-slate-800/50",children:a.jsxs(je,{children:[a.jsx(ve,{className:"font-bold text-slate-500",children:"ID"}),a.jsx(ve,{className:"font-bold text-slate-500",children:"Zone Name"}),a.jsx(ve,{className:"font-bold text-slate-500",children:"ULB Name"}),a.jsx(ve,{className:"font-bold text-slate-500",children:"Status"}),a.jsx(ve,{className:"text-right font-bold text-slate-500",children:"Actions"})]})}),a.jsx(Ne,{children:c?a.jsx(je,{children:a.jsx(we,{colSpan:5,className:"h-32 text-center",children:a.jsx(Ce,{className:"mx-auto text-primary"})})}):0===N.length?a.jsx(je,{children:a.jsx(we,{colSpan:5,className:"h-32 text-center text-slate-400",children:"No zones found. Create one above."})}):N.map(e=>a.jsxs(je,{className:"group transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[a.jsxs(we,{className:"font-mono text-xs font-bold text-slate-400",children:["#",e.id]}),a.jsx(we,{className:"font-bold text-slate-700 dark:text-slate-300",children:e.zone}),a.jsx(we,{className:"text-xs font-medium text-slate-500",children:e.ulb_name}),a.jsx(we,{children:a.jsx(ke,{checked:e.status,onCheckedChange:()=>(async(e,a)=>{var s,t;try{const l=a?0:1,r=await u.mutateAsync({api:re.api_deleteZoneApi,data:{id:e,status:l}});(null==(s=null==r?void 0:r.data)?void 0:s.status)?(_.success(`Zone ${l?"activated":"deactivated"} successfully`),n()):_.error((null==(t=null==r?void 0:r.data)?void 0:t.message)||"Status update failed")}catch(l){_.error(_e(l))}})(e.id,e.status),className:"data-[state=checked]:bg-emerald-500"})}),a.jsx(we,{className:"text-right",children:a.jsx("div",{className:"flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:a.jsx(se,{size:"icon",variant:"ghost",type:"button",onClick:()=>(e=>{r(e.id),f("id",e.id),f("zone",e.zone_name||e.zone)})(e),className:"h-8 w-8 text-slate-400 hover:bg-primary/10 hover:text-primary",children:a.jsx(h,{size:14})})})})]},e.id))})]})})]})]})})},Je=o.forwardRef(({className:e,children:s,...t},l)=>a.jsxs(ze,{ref:l,className:te("relative overflow-hidden",e),...t,children:[a.jsx(Se,{className:"h-full w-full rounded-[inherit]",children:s}),a.jsx(Qe,{}),a.jsx(Ae,{})]}));Je.displayName=ze.displayName;const Qe=o.forwardRef(({className:e,orientation:s="vertical",...t},l)=>a.jsx(Ie,{ref:l,orientation:s,className:te("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:a.jsx(Le,{className:"relative flex-1 rounded-full bg-border"})}));function Xe({className:e,...s}){return a.jsx("div",{className:te("animate-pulse rounded-md bg-muted",e),...s})}function Ye({tableName:e,headers:s,onSuccess:t,onCancel:l,editData:r}){const[i,d]=o.useState(r||{}),[n,c]=o.useState(!1),x=!!r,m=o.useMemo(()=>s.filter(e=>!["id","created_at","updated_at","deleted_at","property_type_code","user_id"].includes(e.toLowerCase())),[s]),u=(e,a)=>{d(s=>({...s,[e]:a}))},h=oe({}),p=oe({});return a.jsxs(je,{className:"border-b-2 border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[a.jsx(we,{className:"border-r bg-blue-100/50 text-center font-mono text-xs font-bold text-blue-600 dark:border-white/5 dark:bg-blue-900/30",children:x?"EDIT":"NEW"}),s.map(e=>{const s=m.includes(e),t=(e=>{const a=e.toLowerCase();return a.includes("status")||a.includes("active")?"boolean":a.includes("date")||a.includes("time")||a.includes("created")||a.includes("updated")?"date":a.includes("amount")||a.includes("price")||a.includes("count")||a.includes("number")?"number":"text"})(e);return s?a.jsx(we,{className:"border-r px-2 py-2 dark:border-white/5",children:"boolean"===t?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ke,{checked:i[e]||!1,onCheckedChange:a=>u(e,a),className:"data-[state=checked]:bg-green-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:i[e]?"Active":"Inactive"})]}):a.jsx(ye,{type:t,value:i[e]||"",onChange:a=>u(e,a.target.value),required:!0,placeholder:`Enter ${e.replace(/_/g," ")}`,className:"h-8 min-w-[150px] rounded border-slate-300 bg-white text-xs shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-800"})},e):a.jsx(we,{className:"border-r px-2 py-2 dark:border-white/5",children:a.jsx("span",{className:"text-xs italic text-slate-400",children:"Auto"})},e)}),a.jsx(we,{className:"sticky right-0 bg-blue-50/90 px-2 py-2 dark:bg-blue-900/30",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:l,disabled:n,className:"h-7 w-7 text-red-500 hover:bg-red-500/10",children:a.jsx(C,{size:12})}),a.jsx(se,{type:"button",onClick:async a=>{var s,l;a.preventDefault(),c(!0);try{const a={};m.forEach(e=>{void 0!==i[e]&&""!==i[e]&&(a[e]=i[e])});const n={tableName:e,data:a,id:null==r?void 0:r.id},o=x?p:h,c=x?le.updateDynamicTable:le.createDynamicTable,u=await o.mutateAsync({api:c,data:n});(null==(s=null==u?void 0:u.data)?void 0:s.status)?(_.success(u.data.message||`Record ${x?"updated":"created"} successfully!`),d({}),t()):_.error((null==(l=null==u?void 0:u.data)?void 0:l.message)||`Failed to ${x?"update":"create"} record`)}catch(n){_.error((null==n?void 0:n.message)||`An error occurred while ${x?"updating":"creating"} record`)}finally{c(!1)}},disabled:n,size:"icon",className:"h-7 w-7 bg-green-600 text-white hover:bg-green-700",children:n?a.jsx(z,{className:"animate-spin",size:12}):a.jsx(S,{size:12})})]})})]})}function ea({open:e,onOpenChange:s,moduleName:t,masterName:l,originalName:r}){var i,d,n;const[c,x]=o.useState(""),[m,u]=o.useState(!1),[p,b]=o.useState(null),g=oe({}),f=ne({api:le.getDynamicTableStructure,key:`dynamic_table_${r}`,config:{tableName:r},options:{enabled:!!r&&e}}),j=(null==(i=null==f?void 0:f.data)?void 0:i.data)||[],v=null==f?void 0:f.isLoading,N=o.useMemo(()=>0===j.length?[]:Object.keys(j[0]),[j]),w=o.useMemo(()=>c?j.filter(e=>N.some(a=>String(e[a]).toLowerCase().includes(c.toLowerCase()))):j,[j,c,N]);return a.jsx(a.Fragment,{children:a.jsx(Q,{open:e,onOpenChange:s,children:a.jsxs(X,{className:"flex h-[95vh] w-full max-w-[95vw] flex-col overflow-auto border-none bg-[#f8f9fc] p-0 shadow-2xl dark:bg-secondary",children:[a.jsx(Y,{className:"shrink-0 border-b border-white/10 bg-secondary px-8 py-4 text-muted-foreground",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-blue-500/30 bg-blue-500/20 text-blue-400 backdrop-blur-md",children:a.jsx(A,{size:18})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ee,{className:"text-xl font-bold tracking-tight",children:l}),a.jsx(Pe,{variant:"outline",className:"border-blue-500/30 bg-blue-500/10 text-[10px] font-black uppercase tracking-widest text-primary",children:r})]}),a.jsxs("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground",children:["Registry Control â€¢ ",t]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(se,{variant:"ghost",size:"icon",onClick:()=>{f.refetch()},className:"h-9 w-9 text-primary hover:bg-white/10 hover:text-primary/60",children:a.jsx(I,{className:v?"animate-spin":""})}),a.jsxs(se,{className:"mr-6 h-9 gap-2 rounded-lg bg-blue-600 px-4 text-sm font-bold shadow-lg shadow-blue-600/20 hover:bg-blue-700",onClick:()=>{u(!0)},children:[a.jsx(L,{size:12})," Add Row"]})]})]})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-between gap-4 border-b bg-white px-8 py-3 dark:border-white/5 dark:bg-[#1a1d24]",children:[a.jsxs("div",{className:"relative w-full max-w-md",children:[a.jsx(M,{className:"absolute left-3.5 top-1/2 size-3 -translate-y-1/2 text-slate-400"}),a.jsx(ye,{placeholder:"Filter results...",value:c,onChange:e=>x(e.target.value),className:"h-9 rounded-lg border-slate-200 bg-slate-50 pl-10 text-xs font-medium shadow-sm ring-offset-background focus-visible:ring-1 focus-visible:ring-blue-500 dark:border-white/10 dark:bg-black/20"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"mx-2 h-6 w-[1px] bg-slate-200 dark:bg-white/10"}),a.jsxs("span",{className:"text-[11px] font-bold uppercase tracking-wider text-slate-500",children:[w.length," Rows found"]})]})]}),a.jsx("div",{className:"relative flex-1 overflow-hidden",children:a.jsxs(Je,{className:"h-full w-full",children:[a.jsx("div",{className:"min-w-fit",children:a.jsxs(ge,{className:"border-separate border-spacing-0",children:[a.jsx(fe,{className:"sticky top-0 z-10 bg-slate-100/80 backdrop-blur-md dark:bg-white/5",children:a.jsxs(je,{className:"border-none hover:bg-transparent",children:[a.jsx(ve,{className:"w-12 border-r text-center text-[10px] font-bold uppercase tracking-tighter text-slate-500 dark:border-white/5",children:"#"}),N.map(e=>{return a.jsx(ve,{className:"border-r px-6 text-[10px] font-black uppercase tracking-widest text-slate-600 dark:border-white/5 dark:text-slate-400",children:(s=e,s.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "))},e);var s}),a.jsx(ve,{className:"sticky right-0 bg-slate-100/90 px-4 text-right text-[10px] font-black uppercase tracking-widest text-slate-600 dark:bg-black/80 dark:text-slate-400",children:"Actions"})]})}),a.jsxs(Ne,{children:[m&&a.jsx(Ye,{tableName:r,headers:N,onSuccess:()=>{u(!1),f.refetch()},onCancel:()=>u(!1)}),v?Array.from({length:15}).map((e,s)=>a.jsxs(je,{children:[a.jsx(we,{children:a.jsx(Xe,{className:"h-4 w-4"})}),N.map(e=>a.jsx(we,{children:a.jsx(Xe,{className:"h-4 w-32"})},e)),a.jsx(we,{children:a.jsx(Xe,{className:"h-4 w-12"})})]},s)):w.length>0?w.map((e,s)=>p&&p.id===e.id?a.jsx(Ye,{tableName:r,headers:N,editData:e,onSuccess:()=>{b(null),f.refetch()},onCancel:()=>b(null)},`edit-${e.id}`):a.jsxs(je,{className:"group border-b transition-colors hover:bg-blue-500/5 dark:border-white/5",children:[a.jsx(we,{className:"border-r bg-slate-50/50 text-center font-mono text-[10px] text-slate-400 dark:border-white/5 dark:bg-white/5",children:s+1}),N.map(s=>a.jsx(we,{className:"whitespace-nowrap border-r px-6 font-medium dark:border-white/5",children:"status"===s?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"size-1.5 rounded-full "+(e[s]?"animate-pulse bg-emerald-500":"bg-red-500")}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest "+(e[s]?"text-emerald-500":"text-red-500"),children:e[s]?"Active":"Inactive"})]}):a.jsx("span",{className:"text-xs "+("number"==typeof e[s]?"font-mono text-blue-500":"text-slate-700 dark:text-slate-300"),children:""===e[s]?a.jsx("span",{className:"italic text-slate-400",children:"null"}):String(e[s])})},s)),a.jsx(we,{className:"sticky right-0 px-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[a.jsx(se,{variant:"ghost",size:"icon",onClick:()=>{b(e),u(!1)},className:"h-7 w-7 text-blue-500 hover:bg-blue-500/10",children:a.jsx(h,{size:12})}),a.jsx(se,{variant:"ghost",size:"icon",onClick:()=>(async e=>{var a,s,t;try{const l=await g.mutateAsync({api:le.deleteDynamicTable,data:{tableName:r,id:e}});(null==(a=null==l?void 0:l.data)?void 0:a.status)?(_.success((null==(s=null==l?void 0:l.data)?void 0:s.message)||"Deleted successfully"),f.refetch()):_.error((null==(t=null==l?void 0:l.data)?void 0:t.message)||"Failed to delete")}catch(l){_.error(_e(l))}})(e.id),className:"h-7 w-7 text-red-500 hover:bg-red-500/10",children:a.jsx($,{size:12})})]})})]},e.id||s)):a.jsx(je,{children:a.jsx(we,{colSpan:N.length+2,className:"h-[400px] bg-white text-center dark:bg-transparent",children:a.jsxs("div",{className:"flex flex-col items-center justify-center opacity-40",children:[a.jsx(A,{size:48,className:"mb-4 text-slate-300"}),a.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"No data records found"}),a.jsxs("p",{className:"text-xs",children:["The table ",r," is currently empty."]})]})})})]})]})}),a.jsx(Qe,{orientation:"horizontal"})]})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-between border-t bg-slate-50 px-8 py-2 text-[10px] font-bold uppercase tracking-widest text-slate-400 dark:border-white/5 dark:bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{children:["Connected to: ",l," Registry"]}),a.jsx("span",{className:"text-slate-300",children:"|"}),a.jsxs("span",{children:["Buffer Size: ",w.length]})]}),a.jsxs("div",{children:["Server Response:"," ",(null==(n=null==(d=null==f?void 0:f.data)?void 0:d["meta-data"])?void 0:n.responsetime)||"0","ms"]})]})]})})})}function aa(){return a.jsxs("div",{className:"w-full h-svh flex justify-center items-center",children:[a.jsx(Te,{className:"animate-spin",size:32}),a.jsx("span",{className:"sr-only",children:"loading"})]})}Qe.displayName=Ie.displayName;const sa=({module:e,index:t,onOpenMaster:l})=>{var r,i,d,n;const[c,x]=o.useState(!1),m=e.id||e.module_id,u=ne({api:null==(r=le)?void 0:r.moduleRegistryList,key:`moduleMasterList_${m}`,config:{moduleId:m},options:{enabled:!!m}}),h=ne({api:null==(i=le)?void 0:i.moduleMasterPercentage,key:`moduleMasterPercentage${m}`,config:{moduleId:m},options:{enabled:!!m}}),p=(null==(d=null==u?void 0:u.data)?void 0:d.data)||[],b=p.length>0,g=(null==(n=null==h?void 0:h.data)?void 0:n.data)||{},f=(null==g?void 0:g.completion_percentage)||0;return a.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.06*t},children:a.jsxs(V,{className:"group overflow-hidden border border-slate-200/80 bg-white shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-800 dark:bg-slate-950 "+(b?"ring-1 ring-emerald-500/20":"ring-1 ring-amber-500/20"),children:[a.jsx("div",{className:"border-b border-slate-200/70 bg-slate-50/90 px-5 py-4 dark:border-slate-800 dark:bg-slate-900/80",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg "+(b?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":"bg-amber-500/10 text-amber-600 dark:text-amber-400"),children:a.jsx(W,{})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-extrabold uppercase tracking-wider text-slate-800 dark:text-slate-100",children:e.module_name}),a.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-[11px]",children:[a.jsxs("span",{className:"font-medium text-slate-500",children:[(null==g?void 0:g.tables_with_data)||0,"/",(null==g?void 0:g.total_tables)||0," Tables"]}),a.jsxs("span",{className:"font-bold "+(100===f?"text-emerald-600":f>=50?"text-amber-600":"text-red-600"),children:[f,"%"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"rounded-full px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider "+(b?"bg-emerald-500/10 text-emerald-700 dark:text-emerald-400":"bg-amber-500/10 text-amber-700 dark:text-amber-400"),children:[p.length," Masters"]}),b&&a.jsx(se,{variant:"ghost",size:"sm",onClick:()=>x(!c),className:"h-8 w-8 p-0",children:c?a.jsx(v,{}):a.jsx(N,{})})]})]})}),a.jsx(w,{children:c&&b&&a.jsx(s.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:a.jsx(G,{className:"space-y-2.5 p-5",children:p.map((s,t)=>a.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200/70 bg-white p-3.5 transition-all duration-200 hover:border-primary/30 hover:bg-primary/[0.03] dark:border-slate-800 dark:bg-slate-900/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/50"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:s.display_name||s.name}),a.jsxs("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400",children:["DB: ",s.database_name||"N/A"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"rounded-full px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider "+(s.status?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:s.status?"Active":"Inactive"}),a.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(null==e?void 0:e.module_name,(null==s?void 0:s.display_name)||(null==s?void 0:s.name),null==s?void 0:s.original_name),className:"h-8 rounded-lg border border-transparent px-3 text-[10px] font-bold uppercase tracking-wider text-primary transition-all hover:border-primary/20 hover:bg-primary/5",children:"View"})]})]},t))})})})]})})};function ta({ulbId:e}){var s,t;const[l,r]=o.useState(!1),[d,n]=o.useState(""),[c,x]=o.useState(""),[m,u]=o.useState("");D();const h=(e,a,s)=>{n(e),x(a),u(s),r(!0)},p=ne({api:null==(s=le)?void 0:s.getModuleByUlbId,key:"permittedModuleListByUlb",config:{ulbId:e},options:{enabled:!!e}}),b=(null==(t=null==p?void 0:p.data)?void 0:t.data)||[],g=null==p?void 0:p.isLoading;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-5 rounded-2xl border border-slate-200/70 bg-white px-5 py-4 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-primary/10 text-primary",children:a.jsx(i,{className:"text-sm"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-extrabold uppercase tracking-wider text-slate-800 dark:text-slate-100",children:"Module Registry Masters"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure and review master tables for each permitted module"})]})]}),a.jsxs("div",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 text-[11px] font-semibold text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[a.jsx(U,{className:"text-emerald-500"}),b.length," Modules"]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:g?a.jsx("div",{className:"col-span-1 rounded-xl border border-dashed border-primary/30 bg-primary/[0.03] py-12 text-center text-xl md:col-span-2",children:a.jsx(aa,{})}):b.length>0?b.map((e,s)=>a.jsx(sa,{module:e,index:s,onOpenMaster:h},e.id||e.module_id)):a.jsxs("div",{className:"col-span-1 rounded-xl border border-dashed border-slate-300 bg-slate-50 py-12 text-center dark:border-slate-800 dark:bg-slate-900 md:col-span-2",children:[a.jsx(O,{className:"mx-auto mb-3 text-2xl text-slate-400"}),a.jsx("p",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400",children:"No Modules Found"})]})}),a.jsx(ea,{open:l,onOpenChange:()=>r(!1),moduleName:d,masterName:c,originalName:m})]})}const la=({globalMaster:e,ulbId:t})=>{const[l,r]=o.useState(!1),[n,c]=o.useState(!1),x=[{id:1,name:"Ward Management",count:(null==e?void 0:e.ward_count)||0,icon:d,description:"Geographic boundaries and civic wards",color:(null==e?void 0:e.ward_count)&&e.ward_count>0?"green":"red",action:()=>r(!0)},{id:2,name:"Zone Distribution",count:e.zone_count,icon:B,description:"Macro administrative divisions",color:e.zone_count>0?"green":"red",action:()=>c(!0)}];return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mx-8 space-y-6",children:a.jsxs(ce,{defaultValue:"basic",className:"w-full",children:[a.jsx("div",{className:"mb-6 flex items-center justify-between",children:a.jsxs(xe,{className:"h-12 gap-4 rounded-2xl bg-slate-300/50 px-4 dark:bg-slate-700/50",children:[a.jsxs(me,{value:"basic",className:"\r\n                relative flex items-center gap-2\r\n                rounded-2xl px-6 py-2\r\n                text-xs font-extrabold uppercase tracking-widest\r\n                text-slate-600 transition-all\r\n\r\n                duration-300 ease-out hover:scale-[1.05]\r\n                hover:text-primary data-[state=active]:scale-[1.08]\r\n\r\n                data-[state=active]:bg-white\r\n                data-[state=active]:text-primary\r\n                data-[state=active]:shadow-lg\r\n                data-[state=active]:shadow-primary/30\r\n                dark:text-slate-300\r\n\r\n                dark:data-[state=active]:bg-slate-900\r\n              ",children:[a.jsx(R,{className:"text-sm"}),"Global Masters"]}),a.jsxs(me,{value:"module",className:"\r\n                  relative flex items-center gap-2\r\n                  rounded-2xl px-6 py-2\r\n                  text-xs font-extrabold uppercase tracking-widest\r\n                  text-slate-600 transition-all\r\n\r\n                  duration-300 ease-out hover:scale-[1.05]\r\n                  hover:text-primary data-[state=active]:scale-[1.08]\r\n\r\n                  data-[state=active]:bg-white\r\n                  data-[state=active]:text-primary\r\n                  data-[state=active]:shadow-lg\r\n                  data-[state=active]:shadow-primary/30\r\n                  dark:text-slate-300\r\n\r\n                  dark:data-[state=active]:bg-slate-900\r\n                ",children:[a.jsx(i,{className:"text-sm"}),"Module Specific"]})]})}),a.jsx(ue,{value:"basic",className:"mt-0",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:x.map((e,t)=>a.jsx(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05*t},children:a.jsx(V,{className:`group overflow-hidden border-none bg-white shadow-lg ring-1 ring-slate-200/50 transition-all duration-500 hover:shadow-2xl bg-${e.color}-500/20 ring-${e.color}-500/20`,children:a.jsxs(G,{className:"p-0",children:[a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 flex items-start justify-between",children:a.jsx("div",{className:te("rounded-2xl p-4 shadow-inner transition-all duration-500 group-hover:text-white","green"===e.color?"bg-green-500/10 text-green-500 group-hover:bg-green-500":"bg-red-500/10 text-red-500 group-hover:bg-red-500"),children:a.jsx(e.icon,{size:24})})}),a.jsx("h3",{className:"mb-1 text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:e.name}),a.jsx("p",{className:"mb-3 text-[11px] font-medium text-slate-500",children:e.description}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-400",children:[a.jsx(P,{className:"text-[8px]"}),"Real-time synchronization"]})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 bg-slate-50 px-6 py-4 dark:border-slate-800 dark:bg-slate-800/50",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-3xl font-black leading-none tracking-tighter text-slate-800 dark:text-slate-200",children:e.count}),a.jsx("span",{className:"mt-1 text-[9px] font-black uppercase tracking-widest text-slate-400 dark:text-slate-500",children:"Active Records"})]}),a.jsxs(se,{variant:"link",onClick:e.action,className:te("h-auto p-0 text-[10px] font-black uppercase tracking-widest transition-transform group-hover:translate-x-1","green"===e.color?"text-green-500 hover:text-green-600":"text-red-500 hover:text-red-600"),children:["Manage ","->"]})]})]})})},e.id))})}),a.jsx(ue,{value:"module",className:"mt-0",children:a.jsx(ta,{ulbId:t})})]})}),a.jsx(Ve,{open:l,onOpenChange:r,ulbId:t}),a.jsx(Ke,{open:n,onOpenChange:c,ulbId:t})]})},ra=Me,ia=$e,da=o.forwardRef(({className:e,...s},t)=>a.jsx(Re,{className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));da.displayName=Re.displayName;const na=o.forwardRef(({className:e,...s},t)=>a.jsxs(ia,{children:[a.jsx(da,{}),a.jsx(De,{ref:t,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));na.displayName=De.displayName;const oa=({className:e,...s})=>a.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...s});oa.displayName="AlertDialogHeader";const ca=({className:e,...s})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});ca.displayName="AlertDialogFooter";const xa=o.forwardRef(({className:e,...s},t)=>a.jsx(Ue,{ref:t,className:te("text-lg font-semibold",e),...s}));xa.displayName=Ue.displayName;const ma=o.forwardRef(({className:e,...s},t)=>a.jsx(Oe,{ref:t,className:te("text-sm text-muted-foreground",e),...s}));ma.displayName=Oe.displayName;const ua=o.forwardRef(({className:e,...s},t)=>a.jsx(Be,{ref:t,className:te(ie(),e),...s}));ua.displayName=Be.displayName;const ha=o.forwardRef(({className:e,...s},t)=>a.jsx(We,{ref:t,className:te(ie({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));ha.displayName=We.displayName;const pa=({open:e,onOpenChange:s,onConfirm:t,title:l,description:r,isSaving:i})=>a.jsx(ra,{open:e,onOpenChange:s,children:a.jsxs(na,{className:"overflow-hidden rounded-3xl border-none bg-white p-8 shadow-2xl dark:bg-slate-900",children:[a.jsx("div",{className:"absolute -left-24 -top-24 h-48 w-48 rounded-full bg-red-500/10 blur-3xl dark:bg-red-500/5"}),a.jsxs(oa,{className:"relative z-10",children:[a.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-2xl bg-red-50 text-red-600 shadow-inner ring-1 ring-red-100 dark:bg-red-950/30 dark:text-red-400 dark:ring-red-900/50",children:a.jsx(T,{size:32})}),a.jsx(xa,{className:"text-center text-3xl font-black tracking-tight text-slate-800 dark:text-slate-100",children:l}),a.jsx(ma,{className:"text-center text-base font-medium leading-relaxed text-slate-500 dark:text-slate-400 md:px-6",children:r})]}),a.jsxs(ca,{className:"relative z-10 mt-8 flex-col-reverse gap-3 sm:flex-row",children:[a.jsx(ha,{disabled:i,className:"h-12 flex-1 rounded-xl border-none bg-slate-100 text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:hover:bg-slate-700",children:"Abort"}),a.jsx(ua,{onClick:e=>{e.preventDefault(),t()},disabled:i,className:"h-12 flex-1 rounded-xl bg-red-600 text-[10px] font-black uppercase tracking-widest text-white shadow-lg shadow-red-600/20 transition-all hover:bg-red-700 active:scale-95 dark:bg-red-600 dark:hover:bg-red-700",children:i?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{className:"animate-spin text-[10px]"}),"Processing"]}):"Confirm"})]})]})}),ba={"hide-citizen":"is_hidden_from_citizen","hide-admin":"is_hidden_from_admin","disable-login":"is_disabled_login",deactivate:"is_deactivated"},ga=({actions:e,ulb_actions:t,ulbId:l})=>{const r=Ze(),i=oe({}),[d,o]=F.useState(!1),[c,x]=F.useState(null);return a.jsxs(a.Fragment,{children:[a.jsxs(V,{className:"mx-8 overflow-hidden  border border-primary/10 bg-white shadow-xl transition-all duration-500 dark:bg-slate-900",children:[a.jsx(K,{className:"border-b border-slate-100 bg-red-50/20 p-6 dark:border-slate-800 dark:bg-red-950/20",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-xl bg-red-100 p-3 text-red-600 ring-1 ring-red-200 dark:bg-red-900/40 dark:text-red-400 dark:ring-red-800",children:a.jsx(n,{})}),a.jsxs("div",{children:[a.jsx(J,{className:"text-xl font-black tracking-tight text-slate-800 dark:text-slate-200",children:"Administrative Controls"}),a.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Critical system overrides and security protocols"})]})]})}),a.jsx(G,{className:"p-8",children:a.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.map((e,l)=>{const r=ba[e.id]||"",i=(null==t?void 0:t[r])??0,d=1===Number(i);return a.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+.05*l},children:a.jsxs("div",{className:te("group relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-2xl border-2 p-6 transition-all duration-300",d?"border-emerald-500/10 bg-emerald-500/[0.02] hover:border-emerald-500/30":"border-red-500/10 bg-red-500/[0.02] hover:border-red-500/30"),children:[a.jsx("div",{className:te("absolute -inset-2 opacity-0 blur-2xl transition-opacity duration-300 group-hover:opacity-20",d?"bg-emerald-500":"bg-red-500")}),a.jsxs("div",{className:"relative flex items-start gap-5",children:[a.jsx("div",{className:te("flex h-14 w-14 shrink-0 items-center justify-center rounded-2xl shadow-sm transition-all duration-300 group-hover:scale-110",d?"bg-emerald-500/20 text-emerald-600":"bg-red-500/20 text-red-600"),children:a.jsx(e.icon,{size:28})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"mb-1.5 text-[17px] font-black tracking-tight text-foreground",children:e.title}),a.jsx("p",{className:"line-clamp-2 text-xs font-bold leading-relaxed text-muted-foreground/80",children:e.description})]})]}),a.jsxs("div",{className:"relative flex flex-col items-end gap-3",children:[a.jsxs("div",{className:te("inline-flex items-center gap-1.5 rounded-full border px-3 py-1 transition-all duration-300",d?"border-emerald-500/20 bg-emerald-500/10 text-emerald-600 shadow-sm shadow-emerald-500/10":"border-red-500/20 bg-red-500/10 text-red-600 shadow-sm shadow-red-500/10"),children:[a.jsx("div",{className:te("h-1.5 w-1.5 rounded-full",d?"animate-pulse bg-emerald-500":"bg-red-500")}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:d?"Enabled":"Disabled"})]}),a.jsx(ke,{checked:d,onCheckedChange:a=>((e,a,s)=>{x({fieldKey:e,title:a,targetState:s}),o(!0)})(ba[e.id],e.title,a),className:te("transition-transform duration-300 hover:scale-110",d?"data-[state=checked]:bg-emerald-600":"data-[state=unchecked]:bg-red-500"),"aria-label":`${e.title} toggle`})]})]})},e.id)})})})]}),a.jsx(pa,{open:d,onOpenChange:e=>!e&&o(!1),onConfirm:()=>{if(!c)return;const e={ulbId:l,action:c.fieldKey};i.mutate({api:re.toggleUlbAction,data:e},{onSuccess:()=>{_.success(`${c.title} updated successfully`),r.invalidateQueries({queryKey:[`ulbConfig-${l}`]}),o(!1),x(null)},onError:e=>{_.error(_e(e)),o(!1),x(null)}})},title:c?`${c.targetState?"Enable":"Disable"} ${c.title}`:"Confirm Action",description:c?`Are you sure you want to ${c.targetState?"enable":"disable"} "${c.title}" for this ULB? This change may affect user access or visibility.`:"Are you sure?",isSaving:"pending"===i.status})]})},fa=()=>{var e,t,l,r;const[i,d]=o.useState(null),[n,x]=o.useState(!1),[m]=D(),u=m.get("ulb_id");m.get("ulb_name");const h=ne({api:re.api_getUlbList,key:"api_getUlbList",options:{}}),p=ne({api:le.ulbConfigurationList,key:`ulbConfig-${u}`,config:{ulbId:u},options:{enabled:!!u}});null==(e=null==h?void 0:h.data)||e.data;const b=(null==(t=null==p?void 0:p.data)?void 0:t.data)||null,g=e=>{d(e)},f=[{id:"hide-citizen",title:"Hide from Citizen Portal",description:"ULB will not be visible to citizens",icon:E,color:"warning",action:()=>g({id:"hide-citizen",title:"Hide from Citizen Portal",description:"ULB will not be visible to citizens",icon:E,color:"warning"})},{id:"hide-admin",title:"Hide from Admin Panel",description:"ULB will not appear in admin listings",icon:q,color:"warning",action:()=>g({id:"hide-admin",title:"Hide from Admin Panel",description:"ULB will not appear in admin listings",icon:q,color:"warning"})},{id:"disable-login",title:"Disable Login Access",description:"Prevent all users from signing into this ULB",icon:H,color:"danger",action:()=>g({id:"disable-login",title:"Disable Login Access",description:"Prevent all users from signing into this ULB",icon:H,color:"danger"})},{id:"deactivate",title:"Emergency Deactivation",description:"Immediately suspend all ULB services and access",icon:T,color:"danger",action:()=>g({id:"deactivate",title:"Emergency Deactivation",description:"Immediately suspend all ULB services and access",icon:T,color:"danger"})}];return p.isLoading||!b?a.jsxs("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-6 bg-slate-50 dark:bg-[#0a0a0a]",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-24 w-24 animate-spin rounded-full border-4 border-slate-200 border-t-primary"}),a.jsx(c,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-primary",size:24})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-black tracking-tight text-slate-800 dark:text-white",children:"Configuring Municipal Data"}),a.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.3em] text-slate-400",children:"Matrix Initializing..."})]})]}):a.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen overflow-x-hidden rounded-2xl bg-slate-50 pb-20 transition-colors duration-500 dark:bg-[#0a0a0a]",children:[a.jsx(Fe,{ulbName:b.basic_information.ulb_name,ulb_logo:b.basic_information.ulb_logo,globalProgress:null==(l=b.global_setup)?void 0:l.percentage,moduleProgress:null==(r=b.module_setup)?void 0:r.percentage}),a.jsxs("main",{className:"relative z-20 -mt-10 space-y-8",children:[a.jsx(Ee,{data:b}),a.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-10",children:[a.jsx(qe,{data:b.basic_information}),a.jsx(la,{globalMaster:b.global_setup,ulbId:b.basic_information.id}),a.jsx(ga,{actions:f,ulb_actions:b.ulb_action,ulbId:b.basic_information.id})]})]}),a.jsx(pa,{open:!!i,onOpenChange:e=>!e&&d(null),onConfirm:()=>{i&&(x(!0),setTimeout(()=>{x(!1),d(null),_.success(`${i.title} executed successfully!`,{icon:"ðŸš€",style:{borderRadius:"15px",background:"#1e293b",color:"#fff",fontWeight:"bold",fontSize:"12px"}})},2e3))},title:(null==i?void 0:i.title)||"Confirm Action",description:`Are you absolutely sure you want to perform "${null==i?void 0:i.title}"? This is an administrative operation that may affect production data and user access.`,isSaving:n})]})};function ja(){return a.jsx(ae,{title:"ULB Master Data",subTitle:"Control all ULB Master Data here",children:a.jsx(fa,{})})}export{ja as default};
