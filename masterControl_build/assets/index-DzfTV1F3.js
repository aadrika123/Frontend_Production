import{r as a,j as e,B as o,m as te,_ as ae}from"./index-B4b_osHm.js";import{a as le}from"./index-D4Q12d4N.js";import{a as ie,o as ne,F as ce,B as re,c as de,b as E}from"./SelectField-BPaJ0zWa.js";import{R as oe}from"./RHFTextField-C82cbu8s.js";import"./input-D2046blx.js";import{C as me,a as xe,c as he,d as pe}from"./card-f_mZSNLJ.js";import{T as ue,a as je,b as T,c as h,d as ge,e as p,S as Ne}from"./separator-BgdfknP-.js";import{P as fe}from"./index-BSJeAWBy.js";import{L as be}from"./label-BmxwmphA.js";import{b as ye,c as ve,d as we,e as Ce,f as ke,g as Pe,F as B,h as I}from"./index-CXWaoASY.js";import{b as Se}from"./useCustomQuery-h_ByQs0a.js";const Ae=de().shape({roleName:E().required("Role Name is required"),roleDescription:E()});function Me(){var k,P,S,A,M,F,R,L;const[b,_]=a.useState(1),[u,H]=a.useState(10),[O,m]=a.useState(!1),[U,y]=a.useState(!1),[V,z]=a.useState(null),[j,$]=a.useState("menu"),[n,c]=a.useState(null),[W,g]=a.useState(!1),i=ie({resolver:ne(Ae),defaultValues:{roleName:"",roleDescription:""}}),r=Se({api:`${(k=te)==null?void 0:k.getMenuRoleList}`,key:"getAllMenuRole",options:{enabled:!0}}),[N,q]=a.useState([{id:1,role_name:"Admin",description:"Administrator role",status:"Active"},{id:2,role_name:"User",description:"Regular user role",status:"Inactive"},{id:3,role_name:"Manager",description:"Manager role",status:"Active"}]),v=async s=>{console.log("Role Data to Add:",s),m(!1),q([...N,{...s,id:N.length+1,status:"Active"}])},Y=s=>{z(s),y(!0)},w=s=>{$(s)},[C,G]=a.useState([{menuName:"Legal",menuPath:"/legal",status:"Inactive",description:"Legal m",lastUpdated:"2024-12-17",createdBy:"Admin",accessLevel:"High"},{menuName:"Finance",menuPath:"/finance",status:"Active",description:"Financial m",lastUpdated:"2024-12-18",createdBy:"User1",accessLevel:"Medium"}]),d=s=>{c(s),g(!0)};console.log("ClickedModule",n);const J=s=>{const t=[...C],l=t[s].status;t[s].status=l==="Active"?"Inactive":"Active",G(t)},K=s=>{const t=[...n];t[s].isEditing=!0,c(t)},f=(s,t,l)=>{const D=[...n];D[t][l]=s.target.value,c(D)},Q=s=>{const t=[...n];t[s].isEditing=!1,c(t)},X=s=>{const t=[...n];t[s].isEditing=!1,c(t)},Z=()=>{ae.error("Deleted successfull");const s=n.filter((t,l)=>l!==ee);c(s),x(!1)},[ee]=a.useState(null),[se,x]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ce,{methods:i,onSubmit:i.handleSubmit(v),children:e.jsxs("div",{className:"grid grid-cols-4 gap-x-2 bg-transparent",children:[e.jsxs("div",{children:[e.jsx(be,{htmlFor:"roleName",children:"Â "}),e.jsx(oe,{name:"roleName",placeholder:"Enter Role Name"})]}),e.jsx("div",{className:"mt-7",children:e.jsx(re,{isLoading:i.formState.isSubmitting,type:"submit",className:"w-auto px-10",children:"Search"})})]})}),e.jsx("div",{className:"flex justify-between mt-4",children:e.jsx(o,{onClick:()=>m(!0),className:"bg-primary",children:"Add Role"})}),e.jsx("div",{className:"mt-2",children:e.jsxs(me,{children:[e.jsx(xe,{className:"px-7",children:e.jsx(he,{className:"flex justify-between",children:e.jsxs("h1",{children:["Total Roles : ",e.jsx("span",{className:"font-semibold",children:(S=(P=r==null?void 0:r.data)==null?void 0:P.data)==null?void 0:S.length})]})})}),e.jsxs(pe,{children:[e.jsxs(ue,{children:[e.jsx(je,{children:e.jsxs(T,{children:[e.jsx(h,{children:"#"}),e.jsx(h,{children:"Role Name"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Action"})]})}),e.jsx(ge,{children:(M=(A=r==null?void 0:r.data)==null?void 0:A.data)==null?void 0:M.map((s,t)=>e.jsxs(T,{children:[e.jsx(p,{children:b*u-u+t+1}),e.jsx(p,{children:s==null?void 0:s.menu_role_name}),e.jsx(p,{children:s!=null&&s.is_suspended?e.jsx("span",{className:"text-red-500 font-semibold",children:"Inactive"}):e.jsx("span",{className:"text-green-500 font-semibold",children:"Active"})}),e.jsx(p,{children:e.jsx(o,{className:"bg-primary",onClick:()=>Y(s),children:"View"})})]},s.id))})]}),e.jsx(Ne,{className:"mb-2 mt-4"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(fe,{currentPage:b,totalItems:N.length,itemsPerPage:u,onPageChange:_,onItemsPerPageChange:H})})]})]})}),O&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-gray-800 bg-opacity-50",onClick:()=>m(!1),children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg w-1/3",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Add Role"}),e.jsxs("form",{onSubmit:i.handleSubmit(v),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"roleName",className:"block",children:"Role Name"}),e.jsx("input",{id:"roleName",...i.register("roleName"),type:"text",placeholder:"Enter Role Name",className:"border p-2 rounded w-full"}),i.formState.errors.roleName&&e.jsx("p",{className:"text-red-500 text-sm",children:(L=(R=(F=i==null?void 0:i.formState)==null?void 0:F.errors)==null?void 0:R.roleName)==null?void 0:L.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"roleDescription",className:"block",children:"Description"}),e.jsx("input",{id:"roleDescription",...i.register("roleDescription"),type:"text",placeholder:"Enter Role Description",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(o,{type:"submit",className:"bg-primary",children:"Save"})]})]})]})}),U&&V&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-gray-800 bg-opacity-50",onClick:()=>y(!1),children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg w-2/3",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Role Details"}),e.jsxs("div",{className:"tabs flex gap-4 mb-4",children:[e.jsx(o,{variant:j==="menu"?"secondary":"outline",onClick:()=>w("menu"),children:"Permitted Menu List"}),e.jsx(o,{variant:j==="service"?"secondary":"outline",onClick:()=>w("service"),children:"User List"})]}),j==="menu"?e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Water",menuPath:"/water",status:"Active"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ye,{className:"text-blue-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Water"})]}),e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Legal",menuPath:"/legal",status:"Inactive"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ve,{className:"text-green-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Legal"})]}),e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Hospital",menuPath:"/hospital",status:"Active"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(we,{className:"text-red-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Hospital"})]}),e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Vehicle",menuPath:"/vehicle",status:"Active"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ce,{className:"text-yellow-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Vehicle"})]}),e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Location",menuPath:"/location",status:"Inactive"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ke,{className:"text-purple-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Location"})]}),e.jsxs("div",{className:"card bg-white shadow-lg p-4 rounded-lg",onClick:()=>d({menuName:"Logistics",menuPath:"/logistics",status:"Active"}),children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Pe,{className:"text-gray-500 text-4xl"})}),e.jsx("h3",{className:"text-center mt-2 font-semibold",children:"Logistics"})]})]})}):e.jsx("div",{children:e.jsx("p",{children:"Users can be listed here..."})})]})}),W&&n&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-gray-800 bg-opacity-50",onClick:()=>g(!1),children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg w-full sm:w-3/4 md:w-1/2 lg:w-2/3 xl:w-1/2",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Module Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto text-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Menu Name"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Menu Path"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Last Updated"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Created By"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Access Level"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:n.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.isEditing?e.jsx("input",{type:"text",value:s.menuName,onChange:l=>f(l,t,"menuName"),className:"px-2 py-1 border border-gray-300 rounded-md"}):s.menuName}),e.jsx("td",{className:"px-4 py-2",children:s.isEditing?e.jsx("input",{type:"text",value:s.menuPath,onChange:l=>f(l,t,"menuPath"),className:"px-2 py-1 border border-gray-300 rounded-md"}):s.menuPath}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>J(C.indexOf(s)),className:`px-4 py-2 rounded-full transition-all ${s.status==="Active"?"bg-green-500":"bg-red-500"} text-white hover:opacity-80`,children:s.status})}),e.jsx("td",{className:"px-4 py-2",children:s.isEditing?e.jsx("input",{type:"text",value:s.description,onChange:l=>f(l,t,"description"),className:"px-2 py-1 border border-gray-300 rounded-md"}):s.description}),e.jsx("td",{className:"px-4 py-2",children:s.lastUpdated}),e.jsx("td",{className:"px-4 py-2",children:s.createdBy}),e.jsx("td",{className:"px-4 py-2",children:s.accessLevel}),e.jsx("td",{className:"px-4 py-2 flex gap-2",children:s.isEditing?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Q(t),className:"px-4 py-2 bg-purple-500 text-white rounded-md",children:[e.jsx(B,{className:"inline mr-2"})," Save"]}),e.jsx("button",{onClick:()=>X(t),className:"px-4 py-2 bg-gray-300 text-white rounded-md",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>K(t),className:"px-4 py-2 bg-purple-500 text-white rounded-md flex items-center",children:[e.jsx(B,{className:"inline mr-2"})," Edit"]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-red-500 text-white rounded-md flex items-center",children:[e.jsx(I,{className:"inline mr-2"})," Delete"]})]})})]},t))})]})}),e.jsx("div",{className:"flex justify-end gap-4 mt-4",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400 transition",children:"Close"})})]})}),se&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex h-full w-full items-center justify-center bg-gray-800 bg-opacity-50",onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg w-1/3",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800 text-center",children:"Are you sure you want to delete this module?"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[e.jsxs("button",{onClick:Z,className:"px-6 py-2 bg-red-500 text-white rounded-md",children:[e.jsx(I,{className:"inline mr-2"}),"Yes, Delete"]}),e.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 bg-gray-300 text-white rounded-md",children:"Cancel"})]})]})})]})}function Ue(){return e.jsx(le,{title:"Menu Role List (master)",subTitle:"",children:e.jsx("div",{className:"py-0",children:e.jsx(Me,{})})})}export{Ue as default};
