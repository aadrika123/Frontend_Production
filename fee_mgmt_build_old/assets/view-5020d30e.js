var X=Object.defineProperty;var Z=(n,t,r)=>t in n?X(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var y=(n,t,r)=>(Z(n,typeof t!="symbol"?t+"":t,r),r);import{o as p,R as B,j as e,h as x,b as z,L as D,A as tt}from"./index-2715da7e.js";import{P as et}from"./Page-dc098a22.js";import{B as st}from"./Breadcrumb-6942b5af.js";import{a as nt}from"./index.esm-7c982a61.js";const rt=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),T=n=>Array.isArray(n)&&n.every(t=>typeof t=="object"&&!(t instanceof Array)),lt=n=>Array.isArray(n)&&n.every(t=>Array.isArray(t)),it=n=>Array.from(n.map(t=>Object.keys(t)).reduce((t,r)=>new Set([...t,...r]),[])),ot=(n,t)=>{t=t||it(n);let r=t,l=t;T(t)&&(r=t.map(c=>c.label),l=t.map(c=>c.key));const o=n.map(c=>l.map(d=>ct(d,c)));return[r,...o]},ct=(n,t)=>{const r=n.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(l,o,c,d){const a=l[o];if(a==null)d.splice(1);else return a},t);return r===void 0?n in t?t[n]:"":r},at=n=>typeof n>"u"||n===null?"":n,V=(n,t=",",r='"')=>n.filter(l=>l).map(l=>l.map(o=>at(o)).map(o=>`${r}${o}${r}`).join(t)).join(`
`),dt=(n,t,r,l)=>V(t?[t,...n]:n,r,l),pt=(n,t,r,l)=>V(ot(n,t),r,l),ut=(n,t,r,l)=>t?`${t.join(r)}
${n}`:n.replace(/"/g,'""'),H=(n,t,r,l)=>{if(T(n))return pt(n,t,r,l);if(lt(n))return dt(n,t,r,l);if(typeof n=="string")return ut(n,t,r);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},M=(n,t,r,l,o)=>{const c=H(n,r,l,o),d=rt()?"application/csv":"text/csv",a=new Blob([t?"\uFEFF":"",c],{type:d}),m=`data:${d};charset=utf-8,${t?"\uFEFF":""}${c}`,u=window.URL||window.webkitURL;return typeof u.createObjectURL>"u"?m:u.createObjectURL(a)},q={data:p.oneOfType([p.string,p.array,p.func]).isRequired,headers:p.array,target:p.string,separator:p.string,filename:p.string,uFEFF:p.bool,onClick:p.func,asyncOnClick:p.bool,enclosingCharacter:p.string},G={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},xt={target:"_blank"};var j;let mt=(j=class extends B.Component{constructor(t){super(t),this.state={}}buildURI(){return M(...arguments)}componentDidMount(){const{data:t,headers:r,separator:l,enclosingCharacter:o,uFEFF:c,target:d,specs:a,replace:m}=this.props;this.state.page=window.open(this.buildURI(t,c,r,l,o),d,a,m)}getWindow(){return this.state.page}render(){return null}},y(j,"defaultProps",Object.assign(G,xt)),y(j,"propTypes",q),j);class I extends B.Component{constructor(t){super(t),this.buildURI=this.buildURI.bind(this)}buildURI(){return M(...arguments)}handleLegacy(t,r=!1){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();const{data:l,headers:o,separator:c,filename:d,enclosingCharacter:a,uFEFF:m}=this.props,u=r&&typeof l=="function"?l():l;let f=new Blob([m?"\uFEFF":"",H(u,o,c,a)]);return window.navigator.msSaveBlob(f,d),!1}}handleAsyncClick(t){const r=l=>{if(l===!1){t.preventDefault();return}this.handleLegacy(t,!0)};this.props.onClick(t,r)}handleSyncClick(t){if(this.props.onClick(t)===!1){t.preventDefault();return}this.handleLegacy(t)}handleClick(){return t=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(t):this.handleSyncClick(t);this.handleLegacy(t)}}render(){const{data:t,headers:r,separator:l,filename:o,uFEFF:c,children:d,onClick:a,asyncOnClick:m,enclosingCharacter:u,...f}=this.props,g=typeof window>"u"?"":this.buildURI(t,c,r,l,u);return e.jsx("a",{download:o,...f,ref:b=>this.link=b,target:"_self",href:g,onClick:this.handleClick(),children:d})}}y(I,"defaultProps",G),y(I,"propTypes",q);const ft=mt,Nt=()=>{const{api_retrievestudent:n}=tt,[t,r]=x.useState([]),[l,o]=x.useState(1),[c,d]=x.useState(!1),[a,m]=x.useState(10),[u,f]=x.useState(),[J,g]=x.useState(),[b,w]=x.useState(!1),K=t,Q=s=>{m(parseInt(s))},W=s=>{o(s-1)},Y=s=>{o(s+1)};x.useEffect(()=>{N()},[l]),x.useEffect(()=>{N()},[a]);const N=async()=>{var s,h,v,C,F,k,S,E,A,L,R,_,P,O,U,$;try{w(!0);const i=await z.post(`${n}`,{perPage:a,page:l});console.log(i.data),i.status==200&&(((h=(s=i==null?void 0:i.data)==null?void 0:s.data)==null?void 0:h.total)===0?(toast.error("Data not Found"),r((C=(v=i==null?void 0:i.data)==null?void 0:v.data)==null?void 0:C.data),f((k=(F=i==null?void 0:i.data)==null?void 0:F.data)==null?void 0:k.last_page),g((E=(S=i==null?void 0:i.data)==null?void 0:S.data)==null?void 0:E.total)):(console.log("exam term data",(L=(A=i==null?void 0:i.data)==null?void 0:A.data)==null?void 0:L.data),r((_=(R=i==null?void 0:i.data)==null?void 0:R.data)==null?void 0:_.data),f((O=(P=i==null?void 0:i.data)==null?void 0:P.data)==null?void 0:O.last_page),g(($=(U=i==null?void 0:i.data)==null?void 0:U.data)==null?void 0:$.total)),w(!1))}catch(i){console.log(i),w(!1)}};return x.useEffect(()=>{N()},[]),e.jsx("div",{className:"bg-white",children:e.jsxs(et,{title:"Student",pageName:"Student List",children:[e.jsx(st,{list:[{title:"Home",path:"/csms/home"},{title:"Student Entry",path:"/csms/add-new-student"},{title:"Student List",path:"/csms/student/view"}]}),b?e.jsx(D,{}):e.jsxs("div",{className:"relative overflow-x-auto w-[95%] shadow-md mt-[2vh] ml-[2vw] sm:rounded-lg",children:[e.jsx("div",{className:"w-full flex items-end justify-end text-[#0F766E] my-4 text-[4vh] right",children:e.jsx(nt,{onClick:()=>d(!c)})}),c&&e.jsx(ft,{data:t,target:"_blank"}),e.jsxs("table",{className:"w-full text-sm text-left ",id:"myTable",children:[e.jsx("thead",{className:"text-md ",children:e.jsxs("tr",{className:"text-white bg-[#0F766E]",children:[e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Sl No."}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Financial Year"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Admission Date"}),e.jsx("th",{scope:"col",className:" py-5  text-center ",children:"Full Name"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Admission No"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Class"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Section"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Gender"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Category"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Special Ability"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Parent/Staff Quota"}),e.jsx("th",{scope:"col",className:" py-5  text-center",children:"Status"})]})}),K.map((s,h)=>e.jsx(e.Fragment,{children:e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b  hover:bg-slate-100 ",children:[e.jsx("td",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap  text-center",children:(l-1)*a+h+1}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.financial_year}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.admission_date}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.full_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.admission_no}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.class_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.section}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.gender_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.category_name}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.disability}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.is_parent_staff}),e.jsx("td",{className:"px-6 py-4 text-center",children:s==null?void 0:s.status})]})})}))]}),e.jsxs("div",{className:"flex p-4  w-full",children:[e.jsxs("div",{className:"flex items-start justify-start w-full ",children:[" ",e.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-[calc(1/2)] p-2.5 ",value:a,onChange:s=>Q(s.target.value),children:[5,10,25,50].map(s=>e.jsxs("option",{value:s,children:["show ",s]},s))})]}),e.jsxs("div",{className:"flex items-center justify-center w-full",children:[" ",e.jsxs("span",{children:["Page ","",e.jsxs("strong",{children:[l," of ",u]}),""]})]}),e.jsxs("div",{className:"flex items-center justify-end w-full",children:[e.jsx("button",{className:(l===1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>W(l),disabled:l===1,children:"⬅️"}),e.jsx("button",{className:(l===u?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>Y(l),disabled:l===u,children:"➡️"})]})]})]})]})})};export{Nt as default};
