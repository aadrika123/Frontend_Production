import{b as A,u as E,c as R,a as v,j as t,P as C,I,_ as i,d as U}from"./index-qJ39hj9z.js";import"./router-VubLdhT0.js";import{R as V}from"./RotatingLoader-e_Ow0dUc.js";import N from"./index-ekwgZPE0.js";import"./reactQuery-U0SXPRnt.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-kPGtpyku.js";import"./reactIcons-m3sh1_3a.js";import"./reactLazyLoadImageComponent-DVjwytrh.js";import"./headlessui-PACf4Y4w.js";import"./LoadingButton-g8sPgLM1.js";import"./useErrorFocusField-J-TSd_tv.js";function X(){var s,n,o,d,m;const{actions:r,state:z}=A({updateAction:U}),{mutateAsync:P,isLoading:L}=E({}),e=R({api:(s=v)==null?void 0:s.isUserAuth,config:{},key:"isUserAuth",options:{enabled:!0}});console.log((o=(n=e==null?void 0:e.data)==null?void 0:n.data[0])==null?void 0:o.is_epramaan);const _=async()=>{var l,c,x,g,u,f,j,b,y,h,p,w;try{const a=await P({api:(l=v)==null?void 0:l.ePramanLogin,data:{type:"mobile"}});(c=a==null?void 0:a.data)!=null&&c.status?(i.success((x=a==null?void 0:a.data)==null?void 0:x.message),r==null||r.updateAction({ePramaan:{codeVerifier:(u=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:u.code_verifier,nonce:(j=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:j.nonce,url:(y=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:y.url}}),window.location.href=(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.url):(i.error((w=a==null?void 0:a.data)==null?void 0:w.message),r==null||r.updateAction({ePramaan:{codeVerifier:"",nonce:"",url:""}}))}catch(a){i.error("Something went wrong")}};return L||e!=null&&e.isLoading?t.jsx(V,{}):t.jsx(C,{title:"Auth",children:t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx("h2",{className:"font-bold mb-4 text-green-700 text-center",children:"Citizen Login"})}),t.jsx("div",{className:"flex flex-col items-center justify-center ",children:t.jsxs("button",{onClick:_,type:"button",className:"text-gray-700 font-semibold w-full justify-center bg-gray-300 hover:bg-gray-200 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2",children:[t.jsx(I,{src:"/images/epraman.webp",alt:"EPraman",className:"w-6 h-5 me-2 -ms-1"}),"Login with E-Praman"]})}),t.jsx(N,{}),((m=(d=e==null?void 0:e.data)==null?void 0:d.data[0])==null?void 0:m.is_epramaan)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col items-center justify-center mt-4",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-1/3 border-b border-gray-300"}),t.jsx("div",{className:"mx-2 text-gray-500",children:"or"}),t.jsx("div",{className:"w-1/3 border-b border-gray-300"})]})}),t.jsx("div",{children:t.jsx(N,{})})]})]})})}export{X as default};
