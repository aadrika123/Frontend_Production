import{r as n,J as I,j as a,O as Q,T as W,U as X,aM as Y,a as M,l as O}from"./index-36a68104.js";import{L as Z}from"./ListTable2v2-ea18cf6a.js";import{B as o}from"./BarLoader-852ce741.js";import{G as r}from"./GlobalFilter-1c34d190.js";import{k as p}from"./index.esm-aeb23252.js";function ee(e){console.log("enter in margin table");const[h,s]=n.useState("hidden"),v=n.useMemo(()=>e.columns,[]),P=n.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[b,B]=n.useState(1),[D,m]=n.useState(!0),[N,f]=n.useState(!0),[F,L]=n.useState(0);n.useEffect(()=>{B(1)},[e==null?void 0:e.totalCount]),n.useEffect(()=>{m(!0),f(!0);let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?k(parseInt(l)+1):k(parseInt(l)),c==b&&m(!1),(c==b||b==1)&&f(!1)},[e==null?void 0:e.totalCount,F]);const{getTableProps:J,getTableBodyProps:S,headerGroups:x,page:A,nextPage:R,previousPage:i,canNextPage:H,canPreviousPage:_,prepareRow:q,pageOptions:G,gotoPage:$,pageCount:z,setPageSize:k,state:E,rows:T,setGlobalFilter:t}=I.useTable({columns:v,data:P,initialState:{pageIndex:0}},I.useGlobalFilter,I.useSortBy,I.usePagination),{globalFilter:d,pageIndex:u,pageSize:c}=E,w=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&(f(!0),e.nextPage()),(e==null?void 0:e.lastPage)==(e==null?void 0:e.currentPage)&&m(!1)},C=()=>{(e==null?void 0:e.currentPage)!=1&&(m(!0),e.prevPage()),(e==null?void 0:e.currentPage)==1&&f(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex mb-2 pb-2",children:[a.jsx("div",{className:"flex-initial opacity-50",children:a.jsx(r,{filter:d,setFilter:t})}),a.jsx("div",{className:"flex-initial ml-2",children:a.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>s(""),onMouseLeave:()=>s("hidden"),onClick:e.exportDataF,children:["Export",a.jsx("div",{className:h+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:a.jsx(Q,{})})]})}),a.jsx("div",{className:"flex-1",children:e.children})]}),a.jsx("div",{className:"flex w-full",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"opacity-50",children:"Total Result : "}),a.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&a.jsx("div",{children:a.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[a.jsx(p,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),a.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:a.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[a.jsxs("table",{...S,className:"min-w-full leading-normal",children:[a.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:x==null?void 0:x.map(l=>a.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(g=>a.jsxs("th",{...g.getHeaderProps(g.getSortByToggleProps()),className:"px-2 py-3 border-[1px] text-center border-gray-200 text-gray-800 text-xs capitalize",children:[g.render("Header"),a.jsx("span",{children:g.isSorted?g.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),a.jsxs("tbody",{...S(),className:"text-sm",children:[T.map((l,g)=>{var j;return q(l),a.jsx("tr",{...l.getRowProps(),className:"bg-white shadow-lg border-[1px] border-gray-200",children:(j=l==null?void 0:l.cells)==null?void 0:j.map(y=>a.jsx("td",{...y.getCellProps(),className:"px-2 py-2 text-sm text-left border-[1px] border-gray-200",children:y.render("Cell")}))})}),a.jsx("tr",{children:a.jsx("td",{})})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-12",children:[a.jsxs("div",{className:"col-span-2",children:["  ",a.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:F,onChange:l=>{L(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>a.jsxs("option",{value:l,children:["show ",l]},l))})]}),a.jsxs("div",{className:"col-span-4 text-center col-start-5",children:["   ",a.jsxs("span",{children:["page ","",a.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),a.jsxs("div",{className:"col-span-4 text-right",children:[a.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goFirst(),f(!1),m(!0)),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[a.jsx(W,{})," "]}),a.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>C(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"}),a.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>w(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"}),a.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goLast(),m(!1),f(!0)),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",a.jsx(X,{})]})]})]})]})})]})}const ie=e=>{const[h,s]=n.useState(5),[v,P]=n.useState(1),[b,B]=n.useState(0),[D,m]=n.useState(0),[N,f]=n.useState(0),[F,L]=n.useState(),[J,S]=n.useState(!1),[x,A]=n.useState(),[R,i]=n.useState(!1),H=()=>{i(!0),console.log("entered in new method..."),console.log(`data before hitting api (${(e==null?void 0:e.api)+"?page="+v}) => `,{...e==null?void 0:e.requestBody,perPage:h}),M.post((e==null?void 0:e.api)+"?page="+v,{...e==null?void 0:e.requestBody,perPage:h},O()).then(t=>{var d,u,c,w,C,l,g,j,y;((d=t==null?void 0:t.data)==null?void 0:d.status)==!0?(console.log("search success => ",t),A((c=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:c.data),f((C=(w=t==null?void 0:t.data)==null?void 0:w.data)==null?void 0:C.total),B((g=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:g.current_page),m((y=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:y.last_page)):console.log("error while search => ",t),i(!1)}).catch(t=>(console.log("error while search => ",t),i(!1)))},_=()=>{i(!0),console.log(`data before hitting api (${e==null?void 0:e.api}) => `,{...e==null?void 0:e.requestBody,perPage:h,page:v}),M.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:h,page:v},O()).then(t=>{var d,u,c,w,C,l,g,j,y,U,V,K;((d=t==null?void 0:t.data)==null?void 0:d.status)==!0?(console.log("search success => ",t),e==null||e.dataLength((w=(c=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:c.data)==null?void 0:w.length),A((l=(C=t==null?void 0:t.data)==null?void 0:C.data)==null?void 0:l.data),f((j=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:j.total),B((U=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:U.current_page),m((K=(V=t==null?void 0:t.data)==null?void 0:V.data)==null?void 0:K.last_page)):console.log("error while search => ",t),i(!1)}).catch(t=>(console.log("error while search => ",t),i(!1)))};n.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(e==null?void 0:e.type)=="new"&&(console.log("calling new fun"),P(1),s(5),H()),(e==null?void 0:e.requestBody)!=null&&(e==null?void 0:e.type)=="old"&&(console.log("calling old fun"),P(1),s(5),_()),console.log("change data",e==null?void 0:e.changeData,"and requestBody => ",e==null?void 0:e.requestBody)},[e==null?void 0:e.changeData]);const q=()=>{P(b+1)},G=()=>{P(b-1)},$=t=>{s(t)};n.useEffect(()=>{i(!0),(e==null?void 0:e.type)=="new"&&H(),(e==null?void 0:e.type)=="old"&&_()},[v,h]);const z=()=>{P(1)},k=()=>{P(D)},E=()=>{i(!0),S(!1),(e==null?void 0:e.type)=="new"&&M.post((e==null?void 0:e.api)+"?page=1",{...e==null?void 0:e.requestBody,perPage:N},O()).then(t=>{var d,u,c;((d=t==null?void 0:t.data)==null?void 0:d.status)==!0&&(L((c=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:c.data),T()),i(!1)}).catch(t=>{i(!1)}),(e==null?void 0:e.type)=="old"&&M.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:N},O()).then(t=>{var d,u,c;((d=t==null?void 0:t.data)==null?void 0:d.status)==!0&&(L((c=(u=t==null?void 0:t.data)==null?void 0:u.data)==null?void 0:c.data),T()),i(!1)}).catch(t=>{i(!1)})},T=()=>{S(!0)};return console.log("getting margin status",e==null?void 0:e.margin),a.jsxs(a.Fragment,{children:[J&&a.jsx(Y,{data:F}),R&&a.jsx(o,{}),x!=null&&(x==null?void 0:x.length)!=0?a.jsx(a.Fragment,{children:e!=null&&e.margin?a.jsx(ee,{currentPage:b,lastPage:D,goFirst:z,goLast:k,count1:N,columns:e==null?void 0:e.columns,dataList:x,exportStatus:!0,perPage:h,perPageC:$,totalCount:N,nextPage:q,prevPage:G,exportDataF:E,exportData:F}):a.jsx(Z,{currentPage:b,lastPage:D,goFirst:z,goLast:k,count1:N,columns:e==null?void 0:e.columns,dataList:x,exportStatus:!0,perPage:h,perPageC:$,totalCount:N,nextPage:q,prevPage:G,exportDataF:E,exportData:F})}):a.jsx(a.Fragment,{children:!R&&a.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})})]})};export{ie as default};
