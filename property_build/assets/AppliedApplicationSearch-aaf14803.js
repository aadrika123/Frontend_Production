import{r as o,ad as R,b as T,l as y,d as U,e as j,f as $,u as I,j as r,C as O,S as V,k as M,L as E,a as W,n as s,P as q}from"./index-3ca777cc.js";import{e as G}from"./index.esm-f928ac9b.js";import{s as z,c as J}from"./superNavigation-177b3a8b.js";function se(){const[a,v]=o.useState(),[u,d]=o.useState(!1),[N,c]=o.useState();o.useState();const[C,p]=o.useState(),[K,h]=o.useState(!1),[Q,_]=o.useState(),[S,x]=o.useState(!1),[A,f]=o.useState(!1),{filterParam:m,searchValueParam:g}=R();T("Search Applications");const{api_getWardListByLogin:X,api_filterPropertyDetails:Y,api_filterPropertyAppliedApplications:B}=q();y();const H=U({filterBy:j().required("This is a required field !"),entry:j().required("This is a required field !")}),i=$({initialValues:{filterBy:"",entry:""},onSubmit:e=>{w(e),_(e.filterBy)},validationSchema:H}),t=I(),w=e=>{f(!1),x(!0),d(!1);const n={filteredBy:e.filterBy,applicationNo:e.entry};console.log("before fetch applied application..",n),W.post(B,n,y()).then(l=>{var b;console.table("applied application. in at ...",l==null?void 0:l.data),e.filterBy=="saf"?c(L):e.filterBy=="gbsaf"?c(k):c(D),J(`/property/searchAppliedProperty/${encodeURIComponent(e==null?void 0:e.filterBy)}/${encodeURIComponent(e==null?void 0:e.entry)}`),v((b=l==null?void 0:l.data)==null?void 0:b.data),d(!0),x(!1)}).catch(l=>{console.log("Error while fetching Filter Data",l),d(!1),f(!0),x(!1)})};console.log("datassssssssss",a);const F=e=>{i.values.filterBy=e.target.value,e.target.value=="holdingNo"&&(p("15 Digit Holding No"),h(!0)),e.target.value=="ownerDetails"&&(p("Owner Details"),h(!1)),e.target.value=="address"&&(p("Address"),h(!1))},L=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.saf_no)})},{Header:"Assessment Type",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.assessment_type)})},{Header:"First Owner",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.owner_name)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Applied By",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.appliedby)})},{Header:"Current Level",Cell:({cell:e})=>r.jsx("div",{className:"bg-indigo-100 text-black px-2 py-0.5 shadow-xl rounded-xl text-center",children:s(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>t(`/propApplicationDetails/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&r.jsx("button",{onClick:()=>t(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],k=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.saf_no)})},{Header:"Officer's Name",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.officer_name)})},{Header:"Assessment Type",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.assessment_type)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Apply Date",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.updated_at)})},{Header:"Current Level",Cell:({cell:e})=>r.jsx("span",{className:"bg-indigo-100 text-black px-2 py-0.5 shadow-xl rounded-xl",children:s(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>t(`/gbsaf-details/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&r.jsx("button",{onClick:()=>t(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],D=[{Header:"Ward No.",Cell:({cell:e})=>r.jsx("span",{children:e.row.original.new_ward_no==""?s(e.row.original.old_ward_no):s(e.row.original.new_ward_no)})},{Header:"Application No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.application_no)})},{Header:"Holding No.",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.new_holding_no)})},{Header:"Applicant Name",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.owner_name)})},{Header:"Mobile No",Cell:({cell:e})=>r.jsx("span",{children:s(e.row.original.mobile_no)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsx("button",{onClick:()=>{i.values.filterBy=="concession"&&t(`/concession-details/${e.row.values.id}`),i.values.filterBy=="objection"&&t(`/objection-details/${e.row.values.id}`),i.values.filterBy=="harvesting"&&t(`/harvesting-details/${e.row.values.id}`),i.values.filterBy=="holdingDeactivation"&&t(`/holding-deactivatioin-details/${e.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];o.useEffect(()=>{g!="direct"&&(console.log("filter param ",decodeURIComponent(m)),i.setFieldValue("filterBy",decodeURIComponent(m)),i.setFieldValue("entry",decodeURIComponent(g)),w({filterBy:decodeURIComponent(m),entry:decodeURIComponent(g)}))},[]);const P=e=>{let n=e.target.name;e.target.value,n=="filterBy"&&F(e)};return A?r.jsx(O,{children:r.jsx(V,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):r.jsxs(r.Fragment,{children:[S&&r.jsx(M,{}),r.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[r.jsxs("div",{className:"hidden sm:flex ml-5 mt-2 ",children:[r.jsx("img",{src:z,alt:"",className:"w-10 h-10"}),r.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Applied Applications"})]}),r.jsx("form",{onSubmit:i.handleSubmit,onChange:P,children:r.jsxs("div",{className:"flex-col sm:flex-row flex justify-center sm:space-x-8 my-5 m-10",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{...i.getFieldProps("filterBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"saf",children:"SAF"}),r.jsx("option",{value:"gbsaf",children:"GBSAF"}),r.jsx("option",{value:"concession",children:"Concession"}),r.jsx("option",{value:"objection",children:"Objection"}),r.jsx("option",{value:"harvesting",children:"Rainwater Harvesting"}),r.jsx("option",{value:"holdingDeactivation",children:"Holding Deactivation"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:i.touched.filterBy&&i.errors.filterBy?i.errors.filterBy:null})]}),r.jsxs("div",{className:"mt-5 sm:mt-0",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","Application / SAF No. ",C," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",...i.getFieldProps("entry"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:i.touched.entry&&i.errors.entry?i.errors.entry:null})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{type:"submit",className:"w-full border rounded-md border-indigo-500 bg-indigo-500 hover:bg-indigo-700 text-white  shadow-lg  text-base font-semibold px-5 sm:m-3 py-1",children:[" ",r.jsxs("p",{className:"flex",children:[" ",r.jsxs("span",{className:"mt-1 mr-2",children:[" ",r.jsx(G,{})," "]})," ","Search record"]})]})})]})}),r.jsxs("div",{className:"sm:m-10",children:[u&&(a==null?void 0:a.length)!=0&&r.jsx(E,{exportStatus:!1,columns:N,dataList:a}),u&&(a==null?void 0:a.length)==0&&r.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]})]})]})}export{se as default};
