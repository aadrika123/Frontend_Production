import{M as F,b as se,r as i,l as q,d as _,e as f,f as A,a5 as I,j as l,q as de,k as oe,L as re,n as g,a as j,an as ue,Q as me}from"./index-3ca777cc.js";import{B as he}from"./BottomErrorCard-f2634567.js";const xe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};F.setAppElement("#root");function ve(){se("Bank Reconciliation");const[M,N]=i.useState(!1),[y,T]=i.useState(""),[B,H]=i.useState(),[P,d]=i.useState(!1),[b,w]=i.useState(!1),[n,R]=i.useState(),[E,L]=i.useState(0),[V,O]=i.useState(""),[U,z]=i.useState(!1),[$,Q]=i.useState(null),[be,W]=i.useState(!1),{getReconcillationDetails:G,apiUpdateReconcillationDetails:J,getReconcileById:K}=ue(),C=q();function X(e){N(!0),H(e),console.log("====transactionNo in funcion",e)}function v(){N(!1)}const Y=()=>{v()},D=e=>{var s,t,r,u,m,S;d(!0),console.log("parameters for filter data is ",e);const c={fromDate:(s=a==null?void 0:a.values)==null?void 0:s.fromDate,toDate:(t=a==null?void 0:a.values)==null?void 0:t.toDate,moduleId:(r=a==null?void 0:a.values)==null?void 0:r.moduleId,paymentMode:(u=a==null?void 0:a.values)==null?void 0:u.paymentMode,verificationType:(m=a==null?void 0:a.values)==null?void 0:m.verificationType,chequeDdNo:(S=a==null?void 0:a.values)==null?void 0:S.cheque_dd_no};O(e==null?void 0:e.moduleId),j.post(G,c,C).then(h=>{var k;return console.log("Fetched Filter Data",h),w((k=h==null?void 0:h.data)==null?void 0:k.data),d(!1)}).catch(h=>{console.log("Error while fetching filter Data",h),x(!0,"Error occured while fetching bank reconciliation list. Please try again later."),d(!1)})},Z=_({fromDate:f().required("Select from date"),toDate:f().required("Select to date")}),a=A({initialValues:{fromDate:I(new Date).format("yy-MM-DD"),toDate:I(new Date).format("yy-MM-DD"),moduleId:"1",paymentMode:"",verificationType:"",cheque_dd_no:""},enableReinitialize:!0,onSubmit:e=>{D(e)},validationSchema:Z}),p=e=>{W(!0),j.post(J,{chequeId:E,moduleId:V,status:e==null?void 0:e.clearStatus,clearanceDate:e==null?void 0:e.clearanceDate,remarks:e==null?void 0:e.reason,cancellationCharge:e==null?void 0:e.charge},C).then(c=>(console.log("Data Update Successfully",c),Y(),d(!1),D(),me.success("Action Taken Successfully !!!"))).catch(c=>(console.log("Error : Data Not Updated",c),d(!1),x(!0,"Error occured while bank reconile. Please try again later.")))},ee=_({clearStatus:f().required("Select to Status"),clearanceDate:f().required("Select from Date")}),o=A({initialValues:{transactionNo:B,clearanceDate:"",clearStatus:"",reason:"",charge:""},onSubmit:e=>{console.log("--2 Clear VAluee...",e),p(e)},validationSchema2:ee}),le=e=>{console.log("============sdfsdf---------",e.target.value),o.values.clearStatus=e.target.value,T(e.target.value)},ae=e=>o.values.clearanceDate=e.target.value,te=e=>o.values.reason=e.target.value,ne=e=>o.values.charge=e.target.value,ce=(e,c)=>{d(!0),L(e);let s={chequeId:e,moduleId:c};j.post(K,s,q()).then(t=>{var r,u,m;((r=t==null?void 0:t.data)==null?void 0:r.status)==!0&&(console.log("getting data by id with payload is => ",s,`
 and  response is => `,t),d(!1),R((u=t==null?void 0:t.data)==null?void 0:u.data),X()),((m=t==null?void 0:t.data)==null?void 0:m.status)==!1&&(console.log("error getting data by id with payload is => ",s,`
 and  response is => `,t),x(!0,"Error occured while fetching bank reconcile details. Please try again later."),d(!1))}).catch(t=>{console.log("error getting data by id with payload is => ",s,`
 and  response is => `,t),x(!0,"Error occured while fetching bank reconcile details. Please try again later."),d(!1)})},ie=[{Header:"S.No.",Cell:({row:e})=>l.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Tran. No.",accessor:"tran_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Payment Mode",accessor:"payment_mode",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Type",accessor:"tran_type",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Cheque Date",accessor:"cheque_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Cheque No.",accessor:"cheque_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Bank Name",accessor:"bank_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Branch Name",accessor:"branch_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Amount",accessor:"amount",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Clearance Date",accessor:"clear_bounce_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Remarks",accessor:"remarks",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"TC Name.",accessor:"user_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:l.jsx("i",{className:"font-semibold ",children:"N/A"})});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Action",Cell:({cell:e})=>{var c,s;return((s=(c=e.row)==null?void 0:c.original)==null?void 0:s.status)=="2"&&l.jsxs("span",{onClick:()=>{var t,r,u,m;ce((r=(t=e.row)==null?void 0:t.original)==null?void 0:r.id,(m=(u=e==null?void 0:e.row)==null?void 0:u.original)==null?void 0:m.module_id)},className:" px-2 py-1 rounded-lg shadow-lg border border-gray-300 bg-indigo-500 hover:bg-indigo-600 text-white cursor-pointer",children:[l.jsx("span",{className:"font-semibold",children:"View"})," "]})}}],x=(e,c)=>{Q(c),z(e)};return l.jsxs(l.Fragment,{children:[l.jsx(de,{autoClose:2e3}),P&&l.jsx(oe,{}),U&&l.jsx(he,{activateBottomErrorCard:x,errorTitle:$}),l.jsx("form",{onSubmit:a.handleSubmit,children:l.jsxs("div",{className:"grid grid-cols-12 space-x-2 bg-sky-100 p-2 rounded-md",children:[l.jsx("div",{className:"col-span-12",children:l.jsxs("h1",{className:" text-xl font-semibold",children:[l.jsx("img",{src:"",className:"inline w-10"})," Bank Reconciliation"]})}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:["From Date",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{...a.getFieldProps("fromDate"),type:"date",className:"form-control block w-full px-1 py-1.5 text-sm md:text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer"}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.fromDate&&a.errors.fromDate?a.errors.fromDate:null})]}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:["To Date",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{...a.getFieldProps("toDate"),type:"date",className:"form-control block w-full px-1 py-1.5 text-sm md:text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer"}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.toDate&&a.errors.toDate?a.errors.toDate:null})]}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:["Module",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{...a.getFieldProps("moduleId"),value:a.values.moduleId,onChange:a.handleChange,className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[l.jsx("option",{value:"1",children:"Property"}),l.jsx("option",{value:"2",children:"Water"}),l.jsx("option",{value:"3",children:"Trade"})]}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.moduleId&&a.errors.moduleId?a.errors.moduleId:null})]}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsxs("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:["Payment Mode",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{...a.getFieldProps("paymentMode"),className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"cheque",children:"Cheque"}),l.jsx("option",{value:"dd",children:"DD"})]})]}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsx("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:"Verfication Type"}),l.jsxs("select",{...a.getFieldProps("verificationType"),className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[l.jsx("option",{children:"All"}),l.jsx("option",{value:"clear",children:"Clear"}),l.jsx("option",{value:"bounce",children:"Bounce"}),l.jsx("option",{value:"pending",children:"Pending"})]})]}),l.jsxs("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:[l.jsx("label",{className:"form-label inline-block mb-1  text-sm font-semibold",children:"Cheque/DD no."}),l.jsx("input",{...a.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.cheque_dd_no&&a.errors.cheque_dd_no?a.errors.cheque_dd_no:null})]}),l.jsx("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:l.jsx("button",{type:"submit",className:"px-10 text-base py-1.5 mt-7 bg-green-600 text-white font-medium rounded shadow-md hover:bg-green-700 hover:shadow-lg",children:"Search"})})]})}),l.jsx("div",{className:"form-group mb-1 md:mb-2 col-span-4 md:col-span-3 md:px-4",children:l.jsx("button",{onClick:()=>w(!1),className:"px-4 text-sm py-1.5 mt-7 bg-sky-600 text-white font-medium rounded shadow-md hover:bg-sky-700 hover:shadow-lg",children:"View All Record"})}),l.jsx("div",{className:"border-b mx-10 my-5"}),l.jsx("div",{className:"p-5",children:(b==null?void 0:b.length)>0?l.jsx(re,{columns:ie,dataList:b}):l.jsx("p",{className:"text-center font-semibold",children:" No Filter data Found!"})}),l.jsx(F,{isOpen:M,onRequestClose:v,style:xe,contentLabel:"Example Modal",children:l.jsxs("form",{onSubmit:o.handleSubmit,className:"bg-sky-200 rounded-lg shadow-xl border-2 border-gray-50 w-[50vw] p-4 text-sm",children:[l.jsxs("div",{className:"grid grid-cols-12",children:[l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center mb-1",children:[l.jsx("div",{className:"col-span-6",children:"Cheque No."}),l.jsx("div",{className:"col-span-6 font-semibold",children:g(n==null?void 0:n.cheque_no)})]}),l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center mb-1",children:[l.jsx("div",{className:"col-span-6",children:"Cheque Date"}),l.jsx("div",{className:"col-span-6 font-semibold",children:g(n==null?void 0:n.cheque_date)})]}),l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center mb-1",children:[l.jsx("div",{className:"col-span-6",children:"Bank Name"}),l.jsx("div",{className:"col-span-6 font-semibold",children:g(n==null?void 0:n.bank_name)})]}),l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center mb-1",children:[l.jsx("div",{className:"col-span-6",children:"Branch Name"}),l.jsx("div",{className:"col-span-6 font-semibold",children:g(n==null?void 0:n.branch_name)})]})]}),l.jsxs("div",{className:"grid-cols-12 grid gap-y-2 gap-x-10 mt-4",children:[l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center",children:[l.jsx("label",{className:"col-span-6 inline-block mb-1  text-sm font-semibold",children:"Status"}),l.jsxs("span",{className:"col-span-6",children:[l.jsxs("select",{name:"clearStatus",onChange:e=>le(e),className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[l.jsx("option",{value:"",children:"--select--"}),l.jsx("option",{value:"bounce",children:"Bounce"}),l.jsx("option",{value:"clear",children:"Clear"})]}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:o.touched.clearStatus&&o.errors.clearStatus?o.errors.clearStatus:null})]})]}),l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center",children:[l.jsx("label",{className:"col-span-6 inline-block mb-1  text-sm font-semibold",children:"Clearance Date"}),l.jsxs("span",{className:"col-span-6",children:[l.jsx("input",{onChange:e=>ae(e),type:"date",className:"w-full form-control block w-fullpx-1 py-1.5 px-2 text-sm md:text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer"}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.clearDate&&a.errors.clearDate?a.errors.clearDate:null})]})]}),y=="bounce"&&l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center",children:[l.jsx("label",{className:"col-span-6 inline-block mb-1  text-sm font-semibold",children:"Reason"}),l.jsxs("span",{className:"col-span-6",children:[l.jsxs("select",{onChange:e=>te(e),className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[l.jsx("option",{value:"",children:"--select--"}),l.jsx("option",{value:"Insufficient funds",children:"Insufficient funds"}),l.jsx("option",{value:"Irregular signature",children:"Irregular signature"}),l.jsx("option",{value:"Stale and post dated cheque",children:"Stale and post dated cheque"}),l.jsx("option",{value:"Alterations",children:"Alterations"}),l.jsx("option",{value:"Frozen account",children:"Frozen account"}),l.jsx("option",{value:"other",children:"Other"})]}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.reason&&a.errors.reason?a.errors.reason:null})]})]}),y=="bounce"&&l.jsxs("div",{className:"col-span-6 grid grid-cols-12 items-center",children:[l.jsx("label",{className:"col-span-6 inline-block mb-1  text-sm font-semibold",children:"Cancelation Charge"}),l.jsxs("span",{className:"col-span-6",children:[l.jsx("input",{onChange:e=>ne(e),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal  bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus: focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer"}),l.jsx("span",{className:"text-red-600 absolute text-xs",children:a.touched.charge&&a.errors.charge?a.errors.charge:null})]})]}),l.jsxs("div",{className:"col-span-12 w-full flex justify-between mt-4",children:[l.jsx("div",{onClick:v,className:"w-max cursor-pointer text-center bg-red-500 text-white px-4 py-1 rounded-md shadow-lg transition ease-in-out hover:bg-red-700",children:"Close"}),l.jsx("button",{type:"submit",className:"text-center bg-blue-500 text-white px-4 py-1 rounded-md shadow-lg transition ease-in-out hover:bg-blue-700",children:"Submit"})]})]})]})}),l.jsx("div",{className:"h-[20vh]"})]})}export{ve as default};
