import{r as a,ag as U,b as $,q as v,d as I,e as g,f as T,u as V,j as s,C as M,S as O,v as E,L as W,a as q,n as r,P as G}from"./index-594013e5.js";import{e as z}from"./index.esm-3f83f2fe.js";import{s as J,c as K}from"./superNavigation-177b3a8b.js";function oe(){const[i,_]=a.useState(),[b,d]=a.useState(!1),[N,c]=a.useState();a.useState();const[C,p]=a.useState(),[Q,h]=a.useState(!1),[X,B]=a.useState(),[S,m]=a.useState(!1),[A,f]=a.useState(!1),{filterParam:x,searchByParam:y,searchValueParam:u}=U();$("Search Applications");const{api_getWardListByLogin:Y,api_filterPropertyDetails:Z,api_filterPropertyAppliedApplications:H}=G();v();const F=I({filterBy:g().required("Select filter by !"),searchBy:g().required("Select search by !"),entry:g().required("select value !")}),o=T({initialValues:{filterBy:"",searchBy:"",entry:""},onSubmit:e=>{w(e),B(e.filterBy)},validationSchema:F}),l=V(),w=e=>{f(!1),m(!0),d(!1);const n={filteredBy:e.filterBy,searchBy:e==null?void 0:e.searchBy,value:e.entry};console.log("before fetch applied application..",n),q.post(H,n,v()).then(t=>{var j;console.table("applied application. in at ...",t==null?void 0:t.data),e.filterBy=="saf"?c(L):e.filterBy=="gbsaf"?c(P):c(k),K(`/property/searchAppliedProperty/${encodeURIComponent(e==null?void 0:e.filterBy)}/${encodeURIComponent(e==null?void 0:e.searchBy)}/${encodeURIComponent(e==null?void 0:e.entry)}`),_((j=t==null?void 0:t.data)==null?void 0:j.data),d(!0),m(!1)}).catch(t=>{console.log("Error while fetching Filter Data",t),d(!1),f(!0),m(!1)})};console.log("datassssssssss",i);const R=e=>{o.values.filterBy=e.target.value,e.target.value=="holdingNo"&&(p("15 Digit Holding No"),h(!0)),e.target.value=="ownerDetails"&&(p("Owner Details"),h(!1)),e.target.value=="address"&&(p("Address"),h(!1))},L=[{Header:"Ward No.",accessor:"old_ward_no",Cell:({cell:e})=>s.jsx("span",{children:e.row.original.new_ward_no==""?r(e.row.original.old_ward_no):r(e.row.original.new_ward_no)})},{Header:"Application No",accessor:"saf_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.saf_no)})},{Header:"Assessment Type",accessor:"assessment_type",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.assessment_type)})},{Header:"First Owner",accessor:"owner_name",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.owner_name)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.mobile_no)})},{Header:"Applied By",accessor:"appliedby",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.appliedby)})},{Header:"Current Level",accessor:"currentRole",Cell:({cell:e})=>s.jsx("div",{className:"bg-red-200 text-black px-2 py-0.5 shadow-xl rounded-xl text-center",children:r(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>l(`/propApplicationDetails/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&s.jsx("button",{onClick:()=>l(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],P=[{Header:"Ward No.",accessor:"old_ward_no",Cell:({cell:e})=>s.jsx("span",{children:e.row.original.new_ward_no==""?r(e.row.original.old_ward_no):r(e.row.original.new_ward_no)})},{Header:"Application No",accessor:"saf_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.saf_no)})},{Header:"Officer's Name",accessor:"officer_name",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.officer_name)})},{Header:"Assessment Type",accessor:"assessment_type",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.assessment_type)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.mobile_no)})},{Header:"Apply Date",accessor:"updated_at",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.updated_at)})},{Header:"Current Level",accessor:"currentRole",Cell:({cell:e})=>s.jsx("span",{className:"bg-red-200 text-black px-2 py-0.5 shadow-xl rounded-xl",children:r(e.row.original.currentRole)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>l(`/gbsaf-details/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:"View"}),e.row.original.payment_status==0&&s.jsx("button",{onClick:()=>l(`/viewDemand/${e.row.values.id}`),className:"ml-4 mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-500 hover:text-white",children:"Pay"})]})}],k=[{Header:"Ward No.",accessor:"old_ward_no",Cell:({cell:e})=>s.jsx("span",{children:e.row.original.new_ward_no==""?r(e.row.original.old_ward_no):r(e.row.original.new_ward_no)})},{Header:"Application No",accessor:"application_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.application_no)})},{Header:"Holding No.",accessor:"new_holding_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.new_holding_no)})},{Header:"Applicant Name",accessor:"owner_name",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.owner_name)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>s.jsx("span",{children:r(e.row.original.mobile_no)})},{Header:"Action",accessor:"id",Cell:({cell:e})=>s.jsx("button",{onClick:()=>{o.values.filterBy=="concession"&&l(`/concession-details/${e.row.values.id}`),o.values.filterBy=="objection"&&l(`/objection-details/${e.row.values.id}`),o.values.filterBy=="harvesting"&&l(`/harvesting-details/${e.row.values.id}`),o.values.filterBy=="holdingDeactivation"&&l(`/holding-deactivatioin-details/${e.row.values.id}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];a.useEffect(()=>{u!="direct"&&(console.log("filter param ",decodeURIComponent(x)),o.setFieldValue("filterBy",decodeURIComponent(x)),o.setFieldValue("searchBy",decodeURIComponent(y)),o.setFieldValue("entry",decodeURIComponent(u)),w({filterBy:decodeURIComponent(x),searchBy:decodeURIComponent(y),entry:decodeURIComponent(u)}))},[]);const D=e=>{let n=e.target.name;e.target.value,n=="filterBy"&&R(e)};return A?s.jsx(M,{children:s.jsx(O,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):s.jsxs(s.Fragment,{children:[S&&s.jsx(E,{}),s.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[s.jsxs("div",{className:"hidden sm:flex ml-5 mt-2 ",children:[s.jsx("img",{src:J,alt:"",className:"w-10 h-10"}),s.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Applied Applications"})]}),s.jsx("form",{onSubmit:o.handleSubmit,onChange:D,children:s.jsxs("div",{className:"flex-col sm:flex-row flex justify-center sm:space-x-8 my-5 m-10",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{...o.getFieldProps("filterBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"saf",children:"SAF"}),s.jsx("option",{value:"gbsaf",children:"GBSAF"}),s.jsx("option",{value:"concession",children:"Concession"}),s.jsx("option",{value:"objection",children:"Objection"}),s.jsx("option",{value:"harvesting",children:"Rainwater Harvesting"}),s.jsx("option",{value:"holdingDeactivation",children:"Holding Deactivation"})]}),s.jsx("p",{className:"text-red-500 text-xs",children:o.touched.filterBy&&o.errors.filterBy?o.errors.filterBy:null})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{...o.getFieldProps("searchBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"applicationNo",children:"Application No."}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"mobileNo",children:"Mobile No."}),s.jsx("option",{value:"ptn",children:"Holding No."}),s.jsx("option",{value:"holding",children:"PTN"})]}),s.jsx("p",{className:"text-red-500 text-xs",children:o.touched.searchBy&&o.errors.searchBy?o.errors.searchBy:null})]}),s.jsxs("div",{className:"mt-5 sm:mt-0",children:[s.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ","value ",C," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",...o.getFieldProps("entry"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),s.jsx("p",{className:"text-red-500 text-xs",children:o.touched.entry&&o.errors.entry?o.errors.entry:null})]}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{type:"submit",className:"w-full border rounded-md border-indigo-500 bg-indigo-500 hover:bg-indigo-700 text-white  shadow-lg  text-base font-semibold px-5 sm:m-3 py-1",children:[" ",s.jsxs("p",{className:"flex",children:[" ",s.jsxs("span",{className:"mt-1 mr-2",children:[" ",s.jsx(z,{})," "]})," ","Search record"]})]})})]})}),s.jsxs("div",{className:"sm:m-10",children:[b&&(i==null?void 0:i.length)!=0&&s.jsx(W,{exportStatus:!1,columns:N,dataList:i}),b&&(i==null?void 0:i.length)==0&&s.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]})]})]})}export{oe as default};
