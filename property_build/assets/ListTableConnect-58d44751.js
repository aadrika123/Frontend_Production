import{r as u,j as d,aK as I,a as B,l as q}from"./index-798480d7.js";import{L as J}from"./ListTable2v2-1fd2ddaf.js";import{B as M}from"./BarLoader-b210acbe.js";const X=t=>{const[g,o]=u.useState(5),[f,i]=u.useState(1),[C,j]=u.useState(0),[D,v]=u.useState(0),[w,L]=u.useState(0),[b,E]=u.useState(),[K,_]=u.useState(!1),[h,N]=u.useState(),[T,e]=u.useState(!1),$=()=>{e(!0),console.log("entered in new method..."),console.log(`data before hitting api (${(t==null?void 0:t.api)+"?page="+f}) => `,{...t==null?void 0:t.requestBody,perPage:g}),B.post((t==null?void 0:t.api)+"?page="+f,{...t==null?void 0:t.requestBody,perPage:g},q()).then(a=>{var n,l,c,x,P,y,m,F,S;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0?(console.log("search success => ",a),N((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.data),L((P=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:P.total),j((m=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:m.current_page),v((S=(F=a==null?void 0:a.data)==null?void 0:F.data)==null?void 0:S.last_page)):console.log("error while search => ",a),e(!1)}).catch(a=>(console.log("error while search => ",a),e(!1)))},A=()=>{e(!0),console.log("entered in old method..."),console.log(`data before hitting api (${t==null?void 0:t.api}) => `,{...t==null?void 0:t.requestBody,perPage:g,page:f}),B.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:g,page:f},q()).then(a=>{var n,l,c,x,P,y,m,F,S;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0?(console.log("search success => ",a),N((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.data),L((P=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:P.total),j((m=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:m.current_page),v((S=(F=a==null?void 0:a.data)==null?void 0:F.data)==null?void 0:S.last_page)):console.log("error while search => ",a),e(!1)}).catch(a=>(console.log("error while search => ",a),e(!1)))};u.useEffect(()=>{(t==null?void 0:t.requestBody)!=null&&(t==null?void 0:t.type)=="new"&&(console.log("calling new fun"),i(1),o(5),$()),(t==null?void 0:t.requestBody)!=null&&(t==null?void 0:t.type)=="old"&&(console.log("calling old fun"),i(1),o(5),A()),console.log("change data",t==null?void 0:t.changeData,"and requestBody => ",t==null?void 0:t.requestBody)},[t==null?void 0:t.changeData]);const O=()=>{i(C+1)},R=()=>{i(C-1)},V=a=>{o(a)};u.useEffect(()=>{e(!0),(t==null?void 0:t.type)=="new"&&$(),(t==null?void 0:t.type)=="old"&&A()},[f,g]);const k=()=>{i(1)},z=()=>{i(D)},G=()=>{e(!0),_(!1),(t==null?void 0:t.type)=="new"&&B.post((t==null?void 0:t.api)+"?page=1",{...t==null?void 0:t.requestBody,perPage:w},q()).then(a=>{var n,l,c;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&(E((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.data),H()),e(!1)}).catch(a=>{e(!1)}),(t==null?void 0:t.type)=="old"&&B.post(t==null?void 0:t.api,{...t==null?void 0:t.requestBody,perPage:w},q()).then(a=>{var n,l,c;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&(E((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.data),H()),e(!1)}).catch(a=>{e(!1)})},H=()=>{_(!0)};return d.jsxs(d.Fragment,{children:[K&&d.jsx(I,{data:b}),T&&d.jsx(M,{}),h!=null&&(h==null?void 0:h.length)!=0?d.jsx(J,{currentPage:C,lastPage:D,goFirst:k,goLast:z,count1:w,columns:t==null?void 0:t.columns,dataList:h,exportStatus:!0,perPage:g,perPageC:V,totalCount:w,nextPage:O,prevPage:R,exportDataF:G,exportData:b}):d.jsx(d.Fragment,{children:!T&&d.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})})]})};export{X as L};
