import{r as c,b as P,ad as B,u as k,d as q,e as N,f as I,a5 as j,a as v,l as E,j as e,B as $,C as M,S as D,a4 as V,an as L}from"./index-409cf397.js";import{T as Y}from"./TopTabsCluster-8232b253.js";import{b as s}from"./PowerupFunctions-286420ed.js";function W(Q){var u,y;const[o,w]=c.useState(),[_,x]=c.useState(!1),[S,U]=c.useState(!1),[r,C]=c.useState(),[G,A]=c.useState(!0),[J,a]=c.useState(!1);P("Cluster Holding Payment History");const{id:d}=B(),m=k(),{api_getClusterPropertyPaymentHistory:h}=V(),{api_getClusterBasicDeatilsById:H}=L(),n={api:{api_getTranscationHistory:{method:"get",url:h}},transactionInfo:{title:""},tableColumns:[{Header:"#",Cell:({row:t})=>e.jsx("div",{className:"pr-2",children:t.index+1})},{Header:"Application No.",accessor:"saf_no"},{Header:"Transaction No.",accessor:"tran_no"},{Header:"Payment Mode",accessor:"payment_mode"},{Header:"Transaction Date",accessor:"created_at"},{Header:"Amount",accessor:"amount"}],filters:{applicationNo:!0}};console.log("passed api at inbox list hello bellow...",n),console.log("passed api at inbox col...",n==null?void 0:n.tableColumns),[...n==null?void 0:n.tableColumns];const T=q({fromDate:N().required("Select from date"),toDate:N().required("Select to date")}),p=I({initialValues:{fromDate:j(new Date).format("yy-MM-DD"),toDate:j(new Date).format("yy-MM-DD"),consumerCategory:"",consumerType:"",buildingType:"",paymentMode:"",wardNo:"",tcId:""},onSubmit:t=>{A(!1),f(p.values.fromDate,p.values.toDate)},validationSchema:T});c.useEffect(()=>{console.log("fethcing in useEffect"),f()},[]);const f=()=>{a(!1),x(!0);let t={clusterId:d};console.log("before fetch factory data"),v.post(h,t,E()).then(function(l){var i;console.log("all transcation list at holding specific----- ",l==null?void 0:l.data),w((i=l==null?void 0:l.data)==null?void 0:i.data),a(!0),x(!1)}).catch(function(l){console.log("error at transactions fetch ",l),a(!0),x(!1)})},z=()=>{x(!0);const l={headers:{Authorization:`Bearer ${window.localStorage.getItem("token")}`,Accept:"application/json"}};v.post(`${H}`,{clusterId:d},l).then(function(i){var b,g;console.log("view prop prop full details of cluster...",(b=i==null?void 0:i.data)==null?void 0:b.data),C((g=i==null?void 0:i.data)==null?void 0:g.data),x(!1)}).catch(function(i){console.log("==2 details by id error...",i),x(!1)})};return c.useEffect(()=>{z()},[]),_?e.jsx(e.Fragment,{children:e.jsx($,{})}):S?e.jsx(M,{children:e.jsx(D,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto",children:[(n==null?void 0:n.transactionInfo.title)!="",e.jsx(Y,{title:"Cluster Payment History",type:"holding",id:d,safNo:"",active:"payment"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex space-x-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s(r==null?void 0:r.cluster_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Cluster Name"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s(r==null?void 0:r.cluster_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Cluster Type"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:s(r==null?void 0:r.authorized_person_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Authorized Person Name"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:s(r==null?void 0:r.mobile_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Mobile No."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s(r==null?void 0:r.address)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Address"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:s(new Date(r==null?void 0:r.created_at).toLocaleDateString("en-GB"))}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Created At"})]})]})})}),(o==null?void 0:o.length)==0&&e.jsx("div",{className:"text-center mt-10",children:e.jsx("span",{className:"text-red-600 font-bold text-lg px-4 py-2 border border-red-500  shadow-xl ",children:" No Payments Found Yet"})}),(o==null?void 0:o.length)!=0&&e.jsx("div",{className:"mt-10 bg-white shadow-xl  rounded-lg",children:e.jsxs("table",{className:"min-w-full leading-normal mt-2",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-white text-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Tansaction No"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Date"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"From Qtr/Year"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Upto Qtr/Year"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Amount"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"Action"})]})}),e.jsxs("tbody",{className:"text-sm",children:[(u=o==null?void 0:o.Holding)==null?void 0:u.map((t,l)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:l+1}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.tran_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.tran_date)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[s(t==null?void 0:t.from_qtr),"/",s(t==null?void 0:t.from_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[s(t==null?void 0:t.to_qtr),"/",s(t==null?void 0:t.to_fyear)]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.amount)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>m(`/paymentReceipt/${t==null?void 0:t.tran_no}/holding`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]})),(y=o==null?void 0:o.Saf)==null?void 0:y.map((t,l)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:l+1}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[s(t==null?void 0:t.tran_no),e.jsx("span",{className:"bg-indigo-500 text-white text-xs px-2 rounded-sm ml-2",children:"SAF"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.tran_date)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[s(t==null?void 0:t.from_qtr),"/",s(t==null?void 0:t.from_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[s(t==null?void 0:t.to_qtr),"/",s(t==null?void 0:t.to_fyear)]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s(t==null?void 0:t.amount)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>m(`/paymentReceipt/${t==null?void 0:t.tran_no}/saf`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]}))]})]})}),e.jsx("div",{className:"w-full h-40"})]})})}export{W as default};
