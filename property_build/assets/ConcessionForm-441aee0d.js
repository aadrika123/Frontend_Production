import{t as xe,ad as ue,r as o,u as ge,a as A,l as k,d as fe,e as F,W as R,f as be,j as e,q as he,k as ye,Q as je}from"./index-f34c4420.js";import{b as Ne}from"./index.esm-15f3038b.js";import{m as T}from"./moment-499fcdbf.js";import{A as we}from"./ApplicationSubmitScreen-31582c2f.js";import{B as ve}from"./BottomErrorCard-8b64c81d.js";import"./index.esm-5394c921.js";/* empty css             */const Se=()=>{const f=xe;return{getConcessionOwners:`${f}/api/property/concession/owner-details`,getDocMaster:`${f}/api/property/concession/get-doc-type`,postConcessionForm:`${f}/api/property/concession/apply-concession`}};function Oe(f){var E;const{getConcessionOwners:P,postConcessionForm:Y,getDocMaster:H}=Se(),{id:i}=ue();console.log("id in concession => ",i);const[Q,W]=o.useState(),[J,K]=o.useState(),[X,Z]=o.useState(),[L,ee]=o.useState(),[n,se]=o.useState();o.useState("");const[c,b]=o.useState(!1),[p,h]=o.useState(!1),[y,j]=o.useState(!1),[m,N]=o.useState(!1),[Ce,I]=o.useState(!1);o.useState(),o.useState(),o.useState(),o.useState(),o.useState(),o.useState(),o.useState(),o.useState();const[te,ae]=o.useState();o.useState("");const[oe,le]=o.useState(""),[ne,O]=o.useState();o.useState(0);const[_,w]=o.useState(),[re,de]=o.useState(!1),[U,r]=o.useState(!1),[ie,ce]=o.useState(null),pe=()=>{z(`/holdingPropertyDetails/${i}`)},z=ge();o.useEffect(()=>{O(!1),r(!0),A.post(P,{propId:i},k()).then(s=>{var a,d;console.log("getting owner data => ",s),r(!1),se(s.data),ae((d=(a=s==null?void 0:s.data)==null?void 0:a.data)==null?void 0:d.ulbId)}).catch(s=>{console.log("getting owner data err => ",s),r(!1)})},[i]),fe({gender:F().when([],{is:()=>c===!0,then:F().typeError("Select gender").required("Select gender")}),dob:F().when([],{is:()=>p===!0,then:F().typeError("type error").test("dob","not 60 years old",s=>T().diff(T(s),"years")>=60)}),speciallyAbledPercentage:R().when([],{is:()=>m===!0,then:R().typeError("type error").min(40,"must be between 40% to 100%").max(100,"must be between 40% to 100%").required("Enter specially-abled percentage")})});const t=be({initialValues:{gender:"",dob:"",speciallyAbled:!0,speciallyAbledPercentage:"",armedForce:!0,genderDoc:"",dobDoc:"",speciallyAbledDoc:"",armedForceDoc:"",documentCode:""},enableReinitialize:!0,onSubmit:s=>{console.log("--1-- values => ",s),me(s)}}),me=s=>{var d,x;let a=new FormData;a.append("propId",i),a.append("ulbId",te),a.append("applicantName",(d=n==null?void 0:n.data)==null?void 0:d.ownerName),a.append("ownerId",(x=n==null?void 0:n.data)==null?void 0:x.ownerId),c==!0&&(a.append("gender",s.gender),a.append("genderDoc",Q),a.append("genderCode",s.documentCode),a.append("appliedFor","Gender")),p==!0&&(a.append("dob",s.dob),a.append("dobDoc",J),a.append("dobCode",s.documentCode),a.append("appliedFor","Senior Citizen")),m==!0&&(a.append("speciallyAbled",!0),a.append("speciallyAbledPercentage",s.speciallyAbledPercentage),a.append("speciallyAbledDoc",X),a.append("speciallyAbledCode",s.documentCode),a.append("appliedFor","Specially Abled")),y==!0&&(a.append("armedForce",!0),a.append("armedForceDoc",L),a.append("armedForceCode",s.documentCode),a.append("appliedFor","Armed Force")),console.log("--2-- before fetch...",a),r(!0),A.post(Y,a,k()).then(l=>{var u,g;((u=l==null?void 0:l.data)==null?void 0:u.status)==!0?(console.log("successfully posted => ",l,`
 result data =>`,a),je.success("Concession Applied Successfully!!"),le((g=l==null?void 0:l.data)==null?void 0:g.data),O(!0)):D(!0,"Error occured in submitting Concession application. Please try again later."),r(!1)}).catch(l=>{r(!1),D(!0,"Error occured in submitting Concession application. Please try again later.")})},v=s=>{if(s.target.name=="genderDoc"){let a=s.target.files[0];W(s.target.files[0]),console.log("--1-file on change..",a)}else if(s.target.name=="dobDoc"){let a=s.target.files[0];K(s.target.files[0]),console.log("--2-file on change..",a)}else if(s.target.name=="speciallyAbledDoc"){let a=s.target.files[0];Z(s.target.files[0]),console.log("--3-file on change..",a)}else if(s.target.name=="armedForceDoc"){let a=s.target.files[0];ee(s.target.files[0]),console.log("--4-file on change..",a)}};let S="form-control w-full px-3 text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md w-max";const C=s=>{const a=s.target.value,d=s.target.name,x=s.target.checked;console.log("value of selection => ",a),a=="gender"&&(b(!0),h(!1),j(!1),N(!1),t.setFieldValue("documentCode","")),a=="seniorCitizen"&&(b(!1),h(!0),j(!1),N(!1),t.setFieldValue("documentCode","")),a=="armedForce"&&(b(!1),h(!1),j(!0),N(!1),t.setFieldValue("documentCode","")),a=="speciallyAbled"&&(b(!1),h(!1),j(!1),N(!0),t.setFieldValue("documentCode","")),d!="declaration"&&(r(!0),A.post(H,{doc:s.target.value},k()).then(l=>{var u,g,B,$,V,M,q,G;console.log("response doc master id => ",l),s.target.value=="gender"&&w((g=(u=l==null?void 0:l.data)==null?void 0:u.data)==null?void 0:g.masters),s.target.value=="seniorCitizen"&&w(($=(B=l==null?void 0:l.data)==null?void 0:B.data)==null?void 0:$.masters),s.target.value=="armedForce"&&w((M=(V=l==null?void 0:l.data)==null?void 0:V.data)==null?void 0:M.masters),s.target.value=="speciallyAbled"&&w((G=(q=l==null?void 0:l.data)==null?void 0:q.data)==null?void 0:G.masters),r(!1)}).catch(l=>r(!1))),d=="declaration"&&x==!0&&I(!0),d=="declaration"&&x==!1&&I(!1)},D=(s,a)=>{ce(a),de(s)};return e.jsxs(e.Fragment,{children:[e.jsx(he,{position:"top-right",autoClose:2e3}),U&&e.jsx(ye,{}),re&&e.jsx(ve,{activateBottomErrorCard:D,errorTitle:ie}),e.jsx("div",{className:"2xl:mt-6 mt-3 bg-indigo-500 text-white flex flex-row md:justify-evenly items-center justify-center capitalize text-base poppins mb-4 shadow-md py-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-extrabold text-[30px]",children:e.jsx(Ne,{})}),e.jsx("span",{className:"font-semibold poppins 2xl:text-xl text-lg",children:"Apply For Concession"})]})}),e.jsx("div",{className:"poppins my-2 2xl:font-base text-sm",children:"If properties owners belong to the following categories then he is eligible for additional 5 percent concession on demand from the current financial year to till the financial year of their ownership, if requested by the citizen for concession."}),e.jsxs("div",{className:"bg-white py-4 shadow-sm rounded-md transition-all duration-300 px-6",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full",children:e.jsxs("div",{className:"w-full flex flex-row flex-wrap gap-4",children:[e.jsx("div",{className:"text-sm poppins",children:"Owner's Name :"}),e.jsx("div",{className:"font-semibold poppins",children:(E=n==null?void 0:n.data)==null?void 0:E.ownerName})]})}),n==null&&e.jsx("div",{className:"animate__animated animate__fadeInUp w-full flex justify-center items-center",children:!U&&e.jsx("div",{className:"bg-red-200 text-red-600 rounded-md shadow-lg px-6 py-4 poppins",children:"! No Data Found !"})}),(n==null?void 0:n.status)==0&&e.jsxs("form",{onSubmit:t.handleSubmit,onChange:t.handleChange,className:"animate__animated animate__fadeInUp",children:[e.jsxs("div",{className:"w-full mb-4 mt-2",children:[e.jsx("div",{className:"poppins text-sm font-semibold",children:"Select the below option by which you want to apply ?"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-x-16",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("input",{type:"radio",name:"concOption",id:"concOption1",value:"gender",onChange:C,className:S+" shadow-sm"})," "," ",e.jsx("label",{className:"poppins 2xl:text-base text-xs",htmlFor:"concOption1",children:"Gender"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("input",{type:"radio",name:"concOption",id:"concOption2",value:"seniorCitizen",onChange:C,className:S+" shadow-sm"})," "," ",e.jsx("label",{className:"poppins 2xl:text-base text-xs",htmlFor:"concOption2",children:"Senior Citizen"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("input",{type:"radio",name:"concOption",id:"concOption3",value:"speciallyAbled",onChange:C,className:S+" shadow-sm"})," "," ",e.jsx("label",{className:"poppins 2xl:text-base text-xs",htmlFor:"concOption3",children:"Specially Abled"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("input",{type:"radio",name:"concOption",id:"concOption4",value:"armedForce",onChange:C,className:S+" shadow-sm"})," "," ",e.jsx("label",{className:"poppins 2xl:text-base text-xs",htmlFor:"concOption4",children:"Armed Force"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[(c||p||y||m)&&e.jsx("div",{className:`col-span-3 grid grid-cols-1 md:grid-cols-3  animate__animated animate__fadeIn animate__faster\r
px-6 py-2 mt-2 shadow-sm font-base poppins bg-zinc-50 rounded-sm mb-2 gap-x-6`,children:e.jsxs("div",{className:"form-group  col-span-3 md:col-span-3",children:[e.jsx("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins  mr-2",children:"Select document to upload :"}),e.jsxs("select",{name:"documentCode",onChange:t.handleChange,value:t.values.documentCode,className:"form-control poppins px-3 py-1.5 2xl:text-sm text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md",children:[e.jsx("option",{value:"",selected:!0,children:"==Select=="}),_==null?void 0:_.map(s=>e.jsx(e.Fragment,{children:e.jsx("option",{value:s==null?void 0:s.documentCode,className:"poppins",children:s==null?void 0:s.docVal})}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.documentCode&&t.errors.documentCode?t.errors.documentCode:null})]})}),c&&e.jsxs("div",{className:`col-span-3 grid grid-cols-1 md:grid-cols-3  animate__animated animate__fadeIn animate__faster\r
px-6 py-2 mt-2 shadow-sm font-base poppins bg-zinc-50 rounded-sm mb-2 gap-x-6`,children:[e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1 ",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Gender"]}),e.jsxs("select",{onChange:t.handleChange,...t.getFieldProps("gender"),value:t.values.gender,className:"form-control block poppins w-full px-3 py-1.5 2xl:text-sm text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md",children:[e.jsx("option",{value:"",selected:!0,children:"--Select--"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Transgender",children:"Transgender"})]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.gender&&t.errors.gender?t.errors.gender:null})]}),e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Upload gender proof"]}),e.jsx("input",{...t.getFieldProps("genderDoc"),type:"file",accept:".jpg,.jpeg,.pdf",onChange:v,className:"form-control block w-full  px-3 py-1.5 md:py-1 text-base md:text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 cursor-pointer shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.genderDoc&&t.errors.genderDoc?t.errors.genderDoc:null})]})]}),p&&e.jsxs("div",{className:`col-span-3 grid grid-cols-1 md:grid-cols-3  animate__animated animate__fadeIn animate__faster\r
px-6 py-2 mt-2 shadow-sm font-base poppins bg-zinc-50 rounded-sm mb-2 gap-x-6`,children:[e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1 ",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"DOB"]}),e.jsx("input",{...t.getFieldProps("dob"),type:"date",onChange:t.handleChange,className:"form-control block w-full  px-3 py-1.5 md:py-1 2xl:text-base text-xs poppins md:text-md font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.dob&&t.errors.dob?t.errors.dob:null})]}),e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Upload DOB proof"]}),e.jsx("input",{...t.getFieldProps("dobDoc"),type:"file",accept:".jpg,.jpeg,.pdf",onChange:v,className:"form-control block w-full  px-3 py-1.5 md:py-1 poppins 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 cursor-pointer shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.dobDoc&&t.errors.dobDoc?t.errors.dobDoc:null})]})]}),m&&e.jsxs("div",{className:`col-span-3 grid grid-cols-1 md:grid-cols-3  animate__animated animate__fadeIn animate__faster\r
px-6 py-2 mt-2 shadow-sm font-base poppins bg-zinc-50 rounded-sm mb-2 gap-x-6`,children:[e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1 ",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Specially-Abled"]}),e.jsx("div",{className:"font-semibold poppins",children:"Yes"})]}),e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1 ",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Specially-Abled Percentage (%)"]}),e.jsx("input",{onChange:t.handleChange,type:"number",...t.getFieldProps("speciallyAbledPercentage"),className:"form-control block w-full px-3 py-1.5 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none cursor-pointer shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.speciallyAbledPercentage&&t.errors.speciallyAbledPercentage?t.errors.speciallyAbledPercentage:null})]}),e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Upload specially-abled proof"]}),e.jsx("input",{...t.getFieldProps("speciallyAbledDoc"),type:"file",accept:".jpg,.jpeg,.pdf",onChange:v,className:"form-control block w-full  px-3 py-1.5 md:py-1 poppins 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 cursor-pointer shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.speciallyAbledDoc&&t.errors.speciallyAbledDoc?t.errors.speciallyAbledDoc:null})]})]}),y&&e.jsxs("div",{className:`col-span-3 grid grid-cols-1 md:grid-cols-3  animate__animated animate__fadeIn animate__faster\r
px-6 py-2 mt-2 shadow-sm font-base poppins bg-zinc-50 rounded-sm mb-2 gap-x-6`,children:[e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1 ",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Armed-Force"]}),e.jsx("div",{className:"font-semibold poppins",children:"Yes"})]}),e.jsxs("div",{className:"form-group  col-span-3 md:col-span-1",children:[e.jsxs("label",{className:"form-label inline-block text-gray-600 2xl:text-sm text-xs font-semibold poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Upload armed force proof"]}),e.jsx("input",{...t.getFieldProps("armedForceDoc"),type:"file",accept:".jpg,.jpeg,.pdf",onChange:v,className:"form-control block w-full  px-3 py-1.5 md:py-1 poppins 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 cursor-pointer shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.armedForceDoc&&t.errors.armedForceDoc?t.errors.armedForceDoc:null})]})]}),e.jsxs("div",{className:"col-span-3 w-full flex flex-row flex-wrap justify-between",children:[e.jsx("div",{className:"",children:e.jsx("button",{onClick:()=>z(`/holdingPropertyDetails/${i}`),type:"button",className:" px-3 py-1.5 2xl:px-6 2xl:py-2.5 bg-blue-600 text-white font-medium text-xs  poppins rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Back"})}),e.jsx("div",{className:"",children:(c||p||m||y)&&e.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 px-3 py-1.5 2xl:px-6 2xl:py-2.5 text-white font-medium text-xs  poppins  rounded shadow-md hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 transition duration-150 ease-in-out",children:"Submit"})})]})]})]}),(n==null?void 0:n.status)==1&&e.jsx("div",{className:"animate__animated animate__fadeInUp w-full flex justify-center mt-2 items-center",children:e.jsx("div",{className:"bg-indigo-500 text-white rounded-md shadow-lg px-4 py-2",children:"Your form is already submitted and it is in workflow."})})]}),e.jsx(we,{heading:"Apply For Concession",appNo:oe,openSubmit:ne,navigation:pe}),e.jsx("div",{className:"h-[10rem] visible 2xl:hidden"})]})}export{Oe as default};
