import{r as c,u as is,bs as cs,f as ds,j as s,O as xs,bp as l,A as Q,K as U,b9 as rs}from"./index-425a98a3.js";import{P as os}from"./PaymentCard-88309ead.js";import"./RazorpayPaymentScreen-ddbde1c4.js";function ys(ns){var N,v,y,j,g,p,b,w,_,P,S,A,C,I,z,B,T;const[V,o]=c.useState(!1);c.useState();const[e,W]=c.useState(),[ms,F]=c.useState();c.useState(!1),c.useState(null);const[hs,G]=c.useState(null),[K,fs]=c.useState(null),[f,Z]=c.useState(null),[J,X]=c.useState(null),m=is(),{id:d,moduleType:a}=cs(),{zeroDemandPayment:D,api_getHoldingDemandById:ss,api_getsafDemandById:es,api_getClusterSafDemandById:ts,api_getClusterHoldingDemandById:as}=rs();ds("Payment Screen");const u=(h=null,i=null)=>{o(!0);let x,r;a=="holding"&&(x=ss,r={propId:d,fYear:h,qtr:i}),a=="saf"&&(x=es,r={id:d}),a=="cluster-saf"&&(x=ts,r={clusterId:d}),a=="cluster-holding"&&(x=as,r={clusterId:d}),Q.post(x,r,U()).then(function(t){var n,H,L,R,$,Y,E,M,O,k,q;console.log("payment details data...",t==null?void 0:t.data),W((n=t==null?void 0:t.data)==null?void 0:n.data),F(t==null?void 0:t.data),o(!1),((L=(H=t==null?void 0:t.data)==null?void 0:H.data)==null?void 0:L.paymentStatus)===1&&a=="saf"&&m(`/viewDemand/${d}`),X((Y=($=(R=t==null?void 0:t.data)==null?void 0:R.data)==null?void 0:$.amounts)==null?void 0:Y.isPayable),((O=(M=(E=t==null?void 0:t.data)==null?void 0:E.data)==null?void 0:M.amounts)==null?void 0:O.isPayable)==!1&&ls(),((q=(k=t==null?void 0:t.data)==null?void 0:k.data)==null?void 0:q.paymentStatus)===1&&a=="holding"&&m(`/viewDemandHoldingProperty/${d}`)}).catch(function(t){console.log("payment details error...",t),o(!1)})},ls=()=>{o(!0),seterroState(!1);let h={id:d,paymentMode:"Online"};Q.post(D,h,U()).then(i=>{var x,r,t,n;console.log("response zero payment => ",i),(x=i==null?void 0:i.data)!=null&&x.status?(console.log("response zero payment => ",(r=i==null?void 0:i.data)==null?void 0:r.data),Z((n=(t=i==null?void 0:i.data)==null?void 0:t.data)==null?void 0:n.TransactionNo)):(console.log("false status response zero payment => ",i),seterroState(!0))}).catch(i=>{console.log("error zero payment => ",i),seterroState(!0)}).finally(()=>o(!1))};return c.useEffect(()=>{u()},[]),s.jsxs(s.Fragment,{children:[V&&s.jsx(xs,{}),s.jsxs("div",{className:"sm:p-10 p-2",children:[s.jsxs("div",{className:"w-full bg-white shadow-xl mb-6",children:[a!="cluster-saf"&&a!="cluster-holding"&&s.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[a!="saf"&&s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((N=e==null?void 0:e.basicDetails)==null?void 0:N.holding_no)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Holding No."})]}),a=="saf"&&s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((v=e==null?void 0:e.basicDetails)==null?void 0:v.saf_no)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Application No.(Saf No)"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((y=e==null?void 0:e.basicDetails)==null?void 0:y.old_ward_no)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-lg",children:l((j=e==null?void 0:e.basicDetails)==null?void 0:j.old_ward_no)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"New Ward No"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-md",children:l((g=e==null?void 0:e.basicDetails)==null?void 0:g.ownership_type)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((p=e==null?void 0:e.basicDetails)==null?void 0:p.property_type)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Property Type"})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((b=e==null?void 0:e.basicDetails)==null?void 0:b.zone_mstr_id)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Zone"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((w=e==null?void 0:e.basicDetails)==null?void 0:w.is_mobile_tower)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Mobile Tower(s) ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-md",children:l((_=e==null?void 0:e.basicDetails)==null?void 0:_.is_hoarding_board)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Property has Hoarding Board(s) ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-md",children:l((P=e==null?void 0:e.basicDetails)==null?void 0:P.is_petrol_pump)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Is property a Petrol Pump ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((S=e==null?void 0:e.basicDetails)==null?void 0:S.is_water_harvesting)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Rainwater harvesting provision ?"})]})]})]}),(a=="cluster-saf"||a=="cluster-holding")&&s.jsx("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((A=e==null?void 0:e.basicDetails)==null?void 0:A.cluster_name)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Cluster Name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((C=e==null?void 0:e.basicDetails)==null?void 0:C.cluster_type)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Cluster Type"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-sm",children:l((I=e==null?void 0:e.basicDetails)==null?void 0:I.authorized_person_name)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Authorized Person Name"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-sm",children:l((z=e==null?void 0:e.basicDetails)==null?void 0:z.mobile_no)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Mobile No."})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l((B=e==null?void 0:e.basicDetails)==null?void 0:B.address)}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Address"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:l(new Date((T=e==null?void 0:e.basicDetails)==null?void 0:T.created_at).toLocaleDateString("en-GB"))}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Created At"})]})]})})]}),s.jsx("div",{children:J==!1?s.jsx("div",{className:"w-full h-full bg-white p-20",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-center font-semibold text-3xl",children:"Your application is successfully submitted !"}),s.jsxs("div",{className:"text-center mt-6",children:[s.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/paymentReceipt/${a=="cluster-saf"||a=="cluster-holding",encodeURIComponent(f)}/${a=="cluster-saf"||a=="cluster-holding"?a=="cluster-saf"?"cluster-saf":"cluster-holding":a=="saf"?"saf":"holding"}`),children:"View Receipt"}),a!="direct"&&s.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/propApplicationDetails/${d}`),children:"View Application"})]})]})}):s.jsx(os,{selectedPaymentQtr:K,selectedPaymentYear:G,fetchDemandDetail:u,basicDetails:e==null?void 0:e.basicDetails,safPaymentDetailsData:e==null?void 0:e.amounts,paymentDetails:a=="cluster-saf"?e==null?void 0:e.demand:e==null?void 0:e.duesList})})]}),s.jsx("div",{className:"w-full h-40 md:none"})]})}export{ys as default};
