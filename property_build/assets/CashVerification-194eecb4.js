import{b as $,R as z,r as o,a as _,l as P,j as e,k as U,q as Z,M as Q,aM as G,n,an as Y,Q as J,a5 as R,d as K,e as F,f as X,L as ee,aI as T}from"./index-409cf397.js";import{P as ae}from"./reactjs-popup.esm-afae2ef9.js";import{B as W}from"./BottomErrorCard-cbb9b6ff.js";import{n as h}from"./PowerupFunctions-286420ed.js";const se={overlay:{background:"rgba(0, 0, 0, 0.5)",overflowY:"scroll"},content:{top:"60%",left:"55%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"transparent",border:"none",height:"maxHeight"}};function re(l){var N,g,f,w,v,C,S,t;$("Cash Verification");const{api_verifiedTcCollection:k,api_notVerifiedTcCollection:M,api_verifyTcCollection:p}=Y(),[E,c]=z.useState(!1),[r,V]=o.useState();o.useState(!1);const[A,b]=o.useState(!1),[D,L]=o.useState(!1),[j,B]=o.useState(null),[y,H]=o.useState([]);(N=l==null?void 0:l.data)==null||N.id,(g=l==null?void 0:l.data)==null||g.date,console.log("cash verification data => ",l==null?void 0:l.data),o.useEffect(()=>{var d,i;if(!l||!l.data)return;const a={date:(d=l==null?void 0:l.data)==null?void 0:d.date,userId:(i=l==null?void 0:l.data)==null?void 0:i.id};let s;(l==null?void 0:l.reportType)=="1"&&(s=M),(l==null?void 0:l.reportType)=="2"&&(s=k),_.post(s,a,P()).then(x=>{var I;console.log("response of te data in modal",x),V((I=x==null?void 0:x.data)==null?void 0:I.data)}).catch(x=>{console.log("Error while tc list data in modal",x),u(!0,"Some error occured. Please try again later.")})},[l==null?void 0:l.data]),console.log("getting data in cash verification modal => ",l==null?void 0:l.data),o.useEffect(()=>{l.openAddPopUP>0&&c(!0)},[l==null?void 0:l.openAddPopUP]);function O(){}function m(){c(!1),H([])}const q=()=>{const a={property:r.property,water:r.water,trade:r.trade};_.post(p,a,P()).then(s=>{console.log("Data After Verification",s),J.success("Verified Successfully !!!"),m()}).catch(s=>{console.log("Exception While Verifying Data",s),u(!0,"Some error occured. Please try again later.")}),console.log("Verify Data",a)},u=(a,s)=>{B(s),L(a)};return e.jsxs(e.Fragment,{children:[A&&e.jsx(U,{}),D&&e.jsx(W,{activateBottomErrorCard:u,errorTitle:j}),e.jsx(Z,{autoClose:2e3}),e.jsx(Q,{isOpen:E,onAfterOpen:O,onRequestClose:m,style:se,contentLabel:"Example Modal",children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("div",{className:" bg-white rounded-lg shadow-xl border-2 border-gray-50 p-2",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"float-right",children:e.jsxs("div",{onClick:m,className:"hover:bg-gray-100 rounded-full w-5 cursor-pointer mr-3",children:["  ",e.jsx(G,{size:20})]})}),e.jsx("div",{className:"float-left",children:e.jsx("h1",{className:"mb-3 text-2xl ml-5 font-semibold",children:"TC Collection Details"})})]}),e.jsx("p",{className:"border-b mt-10 mb-6 mx-5 border-gray-100"}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"grid grid-cols-2 bg-yellow-300 rounded shadow p-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("p",{children:" Collector Name"}),e.jsx("p",{children:" Transaction Date"}),e.jsx("p",{children:" Total Amount"}),e.jsx("p",{children:" Number of Transaction"})]}),e.jsxs("div",{className:"col-span-1 font-semibold",children:[e.jsxs("p",{className:"uppercase",children:[": ",n(r==null?void 0:r.collectorName)]}),e.jsxs("p",{children:[": ",n(r==null?void 0:r.date)]}),e.jsxs("p",{children:[": ",h(r==null?void 0:r.totalAmount)]}),e.jsxs("p",{children:[": ",h(r==null?void 0:r.numberOfTransaction)]})]})]})}),e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"flex flex-wrap-reverse m-0",children:[e.jsxs("div",{className:"bg-emerald-500 shadow p-6 m-2 rounded",children:[e.jsxs("p",{className:"font-semibold text-3xl",children:[e.jsx("span",{className:"text-lg mx-1",children:"₹"}),h(r==null?void 0:r.Cash),e.jsx("span",{className:"text-lg",children:".00"})]}),e.jsx("p",{className:"text-lg font-semibold",children:"Cash"})]}),e.jsxs("div",{className:"bg-indigo-400 shadow p-6 m-2 rounded",children:[e.jsxs("p",{className:"font-semibold text-3xl",children:[e.jsx("span",{className:"text-lg mx-1",children:"₹"}),h(r==null?void 0:r.Cheque),e.jsx("span",{className:"text-lg",children:".00"})]}),e.jsx("p",{className:"text-lg font-semibold",children:"Cheque"})]}),e.jsxs("div",{className:"bg-cyan-400 shadow p-6 m-2 rounded",children:[e.jsxs("p",{className:"font-semibold text-3xl",children:[" ",e.jsx("span",{className:"text-lg mx-1",children:"₹"}),"0",e.jsx("span",{className:"text-lg",children:".00"})]}),e.jsx("p",{className:"text-lg font-semibold",children:"DD"})]})]})})]}),e.jsx("p",{className:"border-b mt-5 mb-6 mx-5 border-gray-100"}),((f=r==null?void 0:r.property)==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Property Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(w=r==null?void 0:r.property)==null?void 0:w.map((a,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:s+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.bank_name)}),e.jsxs("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:["₹",h(a==null?void 0:a.amount)]}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_date)})]},s))})]})]}),e.jsx("p",{className:"py-2"}),((v=r==null?void 0:r.water)==null?void 0:v.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Water Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(C=r==null?void 0:r.water)==null?void 0:C.map((a,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:s+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.bank_name)}),e.jsxs("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:["₹",h(a==null?void 0:a.amount)]}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_date)})]},s))})]})]}),e.jsx("p",{className:"py-2"}),((S=r==null?void 0:r.trade)==null?void 0:S.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"uppercase",children:"Trade Payment"}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"})]})}),e.jsx("tbody",{children:(t=r==null?void 0:r.trade)==null?void 0:t.map((a,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:s+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.bank_name)}),e.jsxs("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:["₹",h(a==null?void 0:a.amount)]}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n(a==null?void 0:a.tran_date)})]},s))})]})]}),e.jsx("div",{className:"my-5",children:e.jsxs("div",{className:"flex justify-center pt-3 space-x-3",children:[(l==null?void 0:l.reportType)=="1"&&e.jsx(ae,{trigger:e.jsx("button",{className:"w-full px-10 rounded bg-indigo-600 py-2 text-white sm:w-auto",children:" Verify "}),modal:!0,nested:!0,children:a=>e.jsx("div",{className:"h-screen w-screen flex-row justify-center items-center backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col justify-center h-max w-max absolute top-[40%] right-[40%] bg-indigo-50 px-4 py-2 rounde-md shadow-lg animate__animated animate__fadeInDown animate__faster",children:[e.jsx("button",{className:"close text-end text-lg",onClick:a,children:"×"}),e.jsx("div",{className:"text-md",children:"Are you sure ?"}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white shadow-md text-xs px-4 py-1 m-4 rounded-md",onClick:()=>{a(),q()},children:"Yes"}),e.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-4 shadow-md text-xs py-1 m-4 rounded-md",onClick:a,children:"No"})]})]})})}),e.jsx("button",{onClick:m,className:"w-full px-10 rounded bg-red-600 py-2 text-white sm:w-auto",children:" Close "})]})})]})})})]})}const te=l=>{const[k,M]=o.useState(0),[p,E]=o.useState(),[c,r]=o.useState(),[V,A]=o.useState(),[b,D]=o.useState(1),[L,j]=o.useState(),[B,y]=o.useState(!1),[H,O]=o.useState(!1),[m,q]=o.useState(null);let u=new Date().toLocaleDateString("in-IN"),N=R(u).format("YYYY-DD-MM");const{api_listofEmployees:g,api_listUnverifiedCashVerification:f,api_listVerifiedCashVerification:w}=Y();o.useEffect(()=>{b==1&&j(f),b==2&&j(w)},[b]);const v=(s,d,i)=>{A({id:s,date:d}),M(x=>x+1)};o.useEffect(()=>{_.post(g,{},P()).then(s=>{E(s.data.data)}).catch(s=>{console.log("Error while getting employee list",s)})},[]);const C=[{Header:"Sl.",Cell:({row:s})=>e.jsxs("div",{className:"px-2 font-semibold",children:[s.index+1,"."]})},{Header:"EmployeeName",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:["  ",n((d=s.row.original)==null?void 0:d.user_name)]})}},{Header:"Property",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:[" ₹ ",T((d=s.row.original)==null?void 0:d.property)]})}},{Header:"Water",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:[" ₹ ",T((d=s.row.original)==null?void 0:d.water)]})}},{Header:"Trade",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:[" ₹ ",T((d=s.row.original)==null?void 0:d.trade)]})}},{Header:"Total Amount",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:[" ₹ ",T((d=s.row.original)==null?void 0:d.total)]})}},{Header:"Paid Date",Cell:({cell:s})=>{var d;return e.jsxs("span",{children:["  ",n((d=s.row.original)==null?void 0:d.date)]})}},{Header:"Action",Cell:({cell:s})=>e.jsx("button",{onClick:()=>v(s.row.original.id,s.row.original.date,s.row.original.user_name),className:"bg-blue-600 hover:bg-blue-400 py-1 px-3 text-white rounded-sm",children:"View"})}],S=s=>{y(!0);const d={date:s.collectionDate,id:s.empName};_.post(L,d,P()).then(i=>{y(!1),console.log("response list cash",i),r(i.data.data)}).catch(i=>{y(!1),a(!0,"Error occured while fetching cash verification list. Please try again later."),console.log("Error while list cash verification",i)})};K({collectionDate:F().required("Select Date"),empName:F().required("Select Employee")});const t=X({initialValues:{empName:"",collectionDate:R(new Date).format("yy-MM-DD"),reportType:"1"},enableReinitialize:!0,onSubmit:s=>{console.log("report type ",s.reportType),S(s)}}),a=(s,d)=>{q(d),O(s)};return e.jsxs(e.Fragment,{children:[B&&e.jsx(U,{}),H&&e.jsx(W,{activateBottomErrorCard:a,errorTitle:m}),e.jsx(re,{openAddPopUP:k,data:V,reportType:t.values.reportType}),e.jsxs("div",{className:"m-2 bg-white",children:[e.jsx("div",{className:"border border-gray-100 bg-indigo-100 shadow-md rounded",children:e.jsx("form",{onSubmit:t.handleSubmit,onChange:t.handleChange,children:e.jsxs("div",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"mb-3 text-2xl font-semibold",children:"Cash Verification"})}),e.jsxs("div",{className:"grid grid-cols-12 space-x-10",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{onChange:t.handleChange,name:"collectionDate",className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",type:"date",defaultValue:N}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",t.touched.collectionDate&&t.errors.collectionDate?t.errors.collectionDate:null]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:t.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"empName",children:[e.jsx("option",{value:"",children:"All"}),p==null?void 0:p.map((s,d)=>e.jsx("option",{value:s.id,children:s.user_name}))]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",t.touched.empName&&t.errors.empName?t.errors.empName:null]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Report Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:s=>D(s.target.value),value:t.values.reportType,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"reportType",children:[e.jsx("option",{value:"1",children:"Not Verified"}),e.jsx("option",{value:"2",children:"Verified"})]})]}),e.jsx("div",{className:"col-span-3 mt-7 w-full",children:e.jsx("button",{type:"submit",class:"w-1/2 md:w-full py-2 px-4 inline-block text-center mb-3 rounded leading-5 text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:"Search"})})]})]})})}),e.jsx("p",{className:" mx-10 py-5"}),e.jsx("div",{className:"my-5 mx-2",children:(c==null?void 0:c.length)==0?e.jsx("p",{className:"text-center font-semibold -mt-8",children:"No Data Found !"}):e.jsxs(e.Fragment,{children:[c?e.jsx(ee,{columns:C,dataList:c}):e.jsx("p",{className:"text-center font-semibold -mt-8",children:"Please Choose Date and User"})," "]})})]})]})};export{te as default};
