import{r as n,O as E,j as t,V as z,W as J,X as K,b2 as Q,a as X,s as $}from"./index-74064a7f.js";import{L as U}from"./ListTable2v2-edfe34d8.js";import{B as Y}from"./BarLoader-43998e78.js";import{G as Z}from"./GlobalFilter-fc64b9c3.js";import{i as p}from"./index.esm-69f8c086.js";function ee(e){console.log("enter in margin table");const[s,v]=n.useState("hidden"),o=n.useMemo(()=>e.columns,[]),i=n.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[d,T]=n.useState(1),[N,g]=n.useState(!0),[P,u]=n.useState(!0),[j,I]=n.useState(0),[C,F]=n.useState(0);n.useEffect(()=>{T(1)},[e==null?void 0:e.totalCount]),n.useEffect(()=>{g(!0),u(!0);let l=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?k(parseInt(l)+1):k(parseInt(l)),y==d&&g(!1),(y==d||d==1)&&u(!1)},[e==null?void 0:e.totalCount,j]);const{getTableProps:h,getTableBodyProps:w,headerGroups:r,page:x,nextPage:q,previousPage:O,canNextPage:A,canPreviousPage:G,prepareRow:S,pageOptions:M,gotoPage:V,pageCount:R,setPageSize:k,state:a,rows:m,setGlobalFilter:b}=E.useTable({columns:o,data:i,initialState:{pageIndex:0}},E.useGlobalFilter,E.useSortBy,E.usePagination),{globalFilter:f,pageIndex:H,pageSize:y}=a,D=()=>{if(parseInt(C)>0)e==null||e.gotoPage(parseInt(C));else return!1},B=()=>{(e==null?void 0:e.lastPage)!=(e==null?void 0:e.currentPage)&&(u(!0),e.nextPage()),(e==null?void 0:e.lastPage)==(e==null?void 0:e.currentPage)&&g(!1)},L=()=>{(e==null?void 0:e.currentPage)!=1&&(g(!0),e.prevPage()),(e==null?void 0:e.currentPage)==1&&u(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex mb-2 pb-2",children:[t.jsx("div",{className:"flex-initial opacity-50",children:t.jsx(Z,{filter:f,setFilter:b})}),t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>v(""),onMouseLeave:()=>v("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:s+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(z,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"opacity-50",children:"Total Result : "}),t.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&t.jsx("div",{children:t.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[t.jsx(p,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),t.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:t.jsxs("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:[t.jsxs("table",{...w,className:"min-w-full leading-normal",children:[t.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:r==null?void 0:r.map(l=>t.jsx("tr",{...l.getHeaderGroupProps(),children:l.headers.map(c=>t.jsxs("th",{...c.getHeaderProps(c.getSortByToggleProps()),className:(c==null?void 0:c.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[c.render("Header"),t.jsx("span",{children:c.isSorted?c.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),t.jsxs("tbody",{...w(),className:"text-sm",children:[m.map((l,c)=>{var _;return S(l),t.jsx("tr",{...l.getRowProps(),className:"bg-white shadow-lg border-[1px] border-gray-200",children:(_=l==null?void 0:l.cells)==null?void 0:_.map(W=>t.jsx("td",{...W.getCellProps(),className:"px-2 py-2 text-sm text-left border-[1px] border-gray-200",children:W.render("Cell")}))})}),t.jsx("tr",{children:t.jsx("td",{})})]})]}),t.jsxs("div",{className:"mt-3 grid grid-cols-12 items-center",children:[t.jsxs("div",{className:"sm:col-span-2 col-span-3 flex w-full ml-1 pr-10",children:[t.jsx("span",{children:t.jsx("input",{className:"h-10 w-[90%] placeholder:text-gray-600 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-1 ",type:"number",onChange:l=>{F(l.target.value)},placeholder:"Go to page..."})}),t.jsxs("abbr",{className:"cursor-pointer flex items-center w-[15%] no-underline",title:"Go",onClick:()=>D(),children:[" ",t.jsx("span",{className:"font-bold bg-green-300 text-xl px-2 pb-1 rounded-full hover:text-white hover:bg-green-500",children:"⇨"})," "]})]}),t.jsxs("div",{className:"col-span-2",children:["  ",t.jsx("select",{className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:j,onChange:l=>{I(Number(l.target.value)),e.perPageC(Number(l.target.value))},children:[5,10,25,50].map(l=>t.jsxs("option",{value:l,children:["show ",l]},l))})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-center sm:col-start-5 col-start-7",children:["   ",t.jsxs("span",{children:["page ","",t.jsxs("strong",{children:[e==null?void 0:e.currentPage," of ",e==null?void 0:e.lastPage]}),""]})]}),t.jsxs("div",{className:"col-span-3 sm:col-span-4 text-right",children:[t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goFirst(),u(!1),g(!0)),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:[t.jsx(J,{})," "]}),t.jsx("button",{className:((e==null?void 0:e.currentPage)==1?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>L(),disabled:(e==null?void 0:e.currentPage)==1&&!0,children:"⬅️"}),t.jsx("button",{className:((e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)?"opacity-50":"opacity-100")+" text-xl hover:bg-sky-300 hover:text-white",onClick:()=>B(),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:"➡️"}),t.jsxs("button",{className:"cursor-pointer hover:bg-sky-300 p-2 hover:text-white",onClick:()=>(e==null||e.goLast(),g(!1),u(!0)),disabled:(e==null?void 0:e.currentPage)==(e==null?void 0:e.lastPage)&&!0,children:["  ",t.jsx(K,{})]})]})]})]})})]})}const ie=e=>{const[s,v]=n.useState(5),[o,i]=n.useState(1),[d,T]=n.useState(0),[N,g]=n.useState(0),[P,u]=n.useState(0),[j,I]=n.useState(),[C,F]=n.useState(!1),[h,w]=n.useState(),[r,x]=n.useState(!1),q=()=>{x(!0),console.log("entered in old method... data before hitting",e==null?void 0:e.requestBody),console.log(`data before hitting api (${e==null?void 0:e.api}) => `,{...e==null?void 0:e.requestBody,perPage:s,page:o}),X.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:s,page:o},$()).then(a=>{var m,b,f,H,y,D,B,L,l,c;((m=a==null?void 0:a.data)==null?void 0:m.status)==!0?(console.log("search success => ",a),e!=null&&e.getData&&(e==null||e.allData((b=a==null?void 0:a.data)==null?void 0:b.data)),w((H=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:H.data),u((D=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:D.total),T((L=(B=a==null?void 0:a.data)==null?void 0:B.data)==null?void 0:L.current_page),g((c=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:c.last_page)):console.log("error while search => ",a),x(!1)}).catch(a=>(console.log("error while search => ",a),x(!1)))};n.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(i(1),v(5),q()),console.log("change data",e==null?void 0:e.changeData,"and requestBody => ",e==null?void 0:e.requestBody)},[e==null?void 0:e.changeData]);const O=()=>{i(d+1)},A=()=>{i(d-1)},G=a=>{v(a)};n.useEffect(()=>{x(!0),q()},[o,s]);const S=()=>{i(1)},M=()=>{i(N)},V=a=>{i(a)},R=()=>{x(!0),F(!1),X.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:P},$()).then(a=>{var m,b,f;((m=a==null?void 0:a.data)==null?void 0:m.status)==!0&&(I((f=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:f.data),k()),x(!1)}).catch(a=>{x(!1)})},k=()=>{F(!0)};return console.log("getting margin status",e==null?void 0:e.margin),t.jsxs(t.Fragment,{children:[C&&t.jsx(Q,{data:j}),r&&t.jsx(Y,{}),h!=null&&(h==null?void 0:h.length)!=0?t.jsx(t.Fragment,{children:e!=null&&e.margin?t.jsx(ee,{currentPage:d,lastPage:N,goFirst:S,goLast:M,count1:P,columns:e==null?void 0:e.columns,dataList:h,exportStatus:!0,perPage:s,perPageC:G,totalCount:P,nextPage:O,prevPage:A,exportDataF:R,exportData:j}):t.jsx(U,{currentPage:d,lastPage:N,goFirst:S,goLast:M,count1:P,columns:e==null?void 0:e.columns,dataList:h,exportStatus:!0,perPage:s,perPageC:G,totalCount:P,nextPage:O,prevPage:A,exportDataF:R,exportData:j,gotoPage:a=>V(a)})}):t.jsx(t.Fragment,{children:!r&&t.jsx("div",{className:"w-full my-4 text-center text-red-500 text-lg font-bold",children:"No Data Found"})})]})};export{ie as default};
