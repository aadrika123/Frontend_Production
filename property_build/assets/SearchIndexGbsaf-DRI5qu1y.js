const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-hebbF7A6.js","assets/index-DqcdoIA4.css"])))=>i.map(i=>d[i]);
import{r as l,_ as U,aI as D,bF as R,l as E,aL as x,b as M,y as O,m as $,o as q,p as G,j as r,bW as T,bX as V,P as z,bY as K,A as N,a_ as y,bq as i,bZ as Q}from"./index-hebbF7A6.js";const X=l.lazy(()=>U(()=>import("./index-hebbF7A6.js").then(p=>p.dy),__vite__mapDeps([0,1])));function te(){const{api_getMasterData:p,api_getAllUlb:Y,api_newWardByOldWard:w,api_zoneByUlb:Z,api_wardByUlb:j}=D(),[n,v]=l.useState(null),[d,_]=l.useState(),[B,J]=l.useState(),{type:ee,filterParam:h,searchValueParam:c}=R(),[b,g]=l.useState(null),[S,k]=l.useState(0),[m,C]=l.useState(!1);E("Search GbSaf Holding");const{api_getWardListByLogin:re,api_filterPropertyDetails:se,api_GetGbsafPropertyList:P}=z();x();const u=M();O();const f=e=>{var o,t;(e==null?void 0:e.filterBy)=="khataNo"?g({filteredBy:e==null?void 0:e.filterBy,khataNo:e==null?void 0:e.khataNo,plotNo:e==null?void 0:e.plotNo,wardId:(o=s==null?void 0:s.values)==null?void 0:o.newWardNo,maujaName:e==null?void 0:e.maujaName,isLegacy:!1}):g({filteredBy:e==null?void 0:e.filterBy,parameter:e==null?void 0:e.parameter,wardId:(t=s==null?void 0:s.values)==null?void 0:t.newWardNo,isLegacy:!1}),k(a=>a+1),K(`/property/gbsafsearch/fresh/${encodeURIComponent((e==null?void 0:e.parameter)==null||(e==null?void 0:e.parameter)==""?"direct":e==null?void 0:e.filterBy)}/${encodeURIComponent((e==null?void 0:e.parameter)==null||(e==null?void 0:e.parameter)==""?"direct":e==null?void 0:e.parameter)}`)},W=()=>{N.post(j,{},x()).then(function(e){var o;v((o=e==null?void 0:e.data)==null?void 0:o.data)}).catch(function(e){})},A=e=>{let o={oldWardMstrId:e};N.post(w,o,x()).then(function(t){_(t.data.data)}).catch(function(t){})},F=e=>{let o=e.target.name,t=e.target.value;o=="wardNo"&&A(t)};l.useEffect(()=>{W()},[]);const H=$({filterBy:q().required("This is a required field !")}),s=G({initialValues:{filterBy:"",wardNo:"",newWardNo:"",parameter:"",khataNo:"",plotNo:"",maujaName:""},onSubmit:e=>{if(e.filterBy!="khataNo"){if(e.parameter==""){y.info("Enter any keyword...");return}}else if(!(e.khataNo!=""||e.plotNo!=""||e.maujaName!="")){y.info("Enter any keyword...");return}f(e)},validationSchema:H}),I=(e,o)=>{let t=`/gbSaf-holdingPropertyDetails/${o}`;Q(e,t,u)},L=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Officer's Name",accessor:"officer_name"},{Header:"Property Tax No.",accessor:"pt_no",Cell:({cell:e})=>r.jsx("span",{children:i(e.row.original.pt_no)})},{Header:"Holding No",accessor:"new_holding_no",Cell:({cell:e})=>r.jsx("span",{children:i(e.row.original.new_holding_no)})},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>r.jsx("span",{children:i(e.row.original.mobile_no)})},{Header:"Address",accessor:"prop_address",Cell:({cell:e})=>r.jsx("span",{children:i(e.row.original.prop_address)})},{Header:"Status",Cell:({cell:e})=>r.jsxs("div",{children:[e.row.original.active_status===1&&r.jsx("span",{className:"text-green-400 font-semibold",children:"Active"}),e.row.original.active_status===0&&r.jsx("span",{className:"text-red-400 font-semibold",children:"Disabled"})]})},{Header:"Action",accessor:"id",Cell:({cell:e})=>r.jsx("button",{onClick:o=>I(o,e.row.values.id),className:"bg-indigo-500 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-indigo-700 text-white",children:"View"})},{Header:"All Modules",Cell:({cell:e})=>r.jsx("button",{onClick:()=>u(`/allmodules-dues/${e.row.values.id}`),className:"px-2 py-1 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Dues"})},{Header:"Geo",Cell:({cell:e})=>r.jsx("button",{onClick:o=>{var t,a;return u(`/geo-map/${(a=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:a.id}`)},className:"px-2 py-1 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Geo-Map"})}];return l.useEffect(()=>{c!="direct"&&(s.setFieldValue("filterBy",decodeURIComponent(h)),s.setFieldValue("parameter",decodeURIComponent(c)),f({filterBy:decodeURIComponent(h),parameter:decodeURIComponent(c)}))},[]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[r.jsxs("div",{className:"hidden sm:flex  ml-5 mt-2 ",children:[r.jsx("img",{src:T,alt:"",className:"w-10 h-10"}),r.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"GbSaf Holding Search..."})]}),r.jsx("form",{onChange:F,onSubmit:s.handleSubmit,children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 my-5 m-10",children:[r.jsxs("div",{className:"w-full",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Filter By",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{...s.getFieldProps("filterBy"),className:"cypress_filterBy cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"ptn",children:"Property Tax No"}),r.jsx("option",{value:"holdingNo",children:"Holding No"}),r.jsx("option",{value:"officername",children:"Officer Name"}),r.jsx("option",{value:"mobileNo",children:"Mobile No"}),r.jsx("option",{value:"address",children:"Address"}),r.jsx("option",{value:"khataNo",children:"Khata No"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.filterBy&&s.errors.filterBy?s.errors.filterBy:null})]}),r.jsxs("div",{className:"w-full",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Old Ward No",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"wardNo",...s.getFieldProps("wardNo"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[r.jsx("option",{value:"",children:"All Ward"}),n==null?void 0:n.map(e=>r.jsx("option",{value:e.id,children:e.ward_name}))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.wardNo&&s.errors.wardNo?s.errors.wardNo:null})]}),r.jsxs("div",{className:"w-full",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["New Ward No",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"newWardNo",...s.getFieldProps("newWardNo"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",required:s.values.wardNo,children:[s.values.wardNo?r.jsx("option",{value:"",children:"Select"}):r.jsx("option",{value:"",children:"All Ward"}),d==null?void 0:d.map(e=>r.jsx("option",{value:e.new_ward_mstr_id,children:e.ward_name}))]}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.newWardNo&&s.errors.newWardNo?s.errors.newWardNo:null})]}),(s.values.filterBy==""||s.values.filterBy!="khataNo")&&r.jsxs("div",{className:"w-full",children:[r.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Search By ",B," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",...s.getFieldProps("parameter"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.parameter&&s.errors.parameter?s.errors.parameter:null})]}),s.values.filterBy=="khataNo"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"w-full",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Khata No."}),r.jsx("input",{type:"text",...s.getFieldProps("khataNo"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.khataNo&&s.errors.khataNo?s.errors.khataNo:null})]}),r.jsxs("div",{className:"w-full",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Plot No."}),r.jsx("input",{type:"text",...s.getFieldProps("plotNo"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.plotNo&&s.errors.plotNo?s.errors.plotNo:null})]}),r.jsxs("div",{className:"w-full",children:[r.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Mauja Name"}),r.jsx("input",{type:"text",...s.getFieldProps("maujaName"),className:"cypress_parameter w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),r.jsx("p",{className:"text-red-500 text-xs",children:s.touched.maujaName&&s.errors.maujaName?s.errors.maujaName:null})]})]}),r.jsx("div",{className:"w-full flex justify-center items-end",children:r.jsx("button",{type:"submit",disabled:m,className:`w-full border rounded-md ${m?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"} text-white shadow-lg text-base font-semibold px-5 py-2`,children:r.jsxs("p",{className:"flex items-center justify-center text-sm",children:[r.jsx("span",{className:"mt-1 mr-2",children:r.jsx(V,{})}),m?"Searching...":"Search record"]})})})]})})]}),r.jsxs("div",{className:"mt-10",children:[b!=null&&r.jsx(X,{api:P,columns:L,requestBody:b,changeData:S,loader:C}),r.jsx("div",{className:"w-full h-40"})]})]})}export{te as default};
