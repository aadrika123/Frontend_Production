import{ad as $,u as q,r as l,d as M,e as z,f as Q,a as x,l as V,j as e,q as Y,k as D,P as G,Q as J}from"./index-2153dd81.js";import{b as K}from"./index.esm-310d538b.js";import{A as U}from"./ApplicationSubmitScreen-69d69cd9.js";import{A as X}from"./ApiHeader2-9c66ad2e.js";import{B as Z}from"./BottomErrorCard-1e1a20d5.js";import{b as p}from"./PowerupFunctions-286420ed.js";import"./index.esm-4652c46c.js";/* empty css             */function ge(ee){const r=$(),u=q();console.log("getting id => ",r==null?void 0:r.id),l.useState(!1);const[te,h]=l.useState(),[ae,b]=l.useState(),[oe,w]=l.useState(),[j,y]=l.useState(),[a,N]=l.useState();l.useState("");const[v,S]=l.useState(""),[C,f]=l.useState(!1),[k,H]=l.useState(),[g,se]=l.useState(0),[W,I]=l.useState(!1),[_,i]=l.useState(!1),[B,A]=l.useState(null),{api_postWaterHarvestindDocCode:E,api_postWaterHarvestingData:F,api_getHoldingDetails:O}=G(),P=M({dateOfCompletion:z().required("This is a required field")}),n=Q({initialValues:{isWaterHarvestingBefore:"",dateOfCompletion:"",rwhImage:""},onSubmit:(t,s)=>{console.log("waterHarvesting ",t),L(t)},validationSchema:P}),R=()=>{u(`/holdingPropertyDetails/${r==null?void 0:r.id}`)};l.useEffect(()=>{f(!1),i(!0),x.post(`${E}`,{},V()).then(function(t){var s,o,d,m;console.log("water harvesting doc code => ",t),(s=t==null?void 0:t.data)!=null&&s.status?H((m=(d=(o=t==null?void 0:t.data)==null?void 0:o.data)==null?void 0:d.masters[0])==null?void 0:m.documentCode):c(!0,"Error occured in submittion. Please try again later."),i(!1)}).catch(function(t){console.log("water harvesting doc code errorrr.... ",t),c(!0,"Error occured in submittion. Please try again later."),i(!1)})},[]),l.useEffect(()=>{i(!0);let t=window.localStorage.getItem("token");console.log("token at basic details is  get method...",t);const s={headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}};x.post(O,{propertyId:r==null?void 0:r.id},s).then(o=>{var d;console.log("getting harvesting details => ",o),N((d=o==null?void 0:o.data)==null?void 0:d.data),i(!1)}).catch(o=>{console.log("getting harvesting details error => ",o),i(!1)})},[]);const L=t=>{i(!0);let s=new FormData;s.append("isWaterHarvestingBefore",t.isWaterHarvestingBefore),s.append("dateOfCompletion",t.dateOfCompletion),g==1&&s.append("document",j),g==1&&s.append("docCode",k),s.append("propertyId",r==null?void 0:r.id),s.append("ulbId",a==null?void 0:a.ulb_id),x.post(`${F}`,s,X()).then(function(o){var d,m;((d=o==null?void 0:o.data)==null?void 0:d.status)==!0?(console.log("response after submitting water harvesting data",o),J.success("Water Harvesting Applied Successfully !!"),S((m=o==null?void 0:o.data)==null?void 0:m.data),f(!0)):c(!0,"Error occured in submitting water harvesting application. Please try again later."),i(!1)}).catch(o=>{i(!1),c(!0,"Error occured in submitting water harvesting application. Please try again later.")})},T=t=>{const s=t.target.name;if(s=="rwhImage"){let o=t.target.files;y(t.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageLeft"){let o=t.target.files;h(t.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageTop"){let o=t.target.files;b(t.target.files[0]),console.log("file in change => ",o)}if(s=="rwhImageRight"){let o=t.target.files;w(t.target.files[0]),console.log("file in change => ",o)}},c=(t,s)=>{A(s),I(t)};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{position:"top-right",autoClose:2e3}),_&&e.jsx(D,{}),W&&e.jsx(Z,{activateBottomErrorCard:c,errorTitle:B}),e.jsx("div",{className:"2xl:mt-6 mt-3 bg-indigo-500 text-white flex flex-row md:justify-evenly items-center justify-center uppercase text-base poppins mb-4 shadow-md py-2 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-extrabold text-[30px]",children:e.jsx(K,{className:"inline mr-2"})}),e.jsx("span",{className:"font-semibold poppins 2xl:text-xl text-lg",children:"Rain Water Harvesting Form"})]})}),e.jsx("div",{className:"poppins my-2 2xl:font-base text-sm",children:"Rain Water Harvesting can be applied by this form."}),e.jsxs("div",{className:"p-4 w-full md:py-6 rounded-lg shadow-lg bg-white mx-auto flex flex-wrap gap-x-20 top-14 mb-6",children:[(a==null?void 0:a.pt_no)==""&&(a==null?void 0:a.pt_no)==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Property Tax No.:    "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(a==null?void 0:a.pt_no)})]})}):e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Holding No.:    "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p((a==null?void 0:a.new_holding_no)==""?a==null?void 0:a.holding_no:a==null?void 0:a.new_holding_no)})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"Old Ward No.:     "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(a==null?void 0:a.old_ward_no)})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:"New Ward No.:     "}),e.jsx("span",{className:"font-semibold text-sm poppins",children:p(a==null?void 0:a.new_ward_no)})]})]}),e.jsx("div",{className:"block p-4 w-full 2xl:py-6 py-3 rounded-lg shadow-lg bg-white mx-auto  top-14",children:e.jsxs("form",{onSubmit:n.handleSubmit,onChange:n.handleChange,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-4 pb-4",children:e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex flex-row space-x-3",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Does Completion of Water Harvesting is done before 31-03-2017?  "]}),e.jsx("input",{className:"w-6 h-6 text-blue-600 bg-gray-100 border-gray-300  dark:bg-gray-700 dark:border-gray-600",type:"radio",id:"isWaterHarvestingBefore",name:"isWaterHarvestingBefore",value:1,onChange:n.handleChange,required:!0}),e.jsx("label",{for:"option1",className:" text-sm font-medium text-gray-900 poppins",children:"Yes"}),e.jsx("input",{className:"w-6 h-6 text-blue-600 bg-gray-100 border-gray-300  dark:bg-gray-700 dark:border-gray-600",type:"radio",id:"isWaterHarvestingBefore",name:"isWaterHarvestingBefore",value:0,onChange:n.handleChange,required:!0}),e.jsx("label",{for:"option1",className:"text-sm font-medium text-gray-900 poppins",children:"No"})]})})}),e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsxs("div",{className:"col-span-10 flex flex-row flex-wrap items-center gap-4",children:[e.jsxs("label",{className:"form-label mb-1 text-gray-600 text-sm poppins",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Date of Completion of Water Harvesting Structure"]}),e.jsx("input",{type:"date",name:"dateOfCompletion",className:"form-control px-3 py-1.5 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md poppins",placeholder:"",value:n.values.dateOfCompletion,onChange:n.handleChange}),e.jsx("p",{className:"text-red-500 text-xs poppins",children:n.touched.dateOfCompletion&&n.errors.dateOfCompletion?n.errors.dateOfCompletion:null})]}),e.jsxs("div",{className:"2xl:col-span-10 col-span-10 2xl:mt-4 mt-2 flex flex-row flex-wrap items-center gap-2 2xl:gap-4 poppins",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm poppins",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline",children:"*"}),"Rain Water Harvesting Image "]}),e.jsx("input",{accept:".jpg,.jpeg",type:"file",name:"rwhImage",className:"form-control px-2 py-1 2xl:text-base text-xs font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md poppins",placeholder:"",value:n.values.rwhImage,onChange:T}),g==1&&e.jsx("span",{className:"col-span-2 flex items-center poppins",children:e.jsx("p",{className:"text-red-500 text-xs",children:n.touched.rwhImage&&n.errors.rwhImage?n.errors.rwhImage:null})})]})]}),e.jsxs("div",{className:"col-span-12 my-4 flex justify-between",children:[e.jsx("button",{onClick:()=>u(`/holdingPropertyDetails/${r==null?void 0:r.id}`),type:"button",className:" px-3 py-1.5 2xl:px-6 2xl:py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out poppins",children:"Back"}),e.jsx("button",{type:"submit",className:" px-3 py-1.5 2xl:px-6 2xl:py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out poppins",children:"Submit"})]})]})}),e.jsx(U,{heading:"Rain Water Harvesting Form",appNo:v,openSubmit:C,navigation:R}),e.jsx("div",{className:"h-[10rem] visible 2xl:hidden"})]})}export{ge as default};
