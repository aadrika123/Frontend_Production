import{R as U,aK as O,u as W,r as c,a5 as V,b as Y,d as z,e as f,f as G,a as _,l as b,j as a,an as $,n as l,aL as g}from"./index-f34c4420.js";import{e as K}from"./index.esm-15f3038b.js";const j=U.lazy(()=>O(()=>import("./ListTableConnect-01ada664.js"),["assets/ListTableConnect-01ada664.js","assets/index-f34c4420.js","assets/index-c675e941.css","assets/ListTable2v2-c585a3ac.js","assets/GlobalFilter-05a02cc3.js","assets/index.esm-6a05e7f9.js","assets/BarLoader-ae6b4ed7.js"])),Z=()=>{const{get_MasterData:H,get_collectorList:D,searchPropertyCollection:w,searchSafCollection:S,searchGbSafCollection:T}=$(),C=W(),[m,F]=c.useState(),[x,M]=c.useState(),[Q,h]=c.useState(!1),[d,q]=c.useState(""),[r,N]=c.useState(null),[v,A]=c.useState(0);let k=new Date().toLocaleDateString("in-IN"),u=V(k).format("YYYY-DD-MM");Y("Collection Report");const s="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",I=z({fromDate:f().required("Field Required"),uptoDate:f().required("Field Required"),collType:f().required("Field Required")}),t=G({initialValues:{fromDate:u,uptoDate:u,collType:"property",wardId:"",userId:"",paymentMode:""},onSubmit:e=>{q(e==null?void 0:e.collType),(e==null?void 0:e.collType)=="gbSaf"?N({fromDate:t.values.fromDate,uptoDate:t.values.uptoDate,wardId:t.values.wardId,paymentMode:t.values.paymentMode}):N({fromDate:t.values.fromDate,uptoDate:t.values.uptoDate,wardId:t.values.wardId,userId:t.values.userId,paymentMode:t.values.paymentMode}),A(n=>n+1)},validationSchema:I});c.useEffect(()=>{P()},[]);const P=()=>{_.get(H,b()).then(e=>{var n,i,o;((n=e==null?void 0:e.data)==null?void 0:n.status)==!0&&F((o=(i=e==null?void 0:e.data)==null?void 0:i.data)==null?void 0:o.ward_master)}).catch(e=>console.log("error getting master list",e))},y=e=>{h(!0),_.post(D,{wardId:e.target.value},b()).then(n=>{var i,o;((i=n==null?void 0:n.data)==null?void 0:i.status)==!0&&(console.log("getting collector list => ",n),M((o=n==null?void 0:n.data)==null?void 0:o.data)),h(!1)}).catch(n=>(console.log("error getting collector list => ",n),h(!1)))},L=[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Property Tax No",accessor:"pt_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Holding No",accessor:"holding_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Unique House No",accessor:"new_holding_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Owner Name",accessor:"owner_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Payment(From/Upto)",accessor:"from_upto_fy_qtr",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Mode",accessor:"transaction_mode",Cell:e=>l(e==null?void 0:e.value)},{Header:"Amount",accessor:"amount",Cell:e=>a.jsx(a.Fragment,{children:g(e==null?void 0:e.value)})},{Header:"Tax Collector",accessor:"emp_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. No",accessor:"tran_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Check/DD No",accessor:"cheque_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Bank",accessor:"bank_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Branch",accessor:"branch_name",Cell:e=>l(e==null?void 0:e.value)}],R=[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Property Tax No",accessor:"pt_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Holding No",accessor:"holding_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Saf No",accessor:"saf_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Owner Name",accessor:"owner_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Payment(From/Upto)",accessor:"from_upto_fy_qtr",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Mode",accessor:"transaction_mode",Cell:e=>l(e==null?void 0:e.value)},{Header:"Amount",accessor:"amount",Cell:e=>a.jsx(a.Fragment,{children:g(e==null?void 0:e.value)})},{Header:"Tax Collector",accessor:"emp_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. No",accessor:"tran_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Check/DD No",accessor:"cheque_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Bank",accessor:"bank_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Branch",accessor:"branch_name",Cell:e=>l(e==null?void 0:e.value)}],B=[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Application No.",accessor:"application_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Address",accessor:"prop_address",Cell:e=>l(e==null?void 0:e.value)},{Header:"Payment(From/Upto)",accessor:"from_upto_fy_qtr",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. Mode",accessor:"transaction_mode",Cell:e=>l(e==null?void 0:e.value)},{Header:"Amount",accessor:"amount",Cell:e=>a.jsx(a.Fragment,{children:g(e==null?void 0:e.value)})},{Header:"Tax Collector",accessor:"emp_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Tran. No",accessor:"tran_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Check/DD No",accessor:"cheque_no",Cell:e=>l(e==null?void 0:e.value)},{Header:"Bank",accessor:"bank_name",Cell:e=>l(e==null?void 0:e.value)},{Header:"Branch",accessor:"branch_name",Cell:e=>l(e==null?void 0:e.value)}],E=()=>{d=="property"?C("/payment-mode-wise-summary/property"):C("/payment-mode-wise-summary/saf")};return a.jsxs(a.Fragment,{children:[a.jsxs("form",{onChange:t.handleChange,onSubmit:t.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md ",children:[a.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Collection Report"}),a.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"From Date :"}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"fromDate",id:"",className:s,defaultValue:u})}),a.jsx("div",{className:"col-span-12 text-end",children:t.touched.fromDate&&t.errors.fromDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:t.errors.fromDate})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Upto Date :"}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"uptoDate",id:"",className:s,defaultValue:u})}),a.jsx("div",{className:"col-span-12 text-end",children:t.touched.uptoDate&&t.errors.uptoDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:t.errors.uptoDate})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Collection Type :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"collType",id:"",className:s,onChange:t.values.collType!="gbSaf"&&y,children:[a.jsx("option",{value:"property",children:"Property"}),a.jsx("option",{value:"saf",children:"SAF"}),a.jsx("option",{value:"gbSaf",children:"GB SAF"})]})}),a.jsx("div",{className:"col-span-12 text-end",children:t.touched.collType&&t.errors.collType&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:t.errors.collType})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Ward No. :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"wardId",id:"",className:s,onChange:t.values.collType!="gbSaf"&&y,children:[a.jsx("option",{value:"",children:"All"}),m==null?void 0:m.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name})}))]})})]}),t.values.collType!="gbSaf"&&a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Collector Name :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"userId",id:"",className:s,children:[a.jsx("option",{value:"",children:"All"}),x==null?void 0:x.map(e=>a.jsx(a.Fragment,{children:a.jsxs("option",{value:e==null?void 0:e.id,children:[a.jsx("span",{className:"capitalize",children:e==null?void 0:e.user_name}),"Â ",a.jsxs("span",{className:"uppercase",children:["(",e==null?void 0:e.user_type,")"]})]})}))]})}),a.jsx("div",{className:"col-span-12 text-end text-xs text-red-500",children:"select ward no to get collector name list"})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Payment Mode :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"paymentMode",id:"",className:s,children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"CASH",children:"Cash"}),a.jsx("option",{value:"CHEQUE",children:"Cheque"}),a.jsx("option",{value:"DD",children:"DD"}),a.jsx("option",{value:"ONLINE",children:"Online"})]})})]}),a.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-center",children:a.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",a.jsx("span",{className:"mr-2",children:a.jsx(K,{})}),"Search"]})})]})]}),d!=""&&d!="gbSaf"&&a.jsx("div",{className:"w-full text-end",children:a.jsx("button",{className:"font-semibold px-6 py-2 bg-indigo-500 text-white  text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",onClick:()=>E(),children:"Payment Mode Wise Summary"})}),r!=null&&d=="gbSaf"&&a.jsx(j,{type:"old",api:T,columns:B,requestBody:r,changeData:v}),r!=null&&d=="saf"&&a.jsx(j,{type:"old",api:S,columns:R,requestBody:r,changeData:v}),r!=null&&d=="property"&&a.jsx(j,{type:"old",api:w,columns:L,requestBody:r,changeData:v}),a.jsx("div",{className:"h-[20vh]"})]})};export{Z as default};
