import{ad as B,u as U,r as i,b as E,d as O,e as g,f as W,a as C,l as y,j as l,i as G,an as V}from"./index-409cf397.js";import{e as $}from"./index.esm-1b05d138.js";import{L as A}from"./ListTableConnect-8d622b53.js";import"./ListTable2v2-e4ba7735.js";import"./GlobalFilter-dd1e10b8.js";import"./index.esm-4a17b6a2.js";import"./BarLoader-08944b03.js";const s=()=>{const{get_MasterData:D,get_collectorList:_,searchPropertyCollection:w,searchSafCollection:H,searchGbSafCollection:S}=V(),{type:t}=B();U();const[f,F]=i.useState(),[x,M]=i.useState();i.useState();const[I,h]=i.useState(!1),[v,j]=i.useState(null),[b,k]=i.useState(0);let m;t=="property"&&(m="Property Collection Report"),t=="saf"&&(m="SAF Collection Report"),t=="gbSaf"&&(m="GB SAF Collection Report"),E(m);const u="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",q=O({fromDate:g().required("Field Required"),uptoDate:g().required("Field Required")});let N;t=="gbSaf"?N={fromDate:"",uptoDate:"",wardId:"",paymentMode:""}:N={fromDate:"",uptoDate:"",wardId:"",userId:"",paymentMode:""};const a=W({initialValues:N,onSubmit:e=>{t=="gbSaf"?j({fromDate:a.values.fromDate,uptoDate:a.values.uptoDate,wardId:a.values.wardId,paymentMode:a.values.paymentMode}):j({fromDate:a.values.fromDate,uptoDate:a.values.uptoDate,wardId:a.values.wardId,userId:a.values.userId,paymentMode:a.values.paymentMode}),k(n=>n+1)},validationSchema:q});i.useEffect(()=>{L()},[]);const L=()=>{C.get(D,y()).then(e=>{var n,d,c;((n=e==null?void 0:e.data)==null?void 0:n.status)==!0&&F((c=(d=e==null?void 0:e.data)==null?void 0:d.data)==null?void 0:c.ward_master)}).catch(e=>console.log("error getting master list",e))},T=e=>{h(!0),C.post(_,{wardId:e.target.value},y()).then(n=>{var d,c;((d=n==null?void 0:n.data)==null?void 0:d.status)==!0&&(console.log("getting collector list => ",n),M((c=n==null?void 0:n.data)==null?void 0:c.data)),h(!1)}).catch(n=>(console.log("error getting collector list => ",n),h(!1)))},P=[{Header:"S.No.",Cell:({row:e})=>l.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Property Tax No",accessor:"pt_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Holding No",accessor:"holding_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:t=="property"?"Unique House No":"Saf No",accessor:t=="property"?"new_holding_no":"saf_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Payment(From/Upto)",accessor:"from_upto_fy_qtr",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Mode",accessor:"transaction_mode",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Amount",accessor:"amount",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tax Collector",accessor:"emp_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. No",accessor:"tran_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Check/DD No",accessor:"cheque_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Bank",accessor:"bank_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Branch",accessor:"branch_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}],R=[{Header:"S.No.",Cell:({row:e})=>l.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Application No.",accessor:"application_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Address",accessor:"prop_address",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Payment(From/Upto)",accessor:"from_upto_fy_qtr",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. Mode",accessor:"transaction_mode",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Amount",accessor:"amount",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tax Collector",accessor:"emp_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Tran. No",accessor:"tran_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Check/DD No",accessor:"cheque_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Bank",accessor:"bank_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Branch",accessor:"branch_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return l.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}];return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onChange:a.handleChange,onSubmit:a.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md ",children:[l.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Collection Report"}),l.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[l.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[l.jsx("div",{className:"col-span-6 font-semibold",children:"From Date :"}),l.jsx("div",{className:"col-span-6",children:l.jsx("input",{type:"date",name:"fromDate",id:"",className:u})}),l.jsx("div",{className:"col-span-12 text-end",children:a.touched.fromDate&&a.errors.fromDate&&l.jsx(l.Fragment,{children:l.jsx("span",{className:"text-red-600 text-xs",children:a.errors.fromDate})})})]}),l.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[l.jsx("div",{className:"col-span-6 font-semibold",children:"Upto Date :"}),l.jsx("div",{className:"col-span-6",children:l.jsx("input",{type:"date",name:"uptoDate",id:"",className:u})}),l.jsx("div",{className:"col-span-12 text-end",children:a.touched.uptoDate&&a.errors.uptoDate&&l.jsx(l.Fragment,{children:l.jsx("span",{className:"text-red-600 text-xs",children:a.errors.uptoDate})})})]}),l.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[l.jsx("div",{className:"col-span-6 font-semibold",children:"Ward No. :"}),l.jsx("div",{className:"col-span-6",children:l.jsxs("select",{name:"wardId",id:"",className:u,onChange:t!="gbSaf"&&T,children:[l.jsx("option",{value:"",children:"All"}),f==null?void 0:f.map(e=>l.jsx(l.Fragment,{children:l.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name})}))]})})]}),t!="gbSaf"&&l.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[l.jsx("div",{className:"col-span-6 font-semibold",children:"Collector Name :"}),l.jsx("div",{className:"col-span-6",children:l.jsxs("select",{name:"userId",id:"",className:u,children:[l.jsx("option",{value:"",children:"All"}),x==null?void 0:x.map(e=>l.jsx(l.Fragment,{children:l.jsxs("option",{value:e==null?void 0:e.id,children:[l.jsx("span",{className:"capitalize",children:e==null?void 0:e.user_name})," ",l.jsxs("span",{className:"uppercase",children:["(",e==null?void 0:e.user_type,")"]})]})}))]})}),l.jsx("div",{className:"col-span-12 text-end text-xs text-red-500",children:"select ward no to get collector name list"})]}),l.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[l.jsx("div",{className:"col-span-6 font-semibold",children:"Payment Mode :"}),l.jsx("div",{className:"col-span-6",children:l.jsxs("select",{name:"paymentMode",id:"",className:u,children:[l.jsx("option",{value:"",children:"All"}),l.jsx("option",{value:"CASH",children:"Cash"}),l.jsx("option",{value:"CHEQUE",children:"Cheque"}),l.jsx("option",{value:"DD",children:"DD"}),l.jsx("option",{value:"ONLINE",children:"Online"})]})})]}),l.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-end",children:I?l.jsx(l.Fragment,{children:l.jsx("div",{className:"flex justify-start items-end",children:l.jsx(G,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):l.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",l.jsx("span",{className:"mr-2",children:l.jsx($,{})}),"Search"]})})]})]}),v!=null&&t=="gbSaf"&&l.jsx(A,{type:"old",api:S,columns:R,requestBody:v,changeData:b}),v!=null&&t!="gbSaf"&&l.jsx(A,{type:"old",api:t=="property"?w:H,columns:P,requestBody:v,changeData:b}),l.jsx("div",{className:"h-[20vh]"})]})};export{s as default};
