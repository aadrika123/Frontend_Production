import{b as E,r as u,f as I,a as C,l as H,j as a,i as B,an as Y}from"./index-3ca777cc.js";import{e as M}from"./index.esm-f928ac9b.js";import{L as O}from"./ListTableConnect-7076e117.js";import"./ListTable2v2-cf5080a6.js";import"./GlobalFilter-c3dc835d.js";import"./index.esm-ef09a621.js";import"./BarLoader-09d6edb0.js";const J=()=>{const{get_MasterData:_,searchHoldingDcb:A,yearList:y}=Y();E("Holding DCB");const[c,F]=u.useState();u.useState();const[m,S]=u.useState(),[v,R]=u.useState(!1),[f,D]=u.useState(null),[L,T]=u.useState(0),x="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",d=I({initialValues:{wardId:"",fiYear:""},onSubmit:e=>{console.log("submitting report search values => ",e),D({wardId:d.values.wardId,fiYear:d.values.fiYear}),T(l=>l+1)}});u.useEffect(()=>{C.get(_,H()).then(e=>{var l,n,t;((l=e==null?void 0:e.data)==null?void 0:l.status)==!0?(console.log("getting master list data => ",e),F((t=(n=e==null?void 0:e.data)==null?void 0:n.data)==null?void 0:t.ward_master)):console.log("error getting master list",e)}).catch(e=>console.log("error getting master list",e)),C.post(y,{},H()).then(e=>{var l,n;((l=e==null?void 0:e.data)==null?void 0:l.status)==!0?(console.log("year list data => ",e),S((n=e==null?void 0:e.data)==null?void 0:n.data)):console.log("error year list",e)}).catch(e=>console.log("error year list",e))},[]);const k=[{Header:"_",columns:[{Header:"S.No.",Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1})},{Header:"Ward No",accessor:"ward_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Property Tax No",accessor:"pt_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Holding No",accessor:"holding_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"New Holding No",accessor:"new_holding_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Owner Name",accessor:"owner_name",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Mobile No",accessor:"mobile_no",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"DEMAND",columns:[{Header:"Arrear (₹)",accessor:"arrear_demand",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Current (₹)",accessor:"current_demand",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Total Demand (₹)",Cell:({cell:e})=>{var l,n,t,i;return parseFloat((n=(l=e==null?void 0:e.row)==null?void 0:l.original)==null?void 0:n.arrear_demand)+parseFloat((i=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:i.current_demand)}}]},{Header:"COLLECTION",columns:[{Header:"Arrear (₹)",accessor:"arrear_collection",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Current (₹)",accessor:"current_collection",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Total Collection (₹)",Cell:({cell:e})=>{var l,n,t,i;return parseFloat((n=(l=e==null?void 0:e.row)==null?void 0:l.original)==null?void 0:n.arrear_collection)+parseFloat((i=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:i.current_collection)}}]},{Header:"BALANCE",columns:[{Header:"Arrear (₹)",accessor:"old_due",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Current (₹)",accessor:"current_due",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}},{Header:"Total Balance (₹)",accessor:"outstanding",Cell:e=>{if((e==null?void 0:e.value)==null||(e==null?void 0:e.value)==""||(e==null?void 0:e.value)==null)return a.jsx("i",{className:"font-semibold ",children:"N/A"});if((e==null?void 0:e.value)!=null)return e==null?void 0:e.value}}]},{Header:"%",columns:[{Header:"Amount % Cover",Cell:({cell:e})=>{var t,i,h,g,N,b,j,w;let l=(parseFloat((i=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:i.arrear_demand)+parseFloat((g=(h=e==null?void 0:e.row)==null?void 0:h.original)==null?void 0:g.current_demand))/100,n=((parseFloat((b=(N=e==null?void 0:e.row)==null?void 0:N.original)==null?void 0:b.arrear_collection)+parseFloat((w=(j=e==null?void 0:e.row)==null?void 0:j.original)==null?void 0:w.current_collection))/l).toFixed(2);return n=="NaN"?"0.00":n}}]}];return a.jsxs(a.Fragment,{children:[a.jsxs("form",{onChange:d.handleChange,onSubmit:d.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md",children:[a.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Report"}),a.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Ward No. :"}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"wardId",id:"",className:x,disabled:v,children:[a.jsx("option",{value:"",children:"All"}),c==null?void 0:c.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name})}))]})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:"Financial Year :"}),a.jsx("div",{className:"col-span-6",children:a.jsx("select",{name:"fiYear",id:"",className:x,disabled:v,children:m==null?void 0:m.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e,children:e})}))})})]}),a.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-end",children:v?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx(B,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):a.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",a.jsx("span",{className:"mr-2",children:a.jsx(M,{})}),"Search"]})})]})]}),f!=null&&a.jsx(O,{type:"old",api:A,columns:k,requestBody:f,changeData:L}),a.jsx("div",{className:"h-[20vh]"})]})};export{J as default};
