import{R as C,c as F,a as I,r as i,b as a,F as j,j as m}from"./index-ac8fdf8c.js";import{a as k,A as z}from"./axios-28c6f114.js";import{I as L}from"./index.esm-990820af.js";import{R as M}from"./Blocks-bdd35ea6.js";import{M as P}from"./index-472b7cc9.js";import{P as O}from"./ProjectApiList-f293eba9.js";import"./iconBase-dfc3c367.js";import"./index.esm-c683b93b.js";const q=e=>{const{notify:l}=C.useContext(F);I();const{api_postApplicationToLevel:w,harvestingPostLevel:x,api_gbSafPostLevel:v}=O(),[u,y]=i.useState(""),[f,n]=i.useState(!1),[S,r]=i.useState(!1),N=()=>r(!0),d=()=>{r(!1)},_=()=>{};i.useEffect(()=>{console.log("enter in submission screen with application no.  =>  ",e==null?void 0:e.id),(e==null?void 0:e.openScreen)==!0&&N(),(e==null?void 0:e.openScreen)==!1&&d()},[e==null?void 0:e.openScreen]);const s=()=>{if(u==""){l("Write comment...","info");return}(e==null?void 0:e.canSubmit)!="true"&&(e==null||e.navigation()),n(!0),(e==null?void 0:e.canSubmit)=="false"&&n(!1),console.log("can submit => ",e==null?void 0:e.canSubmit),(e==null?void 0:e.canSubmit)=="true"&&n(!0);let o={applicationId:e==null?void 0:e.id,action:"forward",comment:u};console.log("data before forward => ",o);let c;(e==null?void 0:e.type)=="saf"&&(c=w),(e==null?void 0:e.type)=="gbSaf"&&(c=v),(e==null?void 0:e.type)=="harvesting"&&(c=x),(e==null?void 0:e.canSubmit)=="true"&&k.post(c,o,z()).then(t=>{var g,b,h;((g=t==null?void 0:t.data)==null?void 0:g.status)==!0&&(n(!1),d(),console.log("success forward => ",t),l("Forwarded Successfully !!!","success"),window.location.replace("/property/mobile-property-options")),((b=t==null?void 0:t.data)==null?void 0:b.status)==!1&&(n(!1),e.closePopUp(),console.log("error forward => ",t),l((h=t==null?void 0:t.data)==null?void 0:h.message,"error"))}).catch(t=>{n(!1),console.log("error forward => ",t),l(t,"error")})};i.useEffect(()=>{(e==null?void 0:e.canSubmit)!=""&&s()},[e==null?void 0:e.canSubmit]);const A=()=>{d(),e.closePopUp()};return a(j,{children:a(P,{isOpen:S,onAfterOpen:_,className:"z-40 h-screen w-screen backdrop-blur-sm flex flex-row justify-center items-center overflow-auto  animate__animated animate__zoomIn animate__faster",contentLabel:"Example Modal",children:m("div",{style:{zIndex:1e3},class:"absolute z-40 rounded-lg shadow-lg shadow-indigo-300 md:w-[50vw] md:h-max w-[90%] border-2 border-indigo-500 bg-gray-50 px-2 m-2 py-4 h-max border-t-2 border-l-2 overflow-auto",children:[!f&&a("div",{className:"absolute top-2 z-10 bg-red-200 hover:bg-red-300 right-2 rounded-full p-2 cursor-pointer",onClick:()=>A(),children:a(L,{fontSize:10})}),m("div",{className:"flex flex-col items-center px-4",children:[a("div",{className:"mt-6 mb-4 bg-indigo-600 font-semibold rounded-sm w-full 2xl:text-2xl text-lg text-center shadow-sm text-white px-4 py-2 poppins uppercase",children:"Workflow Action"}),m("div",{children:[a("label",{htmlFor:"comment",children:"Comment :"}),a("textarea",{name:"comment",onChange:o=>y(o.target.value),className:"bg-white px-2 py-1 w-full rounded-sm shadow-sm border-[1px] border-gray-400",id:"",cols:"30",rows:"3"})]}),f?a("div",{className:"flex justify-center",children:a(M,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):a("button",{onClick:()=>s(),className:"2xl:px-6 px-3 py-1.5 2xl:py-2.5 cursor-pointer bg-green-500 text-white font-medium text-xs  poppins rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out mt-4",children:"Forward"})]})]})})})};export{q as default};
