import{G as e,r as a,D as r,u as t,x as s,j as o,y as i,z as l}from"./vendor-BQjEkISh.js";import{c as d,b as n,a as c}from"./yup-CnfbaAoe.js";import{F as u,R as m,B as x}from"./datetime-picker-DdAd4p16.js";import{R as h,a as b,b as p}from"./RHFUploadFiled-BhbzhjeA.js";import"./index-DBZN_bnu.js";import"./query-D2uVQUkm.js";import"./ui-nizOJQEB.js";import"./icons-BMgt4q83.js";import"./axios-Dos3PyFQ.js";import"./zustand-CDkHc-Qy.js";const g=d({idHex:c().required("ID Hex is required"),ownerName:c().required("Owner Name is required"),address:c().required("Address is required"),wardNo:c().required("Ward No. is required"),propertyType:c().required("Property type is required"),usageType:c().required("Usage type is required"),wasteType:c().required("Type of waste is required"),binsAvailability:c().required("Availability of bins is required"),latitude:c().required("Latitude is required"),longitude:c().required("Longitude is required"),frontViewPhoto:n().nullable()}),y=({number:e,title:r,icon:t,children:s,defaultOpen:i=!0})=>{const[l,d]=a.useState(i);return o.jsxs("div",{className:"mb-4 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900",children:[o.jsxs("button",{type:"button",onClick:()=>d(!l),className:"flex w-full items-center justify-between bg-gradient-to-r from-emerald-50 to-teal-50 px-5 py-4 dark:from-emerald-900/20 dark:to-teal-900/20",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-md",children:t}),o.jsxs("div",{className:"text-left",children:[o.jsxs("p",{className:"text-xs font-medium uppercase tracking-wide text-emerald-600 dark:text-emerald-400",children:["Section ",e]}),o.jsx("h2",{className:"text-base font-bold text-gray-800 dark:text-gray-200",children:r})]})]}),o.jsx("svg",{className:"h-5 w-5 transform text-gray-500 transition-transform duration-300 "+(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o.jsx("div",{className:"transition-all duration-300 ease-in-out "+(l?"max-h-[2000px] opacity-100":"max-h-0 overflow-hidden opacity-0"),children:o.jsx("div",{className:"space-y-4 p-5",children:s})})]})};function j(){const[d,n]=a.useState(!1),{coords:c,isGeolocationEnabled:j,isGeolocationAvailable:v}=function(){const{isGeolocationAvailable:a,isGeolocationEnabled:r,getPosition:t,coords:s,positionError:o,timestamp:i}=e({positionOptions:{enableHighAccuracy:!0,timeout:1/0,maximumAge:0},watchPosition:!0});return{isGeolocationAvailable:a,isGeolocationEnabled:r,coords:s,positionError:o,timestamp:i,getPosition:t}}(),[f]=r(),k=t(),w=s({defaultValues:{idHex:"",ownerName:"",address:"",wardNo:"",propertyType:"",usageType:"",wasteType:"",binsAvailability:"",latitude:c?c.latitude.toFixed(6):"",longitude:c?c.longitude.toFixed(6):"",frontViewPhoto:null},resolver:i(g)});a.useEffect(()=>{const e=f.get("idHex");e&&w.setValue("idHex",e)},[f,w]);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-950 dark:to-gray-900",children:[o.jsx("header",{className:"sticky top-0 z-20 border-b border-gray-200 bg-white/95 shadow-sm backdrop-blur-sm dark:border-gray-800 dark:bg-gray-900/95",children:o.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[o.jsx("button",{onClick:()=>k(-1),className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gray-100 text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300",children:o.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg",children:o.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"SWM Survey"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Solid Waste Management"})]})]})]})}),o.jsx("main",{className:"pb-28",children:o.jsxs(u,{methods:w,onSubmit:w.handleSubmit(async e=>{try{l.success("SWM Survey submitted successfully!"),k("/survey-app/dashboard/home")}catch(a){l.error("Failed to submit survey")}}),children:[o.jsxs("div",{className:"space-y-3 p-4",children:[o.jsxs(y,{number:1,title:"Property & Occupancy",icon:o.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),children:[o.jsx(m,{name:"idHex",label:"ID Hex",isRequired:!0,placeholder:"Enter ID Hex",className:"h-12 rounded-xl"}),o.jsx(m,{name:"ownerName",label:"Owner Name",isRequired:!0,placeholder:"Enter owner name",className:"h-12 rounded-xl"}),o.jsx(h,{name:"address",label:"Address",isRequired:!0,placeholder:"Enter complete address",rows:3}),o.jsx(m,{name:"wardNo",label:"Ward No.",isRequired:!0,placeholder:"Enter ward number",className:"h-12 rounded-xl"}),o.jsx(b,{name:"propertyType",label:"Property Type",data:[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"industrial",label:"Industrial"},{value:"institutional",label:"Institutional"},{value:"mixed",label:"Mixed Use"},{value:"vacant",label:"Vacant Land"}]}),o.jsx(b,{name:"usageType",label:"Usage Type",data:[{value:"owner_occupied",label:"Owner Occupied"},{value:"rented",label:"Rented"},{value:"vacant",label:"Vacant"},{value:"commercial_use",label:"Commercial Use"}]})]}),o.jsxs(y,{number:2,title:"Waste Management",icon:o.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:[o.jsx(b,{name:"wasteType",label:"Type of Waste",data:[{value:"biodegradable",label:"Biodegradable (Wet Waste)"},{value:"non_biodegradable",label:"Non-Biodegradable (Dry Waste)"},{value:"mixed",label:"Mixed Waste"},{value:"hazardous",label:"Hazardous Waste"},{value:"e_waste",label:"E-Waste"}]}),o.jsx(b,{name:"binsAvailability",label:"Availability of Bins",data:[{value:"yes_segregated",label:"Yes - Segregated Bins"},{value:"yes_single",label:"Yes - Single Bin"},{value:"no",label:"No Bins Available"}]})]}),o.jsx(y,{number:3,title:"Geo Tagging",icon:o.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:o.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-gradient-to-r from-emerald-50 to-teal-50 p-4 dark:border-emerald-800 dark:from-emerald-900/20 dark:to-teal-900/20",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(m,{name:"latitude",label:"Latitude",isRequired:!0,placeholder:"Lat",className:"h-12 rounded-xl"}),o.jsx(m,{name:"longitude",label:"Longitude",isRequired:!0,placeholder:"Long",className:"h-12 rounded-xl"})]}),o.jsxs("button",{type:"button",onClick:()=>{v?j?c?(w.setValue("latitude",c.latitude.toFixed(6)),w.setValue("longitude",c.longitude.toFixed(6)),l.success("Location captured successfully")):l.error("Unable to retrieve location"):l.error("Geolocation is not enabled"):l.error("Geolocation is not supported by your browser")},disabled:d,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 px-4 py-3.5 font-semibold text-white shadow-lg transition-all hover:from-emerald-600 hover:to-teal-700 disabled:opacity-50",children:[d?o.jsxs("svg",{className:"h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):o.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d?"Getting Location...":"Capture GPS Location"]})]})}),o.jsx(y,{number:4,title:"Photograph",icon:o.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:o.jsxs("div",{className:"rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 p-5 dark:border-gray-600 dark:bg-gray-800",children:[o.jsx(p,{name:"frontViewPhoto",label:"Front View with Timestamp",accept:"image/*",capture:"environment",isRequired:!0}),o.jsx("p",{className:"mt-2 text-center text-xs text-gray-500",children:"Capture property front view with timestamp"})]})})]}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-gray-200 bg-white/95 p-4 shadow-2xl backdrop-blur-sm dark:border-gray-800 dark:bg-gray-900/95",children:o.jsx(x,{type:"submit",isLoading:w.formState.isSubmitting,className:"h-14 w-full rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-lg font-bold shadow-lg hover:from-emerald-600 hover:to-teal-700",children:"Submit SWM Survey"})})]})})]})}export{j as default};
