import{v as e,j as r,C as a,r as i,D as s,u as o,x as n,y as t,z as l}from"./vendor-BQjEkISh.js";import{c as d,b as c,a as u,d as m,e as b}from"./yup-CnfbaAoe.js";import{D as g,F as h,R as x,B as p}from"./datetime-picker-DdAd4p16.js";import{R as v,a as y,b as j}from"./RHFUploadFiled-BhbzhjeA.js";import"./index-DBZN_bnu.js";import"./query-D2uVQUkm.js";import"./ui-nizOJQEB.js";import"./icons-BMgt4q83.js";import"./axios-Dos3PyFQ.js";import"./zustand-CDkHc-Qy.js";function k({name:i,label:s,hourCycle:o=24,isRequired:n,disabled:t,granularity:l,placeholder:d,className:c}){const{control:u}=e();return r.jsx(a,{name:i,control:u,render:({field:{value:e,onChange:a,...i},fieldState:{error:u}})=>r.jsxs("div",{className:c,children:[s&&r.jsxs("h1",{className:"mb-1 text-sm text-gray-700 dark:text-gray-200",children:[s," ",n&&r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx(g,{...i,hourCycle:o,value:e,onChange:a,disabled:t,granularity:l,placeholder:d}),u&&r.jsx("span",{className:"text-xs text-red-400",children:u.message})]})})}const f=d({idHex:u().required("ID Hex is required"),wardNo:u().required("Ward No. is required"),zone:u().required("Zone is required"),holdingNo:u().required("Holding No. is required"),ownerName:u().required("Owner Name is required"),address:u().required("Address is required"),propertyUsageType:u().required("Property usage type is required"),noOfOccupants:b().typeError("Enter a valid number").min(1,"Minimum 1 occupant").required("No. of occupants is required"),sanitationType:u().required("Sanitation type is required"),sanitationConstructionYear:u().required("Construction year is required"),connectionToDrain:u().required("Connection to drain is required"),septicTankLocation:u().required("Septic tank location is required"),dimensionCapacity:u().required("Dimension/Capacity is required"),noOfChambers:u().required("No. of chambers is required"),presenceOfSoak:u().required("Presence of soak is required"),desludgingVehicleAccessibility:u().required("Accessibility is required"),ventilationCoverCondition:u().required("Ventilation and cover condition is required"),lastDesludgingDate:m().nullable(),desludgingFrequency:u().required("Desludging frequency is required"),serviceProvider:u().required("Service provider is required"),currentDesludgingPractice:u().required("Current desludging practice is required"),latitude:u().required("Latitude is required"),longitude:u().required("Longitude is required"),propertyFrontPhoto:c().nullable(),septicTankCoverPhoto:c().nullable(),timestampedRecord:c().nullable()}),N=({number:e,title:a,icon:s,children:o,defaultOpen:n=!0})=>{const[t,l]=i.useState(n);return r.jsxs("div",{className:"mb-4 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900",children:[r.jsxs("button",{type:"button",onClick:()=>l(!t),className:"flex w-full items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50 px-5 py-4 dark:from-blue-900/20 dark:to-indigo-900/20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-md",children:s}),r.jsxs("div",{className:"text-left",children:[r.jsxs("p",{className:"text-xs font-medium uppercase tracking-wide text-blue-600 dark:text-blue-400",children:["Section ",e]}),r.jsx("h2",{className:"text-base font-bold text-gray-800 dark:text-gray-200",children:a})]})]}),r.jsx("svg",{className:"h-5 w-5 transform text-gray-500 transition-transform duration-300 "+(t?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r.jsx("div",{className:"transition-all duration-300 ease-in-out "+(t?"max-h-[2000px] opacity-100":"max-h-0 overflow-hidden opacity-0"),children:r.jsx("div",{className:"space-y-4 p-5",children:o})})]})};function C(){const[e,a]=i.useState(!1),[d]=s(),c=o(),u=n({defaultValues:{idHex:"",wardNo:"",zone:"",holdingNo:"",ownerName:"",address:"",propertyUsageType:"",noOfOccupants:void 0,sanitationType:"",sanitationConstructionYear:"",connectionToDrain:"",septicTankLocation:"",dimensionCapacity:"",noOfChambers:"",presenceOfSoak:"",desludgingVehicleAccessibility:"",ventilationCoverCondition:"",lastDesludgingDate:null,desludgingFrequency:"",serviceProvider:"",currentDesludgingPractice:"",latitude:"",longitude:"",propertyFrontPhoto:null,septicTankCoverPhoto:null,timestampedRecord:null},resolver:t(f)});i.useEffect(()=>{const e=d.get("idHex");e&&u.setValue("idHex",e)},[d,u]);const m=(new Date).getFullYear(),b=Array.from({length:50},(e,r)=>({value:String(m-r),label:String(m-r)}));return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-950 dark:to-gray-900",children:[r.jsx("header",{className:"sticky top-0 z-20 border-b border-gray-200 bg-white/95 shadow-sm backdrop-blur-sm dark:border-gray-800 dark:bg-gray-900/95",children:r.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[r.jsx("button",{onClick:()=>c(-1),className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gray-100 text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg",children:r.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Septic Tank Survey"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Fill all required fields"})]})]})]})}),r.jsx("main",{className:"pb-28",children:r.jsxs(h,{methods:u,onSubmit:u.handleSubmit(async e=>{try{l.success("Survey submitted successfully!")}catch(r){l.error("Failed to submit survey")}}),children:[r.jsxs("div",{className:"space-y-3 p-4",children:[r.jsxs(N,{number:1,title:"Property & Occupancy",icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),children:[r.jsx(x,{name:"idHex",label:"ID Hex",isRequired:!0,placeholder:"Enter ID Hex",className:"h-12 rounded-xl"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(x,{name:"wardNo",label:"Ward No.",isRequired:!0,placeholder:"Ward No.",className:"h-12 rounded-xl"}),r.jsx(x,{name:"zone",label:"Zone",isRequired:!0,placeholder:"Zone",className:"h-12 rounded-xl"})]}),r.jsx(x,{name:"holdingNo",label:"Holding No.",isRequired:!0,placeholder:"Enter Holding No.",className:"h-12 rounded-xl"}),r.jsx(x,{name:"ownerName",label:"Owner Name",isRequired:!0,placeholder:"Enter Owner Name",className:"h-12 rounded-xl"}),r.jsx(v,{name:"address",label:"Address",isRequired:!0,placeholder:"Enter complete address",rows:3}),r.jsx(y,{name:"propertyUsageType",label:"Property Usage Type",data:[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"industrial",label:"Industrial"},{value:"institutional",label:"Institutional"},{value:"mixed",label:"Mixed Use"}]}),r.jsx(x,{name:"noOfOccupants",label:"No. of Occupants",isRequired:!0,placeholder:"Enter number of occupants",type:"number",inputValidation:["number"],className:"h-12 rounded-xl"})]}),r.jsxs(N,{number:2,title:"Sanitation System",icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:[r.jsx(y,{name:"sanitationType",label:"Type of Sanitation",data:[{value:"septic_tank",label:"Septic Tank"},{value:"pit_latrine",label:"Pit Latrine"},{value:"sewer_connection",label:"Sewer Connection"},{value:"other",label:"Other"}]}),r.jsx(y,{name:"sanitationConstructionYear",label:"Construction Year",data:b,isSearch:!0}),r.jsx(y,{name:"connectionToDrain",label:"Connection to Drain",data:[{value:"connected",label:"Connected"},{value:"not_connected",label:"Not Connected"},{value:"partial",label:"Partially Connected"}]})]}),r.jsxs(N,{number:3,title:"Technical Details",icon:r.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:[r.jsx(x,{name:"septicTankLocation",label:"Location of Septic Tank",isRequired:!0,placeholder:"e.g., Front yard, Backyard, Basement",className:"h-12 rounded-xl"}),r.jsx(x,{name:"dimensionCapacity",label:"Dimension / Capacity",isRequired:!0,placeholder:"e.g., 2m x 1.5m x 1.5m or 2000 Liters",className:"h-12 rounded-xl"}),r.jsx(y,{name:"noOfChambers",label:"No. of Chambers",data:[{value:"1",label:"1 Chamber"},{value:"2",label:"2 Chambers"},{value:"3",label:"3 Chambers"},{value:"4+",label:"4 or more Chambers"}]}),r.jsx(y,{name:"presenceOfSoak",label:"Presence of Soak Pit",data:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]}),r.jsx(y,{name:"desludgingVehicleAccessibility",label:"Accessibility for Desludging Vehicle",data:[{value:"easy",label:"Easy Access"},{value:"moderate",label:"Moderate Access"},{value:"difficult",label:"Difficult Access"},{value:"not_accessible",label:"Not Accessible"}]}),r.jsx(y,{name:"ventilationCoverCondition",label:"Ventilation and Cover Condition",data:[{value:"good",label:"Good Condition"},{value:"fair",label:"Fair Condition"},{value:"poor",label:"Poor Condition"},{value:"missing",label:"Missing/Absent"}]})]}),r.jsxs(N,{number:4,title:"Desludging & Operations",icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),children:[r.jsx(k,{name:"lastDesludgingDate",label:"Date of Last Desludging (if any)",granularity:"day",placeholder:"Select date"}),r.jsx(y,{name:"desludgingFrequency",label:"Frequency of Desludging",data:[{value:"yearly",label:"Yearly"},{value:"2_years",label:"Every 2 Years"},{value:"3_years",label:"Every 3 Years"},{value:"5_years",label:"Every 5 Years or More"},{value:"never",label:"Never Desludged"},{value:"unknown",label:"Unknown"}]}),r.jsx(y,{name:"serviceProvider",label:"Service Provider Used",data:[{value:"ulb",label:"ULB (Municipal)"},{value:"private",label:"Private"},{value:"unknown",label:"Unknown"}]}),r.jsx(y,{name:"currentDesludgingPractice",label:"Current Desludging Practice",data:[{value:"mechanical",label:"Mechanical"},{value:"manual",label:"Manual"},{value:"unknown",label:"Unknown"}]})]}),r.jsxs(N,{number:5,title:"Geo Tagging & Evidence",icon:r.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),children:[r.jsxs("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-blue-800 dark:from-blue-900/20 dark:to-indigo-900/20",children:[r.jsx("h3",{className:"mb-3 font-semibold text-blue-800 dark:text-blue-300",children:"GPS Coordinates"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(x,{name:"latitude",label:"Latitude",isRequired:!0,placeholder:"Lat",className:"h-12 rounded-xl"}),r.jsx(x,{name:"longitude",label:"Longitude",isRequired:!0,placeholder:"Long",className:"h-12 rounded-xl"})]}),r.jsxs("button",{type:"button",onClick:()=>{navigator.geolocation?(a(!0),navigator.geolocation.getCurrentPosition(e=>{u.setValue("latitude",e.coords.latitude.toFixed(6)),u.setValue("longitude",e.coords.longitude.toFixed(6)),a(!1),l.success("Location captured successfully")},e=>{a(!1),l.error(`Unable to get location: ${e.message}`)},{enableHighAccuracy:!0,timeout:1e4})):l.error("Geolocation is not supported by your browser")},disabled:e,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 px-4 py-3.5 font-semibold text-white shadow-lg transition-all hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50",children:[e?r.jsxs("svg",{className:"h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):r.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e?"Getting Location...":"Capture GPS Location"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Geo Tagged Photographs"}),r.jsx("div",{className:"rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 p-4 dark:border-gray-600 dark:bg-gray-800",children:r.jsx(j,{name:"propertyFrontPhoto",label:"Property Front",accept:"image/*",capture:"environment"})}),r.jsx("div",{className:"rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 p-4 dark:border-gray-600 dark:bg-gray-800",children:r.jsx(j,{name:"septicTankCoverPhoto",label:"Septic Tank Cover / Access Point",accept:"image/*",capture:"environment"})}),r.jsx("div",{className:"rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 p-4 dark:border-gray-600 dark:bg-gray-800",children:r.jsx(j,{name:"timestampedRecord",label:"Time Stamped Digital Record",accept:"image/*",capture:"environment"})})]})]})]}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-gray-200 bg-white/95 p-4 shadow-2xl backdrop-blur-sm dark:border-gray-800 dark:bg-gray-900/95",children:r.jsx(p,{type:"submit",isLoading:u.formState.isSubmitting,className:"h-14 w-full rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 text-lg font-bold shadow-lg hover:from-blue-600 hover:to-indigo-700",children:"Submit Septic Tank Survey"})})]})})]})}export{C as default};
