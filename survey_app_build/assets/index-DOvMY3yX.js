import{u as e,r as s,j as a,z as r}from"./vendor-CknUfB-n.js";import{p as t,q as l,r as i,T as d,c as n,d as c,e as o,f as x,g as m,A as h,h as g,i as j,j as p,k as u,l as v,m as b,n as y,o as N}from"./textarea-qQS1eIPW.js";import{g as k}from"./useMasters-CDvZfPNO.js";import{b as f,B as w}from"./index-nWfPA2Hc.js";import{I as _,S as C,a as L,b as S,c as z,d as W}from"./select-BLJsPCI6.js";import{C as M,a as P,b as B,c as A,B as V,D,d as H,e as T,f as $,g as F,h as R}from"./card-FyrjlMrl.js";import{H as O}from"./icons-8V-pPYCs.js";import"./query-C_vMNwHo.js";import"./useCustomQuery-DLgrLCpf.js";import"./ui-DnraMZli.js";import"./axios-Dos3PyFQ.js";import"./zustand-Dt62-D6J.js";const I=()=>a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),E=()=>a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),U=()=>a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),q=()=>a.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),G=()=>a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Y=()=>a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Q=()=>a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Z=()=>a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),J=()=>a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),K=()=>a.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),X=()=>a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});function ee(){var ee,se,ae,re;const te=e(),{user:le}=f(),ie=k(Number(null==le?void 0:le._id)),[de,ne]=s.useState({page:1,limit:10,ward_no:"",verification_status:"",owner_name:"",waste_type:""}),[ce,oe]=s.useState(!1),[xe,me]=s.useState(!1),[he,ge]=s.useState(!1),[je,pe]=s.useState(!1),[ue,ve]=s.useState(null),[be,ye]=s.useState(""),[Ne,ke]=s.useState(""),{data:fe,isLoading:we,refetch:_e,isFetching:Ce}=t(de),Le=l(),Se=i(),ze=(null==(ee=null==fe?void 0:fe.data)?void 0:ee.surveys)||[],We=null==(se=null==fe?void 0:fe.data)?void 0:se.pagination,Me=(e,s)=>{ne(a=>({...a,[e]:s,page:1}))},Pe=e=>{ne(s=>({...s,page:e}))},Be=e=>({submitted:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-400",label:"Pending Review"},verified:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-emerald-700 dark:text-emerald-400",label:"Verified"},rejected:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",label:"Rejected"},needs_correction:{bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-400",label:"Needs Correction"}}[e]||{bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-400",label:e}),Ae=e=>({biodegradable:"Biodegradable (Wet)",non_biodegradable:"Non-Biodegradable (Dry)",mixed:"Mixed Waste",hazardous:"Hazardous",e_waste:"E-Waste"}[e]||e);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-emerald-50 to-teal-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950",children:[a.jsx("header",{className:"sticky top-0 z-30 border-b border-gray-200/60 bg-white/80 shadow-sm backdrop-blur-xl dark:border-gray-800/60 dark:bg-gray-900/80",children:a.jsx("div",{className:"mx-auto max-w-7xl",children:a.jsxs("div",{className:"flex items-center gap-4 px-4 py-4",children:[a.jsx("button",{onClick:()=>te(-1),className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gray-100 text-gray-600 transition-all hover:scale-105 hover:bg-gray-200 active:scale-95 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700","aria-label":"Go back",children:a.jsx(Z,{})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"SWM Surveys"})}),a.jsxs(w,{onClick:()=>te("/survey-app"),className:"hidden bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg shadow-emerald-500/25 transition-all hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/30 active:scale-95 sm:flex",children:[a.jsx(O,{}),a.jsx("span",{className:"ml-2",children:"Home"})]}),a.jsx(w,{onClick:()=>te("/survey-app"),size:"icon",className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white sm:hidden",children:a.jsx(O,{})})]})})}),a.jsx("div",{className:"mx-auto mt-4 max-w-7xl px-4",children:a.jsxs(M,{className:"border-0 bg-white/80 shadow-lg backdrop-blur-sm dark:bg-gray-800/80",children:[a.jsx(P,{className:"border-b border-gray-100 pb-4 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 text-white",children:a.jsx(E,{})}),a.jsxs("div",{children:[a.jsx(B,{className:"text-lg",children:"Search & Filter"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Find surveys quickly by applying filters"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(w,{variant:"outline",size:"sm",onClick:()=>oe(!ce),className:"sm:hidden",children:ce?"Hide Filters":"Show Filters"}),a.jsx(w,{variant:"outline",size:"sm",onClick:()=>{ne({page:1,limit:10,ward_no:"",verification_status:"",owner_name:"",waste_type:""})},className:"text-gray-600 dark:text-gray-300",children:"Clear All"}),a.jsxs(w,{variant:"outline",size:"sm",onClick:()=>_e(),className:"text-emerald-600 dark:text-emerald-400",disabled:Ce,children:[a.jsx(U,{}),a.jsx("span",{className:"ml-1 hidden sm:inline",children:"Refresh"})]})]})]})}),a.jsx(A,{className:"pt-6 "+(ce?"block":"hidden sm:block"),children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[a.jsxs("div",{className:"relative xl:col-span-2",children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Owner Name"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx(I,{})}),a.jsx(_,{placeholder:"Search owner name...",value:de.owner_name||"",onChange:e=>Me("owner_name",e.target.value),className:"pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ward No."}),a.jsxs(C,{value:de.ward_no||"all",onValueChange:e=>Me("ward_no","all"===e?"":e),children:[a.jsx(L,{children:a.jsx(S,{placeholder:"All Wards"})}),a.jsxs(z,{children:[a.jsx(W,{value:"all",children:"All Wards"}),null==(re=null==(ae=null==ie?void 0:ie.data)?void 0:ae.data)?void 0:re.map(e=>a.jsxs(W,{value:String(e.ward_name),children:["Ward ",e.ward_name]},e.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Waste Type"}),a.jsxs(C,{value:de.waste_type||"all",onValueChange:e=>Me("waste_type","all"===e?"":e),children:[a.jsx(L,{children:a.jsx(S,{placeholder:"All Types"})}),a.jsxs(z,{children:[a.jsx(W,{value:"all",children:"All Types"}),a.jsx(W,{value:"biodegradable",children:"Biodegradable"}),a.jsx(W,{value:"non_biodegradable",children:"Non-Biodegradable"}),a.jsx(W,{value:"mixed",children:"Mixed"}),a.jsx(W,{value:"hazardous",children:"Hazardous"}),a.jsx(W,{value:"e_waste",children:"E-Waste"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),a.jsxs(C,{value:de.verification_status||"all",onValueChange:e=>Me("verification_status","all"===e?"":e),children:[a.jsx(L,{children:a.jsx(S,{placeholder:"All Status"})}),a.jsxs(z,{children:[a.jsx(W,{value:"all",children:"All Status"}),a.jsx(W,{value:"submitted",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-500"}),"Pending Review"]})}),a.jsx(W,{value:"verified",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Verified"]})}),a.jsx(W,{value:"rejected",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500"}),"Rejected"]})}),a.jsx(W,{value:"needs_correction",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-orange-500"}),"Needs Correction"]})})]})]})]})]})})]})}),a.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6",children:a.jsxs(M,{className:"overflow-hidden border-0 bg-white/80 shadow-lg backdrop-blur-sm dark:bg-gray-800/80",children:[a.jsx(P,{className:"border-b border-gray-100 bg-gray-50/50 dark:border-gray-700 dark:bg-gray-900/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(B,{className:"text-lg",children:["Survey Records",We&&a.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:["Showing ",ze.length," of ",We.total," records"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Per page:"}),a.jsxs(C,{value:String(de.limit),onValueChange:e=>Me("limit",e),children:[a.jsx(L,{className:"w-20",children:a.jsx(S,{})}),a.jsxs(z,{children:[a.jsx(W,{value:"10",children:"10"}),a.jsx(W,{value:"25",children:"25"}),a.jsx(W,{value:"50",children:"50"}),a.jsx(W,{value:"100",children:"100"})]})]})]})]})}),a.jsx(A,{className:"p-0",children:we?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading surveys..."})]})}):0===ze.length?a.jsxs("div",{className:"flex h-64 flex-col items-center justify-center gap-4 p-8 text-center",children:[a.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 text-gray-400 dark:bg-gray-700",children:a.jsx(X,{})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No surveys found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your filters or create a new survey"})]}),a.jsxs(w,{onClick:()=>te("/survey-app/dashboard/swm-survey-form"),className:"mt-2 bg-gradient-to-r from-emerald-600 to-teal-600",children:[a.jsx(J,{}),a.jsx("span",{className:"ml-2",children:"Create New Survey"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden overflow-x-auto lg:block",children:a.jsxs(d,{children:[a.jsx(n,{children:a.jsxs(c,{className:"bg-gray-50/50 dark:bg-gray-900/50",children:[a.jsx(o,{className:"w-16 font-semibold",children:"S.No"}),a.jsx(o,{className:"font-semibold",children:"Owner Details"}),a.jsx(o,{className:"font-semibold",children:"Location"}),a.jsx(o,{className:"font-semibold",children:"Property Info"}),a.jsx(o,{className:"font-semibold",children:"Waste Details"}),a.jsx(o,{className:"font-semibold",children:"Status"}),a.jsx(o,{className:"text-right font-semibold",children:"Actions"})]})}),a.jsx(x,{children:ze.map((e,s)=>{const r=Be(e.verification_status);return a.jsxs(c,{className:"group transition-colors hover:bg-emerald-50/50 dark:hover:bg-emerald-900/10",children:[a.jsx(m,{className:"font-medium text-gray-500",children:(de.page-1)*de.limit+s+1}),a.jsx(m,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.owner_name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Tag: ",e.tag_id||"-"]})]})}),a.jsx(m,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(K,{}),a.jsxs("span",{className:"text-sm",children:["Ward ",e.ward_no]}),e.zone&&a.jsxs("span",{className:"text-gray-400",children:["• ",e.zone]})]}),a.jsx("p",{className:"max-w-[200px] truncate text-xs text-gray-500 dark:text-gray-400",title:e.address,children:e.address})]})}),a.jsx(m,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsx(V,{variant:"outline",className:"font-normal",children:e.property_type}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.usage_type})]})}),a.jsx(m,{children:a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsx("p",{children:Ae(e.waste_type)}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Bins:"," ",a.jsx("span",{className:e.bins_available?"text-emerald-600":"text-red-600",children:e.bins_available?"Yes":"No"})]})]})}),a.jsx(m,{children:a.jsx(V,{className:`${r.bg} ${r.text} border-0`,children:r.label})}),a.jsx(m,{children:a.jsxs("div",{className:"flex justify-end gap-1 opacity-80 transition-opacity group-hover:opacity-100",children:[a.jsx(w,{variant:"ghost",size:"sm",onClick:()=>{ve(e),pe(!0)},className:"h-8 w-8 p-0 text-emerald-600 hover:bg-emerald-100 hover:text-emerald-700 dark:text-emerald-400 dark:hover:bg-emerald-900/30",title:"View Details",children:a.jsx(q,{})}),a.jsx(w,{variant:"ghost",size:"sm",onClick:()=>{ve(e),ge(!0)},className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:text-blue-400 dark:hover:bg-blue-900/30",title:"Verify Survey",children:a.jsx(Q,{})}),a.jsx(w,{variant:"ghost",size:"sm",onClick:()=>te(`/survey-app/dashboard/swm-survey-form?id=${e.id}`),className:"h-8 w-8 p-0 text-amber-600 hover:bg-amber-100 hover:text-amber-700 dark:text-amber-400 dark:hover:bg-amber-900/30",title:"Edit Survey",children:a.jsx(G,{})}),a.jsx(w,{variant:"ghost",size:"sm",onClick:()=>{ve(e),me(!0)},className:"h-8 w-8 p-0 text-red-600 hover:bg-red-100 hover:text-red-700 dark:text-red-400 dark:hover:bg-red-900/30",title:"Delete Survey",children:a.jsx(Y,{})})]})})]},e.id)})})]})}),a.jsx("div",{className:"space-y-4 p-4 lg:hidden",children:ze.map(e=>{const s=Be(e.verification_status);return a.jsx(M,{className:"overflow-hidden border border-gray-200 shadow-sm transition-all hover:shadow-md dark:border-gray-700",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.owner_name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Tag: ",e.tag_id||"-"]})]}),a.jsx(V,{className:`${s.bg} ${s.text} border-0`,children:s.label})]}),a.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Location"}),a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Ward ",e.ward_no,e.zone&&` • ${e.zone}`]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Property"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.property_type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Waste Type"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Ae(e.waste_type)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Date"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.created_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex gap-2 border-t border-gray-100 pt-3 dark:border-gray-700",children:[a.jsxs(w,{variant:"outline",size:"sm",onClick:()=>{ve(e),pe(!0)},className:"flex-1",children:[a.jsx(q,{}),a.jsx("span",{className:"ml-1",children:"View"})]}),a.jsxs(w,{variant:"outline",size:"sm",onClick:()=>{ve(e),ge(!0)},className:"flex-1 text-emerald-600 hover:bg-emerald-50 dark:text-emerald-400",children:[a.jsx(Q,{}),a.jsx("span",{className:"ml-1",children:"Verify"})]}),a.jsxs(w,{variant:"outline",size:"sm",onClick:()=>te(`/survey-app/dashboard/swm-survey-form?id=${e.id}`),className:"flex-1 text-amber-600 hover:bg-amber-50 dark:text-amber-400",children:[a.jsx(G,{}),a.jsx("span",{className:"ml-1",children:"Edit"})]}),a.jsx(w,{variant:"outline",size:"sm",onClick:()=>{ve(e),me(!0)},className:"text-red-600 hover:bg-red-50 dark:text-red-400",children:a.jsx(Y,{})})]})]})},e.id)})}),We&&We.totalPages>1&&a.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 px-4 py-4 dark:border-gray-700 sm:px-6",children:[a.jsxs("div",{className:"hidden text-sm text-gray-500 dark:text-gray-400 sm:block",children:["Page"," ",a.jsx("span",{className:"font-medium",children:We.page})," of"," ",a.jsx("span",{className:"font-medium",children:We.totalPages})," ","• ",We.total," total records"]}),a.jsxs("div",{className:"flex flex-1 justify-between gap-2 sm:flex-none sm:justify-end",children:[a.jsxs(w,{variant:"outline",size:"sm",disabled:!We.hasPrevPage,onClick:()=>Pe(We.page-1),className:"min-w-[100px]",children:[a.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),a.jsx("div",{className:"hidden items-center gap-1 sm:flex",children:Array.from({length:Math.min(5,We.totalPages)},(e,s)=>{let r;return r=We.totalPages<=5||We.page<=3?s+1:We.page>=We.totalPages-2?We.totalPages-4+s:We.page-2+s,a.jsx(w,{variant:We.page===r?"default":"ghost",size:"sm",onClick:()=>Pe(r),className:"h-8 w-8 p-0 "+(We.page===r?"bg-emerald-600 text-white hover:bg-emerald-700":""),children:r},r)})}),a.jsxs(w,{variant:"outline",size:"sm",disabled:!We.hasNextPage,onClick:()=>Pe(We.page+1),className:"min-w-[100px]",children:["Next",a.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})})]})}),a.jsx(h,{open:xe,onOpenChange:me,children:a.jsxs(g,{className:"max-w-md",children:[a.jsxs(j,{children:[a.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30",children:a.jsx(Y,{})}),a.jsx(p,{className:"text-center",children:"Delete Survey"}),a.jsxs(u,{className:"text-center",children:["Are you sure you want to delete the survey for"," ",a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:null==ue?void 0:ue.owner_name}),"? This action cannot be undone."]})]}),a.jsxs(v,{className:"gap-2 sm:justify-center",children:[a.jsx(b,{className:"sm:min-w-[100px]",children:"Cancel"}),a.jsx(y,{onClick:async()=>{if(ue)try{await Le.mutateAsync(ue.id),r.success("Survey deleted successfully"),me(!1),ve(null),_e()}catch(e){r.error("Failed to delete survey")}},className:"bg-red-600 text-white hover:bg-red-700 sm:min-w-[100px]",disabled:Le.isPending,children:Le.isPending?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})}),a.jsx(D,{open:he,onOpenChange:ge,children:a.jsxs(H,{className:"max-w-md",children:[a.jsxs(T,{children:[a.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-emerald-100 dark:bg-emerald-900/30",children:a.jsx(Q,{})}),a.jsx($,{className:"text-center",children:"Verify Survey"}),a.jsxs(F,{className:"text-center",children:["Update the verification status for"," ",a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:null==ue?void 0:ue.owner_name})]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Verification Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs(C,{value:be,onValueChange:ye,children:[a.jsx(L,{children:a.jsx(S,{placeholder:"Select verification status"})}),a.jsxs(z,{children:[a.jsx(W,{value:"verified",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Verified - All information is correct"]})}),a.jsx(W,{value:"rejected",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500"}),"Rejected - Survey is invalid"]})}),a.jsx(W,{value:"needs_correction",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-orange-500"}),"Needs Correction - Some details need to be fixed"]})})]})]})]}),("rejected"===be||"needs_correction"===be)&&a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Notes / Reason ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(N,{value:Ne,onChange:e=>ke(e.target.value),placeholder:"Please provide details about the issue or what needs to be corrected...",rows:4,className:"resize-none"})]})]}),a.jsxs(R,{className:"gap-2",children:[a.jsx(w,{variant:"outline",onClick:()=>{ge(!1),ye(""),ke("")},children:"Cancel"}),a.jsx(w,{onClick:async()=>{if(ue&&be)try{await Se.mutateAsync({id:ue.id,data:{verification_status:be,correction_notes:Ne||void 0}}),r.success("Survey verification updated successfully"),ge(!1),ve(null),ye(""),ke(""),_e()}catch(e){r.error("Failed to verify survey")}},disabled:!be||("rejected"===be||"needs_correction"===be)&&!Ne||Se.isPending,className:"bg-gradient-to-r from-emerald-600 to-green-600 text-white",children:Se.isPending?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Status"})]})]})}),a.jsx(D,{open:je,onOpenChange:pe,children:a.jsxs(H,{className:"max-h-[85vh] max-w-3xl overflow-y-auto",children:[a.jsx(T,{children:a.jsxs($,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 text-white",children:a.jsx(q,{})}),a.jsxs("div",{children:[a.jsx("span",{className:"block",children:"Survey Details"}),ue&&a.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["ID: ",ue.id]})]})]})}),ue&&a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsx("div",{className:`rounded-lg p-4 ${Be(ue.verification_status).bg}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Verification Status"}),a.jsx("p",{className:`text-lg font-bold ${Be(ue.verification_status).text}`,children:Be(ue.verification_status).label})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Created on"}),a.jsx("p",{className:"text-sm font-medium",children:new Date(ue.created_at).toLocaleDateString()})]})]})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Owner & Property Information"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 rounded-lg border border-gray-200 bg-gray-50/50 p-4 dark:border-gray-700 dark:bg-gray-800/50 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Owner Name"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.owner_name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tag ID"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.tag_id||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ward No."}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.ward_no})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Zone"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.zone||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Property Type"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.property_type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Usage Type"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.usage_type})]}),a.jsxs("div",{className:"col-span-2 md:col-span-3",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Address"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.address})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Waste Management Details"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 rounded-lg border border-gray-200 bg-gray-50/50 p-4 dark:border-gray-700 dark:bg-gray-800/50 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Waste Type"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:Ae(ue.waste_type)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Bins Available"}),a.jsx("p",{className:"font-semibold "+(ue.bins_available?"text-emerald-600":"text-red-600"),children:ue.bins_available?"Yes":"No"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:[a.jsx(K,{}),"Location & Photos"]}),a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50/50 p-4 dark:border-gray-700 dark:bg-gray-800/50",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"GPS Coordinates"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ue.latitude&&ue.longitude?`${ue.latitude}, ${ue.longitude}`:"Not available"})]}),ue.front_view_photo&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-xs text-gray-500",children:"Front View Photo"}),a.jsx("img",{src:ue.front_view_photo,alt:"Front View",className:"h-40 w-full rounded-lg object-cover"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4 text-sm text-gray-500 dark:border-gray-700 dark:text-gray-400",children:[a.jsxs("div",{children:["Submitted by:"," ",a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ue.submitted_by_name||"N/A"})]}),a.jsxs("div",{children:["Created:"," ",a.jsx("span",{className:"font-medium",children:new Date(ue.created_at).toLocaleDateString()})]})]}),ue.correction_notes&&a.jsxs("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-4 dark:border-orange-800 dark:bg-orange-900/20",children:[a.jsx("p",{className:"mb-1 text-sm font-medium text-orange-800 dark:text-orange-300",children:"Correction Notes"}),a.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:ue.correction_notes})]})]})]})})]})}export{ee as default};
