import{w as e,c as t,j as a,C as s,x as r,r as l,y as o,z as i,A as n}from"./vendor-Ca538C0E.js";import{c as d,a as c}from"./yup-CPZdV8wR.js";import{F as u,R as h,B as m}from"./datetime-picker-mOSA-c7L.js";import{u as x,a as f}from"./index-DEfokZMW.js";import"./select-98RBnkn3.js";import{I as p}from"./input-BNwlqupa.js";import{E as g,p as b}from"./ui-CVRkcQzQ.js";import{u as y,a as v}from"./useCustomQuery-wCbSWbS4.js";import{M as j,R as w,A as N}from"./icons-yeVZOzyZ.js";import"./query-CtvhRNPr.js";import"./axios-Dos3PyFQ.js";import"./zustand-CI5b5TJj.js";function C({name:r,label:l,inputSize:o,...i}){const{control:n}=e(),[d,c]=t.useState(!1);return a.jsx(s,{name:r,control:n,render:({field:{ref:e,...t},fieldState:{error:s}})=>a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:l,children:[l," ",s&&l&&a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(p,{...t,value:"number"==typeof t.value&&0===t.value?"":t.value,ref:e,className:`mt-1 ${s?"border-red-400":null}\n              ${("small"===o?"h-8":"medium"===o&&"h-10")||"large"===o&&"h-12"||"h-9"}`,type:d?"text":"password",...i}),a.jsx("button",{style:{backgroundColor:"none"},type:"button",className:"absolute right-3 top-4",onClick:()=>c(e=>!e),children:d?a.jsx(g,{width:20,height:20}):a.jsx(b,{width:20,height:20})})]}),s&&a.jsx("span",{className:"text-red-400 text-xs",children:null==s?void 0:s.message})]})})}function S(e){const t="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e",a=r.enc.Latin1.parse(r.SHA256(t).toString(r.enc.Latin1)),s=r.SHA256(t).toString().substring(0,16),l=r.enc.Latin1.parse(s),o=r.AES.encrypt(e,a,{iv:l,mode:r.mode.CBC,padding:r.pad.Pkcs7});return r.enc.Base64.stringify(o.ciphertext)}const k=d({email:c().email("Enter a valid email").required("Email is required"),password:c().min(8,"Password must be at least 8 characters").required(),captcha:c().required("Please enter the captcha")});function A(){const[e,t]=l.useState(""),s=y({}),{login:d}=x(),c=o({defaultValues:{email:"",password:"",captcha:""},resolver:n(k)}),p=v({api:`${f.getCaptcha}`,key:"getCaptcha",value:[],options:{enabled:!0}}),g=async()=>{if(null==p?void 0:p.data){const e=function(e){const t="c2ec6f788fb85720bf48c8cc7c2db572596c585a15df18583e1234f147b1c2897aad12e7bebbc4c03c765d0e878427ba6370439d38f39340d7e";try{const a=r.enc.Latin1.parse(r.SHA256(t).toString(r.enc.Latin1)),s=r.SHA256(t).toString().substring(0,16),l=r.enc.Latin1.parse(s),o=r.enc.Base64.parse(e);return r.AES.decrypt({ciphertext:o},a,{iv:l,mode:r.mode.CBC,padding:r.pad.Pkcs7}).toString(r.enc.Utf8)}catch(a){return"Decryption failed"}}(null==p?void 0:p.data.data.captcha_code),a=document.createElement("canvas");a.width=200,a.height=50;const s=a.getContext("2d");if(s){const r=s.createLinearGradient(0,0,a.width,a.height);r.addColorStop(0,"#f0f9ff"),r.addColorStop(1,"#e0f2fe"),s.fillStyle=r,s.fillRect(0,0,a.width,a.height);for(let e=0;e<25;e++)s.fillStyle=`rgba(59, 130, 246, ${.15*Math.random()})`,s.fillRect(Math.random()*a.width,Math.random()*a.height,2,2);for(let e=0;e<2;e++)s.strokeStyle=`rgba(59, 130, 246, ${.2*Math.random()})`,s.lineWidth=1,s.beginPath(),s.moveTo(Math.random()*a.width,Math.random()*a.height),s.quadraticCurveTo(Math.random()*a.width,Math.random()*a.height,Math.random()*a.width,Math.random()*a.height),s.stroke();s.font="bold 28px Inter, system-ui, sans-serif",s.fillStyle="#1e40af",s.textAlign="center",s.textBaseline="middle";const l=e.split(""),o=(a.width-22*l.length)/2;l.forEach((e,t)=>{const r=o+26*t+15,l=a.height/2+4*(Math.random()-.5);s.save(),s.translate(r,l),s.rotate(.25*(Math.random()-.5)),s.fillText(e,0,0),s.restore()}),t(a.toDataURL())}}};l.useEffect(()=>{g()},[null==p?void 0:p.data]);const b=e=>(e.preventDefault(),!1),A=e=>{(e.ctrlKey||e.metaKey)&&["c","v","x"].includes(e.key.toLowerCase())&&e.preventDefault()};return a.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -left-40 -top-40 h-80 w-80 rounded-full bg-blue-100 opacity-50 blur-3xl"}),a.jsx("div",{className:"absolute -bottom-40 -right-40 h-80 w-80 rounded-full bg-indigo-100 opacity-50 blur-3xl"}),a.jsx("div",{className:"absolute left-1/2 top-1/2 h-96 w-96 -translate-x-1/2 -translate-y-1/2 rounded-full bg-purple-50 opacity-30 blur-3xl"})]}),a.jsxs("div",{className:"relative flex min-h-screen flex-col",children:[a.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"rounded-3xl border border-white/50 bg-white/80 p-8 shadow-xl shadow-gray-200/50 backdrop-blur-xl transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/60 sm:p-10",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-600 shadow-lg shadow-blue-500/30",children:a.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Sign in to continue to your account"})]}),a.jsx(u,{methods:c,onSubmit:c.handleSubmit(async e=>{var t,a,r,l,o;try{const n=await s.mutateAsync({api:f.login,data:{email:e.email,password:S(e.password),captcha_code:S(e.captcha),captcha_id:null==(a=null==(t=null==p?void 0:p.data)?void 0:t.data)?void 0:a.captcha_id,moduleId:"48"}});(null==(r=null==n?void 0:n.data)?void 0:r.status)?(await d(null==n?void 0:n.data),i.success(null==(l=null==n?void 0:n.data)?void 0:l.message)):(i.error(null==(o=null==n?void 0:n.data)?void 0:o.message),null==p||p.refetch(),c.setValue("captcha",""))}catch(n){i.error(function(e){return e instanceof Error?e.message:String(e)}(n.message)),null==p||p.refetch(),c.setValue("captcha","")}finally{c.reset({...c.getValues(),email:"",password:"",captcha:""})}}),children:a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:a.jsx(j,{className:"h-5 w-5 text-gray-400"})}),a.jsx(h,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 py-3.5 pl-12 pr-4 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"email",inputValidation:["removeSpace","email"],placeholder:"Enter your email",autoComplete:"off",onPaste:b,onCopy:b,onCut:b,onKeyDown:A})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),a.jsx(C,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 px-4 py-3.5 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"password",placeholder:"Enter your password",autoComplete:"off",onPaste:b,onCopy:b,onCut:b,onKeyDown:A})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Security Verification"}),a.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-gray-50/80 p-3",children:[a.jsx("div",{className:"flex-shrink-0",children:(null==p?void 0:p.isFetching)?a.jsx("div",{className:"flex h-12 w-36 items-center justify-center rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:a.jsx(w,{className:"h-5 w-5 animate-spin text-blue-500"})}):e?a.jsx("img",{src:e,alt:"CAPTCHA",className:"h-12 w-36 rounded-lg border border-gray-200 object-contain"}):a.jsx("div",{className:"flex h-12 w-36 items-center justify-center rounded-lg bg-gray-100 text-xs text-gray-400",children:"Failed to load"})}),a.jsx("button",{type:"button",onClick:()=>{null==p||p.refetch(),c.setValue("captcha","")},disabled:null==p?void 0:p.isFetching,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-white text-gray-500 shadow-sm transition-all duration-200 hover:bg-blue-50 hover:text-blue-600 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",title:"Refresh CAPTCHA",children:a.jsx(w,{className:"h-4 w-4 "+((null==p?void 0:p.isFetching)?"animate-spin":"")})})]}),a.jsx(h,{className:"w-full rounded-xl border-gray-200 bg-gray-50/50 px-4 py-3.5 text-gray-900 transition-all duration-200 placeholder:text-gray-400 focus:border-blue-500 focus:bg-white focus:ring-2 focus:ring-blue-500/20",name:"captcha",placeholder:"Enter the code shown above",autoComplete:"off",onPaste:b,onCopy:b,onCut:b,onKeyDown:A})]}),a.jsx(m,{type:"submit",isLoading:c.formState.isSubmitting,className:"group mt-2 w-full rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 py-4 font-semibold text-white shadow-lg shadow-blue-500/25 transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-xl hover:shadow-blue-500/30 active:scale-[0.98]",children:a.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Sign In",a.jsx(N,{className:"h-5 w-5 transition-transform duration-300 group-hover:translate-x-1"})]})})]})})]}),a.jsxs("div",{className:"mt-6 flex justify-center gap-6 text-sm",children:[a.jsx("a",{href:"#",className:"text-gray-500 transition-colors hover:text-blue-600",children:"Need Help?"}),a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("a",{href:"#",className:"text-gray-500 transition-colors hover:text-blue-600",children:"Contact Support"})]})]})}),a.jsx("footer",{className:"w-full px-6 py-4",children:a.jsx("div",{className:"mx-auto max-w-7xl text-center",children:a.jsx("p",{className:"text-sm text-gray-400",children:"Â© 2026 UD&HD. All rights reserved."})})})]})]})}function M(){return a.jsx("div",{className:"",children:a.jsx(A,{})})}export{M as default};
