import{r as e,j as s,u as t,L as r}from"./vendor-CX7Sr6rY.js";import{u as a,e as l,f as n,c as o,D as i,g as d,h as c,i as m,j as x,k as u,l as f,m as h,H as g,L as j}from"./index-BHHC9fLw.js";import{a8 as p,a9 as b,U as N,K as v,aa as w,r as y,ab as k,n as C,T as E}from"./icons--btW49PO.js";import{aa as S,ab as D,ac as L}from"./ui-B_wVOan7.js";import{C as z}from"./index-FFPzzKQg.js";import{D as T,a as R,b as P,c as A}from"./dialog-BuwjdHGA.js";function F(){const{theme:t,setTheme:r}=l();return e.useEffect(()=>{const e="dark"===t?"#020817":"#fff",s=document.querySelector("meta[name='theme-color']");s&&s.setAttribute("content",e)},[t]),s.jsx(n,{size:"icon",variant:"ghost",className:"rounded-full",onClick:()=>r("light"===t?"dark":"light"),children:"light"===t?s.jsx(p,{size:20}):s.jsx(b,{size:20})})}const K=e.forwardRef(({className:e,...t},r)=>s.jsx(S,{ref:r,className:o("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));K.displayName=S.displayName;const q=e.forwardRef(({className:e,...t},r)=>s.jsx(D,{ref:r,className:o("aspect-square h-full w-full",e),...t}));q.displayName=D.displayName;const M=e.forwardRef(({className:e,...t},r)=>s.jsx(L,{ref:r,className:o("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));function U(){const{user:e,logout:r}=a();return t(),s.jsxs(i,{children:[s.jsx(d,{asChild:!0,children:s.jsx(n,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsxs(K,{className:"h-10 w-10",children:[s.jsx(q,{src:(null==e?void 0:e.imgFullPath)||"/images/user.png",alt:"profile"}),s.jsx(M,{children:"SN"})]})})}),s.jsxs(c,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(m,{className:"cursor-pointer font-normal",onClick:()=>{window.location.href="/settings/dashboard/home"},children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:null==e?void 0:e.fullName}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:null==e?void 0:e.email})]})}),s.jsx(x,{}),s.jsxs(u,{children:[s.jsxs(f,{onClick:()=>window.location.replace("/settings/dashboard/home"),className:"flex items-center gap-2",children:[s.jsx(N,{size:16}),s.jsx("span",{children:"Profile"})]}),s.jsxs(f,{onClick:()=>window.location.replace("/settings/dashboard/change-password"),className:"flex items-center gap-2",children:[s.jsx(v,{size:16}),s.jsx("span",{children:"Change Password"})]}),s.jsxs(f,{onClick:()=>window.location.replace("/settings/dashboard/notification"),className:"flex items-center gap-2",children:[s.jsx(w,{size:16}),s.jsx("span",{children:"Notifications"})]})]}),s.jsxs(f,{onClick:()=>{z("Are you sure?","Please confirm",async()=>{r()})},className:"flex items-center gap-2 text-red-600 focus:text-red-600",children:[s.jsx(y,{size:16}),s.jsx("span",{children:"Log out"})]})]})]})}function H({links:r}){const[a,l]=e.useState(""),[n,i]=e.useState([]),[d,c]=e.useState(!1),[m,x]=e.useState(-1),[u,f]=e.useState(!1),h=e.useRef(null),g=e.useRef(null),j=t(),p=(e,s=[])=>{const t=[];return e.forEach(e=>{e.href&&t.push({title:e.title,href:e.href,path:[...s,e.title]}),e.sub&&e.sub.length>0&&t.push(...p(e.sub,[...s,e.title]))}),t};e.useEffect(()=>{if(""===a.trim())return i([]),c(!1),void x(-1);const e=p(r.filter(e=>e.is_sidebar)),s=a.toLowerCase(),t=e.filter(e=>e.title.toLowerCase().includes(s)||e.path.some(e=>e.toLowerCase().includes(s)));i(t.slice(0,10)),c(!0),x(-1)},[a,r]),e.useEffect(()=>{u||(l(""),i([]),c(!1),x(-1))},[u]),e.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),f(!0),setTimeout(()=>{var e;return null==(e=g.current)?void 0:e.focus()},100))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const b=e=>{j(e),f(!1)};return s.jsx(s.Fragment,{children:s.jsx(T,{open:u,onOpenChange:f,children:s.jsxs(R,{className:"sm:max-w-[600px]",children:[s.jsx(P,{children:s.jsx(A,{className:"sr-only",children:"Search Menu"})}),s.jsxs("div",{ref:h,className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(k,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),s.jsx("input",{ref:g,type:"text",placeholder:"Search menu items...",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>{var s,t;if(d&&0!==n.length)switch(e.key){case"ArrowDown":e.preventDefault(),x(e=>e<n.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),x(e=>e>0?e-1:n.length-1);break;case"Enter":e.preventDefault(),m>=0&&m<n.length&&b(n[m].href);break;case"Escape":c(!1),f(!1),null==(t=g.current)||t.blur()}else"Escape"===e.key&&(f(!1),c(!1),null==(s=g.current)||s.blur())},className:o("w-full rounded-lg border border-input bg-background py-3 pl-10 pr-10 text-base outline-none transition-all","placeholder:text-muted-foreground","focus:border-primary focus:ring-2 focus:ring-primary/20"),autoFocus:!0}),a&&s.jsx("button",{onClick:()=>{var e;l(""),c(!1),null==(e=g.current)||e.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:s.jsx(C,{className:"h-5 w-5"})})]}),a&&s.jsx("div",{className:"max-h-[400px] overflow-y-auto rounded-lg border border-border",children:n.length>0?s.jsx("div",{className:"divide-y divide-border",children:n.map((e,t)=>s.jsx("button",{onClick:()=>b(e.href),className:o("w-full px-4 py-3 text-left transition-colors",m===t?"bg-accent text-accent-foreground":"text-foreground hover:bg-accent/50"),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"h-4 w-4 text-slate-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium",children:e.title}),e.path.length>1&&s.jsx("div",{className:"mt-0.5 text-xs text-muted-foreground",children:e.path.slice(0,-1).join(" › ")})]})]})},`${e.href}-${t}`))}):s.jsxs("div",{className:"p-8 text-center text-sm text-muted-foreground",children:['No menu items found for "',a,'"']})}),!a&&s.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-8 text-center",children:[s.jsx(k,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),s.jsx("p",{className:"mt-3 text-sm text-foreground/80",children:"Type to search menu items"}),s.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Use ↑↓ to navigate, Enter to select, Esc to close"})]})]})]})})})}M.displayName=L.displayName;const $=e.forwardRef(({children:t,title:l="",subTitle:n="",searchLink:o="",meta:i,name:d,code:c,description:m,...x},u)=>{!function(s=""){const{setTitle:t}=a();e.useEffect(()=>{t(s)},[s])}(l);const{user:f}=a(),p=h();return e.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[l]),s.jsxs(s.Fragment,{children:[s.jsxs(g,{children:[s.jsx("title",{children:(l?l+" |":"")+"  Master-Control"}),i]}),s.jsx("div",{ref:u,...x,children:s.jsxs(j,{fixed:!0,children:[s.jsxs(j.Header,{sticky:!0,className:"border-b bg-background/80 shadow-sm backdrop-blur-md",children:[s.jsxs("div",{className:"flex w-full items-center justify-between gap-3 px-2 sm:px-4",children:[s.jsx("div",{className:"hidden lg:block lg:w-8"}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4",children:[s.jsx("div",{className:"hidden sm:block",children:s.jsx(H,{links:p})}),s.jsx("div",{className:"hidden min-w-0 flex-col items-end md:flex",children:s.jsx("span",{className:"truncate rounded-full border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 px-3 py-1.5 text-xs font-semibold text-blue-700 shadow-sm",children:(null==f?void 0:f.roleName)||""})}),s.jsx(F,{}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(U,{})})]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 border-t border-border px-2 py-2 sm:hidden",children:[s.jsx(H,{links:p}),s.jsx("span",{className:"truncate rounded-full border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 px-2.5 py-1 text-xs font-semibold text-blue-700",children:(null==f?void 0:f.roleName)||""})]})]}),s.jsxs(j.Body,{children:[s.jsxs("div",{className:"mb-2 sm:mb-4",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h2",{className:"mb-1 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-xl font-bold tracking-tight text-transparent sm:text-2xl",children:l}),n&&s.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground sm:text-base",children:n})]}),(d||c)&&s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("div",{className:"rounded-lg border bg-card p-2 shadow-sm",children:[d&&s.jsxs("div",{className:"mb-1 text-sm font-bold text-foreground",children:["Name-: ",d]}),c&&s.jsxs("div",{className:"rounded bg-muted px-2 py-0.5 font-mono text-xs font-bold text-muted-foreground",children:["Employee Code-: ",c]})]})})]}),o&&s.jsx("div",{className:"mt-4",children:s.jsxs(r,{className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-md transition-all hover:from-blue-700 hover:to-indigo-700 hover:shadow-lg active:scale-95",to:o,target:"_blank",children:[s.jsx(E,{className:"h-4 w-4"}),"Search Details"]})})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:t})]})]})})]})});export{$ as P};
